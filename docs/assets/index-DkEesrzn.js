(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const g of document.querySelectorAll('link[rel="modulepreload"]'))d(g);new MutationObserver(g=>{for(const _ of g)if(_.type==="childList")for(const b of _.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&d(b)}).observe(document,{childList:!0,subtree:!0});function h(g){const _={};return g.integrity&&(_.integrity=g.integrity),g.referrerPolicy&&(_.referrerPolicy=g.referrerPolicy),g.crossOrigin==="use-credentials"?_.credentials="include":g.crossOrigin==="anonymous"?_.credentials="omit":_.credentials="same-origin",_}function d(g){if(g.ep)return;g.ep=!0;const _=h(g);fetch(g.href,_)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function getDefaultExportFromCjs$1(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$1=Symbol.for("react.element"),n$1=Symbol.for("react.portal"),p$3=Symbol.for("react.fragment"),q$1=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),t=Symbol.for("react.provider"),u$1=Symbol.for("react.context"),v$1=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),x$1=Symbol.for("react.memo"),y$1=Symbol.for("react.lazy"),z$2=Symbol.iterator;function A$2(s){return s===null||typeof s!="object"?null:(s=z$2&&s[z$2]||s["@@iterator"],typeof s=="function"?s:null)}var B$1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$1=Object.assign,D$1={};function E$2(s,o,h){this.props=s,this.context=o,this.refs=D$1,this.updater=h||B$1}E$2.prototype.isReactComponent={};E$2.prototype.setState=function(s,o){if(typeof s!="object"&&typeof s!="function"&&s!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,s,o,"setState")};E$2.prototype.forceUpdate=function(s){this.updater.enqueueForceUpdate(this,s,"forceUpdate")};function F$1(){}F$1.prototype=E$2.prototype;function G$1(s,o,h){this.props=s,this.context=o,this.refs=D$1,this.updater=h||B$1}var H$1=G$1.prototype=new F$1;H$1.constructor=G$1;C$1(H$1,E$2.prototype);H$1.isPureReactComponent=!0;var I$1=Array.isArray,J=Object.prototype.hasOwnProperty,K$1={current:null},L$4={key:!0,ref:!0,__self:!0,__source:!0};function M$1(s,o,h){var d,g={},_=null,b=null;if(o!=null)for(d in o.ref!==void 0&&(b=o.ref),o.key!==void 0&&(_=""+o.key),o)J.call(o,d)&&!L$4.hasOwnProperty(d)&&(g[d]=o[d]);var j=arguments.length-2;if(j===1)g.children=h;else if(1<j){for(var et=Array(j),tt=0;tt<j;tt++)et[tt]=arguments[tt+2];g.children=et}if(s&&s.defaultProps)for(d in j=s.defaultProps,j)g[d]===void 0&&(g[d]=j[d]);return{$$typeof:l$1,type:s,key:_,ref:b,props:g,_owner:K$1.current}}function N$1(s,o){return{$$typeof:l$1,type:s.type,key:o,ref:s.ref,props:s.props,_owner:s._owner}}function O$1(s){return typeof s=="object"&&s!==null&&s.$$typeof===l$1}function escape(s){var o={"=":"=0",":":"=2"};return"$"+s.replace(/[=:]/g,function(h){return o[h]})}var P$1=/\/+/g;function Q$1(s,o){return typeof s=="object"&&s!==null&&s.key!=null?escape(""+s.key):o.toString(36)}function R$2(s,o,h,d,g){var _=typeof s;(_==="undefined"||_==="boolean")&&(s=null);var b=!1;if(s===null)b=!0;else switch(_){case"string":case"number":b=!0;break;case"object":switch(s.$$typeof){case l$1:case n$1:b=!0}}if(b)return b=s,g=g(b),s=d===""?"."+Q$1(b,0):d,I$1(g)?(h="",s!=null&&(h=s.replace(P$1,"$&/")+"/"),R$2(g,o,h,"",function(tt){return tt})):g!=null&&(O$1(g)&&(g=N$1(g,h+(!g.key||b&&b.key===g.key?"":(""+g.key).replace(P$1,"$&/")+"/")+s)),o.push(g)),1;if(b=0,d=d===""?".":d+":",I$1(s))for(var j=0;j<s.length;j++){_=s[j];var et=d+Q$1(_,j);b+=R$2(_,o,h,et,g)}else if(et=A$2(s),typeof et=="function")for(s=et.call(s),j=0;!(_=s.next()).done;)_=_.value,et=d+Q$1(_,j++),b+=R$2(_,o,h,et,g);else if(_==="object")throw o=String(s),Error("Objects are not valid as a React child (found: "+(o==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":o)+"). If you meant to render a collection of children, use an array instead.");return b}function S$1(s,o,h){if(s==null)return s;var d=[],g=0;return R$2(s,d,"","",function(_){return o.call(h,_,g++)}),d}function T$2(s){if(s._status===-1){var o=s._result;o=o(),o.then(function(h){(s._status===0||s._status===-1)&&(s._status=1,s._result=h)},function(h){(s._status===0||s._status===-1)&&(s._status=2,s._result=h)}),s._status===-1&&(s._status=0,s._result=o)}if(s._status===1)return s._result.default;throw s._result}var U$2={current:null},V$2={transition:null},W$1={ReactCurrentDispatcher:U$2,ReactCurrentBatchConfig:V$2,ReactCurrentOwner:K$1};function X$1(){throw Error("act(...) is not supported in production builds of React.")}react_production_min.Children={map:S$1,forEach:function(s,o,h){S$1(s,function(){o.apply(this,arguments)},h)},count:function(s){var o=0;return S$1(s,function(){o++}),o},toArray:function(s){return S$1(s,function(o){return o})||[]},only:function(s){if(!O$1(s))throw Error("React.Children.only expected to receive a single React element child.");return s}};react_production_min.Component=E$2;react_production_min.Fragment=p$3;react_production_min.Profiler=r;react_production_min.PureComponent=G$1;react_production_min.StrictMode=q$1;react_production_min.Suspense=w;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$1;react_production_min.act=X$1;react_production_min.cloneElement=function(s,o,h){if(s==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+s+".");var d=C$1({},s.props),g=s.key,_=s.ref,b=s._owner;if(o!=null){if(o.ref!==void 0&&(_=o.ref,b=K$1.current),o.key!==void 0&&(g=""+o.key),s.type&&s.type.defaultProps)var j=s.type.defaultProps;for(et in o)J.call(o,et)&&!L$4.hasOwnProperty(et)&&(d[et]=o[et]===void 0&&j!==void 0?j[et]:o[et])}var et=arguments.length-2;if(et===1)d.children=h;else if(1<et){j=Array(et);for(var tt=0;tt<et;tt++)j[tt]=arguments[tt+2];d.children=j}return{$$typeof:l$1,type:s.type,key:g,ref:_,props:d,_owner:b}};react_production_min.createContext=function(s){return s={$$typeof:u$1,_currentValue:s,_currentValue2:s,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},s.Provider={$$typeof:t,_context:s},s.Consumer=s};react_production_min.createElement=M$1;react_production_min.createFactory=function(s){var o=M$1.bind(null,s);return o.type=s,o};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(s){return{$$typeof:v$1,render:s}};react_production_min.isValidElement=O$1;react_production_min.lazy=function(s){return{$$typeof:y$1,_payload:{_status:-1,_result:s},_init:T$2}};react_production_min.memo=function(s,o){return{$$typeof:x$1,type:s,compare:o===void 0?null:o}};react_production_min.startTransition=function(s){var o=V$2.transition;V$2.transition={};try{s()}finally{V$2.transition=o}};react_production_min.unstable_act=X$1;react_production_min.useCallback=function(s,o){return U$2.current.useCallback(s,o)};react_production_min.useContext=function(s){return U$2.current.useContext(s)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(s){return U$2.current.useDeferredValue(s)};react_production_min.useEffect=function(s,o){return U$2.current.useEffect(s,o)};react_production_min.useId=function(){return U$2.current.useId()};react_production_min.useImperativeHandle=function(s,o,h){return U$2.current.useImperativeHandle(s,o,h)};react_production_min.useInsertionEffect=function(s,o){return U$2.current.useInsertionEffect(s,o)};react_production_min.useLayoutEffect=function(s,o){return U$2.current.useLayoutEffect(s,o)};react_production_min.useMemo=function(s,o){return U$2.current.useMemo(s,o)};react_production_min.useReducer=function(s,o,h){return U$2.current.useReducer(s,o,h)};react_production_min.useRef=function(s){return U$2.current.useRef(s)};react_production_min.useState=function(s){return U$2.current.useState(s)};react_production_min.useSyncExternalStore=function(s,o,h){return U$2.current.useSyncExternalStore(s,o,h)};react_production_min.useTransition=function(){return U$2.current.useTransition()};react_production_min.version="18.3.1";react.exports=react_production_min;var reactExports=react.exports;const React=getDefaultExportFromCjs$1(reactExports);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$1=reactExports,k=Symbol.for("react.element"),l=Symbol.for("react.fragment"),m$2=Object.prototype.hasOwnProperty,n=f$1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$2={key:!0,ref:!0,__self:!0,__source:!0};function q(s,o,h){var d,g={},_=null,b=null;h!==void 0&&(_=""+h),o.key!==void 0&&(_=""+o.key),o.ref!==void 0&&(b=o.ref);for(d in o)m$2.call(o,d)&&!p$2.hasOwnProperty(d)&&(g[d]=o[d]);if(s&&s.defaultProps)for(d in o=s.defaultProps,o)g[d]===void 0&&(g[d]=o[d]);return{$$typeof:k,type:s,key:_,ref:b,props:g,_owner:n.current}}reactJsxRuntime_production_min.Fragment=l;reactJsxRuntime_production_min.jsx=q;reactJsxRuntime_production_min.jsxs=q;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(s){function o(jt,ur){var Ar=jt.length;jt.push(ur);t:for(;0<Ar;){var mr=Ar-1>>>1,dr=jt[mr];if(0<g(dr,ur))jt[mr]=ur,jt[Ar]=dr,Ar=mr;else break t}}function h(jt){return jt.length===0?null:jt[0]}function d(jt){if(jt.length===0)return null;var ur=jt[0],Ar=jt.pop();if(Ar!==ur){jt[0]=Ar;t:for(var mr=0,dr=jt.length,Nr=dr>>>1;mr<Nr;){var Ur=2*(mr+1)-1,nr=jt[Ur],hr=Ur+1,Dr=jt[hr];if(0>g(nr,Ar))hr<dr&&0>g(Dr,nr)?(jt[mr]=Dr,jt[hr]=Ar,mr=hr):(jt[mr]=nr,jt[Ur]=Ar,mr=Ur);else if(hr<dr&&0>g(Dr,Ar))jt[mr]=Dr,jt[hr]=Ar,mr=hr;else break t}}return ur}function g(jt,ur){var Ar=jt.sortIndex-ur.sortIndex;return Ar!==0?Ar:jt.id-ur.id}if(typeof performance=="object"&&typeof performance.now=="function"){var _=performance;s.unstable_now=function(){return _.now()}}else{var b=Date,j=b.now();s.unstable_now=function(){return b.now()-j}}var et=[],tt=[],rt=1,at=null,st=3,At=!1,ht=!1,ct=!1,_t=typeof setTimeout=="function"?setTimeout:null,gt=typeof clearTimeout=="function"?clearTimeout:null,wt=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ft(jt){for(var ur=h(tt);ur!==null;){if(ur.callback===null)d(tt);else if(ur.startTime<=jt)d(tt),ur.sortIndex=ur.expirationTime,o(et,ur);else break;ur=h(tt)}}function dt(jt){if(ct=!1,ft(jt),!ht)if(h(et)!==null)ht=!0,Jt(xt);else{var ur=h(tt);ur!==null&&lr(dt,ur.startTime-jt)}}function xt(jt,ur){ht=!1,ct&&(ct=!1,gt(Ut),Ut=-1),At=!0;var Ar=st;try{for(ft(ur),at=h(et);at!==null&&(!(at.expirationTime>ur)||jt&&!Nt());){var mr=at.callback;if(typeof mr=="function"){at.callback=null,st=at.priorityLevel;var dr=mr(at.expirationTime<=ur);ur=s.unstable_now(),typeof dr=="function"?at.callback=dr:at===h(et)&&d(et),ft(ur)}else d(et);at=h(et)}if(at!==null)var Nr=!0;else{var Ur=h(tt);Ur!==null&&lr(dt,Ur.startTime-ur),Nr=!1}return Nr}finally{at=null,st=Ar,At=!1}}var bt=!1,Ct=null,Ut=-1,Qt=5,kt=-1;function Nt(){return!(s.unstable_now()-kt<Qt)}function Wt(){if(Ct!==null){var jt=s.unstable_now();kt=jt;var ur=!0;try{ur=Ct(!0,jt)}finally{ur?Vt():(bt=!1,Ct=null)}}else bt=!1}var Vt;if(typeof wt=="function")Vt=function(){wt(Wt)};else if(typeof MessageChannel<"u"){var qt=new MessageChannel,_e=qt.port2;qt.port1.onmessage=Wt,Vt=function(){_e.postMessage(null)}}else Vt=function(){_t(Wt,0)};function Jt(jt){Ct=jt,bt||(bt=!0,Vt())}function lr(jt,ur){Ut=_t(function(){jt(s.unstable_now())},ur)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(jt){jt.callback=null},s.unstable_continueExecution=function(){ht||At||(ht=!0,Jt(xt))},s.unstable_forceFrameRate=function(jt){0>jt||125<jt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Qt=0<jt?Math.floor(1e3/jt):5},s.unstable_getCurrentPriorityLevel=function(){return st},s.unstable_getFirstCallbackNode=function(){return h(et)},s.unstable_next=function(jt){switch(st){case 1:case 2:case 3:var ur=3;break;default:ur=st}var Ar=st;st=ur;try{return jt()}finally{st=Ar}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(jt,ur){switch(jt){case 1:case 2:case 3:case 4:case 5:break;default:jt=3}var Ar=st;st=jt;try{return ur()}finally{st=Ar}},s.unstable_scheduleCallback=function(jt,ur,Ar){var mr=s.unstable_now();switch(typeof Ar=="object"&&Ar!==null?(Ar=Ar.delay,Ar=typeof Ar=="number"&&0<Ar?mr+Ar:mr):Ar=mr,jt){case 1:var dr=-1;break;case 2:dr=250;break;case 5:dr=1073741823;break;case 4:dr=1e4;break;default:dr=5e3}return dr=Ar+dr,jt={id:rt++,callback:ur,priorityLevel:jt,startTime:Ar,expirationTime:dr,sortIndex:-1},Ar>mr?(jt.sortIndex=Ar,o(tt,jt),h(et)===null&&jt===h(tt)&&(ct?(gt(Ut),Ut=-1):ct=!0,lr(dt,Ar-mr))):(jt.sortIndex=dr,o(et,jt),ht||At||(ht=!0,Jt(xt))),jt},s.unstable_shouldYield=Nt,s.unstable_wrapCallback=function(jt){var ur=st;return function(){var Ar=st;st=ur;try{return jt.apply(this,arguments)}finally{st=Ar}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p$1(s){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+s,h=1;h<arguments.length;h++)o+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(s,o){ha(s,o),ha(s+"Capture",o)}function ha(s,o){for(ea[s]=o,s=0;s<o.length;s++)da.add(o[s])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(s){return ja.call(ma,s)?!0:ja.call(la,s)?!1:ka.test(s)?ma[s]=!0:(la[s]=!0,!1)}function pa(s,o,h,d){if(h!==null&&h.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return d?!1:h!==null?!h.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function qa(s,o,h,d){if(o===null||typeof o>"u"||pa(s,o,h,d))return!0;if(d)return!1;if(h!==null)switch(h.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function v(s,o,h,d,g,_,b){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=d,this.attributeNamespace=g,this.mustUseProperty=h,this.propertyName=s,this.type=o,this.sanitizeURL=_,this.removeEmptyString=b}var z$1={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){z$1[s]=new v(s,0,!1,s,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var o=s[0];z$1[o]=new v(o,1,!1,s[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(s){z$1[s]=new v(s,2,!1,s.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){z$1[s]=new v(s,2,!1,s,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){z$1[s]=new v(s,3,!1,s.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(s){z$1[s]=new v(s,3,!0,s,null,!1,!1)});["capture","download"].forEach(function(s){z$1[s]=new v(s,4,!1,s,null,!1,!1)});["cols","rows","size","span"].forEach(function(s){z$1[s]=new v(s,6,!1,s,null,!1,!1)});["rowSpan","start"].forEach(function(s){z$1[s]=new v(s,5,!1,s.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var o=s.replace(ra,sa);z$1[o]=new v(o,1,!1,s,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var o=s.replace(ra,sa);z$1[o]=new v(o,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(s){var o=s.replace(ra,sa);z$1[o]=new v(o,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(s){z$1[s]=new v(s,1,!1,s.toLowerCase(),null,!1,!1)});z$1.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(s){z$1[s]=new v(s,1,!1,s.toLowerCase(),null,!0,!0)});function ta(s,o,h,d){var g=z$1.hasOwnProperty(o)?z$1[o]:null;(g!==null?g.type!==0:d||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(qa(o,h,g,d)&&(h=null),d||g===null?oa(o)&&(h===null?s.removeAttribute(o):s.setAttribute(o,""+h)):g.mustUseProperty?s[g.propertyName]=h===null?g.type===3?!1:"":h:(o=g.attributeName,d=g.attributeNamespace,h===null?s.removeAttribute(o):(g=g.type,h=g===3||g===4&&h===!0?"":""+h,d?s.setAttributeNS(d,o,h):s.setAttribute(o,h))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(s){return s===null||typeof s!="object"?null:(s=Ja&&s[Ja]||s["@@iterator"],typeof s=="function"?s:null)}var A$1=Object.assign,La;function Ma(s){if(La===void 0)try{throw Error()}catch(h){var o=h.stack.trim().match(/\n( *(at )?)/);La=o&&o[1]||""}return`
`+La+s}var Na=!1;function Oa(s,o){if(!s||Na)return"";Na=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(tt){var d=tt}Reflect.construct(s,[],o)}else{try{o.call()}catch(tt){d=tt}s.call(o.prototype)}else{try{throw Error()}catch(tt){d=tt}s()}}catch(tt){if(tt&&d&&typeof tt.stack=="string"){for(var g=tt.stack.split(`
`),_=d.stack.split(`
`),b=g.length-1,j=_.length-1;1<=b&&0<=j&&g[b]!==_[j];)j--;for(;1<=b&&0<=j;b--,j--)if(g[b]!==_[j]){if(b!==1||j!==1)do if(b--,j--,0>j||g[b]!==_[j]){var et=`
`+g[b].replace(" at new "," at ");return s.displayName&&et.includes("<anonymous>")&&(et=et.replace("<anonymous>",s.displayName)),et}while(1<=b&&0<=j);break}}}finally{Na=!1,Error.prepareStackTrace=h}return(s=s?s.displayName||s.name:"")?Ma(s):""}function Pa(s){switch(s.tag){case 5:return Ma(s.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return s=Oa(s.type,!1),s;case 11:return s=Oa(s.type.render,!1),s;case 1:return s=Oa(s.type,!0),s;default:return""}}function Qa(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case Ca:return(s.displayName||"Context")+".Consumer";case Ba:return(s._context.displayName||"Context")+".Provider";case Da:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case Ga:return o=s.displayName||null,o!==null?o:Qa(s.type)||"Memo";case Ha:o=s._payload,s=s._init;try{return Qa(s(o))}catch{}}return null}function Ra(s){var o=s.type;switch(s.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=o.render,s=s.displayName||s.name||"",o.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(o);case 8:return o===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Sa(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Ta(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Ua(s){var o=Ta(s)?"checked":"value",h=Object.getOwnPropertyDescriptor(s.constructor.prototype,o),d=""+s[o];if(!s.hasOwnProperty(o)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var g=h.get,_=h.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return g.call(this)},set:function(b){d=""+b,_.call(this,b)}}),Object.defineProperty(s,o,{enumerable:h.enumerable}),{getValue:function(){return d},setValue:function(b){d=""+b},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function Va(s){s._valueTracker||(s._valueTracker=Ua(s))}function Wa(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var h=o.getValue(),d="";return s&&(d=Ta(s)?s.checked?"true":"false":s.value),s=d,s!==h?(o.setValue(s),!0):!1}function Xa(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function Ya(s,o){var h=o.checked;return A$1({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:h??s._wrapperState.initialChecked})}function Za(s,o){var h=o.defaultValue==null?"":o.defaultValue,d=o.checked!=null?o.checked:o.defaultChecked;h=Sa(o.value!=null?o.value:h),s._wrapperState={initialChecked:d,initialValue:h,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function ab(s,o){o=o.checked,o!=null&&ta(s,"checked",o,!1)}function bb(s,o){ab(s,o);var h=Sa(o.value),d=o.type;if(h!=null)d==="number"?(h===0&&s.value===""||s.value!=h)&&(s.value=""+h):s.value!==""+h&&(s.value=""+h);else if(d==="submit"||d==="reset"){s.removeAttribute("value");return}o.hasOwnProperty("value")?cb(s,o.type,h):o.hasOwnProperty("defaultValue")&&cb(s,o.type,Sa(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(s.defaultChecked=!!o.defaultChecked)}function db(s,o,h){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var d=o.type;if(!(d!=="submit"&&d!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+s._wrapperState.initialValue,h||o===s.value||(s.value=o),s.defaultValue=o}h=s.name,h!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,h!==""&&(s.name=h)}function cb(s,o,h){(o!=="number"||Xa(s.ownerDocument)!==s)&&(h==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+h&&(s.defaultValue=""+h))}var eb=Array.isArray;function fb(s,o,h,d){if(s=s.options,o){o={};for(var g=0;g<h.length;g++)o["$"+h[g]]=!0;for(h=0;h<s.length;h++)g=o.hasOwnProperty("$"+s[h].value),s[h].selected!==g&&(s[h].selected=g),g&&d&&(s[h].defaultSelected=!0)}else{for(h=""+Sa(h),o=null,g=0;g<s.length;g++){if(s[g].value===h){s[g].selected=!0,d&&(s[g].defaultSelected=!0);return}o!==null||s[g].disabled||(o=s[g])}o!==null&&(o.selected=!0)}}function gb(s,o){if(o.dangerouslySetInnerHTML!=null)throw Error(p$1(91));return A$1({},o,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function hb(s,o){var h=o.value;if(h==null){if(h=o.children,o=o.defaultValue,h!=null){if(o!=null)throw Error(p$1(92));if(eb(h)){if(1<h.length)throw Error(p$1(93));h=h[0]}o=h}o==null&&(o=""),h=o}s._wrapperState={initialValue:Sa(h)}}function ib(s,o){var h=Sa(o.value),d=Sa(o.defaultValue);h!=null&&(h=""+h,h!==s.value&&(s.value=h),o.defaultValue==null&&s.defaultValue!==h&&(s.defaultValue=h)),d!=null&&(s.defaultValue=""+d)}function jb(s){var o=s.textContent;o===s._wrapperState.initialValue&&o!==""&&o!==null&&(s.value=o)}function kb(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(s,o){return s==null||s==="http://www.w3.org/1999/xhtml"?kb(o):s==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var mb,nb=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,h,d,g){MSApp.execUnsafeLocalFunction(function(){return s(o,h,d,g)})}:s}(function(s,o){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=o;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=mb.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;o.firstChild;)s.appendChild(o.firstChild)}});function ob(s,o){if(o){var h=s.firstChild;if(h&&h===s.lastChild&&h.nodeType===3){h.nodeValue=o;return}}s.textContent=o}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(s){qb.forEach(function(o){o=o+s.charAt(0).toUpperCase()+s.substring(1),pb[o]=pb[s]})});function rb(s,o,h){return o==null||typeof o=="boolean"||o===""?"":h||typeof o!="number"||o===0||pb.hasOwnProperty(s)&&pb[s]?(""+o).trim():o+"px"}function sb(s,o){s=s.style;for(var h in o)if(o.hasOwnProperty(h)){var d=h.indexOf("--")===0,g=rb(h,o[h],d);h==="float"&&(h="cssFloat"),d?s.setProperty(h,g):s[h]=g}}var tb=A$1({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(s,o){if(o){if(tb[s]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(p$1(137,s));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(p$1(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(p$1(61))}if(o.style!=null&&typeof o.style!="object")throw Error(p$1(62))}}function vb(s,o){if(s.indexOf("-")===-1)return typeof o.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var yb=null,zb=null,Ab=null;function Bb(s){if(s=Cb(s)){if(typeof yb!="function")throw Error(p$1(280));var o=s.stateNode;o&&(o=Db(o),yb(s.stateNode,s.type,o))}}function Eb(s){zb?Ab?Ab.push(s):Ab=[s]:zb=s}function Fb(){if(zb){var s=zb,o=Ab;if(Ab=zb=null,Bb(s),o)for(s=0;s<o.length;s++)Bb(o[s])}}function Gb(s,o){return s(o)}function Hb(){}var Ib=!1;function Jb(s,o,h){if(Ib)return s(o,h);Ib=!0;try{return Gb(s,o,h)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(s,o){var h=s.stateNode;if(h===null)return null;var d=Db(h);if(d===null)return null;h=d[o];t:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(s=s.type,d=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!d;break t;default:s=!1}if(s)return null;if(h&&typeof h!="function")throw Error(p$1(231,o,typeof h));return h}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(s,o,h,d,g,_,b,j,et){var tt=Array.prototype.slice.call(arguments,3);try{o.apply(h,tt)}catch(rt){this.onError(rt)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(s){Ob=!0,Pb=s}};function Tb(s,o,h,d,g,_,b,j,et){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(s,o,h,d,g,_,b,j,et){if(Tb.apply(this,arguments),Ob){if(Ob){var tt=Pb;Ob=!1,Pb=null}else throw Error(p$1(198));Qb||(Qb=!0,Rb=tt)}}function Vb(s){var o=s,h=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,o.flags&4098&&(h=o.return),s=o.return;while(s)}return o.tag===3?h:null}function Wb(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function Xb(s){if(Vb(s)!==s)throw Error(p$1(188))}function Yb(s){var o=s.alternate;if(!o){if(o=Vb(s),o===null)throw Error(p$1(188));return o!==s?null:s}for(var h=s,d=o;;){var g=h.return;if(g===null)break;var _=g.alternate;if(_===null){if(d=g.return,d!==null){h=d;continue}break}if(g.child===_.child){for(_=g.child;_;){if(_===h)return Xb(g),s;if(_===d)return Xb(g),o;_=_.sibling}throw Error(p$1(188))}if(h.return!==d.return)h=g,d=_;else{for(var b=!1,j=g.child;j;){if(j===h){b=!0,h=g,d=_;break}if(j===d){b=!0,d=g,h=_;break}j=j.sibling}if(!b){for(j=_.child;j;){if(j===h){b=!0,h=_,d=g;break}if(j===d){b=!0,d=_,h=g;break}j=j.sibling}if(!b)throw Error(p$1(189))}}if(h.alternate!==d)throw Error(p$1(190))}if(h.tag!==3)throw Error(p$1(188));return h.stateNode.current===h?s:o}function Zb(s){return s=Yb(s),s!==null?$b(s):null}function $b(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var o=$b(s);if(o!==null)return o;s=s.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(s){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,s,void 0,(s.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(s){return s>>>=0,s===0?32:31-(pc(s)/qc|0)|0}var rc=64,sc=4194304;function tc(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function uc(s,o){var h=s.pendingLanes;if(h===0)return 0;var d=0,g=s.suspendedLanes,_=s.pingedLanes,b=h&268435455;if(b!==0){var j=b&~g;j!==0?d=tc(j):(_&=b,_!==0&&(d=tc(_)))}else b=h&~g,b!==0?d=tc(b):_!==0&&(d=tc(_));if(d===0)return 0;if(o!==0&&o!==d&&!(o&g)&&(g=d&-d,_=o&-o,g>=_||g===16&&(_&4194240)!==0))return o;if(d&4&&(d|=h&16),o=s.entangledLanes,o!==0)for(s=s.entanglements,o&=d;0<o;)h=31-oc(o),g=1<<h,d|=s[h],o&=~g;return d}function vc(s,o){switch(s){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(s,o){for(var h=s.suspendedLanes,d=s.pingedLanes,g=s.expirationTimes,_=s.pendingLanes;0<_;){var b=31-oc(_),j=1<<b,et=g[b];et===-1?(!(j&h)||j&d)&&(g[b]=vc(j,o)):et<=o&&(s.expiredLanes|=j),_&=~j}}function xc(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function yc(){var s=rc;return rc<<=1,!(rc&4194240)&&(rc=64),s}function zc(s){for(var o=[],h=0;31>h;h++)o.push(s);return o}function Ac(s,o,h){s.pendingLanes|=o,o!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,o=31-oc(o),s[o]=h}function Bc(s,o){var h=s.pendingLanes&~o;s.pendingLanes=o,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=o,s.mutableReadLanes&=o,s.entangledLanes&=o,o=s.entanglements;var d=s.eventTimes;for(s=s.expirationTimes;0<h;){var g=31-oc(h),_=1<<g;o[g]=0,d[g]=-1,s[g]=-1,h&=~_}}function Cc(s,o){var h=s.entangledLanes|=o;for(s=s.entanglements;h;){var d=31-oc(h),g=1<<d;g&o|s[d]&o&&(s[d]|=o),h&=~g}}var C=0;function Dc(s){return s&=-s,1<s?4<s?s&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(s,o){switch(s){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(o.pointerId)}}function Tc(s,o,h,d,g,_){return s===null||s.nativeEvent!==_?(s={blockedOn:o,domEventName:h,eventSystemFlags:d,nativeEvent:_,targetContainers:[g]},o!==null&&(o=Cb(o),o!==null&&Fc(o)),s):(s.eventSystemFlags|=d,o=s.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),s)}function Uc(s,o,h,d,g){switch(o){case"focusin":return Lc=Tc(Lc,s,o,h,d,g),!0;case"dragenter":return Mc=Tc(Mc,s,o,h,d,g),!0;case"mouseover":return Nc=Tc(Nc,s,o,h,d,g),!0;case"pointerover":var _=g.pointerId;return Oc.set(_,Tc(Oc.get(_)||null,s,o,h,d,g)),!0;case"gotpointercapture":return _=g.pointerId,Pc.set(_,Tc(Pc.get(_)||null,s,o,h,d,g)),!0}return!1}function Vc(s){var o=Wc(s.target);if(o!==null){var h=Vb(o);if(h!==null){if(o=h.tag,o===13){if(o=Wb(h),o!==null){s.blockedOn=o,Ic(s.priority,function(){Gc(h)});return}}else if(o===3&&h.stateNode.current.memoizedState.isDehydrated){s.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Xc(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var h=Yc(s.domEventName,s.eventSystemFlags,o[0],s.nativeEvent);if(h===null){h=s.nativeEvent;var d=new h.constructor(h.type,h);wb=d,h.target.dispatchEvent(d),wb=null}else return o=Cb(h),o!==null&&Fc(o),s.blockedOn=h,!1;o.shift()}return!0}function Zc(s,o,h){Xc(s)&&h.delete(o)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(s,o){s.blockedOn===o&&(s.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(s){function o(g){return ad(g,s)}if(0<Kc.length){ad(Kc[0],s);for(var h=1;h<Kc.length;h++){var d=Kc[h];d.blockedOn===s&&(d.blockedOn=null)}}for(Lc!==null&&ad(Lc,s),Mc!==null&&ad(Mc,s),Nc!==null&&ad(Nc,s),Oc.forEach(o),Pc.forEach(o),h=0;h<Qc.length;h++)d=Qc[h],d.blockedOn===s&&(d.blockedOn=null);for(;0<Qc.length&&(h=Qc[0],h.blockedOn===null);)Vc(h),h.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(s,o,h,d){var g=C,_=cd.transition;cd.transition=null;try{C=1,fd(s,o,h,d)}finally{C=g,cd.transition=_}}function gd(s,o,h,d){var g=C,_=cd.transition;cd.transition=null;try{C=4,fd(s,o,h,d)}finally{C=g,cd.transition=_}}function fd(s,o,h,d){if(dd){var g=Yc(s,o,h,d);if(g===null)hd(s,o,d,id,h),Sc(s,d);else if(Uc(g,s,o,h,d))d.stopPropagation();else if(Sc(s,d),o&4&&-1<Rc.indexOf(s)){for(;g!==null;){var _=Cb(g);if(_!==null&&Ec(_),_=Yc(s,o,h,d),_===null&&hd(s,o,d,id,h),_===g)break;g=_}g!==null&&d.stopPropagation()}else hd(s,o,d,null,h)}}var id=null;function Yc(s,o,h,d){if(id=null,s=xb(d),s=Wc(s),s!==null)if(o=Vb(s),o===null)s=null;else if(h=o.tag,h===13){if(s=Wb(o),s!==null)return s;s=null}else if(h===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null);return id=s,null}function jd(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var s,o=ld,h=o.length,d,g="value"in kd?kd.value:kd.textContent,_=g.length;for(s=0;s<h&&o[s]===g[s];s++);var b=h-s;for(d=1;d<=b&&o[h-d]===g[_-d];d++);return md=g.slice(s,1<d?1-d:void 0)}function od(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function pd(){return!0}function qd(){return!1}function rd(s){function o(h,d,g,_,b){this._reactName=h,this._targetInst=g,this.type=d,this.nativeEvent=_,this.target=b,this.currentTarget=null;for(var j in s)s.hasOwnProperty(j)&&(h=s[j],this[j]=h?h(_):_[j]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A$1(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),o}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A$1({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A$1({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==yd&&(yd&&s.type==="mousemove"?(wd=s.screenX-yd.screenX,xd=s.screenY-yd.screenY):xd=wd=0,yd=s),wd)},movementY:function(s){return"movementY"in s?s.movementY:xd}}),Bd=rd(Ad),Cd=A$1({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A$1({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A$1({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A$1({},sd,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A$1({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=Od[s])?!!o[s]:!1}function zd(){return Pd}var Qd=A$1({},ud,{key:function(s){if(s.key){var o=Md[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=od(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Nd[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(s){return s.type==="keypress"?od(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?od(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Rd=rd(Qd),Sd=A$1({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A$1({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A$1({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A$1({},Ad,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&"CompositionEvent"in window,be=null;ia&&"documentMode"in document&&(be=document.documentMode);var ce=ia&&"TextEvent"in window&&!be,de=ia&&(!ae||be&&8<be&&11>=be),ee=" ",fe=!1;function ge(s,o){switch(s){case"keyup":return $d.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var ie=!1;function je(s,o){switch(s){case"compositionend":return he(o);case"keypress":return o.which!==32?null:(fe=!0,ee);case"textInput":return s=o.data,s===ee&&fe?null:s;default:return null}}function ke(s,o){if(ie)return s==="compositionend"||!ae&&ge(s,o)?(s=nd(),md=ld=kd=null,ie=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return de&&o.locale!=="ko"?null:o.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!le[s.type]:o==="textarea"}function ne(s,o,h,d){Eb(d),o=oe(o,"onChange"),0<o.length&&(h=new td("onChange","change",null,h,d),s.push({event:h,listeners:o}))}var pe=null,qe=null;function re(s){se(s,0)}function te(s){var o=ue(s);if(Wa(o))return s}function ve(s,o){if(s==="change")return o}var we=!1;if(ia){var xe;if(ia){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be),qe=pe=null)}function Be(s){if(s.propertyName==="value"&&te(qe)){var o=[];ne(o,qe,s,xb(s)),Jb(re,o)}}function Ce(s,o,h){s==="focusin"?(Ae(),pe=o,qe=h,pe.attachEvent("onpropertychange",Be)):s==="focusout"&&Ae()}function De(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return te(qe)}function Ee(s,o){if(s==="click")return te(o)}function Fe(s,o){if(s==="input"||s==="change")return te(o)}function Ge(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var He=typeof Object.is=="function"?Object.is:Ge;function Ie(s,o){if(He(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var h=Object.keys(s),d=Object.keys(o);if(h.length!==d.length)return!1;for(d=0;d<h.length;d++){var g=h[d];if(!ja.call(o,g)||!He(s[g],o[g]))return!1}return!0}function Je(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Ke(s,o){var h=Je(s);s=0;for(var d;h;){if(h.nodeType===3){if(d=s+h.textContent.length,s<=o&&d>=o)return{node:h,offset:o-s};s=d}t:{for(;h;){if(h.nextSibling){h=h.nextSibling;break t}h=h.parentNode}h=void 0}h=Je(h)}}function Le(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?Le(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function Me(){for(var s=window,o=Xa();o instanceof s.HTMLIFrameElement;){try{var h=typeof o.contentWindow.location.href=="string"}catch{h=!1}if(h)s=o.contentWindow;else break;o=Xa(s.document)}return o}function Ne(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}function Oe(s){var o=Me(),h=s.focusedElem,d=s.selectionRange;if(o!==h&&h&&h.ownerDocument&&Le(h.ownerDocument.documentElement,h)){if(d!==null&&Ne(h)){if(o=d.start,s=d.end,s===void 0&&(s=o),"selectionStart"in h)h.selectionStart=o,h.selectionEnd=Math.min(s,h.value.length);else if(s=(o=h.ownerDocument||document)&&o.defaultView||window,s.getSelection){s=s.getSelection();var g=h.textContent.length,_=Math.min(d.start,g);d=d.end===void 0?_:Math.min(d.end,g),!s.extend&&_>d&&(g=d,d=_,_=g),g=Ke(h,_);var b=Ke(h,d);g&&b&&(s.rangeCount!==1||s.anchorNode!==g.node||s.anchorOffset!==g.offset||s.focusNode!==b.node||s.focusOffset!==b.offset)&&(o=o.createRange(),o.setStart(g.node,g.offset),s.removeAllRanges(),_>d?(s.addRange(o),s.extend(b.node,b.offset)):(o.setEnd(b.node,b.offset),s.addRange(o)))}}for(o=[],s=h;s=s.parentNode;)s.nodeType===1&&o.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<o.length;h++)s=o[h],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;function Ue(s,o,h){var d=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Te||Qe==null||Qe!==Xa(d)||(d=Qe,"selectionStart"in d&&Ne(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Se&&Ie(Se,d)||(Se=d,d=oe(Re,"onSelect"),0<d.length&&(o=new td("onSelect","select",null,o,h),s.push({event:o,listeners:d}),o.target=Qe)))}function Ve(s,o){var h={};return h[s.toLowerCase()]=o.toLowerCase(),h["Webkit"+s]="webkit"+o,h["Moz"+s]="moz"+o,h}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(s){if(Xe[s])return Xe[s];if(!We[s])return s;var o=We[s],h;for(h in o)if(o.hasOwnProperty(h)&&h in Ye)return Xe[s]=o[h];return s}var $e$1=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(s,o){df.set(s,o),fa(o,[s])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e$1,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(s,o,h){var d=s.type||"unknown-event";s.currentTarget=h,Ub(d,o,void 0,s),s.currentTarget=null}function se(s,o){o=(o&4)!==0;for(var h=0;h<s.length;h++){var d=s[h],g=d.event;d=d.listeners;t:{var _=void 0;if(o)for(var b=d.length-1;0<=b;b--){var j=d[b],et=j.instance,tt=j.currentTarget;if(j=j.listener,et!==_&&g.isPropagationStopped())break t;nf(g,j,tt),_=et}else for(b=0;b<d.length;b++){if(j=d[b],et=j.instance,tt=j.currentTarget,j=j.listener,et!==_&&g.isPropagationStopped())break t;nf(g,j,tt),_=et}}}if(Qb)throw s=Rb,Qb=!1,Rb=null,s}function D(s,o){var h=o[of];h===void 0&&(h=o[of]=new Set);var d=s+"__bubble";h.has(d)||(pf(o,s,2,!1),h.add(d))}function qf(s,o,h){var d=0;o&&(d|=4),pf(h,s,d,o)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(s){if(!s[rf]){s[rf]=!0,da.forEach(function(h){h!=="selectionchange"&&(mf.has(h)||qf(h,!1,s),qf(h,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[rf]||(o[rf]=!0,qf("selectionchange",!1,o))}}function pf(s,o,h,d){switch(jd(o)){case 1:var g=ed;break;case 4:g=gd;break;default:g=fd}h=g.bind(null,o,h,s),g=void 0,!Lb||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),d?g!==void 0?s.addEventListener(o,h,{capture:!0,passive:g}):s.addEventListener(o,h,!0):g!==void 0?s.addEventListener(o,h,{passive:g}):s.addEventListener(o,h,!1)}function hd(s,o,h,d,g){var _=d;if(!(o&1)&&!(o&2)&&d!==null)t:for(;;){if(d===null)return;var b=d.tag;if(b===3||b===4){var j=d.stateNode.containerInfo;if(j===g||j.nodeType===8&&j.parentNode===g)break;if(b===4)for(b=d.return;b!==null;){var et=b.tag;if((et===3||et===4)&&(et=b.stateNode.containerInfo,et===g||et.nodeType===8&&et.parentNode===g))return;b=b.return}for(;j!==null;){if(b=Wc(j),b===null)return;if(et=b.tag,et===5||et===6){d=_=b;continue t}j=j.parentNode}}d=d.return}Jb(function(){var tt=_,rt=xb(h),at=[];t:{var st=df.get(s);if(st!==void 0){var At=td,ht=s;switch(s){case"keypress":if(od(h)===0)break t;case"keydown":case"keyup":At=Rd;break;case"focusin":ht="focus",At=Fd;break;case"focusout":ht="blur",At=Fd;break;case"beforeblur":case"afterblur":At=Fd;break;case"click":if(h.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":At=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":At=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":At=Vd;break;case $e$1:case af:case bf:At=Hd;break;case cf:At=Xd;break;case"scroll":At=vd;break;case"wheel":At=Zd;break;case"copy":case"cut":case"paste":At=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":At=Td}var ct=(o&4)!==0,_t=!ct&&s==="scroll",gt=ct?st!==null?st+"Capture":null:st;ct=[];for(var wt=tt,ft;wt!==null;){ft=wt;var dt=ft.stateNode;if(ft.tag===5&&dt!==null&&(ft=dt,gt!==null&&(dt=Kb(wt,gt),dt!=null&&ct.push(tf(wt,dt,ft)))),_t)break;wt=wt.return}0<ct.length&&(st=new At(st,ht,null,h,rt),at.push({event:st,listeners:ct}))}}if(!(o&7)){t:{if(st=s==="mouseover"||s==="pointerover",At=s==="mouseout"||s==="pointerout",st&&h!==wb&&(ht=h.relatedTarget||h.fromElement)&&(Wc(ht)||ht[uf]))break t;if((At||st)&&(st=rt.window===rt?rt:(st=rt.ownerDocument)?st.defaultView||st.parentWindow:window,At?(ht=h.relatedTarget||h.toElement,At=tt,ht=ht?Wc(ht):null,ht!==null&&(_t=Vb(ht),ht!==_t||ht.tag!==5&&ht.tag!==6)&&(ht=null)):(At=null,ht=tt),At!==ht)){if(ct=Bd,dt="onMouseLeave",gt="onMouseEnter",wt="mouse",(s==="pointerout"||s==="pointerover")&&(ct=Td,dt="onPointerLeave",gt="onPointerEnter",wt="pointer"),_t=At==null?st:ue(At),ft=ht==null?st:ue(ht),st=new ct(dt,wt+"leave",At,h,rt),st.target=_t,st.relatedTarget=ft,dt=null,Wc(rt)===tt&&(ct=new ct(gt,wt+"enter",ht,h,rt),ct.target=ft,ct.relatedTarget=_t,dt=ct),_t=dt,At&&ht)e:{for(ct=At,gt=ht,wt=0,ft=ct;ft;ft=vf(ft))wt++;for(ft=0,dt=gt;dt;dt=vf(dt))ft++;for(;0<wt-ft;)ct=vf(ct),wt--;for(;0<ft-wt;)gt=vf(gt),ft--;for(;wt--;){if(ct===gt||gt!==null&&ct===gt.alternate)break e;ct=vf(ct),gt=vf(gt)}ct=null}else ct=null;At!==null&&wf(at,st,At,ct,!1),ht!==null&&_t!==null&&wf(at,_t,ht,ct,!0)}}t:{if(st=tt?ue(tt):window,At=st.nodeName&&st.nodeName.toLowerCase(),At==="select"||At==="input"&&st.type==="file")var xt=ve;else if(me(st))if(we)xt=Fe;else{xt=De;var bt=Ce}else(At=st.nodeName)&&At.toLowerCase()==="input"&&(st.type==="checkbox"||st.type==="radio")&&(xt=Ee);if(xt&&(xt=xt(s,tt))){ne(at,xt,h,rt);break t}bt&&bt(s,st,tt),s==="focusout"&&(bt=st._wrapperState)&&bt.controlled&&st.type==="number"&&cb(st,"number",st.value)}switch(bt=tt?ue(tt):window,s){case"focusin":(me(bt)||bt.contentEditable==="true")&&(Qe=bt,Re=tt,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue(at,h,rt);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(at,h,rt)}var Ct;if(ae)t:{switch(s){case"compositionstart":var Ut="onCompositionStart";break t;case"compositionend":Ut="onCompositionEnd";break t;case"compositionupdate":Ut="onCompositionUpdate";break t}Ut=void 0}else ie?ge(s,h)&&(Ut="onCompositionEnd"):s==="keydown"&&h.keyCode===229&&(Ut="onCompositionStart");Ut&&(de&&h.locale!=="ko"&&(ie||Ut!=="onCompositionStart"?Ut==="onCompositionEnd"&&ie&&(Ct=nd()):(kd=rt,ld="value"in kd?kd.value:kd.textContent,ie=!0)),bt=oe(tt,Ut),0<bt.length&&(Ut=new Ld(Ut,s,null,h,rt),at.push({event:Ut,listeners:bt}),Ct?Ut.data=Ct:(Ct=he(h),Ct!==null&&(Ut.data=Ct)))),(Ct=ce?je(s,h):ke(s,h))&&(tt=oe(tt,"onBeforeInput"),0<tt.length&&(rt=new Ld("onBeforeInput","beforeinput",null,h,rt),at.push({event:rt,listeners:tt}),rt.data=Ct))}se(at,o)})}function tf(s,o,h){return{instance:s,listener:o,currentTarget:h}}function oe(s,o){for(var h=o+"Capture",d=[];s!==null;){var g=s,_=g.stateNode;g.tag===5&&_!==null&&(g=_,_=Kb(s,h),_!=null&&d.unshift(tf(s,_,g)),_=Kb(s,o),_!=null&&d.push(tf(s,_,g))),s=s.return}return d}function vf(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function wf(s,o,h,d,g){for(var _=o._reactName,b=[];h!==null&&h!==d;){var j=h,et=j.alternate,tt=j.stateNode;if(et!==null&&et===d)break;j.tag===5&&tt!==null&&(j=tt,g?(et=Kb(h,_),et!=null&&b.unshift(tf(h,et,j))):g||(et=Kb(h,_),et!=null&&b.push(tf(h,et,j)))),h=h.return}b.length!==0&&s.push({event:o,listeners:b})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(s){return(typeof s=="string"?s:""+s).replace(xf,`
`).replace(yf,"")}function Af(s,o,h){if(o=zf(o),zf(s)!==o&&h)throw Error(p$1(425))}function Bf(){}var Cf=null,Df=null;function Ef(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(s){return Hf.resolve(null).then(s).catch(If)}:Ff;function If(s){setTimeout(function(){throw s})}function Kf(s,o){var h=o,d=0;do{var g=h.nextSibling;if(s.removeChild(h),g&&g.nodeType===8)if(h=g.data,h==="/$"){if(d===0){s.removeChild(g),bd(o);return}d--}else h!=="$"&&h!=="$?"&&h!=="$!"||d++;h=g}while(h);bd(o)}function Lf(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return s}function Mf(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var h=s.data;if(h==="$"||h==="$!"||h==="$?"){if(o===0)return s;o--}else h==="/$"&&o++}s=s.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(s){var o=s[Of];if(o)return o;for(var h=s.parentNode;h;){if(o=h[uf]||h[Of]){if(h=o.alternate,o.child!==null||h!==null&&h.child!==null)for(s=Mf(s);s!==null;){if(h=s[Of])return h;s=Mf(s)}return o}s=h,h=s.parentNode}return null}function Cb(s){return s=s[Of]||s[uf],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function ue(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(p$1(33))}function Db(s){return s[Pf]||null}var Sf=[],Tf=-1;function Uf(s){return{current:s}}function E$1(s){0>Tf||(s.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G(s,o){Tf++,Sf[Tf]=s.current,s.current=o}var Vf={},H=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(s,o){var h=s.type.contextTypes;if(!h)return Vf;var d=s.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===o)return d.__reactInternalMemoizedMaskedChildContext;var g={},_;for(_ in h)g[_]=o[_];return d&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=o,s.__reactInternalMemoizedMaskedChildContext=g),g}function Zf(s){return s=s.childContextTypes,s!=null}function $f(){E$1(Wf),E$1(H)}function ag(s,o,h){if(H.current!==Vf)throw Error(p$1(168));G(H,o),G(Wf,h)}function bg(s,o,h){var d=s.stateNode;if(o=o.childContextTypes,typeof d.getChildContext!="function")return h;d=d.getChildContext();for(var g in d)if(!(g in o))throw Error(p$1(108,Ra(s)||"Unknown",g));return A$1({},h,d)}function cg(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||Vf,Xf=H.current,G(H,s),G(Wf,Wf.current),!0}function dg(s,o,h){var d=s.stateNode;if(!d)throw Error(p$1(169));h?(s=bg(s,o,Xf),d.__reactInternalMemoizedMergedChildContext=s,E$1(Wf),E$1(H),G(H,s)):E$1(Wf),G(Wf,h)}var eg=null,fg=!1,gg=!1;function hg(s){eg===null?eg=[s]:eg.push(s)}function ig(s){fg=!0,hg(s)}function jg(){if(!gg&&eg!==null){gg=!0;var s=0,o=C;try{var h=eg;for(C=1;s<h.length;s++){var d=h[s];do d=d(!0);while(d!==null)}eg=null,fg=!1}catch(g){throw eg!==null&&(eg=eg.slice(s+1)),ac(fc,jg),g}finally{C=o,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(s,o){kg[lg++]=ng,kg[lg++]=mg,mg=s,ng=o}function ug(s,o,h){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=s;var d=rg;s=sg;var g=32-oc(d)-1;d&=~(1<<g),h+=1;var _=32-oc(o)+g;if(30<_){var b=g-g%5;_=(d&(1<<b)-1).toString(32),d>>=b,g-=b,rg=1<<32-oc(o)+g|h<<g|d,sg=_+s}else rg=1<<_|h<<g|d,sg=s}function vg(s){s.return!==null&&(tg(s,1),ug(s,1,0))}function wg(s){for(;s===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;s===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I=!1,zg=null;function Ag(s,o){var h=Bg(5,null,null,0);h.elementType="DELETED",h.stateNode=o,h.return=s,o=s.deletions,o===null?(s.deletions=[h],s.flags|=16):o.push(h)}function Cg(s,o){switch(s.tag){case 5:var h=s.type;return o=o.nodeType!==1||h.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(s.stateNode=o,xg=s,yg=Lf(o.firstChild),!0):!1;case 6:return o=s.pendingProps===""||o.nodeType!==3?null:o,o!==null?(s.stateNode=o,xg=s,yg=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(h=qg!==null?{id:rg,overflow:sg}:null,s.memoizedState={dehydrated:o,treeContext:h,retryLane:1073741824},h=Bg(18,null,null,0),h.stateNode=o,h.return=s,s.child=h,xg=s,yg=null,!0):!1;default:return!1}}function Dg(s){return(s.mode&1)!==0&&(s.flags&128)===0}function Eg(s){if(I){var o=yg;if(o){var h=o;if(!Cg(s,o)){if(Dg(s))throw Error(p$1(418));o=Lf(h.nextSibling);var d=xg;o&&Cg(s,o)?Ag(d,h):(s.flags=s.flags&-4097|2,I=!1,xg=s)}}else{if(Dg(s))throw Error(p$1(418));s.flags=s.flags&-4097|2,I=!1,xg=s}}}function Fg(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;xg=s}function Gg(s){if(s!==xg)return!1;if(!I)return Fg(s),I=!0,!1;var o;if((o=s.tag!==3)&&!(o=s.tag!==5)&&(o=s.type,o=o!=="head"&&o!=="body"&&!Ef(s.type,s.memoizedProps)),o&&(o=yg)){if(Dg(s))throw Hg(),Error(p$1(418));for(;o;)Ag(s,o),o=Lf(o.nextSibling)}if(Fg(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(p$1(317));t:{for(s=s.nextSibling,o=0;s;){if(s.nodeType===8){var h=s.data;if(h==="/$"){if(o===0){yg=Lf(s.nextSibling);break t}o--}else h!=="$"&&h!=="$!"&&h!=="$?"||o++}s=s.nextSibling}yg=null}}else yg=xg?Lf(s.stateNode.nextSibling):null;return!0}function Hg(){for(var s=yg;s;)s=Lf(s.nextSibling)}function Ig(){yg=xg=null,I=!1}function Jg(s){zg===null?zg=[s]:zg.push(s)}var Kg=ua.ReactCurrentBatchConfig;function Lg(s,o,h){if(s=h.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(p$1(309));var d=h.stateNode}if(!d)throw Error(p$1(147,s));var g=d,_=""+s;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===_?o.ref:(o=function(b){var j=g.refs;b===null?delete j[_]:j[_]=b},o._stringRef=_,o)}if(typeof s!="string")throw Error(p$1(284));if(!h._owner)throw Error(p$1(290,s))}return s}function Mg(s,o){throw s=Object.prototype.toString.call(o),Error(p$1(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s))}function Ng(s){var o=s._init;return o(s._payload)}function Og(s){function o(gt,wt){if(s){var ft=gt.deletions;ft===null?(gt.deletions=[wt],gt.flags|=16):ft.push(wt)}}function h(gt,wt){if(!s)return null;for(;wt!==null;)o(gt,wt),wt=wt.sibling;return null}function d(gt,wt){for(gt=new Map;wt!==null;)wt.key!==null?gt.set(wt.key,wt):gt.set(wt.index,wt),wt=wt.sibling;return gt}function g(gt,wt){return gt=Pg(gt,wt),gt.index=0,gt.sibling=null,gt}function _(gt,wt,ft){return gt.index=ft,s?(ft=gt.alternate,ft!==null?(ft=ft.index,ft<wt?(gt.flags|=2,wt):ft):(gt.flags|=2,wt)):(gt.flags|=1048576,wt)}function b(gt){return s&&gt.alternate===null&&(gt.flags|=2),gt}function j(gt,wt,ft,dt){return wt===null||wt.tag!==6?(wt=Qg(ft,gt.mode,dt),wt.return=gt,wt):(wt=g(wt,ft),wt.return=gt,wt)}function et(gt,wt,ft,dt){var xt=ft.type;return xt===ya?rt(gt,wt,ft.props.children,dt,ft.key):wt!==null&&(wt.elementType===xt||typeof xt=="object"&&xt!==null&&xt.$$typeof===Ha&&Ng(xt)===wt.type)?(dt=g(wt,ft.props),dt.ref=Lg(gt,wt,ft),dt.return=gt,dt):(dt=Rg(ft.type,ft.key,ft.props,null,gt.mode,dt),dt.ref=Lg(gt,wt,ft),dt.return=gt,dt)}function tt(gt,wt,ft,dt){return wt===null||wt.tag!==4||wt.stateNode.containerInfo!==ft.containerInfo||wt.stateNode.implementation!==ft.implementation?(wt=Sg(ft,gt.mode,dt),wt.return=gt,wt):(wt=g(wt,ft.children||[]),wt.return=gt,wt)}function rt(gt,wt,ft,dt,xt){return wt===null||wt.tag!==7?(wt=Tg(ft,gt.mode,dt,xt),wt.return=gt,wt):(wt=g(wt,ft),wt.return=gt,wt)}function at(gt,wt,ft){if(typeof wt=="string"&&wt!==""||typeof wt=="number")return wt=Qg(""+wt,gt.mode,ft),wt.return=gt,wt;if(typeof wt=="object"&&wt!==null){switch(wt.$$typeof){case va:return ft=Rg(wt.type,wt.key,wt.props,null,gt.mode,ft),ft.ref=Lg(gt,null,wt),ft.return=gt,ft;case wa:return wt=Sg(wt,gt.mode,ft),wt.return=gt,wt;case Ha:var dt=wt._init;return at(gt,dt(wt._payload),ft)}if(eb(wt)||Ka(wt))return wt=Tg(wt,gt.mode,ft,null),wt.return=gt,wt;Mg(gt,wt)}return null}function st(gt,wt,ft,dt){var xt=wt!==null?wt.key:null;if(typeof ft=="string"&&ft!==""||typeof ft=="number")return xt!==null?null:j(gt,wt,""+ft,dt);if(typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case va:return ft.key===xt?et(gt,wt,ft,dt):null;case wa:return ft.key===xt?tt(gt,wt,ft,dt):null;case Ha:return xt=ft._init,st(gt,wt,xt(ft._payload),dt)}if(eb(ft)||Ka(ft))return xt!==null?null:rt(gt,wt,ft,dt,null);Mg(gt,ft)}return null}function At(gt,wt,ft,dt,xt){if(typeof dt=="string"&&dt!==""||typeof dt=="number")return gt=gt.get(ft)||null,j(wt,gt,""+dt,xt);if(typeof dt=="object"&&dt!==null){switch(dt.$$typeof){case va:return gt=gt.get(dt.key===null?ft:dt.key)||null,et(wt,gt,dt,xt);case wa:return gt=gt.get(dt.key===null?ft:dt.key)||null,tt(wt,gt,dt,xt);case Ha:var bt=dt._init;return At(gt,wt,ft,bt(dt._payload),xt)}if(eb(dt)||Ka(dt))return gt=gt.get(ft)||null,rt(wt,gt,dt,xt,null);Mg(wt,dt)}return null}function ht(gt,wt,ft,dt){for(var xt=null,bt=null,Ct=wt,Ut=wt=0,Qt=null;Ct!==null&&Ut<ft.length;Ut++){Ct.index>Ut?(Qt=Ct,Ct=null):Qt=Ct.sibling;var kt=st(gt,Ct,ft[Ut],dt);if(kt===null){Ct===null&&(Ct=Qt);break}s&&Ct&&kt.alternate===null&&o(gt,Ct),wt=_(kt,wt,Ut),bt===null?xt=kt:bt.sibling=kt,bt=kt,Ct=Qt}if(Ut===ft.length)return h(gt,Ct),I&&tg(gt,Ut),xt;if(Ct===null){for(;Ut<ft.length;Ut++)Ct=at(gt,ft[Ut],dt),Ct!==null&&(wt=_(Ct,wt,Ut),bt===null?xt=Ct:bt.sibling=Ct,bt=Ct);return I&&tg(gt,Ut),xt}for(Ct=d(gt,Ct);Ut<ft.length;Ut++)Qt=At(Ct,gt,Ut,ft[Ut],dt),Qt!==null&&(s&&Qt.alternate!==null&&Ct.delete(Qt.key===null?Ut:Qt.key),wt=_(Qt,wt,Ut),bt===null?xt=Qt:bt.sibling=Qt,bt=Qt);return s&&Ct.forEach(function(Nt){return o(gt,Nt)}),I&&tg(gt,Ut),xt}function ct(gt,wt,ft,dt){var xt=Ka(ft);if(typeof xt!="function")throw Error(p$1(150));if(ft=xt.call(ft),ft==null)throw Error(p$1(151));for(var bt=xt=null,Ct=wt,Ut=wt=0,Qt=null,kt=ft.next();Ct!==null&&!kt.done;Ut++,kt=ft.next()){Ct.index>Ut?(Qt=Ct,Ct=null):Qt=Ct.sibling;var Nt=st(gt,Ct,kt.value,dt);if(Nt===null){Ct===null&&(Ct=Qt);break}s&&Ct&&Nt.alternate===null&&o(gt,Ct),wt=_(Nt,wt,Ut),bt===null?xt=Nt:bt.sibling=Nt,bt=Nt,Ct=Qt}if(kt.done)return h(gt,Ct),I&&tg(gt,Ut),xt;if(Ct===null){for(;!kt.done;Ut++,kt=ft.next())kt=at(gt,kt.value,dt),kt!==null&&(wt=_(kt,wt,Ut),bt===null?xt=kt:bt.sibling=kt,bt=kt);return I&&tg(gt,Ut),xt}for(Ct=d(gt,Ct);!kt.done;Ut++,kt=ft.next())kt=At(Ct,gt,Ut,kt.value,dt),kt!==null&&(s&&kt.alternate!==null&&Ct.delete(kt.key===null?Ut:kt.key),wt=_(kt,wt,Ut),bt===null?xt=kt:bt.sibling=kt,bt=kt);return s&&Ct.forEach(function(Wt){return o(gt,Wt)}),I&&tg(gt,Ut),xt}function _t(gt,wt,ft,dt){if(typeof ft=="object"&&ft!==null&&ft.type===ya&&ft.key===null&&(ft=ft.props.children),typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case va:t:{for(var xt=ft.key,bt=wt;bt!==null;){if(bt.key===xt){if(xt=ft.type,xt===ya){if(bt.tag===7){h(gt,bt.sibling),wt=g(bt,ft.props.children),wt.return=gt,gt=wt;break t}}else if(bt.elementType===xt||typeof xt=="object"&&xt!==null&&xt.$$typeof===Ha&&Ng(xt)===bt.type){h(gt,bt.sibling),wt=g(bt,ft.props),wt.ref=Lg(gt,bt,ft),wt.return=gt,gt=wt;break t}h(gt,bt);break}else o(gt,bt);bt=bt.sibling}ft.type===ya?(wt=Tg(ft.props.children,gt.mode,dt,ft.key),wt.return=gt,gt=wt):(dt=Rg(ft.type,ft.key,ft.props,null,gt.mode,dt),dt.ref=Lg(gt,wt,ft),dt.return=gt,gt=dt)}return b(gt);case wa:t:{for(bt=ft.key;wt!==null;){if(wt.key===bt)if(wt.tag===4&&wt.stateNode.containerInfo===ft.containerInfo&&wt.stateNode.implementation===ft.implementation){h(gt,wt.sibling),wt=g(wt,ft.children||[]),wt.return=gt,gt=wt;break t}else{h(gt,wt);break}else o(gt,wt);wt=wt.sibling}wt=Sg(ft,gt.mode,dt),wt.return=gt,gt=wt}return b(gt);case Ha:return bt=ft._init,_t(gt,wt,bt(ft._payload),dt)}if(eb(ft))return ht(gt,wt,ft,dt);if(Ka(ft))return ct(gt,wt,ft,dt);Mg(gt,ft)}return typeof ft=="string"&&ft!==""||typeof ft=="number"?(ft=""+ft,wt!==null&&wt.tag===6?(h(gt,wt.sibling),wt=g(wt,ft),wt.return=gt,gt=wt):(h(gt,wt),wt=Qg(ft,gt.mode,dt),wt.return=gt,gt=wt),b(gt)):h(gt,wt)}return _t}var Ug=Og(!0),Vg=Og(!1),Wg=Uf(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah(s){var o=Wg.current;E$1(Wg),s._currentValue=o}function bh(s,o,h){for(;s!==null;){var d=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,d!==null&&(d.childLanes|=o)):d!==null&&(d.childLanes&o)!==o&&(d.childLanes|=o),s===h)break;s=s.return}}function ch(s,o){Xg=s,Zg=Yg=null,s=s.dependencies,s!==null&&s.firstContext!==null&&(s.lanes&o&&(dh=!0),s.firstContext=null)}function eh(s){var o=s._currentValue;if(Zg!==s)if(s={context:s,memoizedValue:o,next:null},Yg===null){if(Xg===null)throw Error(p$1(308));Yg=s,Xg.dependencies={lanes:0,firstContext:s}}else Yg=Yg.next=s;return o}var fh=null;function gh(s){fh===null?fh=[s]:fh.push(s)}function hh(s,o,h,d){var g=o.interleaved;return g===null?(h.next=h,gh(o)):(h.next=g.next,g.next=h),o.interleaved=h,ih(s,d)}function ih(s,o){s.lanes|=o;var h=s.alternate;for(h!==null&&(h.lanes|=o),h=s,s=s.return;s!==null;)s.childLanes|=o,h=s.alternate,h!==null&&(h.childLanes|=o),h=s,s=s.return;return h.tag===3?h.stateNode:null}var jh=!1;function kh(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function mh(s,o){return{eventTime:s,lane:o,tag:0,payload:null,callback:null,next:null}}function nh(s,o,h){var d=s.updateQueue;if(d===null)return null;if(d=d.shared,K&2){var g=d.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),d.pending=o,ih(s,h)}return g=d.interleaved,g===null?(o.next=o,gh(d)):(o.next=g.next,g.next=o),d.interleaved=o,ih(s,h)}function oh(s,o,h){if(o=o.updateQueue,o!==null&&(o=o.shared,(h&4194240)!==0)){var d=o.lanes;d&=s.pendingLanes,h|=d,o.lanes=h,Cc(s,h)}}function ph(s,o){var h=s.updateQueue,d=s.alternate;if(d!==null&&(d=d.updateQueue,h===d)){var g=null,_=null;if(h=h.firstBaseUpdate,h!==null){do{var b={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};_===null?g=_=b:_=_.next=b,h=h.next}while(h!==null);_===null?g=_=o:_=_.next=o}else g=_=o;h={baseState:d.baseState,firstBaseUpdate:g,lastBaseUpdate:_,shared:d.shared,effects:d.effects},s.updateQueue=h;return}s=h.lastBaseUpdate,s===null?h.firstBaseUpdate=o:s.next=o,h.lastBaseUpdate=o}function qh(s,o,h,d){var g=s.updateQueue;jh=!1;var _=g.firstBaseUpdate,b=g.lastBaseUpdate,j=g.shared.pending;if(j!==null){g.shared.pending=null;var et=j,tt=et.next;et.next=null,b===null?_=tt:b.next=tt,b=et;var rt=s.alternate;rt!==null&&(rt=rt.updateQueue,j=rt.lastBaseUpdate,j!==b&&(j===null?rt.firstBaseUpdate=tt:j.next=tt,rt.lastBaseUpdate=et))}if(_!==null){var at=g.baseState;b=0,rt=tt=et=null,j=_;do{var st=j.lane,At=j.eventTime;if((d&st)===st){rt!==null&&(rt=rt.next={eventTime:At,lane:0,tag:j.tag,payload:j.payload,callback:j.callback,next:null});t:{var ht=s,ct=j;switch(st=o,At=h,ct.tag){case 1:if(ht=ct.payload,typeof ht=="function"){at=ht.call(At,at,st);break t}at=ht;break t;case 3:ht.flags=ht.flags&-65537|128;case 0:if(ht=ct.payload,st=typeof ht=="function"?ht.call(At,at,st):ht,st==null)break t;at=A$1({},at,st);break t;case 2:jh=!0}}j.callback!==null&&j.lane!==0&&(s.flags|=64,st=g.effects,st===null?g.effects=[j]:st.push(j))}else At={eventTime:At,lane:st,tag:j.tag,payload:j.payload,callback:j.callback,next:null},rt===null?(tt=rt=At,et=at):rt=rt.next=At,b|=st;if(j=j.next,j===null){if(j=g.shared.pending,j===null)break;st=j,j=st.next,st.next=null,g.lastBaseUpdate=st,g.shared.pending=null}}while(!0);if(rt===null&&(et=at),g.baseState=et,g.firstBaseUpdate=tt,g.lastBaseUpdate=rt,o=g.shared.interleaved,o!==null){g=o;do b|=g.lane,g=g.next;while(g!==o)}else _===null&&(g.shared.lanes=0);rh|=b,s.lanes=b,s.memoizedState=at}}function sh(s,o,h){if(s=o.effects,o.effects=null,s!==null)for(o=0;o<s.length;o++){var d=s[o],g=d.callback;if(g!==null){if(d.callback=null,d=h,typeof g!="function")throw Error(p$1(191,g));g.call(d)}}}var th={},uh=Uf(th),vh=Uf(th),wh=Uf(th);function xh(s){if(s===th)throw Error(p$1(174));return s}function yh(s,o){switch(G(wh,o),G(vh,s),G(uh,th),s=o.nodeType,s){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:lb(null,"");break;default:s=s===8?o.parentNode:o,o=s.namespaceURI||null,s=s.tagName,o=lb(o,s)}E$1(uh),G(uh,o)}function zh(){E$1(uh),E$1(vh),E$1(wh)}function Ah(s){xh(wh.current);var o=xh(uh.current),h=lb(o,s.type);o!==h&&(G(vh,s),G(uh,h))}function Bh(s){vh.current===s&&(E$1(uh),E$1(vh))}var L$3=Uf(0);function Ch(s){for(var o=s;o!==null;){if(o.tag===13){var h=o.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||h.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if(o.flags&128)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Dh=[];function Eh(){for(var s=0;s<Dh.length;s++)Dh[s]._workInProgressVersionPrimary=null;Dh.length=0}var Fh=ua.ReactCurrentDispatcher,Gh=ua.ReactCurrentBatchConfig,Hh=0,M=null,N=null,O=null,Ih=!1,Jh=!1,Kh=0,Lh=0;function P(){throw Error(p$1(321))}function Mh(s,o){if(o===null)return!1;for(var h=0;h<o.length&&h<s.length;h++)if(!He(s[h],o[h]))return!1;return!0}function Nh(s,o,h,d,g,_){if(Hh=_,M=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Fh.current=s===null||s.memoizedState===null?Oh:Ph,s=h(d,g),Jh){_=0;do{if(Jh=!1,Kh=0,25<=_)throw Error(p$1(301));_+=1,O=N=null,o.updateQueue=null,Fh.current=Qh,s=h(d,g)}while(Jh)}if(Fh.current=Rh,o=N!==null&&N.next!==null,Hh=0,O=N=M=null,Ih=!1,o)throw Error(p$1(300));return s}function Sh(){var s=Kh!==0;return Kh=0,s}function Th(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return O===null?M.memoizedState=O=s:O=O.next=s,O}function Uh(){if(N===null){var s=M.alternate;s=s!==null?s.memoizedState:null}else s=N.next;var o=O===null?M.memoizedState:O.next;if(o!==null)O=o,N=s;else{if(s===null)throw Error(p$1(310));N=s,s={memoizedState:N.memoizedState,baseState:N.baseState,baseQueue:N.baseQueue,queue:N.queue,next:null},O===null?M.memoizedState=O=s:O=O.next=s}return O}function Vh(s,o){return typeof o=="function"?o(s):o}function Wh(s){var o=Uh(),h=o.queue;if(h===null)throw Error(p$1(311));h.lastRenderedReducer=s;var d=N,g=d.baseQueue,_=h.pending;if(_!==null){if(g!==null){var b=g.next;g.next=_.next,_.next=b}d.baseQueue=g=_,h.pending=null}if(g!==null){_=g.next,d=d.baseState;var j=b=null,et=null,tt=_;do{var rt=tt.lane;if((Hh&rt)===rt)et!==null&&(et=et.next={lane:0,action:tt.action,hasEagerState:tt.hasEagerState,eagerState:tt.eagerState,next:null}),d=tt.hasEagerState?tt.eagerState:s(d,tt.action);else{var at={lane:rt,action:tt.action,hasEagerState:tt.hasEagerState,eagerState:tt.eagerState,next:null};et===null?(j=et=at,b=d):et=et.next=at,M.lanes|=rt,rh|=rt}tt=tt.next}while(tt!==null&&tt!==_);et===null?b=d:et.next=j,He(d,o.memoizedState)||(dh=!0),o.memoizedState=d,o.baseState=b,o.baseQueue=et,h.lastRenderedState=d}if(s=h.interleaved,s!==null){g=s;do _=g.lane,M.lanes|=_,rh|=_,g=g.next;while(g!==s)}else g===null&&(h.lanes=0);return[o.memoizedState,h.dispatch]}function Xh(s){var o=Uh(),h=o.queue;if(h===null)throw Error(p$1(311));h.lastRenderedReducer=s;var d=h.dispatch,g=h.pending,_=o.memoizedState;if(g!==null){h.pending=null;var b=g=g.next;do _=s(_,b.action),b=b.next;while(b!==g);He(_,o.memoizedState)||(dh=!0),o.memoizedState=_,o.baseQueue===null&&(o.baseState=_),h.lastRenderedState=_}return[_,d]}function Yh(){}function Zh(s,o){var h=M,d=Uh(),g=o(),_=!He(d.memoizedState,g);if(_&&(d.memoizedState=g,dh=!0),d=d.queue,$h(ai.bind(null,h,d,s),[s]),d.getSnapshot!==o||_||O!==null&&O.memoizedState.tag&1){if(h.flags|=2048,bi(9,ci.bind(null,h,d,g,o),void 0,null),Q===null)throw Error(p$1(349));Hh&30||di(h,o,g)}return g}function di(s,o,h){s.flags|=16384,s={getSnapshot:o,value:h},o=M.updateQueue,o===null?(o={lastEffect:null,stores:null},M.updateQueue=o,o.stores=[s]):(h=o.stores,h===null?o.stores=[s]:h.push(s))}function ci(s,o,h,d){o.value=h,o.getSnapshot=d,ei(o)&&fi(s)}function ai(s,o,h){return h(function(){ei(o)&&fi(s)})}function ei(s){var o=s.getSnapshot;s=s.value;try{var h=o();return!He(s,h)}catch{return!0}}function fi(s){var o=ih(s,1);o!==null&&gi(o,s,1,-1)}function hi(s){var o=Th();return typeof s=="function"&&(s=s()),o.memoizedState=o.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:s},o.queue=s,s=s.dispatch=ii.bind(null,M,s),[o.memoizedState,s]}function bi(s,o,h,d){return s={tag:s,create:o,destroy:h,deps:d,next:null},o=M.updateQueue,o===null?(o={lastEffect:null,stores:null},M.updateQueue=o,o.lastEffect=s.next=s):(h=o.lastEffect,h===null?o.lastEffect=s.next=s:(d=h.next,h.next=s,s.next=d,o.lastEffect=s)),s}function ji(){return Uh().memoizedState}function ki(s,o,h,d){var g=Th();M.flags|=s,g.memoizedState=bi(1|o,h,void 0,d===void 0?null:d)}function li$1(s,o,h,d){var g=Uh();d=d===void 0?null:d;var _=void 0;if(N!==null){var b=N.memoizedState;if(_=b.destroy,d!==null&&Mh(d,b.deps)){g.memoizedState=bi(o,h,_,d);return}}M.flags|=s,g.memoizedState=bi(1|o,h,_,d)}function mi(s,o){return ki(8390656,8,s,o)}function $h(s,o){return li$1(2048,8,s,o)}function ni(s,o){return li$1(4,2,s,o)}function oi(s,o){return li$1(4,4,s,o)}function pi(s,o){if(typeof o=="function")return s=s(),o(s),function(){o(null)};if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function qi(s,o,h){return h=h!=null?h.concat([s]):null,li$1(4,4,pi.bind(null,o,s),h)}function ri(){}function si(s,o){var h=Uh();o=o===void 0?null:o;var d=h.memoizedState;return d!==null&&o!==null&&Mh(o,d[1])?d[0]:(h.memoizedState=[s,o],s)}function ti(s,o){var h=Uh();o=o===void 0?null:o;var d=h.memoizedState;return d!==null&&o!==null&&Mh(o,d[1])?d[0]:(s=s(),h.memoizedState=[s,o],s)}function ui(s,o,h){return Hh&21?(He(h,o)||(h=yc(),M.lanes|=h,rh|=h,s.baseState=!0),o):(s.baseState&&(s.baseState=!1,dh=!0),s.memoizedState=h)}function vi(s,o){var h=C;C=h!==0&&4>h?h:4,s(!0);var d=Gh.transition;Gh.transition={};try{s(!1),o()}finally{C=h,Gh.transition=d}}function wi(){return Uh().memoizedState}function xi(s,o,h){var d=yi(s);if(h={lane:d,action:h,hasEagerState:!1,eagerState:null,next:null},zi(s))Ai(o,h);else if(h=hh(s,o,h,d),h!==null){var g=R$1();gi(h,s,d,g),Bi(h,o,d)}}function ii(s,o,h){var d=yi(s),g={lane:d,action:h,hasEagerState:!1,eagerState:null,next:null};if(zi(s))Ai(o,g);else{var _=s.alternate;if(s.lanes===0&&(_===null||_.lanes===0)&&(_=o.lastRenderedReducer,_!==null))try{var b=o.lastRenderedState,j=_(b,h);if(g.hasEagerState=!0,g.eagerState=j,He(j,b)){var et=o.interleaved;et===null?(g.next=g,gh(o)):(g.next=et.next,et.next=g),o.interleaved=g;return}}catch{}finally{}h=hh(s,o,g,d),h!==null&&(g=R$1(),gi(h,s,d,g),Bi(h,o,d))}}function zi(s){var o=s.alternate;return s===M||o!==null&&o===M}function Ai(s,o){Jh=Ih=!0;var h=s.pending;h===null?o.next=o:(o.next=h.next,h.next=o),s.pending=o}function Bi(s,o,h){if(h&4194240){var d=o.lanes;d&=s.pendingLanes,h|=d,o.lanes=h,Cc(s,h)}}var Rh={readContext:eh,useCallback:P,useContext:P,useEffect:P,useImperativeHandle:P,useInsertionEffect:P,useLayoutEffect:P,useMemo:P,useReducer:P,useRef:P,useState:P,useDebugValue:P,useDeferredValue:P,useTransition:P,useMutableSource:P,useSyncExternalStore:P,useId:P,unstable_isNewReconciler:!1},Oh={readContext:eh,useCallback:function(s,o){return Th().memoizedState=[s,o===void 0?null:o],s},useContext:eh,useEffect:mi,useImperativeHandle:function(s,o,h){return h=h!=null?h.concat([s]):null,ki(4194308,4,pi.bind(null,o,s),h)},useLayoutEffect:function(s,o){return ki(4194308,4,s,o)},useInsertionEffect:function(s,o){return ki(4,2,s,o)},useMemo:function(s,o){var h=Th();return o=o===void 0?null:o,s=s(),h.memoizedState=[s,o],s},useReducer:function(s,o,h){var d=Th();return o=h!==void 0?h(o):o,d.memoizedState=d.baseState=o,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:o},d.queue=s,s=s.dispatch=xi.bind(null,M,s),[d.memoizedState,s]},useRef:function(s){var o=Th();return s={current:s},o.memoizedState=s},useState:hi,useDebugValue:ri,useDeferredValue:function(s){return Th().memoizedState=s},useTransition:function(){var s=hi(!1),o=s[0];return s=vi.bind(null,s[1]),Th().memoizedState=s,[o,s]},useMutableSource:function(){},useSyncExternalStore:function(s,o,h){var d=M,g=Th();if(I){if(h===void 0)throw Error(p$1(407));h=h()}else{if(h=o(),Q===null)throw Error(p$1(349));Hh&30||di(d,o,h)}g.memoizedState=h;var _={value:h,getSnapshot:o};return g.queue=_,mi(ai.bind(null,d,_,s),[s]),d.flags|=2048,bi(9,ci.bind(null,d,_,h,o),void 0,null),h},useId:function(){var s=Th(),o=Q.identifierPrefix;if(I){var h=sg,d=rg;h=(d&~(1<<32-oc(d)-1)).toString(32)+h,o=":"+o+"R"+h,h=Kh++,0<h&&(o+="H"+h.toString(32)),o+=":"}else h=Lh++,o=":"+o+"r"+h.toString(32)+":";return s.memoizedState=o},unstable_isNewReconciler:!1},Ph={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Wh,useRef:ji,useState:function(){return Wh(Vh)},useDebugValue:ri,useDeferredValue:function(s){var o=Uh();return ui(o,N.memoizedState,s)},useTransition:function(){var s=Wh(Vh)[0],o=Uh().memoizedState;return[s,o]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1},Qh={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Xh,useRef:ji,useState:function(){return Xh(Vh)},useDebugValue:ri,useDeferredValue:function(s){var o=Uh();return N===null?o.memoizedState=s:ui(o,N.memoizedState,s)},useTransition:function(){var s=Xh(Vh)[0],o=Uh().memoizedState;return[s,o]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1};function Ci(s,o){if(s&&s.defaultProps){o=A$1({},o),s=s.defaultProps;for(var h in s)o[h]===void 0&&(o[h]=s[h]);return o}return o}function Di(s,o,h,d){o=s.memoizedState,h=h(d,o),h=h==null?o:A$1({},o,h),s.memoizedState=h,s.lanes===0&&(s.updateQueue.baseState=h)}var Ei={isMounted:function(s){return(s=s._reactInternals)?Vb(s)===s:!1},enqueueSetState:function(s,o,h){s=s._reactInternals;var d=R$1(),g=yi(s),_=mh(d,g);_.payload=o,h!=null&&(_.callback=h),o=nh(s,_,g),o!==null&&(gi(o,s,g,d),oh(o,s,g))},enqueueReplaceState:function(s,o,h){s=s._reactInternals;var d=R$1(),g=yi(s),_=mh(d,g);_.tag=1,_.payload=o,h!=null&&(_.callback=h),o=nh(s,_,g),o!==null&&(gi(o,s,g,d),oh(o,s,g))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var h=R$1(),d=yi(s),g=mh(h,d);g.tag=2,o!=null&&(g.callback=o),o=nh(s,g,d),o!==null&&(gi(o,s,d,h),oh(o,s,d))}};function Fi(s,o,h,d,g,_,b){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(d,_,b):o.prototype&&o.prototype.isPureReactComponent?!Ie(h,d)||!Ie(g,_):!0}function Gi(s,o,h){var d=!1,g=Vf,_=o.contextType;return typeof _=="object"&&_!==null?_=eh(_):(g=Zf(o)?Xf:H.current,d=o.contextTypes,_=(d=d!=null)?Yf(s,g):Vf),o=new o(h,_),s.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Ei,s.stateNode=o,o._reactInternals=s,d&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=g,s.__reactInternalMemoizedMaskedChildContext=_),o}function Hi(s,o,h,d){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(h,d),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(h,d),o.state!==s&&Ei.enqueueReplaceState(o,o.state,null)}function Ii(s,o,h,d){var g=s.stateNode;g.props=h,g.state=s.memoizedState,g.refs={},kh(s);var _=o.contextType;typeof _=="object"&&_!==null?g.context=eh(_):(_=Zf(o)?Xf:H.current,g.context=Yf(s,_)),g.state=s.memoizedState,_=o.getDerivedStateFromProps,typeof _=="function"&&(Di(s,o,_,h),g.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(o=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),o!==g.state&&Ei.enqueueReplaceState(g,g.state,null),qh(s,h,g,d),g.state=s.memoizedState),typeof g.componentDidMount=="function"&&(s.flags|=4194308)}function Ji(s,o){try{var h="",d=o;do h+=Pa(d),d=d.return;while(d);var g=h}catch(_){g=`
Error generating stack: `+_.message+`
`+_.stack}return{value:s,source:o,stack:g,digest:null}}function Ki(s,o,h){return{value:s,source:null,stack:h??null,digest:o??null}}function Li(s,o){try{console.error(o.value)}catch(h){setTimeout(function(){throw h})}}var Mi=typeof WeakMap=="function"?WeakMap:Map;function Ni(s,o,h){h=mh(-1,h),h.tag=3,h.payload={element:null};var d=o.value;return h.callback=function(){Oi||(Oi=!0,Pi=d),Li(s,o)},h}function Qi(s,o,h){h=mh(-1,h),h.tag=3;var d=s.type.getDerivedStateFromError;if(typeof d=="function"){var g=o.value;h.payload=function(){return d(g)},h.callback=function(){Li(s,o)}}var _=s.stateNode;return _!==null&&typeof _.componentDidCatch=="function"&&(h.callback=function(){Li(s,o),typeof d!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var b=o.stack;this.componentDidCatch(o.value,{componentStack:b!==null?b:""})}),h}function Si(s,o,h){var d=s.pingCache;if(d===null){d=s.pingCache=new Mi;var g=new Set;d.set(o,g)}else g=d.get(o),g===void 0&&(g=new Set,d.set(o,g));g.has(h)||(g.add(h),s=Ti.bind(null,s,o,h),o.then(s,s))}function Ui(s){do{var o;if((o=s.tag===13)&&(o=s.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return s;s=s.return}while(s!==null);return null}function Vi(s,o,h,d,g){return s.mode&1?(s.flags|=65536,s.lanes=g,s):(s===o?s.flags|=65536:(s.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(o=mh(-1,1),o.tag=2,nh(h,o,1))),h.lanes|=1),s)}var Wi=ua.ReactCurrentOwner,dh=!1;function Xi(s,o,h,d){o.child=s===null?Vg(o,null,h,d):Ug(o,s.child,h,d)}function Yi(s,o,h,d,g){h=h.render;var _=o.ref;return ch(o,g),d=Nh(s,o,h,d,_,g),h=Sh(),s!==null&&!dh?(o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~g,Zi(s,o,g)):(I&&h&&vg(o),o.flags|=1,Xi(s,o,d,g),o.child)}function $i(s,o,h,d,g){if(s===null){var _=h.type;return typeof _=="function"&&!aj(_)&&_.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(o.tag=15,o.type=_,bj(s,o,_,d,g)):(s=Rg(h.type,null,d,o,o.mode,g),s.ref=o.ref,s.return=o,o.child=s)}if(_=s.child,!(s.lanes&g)){var b=_.memoizedProps;if(h=h.compare,h=h!==null?h:Ie,h(b,d)&&s.ref===o.ref)return Zi(s,o,g)}return o.flags|=1,s=Pg(_,d),s.ref=o.ref,s.return=o,o.child=s}function bj(s,o,h,d,g){if(s!==null){var _=s.memoizedProps;if(Ie(_,d)&&s.ref===o.ref)if(dh=!1,o.pendingProps=d=_,(s.lanes&g)!==0)s.flags&131072&&(dh=!0);else return o.lanes=s.lanes,Zi(s,o,g)}return cj(s,o,h,d,g)}function dj(s,o,h){var d=o.pendingProps,g=d.children,_=s!==null?s.memoizedState:null;if(d.mode==="hidden")if(!(o.mode&1))o.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(ej,fj),fj|=h;else{if(!(h&1073741824))return s=_!==null?_.baseLanes|h:h,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:s,cachePool:null,transitions:null},o.updateQueue=null,G(ej,fj),fj|=s,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=_!==null?_.baseLanes:h,G(ej,fj),fj|=d}else _!==null?(d=_.baseLanes|h,o.memoizedState=null):d=h,G(ej,fj),fj|=d;return Xi(s,o,g,h),o.child}function gj(s,o){var h=o.ref;(s===null&&h!==null||s!==null&&s.ref!==h)&&(o.flags|=512,o.flags|=2097152)}function cj(s,o,h,d,g){var _=Zf(h)?Xf:H.current;return _=Yf(o,_),ch(o,g),h=Nh(s,o,h,d,_,g),d=Sh(),s!==null&&!dh?(o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~g,Zi(s,o,g)):(I&&d&&vg(o),o.flags|=1,Xi(s,o,h,g),o.child)}function hj(s,o,h,d,g){if(Zf(h)){var _=!0;cg(o)}else _=!1;if(ch(o,g),o.stateNode===null)ij(s,o),Gi(o,h,d),Ii(o,h,d,g),d=!0;else if(s===null){var b=o.stateNode,j=o.memoizedProps;b.props=j;var et=b.context,tt=h.contextType;typeof tt=="object"&&tt!==null?tt=eh(tt):(tt=Zf(h)?Xf:H.current,tt=Yf(o,tt));var rt=h.getDerivedStateFromProps,at=typeof rt=="function"||typeof b.getSnapshotBeforeUpdate=="function";at||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(j!==d||et!==tt)&&Hi(o,b,d,tt),jh=!1;var st=o.memoizedState;b.state=st,qh(o,d,b,g),et=o.memoizedState,j!==d||st!==et||Wf.current||jh?(typeof rt=="function"&&(Di(o,h,rt,d),et=o.memoizedState),(j=jh||Fi(o,h,j,d,st,et,tt))?(at||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(o.flags|=4194308)):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=d,o.memoizedState=et),b.props=d,b.state=et,b.context=tt,d=j):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),d=!1)}else{b=o.stateNode,lh(s,o),j=o.memoizedProps,tt=o.type===o.elementType?j:Ci(o.type,j),b.props=tt,at=o.pendingProps,st=b.context,et=h.contextType,typeof et=="object"&&et!==null?et=eh(et):(et=Zf(h)?Xf:H.current,et=Yf(o,et));var At=h.getDerivedStateFromProps;(rt=typeof At=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(j!==at||st!==et)&&Hi(o,b,d,et),jh=!1,st=o.memoizedState,b.state=st,qh(o,d,b,g);var ht=o.memoizedState;j!==at||st!==ht||Wf.current||jh?(typeof At=="function"&&(Di(o,h,At,d),ht=o.memoizedState),(tt=jh||Fi(o,h,tt,d,st,ht,et)||!1)?(rt||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(d,ht,et),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(d,ht,et)),typeof b.componentDidUpdate=="function"&&(o.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof b.componentDidUpdate!="function"||j===s.memoizedProps&&st===s.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||j===s.memoizedProps&&st===s.memoizedState||(o.flags|=1024),o.memoizedProps=d,o.memoizedState=ht),b.props=d,b.state=ht,b.context=et,d=tt):(typeof b.componentDidUpdate!="function"||j===s.memoizedProps&&st===s.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||j===s.memoizedProps&&st===s.memoizedState||(o.flags|=1024),d=!1)}return jj(s,o,h,d,_,g)}function jj(s,o,h,d,g,_){gj(s,o);var b=(o.flags&128)!==0;if(!d&&!b)return g&&dg(o,h,!1),Zi(s,o,_);d=o.stateNode,Wi.current=o;var j=b&&typeof h.getDerivedStateFromError!="function"?null:d.render();return o.flags|=1,s!==null&&b?(o.child=Ug(o,s.child,null,_),o.child=Ug(o,null,j,_)):Xi(s,o,j,_),o.memoizedState=d.state,g&&dg(o,h,!0),o.child}function kj(s){var o=s.stateNode;o.pendingContext?ag(s,o.pendingContext,o.pendingContext!==o.context):o.context&&ag(s,o.context,!1),yh(s,o.containerInfo)}function lj(s,o,h,d,g){return Ig(),Jg(g),o.flags|=256,Xi(s,o,h,d),o.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(s){return{baseLanes:s,cachePool:null,transitions:null}}function oj(s,o,h){var d=o.pendingProps,g=L$3.current,_=!1,b=(o.flags&128)!==0,j;if((j=b)||(j=s!==null&&s.memoizedState===null?!1:(g&2)!==0),j?(_=!0,o.flags&=-129):(s===null||s.memoizedState!==null)&&(g|=1),G(L$3,g&1),s===null)return Eg(o),s=o.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?(o.mode&1?s.data==="$!"?o.lanes=8:o.lanes=1073741824:o.lanes=1,null):(b=d.children,s=d.fallback,_?(d=o.mode,_=o.child,b={mode:"hidden",children:b},!(d&1)&&_!==null?(_.childLanes=0,_.pendingProps=b):_=pj(b,d,0,null),s=Tg(s,d,h,null),_.return=o,s.return=o,_.sibling=s,o.child=_,o.child.memoizedState=nj(h),o.memoizedState=mj,s):qj(o,b));if(g=s.memoizedState,g!==null&&(j=g.dehydrated,j!==null))return rj(s,o,b,d,j,g,h);if(_){_=d.fallback,b=o.mode,g=s.child,j=g.sibling;var et={mode:"hidden",children:d.children};return!(b&1)&&o.child!==g?(d=o.child,d.childLanes=0,d.pendingProps=et,o.deletions=null):(d=Pg(g,et),d.subtreeFlags=g.subtreeFlags&14680064),j!==null?_=Pg(j,_):(_=Tg(_,b,h,null),_.flags|=2),_.return=o,d.return=o,d.sibling=_,o.child=d,d=_,_=o.child,b=s.child.memoizedState,b=b===null?nj(h):{baseLanes:b.baseLanes|h,cachePool:null,transitions:b.transitions},_.memoizedState=b,_.childLanes=s.childLanes&~h,o.memoizedState=mj,d}return _=s.child,s=_.sibling,d=Pg(_,{mode:"visible",children:d.children}),!(o.mode&1)&&(d.lanes=h),d.return=o,d.sibling=null,s!==null&&(h=o.deletions,h===null?(o.deletions=[s],o.flags|=16):h.push(s)),o.child=d,o.memoizedState=null,d}function qj(s,o){return o=pj({mode:"visible",children:o},s.mode,0,null),o.return=s,s.child=o}function sj(s,o,h,d){return d!==null&&Jg(d),Ug(o,s.child,null,h),s=qj(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function rj(s,o,h,d,g,_,b){if(h)return o.flags&256?(o.flags&=-257,d=Ki(Error(p$1(422))),sj(s,o,b,d)):o.memoizedState!==null?(o.child=s.child,o.flags|=128,null):(_=d.fallback,g=o.mode,d=pj({mode:"visible",children:d.children},g,0,null),_=Tg(_,g,b,null),_.flags|=2,d.return=o,_.return=o,d.sibling=_,o.child=d,o.mode&1&&Ug(o,s.child,null,b),o.child.memoizedState=nj(b),o.memoizedState=mj,_);if(!(o.mode&1))return sj(s,o,b,null);if(g.data==="$!"){if(d=g.nextSibling&&g.nextSibling.dataset,d)var j=d.dgst;return d=j,_=Error(p$1(419)),d=Ki(_,d,void 0),sj(s,o,b,d)}if(j=(b&s.childLanes)!==0,dh||j){if(d=Q,d!==null){switch(b&-b){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=g&(d.suspendedLanes|b)?0:g,g!==0&&g!==_.retryLane&&(_.retryLane=g,ih(s,g),gi(d,s,g,-1))}return tj(),d=Ki(Error(p$1(421))),sj(s,o,b,d)}return g.data==="$?"?(o.flags|=128,o.child=s.child,o=uj.bind(null,s),g._reactRetry=o,null):(s=_.treeContext,yg=Lf(g.nextSibling),xg=o,I=!0,zg=null,s!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=s.id,sg=s.overflow,qg=o),o=qj(o,d.children),o.flags|=4096,o)}function vj(s,o,h){s.lanes|=o;var d=s.alternate;d!==null&&(d.lanes|=o),bh(s.return,o,h)}function wj(s,o,h,d,g){var _=s.memoizedState;_===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:d,tail:h,tailMode:g}:(_.isBackwards=o,_.rendering=null,_.renderingStartTime=0,_.last=d,_.tail=h,_.tailMode=g)}function xj(s,o,h){var d=o.pendingProps,g=d.revealOrder,_=d.tail;if(Xi(s,o,d.children,h),d=L$3.current,d&2)d=d&1|2,o.flags|=128;else{if(s!==null&&s.flags&128)t:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&vj(s,h,o);else if(s.tag===19)vj(s,h,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break t;for(;s.sibling===null;){if(s.return===null||s.return===o)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}d&=1}if(G(L$3,d),!(o.mode&1))o.memoizedState=null;else switch(g){case"forwards":for(h=o.child,g=null;h!==null;)s=h.alternate,s!==null&&Ch(s)===null&&(g=h),h=h.sibling;h=g,h===null?(g=o.child,o.child=null):(g=h.sibling,h.sibling=null),wj(o,!1,g,h,_);break;case"backwards":for(h=null,g=o.child,o.child=null;g!==null;){if(s=g.alternate,s!==null&&Ch(s)===null){o.child=g;break}s=g.sibling,g.sibling=h,h=g,g=s}wj(o,!0,h,null,_);break;case"together":wj(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function ij(s,o){!(o.mode&1)&&s!==null&&(s.alternate=null,o.alternate=null,o.flags|=2)}function Zi(s,o,h){if(s!==null&&(o.dependencies=s.dependencies),rh|=o.lanes,!(h&o.childLanes))return null;if(s!==null&&o.child!==s.child)throw Error(p$1(153));if(o.child!==null){for(s=o.child,h=Pg(s,s.pendingProps),o.child=h,h.return=o;s.sibling!==null;)s=s.sibling,h=h.sibling=Pg(s,s.pendingProps),h.return=o;h.sibling=null}return o.child}function yj(s,o,h){switch(o.tag){case 3:kj(o),Ig();break;case 5:Ah(o);break;case 1:Zf(o.type)&&cg(o);break;case 4:yh(o,o.stateNode.containerInfo);break;case 10:var d=o.type._context,g=o.memoizedProps.value;G(Wg,d._currentValue),d._currentValue=g;break;case 13:if(d=o.memoizedState,d!==null)return d.dehydrated!==null?(G(L$3,L$3.current&1),o.flags|=128,null):h&o.child.childLanes?oj(s,o,h):(G(L$3,L$3.current&1),s=Zi(s,o,h),s!==null?s.sibling:null);G(L$3,L$3.current&1);break;case 19:if(d=(h&o.childLanes)!==0,s.flags&128){if(d)return xj(s,o,h);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),G(L$3,L$3.current),d)break;return null;case 22:case 23:return o.lanes=0,dj(s,o,h)}return Zi(s,o,h)}var zj,Aj,Bj,Cj;zj=function(s,o){for(var h=o.child;h!==null;){if(h.tag===5||h.tag===6)s.appendChild(h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===o)break;for(;h.sibling===null;){if(h.return===null||h.return===o)return;h=h.return}h.sibling.return=h.return,h=h.sibling}};Aj=function(){};Bj=function(s,o,h,d){var g=s.memoizedProps;if(g!==d){s=o.stateNode,xh(uh.current);var _=null;switch(h){case"input":g=Ya(s,g),d=Ya(s,d),_=[];break;case"select":g=A$1({},g,{value:void 0}),d=A$1({},d,{value:void 0}),_=[];break;case"textarea":g=gb(s,g),d=gb(s,d),_=[];break;default:typeof g.onClick!="function"&&typeof d.onClick=="function"&&(s.onclick=Bf)}ub(h,d);var b;h=null;for(tt in g)if(!d.hasOwnProperty(tt)&&g.hasOwnProperty(tt)&&g[tt]!=null)if(tt==="style"){var j=g[tt];for(b in j)j.hasOwnProperty(b)&&(h||(h={}),h[b]="")}else tt!=="dangerouslySetInnerHTML"&&tt!=="children"&&tt!=="suppressContentEditableWarning"&&tt!=="suppressHydrationWarning"&&tt!=="autoFocus"&&(ea.hasOwnProperty(tt)?_||(_=[]):(_=_||[]).push(tt,null));for(tt in d){var et=d[tt];if(j=g!=null?g[tt]:void 0,d.hasOwnProperty(tt)&&et!==j&&(et!=null||j!=null))if(tt==="style")if(j){for(b in j)!j.hasOwnProperty(b)||et&&et.hasOwnProperty(b)||(h||(h={}),h[b]="");for(b in et)et.hasOwnProperty(b)&&j[b]!==et[b]&&(h||(h={}),h[b]=et[b])}else h||(_||(_=[]),_.push(tt,h)),h=et;else tt==="dangerouslySetInnerHTML"?(et=et?et.__html:void 0,j=j?j.__html:void 0,et!=null&&j!==et&&(_=_||[]).push(tt,et)):tt==="children"?typeof et!="string"&&typeof et!="number"||(_=_||[]).push(tt,""+et):tt!=="suppressContentEditableWarning"&&tt!=="suppressHydrationWarning"&&(ea.hasOwnProperty(tt)?(et!=null&&tt==="onScroll"&&D("scroll",s),_||j===et||(_=[])):(_=_||[]).push(tt,et))}h&&(_=_||[]).push("style",h);var tt=_;(o.updateQueue=tt)&&(o.flags|=4)}};Cj=function(s,o,h,d){h!==d&&(o.flags|=4)};function Dj(s,o){if(!I)switch(s.tailMode){case"hidden":o=s.tail;for(var h=null;o!==null;)o.alternate!==null&&(h=o),o=o.sibling;h===null?s.tail=null:h.sibling=null;break;case"collapsed":h=s.tail;for(var d=null;h!==null;)h.alternate!==null&&(d=h),h=h.sibling;d===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:d.sibling=null}}function S(s){var o=s.alternate!==null&&s.alternate.child===s.child,h=0,d=0;if(o)for(var g=s.child;g!==null;)h|=g.lanes|g.childLanes,d|=g.subtreeFlags&14680064,d|=g.flags&14680064,g.return=s,g=g.sibling;else for(g=s.child;g!==null;)h|=g.lanes|g.childLanes,d|=g.subtreeFlags,d|=g.flags,g.return=s,g=g.sibling;return s.subtreeFlags|=d,s.childLanes=h,o}function Ej(s,o,h){var d=o.pendingProps;switch(wg(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S(o),null;case 1:return Zf(o.type)&&$f(),S(o),null;case 3:return d=o.stateNode,zh(),E$1(Wf),E$1(H),Eh(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(s===null||s.child===null)&&(Gg(o)?o.flags|=4:s===null||s.memoizedState.isDehydrated&&!(o.flags&256)||(o.flags|=1024,zg!==null&&(Fj(zg),zg=null))),Aj(s,o),S(o),null;case 5:Bh(o);var g=xh(wh.current);if(h=o.type,s!==null&&o.stateNode!=null)Bj(s,o,h,d,g),s.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!d){if(o.stateNode===null)throw Error(p$1(166));return S(o),null}if(s=xh(uh.current),Gg(o)){d=o.stateNode,h=o.type;var _=o.memoizedProps;switch(d[Of]=o,d[Pf]=_,s=(o.mode&1)!==0,h){case"dialog":D("cancel",d),D("close",d);break;case"iframe":case"object":case"embed":D("load",d);break;case"video":case"audio":for(g=0;g<lf.length;g++)D(lf[g],d);break;case"source":D("error",d);break;case"img":case"image":case"link":D("error",d),D("load",d);break;case"details":D("toggle",d);break;case"input":Za(d,_),D("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!_.multiple},D("invalid",d);break;case"textarea":hb(d,_),D("invalid",d)}ub(h,_),g=null;for(var b in _)if(_.hasOwnProperty(b)){var j=_[b];b==="children"?typeof j=="string"?d.textContent!==j&&(_.suppressHydrationWarning!==!0&&Af(d.textContent,j,s),g=["children",j]):typeof j=="number"&&d.textContent!==""+j&&(_.suppressHydrationWarning!==!0&&Af(d.textContent,j,s),g=["children",""+j]):ea.hasOwnProperty(b)&&j!=null&&b==="onScroll"&&D("scroll",d)}switch(h){case"input":Va(d),db(d,_,!0);break;case"textarea":Va(d),jb(d);break;case"select":case"option":break;default:typeof _.onClick=="function"&&(d.onclick=Bf)}d=g,o.updateQueue=d,d!==null&&(o.flags|=4)}else{b=g.nodeType===9?g:g.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=kb(h)),s==="http://www.w3.org/1999/xhtml"?h==="script"?(s=b.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof d.is=="string"?s=b.createElement(h,{is:d.is}):(s=b.createElement(h),h==="select"&&(b=s,d.multiple?b.multiple=!0:d.size&&(b.size=d.size))):s=b.createElementNS(s,h),s[Of]=o,s[Pf]=d,zj(s,o,!1,!1),o.stateNode=s;t:{switch(b=vb(h,d),h){case"dialog":D("cancel",s),D("close",s),g=d;break;case"iframe":case"object":case"embed":D("load",s),g=d;break;case"video":case"audio":for(g=0;g<lf.length;g++)D(lf[g],s);g=d;break;case"source":D("error",s),g=d;break;case"img":case"image":case"link":D("error",s),D("load",s),g=d;break;case"details":D("toggle",s),g=d;break;case"input":Za(s,d),g=Ya(s,d),D("invalid",s);break;case"option":g=d;break;case"select":s._wrapperState={wasMultiple:!!d.multiple},g=A$1({},d,{value:void 0}),D("invalid",s);break;case"textarea":hb(s,d),g=gb(s,d),D("invalid",s);break;default:g=d}ub(h,g),j=g;for(_ in j)if(j.hasOwnProperty(_)){var et=j[_];_==="style"?sb(s,et):_==="dangerouslySetInnerHTML"?(et=et?et.__html:void 0,et!=null&&nb(s,et)):_==="children"?typeof et=="string"?(h!=="textarea"||et!=="")&&ob(s,et):typeof et=="number"&&ob(s,""+et):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(ea.hasOwnProperty(_)?et!=null&&_==="onScroll"&&D("scroll",s):et!=null&&ta(s,_,et,b))}switch(h){case"input":Va(s),db(s,d,!1);break;case"textarea":Va(s),jb(s);break;case"option":d.value!=null&&s.setAttribute("value",""+Sa(d.value));break;case"select":s.multiple=!!d.multiple,_=d.value,_!=null?fb(s,!!d.multiple,_,!1):d.defaultValue!=null&&fb(s,!!d.multiple,d.defaultValue,!0);break;default:typeof g.onClick=="function"&&(s.onclick=Bf)}switch(h){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break t;case"img":d=!0;break t;default:d=!1}}d&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return S(o),null;case 6:if(s&&o.stateNode!=null)Cj(s,o,s.memoizedProps,d);else{if(typeof d!="string"&&o.stateNode===null)throw Error(p$1(166));if(h=xh(wh.current),xh(uh.current),Gg(o)){if(d=o.stateNode,h=o.memoizedProps,d[Of]=o,(_=d.nodeValue!==h)&&(s=xg,s!==null))switch(s.tag){case 3:Af(d.nodeValue,h,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&Af(d.nodeValue,h,(s.mode&1)!==0)}_&&(o.flags|=4)}else d=(h.nodeType===9?h:h.ownerDocument).createTextNode(d),d[Of]=o,o.stateNode=d}return S(o),null;case 13:if(E$1(L$3),d=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(I&&yg!==null&&o.mode&1&&!(o.flags&128))Hg(),Ig(),o.flags|=98560,_=!1;else if(_=Gg(o),d!==null&&d.dehydrated!==null){if(s===null){if(!_)throw Error(p$1(318));if(_=o.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(p$1(317));_[Of]=o}else Ig(),!(o.flags&128)&&(o.memoizedState=null),o.flags|=4;S(o),_=!1}else zg!==null&&(Fj(zg),zg=null),_=!0;if(!_)return o.flags&65536?o:null}return o.flags&128?(o.lanes=h,o):(d=d!==null,d!==(s!==null&&s.memoizedState!==null)&&d&&(o.child.flags|=8192,o.mode&1&&(s===null||L$3.current&1?T$1===0&&(T$1=3):tj())),o.updateQueue!==null&&(o.flags|=4),S(o),null);case 4:return zh(),Aj(s,o),s===null&&sf(o.stateNode.containerInfo),S(o),null;case 10:return ah(o.type._context),S(o),null;case 17:return Zf(o.type)&&$f(),S(o),null;case 19:if(E$1(L$3),_=o.memoizedState,_===null)return S(o),null;if(d=(o.flags&128)!==0,b=_.rendering,b===null)if(d)Dj(_,!1);else{if(T$1!==0||s!==null&&s.flags&128)for(s=o.child;s!==null;){if(b=Ch(s),b!==null){for(o.flags|=128,Dj(_,!1),d=b.updateQueue,d!==null&&(o.updateQueue=d,o.flags|=4),o.subtreeFlags=0,d=h,h=o.child;h!==null;)_=h,s=d,_.flags&=14680066,b=_.alternate,b===null?(_.childLanes=0,_.lanes=s,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=b.childLanes,_.lanes=b.lanes,_.child=b.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=b.memoizedProps,_.memoizedState=b.memoizedState,_.updateQueue=b.updateQueue,_.type=b.type,s=b.dependencies,_.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),h=h.sibling;return G(L$3,L$3.current&1|2),o.child}s=s.sibling}_.tail!==null&&B()>Gj&&(o.flags|=128,d=!0,Dj(_,!1),o.lanes=4194304)}else{if(!d)if(s=Ch(b),s!==null){if(o.flags|=128,d=!0,h=s.updateQueue,h!==null&&(o.updateQueue=h,o.flags|=4),Dj(_,!0),_.tail===null&&_.tailMode==="hidden"&&!b.alternate&&!I)return S(o),null}else 2*B()-_.renderingStartTime>Gj&&h!==1073741824&&(o.flags|=128,d=!0,Dj(_,!1),o.lanes=4194304);_.isBackwards?(b.sibling=o.child,o.child=b):(h=_.last,h!==null?h.sibling=b:o.child=b,_.last=b)}return _.tail!==null?(o=_.tail,_.rendering=o,_.tail=o.sibling,_.renderingStartTime=B(),o.sibling=null,h=L$3.current,G(L$3,d?h&1|2:h&1),o):(S(o),null);case 22:case 23:return Hj(),d=o.memoizedState!==null,s!==null&&s.memoizedState!==null!==d&&(o.flags|=8192),d&&o.mode&1?fj&1073741824&&(S(o),o.subtreeFlags&6&&(o.flags|=8192)):S(o),null;case 24:return null;case 25:return null}throw Error(p$1(156,o.tag))}function Ij(s,o){switch(wg(o),o.tag){case 1:return Zf(o.type)&&$f(),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return zh(),E$1(Wf),E$1(H),Eh(),s=o.flags,s&65536&&!(s&128)?(o.flags=s&-65537|128,o):null;case 5:return Bh(o),null;case 13:if(E$1(L$3),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(p$1(340));Ig()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return E$1(L$3),null;case 4:return zh(),null;case 10:return ah(o.type._context),null;case 22:case 23:return Hj(),null;case 24:return null;default:return null}}var Jj=!1,U$1=!1,Kj=typeof WeakSet=="function"?WeakSet:Set,V$1=null;function Lj(s,o){var h=s.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(d){W(s,o,d)}else h.current=null}function Mj(s,o,h){try{h()}catch(d){W(s,o,d)}}var Nj=!1;function Oj(s,o){if(Cf=dd,s=Me(),Ne(s)){if("selectionStart"in s)var h={start:s.selectionStart,end:s.selectionEnd};else t:{h=(h=s.ownerDocument)&&h.defaultView||window;var d=h.getSelection&&h.getSelection();if(d&&d.rangeCount!==0){h=d.anchorNode;var g=d.anchorOffset,_=d.focusNode;d=d.focusOffset;try{h.nodeType,_.nodeType}catch{h=null;break t}var b=0,j=-1,et=-1,tt=0,rt=0,at=s,st=null;e:for(;;){for(var At;at!==h||g!==0&&at.nodeType!==3||(j=b+g),at!==_||d!==0&&at.nodeType!==3||(et=b+d),at.nodeType===3&&(b+=at.nodeValue.length),(At=at.firstChild)!==null;)st=at,at=At;for(;;){if(at===s)break e;if(st===h&&++tt===g&&(j=b),st===_&&++rt===d&&(et=b),(At=at.nextSibling)!==null)break;at=st,st=at.parentNode}at=At}h=j===-1||et===-1?null:{start:j,end:et}}else h=null}h=h||{start:0,end:0}}else h=null;for(Df={focusedElem:s,selectionRange:h},dd=!1,V$1=o;V$1!==null;)if(o=V$1,s=o.child,(o.subtreeFlags&1028)!==0&&s!==null)s.return=o,V$1=s;else for(;V$1!==null;){o=V$1;try{var ht=o.alternate;if(o.flags&1024)switch(o.tag){case 0:case 11:case 15:break;case 1:if(ht!==null){var ct=ht.memoizedProps,_t=ht.memoizedState,gt=o.stateNode,wt=gt.getSnapshotBeforeUpdate(o.elementType===o.type?ct:Ci(o.type,ct),_t);gt.__reactInternalSnapshotBeforeUpdate=wt}break;case 3:var ft=o.stateNode.containerInfo;ft.nodeType===1?ft.textContent="":ft.nodeType===9&&ft.documentElement&&ft.removeChild(ft.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$1(163))}}catch(dt){W(o,o.return,dt)}if(s=o.sibling,s!==null){s.return=o.return,V$1=s;break}V$1=o.return}return ht=Nj,Nj=!1,ht}function Pj(s,o,h){var d=o.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var g=d=d.next;do{if((g.tag&s)===s){var _=g.destroy;g.destroy=void 0,_!==void 0&&Mj(o,h,_)}g=g.next}while(g!==d)}}function Qj(s,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var h=o=o.next;do{if((h.tag&s)===s){var d=h.create;h.destroy=d()}h=h.next}while(h!==o)}}function Rj(s){var o=s.ref;if(o!==null){var h=s.stateNode;switch(s.tag){case 5:s=h;break;default:s=h}typeof o=="function"?o(s):o.current=s}}function Sj(s){var o=s.alternate;o!==null&&(s.alternate=null,Sj(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&(delete o[Of],delete o[Pf],delete o[of],delete o[Qf],delete o[Rf])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function Tj(s){return s.tag===5||s.tag===3||s.tag===4}function Uj(s){t:for(;;){for(;s.sibling===null;){if(s.return===null||Tj(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue t;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Vj(s,o,h){var d=s.tag;if(d===5||d===6)s=s.stateNode,o?h.nodeType===8?h.parentNode.insertBefore(s,o):h.insertBefore(s,o):(h.nodeType===8?(o=h.parentNode,o.insertBefore(s,h)):(o=h,o.appendChild(s)),h=h._reactRootContainer,h!=null||o.onclick!==null||(o.onclick=Bf));else if(d!==4&&(s=s.child,s!==null))for(Vj(s,o,h),s=s.sibling;s!==null;)Vj(s,o,h),s=s.sibling}function Wj(s,o,h){var d=s.tag;if(d===5||d===6)s=s.stateNode,o?h.insertBefore(s,o):h.appendChild(s);else if(d!==4&&(s=s.child,s!==null))for(Wj(s,o,h),s=s.sibling;s!==null;)Wj(s,o,h),s=s.sibling}var X=null,Xj=!1;function Yj(s,o,h){for(h=h.child;h!==null;)Zj(s,o,h),h=h.sibling}function Zj(s,o,h){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,h)}catch{}switch(h.tag){case 5:U$1||Lj(h,o);case 6:var d=X,g=Xj;X=null,Yj(s,o,h),X=d,Xj=g,X!==null&&(Xj?(s=X,h=h.stateNode,s.nodeType===8?s.parentNode.removeChild(h):s.removeChild(h)):X.removeChild(h.stateNode));break;case 18:X!==null&&(Xj?(s=X,h=h.stateNode,s.nodeType===8?Kf(s.parentNode,h):s.nodeType===1&&Kf(s,h),bd(s)):Kf(X,h.stateNode));break;case 4:d=X,g=Xj,X=h.stateNode.containerInfo,Xj=!0,Yj(s,o,h),X=d,Xj=g;break;case 0:case 11:case 14:case 15:if(!U$1&&(d=h.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){g=d=d.next;do{var _=g,b=_.destroy;_=_.tag,b!==void 0&&(_&2||_&4)&&Mj(h,o,b),g=g.next}while(g!==d)}Yj(s,o,h);break;case 1:if(!U$1&&(Lj(h,o),d=h.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=h.memoizedProps,d.state=h.memoizedState,d.componentWillUnmount()}catch(j){W(h,o,j)}Yj(s,o,h);break;case 21:Yj(s,o,h);break;case 22:h.mode&1?(U$1=(d=U$1)||h.memoizedState!==null,Yj(s,o,h),U$1=d):Yj(s,o,h);break;default:Yj(s,o,h)}}function ak(s){var o=s.updateQueue;if(o!==null){s.updateQueue=null;var h=s.stateNode;h===null&&(h=s.stateNode=new Kj),o.forEach(function(d){var g=bk.bind(null,s,d);h.has(d)||(h.add(d),d.then(g,g))})}}function ck(s,o){var h=o.deletions;if(h!==null)for(var d=0;d<h.length;d++){var g=h[d];try{var _=s,b=o,j=b;t:for(;j!==null;){switch(j.tag){case 5:X=j.stateNode,Xj=!1;break t;case 3:X=j.stateNode.containerInfo,Xj=!0;break t;case 4:X=j.stateNode.containerInfo,Xj=!0;break t}j=j.return}if(X===null)throw Error(p$1(160));Zj(_,b,g),X=null,Xj=!1;var et=g.alternate;et!==null&&(et.return=null),g.return=null}catch(tt){W(g,o,tt)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)dk(o,s),o=o.sibling}function dk(s,o){var h=s.alternate,d=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(ck(o,s),ek(s),d&4){try{Pj(3,s,s.return),Qj(3,s)}catch(ct){W(s,s.return,ct)}try{Pj(5,s,s.return)}catch(ct){W(s,s.return,ct)}}break;case 1:ck(o,s),ek(s),d&512&&h!==null&&Lj(h,h.return);break;case 5:if(ck(o,s),ek(s),d&512&&h!==null&&Lj(h,h.return),s.flags&32){var g=s.stateNode;try{ob(g,"")}catch(ct){W(s,s.return,ct)}}if(d&4&&(g=s.stateNode,g!=null)){var _=s.memoizedProps,b=h!==null?h.memoizedProps:_,j=s.type,et=s.updateQueue;if(s.updateQueue=null,et!==null)try{j==="input"&&_.type==="radio"&&_.name!=null&&ab(g,_),vb(j,b);var tt=vb(j,_);for(b=0;b<et.length;b+=2){var rt=et[b],at=et[b+1];rt==="style"?sb(g,at):rt==="dangerouslySetInnerHTML"?nb(g,at):rt==="children"?ob(g,at):ta(g,rt,at,tt)}switch(j){case"input":bb(g,_);break;case"textarea":ib(g,_);break;case"select":var st=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!_.multiple;var At=_.value;At!=null?fb(g,!!_.multiple,At,!1):st!==!!_.multiple&&(_.defaultValue!=null?fb(g,!!_.multiple,_.defaultValue,!0):fb(g,!!_.multiple,_.multiple?[]:"",!1))}g[Pf]=_}catch(ct){W(s,s.return,ct)}}break;case 6:if(ck(o,s),ek(s),d&4){if(s.stateNode===null)throw Error(p$1(162));g=s.stateNode,_=s.memoizedProps;try{g.nodeValue=_}catch(ct){W(s,s.return,ct)}}break;case 3:if(ck(o,s),ek(s),d&4&&h!==null&&h.memoizedState.isDehydrated)try{bd(o.containerInfo)}catch(ct){W(s,s.return,ct)}break;case 4:ck(o,s),ek(s);break;case 13:ck(o,s),ek(s),g=s.child,g.flags&8192&&(_=g.memoizedState!==null,g.stateNode.isHidden=_,!_||g.alternate!==null&&g.alternate.memoizedState!==null||(fk=B())),d&4&&ak(s);break;case 22:if(rt=h!==null&&h.memoizedState!==null,s.mode&1?(U$1=(tt=U$1)||rt,ck(o,s),U$1=tt):ck(o,s),ek(s),d&8192){if(tt=s.memoizedState!==null,(s.stateNode.isHidden=tt)&&!rt&&s.mode&1)for(V$1=s,rt=s.child;rt!==null;){for(at=V$1=rt;V$1!==null;){switch(st=V$1,At=st.child,st.tag){case 0:case 11:case 14:case 15:Pj(4,st,st.return);break;case 1:Lj(st,st.return);var ht=st.stateNode;if(typeof ht.componentWillUnmount=="function"){d=st,h=st.return;try{o=d,ht.props=o.memoizedProps,ht.state=o.memoizedState,ht.componentWillUnmount()}catch(ct){W(d,h,ct)}}break;case 5:Lj(st,st.return);break;case 22:if(st.memoizedState!==null){gk(at);continue}}At!==null?(At.return=st,V$1=At):gk(at)}rt=rt.sibling}t:for(rt=null,at=s;;){if(at.tag===5){if(rt===null){rt=at;try{g=at.stateNode,tt?(_=g.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none"):(j=at.stateNode,et=at.memoizedProps.style,b=et!=null&&et.hasOwnProperty("display")?et.display:null,j.style.display=rb("display",b))}catch(ct){W(s,s.return,ct)}}}else if(at.tag===6){if(rt===null)try{at.stateNode.nodeValue=tt?"":at.memoizedProps}catch(ct){W(s,s.return,ct)}}else if((at.tag!==22&&at.tag!==23||at.memoizedState===null||at===s)&&at.child!==null){at.child.return=at,at=at.child;continue}if(at===s)break t;for(;at.sibling===null;){if(at.return===null||at.return===s)break t;rt===at&&(rt=null),at=at.return}rt===at&&(rt=null),at.sibling.return=at.return,at=at.sibling}}break;case 19:ck(o,s),ek(s),d&4&&ak(s);break;case 21:break;default:ck(o,s),ek(s)}}function ek(s){var o=s.flags;if(o&2){try{t:{for(var h=s.return;h!==null;){if(Tj(h)){var d=h;break t}h=h.return}throw Error(p$1(160))}switch(d.tag){case 5:var g=d.stateNode;d.flags&32&&(ob(g,""),d.flags&=-33);var _=Uj(s);Wj(s,_,g);break;case 3:case 4:var b=d.stateNode.containerInfo,j=Uj(s);Vj(s,j,b);break;default:throw Error(p$1(161))}}catch(et){W(s,s.return,et)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function hk(s,o,h){V$1=s,ik(s)}function ik(s,o,h){for(var d=(s.mode&1)!==0;V$1!==null;){var g=V$1,_=g.child;if(g.tag===22&&d){var b=g.memoizedState!==null||Jj;if(!b){var j=g.alternate,et=j!==null&&j.memoizedState!==null||U$1;j=Jj;var tt=U$1;if(Jj=b,(U$1=et)&&!tt)for(V$1=g;V$1!==null;)b=V$1,et=b.child,b.tag===22&&b.memoizedState!==null?jk(g):et!==null?(et.return=b,V$1=et):jk(g);for(;_!==null;)V$1=_,ik(_),_=_.sibling;V$1=g,Jj=j,U$1=tt}kk(s)}else g.subtreeFlags&8772&&_!==null?(_.return=g,V$1=_):kk(s)}}function kk(s){for(;V$1!==null;){var o=V$1;if(o.flags&8772){var h=o.alternate;try{if(o.flags&8772)switch(o.tag){case 0:case 11:case 15:U$1||Qj(5,o);break;case 1:var d=o.stateNode;if(o.flags&4&&!U$1)if(h===null)d.componentDidMount();else{var g=o.elementType===o.type?h.memoizedProps:Ci(o.type,h.memoizedProps);d.componentDidUpdate(g,h.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var _=o.updateQueue;_!==null&&sh(o,_,d);break;case 3:var b=o.updateQueue;if(b!==null){if(h=null,o.child!==null)switch(o.child.tag){case 5:h=o.child.stateNode;break;case 1:h=o.child.stateNode}sh(o,b,h)}break;case 5:var j=o.stateNode;if(h===null&&o.flags&4){h=j;var et=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":et.autoFocus&&h.focus();break;case"img":et.src&&(h.src=et.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var tt=o.alternate;if(tt!==null){var rt=tt.memoizedState;if(rt!==null){var at=rt.dehydrated;at!==null&&bd(at)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$1(163))}U$1||o.flags&512&&Rj(o)}catch(st){W(o,o.return,st)}}if(o===s){V$1=null;break}if(h=o.sibling,h!==null){h.return=o.return,V$1=h;break}V$1=o.return}}function gk(s){for(;V$1!==null;){var o=V$1;if(o===s){V$1=null;break}var h=o.sibling;if(h!==null){h.return=o.return,V$1=h;break}V$1=o.return}}function jk(s){for(;V$1!==null;){var o=V$1;try{switch(o.tag){case 0:case 11:case 15:var h=o.return;try{Qj(4,o)}catch(et){W(o,h,et)}break;case 1:var d=o.stateNode;if(typeof d.componentDidMount=="function"){var g=o.return;try{d.componentDidMount()}catch(et){W(o,g,et)}}var _=o.return;try{Rj(o)}catch(et){W(o,_,et)}break;case 5:var b=o.return;try{Rj(o)}catch(et){W(o,b,et)}}}catch(et){W(o,o.return,et)}if(o===s){V$1=null;break}var j=o.sibling;if(j!==null){j.return=o.return,V$1=j;break}V$1=o.return}}var lk=Math.ceil,mk=ua.ReactCurrentDispatcher,nk=ua.ReactCurrentOwner,ok=ua.ReactCurrentBatchConfig,K=0,Q=null,Y$1=null,Z$1=0,fj=0,ej=Uf(0),T$1=0,pk=null,rh=0,qk=0,rk=0,sk=null,tk=null,fk=0,Gj=1/0,uk=null,Oi=!1,Pi=null,Ri=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R$1(){return K&6?B():Ak!==-1?Ak:Ak=B()}function yi(s){return s.mode&1?K&2&&Z$1!==0?Z$1&-Z$1:Kg.transition!==null?(Bk===0&&(Bk=yc()),Bk):(s=C,s!==0||(s=window.event,s=s===void 0?16:jd(s.type)),s):1}function gi(s,o,h,d){if(50<yk)throw yk=0,zk=null,Error(p$1(185));Ac(s,h,d),(!(K&2)||s!==Q)&&(s===Q&&(!(K&2)&&(qk|=h),T$1===4&&Ck(s,Z$1)),Dk(s,d),h===1&&K===0&&!(o.mode&1)&&(Gj=B()+500,fg&&jg()))}function Dk(s,o){var h=s.callbackNode;wc(s,o);var d=uc(s,s===Q?Z$1:0);if(d===0)h!==null&&bc(h),s.callbackNode=null,s.callbackPriority=0;else if(o=d&-d,s.callbackPriority!==o){if(h!=null&&bc(h),o===1)s.tag===0?ig(Ek.bind(null,s)):hg(Ek.bind(null,s)),Jf(function(){!(K&6)&&jg()}),h=null;else{switch(Dc(d)){case 1:h=fc;break;case 4:h=gc;break;case 16:h=hc;break;case 536870912:h=jc;break;default:h=hc}h=Fk(h,Gk.bind(null,s))}s.callbackPriority=o,s.callbackNode=h}}function Gk(s,o){if(Ak=-1,Bk=0,K&6)throw Error(p$1(327));var h=s.callbackNode;if(Hk()&&s.callbackNode!==h)return null;var d=uc(s,s===Q?Z$1:0);if(d===0)return null;if(d&30||d&s.expiredLanes||o)o=Ik(s,d);else{o=d;var g=K;K|=2;var _=Jk();(Q!==s||Z$1!==o)&&(uk=null,Gj=B()+500,Kk(s,o));do try{Lk();break}catch(j){Mk(s,j)}while(!0);$g(),mk.current=_,K=g,Y$1!==null?o=0:(Q=null,Z$1=0,o=T$1)}if(o!==0){if(o===2&&(g=xc(s),g!==0&&(d=g,o=Nk(s,g))),o===1)throw h=pk,Kk(s,0),Ck(s,d),Dk(s,B()),h;if(o===6)Ck(s,d);else{if(g=s.current.alternate,!(d&30)&&!Ok(g)&&(o=Ik(s,d),o===2&&(_=xc(s),_!==0&&(d=_,o=Nk(s,_))),o===1))throw h=pk,Kk(s,0),Ck(s,d),Dk(s,B()),h;switch(s.finishedWork=g,s.finishedLanes=d,o){case 0:case 1:throw Error(p$1(345));case 2:Pk(s,tk,uk);break;case 3:if(Ck(s,d),(d&130023424)===d&&(o=fk+500-B(),10<o)){if(uc(s,0)!==0)break;if(g=s.suspendedLanes,(g&d)!==d){R$1(),s.pingedLanes|=s.suspendedLanes&g;break}s.timeoutHandle=Ff(Pk.bind(null,s,tk,uk),o);break}Pk(s,tk,uk);break;case 4:if(Ck(s,d),(d&4194240)===d)break;for(o=s.eventTimes,g=-1;0<d;){var b=31-oc(d);_=1<<b,b=o[b],b>g&&(g=b),d&=~_}if(d=g,d=B()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*lk(d/1960))-d,10<d){s.timeoutHandle=Ff(Pk.bind(null,s,tk,uk),d);break}Pk(s,tk,uk);break;case 5:Pk(s,tk,uk);break;default:throw Error(p$1(329))}}}return Dk(s,B()),s.callbackNode===h?Gk.bind(null,s):null}function Nk(s,o){var h=sk;return s.current.memoizedState.isDehydrated&&(Kk(s,o).flags|=256),s=Ik(s,o),s!==2&&(o=tk,tk=h,o!==null&&Fj(o)),s}function Fj(s){tk===null?tk=s:tk.push.apply(tk,s)}function Ok(s){for(var o=s;;){if(o.flags&16384){var h=o.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var d=0;d<h.length;d++){var g=h[d],_=g.getSnapshot;g=g.value;try{if(!He(_(),g))return!1}catch{return!1}}}if(h=o.child,o.subtreeFlags&16384&&h!==null)h.return=o,o=h;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Ck(s,o){for(o&=~rk,o&=~qk,s.suspendedLanes|=o,s.pingedLanes&=~o,s=s.expirationTimes;0<o;){var h=31-oc(o),d=1<<h;s[h]=-1,o&=~d}}function Ek(s){if(K&6)throw Error(p$1(327));Hk();var o=uc(s,0);if(!(o&1))return Dk(s,B()),null;var h=Ik(s,o);if(s.tag!==0&&h===2){var d=xc(s);d!==0&&(o=d,h=Nk(s,d))}if(h===1)throw h=pk,Kk(s,0),Ck(s,o),Dk(s,B()),h;if(h===6)throw Error(p$1(345));return s.finishedWork=s.current.alternate,s.finishedLanes=o,Pk(s,tk,uk),Dk(s,B()),null}function Qk(s,o){var h=K;K|=1;try{return s(o)}finally{K=h,K===0&&(Gj=B()+500,fg&&jg())}}function Rk(s){wk!==null&&wk.tag===0&&!(K&6)&&Hk();var o=K;K|=1;var h=ok.transition,d=C;try{if(ok.transition=null,C=1,s)return s()}finally{C=d,ok.transition=h,K=o,!(K&6)&&jg()}}function Hj(){fj=ej.current,E$1(ej)}function Kk(s,o){s.finishedWork=null,s.finishedLanes=0;var h=s.timeoutHandle;if(h!==-1&&(s.timeoutHandle=-1,Gf(h)),Y$1!==null)for(h=Y$1.return;h!==null;){var d=h;switch(wg(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&$f();break;case 3:zh(),E$1(Wf),E$1(H),Eh();break;case 5:Bh(d);break;case 4:zh();break;case 13:E$1(L$3);break;case 19:E$1(L$3);break;case 10:ah(d.type._context);break;case 22:case 23:Hj()}h=h.return}if(Q=s,Y$1=s=Pg(s.current,null),Z$1=fj=o,T$1=0,pk=null,rk=qk=rh=0,tk=sk=null,fh!==null){for(o=0;o<fh.length;o++)if(h=fh[o],d=h.interleaved,d!==null){h.interleaved=null;var g=d.next,_=h.pending;if(_!==null){var b=_.next;_.next=g,d.next=b}h.pending=d}fh=null}return s}function Mk(s,o){do{var h=Y$1;try{if($g(),Fh.current=Rh,Ih){for(var d=M.memoizedState;d!==null;){var g=d.queue;g!==null&&(g.pending=null),d=d.next}Ih=!1}if(Hh=0,O=N=M=null,Jh=!1,Kh=0,nk.current=null,h===null||h.return===null){T$1=1,pk=o,Y$1=null;break}t:{var _=s,b=h.return,j=h,et=o;if(o=Z$1,j.flags|=32768,et!==null&&typeof et=="object"&&typeof et.then=="function"){var tt=et,rt=j,at=rt.tag;if(!(rt.mode&1)&&(at===0||at===11||at===15)){var st=rt.alternate;st?(rt.updateQueue=st.updateQueue,rt.memoizedState=st.memoizedState,rt.lanes=st.lanes):(rt.updateQueue=null,rt.memoizedState=null)}var At=Ui(b);if(At!==null){At.flags&=-257,Vi(At,b,j,_,o),At.mode&1&&Si(_,tt,o),o=At,et=tt;var ht=o.updateQueue;if(ht===null){var ct=new Set;ct.add(et),o.updateQueue=ct}else ht.add(et);break t}else{if(!(o&1)){Si(_,tt,o),tj();break t}et=Error(p$1(426))}}else if(I&&j.mode&1){var _t=Ui(b);if(_t!==null){!(_t.flags&65536)&&(_t.flags|=256),Vi(_t,b,j,_,o),Jg(Ji(et,j));break t}}_=et=Ji(et,j),T$1!==4&&(T$1=2),sk===null?sk=[_]:sk.push(_),_=b;do{switch(_.tag){case 3:_.flags|=65536,o&=-o,_.lanes|=o;var gt=Ni(_,et,o);ph(_,gt);break t;case 1:j=et;var wt=_.type,ft=_.stateNode;if(!(_.flags&128)&&(typeof wt.getDerivedStateFromError=="function"||ft!==null&&typeof ft.componentDidCatch=="function"&&(Ri===null||!Ri.has(ft)))){_.flags|=65536,o&=-o,_.lanes|=o;var dt=Qi(_,j,o);ph(_,dt);break t}}_=_.return}while(_!==null)}Sk(h)}catch(xt){o=xt,Y$1===h&&h!==null&&(Y$1=h=h.return);continue}break}while(!0)}function Jk(){var s=mk.current;return mk.current=Rh,s===null?Rh:s}function tj(){(T$1===0||T$1===3||T$1===2)&&(T$1=4),Q===null||!(rh&268435455)&&!(qk&268435455)||Ck(Q,Z$1)}function Ik(s,o){var h=K;K|=2;var d=Jk();(Q!==s||Z$1!==o)&&(uk=null,Kk(s,o));do try{Tk();break}catch(g){Mk(s,g)}while(!0);if($g(),K=h,mk.current=d,Y$1!==null)throw Error(p$1(261));return Q=null,Z$1=0,T$1}function Tk(){for(;Y$1!==null;)Uk(Y$1)}function Lk(){for(;Y$1!==null&&!cc();)Uk(Y$1)}function Uk(s){var o=Vk(s.alternate,s,fj);s.memoizedProps=s.pendingProps,o===null?Sk(s):Y$1=o,nk.current=null}function Sk(s){var o=s;do{var h=o.alternate;if(s=o.return,o.flags&32768){if(h=Ij(h,o),h!==null){h.flags&=32767,Y$1=h;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{T$1=6,Y$1=null;return}}else if(h=Ej(h,o,fj),h!==null){Y$1=h;return}if(o=o.sibling,o!==null){Y$1=o;return}Y$1=o=s}while(o!==null);T$1===0&&(T$1=5)}function Pk(s,o,h){var d=C,g=ok.transition;try{ok.transition=null,C=1,Wk(s,o,h,d)}finally{ok.transition=g,C=d}return null}function Wk(s,o,h,d){do Hk();while(wk!==null);if(K&6)throw Error(p$1(327));h=s.finishedWork;var g=s.finishedLanes;if(h===null)return null;if(s.finishedWork=null,s.finishedLanes=0,h===s.current)throw Error(p$1(177));s.callbackNode=null,s.callbackPriority=0;var _=h.lanes|h.childLanes;if(Bc(s,_),s===Q&&(Y$1=Q=null,Z$1=0),!(h.subtreeFlags&2064)&&!(h.flags&2064)||vk||(vk=!0,Fk(hc,function(){return Hk(),null})),_=(h.flags&15990)!==0,h.subtreeFlags&15990||_){_=ok.transition,ok.transition=null;var b=C;C=1;var j=K;K|=4,nk.current=null,Oj(s,h),dk(h,s),Oe(Df),dd=!!Cf,Df=Cf=null,s.current=h,hk(h),dc(),K=j,C=b,ok.transition=_}else s.current=h;if(vk&&(vk=!1,wk=s,xk=g),_=s.pendingLanes,_===0&&(Ri=null),mc(h.stateNode),Dk(s,B()),o!==null)for(d=s.onRecoverableError,h=0;h<o.length;h++)g=o[h],d(g.value,{componentStack:g.stack,digest:g.digest});if(Oi)throw Oi=!1,s=Pi,Pi=null,s;return xk&1&&s.tag!==0&&Hk(),_=s.pendingLanes,_&1?s===zk?yk++:(yk=0,zk=s):yk=0,jg(),null}function Hk(){if(wk!==null){var s=Dc(xk),o=ok.transition,h=C;try{if(ok.transition=null,C=16>s?16:s,wk===null)var d=!1;else{if(s=wk,wk=null,xk=0,K&6)throw Error(p$1(331));var g=K;for(K|=4,V$1=s.current;V$1!==null;){var _=V$1,b=_.child;if(V$1.flags&16){var j=_.deletions;if(j!==null){for(var et=0;et<j.length;et++){var tt=j[et];for(V$1=tt;V$1!==null;){var rt=V$1;switch(rt.tag){case 0:case 11:case 15:Pj(8,rt,_)}var at=rt.child;if(at!==null)at.return=rt,V$1=at;else for(;V$1!==null;){rt=V$1;var st=rt.sibling,At=rt.return;if(Sj(rt),rt===tt){V$1=null;break}if(st!==null){st.return=At,V$1=st;break}V$1=At}}}var ht=_.alternate;if(ht!==null){var ct=ht.child;if(ct!==null){ht.child=null;do{var _t=ct.sibling;ct.sibling=null,ct=_t}while(ct!==null)}}V$1=_}}if(_.subtreeFlags&2064&&b!==null)b.return=_,V$1=b;else t:for(;V$1!==null;){if(_=V$1,_.flags&2048)switch(_.tag){case 0:case 11:case 15:Pj(9,_,_.return)}var gt=_.sibling;if(gt!==null){gt.return=_.return,V$1=gt;break t}V$1=_.return}}var wt=s.current;for(V$1=wt;V$1!==null;){b=V$1;var ft=b.child;if(b.subtreeFlags&2064&&ft!==null)ft.return=b,V$1=ft;else t:for(b=wt;V$1!==null;){if(j=V$1,j.flags&2048)try{switch(j.tag){case 0:case 11:case 15:Qj(9,j)}}catch(xt){W(j,j.return,xt)}if(j===b){V$1=null;break t}var dt=j.sibling;if(dt!==null){dt.return=j.return,V$1=dt;break t}V$1=j.return}}if(K=g,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,s)}catch{}d=!0}return d}finally{C=h,ok.transition=o}}return!1}function Xk(s,o,h){o=Ji(h,o),o=Ni(s,o,1),s=nh(s,o,1),o=R$1(),s!==null&&(Ac(s,1,o),Dk(s,o))}function W(s,o,h){if(s.tag===3)Xk(s,s,h);else for(;o!==null;){if(o.tag===3){Xk(o,s,h);break}else if(o.tag===1){var d=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Ri===null||!Ri.has(d))){s=Ji(h,s),s=Qi(o,s,1),o=nh(o,s,1),s=R$1(),o!==null&&(Ac(o,1,s),Dk(o,s));break}}o=o.return}}function Ti(s,o,h){var d=s.pingCache;d!==null&&d.delete(o),o=R$1(),s.pingedLanes|=s.suspendedLanes&h,Q===s&&(Z$1&h)===h&&(T$1===4||T$1===3&&(Z$1&130023424)===Z$1&&500>B()-fk?Kk(s,0):rk|=h),Dk(s,o)}function Yk(s,o){o===0&&(s.mode&1?(o=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):o=1);var h=R$1();s=ih(s,o),s!==null&&(Ac(s,o,h),Dk(s,h))}function uj(s){var o=s.memoizedState,h=0;o!==null&&(h=o.retryLane),Yk(s,h)}function bk(s,o){var h=0;switch(s.tag){case 13:var d=s.stateNode,g=s.memoizedState;g!==null&&(h=g.retryLane);break;case 19:d=s.stateNode;break;default:throw Error(p$1(314))}d!==null&&d.delete(o),Yk(s,h)}var Vk;Vk=function(s,o,h){if(s!==null)if(s.memoizedProps!==o.pendingProps||Wf.current)dh=!0;else{if(!(s.lanes&h)&&!(o.flags&128))return dh=!1,yj(s,o,h);dh=!!(s.flags&131072)}else dh=!1,I&&o.flags&1048576&&ug(o,ng,o.index);switch(o.lanes=0,o.tag){case 2:var d=o.type;ij(s,o),s=o.pendingProps;var g=Yf(o,H.current);ch(o,h),g=Nh(null,o,d,s,g,h);var _=Sh();return o.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,Zf(d)?(_=!0,cg(o)):_=!1,o.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,kh(o),g.updater=Ei,o.stateNode=g,g._reactInternals=o,Ii(o,d,s,h),o=jj(null,o,d,!0,_,h)):(o.tag=0,I&&_&&vg(o),Xi(null,o,g,h),o=o.child),o;case 16:d=o.elementType;t:{switch(ij(s,o),s=o.pendingProps,g=d._init,d=g(d._payload),o.type=d,g=o.tag=Zk(d),s=Ci(d,s),g){case 0:o=cj(null,o,d,s,h);break t;case 1:o=hj(null,o,d,s,h);break t;case 11:o=Yi(null,o,d,s,h);break t;case 14:o=$i(null,o,d,Ci(d.type,s),h);break t}throw Error(p$1(306,d,""))}return o;case 0:return d=o.type,g=o.pendingProps,g=o.elementType===d?g:Ci(d,g),cj(s,o,d,g,h);case 1:return d=o.type,g=o.pendingProps,g=o.elementType===d?g:Ci(d,g),hj(s,o,d,g,h);case 3:t:{if(kj(o),s===null)throw Error(p$1(387));d=o.pendingProps,_=o.memoizedState,g=_.element,lh(s,o),qh(o,d,null,h);var b=o.memoizedState;if(d=b.element,_.isDehydrated)if(_={element:d,isDehydrated:!1,cache:b.cache,pendingSuspenseBoundaries:b.pendingSuspenseBoundaries,transitions:b.transitions},o.updateQueue.baseState=_,o.memoizedState=_,o.flags&256){g=Ji(Error(p$1(423)),o),o=lj(s,o,d,h,g);break t}else if(d!==g){g=Ji(Error(p$1(424)),o),o=lj(s,o,d,h,g);break t}else for(yg=Lf(o.stateNode.containerInfo.firstChild),xg=o,I=!0,zg=null,h=Vg(o,null,d,h),o.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(Ig(),d===g){o=Zi(s,o,h);break t}Xi(s,o,d,h)}o=o.child}return o;case 5:return Ah(o),s===null&&Eg(o),d=o.type,g=o.pendingProps,_=s!==null?s.memoizedProps:null,b=g.children,Ef(d,g)?b=null:_!==null&&Ef(d,_)&&(o.flags|=32),gj(s,o),Xi(s,o,b,h),o.child;case 6:return s===null&&Eg(o),null;case 13:return oj(s,o,h);case 4:return yh(o,o.stateNode.containerInfo),d=o.pendingProps,s===null?o.child=Ug(o,null,d,h):Xi(s,o,d,h),o.child;case 11:return d=o.type,g=o.pendingProps,g=o.elementType===d?g:Ci(d,g),Yi(s,o,d,g,h);case 7:return Xi(s,o,o.pendingProps,h),o.child;case 8:return Xi(s,o,o.pendingProps.children,h),o.child;case 12:return Xi(s,o,o.pendingProps.children,h),o.child;case 10:t:{if(d=o.type._context,g=o.pendingProps,_=o.memoizedProps,b=g.value,G(Wg,d._currentValue),d._currentValue=b,_!==null)if(He(_.value,b)){if(_.children===g.children&&!Wf.current){o=Zi(s,o,h);break t}}else for(_=o.child,_!==null&&(_.return=o);_!==null;){var j=_.dependencies;if(j!==null){b=_.child;for(var et=j.firstContext;et!==null;){if(et.context===d){if(_.tag===1){et=mh(-1,h&-h),et.tag=2;var tt=_.updateQueue;if(tt!==null){tt=tt.shared;var rt=tt.pending;rt===null?et.next=et:(et.next=rt.next,rt.next=et),tt.pending=et}}_.lanes|=h,et=_.alternate,et!==null&&(et.lanes|=h),bh(_.return,h,o),j.lanes|=h;break}et=et.next}}else if(_.tag===10)b=_.type===o.type?null:_.child;else if(_.tag===18){if(b=_.return,b===null)throw Error(p$1(341));b.lanes|=h,j=b.alternate,j!==null&&(j.lanes|=h),bh(b,h,o),b=_.sibling}else b=_.child;if(b!==null)b.return=_;else for(b=_;b!==null;){if(b===o){b=null;break}if(_=b.sibling,_!==null){_.return=b.return,b=_;break}b=b.return}_=b}Xi(s,o,g.children,h),o=o.child}return o;case 9:return g=o.type,d=o.pendingProps.children,ch(o,h),g=eh(g),d=d(g),o.flags|=1,Xi(s,o,d,h),o.child;case 14:return d=o.type,g=Ci(d,o.pendingProps),g=Ci(d.type,g),$i(s,o,d,g,h);case 15:return bj(s,o,o.type,o.pendingProps,h);case 17:return d=o.type,g=o.pendingProps,g=o.elementType===d?g:Ci(d,g),ij(s,o),o.tag=1,Zf(d)?(s=!0,cg(o)):s=!1,ch(o,h),Gi(o,d,g),Ii(o,d,g,h),jj(null,o,d,!0,s,h);case 19:return xj(s,o,h);case 22:return dj(s,o,h)}throw Error(p$1(156,o.tag))};function Fk(s,o){return ac(s,o)}function $k(s,o,h,d){this.tag=s,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(s,o,h,d){return new $k(s,o,h,d)}function aj(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Zk(s){if(typeof s=="function")return aj(s)?1:0;if(s!=null){if(s=s.$$typeof,s===Da)return 11;if(s===Ga)return 14}return 2}function Pg(s,o){var h=s.alternate;return h===null?(h=Bg(s.tag,o,s.key,s.mode),h.elementType=s.elementType,h.type=s.type,h.stateNode=s.stateNode,h.alternate=s,s.alternate=h):(h.pendingProps=o,h.type=s.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=s.flags&14680064,h.childLanes=s.childLanes,h.lanes=s.lanes,h.child=s.child,h.memoizedProps=s.memoizedProps,h.memoizedState=s.memoizedState,h.updateQueue=s.updateQueue,o=s.dependencies,h.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},h.sibling=s.sibling,h.index=s.index,h.ref=s.ref,h}function Rg(s,o,h,d,g,_){var b=2;if(d=s,typeof s=="function")aj(s)&&(b=1);else if(typeof s=="string")b=5;else t:switch(s){case ya:return Tg(h.children,g,_,o);case za:b=8,g|=8;break;case Aa:return s=Bg(12,h,o,g|2),s.elementType=Aa,s.lanes=_,s;case Ea:return s=Bg(13,h,o,g),s.elementType=Ea,s.lanes=_,s;case Fa:return s=Bg(19,h,o,g),s.elementType=Fa,s.lanes=_,s;case Ia:return pj(h,g,_,o);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case Ba:b=10;break t;case Ca:b=9;break t;case Da:b=11;break t;case Ga:b=14;break t;case Ha:b=16,d=null;break t}throw Error(p$1(130,s==null?s:typeof s,""))}return o=Bg(b,h,o,g),o.elementType=s,o.type=d,o.lanes=_,o}function Tg(s,o,h,d){return s=Bg(7,s,d,o),s.lanes=h,s}function pj(s,o,h,d){return s=Bg(22,s,d,o),s.elementType=Ia,s.lanes=h,s.stateNode={isHidden:!1},s}function Qg(s,o,h){return s=Bg(6,s,null,o),s.lanes=h,s}function Sg(s,o,h){return o=Bg(4,s.children!==null?s.children:[],s.key,o),o.lanes=h,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}function al(s,o,h,d,g){this.tag=o,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=d,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function bl(s,o,h,d,g,_,b,j,et){return s=new al(s,o,h,j,et),o===1?(o=1,_===!0&&(o|=8)):o=0,_=Bg(3,null,null,o),s.current=_,_.stateNode=s,_.memoizedState={element:d,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh(_),s}function cl(s,o,h){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:d==null?null:""+d,children:s,containerInfo:o,implementation:h}}function dl(s){if(!s)return Vf;s=s._reactInternals;t:{if(Vb(s)!==s||s.tag!==1)throw Error(p$1(170));var o=s;do{switch(o.tag){case 3:o=o.stateNode.context;break t;case 1:if(Zf(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break t}}o=o.return}while(o!==null);throw Error(p$1(171))}if(s.tag===1){var h=s.type;if(Zf(h))return bg(s,h,o)}return o}function el(s,o,h,d,g,_,b,j,et){return s=bl(h,d,!0,s,g,_,b,j,et),s.context=dl(null),h=s.current,d=R$1(),g=yi(h),_=mh(d,g),_.callback=o??null,nh(h,_,g),s.current.lanes=g,Ac(s,g,d),Dk(s,d),s}function fl(s,o,h,d){var g=o.current,_=R$1(),b=yi(g);return h=dl(h),o.context===null?o.context=h:o.pendingContext=h,o=mh(_,b),o.payload={element:s},d=d===void 0?null:d,d!==null&&(o.callback=d),s=nh(g,o,b),s!==null&&(gi(s,g,b,_),oh(s,g,b)),b}function gl(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function hl(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var h=s.retryLane;s.retryLane=h!==0&&h<o?h:o}}function il(s,o){hl(s,o),(s=s.alternate)&&hl(s,o)}function jl(){return null}var kl=typeof reportError=="function"?reportError:function(s){console.error(s)};function ll(s){this._internalRoot=s}ml.prototype.render=ll.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(p$1(409));fl(s,o,null,null)};ml.prototype.unmount=ll.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;Rk(function(){fl(null,s,null,null)}),o[uf]=null}};function ml(s){this._internalRoot=s}ml.prototype.unstable_scheduleHydration=function(s){if(s){var o=Hc();s={blockedOn:null,target:s,priority:o};for(var h=0;h<Qc.length&&o!==0&&o<Qc[h].priority;h++);Qc.splice(h,0,s),h===0&&Vc(s)}};function nl(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function ol(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function pl(){}function ql(s,o,h,d,g){if(g){if(typeof d=="function"){var _=d;d=function(){var tt=gl(b);_.call(tt)}}var b=el(o,d,s,0,null,!1,!1,"",pl);return s._reactRootContainer=b,s[uf]=b.current,sf(s.nodeType===8?s.parentNode:s),Rk(),b}for(;g=s.lastChild;)s.removeChild(g);if(typeof d=="function"){var j=d;d=function(){var tt=gl(et);j.call(tt)}}var et=bl(s,0,!1,null,null,!1,!1,"",pl);return s._reactRootContainer=et,s[uf]=et.current,sf(s.nodeType===8?s.parentNode:s),Rk(function(){fl(o,et,h,d)}),et}function rl(s,o,h,d,g){var _=h._reactRootContainer;if(_){var b=_;if(typeof g=="function"){var j=g;g=function(){var et=gl(b);j.call(et)}}fl(o,b,s,g)}else b=ql(h,o,s,g,d);return gl(b)}Ec=function(s){switch(s.tag){case 3:var o=s.stateNode;if(o.current.memoizedState.isDehydrated){var h=tc(o.pendingLanes);h!==0&&(Cc(o,h|1),Dk(o,B()),!(K&6)&&(Gj=B()+500,jg()))}break;case 13:Rk(function(){var d=ih(s,1);if(d!==null){var g=R$1();gi(d,s,1,g)}}),il(s,1)}};Fc=function(s){if(s.tag===13){var o=ih(s,134217728);if(o!==null){var h=R$1();gi(o,s,134217728,h)}il(s,134217728)}};Gc=function(s){if(s.tag===13){var o=yi(s),h=ih(s,o);if(h!==null){var d=R$1();gi(h,s,o,d)}il(s,o)}};Hc=function(){return C};Ic=function(s,o){var h=C;try{return C=s,o()}finally{C=h}};yb=function(s,o,h){switch(o){case"input":if(bb(s,h),o=h.name,h.type==="radio"&&o!=null){for(h=s;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<h.length;o++){var d=h[o];if(d!==s&&d.form===s.form){var g=Db(d);if(!g)throw Error(p$1(90));Wa(d),bb(d,g)}}}break;case"textarea":ib(s,h);break;case"select":o=h.value,o!=null&&fb(s,!!h.multiple,o,!1)}};Gb=Qk;Hb=Rk;var sl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Qk]},tl={findFiberByHostInstance:Wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ul={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=Zb(s),s===null?null:s.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||jl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{kc=vl.inject(ul),lc=vl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl;reactDom_production_min.createPortal=function(s,o){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nl(o))throw Error(p$1(200));return cl(s,o,null,h)};reactDom_production_min.createRoot=function(s,o){if(!nl(s))throw Error(p$1(299));var h=!1,d="",g=kl;return o!=null&&(o.unstable_strictMode===!0&&(h=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onRecoverableError!==void 0&&(g=o.onRecoverableError)),o=bl(s,1,!1,null,null,h,!1,d,g),s[uf]=o.current,sf(s.nodeType===8?s.parentNode:s),new ll(o)};reactDom_production_min.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(p$1(188)):(s=Object.keys(s).join(","),Error(p$1(268,s)));return s=Zb(o),s=s===null?null:s.stateNode,s};reactDom_production_min.flushSync=function(s){return Rk(s)};reactDom_production_min.hydrate=function(s,o,h){if(!ol(o))throw Error(p$1(200));return rl(null,s,o,!0,h)};reactDom_production_min.hydrateRoot=function(s,o,h){if(!nl(s))throw Error(p$1(405));var d=h!=null&&h.hydratedSources||null,g=!1,_="",b=kl;if(h!=null&&(h.unstable_strictMode===!0&&(g=!0),h.identifierPrefix!==void 0&&(_=h.identifierPrefix),h.onRecoverableError!==void 0&&(b=h.onRecoverableError)),o=el(o,null,s,1,h??null,g,!1,_,b),s[uf]=o.current,sf(s),d)for(s=0;s<d.length;s++)h=d[s],g=h._getVersion,g=g(h._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[h,g]:o.mutableSourceEagerHydrationData.push(h,g);return new ml(o)};reactDom_production_min.render=function(s,o,h){if(!ol(o))throw Error(p$1(200));return rl(null,s,o,!1,h)};reactDom_production_min.unmountComponentAtNode=function(s){if(!ol(s))throw Error(p$1(40));return s._reactRootContainer?(Rk(function(){rl(null,null,s,!1,function(){s._reactRootContainer=null,s[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Qk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(s,o,h,d){if(!ol(h))throw Error(p$1(200));if(s==null||s._reactInternals===void 0)throw Error(p$1(38));return rl(s,o,h,!1,d)};reactDom_production_min.version="18.3.1-next-f1338f8080-20240426";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(s){console.error(s)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports,m$1=reactDomExports;client.createRoot=m$1.createRoot,client.hydrateRoot=m$1.hydrateRoot;var Yt=Object.defineProperty,Bt=s=>{throw TypeError(s)},Zt=(s,o,h)=>o in s?Yt(s,o,{enumerable:!0,configurable:!0,writable:!0,value:h}):s[o]=h,$e=(s,o,h)=>Zt(s,typeof o!="symbol"?o+"":o,h),Tt=(s,o,h)=>o.has(s)||Bt("Cannot "+h),St=(s,o,h)=>(Tt(s,o,"read from private field"),h?h.call(s):o.get(s)),It=(s,o,h)=>o.has(s)?Bt("Cannot add the same private member more than once"):o instanceof WeakSet?o.add(s):o.set(s,h),Dt=(s,o,h,d)=>(Tt(s,o,"write to private field"),o.set(s,h),h),$t=(s,o,h)=>(Tt(s,o,"access private method"),h),m=Object.defineProperty,p=(s,o,h)=>o in s?m(s,o,{enumerable:!0,configurable:!0,writable:!0,value:h}):s[o]=h,c=(s,o,h)=>p(s,typeof o!="symbol"?o+"":o,h);class R{constructor(){c(this,"device"),c(this,"server"),c(this,"txCharacteristic"),c(this,"rxCharacteristic"),c(this,"SERVICE_UUID","7a230001-5475-a6a4-654c-8431f6ad49c4"),c(this,"TX_CHARACTERISTIC_UUID","7a230002-5475-a6a4-654c-8431f6ad49c4"),c(this,"RX_CHARACTERISTIC_UUID","7a230003-5475-a6a4-654c-8431f6ad49c4"),c(this,"maxPayload",60),c(this,"awaitingPrintResponse",!1),c(this,"awaitingDataResponse",!1),c(this,"printTimeoutId"),c(this,"printResponsePromise"),c(this,"printResolve"),c(this,"dataResponsePromise"),c(this,"dataResolve"),c(this,"onDataResponse"),c(this,"onPrintResponse"),c(this,"onDisconnectHandler"),c(this,"handleDisconnect",()=>{this.device=void 0,this.server=void 0,this.txCharacteristic=void 0,this.rxCharacteristic=void 0,this.onDisconnectHandler&&this.onDisconnectHandler()}),c(this,"notificationHandler",o=>{const h=o.target.value;if(!(!h||h.buffer.byteLength===0))if(h.byteLength>0&&h.getUint8(0)===1){const d=new Uint8Array(h.buffer,h.byteOffset+1,h.byteLength-1);if(this.awaitingDataResponse&&this.dataResolve&&(this.awaitingDataResponse=!1,this.dataResolve(d)),this.onDataResponse){const g=this.onDataResponse(d);g instanceof Promise&&g.catch(console.error)}}else{const d=new TextDecoder().decode(h);if(this.awaitingPrintResponse&&this.printResolve&&(this.awaitingPrintResponse=!1,this.printResolve(d)),this.onPrintResponse){const g=this.onPrintResponse(d);g instanceof Promise&&g.catch(console.error)}}})}setDataResponseHandler(o){this.onDataResponse=o}setPrintResponseHandler(o){this.onPrintResponse=o}setDisconnectHandler(o){this.onDisconnectHandler=o}async _attemptConnection(){var o,h,d,g;if(!this.device||!this.device.gatt)throw new Error("Bluetooth device or GATT interface not available for connection attempt.");this.txCharacteristic=void 0,this.rxCharacteristic=void 0,this.server=void 0;try{console.log(`Attempting to connect to GATT server on device: ${this.device.name||this.device.id}...`),this.server=await this.device.gatt.connect(),console.log("GATT server connected."),console.log("Getting primary service...");const _=await this.server.getPrimaryService(this.SERVICE_UUID);console.log("Primary service obtained."),console.log("Getting TX characteristic..."),this.txCharacteristic=await _.getCharacteristic(this.TX_CHARACTERISTIC_UUID),console.log("TX characteristic obtained."),console.log("Getting RX characteristic..."),this.rxCharacteristic=await _.getCharacteristic(this.RX_CHARACTERISTIC_UUID),console.log("RX characteristic obtained."),console.log("Starting notifications on RX characteristic..."),await this.rxCharacteristic.startNotifications(),this.rxCharacteristic.addEventListener("characteristicvaluechanged",this.notificationHandler),console.log("Notifications started."),await this.sendBreakSignal(!1),console.log("Fetching MTU size (max_length) from device...");const b=await this.sendLua("print(frame.bluetooth.max_length())",{awaitPrint:!0});if(b==null)throw new Error("Failed to get MTU size from device: no response.");const j=parseInt(b);if(isNaN(j)||j<=0)throw new Error(`Invalid MTU size received: '${b}'`);this.maxPayload=j,console.log(`MTU size set to: ${this.maxPayload}`)}catch(_){if(console.error("Error during connection attempt:",_),this.rxCharacteristic){try{(h=(o=this.device)==null?void 0:o.gatt)!=null&&h.connected&&await this.rxCharacteristic.stopNotifications()}catch{}this.rxCharacteristic.removeEventListener("characteristicvaluechanged",this.notificationHandler),this.rxCharacteristic=void 0}throw this.txCharacteristic=void 0,(g=(d=this.device)==null?void 0:d.gatt)!=null&&g.connected&&this.device.gatt.disconnect(),this.server=void 0,_}}async connect(o={}){var h;const{name:d,namePrefix:g,numAttempts:_=5,retryDelayMs:b=1e3}=o;if(!navigator.bluetooth)throw new Error("Web Bluetooth API not available.");if(!this.device){const tt={filters:[d?{services:[this.SERVICE_UUID],name:d}:g?{services:[this.SERVICE_UUID],namePrefix:g}:{services:[this.SERVICE_UUID]}],optionalServices:[this.SERVICE_UUID]};try{if(console.log("Requesting Bluetooth device from user..."),this.device=await navigator.bluetooth.requestDevice(tt),!this.device)throw new Error("No device selected by the user.");console.log(`Device selected: ${this.device.name||this.device.id}`)}catch(rt){throw console.error("Bluetooth device request failed:",rt),this.device=void 0,rt}}if(!this.device)throw new Error("Device not available after selection phase.");const j=this.device;j.removeEventListener("gattserverdisconnected",this.handleDisconnect),j.addEventListener("gattserverdisconnected",this.handleDisconnect);let et;for(let tt=1;tt<=_;tt++){if(!this.device){console.warn(`Device (id: ${j.id}) was disconnected externally during connection attempts.`),et=et||new Error(`Device disconnected externally during connection attempt ${tt}.`);break}try{return console.log(`Connection attempt ${tt} of ${_} to device '${j.name||j.id}'...`),await this._attemptConnection(),console.log(`Successfully connected to ${j.name||j.id} on attempt ${tt}.`),j.id||j.name||"Unknown Device"}catch(rt){if(et=rt,console.error(`Attempt ${tt} to connect to '${j.name||j.id}' failed:`,rt),rt instanceof Error&&rt.name==="NetworkError"&&(rt.message.includes("Connection attempt failed.")||rt.message.includes("GATT operation failed for unknown reason.")||rt.message.includes("GATT Server is disconnected.")||rt.message.includes("Bluetooth device is already connected."))&&tt<_)console.log(`Retryable error encountered. Retrying in ${b/1e3}s...`),await new Promise(at=>setTimeout(at,b));else{console.log("Non-retryable error or max attempts reached. Aborting connection process.");break}}}throw console.error(`Failed to connect to device '${j.name||j.id}' after ${_} attempts or due to external disconnection.`),j.removeEventListener("gattserverdisconnected",this.handleDisconnect),(h=j.gatt)!=null&&h.connected&&j.gatt.disconnect(),this.server=void 0,this.txCharacteristic=void 0,this.rxCharacteristic=void 0,this.device=void 0,et||new Error(`Failed to connect to ${j.name||j.id} after ${_} attempts. No specific error recorded, or device disconnected externally.`)}async disconnect(){var o;this.device&&(o=this.device.gatt)!=null&&o.connected?this.device.gatt.disconnect():this.handleDisconnect()}isConnected(){return!!(this.device&&this.device.gatt&&this.device.gatt.connected)}getMaxPayload(o){return o?this.maxPayload:this.maxPayload-1}async transmit(o,h=!1){if(!this.txCharacteristic)throw new Error("Not connected or TX characteristic not available.");if(o.byteLength>this.maxPayload)throw new Error(`Payload length: ${o.byteLength} exceeds maximum BLE packet size: ${this.maxPayload}`);h&&console.log("Transmitting (hex):",Array.from(o).map(d=>d.toString(16).padStart(2,"0")).join(" ")),await this.txCharacteristic.writeValueWithResponse(o)}async sendLua(o,h={}){const{showMe:d=!1,awaitPrint:g=!1,timeout:_=5e3}=h,b=new TextEncoder().encode(o);if(b.byteLength>this.getMaxPayload(!0))throw new Error(`Lua string payload (${b.byteLength} bytes) is too large for max Lua payload (${this.getMaxPayload(!0)} bytes).`);if(g&&(this.printTimeoutId&&clearTimeout(this.printTimeoutId),this.awaitingPrintResponse=!0,this.printResponsePromise=new Promise((j,et)=>{this.printResolve=j,this.printTimeoutId=setTimeout(()=>{this.awaitingPrintResponse&&(this.awaitingPrintResponse=!1,this.printResolve=void 0,et(new Error(`Device didn't respond with a print within ${_}ms.`)))},_)}).finally(()=>{this.printTimeoutId&&(clearTimeout(this.printTimeoutId),this.printTimeoutId=void 0)})),await this.transmit(b,d),g)return this.printResponsePromise}async sendData(o,h={}){const{showMe:d=!1,awaitData:g=!1,timeout:_=5e3}=h;if(!this.txCharacteristic)throw new Error("Not connected or TX characteristic not available.");if(o.byteLength>this.getMaxPayload(!1))throw new Error(`Data payload (${o.byteLength} bytes) is too large for max data payload (${this.getMaxPayload(!1)} bytes).`);const b=new Uint8Array([1]),j=new Uint8Array(b.length+o.byteLength);j.set(b,0),j.set(o,b.length);let et;if(g&&(this.awaitingDataResponse=!0,this.dataResponsePromise=new Promise((tt,rt)=>{this.dataResolve=tt,et=setTimeout(()=>{this.awaitingDataResponse&&(this.awaitingDataResponse=!1,this.dataResolve=void 0,rt(new Error(`Device didn't respond with data within ${_}ms.`)))},_)}).finally(()=>{et&&clearTimeout(et)})),await this.transmit(j,d),g)return this.dataResponsePromise}async sendResetSignal(o=!1){const h=new Uint8Array([4]);await this.transmit(h,o),await new Promise(d=>setTimeout(d,200))}async sendBreakSignal(o=!1){const h=new Uint8Array([3]);await this.transmit(h,o),await new Promise(d=>setTimeout(d,200))}async uploadFileFromString(o,h="main.lua"){let d=o.replace(/\r/g,"").replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/'/g,"\\'").replace(/"/g,'\\"');const g=await this.sendLua(`f=frame.file.open('${h}','w');print(1)`,{awaitPrint:!0});if(g!=="1")throw new Error(`Failed to open file ${h} on device. Response: ${g}`);const _=this.getMaxPayload(!0)-20;if(_<=0)throw new Error("Max payload size too small for file upload operations.");let b=0;for(;b<d.length;){let j=Math.min(_,d.length-b),et=d.substring(b,b+j);for(;et.endsWith("\\");){let rt=0;for(let at=et.length-1;at>=0&&et[at]==="\\";at--)rt++;if(rt%2!==0)if(j>1)j--,et=d.substring(b,b+j);else throw await this.sendLua("f:close();print(nil)",{awaitPrint:!0}),new Error("Cannot safely chunk content due to isolated escape character at chunk boundary.");else break}const tt=await this.sendLua(`f:write("${et}");print(1)`,{awaitPrint:!0});if(tt!=="1")throw await this.sendLua("f:close();print(nil)",{awaitPrint:!0}),new Error(`Failed to write chunk to ${h}. Response: ${tt}`);b+=j}await this.sendLua("f:close();print(nil)",{awaitPrint:!0})}async uploadFile(o,h="main.lua"){await this.uploadFileFromString(o,h)}async sendMessage(o,h,d=!1){if(o<0||o>255)throw new Error(`Message code must be 0-255, got ${o}`);const g=h.byteLength;if(g>65535)throw new Error(`Payload size ${g} exceeds maximum 65535 bytes`);const _=this.getMaxPayload(!1),b=_-1-2,j=_-1;if(b<=0||j<=0)throw new Error("Max payload size too small for message sending protocol.");let et=0;const tt=Math.min(b,g),rt=new Uint8Array(3+tt);for(rt[0]=o,rt[1]=g>>8,rt[2]=g&255,rt.set(h.subarray(0,tt),3),await this.sendData(rt,{showMe:d,awaitData:!0}),et+=tt;et<g;){const at=g-et,st=Math.min(j,at),At=new Uint8Array(1+st);At[0]=o,At.set(h.subarray(et,et+st),1),await this.sendData(At,{showMe:d,awaitData:!0}),et+=st}}}const stdDataMinLua="local a={}local b={}a.app_data_accum=b;local c={}a.app_data_block=c;local d={}a.app_data=d;local e={}a.parsers=e;function a.update_app_data_accum(f)rc,err=pcall(function()local g=string.byte(f,1)local h=a.app_data_accum[g]if h==nil or next(h)==nil then h={chunk_table={},num_chunks=0,size=0,recv_bytes=0}a.app_data_accum[g]=h end;if h.num_chunks==0 then h.size=string.byte(f,2)<<8|string.byte(f,3)h.chunk_table[1]=string.sub(f,4)h.num_chunks=1;h.recv_bytes=string.len(f)-3;if h.recv_bytes==h.size then a.app_data_block[g]=h.chunk_table[1]h.size=0;h.recv_bytes=0;h.num_chunks=0;h.chunk_table[1]=nil;b[g]=h end else h.chunk_table[h.num_chunks+1]=string.sub(f,2)h.num_chunks=h.num_chunks+1;h.recv_bytes=h.recv_bytes+string.len(f)-1;if h.recv_bytes==h.size then collectgarbage('collect')a.app_data_block[g]=table.concat(h.chunk_table)for i,j in pairs(h.chunk_table)do h.chunk_table[i]=nil end;collectgarbage('collect')h.size=0;h.recv_bytes=0;h.num_chunks=0;a.app_data_accum[g]=h end end;while true do if pcall(frame.bluetooth.send,'\\x00')then break end;frame.sleep(0.0025)end end)if rc==false then print('Error in data accumulator: '..err)while true do if pcall(frame.bluetooth.send,'\\x01')then break end;frame.sleep(0.0025)end;error(err)end end;frame.bluetooth.receive_callback(a.update_app_data_accum)function a.process_raw_items()local k=0;rc,err=pcall(function()collectgarbage('collect')for l,m in pairs(a.app_data_block)do if a.parsers[l]==nil then print('Error: No parser for flag: '..tostring(l))else a.app_data[l]=a.parsers[l](m,a.app_data[l])a.app_data_block[l]=nil;k=k+1 end end end)if rc==false then print('Error processing raw items: '..err)error(err)end;return k end;return a",stdAudioMinLua="local a={}local b=0x06;local c=0x05;local d=frame.bluetooth.max_length()if d%2==1 then d=d-1 end;function a.start(e)local f=e and e.sample_rate or 8000;local g=e and e.bit_depth or 8;pcall(frame.microphone.start,{sample_rate=f,bit_depth=g})end;function a.stop()pcall(frame.microphone.stop)end;function a.read_and_send_audio()audio_data=frame.microphone.read(d)if audio_data==nil then while true do if pcall(frame.bluetooth.send,string.char(b))then break end end;return nil elseif audio_data~=''then while true do if pcall(frame.bluetooth.send,string.char(c)..audio_data)then break end end;return string.len(audio_data)end;return 0 end;return a",stdCameraMinLua=`local a={}local b=0x07;local c=0x08;local d=0x11;local e=0x12;local f={'VERY_LOW','LOW','MEDIUM','HIGH','VERY_HIGH'}local g={'SPOT','CENTER_WEIGHTED','AVERAGE'}local h={metering='CENTER_WEIGHTED',exposure=0.1,exposure_speed=0.45,shutter_limit=16383,analog_gain_limit=16.0,white_balance_speed=0.5,rgb_gain_limit=287}local i={shutter=4096,analog_gain=1,red_gain=121,green_gain=64,blue_gain=140}a.is_auto_exp=true;function update_if_present(j,k)for l,m in pairs(k)do if m~=nil then j[l]=m end end end;function a.set_auto_exp_settings(n)update_if_present(h,n)a.is_auto_exp=true end;function a.set_manual_exp_settings(n)a.is_auto_exp=false;update_if_present(i,n)frame.camera.set_shutter(i.shutter)frame.camera.set_gain(i.analog_gain)frame.camera.set_white_balance(i.red_gain,i.green_gain,i.blue_gain)end;function a.parse_auto_exp_settings(o)local j={}j.metering=g[string.byte(o,1)+1]j.exposure=string.byte(o,2)/255.0;j.exposure_speed=string.byte(o,3)/255.0;j.shutter_limit=string.byte(o,4)<<8|(string.byte(o,5)&0x3FFF)j.analog_gain_limit=string.byte(o,6)&0xFF;j.white_balance_speed=string.byte(o,7)/255.0;j.rgb_gain_limit=string.byte(o,8)<<8|(string.byte(o,9)&0x3FF)return j end;function a.parse_manual_exp_settings(o)local j={}j.shutter=string.byte(o,1)<<8|(string.byte(o,2)&0x3FFF)j.analog_gain=string.byte(o,3)&0xFF;j.red_gain=string.byte(o,4)<<8|(string.byte(o,5)&0x3FF)j.green_gain=string.byte(o,6)<<8|(string.byte(o,7)&0x3FF)j.blue_gain=string.byte(o,8)<<8|(string.byte(o,9)&0x3FF)return j end;function a.parse_capture_settings(o)local j={}j.quality=f[string.byte(o,1)+1]local p=string.byte(o,2)<<8|string.byte(o,3)j.resolution=p*2;local q=string.byte(o,4)<<8|string.byte(o,5)j.pan=q-140;j.raw=string.byte(o,6)>0;return j end;function send_data(o)local r=false;local s=frame.time.utc()+2;while frame.time.utc()<s do if pcall(frame.bluetooth.send,o)then r=true;break end end;if not r then error('Error sending photo data')end end;function a.run_auto_exposure()return frame.camera.auto(h)end;function a.send_autoexp_result(t)local o=string.pack("<Bffffffffffffffff",d,t['error'],t['shutter'],t['analog_gain'],t['red_gain'],t['green_gain'],t['blue_gain'],t['brightness']['center_weighted_average'],t['brightness']['scene'],t['brightness']['matrix']['r'],t['brightness']['matrix']['g'],t['brightness']['matrix']['b'],t['brightness']['matrix']['average'],t['brightness']['spot']['r'],t['brightness']['spot']['g'],t['brightness']['spot']['b'],t['brightness']['spot']['average'])send_data(o)end;function a.send_metering_data()send_data(string.char(e)..frame.fpga_read(0x25,6))end;function a.capture_and_send(n)frame.camera.capture{resolution=n.resolution,quality=n.quality,pan=n.pan}while not frame.camera.image_ready()do frame.sleep(0.005)end;local o=''local u=n.raw;while true do if u then o=frame.camera.read_raw(frame.bluetooth.max_length()-1)else o=frame.camera.read(frame.bluetooth.max_length()-1)end;if o~=nil then send_data(string.char(b)..o)else send_data(string.char(c))break end end end;return a`,stdCodeMinLua="local _M={}function _M.parse_code(a)local b={}b.value=string.byte(a,1)return b end;return _M",stdIMUMinLua='local _M={}local a=0x0A;function _M.send_imu_data(b)local c=b or a;local d=frame.imu.raw()local e=string.pack("<Bxhhhhhh",c,d.compass.x,d.compass.y,d.compass.z,d.accelerometer.x,d.accelerometer.y,d.accelerometer.z)pcall(frame.bluetooth.send,e)end;return _M',stdImageSpriteBlockMinLua="local a={}function a.parse_image_sprite_block(b,c)if string.byte(b,1)==0xFF then if c~=nil then for d,e in pairs(c.sprites)do c.sprites[d]=nil end;c=nil;collectgarbage('collect')end;local f={}f.width=string.byte(b,2)<<8|string.byte(b,3)f.height=string.byte(b,4)<<8|string.byte(b,5)f.sprite_line_height=string.byte(b,6)<<8|string.byte(b,7)f.progressive_render=string.byte(b,8)==1;f.updatable=string.byte(b,9)==1;f.sprites={}local g=f.height+f.sprite_line_height-1;f.total_sprites=g//f.sprite_line_height;f.active_sprites=0;f.current_sprite_index=0;return f else if c==nil then return nil end;c.current_sprite_index=c.current_sprite_index+1;if c.current_sprite_index>c.total_sprites then if c.updatable then c.current_sprite_index=1 else return c end end;if c.active_sprites<c.total_sprites then c.active_sprites=c.active_sprites+1 end;local h={}h.width=string.byte(b,1)<<8|string.byte(b,2)h.height=string.byte(b,3)<<8|string.byte(b,4)h.compressed=string.byte(b,5)>0;h.bpp=string.byte(b,6)h.num_colors=string.byte(b,7)h.palette_data=string.sub(b,8,8+h.num_colors*3-1)h.pixel_data=string.sub(b,8+h.num_colors*3)c.sprites[c.current_sprite_index]=h;return c end end;function a.set_palette(i,j)local k={'VOID','WHITE','GREY','RED','PINK','DARKBROWN','BROWN','ORANGE','YELLOW','DARKGREEN','GREEN','LIGHTGREEN','NIGHTBLUE','SEABLUE','SKYBLUE','CLOUDBLUE'}for l=1,i do local m=(l-1)*3;frame.display.assign_color(k[l],string.byte(j,m+1),string.byte(j,m+2),string.byte(j,m+3))end end;return a",stdPlainTextMinLua="local _M={}local a={'VOID','WHITE','GREY','RED','PINK','DARKBROWN','BROWN','ORANGE','YELLOW','DARKGREEN','GREEN','LIGHTGREEN','NIGHTBLUE','SEABLUE','SKYBLUE','CLOUDBLUE'}function _M.parse_plain_text(b)local c={}c.x=string.byte(b,1)<<8|string.byte(b,2)c.y=string.byte(b,3)<<8|string.byte(b,4)c.palette_offset=string.byte(b,5)c.color=a[c.palette_offset%16+1]c.spacing=string.byte(b,6)c.string=string.sub(b,7)return c end;return _M",stdSpriteMinLua="local a={}function a.parse_sprite(b)local c={}c.width=string.byte(b,1)<<8|string.byte(b,2)c.height=string.byte(b,3)<<8|string.byte(b,4)c.compressed=string.byte(b,5)>0;c.bpp=string.byte(b,6)c.num_colors=string.byte(b,7)c.palette_data=string.sub(b,8,8+c.num_colors*3-1)c.pixel_data=string.sub(b,8+c.num_colors*3)return c end;function a.set_palette(d,e)local f={'VOID','WHITE','GREY','RED','PINK','DARKBROWN','BROWN','ORANGE','YELLOW','DARKGREEN','GREEN','LIGHTGREEN','NIGHTBLUE','SEABLUE','SKYBLUE','CLOUDBLUE'}for g=1,d do local h=(g-1)*3;frame.display.assign_color(f[g],string.byte(e,h+1),string.byte(e,h+2),string.byte(e,h+3))end end;return a",stdSpriteCoordsMinLua="local a={}function a.parse_sprite_coords(b)local c={}c.code=string.byte(b,1)c.x=string.byte(b,2)<<8|string.byte(b,3)c.y=string.byte(b,4)<<8|string.byte(b,5)c.offset=string.byte(b,6)return c end;return a",stdTapMinLua="local a={}local b=0x09;function a.send_tap()rc,err=pcall(frame.bluetooth.send,string.char(b))if rc==false then print(err)end end;return a",stdTextSpriteBlockMinLua="local a={}function a.parse_text_sprite_block(b,c)if string.byte(b,1)==0xFF then local d={}d.width=string.byte(b,2)<<8|string.byte(b,3)d.max_display_rows=string.byte(b,4)d.lines=string.byte(b,5)local e={}for f=0,d.lines-1 do local g={}g.x=string.byte(b,5+4*f+1)<<8|string.byte(b,5+4*f+2)g.y=string.byte(b,5+4*f+3)<<8|string.byte(b,5+4*f+4)table.insert(e,g)end;d.offsets=e;d.sprites={}d.last_sprite_index=0;d.first_sprite_index=0;return d else if c==nil then return nil end;c.last_sprite_index=c.last_sprite_index+1;if c.first_sprite_index==0 then c.first_sprite_index=1 end;if c.last_sprite_index-c.first_sprite_index+1>c.max_display_rows then c.sprites[c.first_sprite_index]=nil;c.first_sprite_index=c.first_sprite_index+1 end;local h={}h.width=string.byte(b,1)<<8|string.byte(b,2)h.height=string.byte(b,3)<<8|string.byte(b,4)h.compressed=string.byte(b,5)>0;h.bpp=string.byte(b,6)h.num_colors=string.byte(b,7)h.palette_data=string.sub(b,8,8+h.num_colors*3-1)h.pixel_data=string.sub(b,8+h.num_colors*3)c.sprites[c.last_sprite_index]=h;return c end end;return a";var StdLua=(s=>(s.DataMin="stdDataMin",s.AudioMin="stdAudioMin",s.CameraMin="stdCameraMin",s.CodeMin="stdCodeMin",s.IMUMin="stdIMUMin",s.ImageSpriteBlockMin="stdImageSpriteBlockMin",s.PlainTextMin="stdPlainTextMin",s.SpriteMin="stdSpriteMin",s.SpriteCoordsMin="stdSpriteCoordsMin",s.TapMin="stdTapMin",s.TextSpriteBlockMin="stdTextSpriteBlockMin",s))(StdLua||{});const standardLuaLibrarySources={stdDataMin:{content:stdDataMinLua,targetFileName:"data.min.lua"},stdAudioMin:{content:stdAudioMinLua,targetFileName:"audio.min.lua"},stdCameraMin:{content:stdCameraMinLua,targetFileName:"camera.min.lua"},stdCodeMin:{content:stdCodeMinLua,targetFileName:"code.min.lua"},stdIMUMin:{content:stdIMUMinLua,targetFileName:"imu.min.lua"},stdImageSpriteBlockMin:{content:stdImageSpriteBlockMinLua,targetFileName:"image_sprite_block.min.lua"},stdPlainTextMin:{content:stdPlainTextMinLua,targetFileName:"plain_text.min.lua"},stdSpriteMin:{content:stdSpriteMinLua,targetFileName:"sprite.min.lua"},stdSpriteCoordsMin:{content:stdSpriteCoordsMinLua,targetFileName:"sprite_coords.min.lua"},stdTapMin:{content:stdTapMinLua,targetFileName:"tap.min.lua"},stdTextSpriteBlockMin:{content:stdTextSpriteBlockMinLua,targetFileName:"text_sprite_block.min.lua"}};class FrameMsg{constructor(){$e(this,"ble"),$e(this,"dataResponseHandlers"),this.ble=new R,this.dataResponseHandlers=new Map,this.ble.setDataResponseHandler(this._handleDataResponse.bind(this))}async connect(o=!0,h={}){try{const d={name:h.name,namePrefix:h.namePrefix},g=await this.ble.connect(d);return o&&(await this.ble.sendBreakSignal(),await this.ble.sendResetSignal(),await this.ble.sendBreakSignal()),g}catch(d){throw this.ble.isConnected()&&await this.ble.disconnect(),d}}async disconnect(){this.ble.isConnected()&&await this.ble.disconnect()}isConnected(){return this.ble.isConnected()}async printShortText(o=""){const h=o.replace(/'/g,"\\'").replace(/\n/g,"");return this.ble.sendLua(`frame.display.text('${h}',1,1);frame.display.show();print(0)`,{awaitPrint:!0})}async uploadStdLuaLibs(o){for(const h of o){const d=standardLuaLibrarySources[h];d?await this.ble.uploadFileFromString(d.content,d.targetFileName):console.warn(`Standard Lua library key "${h}" not found. Skipping.`)}}async uploadFrameApp(o,h="frame_app.lua"){await this.ble.uploadFile(o,h)}async startFrameApp(o="frame_app",h=!0){return this.ble.sendLua(`require('${o}')`,{awaitPrint:h})}async stopFrameApp(o=!0){await this.ble.sendBreakSignal(),o&&await this.ble.sendResetSignal()}attachPrintResponseHandler(o=console.log){this.ble.setPrintResponseHandler(o)}detachPrintResponseHandler(){this.ble.setPrintResponseHandler(void 0)}async sendMessage(o,h,d=!1){await this.ble.sendMessage(o,h,d)}registerDataResponseHandler(o,h,d){for(const g of h){this.dataResponseHandlers.has(g)||this.dataResponseHandlers.set(g,[]);const _=this.dataResponseHandlers.get(g);_.find(b=>b.subscriber===o&&b.handler===d)||_.push({subscriber:o,handler:d})}}unregisterDataResponseHandler(o){this.dataResponseHandlers.forEach((h,d)=>{const g=h.filter(_=>_.subscriber!==o);g.length===0?this.dataResponseHandlers.delete(d):this.dataResponseHandlers.set(d,g)})}_handleDataResponse(o){if(o&&o.byteLength>0){const h=o[0];this.dataResponseHandlers.has(h)&&this.dataResponseHandlers.get(h).forEach(d=>{try{d.handler(o)}catch(g){console.error("Error in FrameMsg data response handler for msgCode",h,":",g)}})}}async sendLua(o,h={}){return this.ble.sendLua(o,h)}async sendData(o,h={}){return this.ble.sendData(o,h)}async sendResetSignal(o=!1){return this.ble.sendResetSignal(o)}async sendBreakSignal(o=!1){return this.ble.sendBreakSignal(o)}getMaxPayload(o){return this.ble?this.ble.getMaxPayload(o):(console.warn("FrameBle instance not initialized or not connected for getMaxPayload."),60)}}class AsyncQueue{constructor(){$e(this,"promises"),$e(this,"resolvers"),this.promises=[],this.resolvers=[]}add(){this.promises.push(new Promise(o=>{this.resolvers.push(o)}))}put(o){this.resolvers.length||this.add();const h=this.resolvers.shift();h&&h(o)}async get(){return this.promises.length||this.add(),this.promises.shift()||new Promise(h=>{this.resolvers.push(h),this.promises.push(this.get())})}isEmpty(){return this.promises.length===0}size(){return this.promises.length}clear(){this.resolvers.forEach(o=>{}),this.promises=[],this.resolvers=[]}}class TxPlainText{constructor(o,h=1,d=1,g=1,_=4){this.text=o,this.x=h,this.y=d,this.paletteOffset=g,this.spacing=_}pack(){const o=new TextEncoder().encode(this.text),h=new Uint8Array(6),d=new DataView(h.buffer);d.setUint16(0,this.x,!1),d.setUint16(2,this.y,!1),d.setUint8(4,this.paletteOffset&15),d.setUint8(5,this.spacing&255);const g=new Uint8Array(h.length+o.length);return g.set(h),g.set(o,h.length),g}}class TxCaptureSettings{constructor(o=512,h=4,d=0,g=!1){$e(this,"resolution"),$e(this,"qualityIndex"),$e(this,"pan"),$e(this,"raw"),this.resolution=o,this.qualityIndex=h,this.pan=d,this.raw=g}pack(){const o=new ArrayBuffer(6),h=new DataView(o),d=this.resolution/2,g=this.pan+140;return h.setUint8(0,this.qualityIndex&255),h.setUint16(1,d&65535,!1),h.setUint16(3,g&65535,!1),h.setUint8(5,this.raw?1:0),new Uint8Array(o)}}const bitMethods={getBit(s){return this.data[getSlot(s)]&1<<getShift(s)?1:0},setBit(s){this.data[getSlot(s)]|=1<<getShift(s)},clearBit(s){this.data[getSlot(s)]&=~(1<<getShift(s))},toggleBit(s){this.data[getSlot(s)]^=1<<getShift(s)},getBitXY(s,o){return s>=this.width||o>=this.height?0:this.getBit(o*this.width+s)},setBitXY(s,o){this.setBit(o*this.width+s)},clearBitXY(s,o){this.clearBit(o*this.width+s)},toggleBitXY(s,o){this.toggleBit(o*this.width+s)}};function getSlot(s){return s>>3}function getShift(s){return 7-(s&7)}function setBitMethods(s){for(const o in bitMethods)s.prototype[o]=bitMethods[o]}function checkProcessable(s,o={}){let{bitDepth:h,alpha:d,colorModel:g,components:_,channels:b}=o;if(typeof s!="string"||s.length===0)throw new TypeError("processName must be a string");if(h&&(Array.isArray(h)||(h=[h]),!h.includes(this.bitDepth)))throw new TypeError(`The process: ${s} can only be applied if bit depth is in: ${h}`);if(d&&(Array.isArray(d)||(d=[d]),!d.includes(this.alpha)))throw new TypeError(`The process: ${s} can only be applied if alpha is in: ${d}`);if(g&&(Array.isArray(g)||(g=[g]),!g.includes(this.colorModel)))throw new TypeError(`The process: ${s} can only be applied if color model is in: ${g}`);if(_&&(Array.isArray(_)||(_=[_]),!_.includes(this.components))){let j=`The process: ${s} can only be applied if the number of components is in: ${_}`;throw _.length===1&&_[0]===1?new TypeError(`${j}.\rYou should transform your image using "image.grey()" before applying the algorithm.`):new TypeError(j)}if(b&&(Array.isArray(b)||(b=[b]),!b.includes(this.channels)))throw new TypeError(`The process: ${s} can only be applied if the number of channels is in: ${b}`)}function createBlob(s,o){s=s||[],o=o||{},typeof o=="string"&&(o={type:o});try{return new Blob(s,o)}catch(_){if(_.name!=="TypeError")throw _;for(var h=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,d=new h,g=0;g<s.length;g+=1)d.append(s[g]);return d.getBlob(o.type)}}function dataURLToBlob(s){var o=s.match(/data:([^;]+)/)[1],h=s.replace(/^[^,]+,/,""),d=binaryStringToArrayBuffer(atob(h));return createBlob([d],{type:o})}function canvasToBlob(s,o,h){return typeof s.toBlob=="function"?new Promise(function(d){s.toBlob(d,o,h)}):Promise.resolve(dataURLToBlob(s.toDataURL(o,h)))}function binaryStringToArrayBuffer(s){for(var o=s.length,h=new ArrayBuffer(o),d=new Uint8Array(h),g=-1;++g<o;)d[g]=s.charCodeAt(g);return h}function getDefaultExportFromCjs(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}function getAugmentedNamespace(s){if(Object.prototype.hasOwnProperty.call(s,"__esModule"))return s;var o=s.default;if(typeof o=="function"){var h=function d(){return this instanceof d?Reflect.construct(o,arguments,this.constructor):o.apply(this,arguments)};h.prototype=o.prototype}else h={};return Object.defineProperty(h,"__esModule",{value:!0}),Object.keys(s).forEach(function(d){var g=Object.getOwnPropertyDescriptor(s,d);Object.defineProperty(h,d,g.get?g:{enumerable:!0,get:function(){return s[d]}})}),h}var src$5={};function decode$2(s,o="utf8"){return new TextDecoder(o).decode(s)}const encoder$1=new TextEncoder;function encode$1(s){return encoder$1.encode(s)}const defaultByteLength=1024*8,hostBigEndian=(()=>{const s=new Uint8Array(4),o=new Uint32Array(s.buffer);return!((o[0]=1)&s[0])})(),typedArrays={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class IOBuffer{constructor(o=defaultByteLength,h={}){$e(this,"buffer"),$e(this,"byteLength"),$e(this,"byteOffset"),$e(this,"length"),$e(this,"offset"),$e(this,"lastWrittenByte"),$e(this,"littleEndian"),$e(this,"_data"),$e(this,"_mark"),$e(this,"_marks");let d=!1;typeof o=="number"?o=new ArrayBuffer(o):(d=!0,this.lastWrittenByte=o.byteLength);const g=h.offset?h.offset>>>0:0,_=o.byteLength-g;let b=g;(ArrayBuffer.isView(o)||o instanceof IOBuffer)&&(o.byteLength!==o.buffer.byteLength&&(b=o.byteOffset+g),o=o.buffer),d?this.lastWrittenByte=_:this.lastWrittenByte=0,this.buffer=o,this.length=_,this.byteLength=_,this.byteOffset=b,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,b,_),this._mark=0,this._marks=[]}available(o=1){return this.offset+o<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(o=1){return this.offset+=o,this}back(o=1){return this.offset-=o,this}seek(o){return this.offset=o,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const o=this._marks.pop();if(o===void 0)throw new Error("Mark stack empty");return this.seek(o),this}rewind(){return this.offset=0,this}ensureAvailable(o=1){if(!this.available(o)){const h=(this.offset+o)*2,d=new Uint8Array(h);d.set(new Uint8Array(this.buffer)),this.buffer=d.buffer,this.length=h,this.byteLength=h,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(o=1){return this.readArray(o,"uint8")}readArray(o,h){const d=typedArrays[h].BYTES_PER_ELEMENT*o,g=this.byteOffset+this.offset,_=this.buffer.slice(g,g+d);if(this.littleEndian===hostBigEndian&&h!=="uint8"&&h!=="int8"){const j=new Uint8Array(this.buffer.slice(g,g+d));j.reverse();const et=new typedArrays[h](j.buffer);return this.offset+=d,et.reverse(),et}const b=new typedArrays[h](_);return this.offset+=d,b}readInt16(){const o=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,o}readUint16(){const o=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,o}readInt32(){const o=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,o}readUint32(){const o=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,o}readFloat32(){const o=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,o}readFloat64(){const o=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,o}readBigInt64(){const o=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,o}readBigUint64(){const o=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,o}readChar(){return String.fromCharCode(this.readInt8())}readChars(o=1){let h="";for(let d=0;d<o;d++)h+=this.readChar();return h}readUtf8(o=1){return decode$2(this.readBytes(o))}decodeText(o=1,h="utf8"){return decode$2(this.readBytes(o),h)}writeBoolean(o){return this.writeUint8(o?255:0),this}writeInt8(o){return this.ensureAvailable(1),this._data.setInt8(this.offset++,o),this._updateLastWrittenByte(),this}writeUint8(o){return this.ensureAvailable(1),this._data.setUint8(this.offset++,o),this._updateLastWrittenByte(),this}writeByte(o){return this.writeUint8(o)}writeBytes(o){this.ensureAvailable(o.length);for(let h=0;h<o.length;h++)this._data.setUint8(this.offset++,o[h]);return this._updateLastWrittenByte(),this}writeInt16(o){return this.ensureAvailable(2),this._data.setInt16(this.offset,o,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(o){return this.ensureAvailable(2),this._data.setUint16(this.offset,o,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(o){return this.ensureAvailable(4),this._data.setInt32(this.offset,o,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(o){return this.ensureAvailable(4),this._data.setUint32(this.offset,o,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(o){return this.ensureAvailable(4),this._data.setFloat32(this.offset,o,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(o){return this.ensureAvailable(8),this._data.setFloat64(this.offset,o,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(o){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,o,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(o){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,o,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(o){return this.writeUint8(o.charCodeAt(0))}writeChars(o){for(let h=0;h<o.length;h++)this.writeUint8(o.charCodeAt(h));return this}writeUtf8(o){return this.writeBytes(encode$1(o))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}const IOBuffer$1=Object.freeze(Object.defineProperty({__proto__:null,IOBuffer},Symbol.toStringTag,{value:"Module"})),require$$0$3=getAugmentedNamespace(IOBuffer$1);var constants$1,hasRequiredConstants$1;function requireConstants$1(){return hasRequiredConstants$1||(hasRequiredConstants$1=1,constants$1={BITMAPV5HEADER:{LogicalColorSpace:{LCS_CALIBRATED_RGB:0,LCS_sRGB:1934772034,LCS_WINDOWS_COLOR_SPACE:1466527264},Compression:{BI_RGB:0,BI_RLE8:1,BI_RLE4:2,BI_BITFIELDS:3,BI_JPEG:4,BI_PNG:5,BI_CMYK:11,BI_CMYKRLE8:12,BI_CMYKRLE4:13},GamutMappingIntent:{LCS_GM_ABS_COLORIMETRIC:8,LCS_GM_BUSINESS:1,LCS_GM_GRAPHICS:2,LCS_GM_IMAGES:4}}}),constants$1}var BMPEncoder_1,hasRequiredBMPEncoder;function requireBMPEncoder(){if(hasRequiredBMPEncoder)return BMPEncoder_1;hasRequiredBMPEncoder=1;const{IOBuffer:s}=require$$0$3,o=requireConstants$1(),h=[];for(let g=0;g<=8;g++)h.push(255<<g);class d extends s{constructor(_){if(_.bitDepth!==1)throw new Error("Only bitDepth of 1 is supported");if(!_.height||!_.width)throw new Error("ImageData width and height are required");super(_.data),this.width=_.width,this.height=_.height,this.bitDepth=_.bitDepth,this.channels=_.channels,this.components=_.components}encode(){this.encoded=new s,this.encoded.skip(14),this.writeBitmapV5Header(),this.writeColorTable();const _=this.encoded.offset;return this.writePixelArray(),this.encoded.rewind(),this.writeBitmapFileHeader(_),this.encoded.toArray()}writePixelArray(){let _=this.encoded;const b=Math.floor((this.bitDepth*this.width+31)/32)*4,j=Math.ceil(this.bitDepth*this.width/8),et=b-j,tt=this.bitDepth*this.width%8,rt=tt===0?0:8-tt,at=b*this.height;let st,At,ht=0,ct=0,_t=8;_.mark(),At=this.readUint8();for(let gt=this.height-1;gt>=0;gt--){const wt=gt===0;_.reset(),_.skip(gt*b);for(let ft=0;ft<j;ft++){const dt=ft===j-1;ct<=rt&&dt?(_.writeByte(At<<ct),(rt===0||rt===ct)&&!wt&&(st=At,At=this.readByte())):ct===0?(st=At,At=this.readUint8(),_.writeByte(st)):(st=At,At=this.readUint8(),_.writeByte(st<<ct&h[ct]|At>>_t)),dt&&(ht+=tt||0,_.skip(et),ct=ht%8,_t=8-ct)}}b>j&&(_.reset(),_.skip(at-1),_.writeUint8(0))}writeColorTable(){this.encoded.writeUint32(0).writeUint32(16777215)}writeBitmapFileHeader(_){this.encoded.writeChars("BM").writeInt32(this.encoded.lastWrittenByte).writeUint16(0).writeUint16(0).writeUint32(_)}writeBitmapV5Header(){const _=Math.floor((this.bitDepth*this.width+31)/32)*4*this.height;this.encoded.writeUint32(124).writeInt32(this.width).writeInt32(this.height).writeUint16(1).writeUint16(this.bitDepth).writeUint32(o.BITMAPV5HEADER.Compression.BI_RGB).writeUint32(_).writeInt32(0).writeInt32(0).writeUint32(Math.pow(2,this.bitDepth)).writeUint32(Math.pow(2,this.bitDepth)).writeUint32(4278190080).writeUint32(16711680).writeUint32(65280).writeUint32(255).writeUint32(o.BITMAPV5HEADER.LogicalColorSpace.LCS_sRGB).skip(36).skip(12).writeUint32(o.BITMAPV5HEADER.GamutMappingIntent.LCS_GM_IMAGES).skip(12)}}return BMPEncoder_1=d,BMPEncoder_1}var hasRequiredSrc$5;function requireSrc$5(){if(hasRequiredSrc$5)return src$5;hasRequiredSrc$5=1;const s=requireBMPEncoder();return src$5.encode=function(o){return new s(o).encode()},src$5}var srcExports$3=requireSrc$5();/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const Z_FIXED$1=4,Z_BINARY=0,Z_TEXT=1,Z_UNKNOWN$1=2;function zero$1$1(s){let o=s.length;for(;--o>=0;)s[o]=0}const STORED_BLOCK=0,STATIC_TREES=1,DYN_TREES=2,MIN_MATCH$1$1=3,MAX_MATCH$1$1=258,LENGTH_CODES$1$1=29,LITERALS$1$1=256,L_CODES$1$1=LITERALS$1$1+1+LENGTH_CODES$1$1,D_CODES$1$1=30,BL_CODES$1=19,HEAP_SIZE$1=2*L_CODES$1$1+1,MAX_BITS$1=15,Buf_size=16,MAX_BL_BITS=7,END_BLOCK=256,REP_3_6=16,REPZ_3_10=17,REPZ_11_138=18,extra_lbits=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),extra_dbits=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),extra_blbits=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),bl_order=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),DIST_CODE_LEN$1=512,static_ltree$1=new Array((L_CODES$1$1+2)*2);zero$1$1(static_ltree$1);const static_dtree$1=new Array(D_CODES$1$1*2);zero$1$1(static_dtree$1);const _dist_code$1=new Array(DIST_CODE_LEN$1);zero$1$1(_dist_code$1);const _length_code$1=new Array(MAX_MATCH$1$1-MIN_MATCH$1$1+1);zero$1$1(_length_code$1);const base_length$1=new Array(LENGTH_CODES$1$1);zero$1$1(base_length$1);const base_dist$1=new Array(D_CODES$1$1);zero$1$1(base_dist$1);function StaticTreeDesc(s,o,h,d,g){this.static_tree=s,this.extra_bits=o,this.extra_base=h,this.elems=d,this.max_length=g,this.has_stree=s&&s.length}let static_l_desc,static_d_desc,static_bl_desc;function TreeDesc(s,o){this.dyn_tree=s,this.max_code=0,this.stat_desc=o}const d_code=s=>s<256?_dist_code$1[s]:_dist_code$1[256+(s>>>7)],put_short=(s,o)=>{s.pending_buf[s.pending++]=o&255,s.pending_buf[s.pending++]=o>>>8&255},send_bits=(s,o,h)=>{s.bi_valid>Buf_size-h?(s.bi_buf|=o<<s.bi_valid&65535,put_short(s,s.bi_buf),s.bi_buf=o>>Buf_size-s.bi_valid,s.bi_valid+=h-Buf_size):(s.bi_buf|=o<<s.bi_valid&65535,s.bi_valid+=h)},send_code=(s,o,h)=>{send_bits(s,h[o*2],h[o*2+1])},bi_reverse=(s,o)=>{let h=0;do h|=s&1,s>>>=1,h<<=1;while(--o>0);return h>>>1},bi_flush=s=>{s.bi_valid===16?(put_short(s,s.bi_buf),s.bi_buf=0,s.bi_valid=0):s.bi_valid>=8&&(s.pending_buf[s.pending++]=s.bi_buf&255,s.bi_buf>>=8,s.bi_valid-=8)},gen_bitlen=(s,o)=>{const h=o.dyn_tree,d=o.max_code,g=o.stat_desc.static_tree,_=o.stat_desc.has_stree,b=o.stat_desc.extra_bits,j=o.stat_desc.extra_base,et=o.stat_desc.max_length;let tt,rt,at,st,At,ht,ct=0;for(st=0;st<=MAX_BITS$1;st++)s.bl_count[st]=0;for(h[s.heap[s.heap_max]*2+1]=0,tt=s.heap_max+1;tt<HEAP_SIZE$1;tt++)rt=s.heap[tt],st=h[h[rt*2+1]*2+1]+1,st>et&&(st=et,ct++),h[rt*2+1]=st,!(rt>d)&&(s.bl_count[st]++,At=0,rt>=j&&(At=b[rt-j]),ht=h[rt*2],s.opt_len+=ht*(st+At),_&&(s.static_len+=ht*(g[rt*2+1]+At)));if(ct!==0){do{for(st=et-1;s.bl_count[st]===0;)st--;s.bl_count[st]--,s.bl_count[st+1]+=2,s.bl_count[et]--,ct-=2}while(ct>0);for(st=et;st!==0;st--)for(rt=s.bl_count[st];rt!==0;)at=s.heap[--tt],!(at>d)&&(h[at*2+1]!==st&&(s.opt_len+=(st-h[at*2+1])*h[at*2],h[at*2+1]=st),rt--)}},gen_codes=(s,o,h)=>{const d=new Array(MAX_BITS$1+1);let g=0,_,b;for(_=1;_<=MAX_BITS$1;_++)g=g+h[_-1]<<1,d[_]=g;for(b=0;b<=o;b++){let j=s[b*2+1];j!==0&&(s[b*2]=bi_reverse(d[j]++,j))}},tr_static_init=()=>{let s,o,h,d,g;const _=new Array(MAX_BITS$1+1);for(h=0,d=0;d<LENGTH_CODES$1$1-1;d++)for(base_length$1[d]=h,s=0;s<1<<extra_lbits[d];s++)_length_code$1[h++]=d;for(_length_code$1[h-1]=d,g=0,d=0;d<16;d++)for(base_dist$1[d]=g,s=0;s<1<<extra_dbits[d];s++)_dist_code$1[g++]=d;for(g>>=7;d<D_CODES$1$1;d++)for(base_dist$1[d]=g<<7,s=0;s<1<<extra_dbits[d]-7;s++)_dist_code$1[256+g++]=d;for(o=0;o<=MAX_BITS$1;o++)_[o]=0;for(s=0;s<=143;)static_ltree$1[s*2+1]=8,s++,_[8]++;for(;s<=255;)static_ltree$1[s*2+1]=9,s++,_[9]++;for(;s<=279;)static_ltree$1[s*2+1]=7,s++,_[7]++;for(;s<=287;)static_ltree$1[s*2+1]=8,s++,_[8]++;for(gen_codes(static_ltree$1,L_CODES$1$1+1,_),s=0;s<D_CODES$1$1;s++)static_dtree$1[s*2+1]=5,static_dtree$1[s*2]=bi_reverse(s,5);static_l_desc=new StaticTreeDesc(static_ltree$1,extra_lbits,LITERALS$1$1+1,L_CODES$1$1,MAX_BITS$1),static_d_desc=new StaticTreeDesc(static_dtree$1,extra_dbits,0,D_CODES$1$1,MAX_BITS$1),static_bl_desc=new StaticTreeDesc(new Array(0),extra_blbits,0,BL_CODES$1,MAX_BL_BITS)},init_block=s=>{let o;for(o=0;o<L_CODES$1$1;o++)s.dyn_ltree[o*2]=0;for(o=0;o<D_CODES$1$1;o++)s.dyn_dtree[o*2]=0;for(o=0;o<BL_CODES$1;o++)s.bl_tree[o*2]=0;s.dyn_ltree[END_BLOCK*2]=1,s.opt_len=s.static_len=0,s.sym_next=s.matches=0},bi_windup=s=>{s.bi_valid>8?put_short(s,s.bi_buf):s.bi_valid>0&&(s.pending_buf[s.pending++]=s.bi_buf),s.bi_buf=0,s.bi_valid=0},smaller=(s,o,h,d)=>{const g=o*2,_=h*2;return s[g]<s[_]||s[g]===s[_]&&d[o]<=d[h]},pqdownheap=(s,o,h)=>{const d=s.heap[h];let g=h<<1;for(;g<=s.heap_len&&(g<s.heap_len&&smaller(o,s.heap[g+1],s.heap[g],s.depth)&&g++,!smaller(o,d,s.heap[g],s.depth));)s.heap[h]=s.heap[g],h=g,g<<=1;s.heap[h]=d},compress_block=(s,o,h)=>{let d,g,_=0,b,j;if(s.sym_next!==0)do d=s.pending_buf[s.sym_buf+_++]&255,d+=(s.pending_buf[s.sym_buf+_++]&255)<<8,g=s.pending_buf[s.sym_buf+_++],d===0?send_code(s,g,o):(b=_length_code$1[g],send_code(s,b+LITERALS$1$1+1,o),j=extra_lbits[b],j!==0&&(g-=base_length$1[b],send_bits(s,g,j)),d--,b=d_code(d),send_code(s,b,h),j=extra_dbits[b],j!==0&&(d-=base_dist$1[b],send_bits(s,d,j)));while(_<s.sym_next);send_code(s,END_BLOCK,o)},build_tree=(s,o)=>{const h=o.dyn_tree,d=o.stat_desc.static_tree,g=o.stat_desc.has_stree,_=o.stat_desc.elems;let b,j,et=-1,tt;for(s.heap_len=0,s.heap_max=HEAP_SIZE$1,b=0;b<_;b++)h[b*2]!==0?(s.heap[++s.heap_len]=et=b,s.depth[b]=0):h[b*2+1]=0;for(;s.heap_len<2;)tt=s.heap[++s.heap_len]=et<2?++et:0,h[tt*2]=1,s.depth[tt]=0,s.opt_len--,g&&(s.static_len-=d[tt*2+1]);for(o.max_code=et,b=s.heap_len>>1;b>=1;b--)pqdownheap(s,h,b);tt=_;do b=s.heap[1],s.heap[1]=s.heap[s.heap_len--],pqdownheap(s,h,1),j=s.heap[1],s.heap[--s.heap_max]=b,s.heap[--s.heap_max]=j,h[tt*2]=h[b*2]+h[j*2],s.depth[tt]=(s.depth[b]>=s.depth[j]?s.depth[b]:s.depth[j])+1,h[b*2+1]=h[j*2+1]=tt,s.heap[1]=tt++,pqdownheap(s,h,1);while(s.heap_len>=2);s.heap[--s.heap_max]=s.heap[1],gen_bitlen(s,o),gen_codes(h,et,s.bl_count)},scan_tree=(s,o,h)=>{let d,g=-1,_,b=o[0*2+1],j=0,et=7,tt=4;for(b===0&&(et=138,tt=3),o[(h+1)*2+1]=65535,d=0;d<=h;d++)_=b,b=o[(d+1)*2+1],!(++j<et&&_===b)&&(j<tt?s.bl_tree[_*2]+=j:_!==0?(_!==g&&s.bl_tree[_*2]++,s.bl_tree[REP_3_6*2]++):j<=10?s.bl_tree[REPZ_3_10*2]++:s.bl_tree[REPZ_11_138*2]++,j=0,g=_,b===0?(et=138,tt=3):_===b?(et=6,tt=3):(et=7,tt=4))},send_tree=(s,o,h)=>{let d,g=-1,_,b=o[0*2+1],j=0,et=7,tt=4;for(b===0&&(et=138,tt=3),d=0;d<=h;d++)if(_=b,b=o[(d+1)*2+1],!(++j<et&&_===b)){if(j<tt)do send_code(s,_,s.bl_tree);while(--j!==0);else _!==0?(_!==g&&(send_code(s,_,s.bl_tree),j--),send_code(s,REP_3_6,s.bl_tree),send_bits(s,j-3,2)):j<=10?(send_code(s,REPZ_3_10,s.bl_tree),send_bits(s,j-3,3)):(send_code(s,REPZ_11_138,s.bl_tree),send_bits(s,j-11,7));j=0,g=_,b===0?(et=138,tt=3):_===b?(et=6,tt=3):(et=7,tt=4)}},build_bl_tree=s=>{let o;for(scan_tree(s,s.dyn_ltree,s.l_desc.max_code),scan_tree(s,s.dyn_dtree,s.d_desc.max_code),build_tree(s,s.bl_desc),o=BL_CODES$1-1;o>=3&&s.bl_tree[bl_order[o]*2+1]===0;o--);return s.opt_len+=3*(o+1)+5+5+4,o},send_all_trees=(s,o,h,d)=>{let g;for(send_bits(s,o-257,5),send_bits(s,h-1,5),send_bits(s,d-4,4),g=0;g<d;g++)send_bits(s,s.bl_tree[bl_order[g]*2+1],3);send_tree(s,s.dyn_ltree,o-1),send_tree(s,s.dyn_dtree,h-1)},detect_data_type=s=>{let o=4093624447,h;for(h=0;h<=31;h++,o>>>=1)if(o&1&&s.dyn_ltree[h*2]!==0)return Z_BINARY;if(s.dyn_ltree[9*2]!==0||s.dyn_ltree[10*2]!==0||s.dyn_ltree[13*2]!==0)return Z_TEXT;for(h=32;h<LITERALS$1$1;h++)if(s.dyn_ltree[h*2]!==0)return Z_TEXT;return Z_BINARY};let static_init_done=!1;const _tr_init$1=s=>{static_init_done||(tr_static_init(),static_init_done=!0),s.l_desc=new TreeDesc(s.dyn_ltree,static_l_desc),s.d_desc=new TreeDesc(s.dyn_dtree,static_d_desc),s.bl_desc=new TreeDesc(s.bl_tree,static_bl_desc),s.bi_buf=0,s.bi_valid=0,init_block(s)},_tr_stored_block$1=(s,o,h,d)=>{send_bits(s,(STORED_BLOCK<<1)+(d?1:0),3),bi_windup(s),put_short(s,h),put_short(s,~h),h&&s.pending_buf.set(s.window.subarray(o,o+h),s.pending),s.pending+=h},_tr_align$1=s=>{send_bits(s,STATIC_TREES<<1,3),send_code(s,END_BLOCK,static_ltree$1),bi_flush(s)},_tr_flush_block$1=(s,o,h,d)=>{let g,_,b=0;s.level>0?(s.strm.data_type===Z_UNKNOWN$1&&(s.strm.data_type=detect_data_type(s)),build_tree(s,s.l_desc),build_tree(s,s.d_desc),b=build_bl_tree(s),g=s.opt_len+3+7>>>3,_=s.static_len+3+7>>>3,_<=g&&(g=_)):g=_=h+5,h+4<=g&&o!==-1?_tr_stored_block$1(s,o,h,d):s.strategy===Z_FIXED$1||_===g?(send_bits(s,(STATIC_TREES<<1)+(d?1:0),3),compress_block(s,static_ltree$1,static_dtree$1)):(send_bits(s,(DYN_TREES<<1)+(d?1:0),3),send_all_trees(s,s.l_desc.max_code+1,s.d_desc.max_code+1,b+1),compress_block(s,s.dyn_ltree,s.dyn_dtree)),init_block(s),d&&bi_windup(s)},_tr_tally$1=(s,o,h)=>(s.pending_buf[s.sym_buf+s.sym_next++]=o,s.pending_buf[s.sym_buf+s.sym_next++]=o>>8,s.pending_buf[s.sym_buf+s.sym_next++]=h,o===0?s.dyn_ltree[h*2]++:(s.matches++,o--,s.dyn_ltree[(_length_code$1[h]+LITERALS$1$1+1)*2]++,s.dyn_dtree[d_code(o)*2]++),s.sym_next===s.sym_end);var _tr_init_1=_tr_init$1,_tr_stored_block_1=_tr_stored_block$1,_tr_flush_block_1=_tr_flush_block$1,_tr_tally_1=_tr_tally$1,_tr_align_1=_tr_align$1,trees$1={_tr_init:_tr_init_1,_tr_stored_block:_tr_stored_block_1,_tr_flush_block:_tr_flush_block_1,_tr_tally:_tr_tally_1,_tr_align:_tr_align_1};const adler32$1=(s,o,h,d)=>{let g=s&65535|0,_=s>>>16&65535|0,b=0;for(;h!==0;){b=h>2e3?2e3:h,h-=b;do g=g+o[d++]|0,_=_+g|0;while(--b);g%=65521,_%=65521}return g|_<<16|0};var adler32_1$2=adler32$1;const makeTable$1=()=>{let s,o=[];for(var h=0;h<256;h++){s=h;for(var d=0;d<8;d++)s=s&1?3988292384^s>>>1:s>>>1;o[h]=s}return o},crcTable$2=new Uint32Array(makeTable$1()),crc32$1=(s,o,h,d)=>{const g=crcTable$2,_=d+h;s^=-1;for(let b=d;b<_;b++)s=s>>>8^g[(s^o[b])&255];return s^-1};var crc32_1$2=crc32$1,messages$2={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},constants$2$1={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init,_tr_stored_block,_tr_flush_block,_tr_tally,_tr_align}=trees$1,{Z_NO_FLUSH:Z_NO_FLUSH$2,Z_PARTIAL_FLUSH,Z_FULL_FLUSH:Z_FULL_FLUSH$1,Z_FINISH:Z_FINISH$3,Z_BLOCK:Z_BLOCK$1,Z_OK:Z_OK$3,Z_STREAM_END:Z_STREAM_END$3,Z_STREAM_ERROR:Z_STREAM_ERROR$2,Z_DATA_ERROR:Z_DATA_ERROR$2,Z_BUF_ERROR:Z_BUF_ERROR$1,Z_DEFAULT_COMPRESSION:Z_DEFAULT_COMPRESSION$1,Z_FILTERED,Z_HUFFMAN_ONLY,Z_RLE,Z_FIXED,Z_DEFAULT_STRATEGY:Z_DEFAULT_STRATEGY$1,Z_UNKNOWN,Z_DEFLATED:Z_DEFLATED$2}=constants$2$1,MAX_MEM_LEVEL=9,MAX_WBITS$1=15,DEF_MEM_LEVEL=8,LENGTH_CODES=29,LITERALS=256,L_CODES=LITERALS+1+LENGTH_CODES,D_CODES=30,BL_CODES=19,HEAP_SIZE=2*L_CODES+1,MAX_BITS=15,MIN_MATCH=3,MAX_MATCH=258,MIN_LOOKAHEAD=MAX_MATCH+MIN_MATCH+1,PRESET_DICT=32,INIT_STATE=42,GZIP_STATE=57,EXTRA_STATE=69,NAME_STATE=73,COMMENT_STATE=91,HCRC_STATE=103,BUSY_STATE=113,FINISH_STATE=666,BS_NEED_MORE=1,BS_BLOCK_DONE=2,BS_FINISH_STARTED=3,BS_FINISH_DONE=4,OS_CODE=3,err=(s,o)=>(s.msg=messages$2[o],o),rank=s=>s*2-(s>4?9:0),zero=s=>{let o=s.length;for(;--o>=0;)s[o]=0},slide_hash=s=>{let o,h,d,g=s.w_size;o=s.hash_size,d=o;do h=s.head[--d],s.head[d]=h>=g?h-g:0;while(--o);o=g,d=o;do h=s.prev[--d],s.prev[d]=h>=g?h-g:0;while(--o)};let HASH_ZLIB=(s,o,h)=>(o<<s.hash_shift^h)&s.hash_mask,HASH=HASH_ZLIB;const flush_pending=s=>{const o=s.state;let h=o.pending;h>s.avail_out&&(h=s.avail_out),h!==0&&(s.output.set(o.pending_buf.subarray(o.pending_out,o.pending_out+h),s.next_out),s.next_out+=h,o.pending_out+=h,s.total_out+=h,s.avail_out-=h,o.pending-=h,o.pending===0&&(o.pending_out=0))},flush_block_only=(s,o)=>{_tr_flush_block(s,s.block_start>=0?s.block_start:-1,s.strstart-s.block_start,o),s.block_start=s.strstart,flush_pending(s.strm)},put_byte=(s,o)=>{s.pending_buf[s.pending++]=o},putShortMSB=(s,o)=>{s.pending_buf[s.pending++]=o>>>8&255,s.pending_buf[s.pending++]=o&255},read_buf=(s,o,h,d)=>{let g=s.avail_in;return g>d&&(g=d),g===0?0:(s.avail_in-=g,o.set(s.input.subarray(s.next_in,s.next_in+g),h),s.state.wrap===1?s.adler=adler32_1$2(s.adler,o,g,h):s.state.wrap===2&&(s.adler=crc32_1$2(s.adler,o,g,h)),s.next_in+=g,s.total_in+=g,g)},longest_match=(s,o)=>{let h=s.max_chain_length,d=s.strstart,g,_,b=s.prev_length,j=s.nice_match;const et=s.strstart>s.w_size-MIN_LOOKAHEAD?s.strstart-(s.w_size-MIN_LOOKAHEAD):0,tt=s.window,rt=s.w_mask,at=s.prev,st=s.strstart+MAX_MATCH;let At=tt[d+b-1],ht=tt[d+b];s.prev_length>=s.good_match&&(h>>=2),j>s.lookahead&&(j=s.lookahead);do if(g=o,!(tt[g+b]!==ht||tt[g+b-1]!==At||tt[g]!==tt[d]||tt[++g]!==tt[d+1])){d+=2,g++;do;while(tt[++d]===tt[++g]&&tt[++d]===tt[++g]&&tt[++d]===tt[++g]&&tt[++d]===tt[++g]&&tt[++d]===tt[++g]&&tt[++d]===tt[++g]&&tt[++d]===tt[++g]&&tt[++d]===tt[++g]&&d<st);if(_=MAX_MATCH-(st-d),d=st-MAX_MATCH,_>b){if(s.match_start=o,b=_,_>=j)break;At=tt[d+b-1],ht=tt[d+b]}}while((o=at[o&rt])>et&&--h!==0);return b<=s.lookahead?b:s.lookahead},fill_window=s=>{const o=s.w_size;let h,d,g;do{if(d=s.window_size-s.lookahead-s.strstart,s.strstart>=o+(o-MIN_LOOKAHEAD)&&(s.window.set(s.window.subarray(o,o+o-d),0),s.match_start-=o,s.strstart-=o,s.block_start-=o,s.insert>s.strstart&&(s.insert=s.strstart),slide_hash(s),d+=o),s.strm.avail_in===0)break;if(h=read_buf(s.strm,s.window,s.strstart+s.lookahead,d),s.lookahead+=h,s.lookahead+s.insert>=MIN_MATCH)for(g=s.strstart-s.insert,s.ins_h=s.window[g],s.ins_h=HASH(s,s.ins_h,s.window[g+1]);s.insert&&(s.ins_h=HASH(s,s.ins_h,s.window[g+MIN_MATCH-1]),s.prev[g&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=g,g++,s.insert--,!(s.lookahead+s.insert<MIN_MATCH)););}while(s.lookahead<MIN_LOOKAHEAD&&s.strm.avail_in!==0)},deflate_stored=(s,o)=>{let h=s.pending_buf_size-5>s.w_size?s.w_size:s.pending_buf_size-5,d,g,_,b=0,j=s.strm.avail_in;do{if(d=65535,_=s.bi_valid+42>>3,s.strm.avail_out<_||(_=s.strm.avail_out-_,g=s.strstart-s.block_start,d>g+s.strm.avail_in&&(d=g+s.strm.avail_in),d>_&&(d=_),d<h&&(d===0&&o!==Z_FINISH$3||o===Z_NO_FLUSH$2||d!==g+s.strm.avail_in)))break;b=o===Z_FINISH$3&&d===g+s.strm.avail_in?1:0,_tr_stored_block(s,0,0,b),s.pending_buf[s.pending-4]=d,s.pending_buf[s.pending-3]=d>>8,s.pending_buf[s.pending-2]=~d,s.pending_buf[s.pending-1]=~d>>8,flush_pending(s.strm),g&&(g>d&&(g=d),s.strm.output.set(s.window.subarray(s.block_start,s.block_start+g),s.strm.next_out),s.strm.next_out+=g,s.strm.avail_out-=g,s.strm.total_out+=g,s.block_start+=g,d-=g),d&&(read_buf(s.strm,s.strm.output,s.strm.next_out,d),s.strm.next_out+=d,s.strm.avail_out-=d,s.strm.total_out+=d)}while(b===0);return j-=s.strm.avail_in,j&&(j>=s.w_size?(s.matches=2,s.window.set(s.strm.input.subarray(s.strm.next_in-s.w_size,s.strm.next_in),0),s.strstart=s.w_size,s.insert=s.strstart):(s.window_size-s.strstart<=j&&(s.strstart-=s.w_size,s.window.set(s.window.subarray(s.w_size,s.w_size+s.strstart),0),s.matches<2&&s.matches++,s.insert>s.strstart&&(s.insert=s.strstart)),s.window.set(s.strm.input.subarray(s.strm.next_in-j,s.strm.next_in),s.strstart),s.strstart+=j,s.insert+=j>s.w_size-s.insert?s.w_size-s.insert:j),s.block_start=s.strstart),s.high_water<s.strstart&&(s.high_water=s.strstart),b?BS_FINISH_DONE:o!==Z_NO_FLUSH$2&&o!==Z_FINISH$3&&s.strm.avail_in===0&&s.strstart===s.block_start?BS_BLOCK_DONE:(_=s.window_size-s.strstart,s.strm.avail_in>_&&s.block_start>=s.w_size&&(s.block_start-=s.w_size,s.strstart-=s.w_size,s.window.set(s.window.subarray(s.w_size,s.w_size+s.strstart),0),s.matches<2&&s.matches++,_+=s.w_size,s.insert>s.strstart&&(s.insert=s.strstart)),_>s.strm.avail_in&&(_=s.strm.avail_in),_&&(read_buf(s.strm,s.window,s.strstart,_),s.strstart+=_,s.insert+=_>s.w_size-s.insert?s.w_size-s.insert:_),s.high_water<s.strstart&&(s.high_water=s.strstart),_=s.bi_valid+42>>3,_=s.pending_buf_size-_>65535?65535:s.pending_buf_size-_,h=_>s.w_size?s.w_size:_,g=s.strstart-s.block_start,(g>=h||(g||o===Z_FINISH$3)&&o!==Z_NO_FLUSH$2&&s.strm.avail_in===0&&g<=_)&&(d=g>_?_:g,b=o===Z_FINISH$3&&s.strm.avail_in===0&&d===g?1:0,_tr_stored_block(s,s.block_start,d,b),s.block_start+=d,flush_pending(s.strm)),b?BS_FINISH_STARTED:BS_NEED_MORE)},deflate_fast=(s,o)=>{let h,d;for(;;){if(s.lookahead<MIN_LOOKAHEAD){if(fill_window(s),s.lookahead<MIN_LOOKAHEAD&&o===Z_NO_FLUSH$2)return BS_NEED_MORE;if(s.lookahead===0)break}if(h=0,s.lookahead>=MIN_MATCH&&(s.ins_h=HASH(s,s.ins_h,s.window[s.strstart+MIN_MATCH-1]),h=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=s.strstart),h!==0&&s.strstart-h<=s.w_size-MIN_LOOKAHEAD&&(s.match_length=longest_match(s,h)),s.match_length>=MIN_MATCH)if(d=_tr_tally(s,s.strstart-s.match_start,s.match_length-MIN_MATCH),s.lookahead-=s.match_length,s.match_length<=s.max_lazy_match&&s.lookahead>=MIN_MATCH){s.match_length--;do s.strstart++,s.ins_h=HASH(s,s.ins_h,s.window[s.strstart+MIN_MATCH-1]),h=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=s.strstart;while(--s.match_length!==0);s.strstart++}else s.strstart+=s.match_length,s.match_length=0,s.ins_h=s.window[s.strstart],s.ins_h=HASH(s,s.ins_h,s.window[s.strstart+1]);else d=_tr_tally(s,0,s.window[s.strstart]),s.lookahead--,s.strstart++;if(d&&(flush_block_only(s,!1),s.strm.avail_out===0))return BS_NEED_MORE}return s.insert=s.strstart<MIN_MATCH-1?s.strstart:MIN_MATCH-1,o===Z_FINISH$3?(flush_block_only(s,!0),s.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):s.sym_next&&(flush_block_only(s,!1),s.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_slow=(s,o)=>{let h,d,g;for(;;){if(s.lookahead<MIN_LOOKAHEAD){if(fill_window(s),s.lookahead<MIN_LOOKAHEAD&&o===Z_NO_FLUSH$2)return BS_NEED_MORE;if(s.lookahead===0)break}if(h=0,s.lookahead>=MIN_MATCH&&(s.ins_h=HASH(s,s.ins_h,s.window[s.strstart+MIN_MATCH-1]),h=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=s.strstart),s.prev_length=s.match_length,s.prev_match=s.match_start,s.match_length=MIN_MATCH-1,h!==0&&s.prev_length<s.max_lazy_match&&s.strstart-h<=s.w_size-MIN_LOOKAHEAD&&(s.match_length=longest_match(s,h),s.match_length<=5&&(s.strategy===Z_FILTERED||s.match_length===MIN_MATCH&&s.strstart-s.match_start>4096)&&(s.match_length=MIN_MATCH-1)),s.prev_length>=MIN_MATCH&&s.match_length<=s.prev_length){g=s.strstart+s.lookahead-MIN_MATCH,d=_tr_tally(s,s.strstart-1-s.prev_match,s.prev_length-MIN_MATCH),s.lookahead-=s.prev_length-1,s.prev_length-=2;do++s.strstart<=g&&(s.ins_h=HASH(s,s.ins_h,s.window[s.strstart+MIN_MATCH-1]),h=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=s.strstart);while(--s.prev_length!==0);if(s.match_available=0,s.match_length=MIN_MATCH-1,s.strstart++,d&&(flush_block_only(s,!1),s.strm.avail_out===0))return BS_NEED_MORE}else if(s.match_available){if(d=_tr_tally(s,0,s.window[s.strstart-1]),d&&flush_block_only(s,!1),s.strstart++,s.lookahead--,s.strm.avail_out===0)return BS_NEED_MORE}else s.match_available=1,s.strstart++,s.lookahead--}return s.match_available&&(d=_tr_tally(s,0,s.window[s.strstart-1]),s.match_available=0),s.insert=s.strstart<MIN_MATCH-1?s.strstart:MIN_MATCH-1,o===Z_FINISH$3?(flush_block_only(s,!0),s.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):s.sym_next&&(flush_block_only(s,!1),s.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_rle=(s,o)=>{let h,d,g,_;const b=s.window;for(;;){if(s.lookahead<=MAX_MATCH){if(fill_window(s),s.lookahead<=MAX_MATCH&&o===Z_NO_FLUSH$2)return BS_NEED_MORE;if(s.lookahead===0)break}if(s.match_length=0,s.lookahead>=MIN_MATCH&&s.strstart>0&&(g=s.strstart-1,d=b[g],d===b[++g]&&d===b[++g]&&d===b[++g])){_=s.strstart+MAX_MATCH;do;while(d===b[++g]&&d===b[++g]&&d===b[++g]&&d===b[++g]&&d===b[++g]&&d===b[++g]&&d===b[++g]&&d===b[++g]&&g<_);s.match_length=MAX_MATCH-(_-g),s.match_length>s.lookahead&&(s.match_length=s.lookahead)}if(s.match_length>=MIN_MATCH?(h=_tr_tally(s,1,s.match_length-MIN_MATCH),s.lookahead-=s.match_length,s.strstart+=s.match_length,s.match_length=0):(h=_tr_tally(s,0,s.window[s.strstart]),s.lookahead--,s.strstart++),h&&(flush_block_only(s,!1),s.strm.avail_out===0))return BS_NEED_MORE}return s.insert=0,o===Z_FINISH$3?(flush_block_only(s,!0),s.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):s.sym_next&&(flush_block_only(s,!1),s.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_huff=(s,o)=>{let h;for(;;){if(s.lookahead===0&&(fill_window(s),s.lookahead===0)){if(o===Z_NO_FLUSH$2)return BS_NEED_MORE;break}if(s.match_length=0,h=_tr_tally(s,0,s.window[s.strstart]),s.lookahead--,s.strstart++,h&&(flush_block_only(s,!1),s.strm.avail_out===0))return BS_NEED_MORE}return s.insert=0,o===Z_FINISH$3?(flush_block_only(s,!0),s.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):s.sym_next&&(flush_block_only(s,!1),s.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE};function Config(s,o,h,d,g){this.good_length=s,this.max_lazy=o,this.nice_length=h,this.max_chain=d,this.func=g}const configuration_table=[new Config(0,0,0,0,deflate_stored),new Config(4,4,8,4,deflate_fast),new Config(4,5,16,8,deflate_fast),new Config(4,6,32,32,deflate_fast),new Config(4,4,16,16,deflate_slow),new Config(8,16,32,32,deflate_slow),new Config(8,16,128,128,deflate_slow),new Config(8,32,128,256,deflate_slow),new Config(32,128,258,1024,deflate_slow),new Config(32,258,258,4096,deflate_slow)],lm_init=s=>{s.window_size=2*s.w_size,zero(s.head),s.max_lazy_match=configuration_table[s.level].max_lazy,s.good_match=configuration_table[s.level].good_length,s.nice_match=configuration_table[s.level].nice_length,s.max_chain_length=configuration_table[s.level].max_chain,s.strstart=0,s.block_start=0,s.lookahead=0,s.insert=0,s.match_length=s.prev_length=MIN_MATCH-1,s.match_available=0,s.ins_h=0};function DeflateState(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Z_DEFLATED$2,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(HEAP_SIZE*2),this.dyn_dtree=new Uint16Array((2*D_CODES+1)*2),this.bl_tree=new Uint16Array((2*BL_CODES+1)*2),zero(this.dyn_ltree),zero(this.dyn_dtree),zero(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(MAX_BITS+1),this.heap=new Uint16Array(2*L_CODES+1),zero(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*L_CODES+1),zero(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const deflateStateCheck=s=>{if(!s)return 1;const o=s.state;return!o||o.strm!==s||o.status!==INIT_STATE&&o.status!==GZIP_STATE&&o.status!==EXTRA_STATE&&o.status!==NAME_STATE&&o.status!==COMMENT_STATE&&o.status!==HCRC_STATE&&o.status!==BUSY_STATE&&o.status!==FINISH_STATE?1:0},deflateResetKeep=s=>{if(deflateStateCheck(s))return err(s,Z_STREAM_ERROR$2);s.total_in=s.total_out=0,s.data_type=Z_UNKNOWN;const o=s.state;return o.pending=0,o.pending_out=0,o.wrap<0&&(o.wrap=-o.wrap),o.status=o.wrap===2?GZIP_STATE:o.wrap?INIT_STATE:BUSY_STATE,s.adler=o.wrap===2?0:1,o.last_flush=-2,_tr_init(o),Z_OK$3},deflateReset=s=>{const o=deflateResetKeep(s);return o===Z_OK$3&&lm_init(s.state),o},deflateSetHeader=(s,o)=>deflateStateCheck(s)||s.state.wrap!==2?Z_STREAM_ERROR$2:(s.state.gzhead=o,Z_OK$3),deflateInit2=(s,o,h,d,g,_)=>{if(!s)return Z_STREAM_ERROR$2;let b=1;if(o===Z_DEFAULT_COMPRESSION$1&&(o=6),d<0?(b=0,d=-d):d>15&&(b=2,d-=16),g<1||g>MAX_MEM_LEVEL||h!==Z_DEFLATED$2||d<8||d>15||o<0||o>9||_<0||_>Z_FIXED||d===8&&b!==1)return err(s,Z_STREAM_ERROR$2);d===8&&(d=9);const j=new DeflateState;return s.state=j,j.strm=s,j.status=INIT_STATE,j.wrap=b,j.gzhead=null,j.w_bits=d,j.w_size=1<<j.w_bits,j.w_mask=j.w_size-1,j.hash_bits=g+7,j.hash_size=1<<j.hash_bits,j.hash_mask=j.hash_size-1,j.hash_shift=~~((j.hash_bits+MIN_MATCH-1)/MIN_MATCH),j.window=new Uint8Array(j.w_size*2),j.head=new Uint16Array(j.hash_size),j.prev=new Uint16Array(j.w_size),j.lit_bufsize=1<<g+6,j.pending_buf_size=j.lit_bufsize*4,j.pending_buf=new Uint8Array(j.pending_buf_size),j.sym_buf=j.lit_bufsize,j.sym_end=(j.lit_bufsize-1)*3,j.level=o,j.strategy=_,j.method=h,deflateReset(s)},deflateInit=(s,o)=>deflateInit2(s,o,Z_DEFLATED$2,MAX_WBITS$1,DEF_MEM_LEVEL,Z_DEFAULT_STRATEGY$1),deflate$2=(s,o)=>{if(deflateStateCheck(s)||o>Z_BLOCK$1||o<0)return s?err(s,Z_STREAM_ERROR$2):Z_STREAM_ERROR$2;const h=s.state;if(!s.output||s.avail_in!==0&&!s.input||h.status===FINISH_STATE&&o!==Z_FINISH$3)return err(s,s.avail_out===0?Z_BUF_ERROR$1:Z_STREAM_ERROR$2);const d=h.last_flush;if(h.last_flush=o,h.pending!==0){if(flush_pending(s),s.avail_out===0)return h.last_flush=-1,Z_OK$3}else if(s.avail_in===0&&rank(o)<=rank(d)&&o!==Z_FINISH$3)return err(s,Z_BUF_ERROR$1);if(h.status===FINISH_STATE&&s.avail_in!==0)return err(s,Z_BUF_ERROR$1);if(h.status===INIT_STATE&&h.wrap===0&&(h.status=BUSY_STATE),h.status===INIT_STATE){let g=Z_DEFLATED$2+(h.w_bits-8<<4)<<8,_=-1;if(h.strategy>=Z_HUFFMAN_ONLY||h.level<2?_=0:h.level<6?_=1:h.level===6?_=2:_=3,g|=_<<6,h.strstart!==0&&(g|=PRESET_DICT),g+=31-g%31,putShortMSB(h,g),h.strstart!==0&&(putShortMSB(h,s.adler>>>16),putShortMSB(h,s.adler&65535)),s.adler=1,h.status=BUSY_STATE,flush_pending(s),h.pending!==0)return h.last_flush=-1,Z_OK$3}if(h.status===GZIP_STATE){if(s.adler=0,put_byte(h,31),put_byte(h,139),put_byte(h,8),h.gzhead)put_byte(h,(h.gzhead.text?1:0)+(h.gzhead.hcrc?2:0)+(h.gzhead.extra?4:0)+(h.gzhead.name?8:0)+(h.gzhead.comment?16:0)),put_byte(h,h.gzhead.time&255),put_byte(h,h.gzhead.time>>8&255),put_byte(h,h.gzhead.time>>16&255),put_byte(h,h.gzhead.time>>24&255),put_byte(h,h.level===9?2:h.strategy>=Z_HUFFMAN_ONLY||h.level<2?4:0),put_byte(h,h.gzhead.os&255),h.gzhead.extra&&h.gzhead.extra.length&&(put_byte(h,h.gzhead.extra.length&255),put_byte(h,h.gzhead.extra.length>>8&255)),h.gzhead.hcrc&&(s.adler=crc32_1$2(s.adler,h.pending_buf,h.pending,0)),h.gzindex=0,h.status=EXTRA_STATE;else if(put_byte(h,0),put_byte(h,0),put_byte(h,0),put_byte(h,0),put_byte(h,0),put_byte(h,h.level===9?2:h.strategy>=Z_HUFFMAN_ONLY||h.level<2?4:0),put_byte(h,OS_CODE),h.status=BUSY_STATE,flush_pending(s),h.pending!==0)return h.last_flush=-1,Z_OK$3}if(h.status===EXTRA_STATE){if(h.gzhead.extra){let g=h.pending,_=(h.gzhead.extra.length&65535)-h.gzindex;for(;h.pending+_>h.pending_buf_size;){let j=h.pending_buf_size-h.pending;if(h.pending_buf.set(h.gzhead.extra.subarray(h.gzindex,h.gzindex+j),h.pending),h.pending=h.pending_buf_size,h.gzhead.hcrc&&h.pending>g&&(s.adler=crc32_1$2(s.adler,h.pending_buf,h.pending-g,g)),h.gzindex+=j,flush_pending(s),h.pending!==0)return h.last_flush=-1,Z_OK$3;g=0,_-=j}let b=new Uint8Array(h.gzhead.extra);h.pending_buf.set(b.subarray(h.gzindex,h.gzindex+_),h.pending),h.pending+=_,h.gzhead.hcrc&&h.pending>g&&(s.adler=crc32_1$2(s.adler,h.pending_buf,h.pending-g,g)),h.gzindex=0}h.status=NAME_STATE}if(h.status===NAME_STATE){if(h.gzhead.name){let g=h.pending,_;do{if(h.pending===h.pending_buf_size){if(h.gzhead.hcrc&&h.pending>g&&(s.adler=crc32_1$2(s.adler,h.pending_buf,h.pending-g,g)),flush_pending(s),h.pending!==0)return h.last_flush=-1,Z_OK$3;g=0}h.gzindex<h.gzhead.name.length?_=h.gzhead.name.charCodeAt(h.gzindex++)&255:_=0,put_byte(h,_)}while(_!==0);h.gzhead.hcrc&&h.pending>g&&(s.adler=crc32_1$2(s.adler,h.pending_buf,h.pending-g,g)),h.gzindex=0}h.status=COMMENT_STATE}if(h.status===COMMENT_STATE){if(h.gzhead.comment){let g=h.pending,_;do{if(h.pending===h.pending_buf_size){if(h.gzhead.hcrc&&h.pending>g&&(s.adler=crc32_1$2(s.adler,h.pending_buf,h.pending-g,g)),flush_pending(s),h.pending!==0)return h.last_flush=-1,Z_OK$3;g=0}h.gzindex<h.gzhead.comment.length?_=h.gzhead.comment.charCodeAt(h.gzindex++)&255:_=0,put_byte(h,_)}while(_!==0);h.gzhead.hcrc&&h.pending>g&&(s.adler=crc32_1$2(s.adler,h.pending_buf,h.pending-g,g))}h.status=HCRC_STATE}if(h.status===HCRC_STATE){if(h.gzhead.hcrc){if(h.pending+2>h.pending_buf_size&&(flush_pending(s),h.pending!==0))return h.last_flush=-1,Z_OK$3;put_byte(h,s.adler&255),put_byte(h,s.adler>>8&255),s.adler=0}if(h.status=BUSY_STATE,flush_pending(s),h.pending!==0)return h.last_flush=-1,Z_OK$3}if(s.avail_in!==0||h.lookahead!==0||o!==Z_NO_FLUSH$2&&h.status!==FINISH_STATE){let g=h.level===0?deflate_stored(h,o):h.strategy===Z_HUFFMAN_ONLY?deflate_huff(h,o):h.strategy===Z_RLE?deflate_rle(h,o):configuration_table[h.level].func(h,o);if((g===BS_FINISH_STARTED||g===BS_FINISH_DONE)&&(h.status=FINISH_STATE),g===BS_NEED_MORE||g===BS_FINISH_STARTED)return s.avail_out===0&&(h.last_flush=-1),Z_OK$3;if(g===BS_BLOCK_DONE&&(o===Z_PARTIAL_FLUSH?_tr_align(h):o!==Z_BLOCK$1&&(_tr_stored_block(h,0,0,!1),o===Z_FULL_FLUSH$1&&(zero(h.head),h.lookahead===0&&(h.strstart=0,h.block_start=0,h.insert=0))),flush_pending(s),s.avail_out===0))return h.last_flush=-1,Z_OK$3}return o!==Z_FINISH$3?Z_OK$3:h.wrap<=0?Z_STREAM_END$3:(h.wrap===2?(put_byte(h,s.adler&255),put_byte(h,s.adler>>8&255),put_byte(h,s.adler>>16&255),put_byte(h,s.adler>>24&255),put_byte(h,s.total_in&255),put_byte(h,s.total_in>>8&255),put_byte(h,s.total_in>>16&255),put_byte(h,s.total_in>>24&255)):(putShortMSB(h,s.adler>>>16),putShortMSB(h,s.adler&65535)),flush_pending(s),h.wrap>0&&(h.wrap=-h.wrap),h.pending!==0?Z_OK$3:Z_STREAM_END$3)},deflateEnd=s=>{if(deflateStateCheck(s))return Z_STREAM_ERROR$2;const o=s.state.status;return s.state=null,o===BUSY_STATE?err(s,Z_DATA_ERROR$2):Z_OK$3},deflateSetDictionary=(s,o)=>{let h=o.length;if(deflateStateCheck(s))return Z_STREAM_ERROR$2;const d=s.state,g=d.wrap;if(g===2||g===1&&d.status!==INIT_STATE||d.lookahead)return Z_STREAM_ERROR$2;if(g===1&&(s.adler=adler32_1$2(s.adler,o,h,0)),d.wrap=0,h>=d.w_size){g===0&&(zero(d.head),d.strstart=0,d.block_start=0,d.insert=0);let et=new Uint8Array(d.w_size);et.set(o.subarray(h-d.w_size,h),0),o=et,h=d.w_size}const _=s.avail_in,b=s.next_in,j=s.input;for(s.avail_in=h,s.next_in=0,s.input=o,fill_window(d);d.lookahead>=MIN_MATCH;){let et=d.strstart,tt=d.lookahead-(MIN_MATCH-1);do d.ins_h=HASH(d,d.ins_h,d.window[et+MIN_MATCH-1]),d.prev[et&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=et,et++;while(--tt);d.strstart=et,d.lookahead=MIN_MATCH-1,fill_window(d)}return d.strstart+=d.lookahead,d.block_start=d.strstart,d.insert=d.lookahead,d.lookahead=0,d.match_length=d.prev_length=MIN_MATCH-1,d.match_available=0,s.next_in=b,s.input=j,s.avail_in=_,d.wrap=g,Z_OK$3};var deflateInit_1=deflateInit,deflateInit2_1=deflateInit2,deflateReset_1=deflateReset,deflateResetKeep_1=deflateResetKeep,deflateSetHeader_1=deflateSetHeader,deflate_2$1=deflate$2,deflateEnd_1=deflateEnd,deflateSetDictionary_1=deflateSetDictionary,deflateInfo="pako deflate (from Nodeca project)",deflate_1$2={deflateInit:deflateInit_1,deflateInit2:deflateInit2_1,deflateReset:deflateReset_1,deflateResetKeep:deflateResetKeep_1,deflateSetHeader:deflateSetHeader_1,deflate:deflate_2$1,deflateEnd:deflateEnd_1,deflateSetDictionary:deflateSetDictionary_1,deflateInfo};const _has$1=(s,o)=>Object.prototype.hasOwnProperty.call(s,o);var assign$1=function(s){const o=Array.prototype.slice.call(arguments,1);for(;o.length;){const h=o.shift();if(h){if(typeof h!="object")throw new TypeError(h+"must be non-object");for(const d in h)_has$1(h,d)&&(s[d]=h[d])}}return s},flattenChunks$1=s=>{let o=0;for(let d=0,g=s.length;d<g;d++)o+=s[d].length;const h=new Uint8Array(o);for(let d=0,g=0,_=s.length;d<_;d++){let b=s[d];h.set(b,g),g+=b.length}return h},common$2={assign:assign$1,flattenChunks:flattenChunks$1};let STR_APPLY_UIA_OK$1=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{STR_APPLY_UIA_OK$1=!1}const _utf8len$1=new Uint8Array(256);for(let s=0;s<256;s++)_utf8len$1[s]=s>=252?6:s>=248?5:s>=240?4:s>=224?3:s>=192?2:1;_utf8len$1[254]=_utf8len$1[254]=1;var string2buf$1=s=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(s);let o,h,d,g,_,b=s.length,j=0;for(g=0;g<b;g++)h=s.charCodeAt(g),(h&64512)===55296&&g+1<b&&(d=s.charCodeAt(g+1),(d&64512)===56320&&(h=65536+(h-55296<<10)+(d-56320),g++)),j+=h<128?1:h<2048?2:h<65536?3:4;for(o=new Uint8Array(j),_=0,g=0;_<j;g++)h=s.charCodeAt(g),(h&64512)===55296&&g+1<b&&(d=s.charCodeAt(g+1),(d&64512)===56320&&(h=65536+(h-55296<<10)+(d-56320),g++)),h<128?o[_++]=h:h<2048?(o[_++]=192|h>>>6,o[_++]=128|h&63):h<65536?(o[_++]=224|h>>>12,o[_++]=128|h>>>6&63,o[_++]=128|h&63):(o[_++]=240|h>>>18,o[_++]=128|h>>>12&63,o[_++]=128|h>>>6&63,o[_++]=128|h&63);return o};const buf2binstring$1=(s,o)=>{if(o<65534&&s.subarray&&STR_APPLY_UIA_OK$1)return String.fromCharCode.apply(null,s.length===o?s:s.subarray(0,o));let h="";for(let d=0;d<o;d++)h+=String.fromCharCode(s[d]);return h};var buf2string$1=(s,o)=>{const h=o||s.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(s.subarray(0,o));let d,g;const _=new Array(h*2);for(g=0,d=0;d<h;){let b=s[d++];if(b<128){_[g++]=b;continue}let j=_utf8len$1[b];if(j>4){_[g++]=65533,d+=j-1;continue}for(b&=j===2?31:j===3?15:7;j>1&&d<h;)b=b<<6|s[d++]&63,j--;if(j>1){_[g++]=65533;continue}b<65536?_[g++]=b:(b-=65536,_[g++]=55296|b>>10&1023,_[g++]=56320|b&1023)}return buf2binstring$1(_,g)},utf8border$1=(s,o)=>{o=o||s.length,o>s.length&&(o=s.length);let h=o-1;for(;h>=0&&(s[h]&192)===128;)h--;return h<0||h===0?o:h+_utf8len$1[s[h]]>o?h:o},strings$2={string2buf:string2buf$1,buf2string:buf2string$1,utf8border:utf8border$1};function ZStream$1(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var zstream$2=ZStream$1;const toString$1$1=Object.prototype.toString,{Z_NO_FLUSH:Z_NO_FLUSH$1,Z_SYNC_FLUSH,Z_FULL_FLUSH,Z_FINISH:Z_FINISH$2,Z_OK:Z_OK$2,Z_STREAM_END:Z_STREAM_END$2,Z_DEFAULT_COMPRESSION,Z_DEFAULT_STRATEGY,Z_DEFLATED:Z_DEFLATED$1}=constants$2$1;function Deflate$1(s){this.options=common$2.assign({level:Z_DEFAULT_COMPRESSION,method:Z_DEFLATED$1,chunkSize:16384,windowBits:15,memLevel:8,strategy:Z_DEFAULT_STRATEGY},s||{});let o=this.options;o.raw&&o.windowBits>0?o.windowBits=-o.windowBits:o.gzip&&o.windowBits>0&&o.windowBits<16&&(o.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zstream$2,this.strm.avail_out=0;let h=deflate_1$2.deflateInit2(this.strm,o.level,o.method,o.windowBits,o.memLevel,o.strategy);if(h!==Z_OK$2)throw new Error(messages$2[h]);if(o.header&&deflate_1$2.deflateSetHeader(this.strm,o.header),o.dictionary){let d;if(typeof o.dictionary=="string"?d=strings$2.string2buf(o.dictionary):toString$1$1.call(o.dictionary)==="[object ArrayBuffer]"?d=new Uint8Array(o.dictionary):d=o.dictionary,h=deflate_1$2.deflateSetDictionary(this.strm,d),h!==Z_OK$2)throw new Error(messages$2[h]);this._dict_set=!0}}Deflate$1.prototype.push=function(s,o){const h=this.strm,d=this.options.chunkSize;let g,_;if(this.ended)return!1;for(o===~~o?_=o:_=o===!0?Z_FINISH$2:Z_NO_FLUSH$1,typeof s=="string"?h.input=strings$2.string2buf(s):toString$1$1.call(s)==="[object ArrayBuffer]"?h.input=new Uint8Array(s):h.input=s,h.next_in=0,h.avail_in=h.input.length;;){if(h.avail_out===0&&(h.output=new Uint8Array(d),h.next_out=0,h.avail_out=d),(_===Z_SYNC_FLUSH||_===Z_FULL_FLUSH)&&h.avail_out<=6){this.onData(h.output.subarray(0,h.next_out)),h.avail_out=0;continue}if(g=deflate_1$2.deflate(h,_),g===Z_STREAM_END$2)return h.next_out>0&&this.onData(h.output.subarray(0,h.next_out)),g=deflate_1$2.deflateEnd(this.strm),this.onEnd(g),this.ended=!0,g===Z_OK$2;if(h.avail_out===0){this.onData(h.output);continue}if(_>0&&h.next_out>0){this.onData(h.output.subarray(0,h.next_out)),h.avail_out=0;continue}if(h.avail_in===0)break}return!0};Deflate$1.prototype.onData=function(s){this.chunks.push(s)};Deflate$1.prototype.onEnd=function(s){s===Z_OK$2&&(this.result=common$2.flattenChunks(this.chunks)),this.chunks=[],this.err=s,this.msg=this.strm.msg};function deflate$1$1(s,o){const h=new Deflate$1(o);if(h.push(s,!0),h.err)throw h.msg||messages$2[h.err];return h.result}var deflate_2=deflate$1$1,deflate_1$1={deflate:deflate_2};const BAD$1$1=16209,TYPE$1$1=16191;var inffast$2=function(s,o){let h,d,g,_,b,j,et,tt,rt,at,st,At,ht,ct,_t,gt,wt,ft,dt,xt,bt,Ct,Ut,Qt;const kt=s.state;h=s.next_in,Ut=s.input,d=h+(s.avail_in-5),g=s.next_out,Qt=s.output,_=g-(o-s.avail_out),b=g+(s.avail_out-257),j=kt.dmax,et=kt.wsize,tt=kt.whave,rt=kt.wnext,at=kt.window,st=kt.hold,At=kt.bits,ht=kt.lencode,ct=kt.distcode,_t=(1<<kt.lenbits)-1,gt=(1<<kt.distbits)-1;t:do{At<15&&(st+=Ut[h++]<<At,At+=8,st+=Ut[h++]<<At,At+=8),wt=ht[st&_t];e:for(;;){if(ft=wt>>>24,st>>>=ft,At-=ft,ft=wt>>>16&255,ft===0)Qt[g++]=wt&65535;else if(ft&16){dt=wt&65535,ft&=15,ft&&(At<ft&&(st+=Ut[h++]<<At,At+=8),dt+=st&(1<<ft)-1,st>>>=ft,At-=ft),At<15&&(st+=Ut[h++]<<At,At+=8,st+=Ut[h++]<<At,At+=8),wt=ct[st&gt];r:for(;;){if(ft=wt>>>24,st>>>=ft,At-=ft,ft=wt>>>16&255,ft&16){if(xt=wt&65535,ft&=15,At<ft&&(st+=Ut[h++]<<At,At+=8,At<ft&&(st+=Ut[h++]<<At,At+=8)),xt+=st&(1<<ft)-1,xt>j){s.msg="invalid distance too far back",kt.mode=BAD$1$1;break t}if(st>>>=ft,At-=ft,ft=g-_,xt>ft){if(ft=xt-ft,ft>tt&&kt.sane){s.msg="invalid distance too far back",kt.mode=BAD$1$1;break t}if(bt=0,Ct=at,rt===0){if(bt+=et-ft,ft<dt){dt-=ft;do Qt[g++]=at[bt++];while(--ft);bt=g-xt,Ct=Qt}}else if(rt<ft){if(bt+=et+rt-ft,ft-=rt,ft<dt){dt-=ft;do Qt[g++]=at[bt++];while(--ft);if(bt=0,rt<dt){ft=rt,dt-=ft;do Qt[g++]=at[bt++];while(--ft);bt=g-xt,Ct=Qt}}}else if(bt+=rt-ft,ft<dt){dt-=ft;do Qt[g++]=at[bt++];while(--ft);bt=g-xt,Ct=Qt}for(;dt>2;)Qt[g++]=Ct[bt++],Qt[g++]=Ct[bt++],Qt[g++]=Ct[bt++],dt-=3;dt&&(Qt[g++]=Ct[bt++],dt>1&&(Qt[g++]=Ct[bt++]))}else{bt=g-xt;do Qt[g++]=Qt[bt++],Qt[g++]=Qt[bt++],Qt[g++]=Qt[bt++],dt-=3;while(dt>2);dt&&(Qt[g++]=Qt[bt++],dt>1&&(Qt[g++]=Qt[bt++]))}}else if(ft&64){s.msg="invalid distance code",kt.mode=BAD$1$1;break t}else{wt=ct[(wt&65535)+(st&(1<<ft)-1)];continue r}break}}else if(ft&64)if(ft&32){kt.mode=TYPE$1$1;break t}else{s.msg="invalid literal/length code",kt.mode=BAD$1$1;break t}else{wt=ht[(wt&65535)+(st&(1<<ft)-1)];continue e}break}}while(h<d&&g<b);dt=At>>3,h-=dt,At-=dt<<3,st&=(1<<At)-1,s.next_in=h,s.next_out=g,s.avail_in=h<d?5+(d-h):5-(h-d),s.avail_out=g<b?257+(b-g):257-(g-b),kt.hold=st,kt.bits=At};const MAXBITS$1=15,ENOUGH_LENS$1$1=852,ENOUGH_DISTS$1$1=592,CODES$1$1=0,LENS$1$1=1,DISTS$1$1=2,lbase$1=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),lext$1=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),dbase$1=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),dext$1=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),inflate_table$1=(s,o,h,d,g,_,b,j)=>{const et=j.bits;let tt=0,rt=0,at=0,st=0,At=0,ht=0,ct=0,_t=0,gt=0,wt=0,ft,dt,xt,bt,Ct,Ut=null,Qt;const kt=new Uint16Array(MAXBITS$1+1),Nt=new Uint16Array(MAXBITS$1+1);let Wt=null,Vt,qt,_e;for(tt=0;tt<=MAXBITS$1;tt++)kt[tt]=0;for(rt=0;rt<d;rt++)kt[o[h+rt]]++;for(At=et,st=MAXBITS$1;st>=1&&kt[st]===0;st--);if(At>st&&(At=st),st===0)return g[_++]=1<<24|64<<16|0,g[_++]=1<<24|64<<16|0,j.bits=1,0;for(at=1;at<st&&kt[at]===0;at++);for(At<at&&(At=at),_t=1,tt=1;tt<=MAXBITS$1;tt++)if(_t<<=1,_t-=kt[tt],_t<0)return-1;if(_t>0&&(s===CODES$1$1||st!==1))return-1;for(Nt[1]=0,tt=1;tt<MAXBITS$1;tt++)Nt[tt+1]=Nt[tt]+kt[tt];for(rt=0;rt<d;rt++)o[h+rt]!==0&&(b[Nt[o[h+rt]]++]=rt);if(s===CODES$1$1?(Ut=Wt=b,Qt=20):s===LENS$1$1?(Ut=lbase$1,Wt=lext$1,Qt=257):(Ut=dbase$1,Wt=dext$1,Qt=0),wt=0,rt=0,tt=at,Ct=_,ht=At,ct=0,xt=-1,gt=1<<At,bt=gt-1,s===LENS$1$1&&gt>ENOUGH_LENS$1$1||s===DISTS$1$1&&gt>ENOUGH_DISTS$1$1)return 1;for(;;){Vt=tt-ct,b[rt]+1<Qt?(qt=0,_e=b[rt]):b[rt]>=Qt?(qt=Wt[b[rt]-Qt],_e=Ut[b[rt]-Qt]):(qt=96,_e=0),ft=1<<tt-ct,dt=1<<ht,at=dt;do dt-=ft,g[Ct+(wt>>ct)+dt]=Vt<<24|qt<<16|_e|0;while(dt!==0);for(ft=1<<tt-1;wt&ft;)ft>>=1;if(ft!==0?(wt&=ft-1,wt+=ft):wt=0,rt++,--kt[tt]===0){if(tt===st)break;tt=o[h+b[rt]]}if(tt>At&&(wt&bt)!==xt){for(ct===0&&(ct=At),Ct+=at,ht=tt-ct,_t=1<<ht;ht+ct<st&&(_t-=kt[ht+ct],!(_t<=0));)ht++,_t<<=1;if(gt+=1<<ht,s===LENS$1$1&&gt>ENOUGH_LENS$1$1||s===DISTS$1$1&&gt>ENOUGH_DISTS$1$1)return 1;xt=wt&bt,g[xt]=At<<24|ht<<16|Ct-_|0}}return wt!==0&&(g[Ct+wt]=tt-ct<<24|64<<16|0),j.bits=At,0};var inftrees$2=inflate_table$1;const CODES$2=0,LENS$2=1,DISTS$2=2,{Z_FINISH:Z_FINISH$1$1,Z_BLOCK:Z_BLOCK$2,Z_TREES:Z_TREES$1,Z_OK:Z_OK$1$1,Z_STREAM_END:Z_STREAM_END$1$1,Z_NEED_DICT:Z_NEED_DICT$1$1,Z_STREAM_ERROR:Z_STREAM_ERROR$1$1,Z_DATA_ERROR:Z_DATA_ERROR$1$1,Z_MEM_ERROR:Z_MEM_ERROR$1$1,Z_BUF_ERROR:Z_BUF_ERROR$2,Z_DEFLATED:Z_DEFLATED$3}=constants$2$1,HEAD$1=16180,FLAGS$1=16181,TIME$1=16182,OS$1=16183,EXLEN$1=16184,EXTRA$1=16185,NAME$1=16186,COMMENT$1=16187,HCRC$1=16188,DICTID$1=16189,DICT$1=16190,TYPE$2=16191,TYPEDO$1=16192,STORED$1=16193,COPY_$1=16194,COPY$1=16195,TABLE$1=16196,LENLENS$1=16197,CODELENS$1=16198,LEN_$1=16199,LEN$1=16200,LENEXT$1=16201,DIST$1=16202,DISTEXT$1=16203,MATCH$1=16204,LIT$1=16205,CHECK$1=16206,LENGTH$1=16207,DONE$1=16208,BAD$2=16209,MEM$1=16210,SYNC$1=16211,ENOUGH_LENS$2=852,ENOUGH_DISTS$2=592,MAX_WBITS$2=15,DEF_WBITS$1=MAX_WBITS$2,zswap32$1=s=>(s>>>24&255)+(s>>>8&65280)+((s&65280)<<8)+((s&255)<<24);function InflateState$1(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const inflateStateCheck$1=s=>{if(!s)return 1;const o=s.state;return!o||o.strm!==s||o.mode<HEAD$1||o.mode>SYNC$1?1:0},inflateResetKeep$1=s=>{if(inflateStateCheck$1(s))return Z_STREAM_ERROR$1$1;const o=s.state;return s.total_in=s.total_out=o.total=0,s.msg="",o.wrap&&(s.adler=o.wrap&1),o.mode=HEAD$1,o.last=0,o.havedict=0,o.flags=-1,o.dmax=32768,o.head=null,o.hold=0,o.bits=0,o.lencode=o.lendyn=new Int32Array(ENOUGH_LENS$2),o.distcode=o.distdyn=new Int32Array(ENOUGH_DISTS$2),o.sane=1,o.back=-1,Z_OK$1$1},inflateReset$1=s=>{if(inflateStateCheck$1(s))return Z_STREAM_ERROR$1$1;const o=s.state;return o.wsize=0,o.whave=0,o.wnext=0,inflateResetKeep$1(s)},inflateReset2$1=(s,o)=>{let h;if(inflateStateCheck$1(s))return Z_STREAM_ERROR$1$1;const d=s.state;return o<0?(h=0,o=-o):(h=(o>>4)+5,o<48&&(o&=15)),o&&(o<8||o>15)?Z_STREAM_ERROR$1$1:(d.window!==null&&d.wbits!==o&&(d.window=null),d.wrap=h,d.wbits=o,inflateReset$1(s))},inflateInit2$1=(s,o)=>{if(!s)return Z_STREAM_ERROR$1$1;const h=new InflateState$1;s.state=h,h.strm=s,h.window=null,h.mode=HEAD$1;const d=inflateReset2$1(s,o);return d!==Z_OK$1$1&&(s.state=null),d},inflateInit$1=s=>inflateInit2$1(s,DEF_WBITS$1);let virgin$1=!0,lenfix$1,distfix$1;const fixedtables$1=s=>{if(virgin$1){lenfix$1=new Int32Array(512),distfix$1=new Int32Array(32);let o=0;for(;o<144;)s.lens[o++]=8;for(;o<256;)s.lens[o++]=9;for(;o<280;)s.lens[o++]=7;for(;o<288;)s.lens[o++]=8;for(inftrees$2(LENS$2,s.lens,0,288,lenfix$1,0,s.work,{bits:9}),o=0;o<32;)s.lens[o++]=5;inftrees$2(DISTS$2,s.lens,0,32,distfix$1,0,s.work,{bits:5}),virgin$1=!1}s.lencode=lenfix$1,s.lenbits=9,s.distcode=distfix$1,s.distbits=5},updatewindow$1=(s,o,h,d)=>{let g;const _=s.state;return _.window===null&&(_.wsize=1<<_.wbits,_.wnext=0,_.whave=0,_.window=new Uint8Array(_.wsize)),d>=_.wsize?(_.window.set(o.subarray(h-_.wsize,h),0),_.wnext=0,_.whave=_.wsize):(g=_.wsize-_.wnext,g>d&&(g=d),_.window.set(o.subarray(h-d,h-d+g),_.wnext),d-=g,d?(_.window.set(o.subarray(h-d,h),0),_.wnext=d,_.whave=_.wsize):(_.wnext+=g,_.wnext===_.wsize&&(_.wnext=0),_.whave<_.wsize&&(_.whave+=g))),0},inflate$2$1=(s,o)=>{let h,d,g,_,b,j,et,tt,rt,at,st,At,ht,ct,_t=0,gt,wt,ft,dt,xt,bt,Ct,Ut;const Qt=new Uint8Array(4);let kt,Nt;const Wt=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(inflateStateCheck$1(s)||!s.output||!s.input&&s.avail_in!==0)return Z_STREAM_ERROR$1$1;h=s.state,h.mode===TYPE$2&&(h.mode=TYPEDO$1),b=s.next_out,g=s.output,et=s.avail_out,_=s.next_in,d=s.input,j=s.avail_in,tt=h.hold,rt=h.bits,at=j,st=et,Ut=Z_OK$1$1;t:for(;;)switch(h.mode){case HEAD$1:if(h.wrap===0){h.mode=TYPEDO$1;break}for(;rt<16;){if(j===0)break t;j--,tt+=d[_++]<<rt,rt+=8}if(h.wrap&2&&tt===35615){h.wbits===0&&(h.wbits=15),h.check=0,Qt[0]=tt&255,Qt[1]=tt>>>8&255,h.check=crc32_1$2(h.check,Qt,2,0),tt=0,rt=0,h.mode=FLAGS$1;break}if(h.head&&(h.head.done=!1),!(h.wrap&1)||(((tt&255)<<8)+(tt>>8))%31){s.msg="incorrect header check",h.mode=BAD$2;break}if((tt&15)!==Z_DEFLATED$3){s.msg="unknown compression method",h.mode=BAD$2;break}if(tt>>>=4,rt-=4,Ct=(tt&15)+8,h.wbits===0&&(h.wbits=Ct),Ct>15||Ct>h.wbits){s.msg="invalid window size",h.mode=BAD$2;break}h.dmax=1<<h.wbits,h.flags=0,s.adler=h.check=1,h.mode=tt&512?DICTID$1:TYPE$2,tt=0,rt=0;break;case FLAGS$1:for(;rt<16;){if(j===0)break t;j--,tt+=d[_++]<<rt,rt+=8}if(h.flags=tt,(h.flags&255)!==Z_DEFLATED$3){s.msg="unknown compression method",h.mode=BAD$2;break}if(h.flags&57344){s.msg="unknown header flags set",h.mode=BAD$2;break}h.head&&(h.head.text=tt>>8&1),h.flags&512&&h.wrap&4&&(Qt[0]=tt&255,Qt[1]=tt>>>8&255,h.check=crc32_1$2(h.check,Qt,2,0)),tt=0,rt=0,h.mode=TIME$1;case TIME$1:for(;rt<32;){if(j===0)break t;j--,tt+=d[_++]<<rt,rt+=8}h.head&&(h.head.time=tt),h.flags&512&&h.wrap&4&&(Qt[0]=tt&255,Qt[1]=tt>>>8&255,Qt[2]=tt>>>16&255,Qt[3]=tt>>>24&255,h.check=crc32_1$2(h.check,Qt,4,0)),tt=0,rt=0,h.mode=OS$1;case OS$1:for(;rt<16;){if(j===0)break t;j--,tt+=d[_++]<<rt,rt+=8}h.head&&(h.head.xflags=tt&255,h.head.os=tt>>8),h.flags&512&&h.wrap&4&&(Qt[0]=tt&255,Qt[1]=tt>>>8&255,h.check=crc32_1$2(h.check,Qt,2,0)),tt=0,rt=0,h.mode=EXLEN$1;case EXLEN$1:if(h.flags&1024){for(;rt<16;){if(j===0)break t;j--,tt+=d[_++]<<rt,rt+=8}h.length=tt,h.head&&(h.head.extra_len=tt),h.flags&512&&h.wrap&4&&(Qt[0]=tt&255,Qt[1]=tt>>>8&255,h.check=crc32_1$2(h.check,Qt,2,0)),tt=0,rt=0}else h.head&&(h.head.extra=null);h.mode=EXTRA$1;case EXTRA$1:if(h.flags&1024&&(At=h.length,At>j&&(At=j),At&&(h.head&&(Ct=h.head.extra_len-h.length,h.head.extra||(h.head.extra=new Uint8Array(h.head.extra_len)),h.head.extra.set(d.subarray(_,_+At),Ct)),h.flags&512&&h.wrap&4&&(h.check=crc32_1$2(h.check,d,At,_)),j-=At,_+=At,h.length-=At),h.length))break t;h.length=0,h.mode=NAME$1;case NAME$1:if(h.flags&2048){if(j===0)break t;At=0;do Ct=d[_+At++],h.head&&Ct&&h.length<65536&&(h.head.name+=String.fromCharCode(Ct));while(Ct&&At<j);if(h.flags&512&&h.wrap&4&&(h.check=crc32_1$2(h.check,d,At,_)),j-=At,_+=At,Ct)break t}else h.head&&(h.head.name=null);h.length=0,h.mode=COMMENT$1;case COMMENT$1:if(h.flags&4096){if(j===0)break t;At=0;do Ct=d[_+At++],h.head&&Ct&&h.length<65536&&(h.head.comment+=String.fromCharCode(Ct));while(Ct&&At<j);if(h.flags&512&&h.wrap&4&&(h.check=crc32_1$2(h.check,d,At,_)),j-=At,_+=At,Ct)break t}else h.head&&(h.head.comment=null);h.mode=HCRC$1;case HCRC$1:if(h.flags&512){for(;rt<16;){if(j===0)break t;j--,tt+=d[_++]<<rt,rt+=8}if(h.wrap&4&&tt!==(h.check&65535)){s.msg="header crc mismatch",h.mode=BAD$2;break}tt=0,rt=0}h.head&&(h.head.hcrc=h.flags>>9&1,h.head.done=!0),s.adler=h.check=0,h.mode=TYPE$2;break;case DICTID$1:for(;rt<32;){if(j===0)break t;j--,tt+=d[_++]<<rt,rt+=8}s.adler=h.check=zswap32$1(tt),tt=0,rt=0,h.mode=DICT$1;case DICT$1:if(h.havedict===0)return s.next_out=b,s.avail_out=et,s.next_in=_,s.avail_in=j,h.hold=tt,h.bits=rt,Z_NEED_DICT$1$1;s.adler=h.check=1,h.mode=TYPE$2;case TYPE$2:if(o===Z_BLOCK$2||o===Z_TREES$1)break t;case TYPEDO$1:if(h.last){tt>>>=rt&7,rt-=rt&7,h.mode=CHECK$1;break}for(;rt<3;){if(j===0)break t;j--,tt+=d[_++]<<rt,rt+=8}switch(h.last=tt&1,tt>>>=1,rt-=1,tt&3){case 0:h.mode=STORED$1;break;case 1:if(fixedtables$1(h),h.mode=LEN_$1,o===Z_TREES$1){tt>>>=2,rt-=2;break t}break;case 2:h.mode=TABLE$1;break;case 3:s.msg="invalid block type",h.mode=BAD$2}tt>>>=2,rt-=2;break;case STORED$1:for(tt>>>=rt&7,rt-=rt&7;rt<32;){if(j===0)break t;j--,tt+=d[_++]<<rt,rt+=8}if((tt&65535)!==(tt>>>16^65535)){s.msg="invalid stored block lengths",h.mode=BAD$2;break}if(h.length=tt&65535,tt=0,rt=0,h.mode=COPY_$1,o===Z_TREES$1)break t;case COPY_$1:h.mode=COPY$1;case COPY$1:if(At=h.length,At){if(At>j&&(At=j),At>et&&(At=et),At===0)break t;g.set(d.subarray(_,_+At),b),j-=At,_+=At,et-=At,b+=At,h.length-=At;break}h.mode=TYPE$2;break;case TABLE$1:for(;rt<14;){if(j===0)break t;j--,tt+=d[_++]<<rt,rt+=8}if(h.nlen=(tt&31)+257,tt>>>=5,rt-=5,h.ndist=(tt&31)+1,tt>>>=5,rt-=5,h.ncode=(tt&15)+4,tt>>>=4,rt-=4,h.nlen>286||h.ndist>30){s.msg="too many length or distance symbols",h.mode=BAD$2;break}h.have=0,h.mode=LENLENS$1;case LENLENS$1:for(;h.have<h.ncode;){for(;rt<3;){if(j===0)break t;j--,tt+=d[_++]<<rt,rt+=8}h.lens[Wt[h.have++]]=tt&7,tt>>>=3,rt-=3}for(;h.have<19;)h.lens[Wt[h.have++]]=0;if(h.lencode=h.lendyn,h.lenbits=7,kt={bits:h.lenbits},Ut=inftrees$2(CODES$2,h.lens,0,19,h.lencode,0,h.work,kt),h.lenbits=kt.bits,Ut){s.msg="invalid code lengths set",h.mode=BAD$2;break}h.have=0,h.mode=CODELENS$1;case CODELENS$1:for(;h.have<h.nlen+h.ndist;){for(;_t=h.lencode[tt&(1<<h.lenbits)-1],gt=_t>>>24,wt=_t>>>16&255,ft=_t&65535,!(gt<=rt);){if(j===0)break t;j--,tt+=d[_++]<<rt,rt+=8}if(ft<16)tt>>>=gt,rt-=gt,h.lens[h.have++]=ft;else{if(ft===16){for(Nt=gt+2;rt<Nt;){if(j===0)break t;j--,tt+=d[_++]<<rt,rt+=8}if(tt>>>=gt,rt-=gt,h.have===0){s.msg="invalid bit length repeat",h.mode=BAD$2;break}Ct=h.lens[h.have-1],At=3+(tt&3),tt>>>=2,rt-=2}else if(ft===17){for(Nt=gt+3;rt<Nt;){if(j===0)break t;j--,tt+=d[_++]<<rt,rt+=8}tt>>>=gt,rt-=gt,Ct=0,At=3+(tt&7),tt>>>=3,rt-=3}else{for(Nt=gt+7;rt<Nt;){if(j===0)break t;j--,tt+=d[_++]<<rt,rt+=8}tt>>>=gt,rt-=gt,Ct=0,At=11+(tt&127),tt>>>=7,rt-=7}if(h.have+At>h.nlen+h.ndist){s.msg="invalid bit length repeat",h.mode=BAD$2;break}for(;At--;)h.lens[h.have++]=Ct}}if(h.mode===BAD$2)break;if(h.lens[256]===0){s.msg="invalid code -- missing end-of-block",h.mode=BAD$2;break}if(h.lenbits=9,kt={bits:h.lenbits},Ut=inftrees$2(LENS$2,h.lens,0,h.nlen,h.lencode,0,h.work,kt),h.lenbits=kt.bits,Ut){s.msg="invalid literal/lengths set",h.mode=BAD$2;break}if(h.distbits=6,h.distcode=h.distdyn,kt={bits:h.distbits},Ut=inftrees$2(DISTS$2,h.lens,h.nlen,h.ndist,h.distcode,0,h.work,kt),h.distbits=kt.bits,Ut){s.msg="invalid distances set",h.mode=BAD$2;break}if(h.mode=LEN_$1,o===Z_TREES$1)break t;case LEN_$1:h.mode=LEN$1;case LEN$1:if(j>=6&&et>=258){s.next_out=b,s.avail_out=et,s.next_in=_,s.avail_in=j,h.hold=tt,h.bits=rt,inffast$2(s,st),b=s.next_out,g=s.output,et=s.avail_out,_=s.next_in,d=s.input,j=s.avail_in,tt=h.hold,rt=h.bits,h.mode===TYPE$2&&(h.back=-1);break}for(h.back=0;_t=h.lencode[tt&(1<<h.lenbits)-1],gt=_t>>>24,wt=_t>>>16&255,ft=_t&65535,!(gt<=rt);){if(j===0)break t;j--,tt+=d[_++]<<rt,rt+=8}if(wt&&!(wt&240)){for(dt=gt,xt=wt,bt=ft;_t=h.lencode[bt+((tt&(1<<dt+xt)-1)>>dt)],gt=_t>>>24,wt=_t>>>16&255,ft=_t&65535,!(dt+gt<=rt);){if(j===0)break t;j--,tt+=d[_++]<<rt,rt+=8}tt>>>=dt,rt-=dt,h.back+=dt}if(tt>>>=gt,rt-=gt,h.back+=gt,h.length=ft,wt===0){h.mode=LIT$1;break}if(wt&32){h.back=-1,h.mode=TYPE$2;break}if(wt&64){s.msg="invalid literal/length code",h.mode=BAD$2;break}h.extra=wt&15,h.mode=LENEXT$1;case LENEXT$1:if(h.extra){for(Nt=h.extra;rt<Nt;){if(j===0)break t;j--,tt+=d[_++]<<rt,rt+=8}h.length+=tt&(1<<h.extra)-1,tt>>>=h.extra,rt-=h.extra,h.back+=h.extra}h.was=h.length,h.mode=DIST$1;case DIST$1:for(;_t=h.distcode[tt&(1<<h.distbits)-1],gt=_t>>>24,wt=_t>>>16&255,ft=_t&65535,!(gt<=rt);){if(j===0)break t;j--,tt+=d[_++]<<rt,rt+=8}if(!(wt&240)){for(dt=gt,xt=wt,bt=ft;_t=h.distcode[bt+((tt&(1<<dt+xt)-1)>>dt)],gt=_t>>>24,wt=_t>>>16&255,ft=_t&65535,!(dt+gt<=rt);){if(j===0)break t;j--,tt+=d[_++]<<rt,rt+=8}tt>>>=dt,rt-=dt,h.back+=dt}if(tt>>>=gt,rt-=gt,h.back+=gt,wt&64){s.msg="invalid distance code",h.mode=BAD$2;break}h.offset=ft,h.extra=wt&15,h.mode=DISTEXT$1;case DISTEXT$1:if(h.extra){for(Nt=h.extra;rt<Nt;){if(j===0)break t;j--,tt+=d[_++]<<rt,rt+=8}h.offset+=tt&(1<<h.extra)-1,tt>>>=h.extra,rt-=h.extra,h.back+=h.extra}if(h.offset>h.dmax){s.msg="invalid distance too far back",h.mode=BAD$2;break}h.mode=MATCH$1;case MATCH$1:if(et===0)break t;if(At=st-et,h.offset>At){if(At=h.offset-At,At>h.whave&&h.sane){s.msg="invalid distance too far back",h.mode=BAD$2;break}At>h.wnext?(At-=h.wnext,ht=h.wsize-At):ht=h.wnext-At,At>h.length&&(At=h.length),ct=h.window}else ct=g,ht=b-h.offset,At=h.length;At>et&&(At=et),et-=At,h.length-=At;do g[b++]=ct[ht++];while(--At);h.length===0&&(h.mode=LEN$1);break;case LIT$1:if(et===0)break t;g[b++]=h.length,et--,h.mode=LEN$1;break;case CHECK$1:if(h.wrap){for(;rt<32;){if(j===0)break t;j--,tt|=d[_++]<<rt,rt+=8}if(st-=et,s.total_out+=st,h.total+=st,h.wrap&4&&st&&(s.adler=h.check=h.flags?crc32_1$2(h.check,g,st,b-st):adler32_1$2(h.check,g,st,b-st)),st=et,h.wrap&4&&(h.flags?tt:zswap32$1(tt))!==h.check){s.msg="incorrect data check",h.mode=BAD$2;break}tt=0,rt=0}h.mode=LENGTH$1;case LENGTH$1:if(h.wrap&&h.flags){for(;rt<32;){if(j===0)break t;j--,tt+=d[_++]<<rt,rt+=8}if(h.wrap&4&&tt!==(h.total&4294967295)){s.msg="incorrect length check",h.mode=BAD$2;break}tt=0,rt=0}h.mode=DONE$1;case DONE$1:Ut=Z_STREAM_END$1$1;break t;case BAD$2:Ut=Z_DATA_ERROR$1$1;break t;case MEM$1:return Z_MEM_ERROR$1$1;case SYNC$1:default:return Z_STREAM_ERROR$1$1}return s.next_out=b,s.avail_out=et,s.next_in=_,s.avail_in=j,h.hold=tt,h.bits=rt,(h.wsize||st!==s.avail_out&&h.mode<BAD$2&&(h.mode<CHECK$1||o!==Z_FINISH$1$1))&&updatewindow$1(s,s.output,s.next_out,st-s.avail_out),at-=s.avail_in,st-=s.avail_out,s.total_in+=at,s.total_out+=st,h.total+=st,h.wrap&4&&st&&(s.adler=h.check=h.flags?crc32_1$2(h.check,g,st,s.next_out-st):adler32_1$2(h.check,g,st,s.next_out-st)),s.data_type=h.bits+(h.last?64:0)+(h.mode===TYPE$2?128:0)+(h.mode===LEN_$1||h.mode===COPY_$1?256:0),(at===0&&st===0||o===Z_FINISH$1$1)&&Ut===Z_OK$1$1&&(Ut=Z_BUF_ERROR$2),Ut},inflateEnd$1=s=>{if(inflateStateCheck$1(s))return Z_STREAM_ERROR$1$1;let o=s.state;return o.window&&(o.window=null),s.state=null,Z_OK$1$1},inflateGetHeader$1=(s,o)=>{if(inflateStateCheck$1(s))return Z_STREAM_ERROR$1$1;const h=s.state;return h.wrap&2?(h.head=o,o.done=!1,Z_OK$1$1):Z_STREAM_ERROR$1$1},inflateSetDictionary$1=(s,o)=>{const h=o.length;let d,g,_;return inflateStateCheck$1(s)||(d=s.state,d.wrap!==0&&d.mode!==DICT$1)?Z_STREAM_ERROR$1$1:d.mode===DICT$1&&(g=1,g=adler32_1$2(g,o,h,0),g!==d.check)?Z_DATA_ERROR$1$1:(_=updatewindow$1(s,o,h,h),_?(d.mode=MEM$1,Z_MEM_ERROR$1$1):(d.havedict=1,Z_OK$1$1))};var inflateReset_1$1=inflateReset$1,inflateReset2_1$1=inflateReset2$1,inflateResetKeep_1$1=inflateResetKeep$1,inflateInit_1$1=inflateInit$1,inflateInit2_1$1=inflateInit2$1,inflate_2$1$1=inflate$2$1,inflateEnd_1$1=inflateEnd$1,inflateGetHeader_1$1=inflateGetHeader$1,inflateSetDictionary_1$1=inflateSetDictionary$1,inflateInfo$1="pako inflate (from Nodeca project)",inflate_1$2$1={inflateReset:inflateReset_1$1,inflateReset2:inflateReset2_1$1,inflateResetKeep:inflateResetKeep_1$1,inflateInit:inflateInit_1$1,inflateInit2:inflateInit2_1$1,inflate:inflate_2$1$1,inflateEnd:inflateEnd_1$1,inflateGetHeader:inflateGetHeader_1$1,inflateSetDictionary:inflateSetDictionary_1$1,inflateInfo:inflateInfo$1};function GZheader$1(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var gzheader$2=GZheader$1;const toString$2=Object.prototype.toString,{Z_NO_FLUSH:Z_NO_FLUSH$3,Z_FINISH:Z_FINISH$4,Z_OK:Z_OK$4,Z_STREAM_END:Z_STREAM_END$4,Z_NEED_DICT:Z_NEED_DICT$2,Z_STREAM_ERROR:Z_STREAM_ERROR$3,Z_DATA_ERROR:Z_DATA_ERROR$3,Z_MEM_ERROR:Z_MEM_ERROR$2}=constants$2$1;function Inflate$1$1(s){this.options=common$2.assign({chunkSize:1024*64,windowBits:15,to:""},s||{});const o=this.options;o.raw&&o.windowBits>=0&&o.windowBits<16&&(o.windowBits=-o.windowBits,o.windowBits===0&&(o.windowBits=-15)),o.windowBits>=0&&o.windowBits<16&&!(s&&s.windowBits)&&(o.windowBits+=32),o.windowBits>15&&o.windowBits<48&&!(o.windowBits&15)&&(o.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zstream$2,this.strm.avail_out=0;let h=inflate_1$2$1.inflateInit2(this.strm,o.windowBits);if(h!==Z_OK$4)throw new Error(messages$2[h]);if(this.header=new gzheader$2,inflate_1$2$1.inflateGetHeader(this.strm,this.header),o.dictionary&&(typeof o.dictionary=="string"?o.dictionary=strings$2.string2buf(o.dictionary):toString$2.call(o.dictionary)==="[object ArrayBuffer]"&&(o.dictionary=new Uint8Array(o.dictionary)),o.raw&&(h=inflate_1$2$1.inflateSetDictionary(this.strm,o.dictionary),h!==Z_OK$4)))throw new Error(messages$2[h])}Inflate$1$1.prototype.push=function(s,o){const h=this.strm,d=this.options.chunkSize,g=this.options.dictionary;let _,b,j;if(this.ended)return!1;for(o===~~o?b=o:b=o===!0?Z_FINISH$4:Z_NO_FLUSH$3,toString$2.call(s)==="[object ArrayBuffer]"?h.input=new Uint8Array(s):h.input=s,h.next_in=0,h.avail_in=h.input.length;;){for(h.avail_out===0&&(h.output=new Uint8Array(d),h.next_out=0,h.avail_out=d),_=inflate_1$2$1.inflate(h,b),_===Z_NEED_DICT$2&&g&&(_=inflate_1$2$1.inflateSetDictionary(h,g),_===Z_OK$4?_=inflate_1$2$1.inflate(h,b):_===Z_DATA_ERROR$3&&(_=Z_NEED_DICT$2));h.avail_in>0&&_===Z_STREAM_END$4&&h.state.wrap>0&&s[h.next_in]!==0;)inflate_1$2$1.inflateReset(h),_=inflate_1$2$1.inflate(h,b);switch(_){case Z_STREAM_ERROR$3:case Z_DATA_ERROR$3:case Z_NEED_DICT$2:case Z_MEM_ERROR$2:return this.onEnd(_),this.ended=!0,!1}if(j=h.avail_out,h.next_out&&(h.avail_out===0||_===Z_STREAM_END$4))if(this.options.to==="string"){let et=strings$2.utf8border(h.output,h.next_out),tt=h.next_out-et,rt=strings$2.buf2string(h.output,et);h.next_out=tt,h.avail_out=d-tt,tt&&h.output.set(h.output.subarray(et,et+tt),0),this.onData(rt)}else this.onData(h.output.length===h.next_out?h.output:h.output.subarray(0,h.next_out));if(!(_===Z_OK$4&&j===0)){if(_===Z_STREAM_END$4)return _=inflate_1$2$1.inflateEnd(this.strm),this.onEnd(_),this.ended=!0,!0;if(h.avail_in===0)break}}return!0};Inflate$1$1.prototype.onData=function(s){this.chunks.push(s)};Inflate$1$1.prototype.onEnd=function(s){s===Z_OK$4&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=common$2.flattenChunks(this.chunks)),this.chunks=[],this.err=s,this.msg=this.strm.msg};function inflate$1$2(s,o){const h=new Inflate$1$1(o);if(h.push(s),h.err)throw h.msg||messages$2[h.err];return h.result}var Inflate_1$1=Inflate$1$1,inflate_2$2=inflate$1$2,inflate_1$1$1={Inflate:Inflate_1$1,inflate:inflate_2$2};const{deflate:deflate$3}=deflate_1$1,{Inflate,inflate:inflate$4}=inflate_1$1$1;var deflate_1=deflate$3,Inflate_1=Inflate,inflate_1$3=inflate$4;const crcTable$1=[];for(let s=0;s<256;s++){let o=s;for(let h=0;h<8;h++)o&1?o=3988292384^o>>>1:o=o>>>1;crcTable$1[s]=o}const initialCrc=4294967295;function updateCrc(s,o,h){let d=s;for(let g=0;g<h;g++)d=crcTable$1[(d^o[g])&255]^d>>>8;return d}function crc(s,o){return(updateCrc(initialCrc,s,o)^initialCrc)>>>0}function checkCrc(s,o,h){const d=s.readUint32(),g=crc(new Uint8Array(s.buffer,s.byteOffset+s.offset-o-4,o),o);if(g!==d)throw new Error(`CRC mismatch for chunk ${h}. Expected ${d}, found ${g}`)}function writeCrc(s,o){s.writeUint32(crc(new Uint8Array(s.buffer,s.byteOffset+s.offset-o,o),o))}function unfilterNone(s,o,h){for(let d=0;d<h;d++)o[d]=s[d]}function unfilterSub(s,o,h,d){let g=0;for(;g<d;g++)o[g]=s[g];for(;g<h;g++)o[g]=s[g]+o[g-d]&255}function unfilterUp(s,o,h,d){let g=0;if(h.length===0)for(;g<d;g++)o[g]=s[g];else for(;g<d;g++)o[g]=s[g]+h[g]&255}function unfilterAverage(s,o,h,d,g){let _=0;if(h.length===0){for(;_<g;_++)o[_]=s[_];for(;_<d;_++)o[_]=s[_]+(o[_-g]>>1)&255}else{for(;_<g;_++)o[_]=s[_]+(h[_]>>1)&255;for(;_<d;_++)o[_]=s[_]+(o[_-g]+h[_]>>1)&255}}function unfilterPaeth(s,o,h,d,g){let _=0;if(h.length===0){for(;_<g;_++)o[_]=s[_];for(;_<d;_++)o[_]=s[_]+o[_-g]&255}else{for(;_<g;_++)o[_]=s[_]+h[_]&255;for(;_<d;_++)o[_]=s[_]+paethPredictor(o[_-g],h[_],h[_-g])&255}}function paethPredictor(s,o,h){const d=s+o-h,g=Math.abs(d-s),_=Math.abs(d-o),b=Math.abs(d-h);return g<=_&&g<=b?s:_<=b?o:h}const uint16=new Uint16Array([255]),uint8=new Uint8Array(uint16.buffer),osIsLittleEndian=uint8[0]===255,empty=new Uint8Array(0);function decodeInterlaceNull(s){const{data:o,width:h,height:d,channels:g,depth:_}=s,b=g*_/8,j=h*b,et=new Uint8Array(d*j);let tt=empty,rt=0,at,st;for(let At=0;At<d;At++){switch(at=o.subarray(rt+1,rt+1+j),st=et.subarray(At*j,(At+1)*j),o[rt]){case 0:unfilterNone(at,st,j);break;case 1:unfilterSub(at,st,j,b);break;case 2:unfilterUp(at,st,tt,j);break;case 3:unfilterAverage(at,st,tt,j,b);break;case 4:unfilterPaeth(at,st,tt,j,b);break;default:throw new Error(`Unsupported filter: ${o[rt]}`)}tt=st,rt+=j+1}if(_===16){const At=new Uint16Array(et.buffer);if(osIsLittleEndian)for(let ht=0;ht<At.length;ht++)At[ht]=swap16(At[ht]);return At}else return et}function swap16(s){return(s&255)<<8|s>>8&255}const pngSignature=Uint8Array.of(137,80,78,71,13,10,26,10);function writeSignature(s){s.writeBytes(pngSignature)}function checkSignature(s){if(!hasPngSignature(s.readBytes(pngSignature.length)))throw new Error("wrong PNG signature")}function hasPngSignature(s){if(s.length<pngSignature.length)return!1;for(let o=0;o<pngSignature.length;o++)if(s[o]!==pngSignature[o])return!1;return!0}const textChunkName="tEXt",NULL$1=0,latin1Decoder=new TextDecoder("latin1");function validateKeyword(s){if(validateLatin1(s),s.length===0||s.length>79)throw new Error("keyword length must be between 1 and 79")}const latin1Regex=/^[\u0000-\u00FF]*$/;function validateLatin1(s){if(!latin1Regex.test(s))throw new Error("invalid latin1 text")}function decodetEXt(s,o,h){const d=readKeyword(o);s[d]=readLatin1(o,h-d.length-1)}function encodetEXt(s,o,h){validateKeyword(o),validateLatin1(h);const d=o.length+1+h.length;s.writeUint32(d),s.writeChars(textChunkName),s.writeChars(o),s.writeByte(NULL$1),s.writeChars(h),writeCrc(s,d+4)}function readKeyword(s){for(s.mark();s.readByte()!==NULL$1;);const o=s.offset;s.reset();const h=latin1Decoder.decode(s.readBytes(o-s.offset-1));return s.skip(1),validateKeyword(h),h}function readLatin1(s,o){return latin1Decoder.decode(s.readBytes(o))}const ColorType={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},CompressionMethod={UNKNOWN:-1,DEFLATE:0},FilterMethod={UNKNOWN:-1,ADAPTIVE:0},InterlaceMethod={UNKNOWN:-1,NO_INTERLACE:0};class PngDecoder extends IOBuffer{constructor(o,h={}){super(o),$e(this,"_checkCrc"),$e(this,"_inflator"),$e(this,"_png"),$e(this,"_end"),$e(this,"_hasPalette"),$e(this,"_palette"),$e(this,"_hasTransparency"),$e(this,"_transparency"),$e(this,"_compressionMethod"),$e(this,"_filterMethod"),$e(this,"_interlaceMethod"),$e(this,"_colorType");const{checkCrc:d=!1}=h;this._checkCrc=d,this._inflator=new Inflate_1,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=CompressionMethod.UNKNOWN,this._filterMethod=FilterMethod.UNKNOWN,this._interlaceMethod=InterlaceMethod.UNKNOWN,this._colorType=ColorType.UNKNOWN,this.setBigEndian()}decode(){for(checkSignature(this);!this._end;)this.decodeChunk();return this.decodeImage(),this._png}decodeChunk(){const o=this.readUint32(),h=this.readChars(4),d=this.offset;switch(h){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(o);break;case"IDAT":this.decodeIDAT(o);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(o);break;case"iCCP":this.decodeiCCP(o);break;case textChunkName:decodetEXt(this._png.text,this,o);break;case"pHYs":this.decodepHYs();break;default:this.skip(o);break}if(this.offset-d!==o)throw new Error(`Length mismatch while decoding chunk ${h}`);this._checkCrc?checkCrc(this,o+4,h):this.skip(4)}decodeIHDR(){const o=this._png;o.width=this.readUint32(),o.height=this.readUint32(),o.depth=checkBitDepth(this.readUint8());const h=this.readUint8();this._colorType=h;let d;switch(h){case ColorType.GREYSCALE:d=1;break;case ColorType.TRUECOLOUR:d=3;break;case ColorType.INDEXED_COLOUR:d=1;break;case ColorType.GREYSCALE_ALPHA:d=2;break;case ColorType.TRUECOLOUR_ALPHA:d=4;break;case ColorType.UNKNOWN:default:throw new Error(`Unknown color type: ${h}`)}if(this._png.channels=d,this._compressionMethod=this.readUint8(),this._compressionMethod!==CompressionMethod.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodePLTE(o){if(o%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${o}`);const h=o/3;this._hasPalette=!0;const d=[];this._palette=d;for(let g=0;g<h;g++)d.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(o){this._inflator.push(new Uint8Array(this.buffer,this.offset+this.byteOffset,o)),this.skip(o)}decodetRNS(o){switch(this._colorType){case ColorType.GREYSCALE:case ColorType.TRUECOLOUR:{if(o%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${o}`);if(o/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${o/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(o/2);for(let h=0;h<o/2;h++)this._transparency[h]=this.readUint16();break}case ColorType.INDEXED_COLOUR:{if(o>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${o} vs ${this._palette.length})`);let h=0;for(;h<o;h++){const d=this.readByte();this._palette[h].push(d)}for(;h<this._palette.length;h++)this._palette[h].push(255);break}case ColorType.UNKNOWN:case ColorType.GREYSCALE_ALPHA:case ColorType.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(o){const h=readKeyword(this),d=this.readUint8();if(d!==CompressionMethod.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${d}`);const g=this.readBytes(o-h.length-2);this._png.iccEmbeddedProfile={name:h,profile:inflate_1$3(g)}}decodepHYs(){const o=this.readUint32(),h=this.readUint32(),d=this.readByte();this._png.resolution={x:o,y:h,unit:d}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const o=this._inflator.result;if(this._filterMethod!==FilterMethod.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===InterlaceMethod.NO_INTERLACE)this._png.data=decodeInterlaceNull({data:o,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}}function checkBitDepth(s){if(s!==1&&s!==2&&s!==4&&s!==8&&s!==16)throw new Error(`invalid bit depth: ${s}`);return s}const defaultZlibOptions={level:3};class PngEncoder extends IOBuffer{constructor(o,h={}){super(),$e(this,"_png"),$e(this,"_zlibOptions"),$e(this,"_colorType"),this._colorType=ColorType.UNKNOWN,this._zlibOptions={...defaultZlibOptions,...h.zlib},this._png=this._checkData(o),this.setBigEndian()}encode(){if(writeSignature(this),this.encodeIHDR(),this.encodeData(),this._png.text)for(const[o,h]of Object.entries(this._png.text))encodetEXt(this,o,h);return this.encodeIEND(),this.toArray()}encodeIHDR(){this.writeUint32(13),this.writeChars("IHDR"),this.writeUint32(this._png.width),this.writeUint32(this._png.height),this.writeByte(this._png.depth),this.writeByte(this._colorType),this.writeByte(CompressionMethod.DEFLATE),this.writeByte(FilterMethod.ADAPTIVE),this.writeByte(InterlaceMethod.NO_INTERLACE),writeCrc(this,17)}encodeIEND(){this.writeUint32(0),this.writeChars("IEND"),writeCrc(this,4)}encodeIDAT(o){this.writeUint32(o.length),this.writeChars("IDAT"),this.writeBytes(o),writeCrc(this,o.length+4)}encodeData(){const{width:o,height:h,channels:d,depth:g,data:_}=this._png,b=d*o,j=new IOBuffer().setBigEndian();let et=0;for(let at=0;at<h;at++)if(j.writeByte(0),g===8)et=writeDataBytes(_,j,b,et);else if(g===16)et=writeDataUint16(_,j,b,et);else throw new Error("unreachable");const tt=j.toArray(),rt=deflate_1(tt,this._zlibOptions);this.encodeIDAT(rt)}_checkData(o){const{colorType:h,channels:d,depth:g}=getColorType(o),_={width:checkInteger(o.width,"width"),height:checkInteger(o.height,"height"),channels:d,data:o.data,depth:g,text:o.text};this._colorType=h;const b=_.width*_.height*d;if(_.data.length!==b)throw new RangeError(`wrong data size. Found ${_.data.length}, expected ${b}`);return _}}function checkInteger(s,o){if(Number.isInteger(s)&&s>0)return s;throw new TypeError(`${o} must be a positive integer`)}function getColorType(s){const{channels:o=4,depth:h=8}=s;if(o!==4&&o!==3&&o!==2&&o!==1)throw new RangeError(`unsupported number of channels: ${o}`);if(h!==8&&h!==16)throw new RangeError(`unsupported bit depth: ${h}`);const d={channels:o,depth:h,colorType:ColorType.UNKNOWN};switch(o){case 4:d.colorType=ColorType.TRUECOLOUR_ALPHA;break;case 3:d.colorType=ColorType.TRUECOLOUR;break;case 1:d.colorType=ColorType.GREYSCALE;break;case 2:d.colorType=ColorType.GREYSCALE_ALPHA;break;default:throw new Error("unsupported number of channels")}return d}function writeDataBytes(s,o,h,d){for(let g=0;g<h;g++)o.writeByte(s[d++]);return d}function writeDataUint16(s,o,h,d){for(let g=0;g<h;g++)o.writeUint16(s[d++]);return d}var ResolutionUnitSpecifier;(function(s){s[s.UNKNOWN=0]="UNKNOWN",s[s.METRE=1]="METRE"})(ResolutionUnitSpecifier||(ResolutionUnitSpecifier={}));function decodePng(s,o){return new PngDecoder(s,o).decode()}function encodePng$1(s,o){return new PngEncoder(s,o).encode()}var encoder={exports:{}},hasRequiredEncoder;function requireEncoder(){return hasRequiredEncoder||(hasRequiredEncoder=1,function(s){function o(d){var g=Math.floor,_=new Array(64),b=new Array(64),j=new Array(64),et=new Array(64),tt,rt,at,st,At=new Array(65535),ht=new Array(65535),ct=new Array(64),_t=new Array(64),gt=[],wt=0,ft=7,dt=new Array(64),xt=new Array(64),bt=new Array(64),Ct=new Array(256),Ut=new Array(2048),Qt,kt=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],Nt=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Wt=[0,1,2,3,4,5,6,7,8,9,10,11],Vt=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],qt=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],_e=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Jt=[0,1,2,3,4,5,6,7,8,9,10,11],lr=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],jt=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ur(fr){for(var Kr=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],jr=0;jr<64;jr++){var Xr=g((Kr[jr]*fr+50)/100);Xr<1?Xr=1:Xr>255&&(Xr=255),_[kt[jr]]=Xr}for(var Tr=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],An=0;An<64;An++){var Gr=g((Tr[An]*fr+50)/100);Gr<1?Gr=1:Gr>255&&(Gr=255),b[kt[An]]=Gr}for(var Yr=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Zr=0,ln=0;ln<8;ln++)for(var Hr=0;Hr<8;Hr++)j[Zr]=1/(_[kt[Zr]]*Yr[ln]*Yr[Hr]*8),et[Zr]=1/(b[kt[Zr]]*Yr[ln]*Yr[Hr]*8),Zr++}function Ar(fr,Kr){for(var jr=0,Xr=0,Tr=new Array,An=1;An<=16;An++){for(var Gr=1;Gr<=fr[An];Gr++)Tr[Kr[Xr]]=[],Tr[Kr[Xr]][0]=jr,Tr[Kr[Xr]][1]=An,Xr++,jr++;jr*=2}return Tr}function mr(){tt=Ar(Nt,Wt),rt=Ar(_e,Jt),at=Ar(Vt,qt),st=Ar(lr,jt)}function dr(){for(var fr=1,Kr=2,jr=1;jr<=15;jr++){for(var Xr=fr;Xr<Kr;Xr++)ht[32767+Xr]=jr,At[32767+Xr]=[],At[32767+Xr][1]=jr,At[32767+Xr][0]=Xr;for(var Tr=-(Kr-1);Tr<=-fr;Tr++)ht[32767+Tr]=jr,At[32767+Tr]=[],At[32767+Tr][1]=jr,At[32767+Tr][0]=Kr-1+Tr;fr<<=1,Kr<<=1}}function Nr(){for(var fr=0;fr<256;fr++)Ut[fr]=19595*fr,Ut[fr+256>>0]=38470*fr,Ut[fr+512>>0]=7471*fr+32768,Ut[fr+768>>0]=-11059*fr,Ut[fr+1024>>0]=-21709*fr,Ut[fr+1280>>0]=32768*fr+8421375,Ut[fr+1536>>0]=-27439*fr,Ut[fr+1792>>0]=-5329*fr}function Ur(fr){for(var Kr=fr[0],jr=fr[1]-1;jr>=0;)Kr&1<<jr&&(wt|=1<<ft),jr--,ft--,ft<0&&(wt==255?(nr(255),nr(0)):nr(wt),ft=7,wt=0)}function nr(fr){gt.push(fr)}function hr(fr){nr(fr>>8&255),nr(fr&255)}function Dr(fr,Kr){var jr,Xr,Tr,An,Gr,Yr,Zr,ln,Hr=0,rn,zt=8,br=64;for(rn=0;rn<zt;++rn){jr=fr[Hr],Xr=fr[Hr+1],Tr=fr[Hr+2],An=fr[Hr+3],Gr=fr[Hr+4],Yr=fr[Hr+5],Zr=fr[Hr+6],ln=fr[Hr+7];var Sr=jr+ln,kr=jr-ln,ir=Xr+Zr,Er=Xr-Zr,Lt=Tr+Yr,Ir=Tr-Yr,un=An+Gr,yt=An-Gr,_r=Sr+un,yr=Sr-un,Kt=ir+Lt,tr=ir-Lt;fr[Hr]=_r+Kt,fr[Hr+4]=_r-Kt;var pr=(tr+yr)*.707106781;fr[Hr+2]=yr+pr,fr[Hr+6]=yr-pr,_r=yt+Ir,Kt=Ir+Er,tr=Er+kr;var sn=(_r-tr)*.382683433,mt=.5411961*_r+sn,ot=1.306562965*tr+sn,it=Kt*.707106781,lt=kr+it,pt=kr-it;fr[Hr+5]=pt+mt,fr[Hr+3]=pt-mt,fr[Hr+1]=lt+ot,fr[Hr+7]=lt-ot,Hr+=8}for(Hr=0,rn=0;rn<zt;++rn){jr=fr[Hr],Xr=fr[Hr+8],Tr=fr[Hr+16],An=fr[Hr+24],Gr=fr[Hr+32],Yr=fr[Hr+40],Zr=fr[Hr+48],ln=fr[Hr+56];var Et=jr+ln,Pt=jr-ln,Ht=Xr+Zr,Mt=Xr-Zr,Gt=Tr+Yr,sr=Tr-Yr,Xt=An+Gr,wr=An-Gr,Fr=Et+Xt,cr=Et-Xt,Br=Ht+Gt,Vr=Ht-Gt;fr[Hr]=Fr+Br,fr[Hr+32]=Fr-Br;var rr=(Vr+cr)*.707106781;fr[Hr+16]=cr+rr,fr[Hr+48]=cr-rr,Fr=wr+sr,Br=sr+Mt,Vr=Mt+Pt;var Mr=(Fr-Vr)*.382683433,Jr=.5411961*Fr+Mr,fn=1.306562965*Vr+Mr,dn=Br*.707106781,xn=Pt+dn,an=Pt-dn;fr[Hr+40]=an+Jr,fr[Hr+24]=an-Jr,fr[Hr+8]=xn+fn,fr[Hr+56]=xn-fn,Hr++}var hn;for(rn=0;rn<br;++rn)hn=fr[rn]*Kr[rn],ct[rn]=hn>0?hn+.5|0:hn-.5|0;return ct}function Qr(){hr(65504),hr(16),nr(74),nr(70),nr(73),nr(70),nr(0),nr(1),nr(1),nr(0),hr(1),hr(1),nr(0),nr(0)}function vr(fr){if(fr){hr(65505),fr[0]===69&&fr[1]===120&&fr[2]===105&&fr[3]===102?hr(fr.length+2):(hr(fr.length+5+2),nr(69),nr(120),nr(105),nr(102),nr(0));for(var Kr=0;Kr<fr.length;Kr++)nr(fr[Kr])}}function on(fr,Kr){hr(65472),hr(17),nr(8),hr(Kr),hr(fr),nr(3),nr(1),nr(17),nr(0),nr(2),nr(17),nr(1),nr(3),nr(17),nr(1)}function en(){hr(65499),hr(132),nr(0);for(var fr=0;fr<64;fr++)nr(_[fr]);nr(1);for(var Kr=0;Kr<64;Kr++)nr(b[Kr])}function zr(){hr(65476),hr(418),nr(0);for(var fr=0;fr<16;fr++)nr(Nt[fr+1]);for(var Kr=0;Kr<=11;Kr++)nr(Wt[Kr]);nr(16);for(var jr=0;jr<16;jr++)nr(Vt[jr+1]);for(var Xr=0;Xr<=161;Xr++)nr(qt[Xr]);nr(1);for(var Tr=0;Tr<16;Tr++)nr(_e[Tr+1]);for(var An=0;An<=11;An++)nr(Jt[An]);nr(17);for(var Gr=0;Gr<16;Gr++)nr(lr[Gr+1]);for(var Yr=0;Yr<=161;Yr++)nr(jt[Yr])}function or(fr){typeof fr>"u"||fr.constructor!==Array||fr.forEach(Kr=>{if(typeof Kr=="string"){hr(65534);var jr=Kr.length;hr(jr+2);var Xr;for(Xr=0;Xr<jr;Xr++)nr(Kr.charCodeAt(Xr))}})}function xr(){hr(65498),hr(12),nr(3),nr(1),nr(0),nr(2),nr(17),nr(3),nr(17),nr(0),nr(63),nr(0)}function Wr(fr,Kr,jr,Xr,Tr){for(var An=Tr[0],Gr=Tr[240],Yr,Zr=16,ln=63,Hr=64,rn=Dr(fr,Kr),zt=0;zt<Hr;++zt)_t[kt[zt]]=rn[zt];var br=_t[0]-jr;jr=_t[0],br==0?Ur(Xr[0]):(Yr=32767+br,Ur(Xr[ht[Yr]]),Ur(At[Yr]));for(var Sr=63;Sr>0&&_t[Sr]==0;Sr--);if(Sr==0)return Ur(An),jr;for(var kr=1,ir;kr<=Sr;){for(var Er=kr;_t[kr]==0&&kr<=Sr;++kr);var Lt=kr-Er;if(Lt>=Zr){ir=Lt>>4;for(var Ir=1;Ir<=ir;++Ir)Ur(Gr);Lt=Lt&15}Yr=32767+_t[kr],Ur(Tr[(Lt<<4)+ht[Yr]]),Ur(At[Yr]),kr++}return Sr!=ln&&Ur(An),jr}function $r(){for(var fr=String.fromCharCode,Kr=0;Kr<256;Kr++)Ct[Kr]=fr(Kr)}this.encode=function(fr,Kr){new Date().getTime(),Kr&&Or(Kr),gt=new Array,wt=0,ft=7,hr(65496),Qr(),or(fr.comments),vr(fr.exifBuffer),en(),on(fr.width,fr.height),zr(),xr();var jr=0,Xr=0,Tr=0;wt=0,ft=7,this.encode.displayName="_encode_";for(var An=fr.data,Gr=fr.width,Yr=fr.height,Zr=Gr*4,ln,Hr=0,rn,zt,br,Sr,kr,ir,Er,Lt;Hr<Yr;){for(ln=0;ln<Zr;){for(Sr=Zr*Hr+ln,kr=Sr,ir=-1,Er=0,Lt=0;Lt<64;Lt++)Er=Lt>>3,ir=(Lt&7)*4,kr=Sr+Er*Zr+ir,Hr+Er>=Yr&&(kr-=Zr*(Hr+1+Er-Yr)),ln+ir>=Zr&&(kr-=ln+ir-Zr+4),rn=An[kr++],zt=An[kr++],br=An[kr++],dt[Lt]=(Ut[rn]+Ut[zt+256>>0]+Ut[br+512>>0]>>16)-128,xt[Lt]=(Ut[rn+768>>0]+Ut[zt+1024>>0]+Ut[br+1280>>0]>>16)-128,bt[Lt]=(Ut[rn+1280>>0]+Ut[zt+1536>>0]+Ut[br+1792>>0]>>16)-128;jr=Wr(dt,j,jr,tt,at),Xr=Wr(xt,et,Xr,rt,st),Tr=Wr(bt,et,Tr,rt,st),ln+=32}Hr+=8}if(ft>=0){var Ir=[];Ir[1]=ft+1,Ir[0]=(1<<ft+1)-1,Ur(Ir)}return hr(65497),Buffer.from(gt)};function Or(fr){if(fr<=0&&(fr=1),fr>100&&(fr=100),Qt!=fr){var Kr=0;fr<50?Kr=Math.floor(5e3/fr):Kr=Math.floor(200-fr*2),ur(Kr),Qt=fr}}function qr(){var fr=new Date().getTime();d||(d=50),$r(),mr(),dr(),Nr(),Or(d),new Date().getTime()-fr}qr()}s.exports=h;function h(d,g){typeof g>"u"&&(g=50);var _=new o(g),b=_.encode(d,g);return{data:b,width:d.width,height:d.height}}}(encoder)),encoder.exports}var decoder={exports:{}},hasRequiredDecoder;function requireDecoder(){return hasRequiredDecoder||(hasRequiredDecoder=1,function(s){var o=function(){var d=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),g=4017,_=799,b=3406,j=2276,et=1567,tt=3784,rt=5793,at=2896;function st(){}function At(dt,xt){for(var bt=0,Ct=[],Ut,Qt,kt=16;kt>0&&!dt[kt-1];)kt--;Ct.push({children:[],index:0});var Nt=Ct[0],Wt;for(Ut=0;Ut<kt;Ut++){for(Qt=0;Qt<dt[Ut];Qt++){for(Nt=Ct.pop(),Nt.children[Nt.index]=xt[bt];Nt.index>0;){if(Ct.length===0)throw new Error("Could not recreate Huffman Table");Nt=Ct.pop()}for(Nt.index++,Ct.push(Nt);Ct.length<=Ut;)Ct.push(Wt={children:[],index:0}),Nt.children[Nt.index]=Wt.children,Nt=Wt;bt++}Ut+1<kt&&(Ct.push(Wt={children:[],index:0}),Nt.children[Nt.index]=Wt.children,Nt=Wt)}return Ct[0].children}function ht(dt,xt,bt,Ct,Ut,Qt,kt,Nt,Wt,Vt){bt.precision,bt.samplesPerLine,bt.scanLines;var qt=bt.mcusPerLine,_e=bt.progressive;bt.maxH,bt.maxV;var Jt=xt,lr=0,jt=0;function ur(){if(jt>0)return jt--,lr>>jt&1;if(lr=dt[xt++],lr==255){var Gr=dt[xt++];if(Gr)throw new Error("unexpected marker: "+(lr<<8|Gr).toString(16))}return jt=7,lr>>>7}function Ar(Gr){for(var Yr=Gr,Zr;(Zr=ur())!==null;){if(Yr=Yr[Zr],typeof Yr=="number")return Yr;if(typeof Yr!="object")throw new Error("invalid huffman sequence")}return null}function mr(Gr){for(var Yr=0;Gr>0;){var Zr=ur();if(Zr===null)return;Yr=Yr<<1|Zr,Gr--}return Yr}function dr(Gr){var Yr=mr(Gr);return Yr>=1<<Gr-1?Yr:Yr+(-1<<Gr)+1}function Nr(Gr,Yr){var Zr=Ar(Gr.huffmanTableDC),ln=Zr===0?0:dr(Zr);Yr[0]=Gr.pred+=ln;for(var Hr=1;Hr<64;){var rn=Ar(Gr.huffmanTableAC),zt=rn&15,br=rn>>4;if(zt===0){if(br<15)break;Hr+=16;continue}Hr+=br;var Sr=d[Hr];Yr[Sr]=dr(zt),Hr++}}function Ur(Gr,Yr){var Zr=Ar(Gr.huffmanTableDC),ln=Zr===0?0:dr(Zr)<<Wt;Yr[0]=Gr.pred+=ln}function nr(Gr,Yr){Yr[0]|=ur()<<Wt}var hr=0;function Dr(Gr,Yr){if(hr>0){hr--;return}for(var Zr=Qt,ln=kt;Zr<=ln;){var Hr=Ar(Gr.huffmanTableAC),rn=Hr&15,zt=Hr>>4;if(rn===0){if(zt<15){hr=mr(zt)+(1<<zt)-1;break}Zr+=16;continue}Zr+=zt;var br=d[Zr];Yr[br]=dr(rn)*(1<<Wt),Zr++}}var Qr=0,vr;function on(Gr,Yr){for(var Zr=Qt,ln=kt,Hr=0;Zr<=ln;){var rn=d[Zr],zt=Yr[rn]<0?-1:1;switch(Qr){case 0:var br=Ar(Gr.huffmanTableAC),Sr=br&15,Hr=br>>4;if(Sr===0)Hr<15?(hr=mr(Hr)+(1<<Hr),Qr=4):(Hr=16,Qr=1);else{if(Sr!==1)throw new Error("invalid ACn encoding");vr=dr(Sr),Qr=Hr?2:3}continue;case 1:case 2:Yr[rn]?Yr[rn]+=(ur()<<Wt)*zt:(Hr--,Hr===0&&(Qr=Qr==2?3:0));break;case 3:Yr[rn]?Yr[rn]+=(ur()<<Wt)*zt:(Yr[rn]=vr<<Wt,Qr=0);break;case 4:Yr[rn]&&(Yr[rn]+=(ur()<<Wt)*zt);break}Zr++}Qr===4&&(hr--,hr===0&&(Qr=0))}function en(Gr,Yr,Zr,ln,Hr){var rn=Zr/qt|0,zt=Zr%qt,br=rn*Gr.v+ln,Sr=zt*Gr.h+Hr;Gr.blocks[br]===void 0&&Vt.tolerantDecoding||Yr(Gr,Gr.blocks[br][Sr])}function zr(Gr,Yr,Zr){var ln=Zr/Gr.blocksPerLine|0,Hr=Zr%Gr.blocksPerLine;Gr.blocks[ln]===void 0&&Vt.tolerantDecoding||Yr(Gr,Gr.blocks[ln][Hr])}var or=Ct.length,xr,Wr,$r,Or,qr,fr;_e?Qt===0?fr=Nt===0?Ur:nr:fr=Nt===0?Dr:on:fr=Nr;var Kr=0,jr,Xr;or==1?Xr=Ct[0].blocksPerLine*Ct[0].blocksPerColumn:Xr=qt*bt.mcusPerColumn,Ut||(Ut=Xr);for(var Tr,An;Kr<Xr;){for(Wr=0;Wr<or;Wr++)Ct[Wr].pred=0;if(hr=0,or==1)for(xr=Ct[0],qr=0;qr<Ut;qr++)zr(xr,fr,Kr),Kr++;else for(qr=0;qr<Ut;qr++){for(Wr=0;Wr<or;Wr++)for(xr=Ct[Wr],Tr=xr.h,An=xr.v,$r=0;$r<An;$r++)for(Or=0;Or<Tr;Or++)en(xr,fr,Kr,$r,Or);if(Kr++,Kr===Xr)break}if(Kr===Xr)do{if(dt[xt]===255&&dt[xt+1]!==0)break;xt+=1}while(xt<dt.length-2);if(jt=0,jr=dt[xt]<<8|dt[xt+1],jr<65280)throw new Error("marker was not found");if(jr>=65488&&jr<=65495)xt+=2;else break}return xt-Jt}function ct(dt,xt){var bt=[],Ct=xt.blocksPerLine,Ut=xt.blocksPerColumn,Qt=Ct<<3,kt=new Int32Array(64),Nt=new Uint8Array(64);function Wt(mr,dr,Nr){var Ur=xt.quantizationTable,nr,hr,Dr,Qr,vr,on,en,zr,or,xr=Nr,Wr;for(Wr=0;Wr<64;Wr++)xr[Wr]=mr[Wr]*Ur[Wr];for(Wr=0;Wr<8;++Wr){var $r=8*Wr;if(xr[1+$r]==0&&xr[2+$r]==0&&xr[3+$r]==0&&xr[4+$r]==0&&xr[5+$r]==0&&xr[6+$r]==0&&xr[7+$r]==0){or=rt*xr[0+$r]+512>>10,xr[0+$r]=or,xr[1+$r]=or,xr[2+$r]=or,xr[3+$r]=or,xr[4+$r]=or,xr[5+$r]=or,xr[6+$r]=or,xr[7+$r]=or;continue}nr=rt*xr[0+$r]+128>>8,hr=rt*xr[4+$r]+128>>8,Dr=xr[2+$r],Qr=xr[6+$r],vr=at*(xr[1+$r]-xr[7+$r])+128>>8,zr=at*(xr[1+$r]+xr[7+$r])+128>>8,on=xr[3+$r]<<4,en=xr[5+$r]<<4,or=nr-hr+1>>1,nr=nr+hr+1>>1,hr=or,or=Dr*tt+Qr*et+128>>8,Dr=Dr*et-Qr*tt+128>>8,Qr=or,or=vr-en+1>>1,vr=vr+en+1>>1,en=or,or=zr+on+1>>1,on=zr-on+1>>1,zr=or,or=nr-Qr+1>>1,nr=nr+Qr+1>>1,Qr=or,or=hr-Dr+1>>1,hr=hr+Dr+1>>1,Dr=or,or=vr*j+zr*b+2048>>12,vr=vr*b-zr*j+2048>>12,zr=or,or=on*_+en*g+2048>>12,on=on*g-en*_+2048>>12,en=or,xr[0+$r]=nr+zr,xr[7+$r]=nr-zr,xr[1+$r]=hr+en,xr[6+$r]=hr-en,xr[2+$r]=Dr+on,xr[5+$r]=Dr-on,xr[3+$r]=Qr+vr,xr[4+$r]=Qr-vr}for(Wr=0;Wr<8;++Wr){var Or=Wr;if(xr[8+Or]==0&&xr[16+Or]==0&&xr[24+Or]==0&&xr[32+Or]==0&&xr[40+Or]==0&&xr[48+Or]==0&&xr[56+Or]==0){or=rt*Nr[Wr+0]+8192>>14,xr[0+Or]=or,xr[8+Or]=or,xr[16+Or]=or,xr[24+Or]=or,xr[32+Or]=or,xr[40+Or]=or,xr[48+Or]=or,xr[56+Or]=or;continue}nr=rt*xr[0+Or]+2048>>12,hr=rt*xr[32+Or]+2048>>12,Dr=xr[16+Or],Qr=xr[48+Or],vr=at*(xr[8+Or]-xr[56+Or])+2048>>12,zr=at*(xr[8+Or]+xr[56+Or])+2048>>12,on=xr[24+Or],en=xr[40+Or],or=nr-hr+1>>1,nr=nr+hr+1>>1,hr=or,or=Dr*tt+Qr*et+2048>>12,Dr=Dr*et-Qr*tt+2048>>12,Qr=or,or=vr-en+1>>1,vr=vr+en+1>>1,en=or,or=zr+on+1>>1,on=zr-on+1>>1,zr=or,or=nr-Qr+1>>1,nr=nr+Qr+1>>1,Qr=or,or=hr-Dr+1>>1,hr=hr+Dr+1>>1,Dr=or,or=vr*j+zr*b+2048>>12,vr=vr*b-zr*j+2048>>12,zr=or,or=on*_+en*g+2048>>12,on=on*g-en*_+2048>>12,en=or,xr[0+Or]=nr+zr,xr[56+Or]=nr-zr,xr[8+Or]=hr+en,xr[48+Or]=hr-en,xr[16+Or]=Dr+on,xr[40+Or]=Dr-on,xr[24+Or]=Qr+vr,xr[32+Or]=Qr-vr}for(Wr=0;Wr<64;++Wr){var qr=128+(xr[Wr]+8>>4);dr[Wr]=qr<0?0:qr>255?255:qr}}ft(Qt*Ut*8);for(var Vt,qt,_e=0;_e<Ut;_e++){var Jt=_e<<3;for(Vt=0;Vt<8;Vt++)bt.push(new Uint8Array(Qt));for(var lr=0;lr<Ct;lr++){Wt(xt.blocks[_e][lr],Nt,kt);var jt=0,ur=lr<<3;for(qt=0;qt<8;qt++){var Ar=bt[Jt+qt];for(Vt=0;Vt<8;Vt++)Ar[ur+Vt]=Nt[jt++]}}}return bt}function _t(dt){return dt<0?0:dt>255?255:dt}st.prototype={load:function(dt){var xt=new XMLHttpRequest;xt.open("GET",dt,!0),xt.responseType="arraybuffer",xt.onload=(function(){var bt=new Uint8Array(xt.response||xt.mozResponseArrayBuffer);this.parse(bt),this.onload&&this.onload()}).bind(this),xt.send(null)},parse:function(dt){var xt=this.opts.maxResolutionInMP*1e3*1e3,bt=0;dt.length;function Ct(){var rn=dt[bt]<<8|dt[bt+1];return bt+=2,rn}function Ut(){var rn=Ct(),zt=dt.subarray(bt,bt+rn-2);return bt+=zt.length,zt}function Qt(rn){var zt=1,br=1,Sr,kr;for(kr in rn.components)rn.components.hasOwnProperty(kr)&&(Sr=rn.components[kr],zt<Sr.h&&(zt=Sr.h),br<Sr.v&&(br=Sr.v));var ir=Math.ceil(rn.samplesPerLine/8/zt),Er=Math.ceil(rn.scanLines/8/br);for(kr in rn.components)if(rn.components.hasOwnProperty(kr)){Sr=rn.components[kr];var Lt=Math.ceil(Math.ceil(rn.samplesPerLine/8)*Sr.h/zt),Ir=Math.ceil(Math.ceil(rn.scanLines/8)*Sr.v/br),un=ir*Sr.h,yt=Er*Sr.v,_r=yt*un,yr=[];ft(_r*256);for(var Kt=0;Kt<yt;Kt++){for(var tr=[],pr=0;pr<un;pr++)tr.push(new Int32Array(64));yr.push(tr)}Sr.blocksPerLine=Lt,Sr.blocksPerColumn=Ir,Sr.blocks=yr}rn.maxH=zt,rn.maxV=br,rn.mcusPerLine=ir,rn.mcusPerColumn=Er}var kt=null,Nt=null,Wt,Vt,qt=[],_e=[],Jt=[],lr=[],jt=Ct(),ur=-1;if(this.comments=[],jt!=65496)throw new Error("SOI not found");for(jt=Ct();jt!=65497;){var Ar,mr;switch(jt){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var dr=Ut();if(jt===65534){var Nr=String.fromCharCode.apply(null,dr);this.comments.push(Nr)}jt===65504&&dr[0]===74&&dr[1]===70&&dr[2]===73&&dr[3]===70&&dr[4]===0&&(kt={version:{major:dr[5],minor:dr[6]},densityUnits:dr[7],xDensity:dr[8]<<8|dr[9],yDensity:dr[10]<<8|dr[11],thumbWidth:dr[12],thumbHeight:dr[13],thumbData:dr.subarray(14,14+3*dr[12]*dr[13])}),jt===65505&&dr[0]===69&&dr[1]===120&&dr[2]===105&&dr[3]===102&&dr[4]===0&&(this.exifBuffer=dr.subarray(5,dr.length)),jt===65518&&dr[0]===65&&dr[1]===100&&dr[2]===111&&dr[3]===98&&dr[4]===101&&dr[5]===0&&(Nt={version:dr[6],flags0:dr[7]<<8|dr[8],flags1:dr[9]<<8|dr[10],transformCode:dr[11]});break;case 65499:for(var Ur=Ct(),nr=Ur+bt-2;bt<nr;){var hr=dt[bt++];ft(256);var Dr=new Int32Array(64);if(hr>>4)if(hr>>4===1)for(mr=0;mr<64;mr++){var Qr=d[mr];Dr[Qr]=Ct()}else throw new Error("DQT: invalid table spec");else for(mr=0;mr<64;mr++){var Qr=d[mr];Dr[Qr]=dt[bt++]}qt[hr&15]=Dr}break;case 65472:case 65473:case 65474:Ct(),Wt={},Wt.extended=jt===65473,Wt.progressive=jt===65474,Wt.precision=dt[bt++],Wt.scanLines=Ct(),Wt.samplesPerLine=Ct(),Wt.components={},Wt.componentsOrder=[];var vr=Wt.scanLines*Wt.samplesPerLine;if(vr>xt){var on=Math.ceil((vr-xt)/1e6);throw new Error(`maxResolutionInMP limit exceeded by ${on}MP`)}var en=dt[bt++],zr;for(Ar=0;Ar<en;Ar++){zr=dt[bt];var or=dt[bt+1]>>4,xr=dt[bt+1]&15,Wr=dt[bt+2];if(or<=0||xr<=0)throw new Error("Invalid sampling factor, expected values above 0");Wt.componentsOrder.push(zr),Wt.components[zr]={h:or,v:xr,quantizationIdx:Wr},bt+=3}Qt(Wt),_e.push(Wt);break;case 65476:var $r=Ct();for(Ar=2;Ar<$r;){var Or=dt[bt++],qr=new Uint8Array(16),fr=0;for(mr=0;mr<16;mr++,bt++)fr+=qr[mr]=dt[bt];ft(16+fr);var Kr=new Uint8Array(fr);for(mr=0;mr<fr;mr++,bt++)Kr[mr]=dt[bt];Ar+=17+fr,(Or>>4?Jt:lr)[Or&15]=At(qr,Kr)}break;case 65501:Ct(),Vt=Ct();break;case 65500:Ct(),Ct();break;case 65498:Ct();var jr=dt[bt++],Xr=[],Tr;for(Ar=0;Ar<jr;Ar++){Tr=Wt.components[dt[bt++]];var An=dt[bt++];Tr.huffmanTableDC=lr[An>>4],Tr.huffmanTableAC=Jt[An&15],Xr.push(Tr)}var Gr=dt[bt++],Yr=dt[bt++],Zr=dt[bt++],ln=ht(dt,bt,Wt,Xr,Vt,Gr,Yr,Zr>>4,Zr&15,this.opts);bt+=ln;break;case 65535:dt[bt]!==255&&bt--;break;default:if(dt[bt-3]==255&&dt[bt-2]>=192&&dt[bt-2]<=254){bt-=3;break}else if(jt===224||jt==225){if(ur!==-1)throw new Error(`first unknown JPEG marker at offset ${ur.toString(16)}, second unknown JPEG marker ${jt.toString(16)} at offset ${(bt-1).toString(16)}`);ur=bt-1;const rn=Ct();if(dt[bt+rn-2]===255){bt+=rn-2;break}}throw new Error("unknown JPEG marker "+jt.toString(16))}jt=Ct()}if(_e.length!=1)throw new Error("only single frame JPEGs supported");for(var Ar=0;Ar<_e.length;Ar++){var Hr=_e[Ar].components;for(var mr in Hr)Hr[mr].quantizationTable=qt[Hr[mr].quantizationIdx],delete Hr[mr].quantizationIdx}this.width=Wt.samplesPerLine,this.height=Wt.scanLines,this.jfif=kt,this.adobe=Nt,this.components=[];for(var Ar=0;Ar<Wt.componentsOrder.length;Ar++){var Tr=Wt.components[Wt.componentsOrder[Ar]];this.components.push({lines:ct(Wt,Tr),scaleX:Tr.h/Wt.maxH,scaleY:Tr.v/Wt.maxV})}},getData:function(dt,xt){var bt=this.width/dt,Ct=this.height/xt,Ut,Qt,kt,Nt,Wt,Vt,qt,_e,Jt,lr,jt=0,ur,Ar,mr,dr,Nr,Ur,nr,hr,Dr,Qr,vr,on=dt*xt*this.components.length;ft(on);var en=new Uint8Array(on);switch(this.components.length){case 1:for(Ut=this.components[0],lr=0;lr<xt;lr++)for(Wt=Ut.lines[0|lr*Ut.scaleY*Ct],Jt=0;Jt<dt;Jt++)ur=Wt[0|Jt*Ut.scaleX*bt],en[jt++]=ur;break;case 2:for(Ut=this.components[0],Qt=this.components[1],lr=0;lr<xt;lr++)for(Wt=Ut.lines[0|lr*Ut.scaleY*Ct],Vt=Qt.lines[0|lr*Qt.scaleY*Ct],Jt=0;Jt<dt;Jt++)ur=Wt[0|Jt*Ut.scaleX*bt],en[jt++]=ur,ur=Vt[0|Jt*Qt.scaleX*bt],en[jt++]=ur;break;case 3:for(vr=!0,this.adobe&&this.adobe.transformCode?vr=!0:typeof this.opts.colorTransform<"u"&&(vr=!!this.opts.colorTransform),Ut=this.components[0],Qt=this.components[1],kt=this.components[2],lr=0;lr<xt;lr++)for(Wt=Ut.lines[0|lr*Ut.scaleY*Ct],Vt=Qt.lines[0|lr*Qt.scaleY*Ct],qt=kt.lines[0|lr*kt.scaleY*Ct],Jt=0;Jt<dt;Jt++)vr?(ur=Wt[0|Jt*Ut.scaleX*bt],Ar=Vt[0|Jt*Qt.scaleX*bt],mr=qt[0|Jt*kt.scaleX*bt],hr=_t(ur+1.402*(mr-128)),Dr=_t(ur-.3441363*(Ar-128)-.71413636*(mr-128)),Qr=_t(ur+1.772*(Ar-128))):(hr=Wt[0|Jt*Ut.scaleX*bt],Dr=Vt[0|Jt*Qt.scaleX*bt],Qr=qt[0|Jt*kt.scaleX*bt]),en[jt++]=hr,en[jt++]=Dr,en[jt++]=Qr;break;case 4:if(!this.adobe)throw new Error("Unsupported color mode (4 components)");for(vr=!1,this.adobe&&this.adobe.transformCode?vr=!0:typeof this.opts.colorTransform<"u"&&(vr=!!this.opts.colorTransform),Ut=this.components[0],Qt=this.components[1],kt=this.components[2],Nt=this.components[3],lr=0;lr<xt;lr++)for(Wt=Ut.lines[0|lr*Ut.scaleY*Ct],Vt=Qt.lines[0|lr*Qt.scaleY*Ct],qt=kt.lines[0|lr*kt.scaleY*Ct],_e=Nt.lines[0|lr*Nt.scaleY*Ct],Jt=0;Jt<dt;Jt++)vr?(ur=Wt[0|Jt*Ut.scaleX*bt],Ar=Vt[0|Jt*Qt.scaleX*bt],mr=qt[0|Jt*kt.scaleX*bt],dr=_e[0|Jt*Nt.scaleX*bt],Nr=255-_t(ur+1.402*(mr-128)),Ur=255-_t(ur-.3441363*(Ar-128)-.71413636*(mr-128)),nr=255-_t(ur+1.772*(Ar-128))):(Nr=Wt[0|Jt*Ut.scaleX*bt],Ur=Vt[0|Jt*Qt.scaleX*bt],nr=qt[0|Jt*kt.scaleX*bt],dr=_e[0|Jt*Nt.scaleX*bt]),en[jt++]=255-Nr,en[jt++]=255-Ur,en[jt++]=255-nr,en[jt++]=255-dr;break;default:throw new Error("Unsupported color mode")}return en},copyToImageData:function(dt,xt){var bt=dt.width,Ct=dt.height,Ut=dt.data,Qt=this.getData(bt,Ct),kt=0,Nt=0,Wt,Vt,qt,_e,Jt,lr,jt,ur,Ar;switch(this.components.length){case 1:for(Vt=0;Vt<Ct;Vt++)for(Wt=0;Wt<bt;Wt++)qt=Qt[kt++],Ut[Nt++]=qt,Ut[Nt++]=qt,Ut[Nt++]=qt,xt&&(Ut[Nt++]=255);break;case 3:for(Vt=0;Vt<Ct;Vt++)for(Wt=0;Wt<bt;Wt++)jt=Qt[kt++],ur=Qt[kt++],Ar=Qt[kt++],Ut[Nt++]=jt,Ut[Nt++]=ur,Ut[Nt++]=Ar,xt&&(Ut[Nt++]=255);break;case 4:for(Vt=0;Vt<Ct;Vt++)for(Wt=0;Wt<bt;Wt++)Jt=Qt[kt++],lr=Qt[kt++],qt=Qt[kt++],_e=Qt[kt++],jt=255-_t(Jt*(1-_e/255)+_e),ur=255-_t(lr*(1-_e/255)+_e),Ar=255-_t(qt*(1-_e/255)+_e),Ut[Nt++]=jt,Ut[Nt++]=ur,Ut[Nt++]=Ar,xt&&(Ut[Nt++]=255);break;default:throw new Error("Unsupported color mode")}}};var gt=0,wt=0;function ft(dt=0){var xt=gt+dt;if(xt>wt){var bt=Math.ceil((xt-wt)/1024/1024);throw new Error(`maxMemoryUsageInMB limit exceeded by at least ${bt}MB`)}gt=xt}return st.resetMaxMemoryUsage=function(dt){gt=0,wt=dt},st.getBytesAllocated=function(){return gt},st.requestMemoryAllocation=ft,st}();s.exports=h;function h(d,g={}){var _={colorTransform:void 0,useTArray:!1,formatAsRGBA:!0,tolerantDecoding:!0,maxResolutionInMP:100,maxMemoryUsageInMB:512},b={..._,...g},j=new Uint8Array(d),et=new o;et.opts=b,o.resetMaxMemoryUsage(b.maxMemoryUsageInMB*1024*1024),et.parse(j);var tt=b.formatAsRGBA?4:3,rt=et.width*et.height*tt;try{o.requestMemoryAllocation(rt);var at={width:et.width,height:et.height,exifBuffer:et.exifBuffer,data:b.useTArray?new Uint8Array(rt):Buffer.alloc(rt)};et.comments.length>0&&(at.comments=et.comments)}catch(st){throw st instanceof RangeError?new Error("Could not allocate enough memory for the image. Required: "+rt):st instanceof ReferenceError&&st.message==="Buffer is not defined"?new Error("Buffer is not globally defined in this environment. Consider setting useTArray to true"):st}return et.copyToImageData(at,b.formatAsRGBA),at}}(decoder)),decoder.exports}var jpegJs,hasRequiredJpegJs;function requireJpegJs(){if(hasRequiredJpegJs)return jpegJs;hasRequiredJpegJs=1;var s=requireEncoder(),o=requireDecoder();return jpegJs={encode:s,decode:o},jpegJs}var jpegJsExports=requireJpegJs();const jpeg=getDefaultExportFromCjs(jpegJsExports);let chars$4="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup$4=new Uint8Array(256);for(let s=0;s<chars$4.length;s++)lookup$4[chars$4.charCodeAt(s)]=s;function encode(s){let o,h=s.length,d="";for(o=0;o<h;o+=3)d+=chars$4[s[o]>>2],d+=chars$4[(s[o]&3)<<4|s[o+1]>>4],d+=chars$4[(s[o+1]&15)<<2|s[o+2]>>6],d+=chars$4[s[o+2]&63];return h%3===2?d=`${d.substring(0,d.length-1)}=`:h%3===1&&(d=`${d.substring(0,d.length-2)}==`),d}function decode$1$1(s){let o=s.length*.75,h=s.length,d=0,g,_,b,j;s[s.length-1]==="="&&(o--,s[s.length-2]==="="&&o--);const et=new Uint8Array(o);for(let tt=0;tt<h;tt+=4)g=lookup$4[s.charCodeAt(tt)],_=lookup$4[s.charCodeAt(tt+1)],b=lookup$4[s.charCodeAt(tt+2)],j=lookup$4[s.charCodeAt(tt+3)],et[d++]=g<<2|_>>4,et[d++]=(_&15)<<4|b>>2,et[d++]=(b&3)<<6|j&63;return et}function toBase64URL(s,o){const h=encode(s);return`data:${o};base64,${h}`}const ImageData$1=self.ImageData,DOMImage=self.Image;function createCanvas(s,o){let h=self.document.createElement("canvas");return h.width=s,h.height=o,h}function fetchBinary(s,{withCredentials:o=!1}={}){return new Promise(function(h,d){let g=new self.XMLHttpRequest;g.open("GET",s,!0),g.responseType="arraybuffer",g.withCredentials=o,g.onload=function(_){this.status!==200?d(_):h(this.response)},g.onerror=d,g.send()})}function createWriteStream(){throw new Error("createWriteStream does not exist in the browser")}function writeFile(){throw new Error("writeFile does not exist in the browser")}function getType(s){return s.includes("/")||(s=`image/${s}`),s}function encodeJpeg(s,o={}){const h={width:s.width,height:s.height,data:s.getRGBAData()};return jpegJsExports.encode(h,o.quality).data}function encodePng(s,o){const h={width:s.width,height:s.height,channels:s.channels,depth:s.bitDepth,data:s.data};return(h.depth===1||h.depth===32)&&(h.depth=8,h.channels=4,h.data=s.getRGBAData()),encodePng$1(h,o)}const exportMethods={save(s,o={}){const{useCanvas:h=!1,encoder:d=void 0}=o;let{format:g}=o;if(!g){const _=/\.(?<format>[a-zA-Z]+)$/.exec(s);_&&(g=_.groups.format.toLowerCase())}if(!g)throw new Error("file format not provided");return new Promise((_,b)=>{let j,et;switch(g.toLowerCase()){case"png":{h?j=this.getCanvas().pngStream():et=encodePng(this,d);break}case"jpg":case"jpeg":h?j=this.getCanvas().jpegStream():et=encodeJpeg(this,d);break;case"bmp":et=srcExports$3.encode(this,d);break;default:throw new RangeError(`invalid output format: ${g}`)}if(j){let tt=createWriteStream();tt.on("finish",_),tt.on("error",b),j.pipe(tt)}else et&&writeFile()})},toDataURL(s="image/png",o={}){typeof s=="object"&&(o=s,s="image/png");const{useCanvas:h=!1,encoder:d=void 0}=o;s=getType(s);function g(_,b){const j=_(b,d);return toBase64URL(j,s)}return s==="image/bmp"?g(srcExports$3.encode,this):s==="image/png"&&!h?g(encodePng,this):s==="image/jpeg"&&!h?g(encodeJpeg,this):this.getCanvas().toDataURL(s)},toBuffer(s={}){const{format:o="png",encoder:h=void 0}=s;switch(o.toLowerCase()){case"png":return encodePng(this,h);case"jpeg":case"jpg":return encodeJpeg(this,h);case"bmp":return srcExports$3.encode(this,h);default:throw new RangeError(`invalid output format: ${o}`)}},toBase64(s="image/png",o={}){if(o.async)return this.toDataURL(s,o).then(function(h){return h.substring(h.indexOf(",")+1)});{const h=this.toDataURL(s,o);return h.substring(h.indexOf(",")+1)}},toBlob(s="image/png",o=.8){return canvasToBlob(this.getCanvas(),s,o)},getCanvas(){const s=new ImageData$1(this.getRGBAData({clamped:!0}),this.width,this.height);let o=createCanvas(this.width,this.height);return o.getContext("2d").putImageData(s,0,0),o}};function setExportMethods(s){for(const o in exportMethods)s.prototype[o]=exportMethods[o]}var hasOwn$1={exports:{}};const version="1.0.1",require$$0$2={version};var hasRequiredHasOwn;function requireHasOwn(){return hasRequiredHasOwn||(hasRequiredHasOwn=1,function(s,o){var h=Object.prototype.hasOwnProperty;s.exports=o=function(d,g){return h.call(g,d)},o.version=require$$0$2.version}(hasOwn$1,hasOwn$1.exports)),hasOwn$1.exports}var hasOwnExports=requireHasOwn();const hasOwn=getDefaultExportFromCjs(hasOwnExports);let computedPropertyDescriptor$1={configurable:!0,enumerable:!1,get:void 0};function extendMethod(s,o,h={}){let{inPlace:d=!1,returnThis:g=!0,partialArgs:_=[]}=h;return d?Image$1.prototype[s]=function(...b){this.computed=null;let j=o.apply(this,[..._,...b]);return g?this:j}:Image$1.prototype[s]=function(...b){return o.apply(this,[..._,...b])},Image$1}function extendProperty(s,o,h={}){let{partialArgs:d=[]}=h;return computedPropertyDescriptor$1.get=function(){if(this.computed===null)this.computed={};else if(hasOwn(s,this.computed))return this.computed[s];let g=o.apply(this,d);return this.computed[s]=g,g},Object.defineProperty(Image$1.prototype,s,computedPropertyDescriptor$1),Image$1}const GREY$1="GREY",RGB$1="RGB",HSL="HSL",HSV="HSV",CMYK$1="CMYK",ColorModel=Object.freeze(Object.defineProperty({__proto__:null,CMYK:CMYK$1,GREY:GREY$1,HSL,HSV,RGB:RGB$1},Symbol.toStringTag,{value:"Module"}));function getRGBAData(s={}){const{clamped:o}=s;this.checkProcessable("getRGBAData",{components:[1,3],bitDepth:[1,8,16,32]});const h=this.width*this.height*4;let d=o?new Uint8ClampedArray(h):new Uint8Array(h);return this.bitDepth===1?fillDataFromBinary(this,d):this.bitDepth===32?(this.checkProcessable("getRGBAData",{alpha:0}),this.components===1?fillDataFromGrey32(this,d):this.components===3&&(this.checkProcessable("getRGBAData",{colorModel:[RGB$1]}),fillDataFromRGB32(this,d))):this.components===1?fillDataFromGrey(this,d):this.components===3&&(this.checkProcessable("getRGBAData",{colorModel:[RGB$1]}),fillDataFromRGB(this,d)),this.alpha===1?(this.checkProcessable("getRGBAData",{bitDepth:[8,16]}),copyAlpha(this,d)):fillAlpha(this,d),d}function fillDataFromBinary(s,o){for(let h=0;h<s.size;h++){const d=s.getBit(h);o[h*4]=d*255,o[h*4+1]=d*255,o[h*4+2]=d*255}}function fillDataFromGrey32(s,o){const h=s.min[0],d=s.max[0]-h;for(let g=0;g<s.size;g++){const _=Math.floor(255*(s.data[g]-h)/d);o[g*4]=_,o[g*4+1]=_,o[g*4+2]=_}}function fillDataFromRGB32(s,o){const h=Math.min(...s.min),d=Math.max(...s.max)-h;for(let g=0;g<s.size;g++){const _=Math.floor(255*(s.data[g*3]-h)/d),b=Math.floor(255*(s.data[g*3+1]-h)/d),j=Math.floor(255*(s.data[g*3+2]-h)/d);o[g*4]=_,o[g*4+1]=b,o[g*4+2]=j}}function fillDataFromGrey(s,o){for(let h=0;h<s.size;h++)o[h*4]=s.data[h*s.channels]>>>s.bitDepth-8,o[h*4+1]=s.data[h*s.channels]>>>s.bitDepth-8,o[h*4+2]=s.data[h*s.channels]>>>s.bitDepth-8}function fillDataFromRGB(s,o){for(let h=0;h<s.size;h++)o[h*4]=s.data[h*s.channels]>>>s.bitDepth-8,o[h*4+1]=s.data[h*s.channels+1]>>>s.bitDepth-8,o[h*4+2]=s.data[h*s.channels+2]>>>s.bitDepth-8}function copyAlpha(s,o){for(let h=0;h<s.size;h++)o[h*4+3]=s.data[h*s.channels+s.components]>>s.bitDepth-8}function fillAlpha(s,o){for(let h=0;h<s.size;h++)o[h*4+3]=255}const BINARY="BINARY",GREY="GREY",GREYA="GREYA",RGB="RGB",RGBA="RGBA",CMYK="CMYK",CMYKA="CMYKA",kinds={};kinds[BINARY]={components:1,alpha:0,bitDepth:1,colorModel:GREY$1};kinds[GREYA]={components:1,alpha:1,bitDepth:8,colorModel:GREY$1};kinds[GREY]={components:1,alpha:0,bitDepth:8,colorModel:GREY$1};kinds[RGBA]={components:3,alpha:1,bitDepth:8,colorModel:RGB$1};kinds[RGB]={components:3,alpha:0,bitDepth:8,colorModel:RGB$1};kinds[CMYK]={components:4,alpha:0,bitDepth:8,colorModel:CMYK$1};kinds[CMYKA]={components:4,alpha:1,bitDepth:8,colorModel:CMYK$1};function getKind(s){const o=kinds[s];if(!o)throw new RangeError(`invalid image kind: ${s}`);return o}const validBitDepth=[1,8,16,32];function verifyKindDefinition(s){const{components:o,alpha:h,bitDepth:d,colorModel:g}=s;if(!Number.isInteger(o)||o<=0)throw new RangeError(`invalid components: ${o}. Must be a positive integer`);if(h!==0&&h!==1&&typeof h!="boolean")throw new TypeError(`invalid alpha: ${h}: must be a boolean, 0 or 1`);if(!validBitDepth.includes(d))throw new RangeError(`invalid bitDepth: ${d}. Must be one of ${validBitDepth.join(", ")}`);if(!ColorModel[g])throw new RangeError(`invalid colorModel: ${g}. Must be one of ${Object.keys(ColorModel).join(", ")}`)}function getTheoreticalPixelArraySize(s,o,h){let d=o*s;return h===1&&(d=Math.ceil(d/8)),d}function createPixelArray(s,o,h,d,g,_){const b=d*s;let j;switch(g){case 1:j=new Uint8Array(Math.ceil(b/8));break;case 8:j=new Uint8Array(b);break;case 16:j=new Uint16Array(b);break;case 32:j=new Float32Array(b);break;default:throw new Error(`Cannot create pixel array for bit depth ${g}`)}if(h)for(let et=o;et<j.length;et+=d)j[et]=_;return j}var src$4={},IOBuffer_1,hasRequiredIOBuffer;function requireIOBuffer(){if(hasRequiredIOBuffer)return IOBuffer_1;hasRequiredIOBuffer=1;const s=1024*8,o=[];class h{constructor(g,_){_=_||{},g===void 0&&(g=s),typeof g=="number"&&(g=new ArrayBuffer(g));let b=g.byteLength;const j=_.offset?_.offset>>>0:0;g.buffer&&(b=g.byteLength-j,g.byteLength!==g.buffer.byteLength?g=g.buffer.slice(g.byteOffset+j,g.byteOffset+g.byteLength):j?g=g.buffer.slice(j):g=g.buffer),this.buffer=g,this.length=b,this.byteLength=b,this.byteOffset=0,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer),this._increment=b||s,this._mark=0}available(g){return g===void 0&&(g=1),this.offset+g<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){this.littleEndian=!0}isBigEndian(){return!this.littleEndian}setBigEndian(){this.littleEndian=!1}skip(g){g===void 0&&(g=1),this.offset+=g}seek(g){this.offset=g}mark(){this._mark=this.offset}reset(){this.offset=this._mark}rewind(){this.offset=0}ensureAvailable(g){if(g===void 0&&(g=1),!this.available(g)){const _=this._increment+this._increment;this._increment=_;const b=this.length+_,j=new Uint8Array(b);j.set(new Uint8Array(this.buffer)),this.buffer=j.buffer,this.length=b,this._data=new DataView(this.buffer)}}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(g){g===void 0&&(g=1);for(var _=new Uint8Array(g),b=0;b<g;b++)_[b]=this.readByte();return _}readInt16(){var g=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,g}readUint16(){var g=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,g}readInt32(){var g=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,g}readUint32(){var g=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,g}readFloat32(){var g=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,g}readFloat64(){var g=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,g}readChar(){return String.fromCharCode(this.readInt8())}readChars(g){g===void 0&&(g=1),o.length=g;for(var _=0;_<g;_++)o[_]=this.readChar();return o.join("")}writeBoolean(g){this.writeUint8(g?255:0)}writeInt8(g){this.ensureAvailable(1),this._data.setInt8(this.offset++,g)}writeUint8(g){this.ensureAvailable(1),this._data.setUint8(this.offset++,g)}writeByte(g){this.writeUint8(g)}writeBytes(g){this.ensureAvailable(g.length);for(var _=0;_<g.length;_++)this._data.setUint8(this.offset++,g[_])}writeInt16(g){this.ensureAvailable(2),this._data.setInt16(this.offset,g,this.littleEndian),this.offset+=2}writeUint16(g){this.ensureAvailable(2),this._data.setUint16(this.offset,g,this.littleEndian),this.offset+=2}writeInt32(g){this.ensureAvailable(4),this._data.setInt32(this.offset,g,this.littleEndian),this.offset+=4}writeUint32(g){this.ensureAvailable(4),this._data.setUint32(this.offset,g,this.littleEndian),this.offset+=4}writeFloat32(g){this.ensureAvailable(4),this._data.setFloat32(this.offset,g,this.littleEndian),this.offset+=4}writeFloat64(g){this.ensureAvailable(8),this._data.setFloat64(this.offset,g,this.littleEndian),this.offset+=8}writeChar(g){this.writeUint8(g.charCodeAt(0))}writeChars(g){for(var _=0;_<g.length;_++)this.writeUint8(g.charCodeAt(_))}toArray(){return new Uint8Array(this.buffer,0,this.offset)}}return IOBuffer_1=h,IOBuffer_1}var src$3={},standard$1,hasRequiredStandard;function requireStandard(){if(hasRequiredStandard)return standard$1;hasRequiredStandard=1;const s={254:"NewSubfileType",255:"SubfileType",256:"ImageWidth",257:"ImageLength",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",263:"Threshholding",264:"CellWidth",265:"CellLength",266:"FillOrder",270:"ImageDescription",271:"Make",272:"Model",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",280:"MinSampleValue",281:"MaxSampleValue",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",288:"FreeOffsets",289:"FreeByteCounts",290:"GrayResponseUnit",291:"GrayResponseCurve",296:"ResolutionUnit",305:"Software",306:"DateTime",315:"Artist",316:"HostComputer",320:"ColorMap",338:"ExtraSamples",33432:"Copyright",269:"DocumentName",285:"PageName",286:"XPosition",287:"YPosition",292:"T4Options",293:"T6Options",297:"PageNumber",301:"TransferFunction",317:"Predictor",318:"WhitePoint",319:"PrimaryChromaticities",321:"HalftoneHints",322:"TileWidth",323:"TileLength",324:"TileOffsets",325:"TileByteCounts",326:"BadFaxLines",327:"CleanFaxData",328:"ConsecutiveBadFaxLines",330:"SubIFDs",332:"InkSet",333:"InkNames",334:"NumberOfInks",336:"DotRange",337:"TargetPrinter",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",342:"TransferRange",343:"ClipPath",344:"XClipPathUnits",345:"YClipPathUnits",346:"Indexed",347:"JPEGTables",351:"OPIProxy",400:"GlobalParametersIFD",401:"ProfileType",402:"FaxProfile",403:"CodingMethods",404:"VersionYear",405:"ModeNumber",433:"Decode",434:"DefaultImageColor",512:"JPEGProc",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",515:"JPEGRestartInterval",517:"JPEGLosslessPredictors",518:"JPEGPointTransforms",519:"JPEGQTables",520:"JPEGDCTables",521:"JPEGACTables",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite",559:"StripRowCounts",700:"XMP",32781:"ImageID",34732:"ImageLayer",32932:"WangAnnotatio",33445:"MDFileTag",33446:"MDScalePixel",33447:"MDColorTable",33448:"MDLabName",33449:"MDSampleInfo",33450:"MDPrepDate",33451:"MDPrepTime",33452:"MDFileUnits",33550:"ModelPixelScaleTag",33723:"IPTC",33918:"INGRPacketDataTag",33919:"INGRFlagRegisters",33920:"IrasBTransformationMatrix",33922:"ModelTiepointTag",34264:"ModelTransformationTag",34377:"Photoshop",34665:"ExifIFD",34675:"ICCProfile",34735:"GeoKeyDirectoryTag",34736:"GeoDoubleParamsTag",34737:"GeoAsciiParamsTag",34853:"GPSIFD",34908:"HylaFAXFaxRecvParams",34909:"HylaFAXFaxSubAddress",34910:"HylaFAXFaxRecvTime",37724:"ImageSourceData",40965:"InteroperabilityIFD",42112:"GDAL_METADATA",42113:"GDAL_NODATA",50215:"OceScanjobDescription",50216:"OceApplicationSelector",50217:"OceIdentificationNumber",50218:"OceImageLogicCharacteristics",50706:"DNGVersion",50707:"DNGBackwardVersion",50708:"UniqueCameraModel",50709:"LocalizedCameraModel",50710:"CFAPlaneColor",50711:"CFALayout",50712:"LinearizationTable",50713:"BlackLevelRepeatDim",50714:"BlackLevel",50715:"BlackLevelDeltaH",50716:"BlackLevelDeltaV",50717:"WhiteLevel",50718:"DefaultScale",50719:"DefaultCropOrigin",50720:"DefaultCropSize",50721:"ColorMatrix1",50722:"ColorMatrix2",50723:"CameraCalibration1",50724:"CameraCalibration2",50725:"ReductionMatrix1",50726:"ReductionMatrix2",50727:"AnalogBalance",50728:"AsShotNeutral",50729:"AsShotWhiteXY",50730:"BaselineExposure",50731:"BaselineNoise",50732:"BaselineSharpness",50733:"BayerGreenSplit",50734:"LinearResponseLimit",50735:"CameraSerialNumber",50736:"LensInfo",50737:"ChromaBlurRadius",50738:"AntiAliasStrength",50740:"DNGPrivateData",50741:"MakerNoteSafety",50778:"CalibrationIlluminant1",50779:"CalibrationIlluminant2",50780:"BestQualityScale",50784:"AliasLayerMetadata"},o={};for(var h in s)o[s[h]]=h;return standard$1={tagsById:s,tagsByName:o},standard$1}var exif$1,hasRequiredExif;function requireExif(){if(hasRequiredExif)return exif$1;hasRequiredExif=1;const s={33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",36864:"ExifVersion",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBiasValue",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37386:"FocalLength",37396:"SubjectArea",37500:"MakerNote",37510:"UserComment",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",40964:"RelatedSoundFile",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",42240:"Gamma"},o={};for(var h in s)o[s[h]]=h;return exif$1={tagsById:s,tagsByName:o},exif$1}var gps$1,hasRequiredGps;function requireGps(){if(hasRequiredGps)return gps$1;hasRequiredGps=1;const s={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},o={};for(var h in s)o[s[h]]=h;return gps$1={tagsById:s,tagsByName:o},gps$1}var ifd,hasRequiredIfd;function requireIfd(){if(hasRequiredIfd)return ifd;hasRequiredIfd=1;const s={standard:requireStandard(),exif:requireExif(),gps:requireGps()};class o{constructor(d){if(!d)throw new Error("missing kind");this.data=null,this.fields=new Map,this.kind=d,this._map=null}get(d){if(typeof d=="number")return this.fields.get(d);if(typeof d=="string")return this.fields.get(s[this.kind].tagsByName[d]);throw new Error("expected a number or string")}get map(){if(!this._map){this._map={};const g=s[this.kind].tagsById;for(var d of this.fields.keys())g[d]&&(this._map[g[d]]=this.fields.get(d))}return this._map}}return ifd=o,ifd}var tiffIfd,hasRequiredTiffIfd;function requireTiffIfd(){if(hasRequiredTiffIfd)return tiffIfd;hasRequiredTiffIfd=1;const s=requireIfd(),o=/^(\d{4}):(\d{2}):(\d{2}) (\d{2}):(\d{2}):(\d{2})$/;class h extends s{constructor(){super("standard")}get size(){return this.width*this.height}get width(){return this.imageWidth}get height(){return this.imageLength}get components(){return this.samplesPerPixel}get date(){var _=new Date,b=o.exec(this.dateTime);return _.setFullYear(b[1],b[2]-1,b[3]),_.setHours(b[4],b[5],b[6]),_}get newSubfileType(){return this.get(254)}get imageWidth(){return this.get(256)}get imageLength(){return this.get(257)}get bitsPerSample(){return this.get(258)}get compression(){return this.get(259)||1}get type(){return this.get(262)}get fillOrder(){return this.get(266)||1}get documentName(){return this.get(269)}get imageDescription(){return this.get(270)}get stripOffsets(){return d(this.get(273))}get orientation(){return this.get(274)}get samplesPerPixel(){return this.get(277)}get rowsPerStrip(){return this.get(278)}get stripByteCounts(){return d(this.get(279))}get minSampleValue(){return this.get(280)||0}get maxSampleValue(){return this.get(281)||Math.pow(2,this.bitsPerSample)-1}get xResolution(){return this.get(282)}get yResolution(){return this.get(283)}get planarConfiguration(){return this.get(284)||1}get resolutionUnit(){return this.get(296)||2}get dateTime(){return this.get(306)}get predictor(){return this.get(317)||1}get sampleFormat(){return this.get(339)||1}get sMinSampleValue(){return this.get(340)||this.minSampleValue}get sMaxSampleValue(){return this.get(341)||this.maxSampleValue}}function d(g){return typeof g=="number"?[g]:g}return tiffIfd=h,tiffIfd}var ifdValue={},hasRequiredIfdValue;function requireIfdValue(){if(hasRequiredIfdValue)return ifdValue;hasRequiredIfdValue=1;var s=new Map([[1,[1,o]],[2,[1,h]],[3,[2,d]],[4,[4,g]],[5,[8,_]],[6,[1,b]],[7,[1,o]],[8,[2,j]],[9,[4,et]],[10,[8,tt]],[11,[4,rt]],[12,[8,at]]]);ifdValue.getByteLength=function(st,At){return s.get(st)[0]*At},ifdValue.readData=function(st,At,ht){return s.get(At)[1](st,ht)};function o(st,At){if(At===1)return st.readUint8();for(var ht=new Uint8Array(At),ct=0;ct<At;ct++)ht[ct]=st.readUint8();return ht}function h(st,At){for(var ht=[],ct="",_t=0;_t<At;_t++){var gt=String.fromCharCode(st.readUint8());gt==="\0"?(ht.push(ct),ct=""):ct+=gt}return ht.length===1?ht[0]:ht}function d(st,At){if(At===1)return st.readUint16();for(var ht=new Uint16Array(At),ct=0;ct<At;ct++)ht[ct]=st.readUint16();return ht}function g(st,At){if(At===1)return st.readUint32();for(var ht=new Uint32Array(At),ct=0;ct<At;ct++)ht[ct]=st.readUint32();return ht}function _(st,At){if(At===1)return st.readUint32()/st.readUint32();for(var ht=new Array(At),ct=0;ct<At;ct++)ht[ct]=st.readUint32()/st.readUint32();return ht}function b(st,At){if(At===1)return st.readInt8();for(var ht=new Int8Array(At),ct=0;ct<At;ct++)ht[ct]=st.readInt8();return ht}function j(st,At){if(At===1)return st.readInt16();for(var ht=new Int16Array(At),ct=0;ct<At;ct++)ht[ct]=st.readInt16();return ht}function et(st,At){if(At===1)return st.readInt32();for(var ht=new Int32Array(At),ct=0;ct<At;ct++)ht[ct]=st.readInt32();return ht}function tt(st,At){if(At===1)return st.readInt32()/st.readInt32();for(var ht=new Array(At),ct=0;ct<At;ct++)ht[ct]=st.readInt32()/st.readInt32();return ht}function rt(st,At){if(At===1)return st.readFloat32();for(var ht=new Float32Array(At),ct=0;ct<At;ct++)ht[ct]=st.readFloat32();return ht}function at(st,At){if(At===1)return st.readFloat64();for(var ht=new Float64Array(At),ct=0;ct<At;ct++)ht[ct]=st.readFloat64();return ht}return ifdValue}var tiffDecoder,hasRequiredTiffDecoder;function requireTiffDecoder(){if(hasRequiredTiffDecoder)return tiffDecoder;hasRequiredTiffDecoder=1;const s=requireIOBuffer(),o=requireIfd(),h=requireTiffIfd(),d=requireIfdValue(),g={ignoreImageData:!1,onlyFirst:!1};class _ extends s{constructor(At,ht){super(At,ht),this._nextIFD=0}decode(At){At=Object.assign({},g,At);const ht=[];for(this.decodeHeader();this._nextIFD;)if(ht.push(this.decodeIFD(At)),At.onlyFirst)return ht[0];return ht}decodeHeader(){let At=this.readUint16();if(At===18761)this.setLittleEndian();else if(At===19789)this.setBigEndian();else throw new Error("invalid byte order: 0x"+At.toString(16));if(At=this.readUint16(),At!==42)throw new Error("not a TIFF file");this._nextIFD=this.readUint32()}decodeIFD(At){this.seek(this._nextIFD);var ht;At.kind?ht=new o(At.kind):ht=new h;const ct=this.readUint16();for(var _t=0;_t<ct;_t++)this.decodeIFDEntry(ht);return At.ignoreImageData||this.decodeImageData(ht),this._nextIFD=this.readUint32(),ht}decodeIFDEntry(At){const ht=this.offset,ct=this.readUint16(),_t=this.readUint16(),gt=this.readUint32();if(_t<1||_t>12){this.skip(4);return}d.getByteLength(_t,gt)>4&&this.seek(this.readUint32());const wt=d.readData(this,_t,gt);if(At.fields.set(ct,wt),ct===34665||ct===34853){let ft=this.offset,dt;ct===34665?dt="exif":ct===34853&&(dt="gps"),this._nextIFD=wt,At[dt]=this.decodeIFD({kind:dt,ignoreImageData:!0}),this.offset=ft}this.seek(ht),this.skip(12)}decodeImageData(At){const ht=At.orientation;switch(ht&&ht!==1&&rt("orientation",ht),At.type){case 1:case 2:this.readStripData(At);break;default:rt("image type",At.type);break}}readStripData(At){const ht=At.width,ct=At.height,_t=at(At.bitsPerSample),gt=At.sampleFormat;let wt=ht*ct;const ft=b(wt,1,_t,gt),dt=At.compression,xt=At.rowsPerStrip*ht,bt=At.stripOffsets,Ct=At.stripByteCounts;for(var Ut=0,Qt=0;Qt<bt.length;Qt++){var kt=this.getStripData(dt,bt[Qt],Ct[Qt]),Nt=wt>xt?xt:wt;wt-=Nt,_t===8?Ut=j(ft,kt,Ut,Nt):_t===16?Ut=et(ft,kt,Ut,Nt,this.isLittleEndian()):_t===32&&gt===3?Ut=tt(ft,kt,Ut,Nt,this.isLittleEndian()):rt("bitDepth",_t)}At.data=ft}getStripData(At,ht,ct){switch(At){case 1:return new DataView(this.buffer,ht,ct);case 2:case 32773:return rt("Compression",At);default:throw new Error("invalid compression: "+At)}}}tiffDecoder=_;function b(st,At,ht,ct){return ht===8?new Uint8Array(st*At):ht===16?new Uint16Array(st*At):ht===32&&ct===3?new Float32Array(st*At):rt("bit depth / sample format",ht+" / "+ct)}function j(st,At,ht,ct){for(var _t=0;_t<ct;_t++)st[ht++]=At.getUint8(_t);return ht}function et(st,At,ht,ct,_t){for(var gt=0;gt<ct*2;gt+=2)st[ht++]=At.getUint16(gt,_t);return ht}function tt(st,At,ht,ct,_t){for(var gt=0;gt<ct*4;gt+=4)st[ht++]=At.getFloat32(gt,_t);return ht}function rt(st,At){throw new Error("Unsupported "+st+": "+At)}function at(st){if(st.length){const ht=st;st=ht[0];for(var At=0;At<ht.length;At++)ht[At]!==st&&rt("bit depth",ht)}return st}return tiffDecoder}var decode$3,hasRequiredDecode$1;function requireDecode$1(){if(hasRequiredDecode$1)return decode$3;hasRequiredDecode$1=1;const s=requireTiffDecoder();return decode$3=function(o,h){return new s(o,h).decode(h)},decode$3}var hasRequiredSrc$4;function requireSrc$4(){return hasRequiredSrc$4||(hasRequiredSrc$4=1,src$3.decode=requireDecode$1()),src$3}var decode_1,hasRequiredDecode;function requireDecode(){if(hasRequiredDecode)return decode_1;hasRequiredDecode=1;const s=requireIOBuffer(),o=requireSrc$4();function h(d){const g=new s(d),_={};if(g.setBigEndian(),g.readUint16()!==65496)throw new Error("SOI marker not found. Not a valid JPEG file");if(g.readUint16()===65505){g.readUint16();const b=g.readBytes(6);if(b[0]===69&&b[1]===120&&b[2]===105&&b[3]===102&&b[4]===0&&b[5]===0){const j=o.decode(g,{onlyFirst:!0,ignoreImageData:!0,offset:g.offset});_.exif=j}}return _}return decode_1=h,decode_1}var hasRequiredSrc$3;function requireSrc$3(){return hasRequiredSrc$3||(hasRequiredSrc$3=1,src$4.decode=requireDecode()),src$4}var srcExports$2=requireSrc$3(),imageType$1={exports:{}},fileType={exports:{}},hasRequiredFileType;function requireFileType(){return hasRequiredFileType||(hasRequiredFileType=1,function(module){const toBytes=s=>[...s].map(o=>o.charCodeAt(0)),xpiZipFilename=toBytes("META-INF/mozilla.rsa"),oxmlContentTypes=toBytes("[Content_Types].xml"),oxmlRels=toBytes("_rels/.rels");function readUInt64LE(s,o=0){let h=s[o],d=1,g=0;for(;++g<8;)d*=256,h+=s[o+g]*d;return h}const fileType=s=>{if(!(s instanceof Uint8Array||s instanceof ArrayBuffer||Buffer.isBuffer(s)))throw new TypeError(`Expected the \`input\` argument to be of type \`Uint8Array\` or \`Buffer\` or \`ArrayBuffer\`, got \`${typeof s}\``);const o=s instanceof Uint8Array?s:new Uint8Array(s);if(!(o&&o.length>1))return null;const h=(g,_)=>{_=Object.assign({offset:0},_);for(let b=0;b<g.length;b++)if(_.mask){if(g[b]!==(_.mask[b]&o[b+_.offset]))return!1}else if(g[b]!==o[b+_.offset])return!1;return!0},d=(g,_)=>h(toBytes(g),_);if(h([255,216,255]))return{ext:"jpg",mime:"image/jpeg"};if(h([137,80,78,71,13,10,26,10]))return{ext:"png",mime:"image/png"};if(h([71,73,70]))return{ext:"gif",mime:"image/gif"};if(h([87,69,66,80],{offset:8}))return{ext:"webp",mime:"image/webp"};if(h([70,76,73,70]))return{ext:"flif",mime:"image/flif"};if((h([73,73,42,0])||h([77,77,0,42]))&&h([67,82],{offset:8}))return{ext:"cr2",mime:"image/x-canon-cr2"};if(h([73,73,42,0])||h([77,77,0,42]))return{ext:"tif",mime:"image/tiff"};if(h([66,77]))return{ext:"bmp",mime:"image/bmp"};if(h([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(h([56,66,80,83]))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(h([80,75,3,4])){if(h([109,105,109,101,116,121,112,101,97,112,112,108,105,99,97,116,105,111,110,47,101,112,117,98,43,122,105,112],{offset:30}))return{ext:"epub",mime:"application/epub+zip"};if(h(xpiZipFilename,{offset:30}))return{ext:"xpi",mime:"application/x-xpinstall"};if(d("mimetypeapplication/vnd.oasis.opendocument.text",{offset:30}))return{ext:"odt",mime:"application/vnd.oasis.opendocument.text"};if(d("mimetypeapplication/vnd.oasis.opendocument.spreadsheet",{offset:30}))return{ext:"ods",mime:"application/vnd.oasis.opendocument.spreadsheet"};if(d("mimetypeapplication/vnd.oasis.opendocument.presentation",{offset:30}))return{ext:"odp",mime:"application/vnd.oasis.opendocument.presentation"};const g=(et,tt=0)=>et.findIndex((rt,at,st)=>at>=tt&&st[at]===80&&st[at+1]===75&&st[at+2]===3&&st[at+3]===4);let _=0,b=!1,j=null;do{const et=_+30;if(b||(b=h(oxmlContentTypes,{offset:et})||h(oxmlRels,{offset:et})),j||(d("word/",{offset:et})?j={ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"}:d("ppt/",{offset:et})?j={ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"}:d("xl/",{offset:et})&&(j={ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"})),b&&j)return j;_=g(o,et)}while(_>=0);if(j)return j}if(h([80,75])&&(o[2]===3||o[2]===5||o[2]===7)&&(o[3]===4||o[3]===6||o[3]===8))return{ext:"zip",mime:"application/zip"};if(h([117,115,116,97,114],{offset:257}))return{ext:"tar",mime:"application/x-tar"};if(h([82,97,114,33,26,7])&&(o[6]===0||o[6]===1))return{ext:"rar",mime:"application/x-rar-compressed"};if(h([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(h([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(h([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(h([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(h([51,103,112,53])||h([0,0,0])&&h([102,116,121,112],{offset:4})&&(h([109,112,52,49],{offset:8})||h([109,112,52,50],{offset:8})||h([105,115,111,109],{offset:8})||h([105,115,111,50],{offset:8})||h([109,109,112,52],{offset:8})||h([77,52,86],{offset:8})||h([100,97,115,104],{offset:8})))return{ext:"mp4",mime:"video/mp4"};if(h([77,84,104,100]))return{ext:"mid",mime:"audio/midi"};if(h([26,69,223,163])){const g=o.subarray(4,4100),_=g.findIndex((b,j,et)=>et[j]===66&&et[j+1]===130);if(_!==-1){const b=_+3,j=et=>[...et].every((tt,rt)=>g[b+rt]===tt.charCodeAt(0));if(j("matroska"))return{ext:"mkv",mime:"video/x-matroska"};if(j("webm"))return{ext:"webm",mime:"video/webm"}}}if(h([0,0,0,20,102,116,121,112,113,116,32,32])||h([102,114,101,101],{offset:4})||h([102,116,121,112,113,116,32,32],{offset:4})||h([109,100,97,116],{offset:4})||h([109,111,111,118],{offset:4})||h([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(h([82,73,70,70])){if(h([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(h([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/vnd.wave"};if(h([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(h([48,38,178,117,142,102,207,17,166,217])){let g=30;do{const _=readUInt64LE(o,g+16);if(h([145,7,220,183,183,169,207,17,142,230,0,192,12,32,83,101],{offset:g})){if(h([64,158,105,248,77,91,207,17,168,253,0,128,95,92,68,43],{offset:g+24}))return{ext:"wma",mime:"audio/x-ms-wma"};if(h([192,239,25,188,77,91,207,17,168,253,0,128,95,92,68,43],{offset:g+24}))return{ext:"wmv",mime:"video/x-ms-asf"};break}g+=_}while(g+24<=o.length);return{ext:"asf",mime:"application/vnd.ms-asf"}}if(h([0,0,1,186])||h([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(h([102,116,121,112,51,103],{offset:4}))return{ext:"3gp",mime:"video/3gpp"};for(let g=0;g<2&&g<o.length-16;g++){if(h([73,68,51],{offset:g})||h([255,226],{offset:g,mask:[255,226]}))return{ext:"mp3",mime:"audio/mpeg"};if(h([255,228],{offset:g,mask:[255,228]}))return{ext:"mp2",mime:"audio/mpeg"};if(h([255,248],{offset:g,mask:[255,252]}))return{ext:"mp2",mime:"audio/mpeg"};if(h([255,240],{offset:g,mask:[255,252]}))return{ext:"mp4",mime:"audio/mpeg"}}if(h([102,116,121,112,77,52,65],{offset:4}))return{ext:"m4a",mime:"audio/mp4"};if(h([79,112,117,115,72,101,97,100],{offset:28}))return{ext:"opus",mime:"audio/opus"};if(h([79,103,103,83]))return h([128,116,104,101,111,114,97],{offset:28})?{ext:"ogv",mime:"video/ogg"}:h([1,118,105,100,101,111,0],{offset:28})?{ext:"ogm",mime:"video/ogg"}:h([127,70,76,65,67],{offset:28})?{ext:"oga",mime:"audio/ogg"}:h([83,112,101,101,120,32,32],{offset:28})?{ext:"spx",mime:"audio/ogg"}:h([1,118,111,114,98,105,115],{offset:28})?{ext:"ogg",mime:"audio/ogg"}:{ext:"ogx",mime:"application/ogg"};if(h([102,76,97,67]))return{ext:"flac",mime:"audio/x-flac"};if(h([77,65,67,32]))return{ext:"ape",mime:"audio/ape"};if(h([119,118,112,107]))return{ext:"wv",mime:"audio/wavpack"};if(h([35,33,65,77,82,10]))return{ext:"amr",mime:"audio/amr"};if(h([37,80,68,70]))return{ext:"pdf",mime:"application/pdf"};if(h([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if((o[0]===67||o[0]===70)&&h([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(h([123,92,114,116,102]))return{ext:"rtf",mime:"application/rtf"};if(h([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(h([119,79,70,70])&&(h([0,1,0,0],{offset:4})||h([79,84,84,79],{offset:4})))return{ext:"woff",mime:"font/woff"};if(h([119,79,70,50])&&(h([0,1,0,0],{offset:4})||h([79,84,84,79],{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(h([76,80],{offset:34})&&(h([0,0,1],{offset:8})||h([1,0,2],{offset:8})||h([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(h([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(h([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(h([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(h([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(h([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(h([37,33]))return{ext:"ps",mime:"application/postscript"};if(h([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(h([83,81,76,105]))return{ext:"sqlite",mime:"application/x-sqlite3"};if(h([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(h([67,114,50,52]))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(h([77,83,67,70])||h([73,83,99,40]))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(h([33,60,97,114,99,104,62,10,100,101,98,105,97,110,45,98,105,110,97,114,121]))return{ext:"deb",mime:"application/x-deb"};if(h([33,60,97,114,99,104,62]))return{ext:"ar",mime:"application/x-unix-archive"};if(h([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(h([31,160])||h([31,157]))return{ext:"Z",mime:"application/x-compress"};if(h([76,90,73,80]))return{ext:"lz",mime:"application/x-lzip"};if(h([208,207,17,224,161,177,26,225]))return{ext:"msi",mime:"application/x-msi"};if(h([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(h([71],{offset:4})&&(h([71],{offset:192})||h([71],{offset:196})))return{ext:"mts",mime:"video/mp2t"};if(h([66,76,69,78,68,69,82]))return{ext:"blend",mime:"application/x-blender"};if(h([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(h([0,0,0,12,106,80,32,32,13,10,135,10])){if(h([106,112,50,32],{offset:20}))return{ext:"jp2",mime:"image/jp2"};if(h([106,112,120,32],{offset:20}))return{ext:"jpx",mime:"image/jpx"};if(h([106,112,109,32],{offset:20}))return{ext:"jpm",mime:"image/jpm"};if(h([109,106,112,50],{offset:20}))return{ext:"mj2",mime:"image/mj2"}}if(h([70,79,82,77]))return{ext:"aif",mime:"audio/aiff"};if(d("<?xml "))return{ext:"xml",mime:"application/xml"};if(h([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(h([102,116,121,112],{offset:4})){if(h([109,105,102,49],{offset:8}))return{ext:"heic",mime:"image/heif"};if(h([109,115,102,49],{offset:8}))return{ext:"heic",mime:"image/heif-sequence"};if(h([104,101,105,99],{offset:8})||h([104,101,105,120],{offset:8}))return{ext:"heic",mime:"image/heic"};if(h([104,101,118,99],{offset:8})||h([104,101,118,120],{offset:8}))return{ext:"heic",mime:"image/heic-sequence"}}return h([171,75,84,88,32,49,49,187,13,10,26,10])?{ext:"ktx",mime:"image/ktx"}:h([68,73,67,77],{offset:128})?{ext:"dcm",mime:"application/dicom"}:h([77,80,43])?{ext:"mpc",mime:"audio/x-musepack"}:h([77,80,67,75])?{ext:"mpc",mime:"audio/x-musepack"}:h([66,69,71,73,78,58])?{ext:"ics",mime:"text/calendar"}:h([103,108,84,70,2,0,0,0])?{ext:"glb",mime:"model/gltf-binary"}:h([212,195,178,161])||h([161,178,195,212])?{ext:"pcap",mime:"application/vnd.tcpdump.pcap"}:null};module.exports=fileType,module.exports.default=fileType,Object.defineProperty(fileType,"minimumBytes",{value:4100}),module.exports.stream=readableStream=>new Promise((resolve,reject)=>{const stream=eval("require")("stream");readableStream.once("readable",()=>{const s=new stream.PassThrough,o=readableStream.read(module.exports.minimumBytes)||readableStream.read();try{s.fileType=fileType(o)}catch(h){reject(h)}readableStream.unshift(o),stream.pipeline?resolve(stream.pipeline(readableStream,s,()=>{})):resolve(readableStream.pipe(s))})})}(fileType)),fileType.exports}var hasRequiredImageType;function requireImageType(){if(hasRequiredImageType)return imageType$1.exports;hasRequiredImageType=1;const s=requireFileType(),o=new Set(["jpg","png","gif","webp","flif","cr2","tif","bmp","jxr","psd","ico","bpg","jp2","jpm","jpx","heic","cur","dcm"]),h=d=>{const g=s(d);return o.has(g&&g.ext)?g:null};return imageType$1.exports=h,imageType$1.exports.default=h,Object.defineProperty(h,"minimumBytes",{value:s.minimumBytes}),imageType$1.exports}var imageTypeExports=requireImageType();const imageType=getDefaultExportFromCjs(imageTypeExports);function guessStripByteCounts(s){if(s.compression!==1)throw new Error("missing mandatory StripByteCounts field in compressed image");const o=s.rowsPerStrip*s.width*s.samplesPerPixel*(s.bitsPerSample/8);return new Array(s.stripOffsets.length).fill(o)}function applyHorizontalDifferencing8Bit(s,o,h){let d=0;for(;d<s.length;){for(let g=h;g<o*h;g+=h)for(let _=0;_<h;_++)s[d+g+_]=s[d+g+_]+s[d+g-(h-_)]&255;d+=o*h}}function applyHorizontalDifferencing16Bit(s,o,h){let d=0;for(;d<s.length;){for(let g=h;g<o*h;g+=h)for(let _=0;_<h;_++)s[d+g+_]=s[d+g+_]+s[d+g-(h-_)]&65535;d+=o*h}}const tagsById$2={33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",36864:"ExifVersion",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBiasValue",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37386:"FocalLength",37396:"SubjectArea",37500:"MakerNote",37510:"UserComment",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",40964:"RelatedSoundFile",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",42240:"Gamma"},tagsByName$2={};for(let s in tagsById$2)tagsByName$2[tagsById$2[s]]=Number(s);const exif=Object.freeze(Object.defineProperty({__proto__:null,tagsById:tagsById$2,tagsByName:tagsByName$2},Symbol.toStringTag,{value:"Module"})),tagsById$1={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},tagsByName$1={};for(let s in tagsById$1)tagsByName$1[tagsById$1[s]]=Number(s);const gps=Object.freeze(Object.defineProperty({__proto__:null,tagsById:tagsById$1,tagsByName:tagsByName$1},Symbol.toStringTag,{value:"Module"})),tagsById={254:"NewSubfileType",255:"SubfileType",256:"ImageWidth",257:"ImageLength",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",263:"Threshholding",264:"CellWidth",265:"CellLength",266:"FillOrder",270:"ImageDescription",271:"Make",272:"Model",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",280:"MinSampleValue",281:"MaxSampleValue",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",288:"FreeOffsets",289:"FreeByteCounts",290:"GrayResponseUnit",291:"GrayResponseCurve",296:"ResolutionUnit",305:"Software",306:"DateTime",315:"Artist",316:"HostComputer",320:"ColorMap",338:"ExtraSamples",33432:"Copyright",269:"DocumentName",285:"PageName",286:"XPosition",287:"YPosition",292:"T4Options",293:"T6Options",297:"PageNumber",301:"TransferFunction",317:"Predictor",318:"WhitePoint",319:"PrimaryChromaticities",321:"HalftoneHints",322:"TileWidth",323:"TileLength",324:"TileOffsets",325:"TileByteCounts",326:"BadFaxLines",327:"CleanFaxData",328:"ConsecutiveBadFaxLines",330:"SubIFDs",332:"InkSet",333:"InkNames",334:"NumberOfInks",336:"DotRange",337:"TargetPrinter",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",342:"TransferRange",343:"ClipPath",344:"XClipPathUnits",345:"YClipPathUnits",346:"Indexed",347:"JPEGTables",351:"OPIProxy",400:"GlobalParametersIFD",401:"ProfileType",402:"FaxProfile",403:"CodingMethods",404:"VersionYear",405:"ModeNumber",433:"Decode",434:"DefaultImageColor",512:"JPEGProc",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",515:"JPEGRestartInterval",517:"JPEGLosslessPredictors",518:"JPEGPointTransforms",519:"JPEGQTables",520:"JPEGDCTables",521:"JPEGACTables",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite",559:"StripRowCounts",700:"XMP",32781:"ImageID",34732:"ImageLayer",32932:"WangAnnotatio",33445:"MDFileTag",33446:"MDScalePixel",33447:"MDColorTable",33448:"MDLabName",33449:"MDSampleInfo",33450:"MDPrepDate",33451:"MDPrepTime",33452:"MDFileUnits",33550:"ModelPixelScaleTag",33723:"IPTC",33918:"INGRPacketDataTag",33919:"INGRFlagRegisters",33920:"IrasBTransformationMatrix",33922:"ModelTiepointTag",34264:"ModelTransformationTag",34377:"Photoshop",34665:"ExifIFD",34675:"ICCProfile",34735:"GeoKeyDirectoryTag",34736:"GeoDoubleParamsTag",34737:"GeoAsciiParamsTag",34853:"GPSIFD",34908:"HylaFAXFaxRecvParams",34909:"HylaFAXFaxSubAddress",34910:"HylaFAXFaxRecvTime",37724:"ImageSourceData",40965:"InteroperabilityIFD",42112:"GDAL_METADATA",42113:"GDAL_NODATA",50215:"OceScanjobDescription",50216:"OceApplicationSelector",50217:"OceIdentificationNumber",50218:"OceImageLogicCharacteristics",50706:"DNGVersion",50707:"DNGBackwardVersion",50708:"UniqueCameraModel",50709:"LocalizedCameraModel",50710:"CFAPlaneColor",50711:"CFALayout",50712:"LinearizationTable",50713:"BlackLevelRepeatDim",50714:"BlackLevel",50715:"BlackLevelDeltaH",50716:"BlackLevelDeltaV",50717:"WhiteLevel",50718:"DefaultScale",50719:"DefaultCropOrigin",50720:"DefaultCropSize",50721:"ColorMatrix1",50722:"ColorMatrix2",50723:"CameraCalibration1",50724:"CameraCalibration2",50725:"ReductionMatrix1",50726:"ReductionMatrix2",50727:"AnalogBalance",50728:"AsShotNeutral",50729:"AsShotWhiteXY",50730:"BaselineExposure",50731:"BaselineNoise",50732:"BaselineSharpness",50733:"BayerGreenSplit",50734:"LinearResponseLimit",50735:"CameraSerialNumber",50736:"LensInfo",50737:"ChromaBlurRadius",50738:"AntiAliasStrength",50740:"DNGPrivateData",50741:"MakerNoteSafety",50778:"CalibrationIlluminant1",50779:"CalibrationIlluminant2",50780:"BestQualityScale",50784:"AliasLayerMetadata"},tagsByName={};for(let s in tagsById)tagsByName[tagsById[s]]=Number(s);const standard=Object.freeze(Object.defineProperty({__proto__:null,tagsById,tagsByName},Symbol.toStringTag,{value:"Module"})),tags={standard,exif,gps};class IFD{constructor(o){if(!o)throw new Error("missing kind");this.data=new Uint8Array,this.fields=new Map,this.kind=o,this._hasMap=!1,this._map={}}get(o){if(typeof o=="number")return this.fields.get(o);if(typeof o=="string")return this.fields.get(tags[this.kind].tagsByName[o]);throw new Error("expected a number or string")}get map(){if(!this._hasMap){const o=tags[this.kind].tagsById;for(let h of this.fields.keys())o[h]&&(this._map[o[h]]=this.fields.get(h));this._hasMap=!0}return this._map}}let types=new Map([[1,[1,readByte]],[2,[1,readASCII]],[3,[2,readShort]],[4,[4,readLong]],[5,[8,readRational]],[6,[1,readSByte]],[7,[1,readByte]],[8,[2,readSShort]],[9,[4,readSLong]],[10,[8,readSRational]],[11,[4,readFloat]],[12,[8,readDouble]]]);function getByteLength(s,o){const h=types.get(s);if(!h)throw new Error(`type not found: ${s}`);return h[0]*o}function readData(s,o,h){const d=types.get(o);if(!d)throw new Error(`type not found: ${o}`);return d[1](s,h)}function readByte(s,o){if(o===1)return s.readUint8();let h=new Uint8Array(o);for(let d=0;d<o;d++)h[d]=s.readUint8();return h}function readASCII(s,o){let h=[],d="";for(let g=0;g<o;g++){let _=String.fromCharCode(s.readUint8());_==="\0"?(h.push(d),d=""):d+=_}return h.length===1?h[0]:h}function readShort(s,o){if(o===1)return s.readUint16();let h=new Uint16Array(o);for(let d=0;d<o;d++)h[d]=s.readUint16();return h}function readLong(s,o){if(o===1)return s.readUint32();let h=new Uint32Array(o);for(let d=0;d<o;d++)h[d]=s.readUint32();return h}function readRational(s,o){if(o===1)return s.readUint32()/s.readUint32();let h=new Array(o);for(let d=0;d<o;d++)h[d]=s.readUint32()/s.readUint32();return h}function readSByte(s,o){if(o===1)return s.readInt8();let h=new Int8Array(o);for(let d=0;d<o;d++)h[d]=s.readInt8();return h}function readSShort(s,o){if(o===1)return s.readInt16();let h=new Int16Array(o);for(let d=0;d<o;d++)h[d]=s.readInt16();return h}function readSLong(s,o){if(o===1)return s.readInt32();let h=new Int32Array(o);for(let d=0;d<o;d++)h[d]=s.readInt32();return h}function readSRational(s,o){if(o===1)return s.readInt32()/s.readInt32();let h=new Array(o);for(let d=0;d<o;d++)h[d]=s.readInt32()/s.readInt32();return h}function readFloat(s,o){if(o===1)return s.readFloat32();let h=new Float32Array(o);for(let d=0;d<o;d++)h[d]=s.readFloat32();return h}function readDouble(s,o){if(o===1)return s.readFloat64();let h=new Float64Array(o);for(let d=0;d<o;d++)h[d]=s.readFloat64();return h}const CLEAR_CODE=256,EOI_CODE=257,TABLE_START=258,MIN_BIT_LENGTH=9;let stringTable=[];function initializeStringTable(){if(stringTable.length===0){for(let o=0;o<256;o++)stringTable.push([o]);const s=[];for(let o=256;o<4096;o++)stringTable.push(s)}}const andTable=[511,1023,2047,4095],bitJumps=[0,0,0,0,0,0,0,0,0,511,1023,2047,4095];class LzwDecoder{constructor(o){this.nextData=0,this.nextBits=0,this.bytePointer=0,this.tableLength=TABLE_START,this.currentBitLength=MIN_BIT_LENGTH,this.stripArray=new Uint8Array(o.buffer,o.byteOffset,o.byteLength),this.outData=new IOBuffer(o.byteLength),this.initializeTable()}decode(){let o=0,h=0;for(;(o=this.getNextCode())!==EOI_CODE;)if(o===CLEAR_CODE){if(this.initializeTable(),o=this.getNextCode(),o===EOI_CODE)break;this.writeString(this.stringFromCode(o)),h=o}else if(this.isInTable(o))this.writeString(this.stringFromCode(o)),this.addStringToTable(this.stringFromCode(h).concat(this.stringFromCode(o)[0])),h=o;else{const g=this.stringFromCode(h).concat(this.stringFromCode(h)[0]);this.writeString(g),this.addStringToTable(g),h=o}const d=this.outData.toArray();return new DataView(d.buffer,d.byteOffset,d.byteLength)}initializeTable(){initializeStringTable(),this.tableLength=TABLE_START,this.currentBitLength=MIN_BIT_LENGTH}writeString(o){this.outData.writeBytes(o)}stringFromCode(o){return stringTable[o]}isInTable(o){return o<this.tableLength}addStringToTable(o){if(stringTable[this.tableLength++]=o,stringTable.length>4096)throw stringTable=[],new Error("LZW decoding error. Please open an issue at https://github.com/image-js/tiff/issues/new/choose (include a test image).");this.tableLength===bitJumps[this.currentBitLength]&&this.currentBitLength++}getNextCode(){this.nextData=this.nextData<<8|this.stripArray[this.bytePointer++]&255,this.nextBits+=8,this.nextBits<this.currentBitLength&&(this.nextData=this.nextData<<8|this.stripArray[this.bytePointer++]&255,this.nextBits+=8);const o=this.nextData>>this.nextBits-this.currentBitLength&andTable[this.currentBitLength-9];return this.nextBits-=this.currentBitLength,this.bytePointer>this.stripArray.length?257:o}}function decompressLzw(s){return new LzwDecoder(s).decode()}const dateTimeRegex=/^(\d{4}):(\d{2}):(\d{2}) (\d{2}):(\d{2}):(\d{2})$/;class TiffIfd extends IFD{constructor(){super("standard")}get size(){return this.width*this.height}get width(){return this.imageWidth}get height(){return this.imageLength}get components(){return this.samplesPerPixel}get date(){let o=new Date,h=dateTimeRegex.exec(this.dateTime);if(h===null)throw new Error(`invalid dateTime: ${this.dateTime}`);return o.setFullYear(Number(h[1]),Number(h[2])-1,Number(h[3])),o.setHours(Number(h[4]),Number(h[5]),Number(h[6])),o}get newSubfileType(){return this.get("NewSubfileType")}get imageWidth(){return this.get("ImageWidth")}get imageLength(){return this.get("ImageLength")}get bitsPerSample(){const o=this.get("BitsPerSample");return o&&typeof o!="number"?o[0]:o}get alpha(){const o=this.extraSamples;return o?o[0]!==0:!1}get associatedAlpha(){const o=this.extraSamples;return o?o[0]===1:!1}get extraSamples(){return alwaysArray(this.get("ExtraSamples"))}get compression(){return this.get("Compression")||1}get type(){return this.get("PhotometricInterpretation")}get fillOrder(){return this.get("FillOrder")||1}get documentName(){return this.get("DocumentName")}get imageDescription(){return this.get("ImageDescription")}get stripOffsets(){return alwaysArray(this.get("StripOffsets"))}get orientation(){return this.get("Orientation")}get samplesPerPixel(){return this.get("SamplesPerPixel")||1}get rowsPerStrip(){return this.get("RowsPerStrip")}get stripByteCounts(){return alwaysArray(this.get("StripByteCounts"))}get minSampleValue(){return this.get("MinSampleValue")||0}get maxSampleValue(){return this.get("MaxSampleValue")||Math.pow(2,this.bitsPerSample)-1}get xResolution(){return this.get("XResolution")}get yResolution(){return this.get("YResolution")}get planarConfiguration(){return this.get("PlanarConfiguration")||1}get resolutionUnit(){return this.get("ResolutionUnit")||2}get dateTime(){return this.get("DateTime")}get predictor(){return this.get("Predictor")||1}get sampleFormat(){return this.get("SampleFormat")||1}get sMinSampleValue(){return this.get("SMinSampleValue")||this.minSampleValue}get sMaxSampleValue(){return this.get("SMaxSampleValue")||this.maxSampleValue}get palette(){const o=2**this.bitsPerSample,h=this.get("ColorMap");if(!h)return;if(h.length!==3*o)throw new Error(`ColorMap size must be ${o}`);const d=[];for(let g=0;g<o;g++)d.push([h[g],h[g+o],h[g+2*o]]);return d}}function alwaysArray(s){return typeof s=="number"?[s]:s}function zero$1(s){let o=s.length;for(;--o>=0;)s[o]=0}const MIN_MATCH$1=3,MAX_MATCH$1=258,LENGTH_CODES$1=29,LITERALS$1=256,L_CODES$1=LITERALS$1+1+LENGTH_CODES$1,D_CODES$1=30,DIST_CODE_LEN=512,static_ltree=new Array((L_CODES$1+2)*2);zero$1(static_ltree);const static_dtree=new Array(D_CODES$1*2);zero$1(static_dtree);const _dist_code=new Array(DIST_CODE_LEN);zero$1(_dist_code);const _length_code=new Array(MAX_MATCH$1-MIN_MATCH$1+1);zero$1(_length_code);const base_length=new Array(LENGTH_CODES$1);zero$1(base_length);const base_dist=new Array(D_CODES$1);zero$1(base_dist);const adler32=(s,o,h,d)=>{let g=s&65535|0,_=s>>>16&65535|0,b=0;for(;h!==0;){b=h>2e3?2e3:h,h-=b;do g=g+o[d++]|0,_=_+g|0;while(--b);g%=65521,_%=65521}return g|_<<16|0};var adler32_1$1=adler32;const makeTable=()=>{let s,o=[];for(var h=0;h<256;h++){s=h;for(var d=0;d<8;d++)s=s&1?3988292384^s>>>1:s>>>1;o[h]=s}return o},crcTable=new Uint32Array(makeTable()),crc32=(s,o,h,d)=>{const g=crcTable,_=d+h;s^=-1;for(let b=d;b<_;b++)s=s>>>8^g[(s^o[b])&255];return s^-1};var crc32_1$1=crc32,messages$1={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},constants$2={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const _has=(s,o)=>Object.prototype.hasOwnProperty.call(s,o);var assign=function(s){const o=Array.prototype.slice.call(arguments,1);for(;o.length;){const h=o.shift();if(h){if(typeof h!="object")throw new TypeError(h+"must be non-object");for(const d in h)_has(h,d)&&(s[d]=h[d])}}return s},flattenChunks=s=>{let o=0;for(let d=0,g=s.length;d<g;d++)o+=s[d].length;const h=new Uint8Array(o);for(let d=0,g=0,_=s.length;d<_;d++){let b=s[d];h.set(b,g),g+=b.length}return h},common$1={assign,flattenChunks};let STR_APPLY_UIA_OK=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(s){STR_APPLY_UIA_OK=!1}const _utf8len=new Uint8Array(256);for(let s=0;s<256;s++)_utf8len[s]=s>=252?6:s>=248?5:s>=240?4:s>=224?3:s>=192?2:1;_utf8len[254]=_utf8len[254]=1;var string2buf=s=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(s);let o,h,d,g,_,b=s.length,j=0;for(g=0;g<b;g++)h=s.charCodeAt(g),(h&64512)===55296&&g+1<b&&(d=s.charCodeAt(g+1),(d&64512)===56320&&(h=65536+(h-55296<<10)+(d-56320),g++)),j+=h<128?1:h<2048?2:h<65536?3:4;for(o=new Uint8Array(j),_=0,g=0;_<j;g++)h=s.charCodeAt(g),(h&64512)===55296&&g+1<b&&(d=s.charCodeAt(g+1),(d&64512)===56320&&(h=65536+(h-55296<<10)+(d-56320),g++)),h<128?o[_++]=h:h<2048?(o[_++]=192|h>>>6,o[_++]=128|h&63):h<65536?(o[_++]=224|h>>>12,o[_++]=128|h>>>6&63,o[_++]=128|h&63):(o[_++]=240|h>>>18,o[_++]=128|h>>>12&63,o[_++]=128|h>>>6&63,o[_++]=128|h&63);return o};const buf2binstring=(s,o)=>{if(o<65534&&s.subarray&&STR_APPLY_UIA_OK)return String.fromCharCode.apply(null,s.length===o?s:s.subarray(0,o));let h="";for(let d=0;d<o;d++)h+=String.fromCharCode(s[d]);return h};var buf2string=(s,o)=>{const h=o||s.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(s.subarray(0,o));let d,g;const _=new Array(h*2);for(g=0,d=0;d<h;){let b=s[d++];if(b<128){_[g++]=b;continue}let j=_utf8len[b];if(j>4){_[g++]=65533,d+=j-1;continue}for(b&=j===2?31:j===3?15:7;j>1&&d<h;)b=b<<6|s[d++]&63,j--;if(j>1){_[g++]=65533;continue}b<65536?_[g++]=b:(b-=65536,_[g++]=55296|b>>10&1023,_[g++]=56320|b&1023)}return buf2binstring(_,g)},utf8border=(s,o)=>{o=o||s.length,o>s.length&&(o=s.length);let h=o-1;for(;h>=0&&(s[h]&192)===128;)h--;return h<0||h===0?o:h+_utf8len[s[h]]>o?h:o},strings$1={string2buf,buf2string,utf8border};function ZStream(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var zstream$1=ZStream;const BAD$1=16209,TYPE$1=16191;var inffast$1=function s(o,h){let d,g,_,b,j,et,tt,rt,at,st,At,ht,ct,_t,gt,wt,ft,dt,xt,bt,Ct,Ut,Qt,kt;const Nt=o.state;d=o.next_in,Qt=o.input,g=d+(o.avail_in-5),_=o.next_out,kt=o.output,b=_-(h-o.avail_out),j=_+(o.avail_out-257),et=Nt.dmax,tt=Nt.wsize,rt=Nt.whave,at=Nt.wnext,st=Nt.window,At=Nt.hold,ht=Nt.bits,ct=Nt.lencode,_t=Nt.distcode,gt=(1<<Nt.lenbits)-1,wt=(1<<Nt.distbits)-1;t:do{ht<15&&(At+=Qt[d++]<<ht,ht+=8,At+=Qt[d++]<<ht,ht+=8),ft=ct[At&gt];e:for(;;){if(dt=ft>>>24,At>>>=dt,ht-=dt,dt=ft>>>16&255,dt===0)kt[_++]=ft&65535;else if(dt&16){xt=ft&65535,dt&=15,dt&&(ht<dt&&(At+=Qt[d++]<<ht,ht+=8),xt+=At&(1<<dt)-1,At>>>=dt,ht-=dt),ht<15&&(At+=Qt[d++]<<ht,ht+=8,At+=Qt[d++]<<ht,ht+=8),ft=_t[At&wt];r:for(;;){if(dt=ft>>>24,At>>>=dt,ht-=dt,dt=ft>>>16&255,dt&16){if(bt=ft&65535,dt&=15,ht<dt&&(At+=Qt[d++]<<ht,ht+=8,ht<dt&&(At+=Qt[d++]<<ht,ht+=8)),bt+=At&(1<<dt)-1,bt>et){o.msg="invalid distance too far back",Nt.mode=BAD$1;break t}if(At>>>=dt,ht-=dt,dt=_-b,bt>dt){if(dt=bt-dt,dt>rt&&Nt.sane){o.msg="invalid distance too far back",Nt.mode=BAD$1;break t}if(Ct=0,Ut=st,at===0){if(Ct+=tt-dt,dt<xt){xt-=dt;do kt[_++]=st[Ct++];while(--dt);Ct=_-bt,Ut=kt}}else if(at<dt){if(Ct+=tt+at-dt,dt-=at,dt<xt){xt-=dt;do kt[_++]=st[Ct++];while(--dt);if(Ct=0,at<xt){dt=at,xt-=dt;do kt[_++]=st[Ct++];while(--dt);Ct=_-bt,Ut=kt}}}else if(Ct+=at-dt,dt<xt){xt-=dt;do kt[_++]=st[Ct++];while(--dt);Ct=_-bt,Ut=kt}for(;xt>2;)kt[_++]=Ut[Ct++],kt[_++]=Ut[Ct++],kt[_++]=Ut[Ct++],xt-=3;xt&&(kt[_++]=Ut[Ct++],xt>1&&(kt[_++]=Ut[Ct++]))}else{Ct=_-bt;do kt[_++]=kt[Ct++],kt[_++]=kt[Ct++],kt[_++]=kt[Ct++],xt-=3;while(xt>2);xt&&(kt[_++]=kt[Ct++],xt>1&&(kt[_++]=kt[Ct++]))}}else if(dt&64){o.msg="invalid distance code",Nt.mode=BAD$1;break t}else{ft=_t[(ft&65535)+(At&(1<<dt)-1)];continue r}break}}else if(dt&64)if(dt&32){Nt.mode=TYPE$1;break t}else{o.msg="invalid literal/length code",Nt.mode=BAD$1;break t}else{ft=ct[(ft&65535)+(At&(1<<dt)-1)];continue e}break}}while(d<g&&_<j);xt=ht>>3,d-=xt,ht-=xt<<3,At&=(1<<ht)-1,o.next_in=d,o.next_out=_,o.avail_in=d<g?5+(g-d):5-(d-g),o.avail_out=_<j?257+(j-_):257-(_-j),Nt.hold=At,Nt.bits=ht};const MAXBITS=15,ENOUGH_LENS$1=852,ENOUGH_DISTS$1=592,CODES$1=0,LENS$1=1,DISTS$1=2,lbase=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),lext=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),dbase=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),dext=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),inflate_table=(s,o,h,d,g,_,b,j)=>{const et=j.bits;let tt=0,rt=0,at=0,st=0,At=0,ht=0,ct=0,_t=0,gt=0,wt=0,ft,dt,xt,bt,Ct,Ut=null,Qt;const kt=new Uint16Array(MAXBITS+1),Nt=new Uint16Array(MAXBITS+1);let Wt=null,Vt,qt,_e;for(tt=0;tt<=MAXBITS;tt++)kt[tt]=0;for(rt=0;rt<d;rt++)kt[o[h+rt]]++;for(At=et,st=MAXBITS;st>=1&&kt[st]===0;st--);if(At>st&&(At=st),st===0)return g[_++]=1<<24|64<<16|0,g[_++]=1<<24|64<<16|0,j.bits=1,0;for(at=1;at<st&&kt[at]===0;at++);for(At<at&&(At=at),_t=1,tt=1;tt<=MAXBITS;tt++)if(_t<<=1,_t-=kt[tt],_t<0)return-1;if(_t>0&&(s===CODES$1||st!==1))return-1;for(Nt[1]=0,tt=1;tt<MAXBITS;tt++)Nt[tt+1]=Nt[tt]+kt[tt];for(rt=0;rt<d;rt++)o[h+rt]!==0&&(b[Nt[o[h+rt]]++]=rt);if(s===CODES$1?(Ut=Wt=b,Qt=20):s===LENS$1?(Ut=lbase,Wt=lext,Qt=257):(Ut=dbase,Wt=dext,Qt=0),wt=0,rt=0,tt=at,Ct=_,ht=At,ct=0,xt=-1,gt=1<<At,bt=gt-1,s===LENS$1&&gt>ENOUGH_LENS$1||s===DISTS$1&&gt>ENOUGH_DISTS$1)return 1;for(;;){Vt=tt-ct,b[rt]+1<Qt?(qt=0,_e=b[rt]):b[rt]>=Qt?(qt=Wt[b[rt]-Qt],_e=Ut[b[rt]-Qt]):(qt=96,_e=0),ft=1<<tt-ct,dt=1<<ht,at=dt;do dt-=ft,g[Ct+(wt>>ct)+dt]=Vt<<24|qt<<16|_e|0;while(dt!==0);for(ft=1<<tt-1;wt&ft;)ft>>=1;if(ft!==0?(wt&=ft-1,wt+=ft):wt=0,rt++,--kt[tt]===0){if(tt===st)break;tt=o[h+b[rt]]}if(tt>At&&(wt&bt)!==xt){for(ct===0&&(ct=At),Ct+=at,ht=tt-ct,_t=1<<ht;ht+ct<st&&(_t-=kt[ht+ct],!(_t<=0));)ht++,_t<<=1;if(gt+=1<<ht,s===LENS$1&&gt>ENOUGH_LENS$1||s===DISTS$1&&gt>ENOUGH_DISTS$1)return 1;xt=wt&bt,g[xt]=At<<24|ht<<16|Ct-_|0}}return wt!==0&&(g[Ct+wt]=tt-ct<<24|64<<16|0),j.bits=At,0};var inftrees$1=inflate_table;const CODES=0,LENS=1,DISTS=2,{Z_FINISH:Z_FINISH$1,Z_BLOCK,Z_TREES,Z_OK:Z_OK$1,Z_STREAM_END:Z_STREAM_END$1,Z_NEED_DICT:Z_NEED_DICT$1,Z_STREAM_ERROR:Z_STREAM_ERROR$1,Z_DATA_ERROR:Z_DATA_ERROR$1,Z_MEM_ERROR:Z_MEM_ERROR$1,Z_BUF_ERROR,Z_DEFLATED}=constants$2,HEAD=16180,FLAGS=16181,TIME=16182,OS=16183,EXLEN=16184,EXTRA=16185,NAME=16186,COMMENT=16187,HCRC=16188,DICTID=16189,DICT=16190,TYPE=16191,TYPEDO=16192,STORED=16193,COPY_=16194,COPY=16195,TABLE=16196,LENLENS=16197,CODELENS=16198,LEN_=16199,LEN=16200,LENEXT=16201,DIST=16202,DISTEXT=16203,MATCH=16204,LIT=16205,CHECK=16206,LENGTH=16207,DONE=16208,BAD=16209,MEM=16210,SYNC=16211,ENOUGH_LENS=852,ENOUGH_DISTS=592,MAX_WBITS=15,DEF_WBITS=MAX_WBITS,zswap32=s=>(s>>>24&255)+(s>>>8&65280)+((s&65280)<<8)+((s&255)<<24);function InflateState(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const inflateStateCheck=s=>{if(!s)return 1;const o=s.state;return!o||o.strm!==s||o.mode<HEAD||o.mode>SYNC?1:0},inflateResetKeep=s=>{if(inflateStateCheck(s))return Z_STREAM_ERROR$1;const o=s.state;return s.total_in=s.total_out=o.total=0,s.msg="",o.wrap&&(s.adler=o.wrap&1),o.mode=HEAD,o.last=0,o.havedict=0,o.flags=-1,o.dmax=32768,o.head=null,o.hold=0,o.bits=0,o.lencode=o.lendyn=new Int32Array(ENOUGH_LENS),o.distcode=o.distdyn=new Int32Array(ENOUGH_DISTS),o.sane=1,o.back=-1,Z_OK$1},inflateReset=s=>{if(inflateStateCheck(s))return Z_STREAM_ERROR$1;const o=s.state;return o.wsize=0,o.whave=0,o.wnext=0,inflateResetKeep(s)},inflateReset2=(s,o)=>{let h;if(inflateStateCheck(s))return Z_STREAM_ERROR$1;const d=s.state;return o<0?(h=0,o=-o):(h=(o>>4)+5,o<48&&(o&=15)),o&&(o<8||o>15)?Z_STREAM_ERROR$1:(d.window!==null&&d.wbits!==o&&(d.window=null),d.wrap=h,d.wbits=o,inflateReset(s))},inflateInit2=(s,o)=>{if(!s)return Z_STREAM_ERROR$1;const h=new InflateState;s.state=h,h.strm=s,h.window=null,h.mode=HEAD;const d=inflateReset2(s,o);return d!==Z_OK$1&&(s.state=null),d},inflateInit=s=>inflateInit2(s,DEF_WBITS);let virgin=!0,lenfix,distfix;const fixedtables=s=>{if(virgin){lenfix=new Int32Array(512),distfix=new Int32Array(32);let o=0;for(;o<144;)s.lens[o++]=8;for(;o<256;)s.lens[o++]=9;for(;o<280;)s.lens[o++]=7;for(;o<288;)s.lens[o++]=8;for(inftrees$1(LENS,s.lens,0,288,lenfix,0,s.work,{bits:9}),o=0;o<32;)s.lens[o++]=5;inftrees$1(DISTS,s.lens,0,32,distfix,0,s.work,{bits:5}),virgin=!1}s.lencode=lenfix,s.lenbits=9,s.distcode=distfix,s.distbits=5},updatewindow=(s,o,h,d)=>{let g;const _=s.state;return _.window===null&&(_.wsize=1<<_.wbits,_.wnext=0,_.whave=0,_.window=new Uint8Array(_.wsize)),d>=_.wsize?(_.window.set(o.subarray(h-_.wsize,h),0),_.wnext=0,_.whave=_.wsize):(g=_.wsize-_.wnext,g>d&&(g=d),_.window.set(o.subarray(h-d,h-d+g),_.wnext),d-=g,d?(_.window.set(o.subarray(h-d,h),0),_.wnext=d,_.whave=_.wsize):(_.wnext+=g,_.wnext===_.wsize&&(_.wnext=0),_.whave<_.wsize&&(_.whave+=g))),0},inflate$2=(s,o)=>{let h,d,g,_,b,j,et,tt,rt,at,st,At,ht,ct,_t=0,gt,wt,ft,dt,xt,bt,Ct,Ut;const Qt=new Uint8Array(4);let kt,Nt;const Wt=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(inflateStateCheck(s)||!s.output||!s.input&&s.avail_in!==0)return Z_STREAM_ERROR$1;h=s.state,h.mode===TYPE&&(h.mode=TYPEDO),b=s.next_out,g=s.output,et=s.avail_out,_=s.next_in,d=s.input,j=s.avail_in,tt=h.hold,rt=h.bits,at=j,st=et,Ut=Z_OK$1;t:for(;;)switch(h.mode){case HEAD:if(h.wrap===0){h.mode=TYPEDO;break}for(;rt<16;){if(j===0)break t;j--,tt+=d[_++]<<rt,rt+=8}if(h.wrap&2&&tt===35615){h.wbits===0&&(h.wbits=15),h.check=0,Qt[0]=tt&255,Qt[1]=tt>>>8&255,h.check=crc32_1$1(h.check,Qt,2,0),tt=0,rt=0,h.mode=FLAGS;break}if(h.head&&(h.head.done=!1),!(h.wrap&1)||(((tt&255)<<8)+(tt>>8))%31){s.msg="incorrect header check",h.mode=BAD;break}if((tt&15)!==Z_DEFLATED){s.msg="unknown compression method",h.mode=BAD;break}if(tt>>>=4,rt-=4,Ct=(tt&15)+8,h.wbits===0&&(h.wbits=Ct),Ct>15||Ct>h.wbits){s.msg="invalid window size",h.mode=BAD;break}h.dmax=1<<h.wbits,h.flags=0,s.adler=h.check=1,h.mode=tt&512?DICTID:TYPE,tt=0,rt=0;break;case FLAGS:for(;rt<16;){if(j===0)break t;j--,tt+=d[_++]<<rt,rt+=8}if(h.flags=tt,(h.flags&255)!==Z_DEFLATED){s.msg="unknown compression method",h.mode=BAD;break}if(h.flags&57344){s.msg="unknown header flags set",h.mode=BAD;break}h.head&&(h.head.text=tt>>8&1),h.flags&512&&h.wrap&4&&(Qt[0]=tt&255,Qt[1]=tt>>>8&255,h.check=crc32_1$1(h.check,Qt,2,0)),tt=0,rt=0,h.mode=TIME;case TIME:for(;rt<32;){if(j===0)break t;j--,tt+=d[_++]<<rt,rt+=8}h.head&&(h.head.time=tt),h.flags&512&&h.wrap&4&&(Qt[0]=tt&255,Qt[1]=tt>>>8&255,Qt[2]=tt>>>16&255,Qt[3]=tt>>>24&255,h.check=crc32_1$1(h.check,Qt,4,0)),tt=0,rt=0,h.mode=OS;case OS:for(;rt<16;){if(j===0)break t;j--,tt+=d[_++]<<rt,rt+=8}h.head&&(h.head.xflags=tt&255,h.head.os=tt>>8),h.flags&512&&h.wrap&4&&(Qt[0]=tt&255,Qt[1]=tt>>>8&255,h.check=crc32_1$1(h.check,Qt,2,0)),tt=0,rt=0,h.mode=EXLEN;case EXLEN:if(h.flags&1024){for(;rt<16;){if(j===0)break t;j--,tt+=d[_++]<<rt,rt+=8}h.length=tt,h.head&&(h.head.extra_len=tt),h.flags&512&&h.wrap&4&&(Qt[0]=tt&255,Qt[1]=tt>>>8&255,h.check=crc32_1$1(h.check,Qt,2,0)),tt=0,rt=0}else h.head&&(h.head.extra=null);h.mode=EXTRA;case EXTRA:if(h.flags&1024&&(At=h.length,At>j&&(At=j),At&&(h.head&&(Ct=h.head.extra_len-h.length,h.head.extra||(h.head.extra=new Uint8Array(h.head.extra_len)),h.head.extra.set(d.subarray(_,_+At),Ct)),h.flags&512&&h.wrap&4&&(h.check=crc32_1$1(h.check,d,At,_)),j-=At,_+=At,h.length-=At),h.length))break t;h.length=0,h.mode=NAME;case NAME:if(h.flags&2048){if(j===0)break t;At=0;do Ct=d[_+At++],h.head&&Ct&&h.length<65536&&(h.head.name+=String.fromCharCode(Ct));while(Ct&&At<j);if(h.flags&512&&h.wrap&4&&(h.check=crc32_1$1(h.check,d,At,_)),j-=At,_+=At,Ct)break t}else h.head&&(h.head.name=null);h.length=0,h.mode=COMMENT;case COMMENT:if(h.flags&4096){if(j===0)break t;At=0;do Ct=d[_+At++],h.head&&Ct&&h.length<65536&&(h.head.comment+=String.fromCharCode(Ct));while(Ct&&At<j);if(h.flags&512&&h.wrap&4&&(h.check=crc32_1$1(h.check,d,At,_)),j-=At,_+=At,Ct)break t}else h.head&&(h.head.comment=null);h.mode=HCRC;case HCRC:if(h.flags&512){for(;rt<16;){if(j===0)break t;j--,tt+=d[_++]<<rt,rt+=8}if(h.wrap&4&&tt!==(h.check&65535)){s.msg="header crc mismatch",h.mode=BAD;break}tt=0,rt=0}h.head&&(h.head.hcrc=h.flags>>9&1,h.head.done=!0),s.adler=h.check=0,h.mode=TYPE;break;case DICTID:for(;rt<32;){if(j===0)break t;j--,tt+=d[_++]<<rt,rt+=8}s.adler=h.check=zswap32(tt),tt=0,rt=0,h.mode=DICT;case DICT:if(h.havedict===0)return s.next_out=b,s.avail_out=et,s.next_in=_,s.avail_in=j,h.hold=tt,h.bits=rt,Z_NEED_DICT$1;s.adler=h.check=1,h.mode=TYPE;case TYPE:if(o===Z_BLOCK||o===Z_TREES)break t;case TYPEDO:if(h.last){tt>>>=rt&7,rt-=rt&7,h.mode=CHECK;break}for(;rt<3;){if(j===0)break t;j--,tt+=d[_++]<<rt,rt+=8}switch(h.last=tt&1,tt>>>=1,rt-=1,tt&3){case 0:h.mode=STORED;break;case 1:if(fixedtables(h),h.mode=LEN_,o===Z_TREES){tt>>>=2,rt-=2;break t}break;case 2:h.mode=TABLE;break;case 3:s.msg="invalid block type",h.mode=BAD}tt>>>=2,rt-=2;break;case STORED:for(tt>>>=rt&7,rt-=rt&7;rt<32;){if(j===0)break t;j--,tt+=d[_++]<<rt,rt+=8}if((tt&65535)!==(tt>>>16^65535)){s.msg="invalid stored block lengths",h.mode=BAD;break}if(h.length=tt&65535,tt=0,rt=0,h.mode=COPY_,o===Z_TREES)break t;case COPY_:h.mode=COPY;case COPY:if(At=h.length,At){if(At>j&&(At=j),At>et&&(At=et),At===0)break t;g.set(d.subarray(_,_+At),b),j-=At,_+=At,et-=At,b+=At,h.length-=At;break}h.mode=TYPE;break;case TABLE:for(;rt<14;){if(j===0)break t;j--,tt+=d[_++]<<rt,rt+=8}if(h.nlen=(tt&31)+257,tt>>>=5,rt-=5,h.ndist=(tt&31)+1,tt>>>=5,rt-=5,h.ncode=(tt&15)+4,tt>>>=4,rt-=4,h.nlen>286||h.ndist>30){s.msg="too many length or distance symbols",h.mode=BAD;break}h.have=0,h.mode=LENLENS;case LENLENS:for(;h.have<h.ncode;){for(;rt<3;){if(j===0)break t;j--,tt+=d[_++]<<rt,rt+=8}h.lens[Wt[h.have++]]=tt&7,tt>>>=3,rt-=3}for(;h.have<19;)h.lens[Wt[h.have++]]=0;if(h.lencode=h.lendyn,h.lenbits=7,kt={bits:h.lenbits},Ut=inftrees$1(CODES,h.lens,0,19,h.lencode,0,h.work,kt),h.lenbits=kt.bits,Ut){s.msg="invalid code lengths set",h.mode=BAD;break}h.have=0,h.mode=CODELENS;case CODELENS:for(;h.have<h.nlen+h.ndist;){for(;_t=h.lencode[tt&(1<<h.lenbits)-1],gt=_t>>>24,wt=_t>>>16&255,ft=_t&65535,!(gt<=rt);){if(j===0)break t;j--,tt+=d[_++]<<rt,rt+=8}if(ft<16)tt>>>=gt,rt-=gt,h.lens[h.have++]=ft;else{if(ft===16){for(Nt=gt+2;rt<Nt;){if(j===0)break t;j--,tt+=d[_++]<<rt,rt+=8}if(tt>>>=gt,rt-=gt,h.have===0){s.msg="invalid bit length repeat",h.mode=BAD;break}Ct=h.lens[h.have-1],At=3+(tt&3),tt>>>=2,rt-=2}else if(ft===17){for(Nt=gt+3;rt<Nt;){if(j===0)break t;j--,tt+=d[_++]<<rt,rt+=8}tt>>>=gt,rt-=gt,Ct=0,At=3+(tt&7),tt>>>=3,rt-=3}else{for(Nt=gt+7;rt<Nt;){if(j===0)break t;j--,tt+=d[_++]<<rt,rt+=8}tt>>>=gt,rt-=gt,Ct=0,At=11+(tt&127),tt>>>=7,rt-=7}if(h.have+At>h.nlen+h.ndist){s.msg="invalid bit length repeat",h.mode=BAD;break}for(;At--;)h.lens[h.have++]=Ct}}if(h.mode===BAD)break;if(h.lens[256]===0){s.msg="invalid code -- missing end-of-block",h.mode=BAD;break}if(h.lenbits=9,kt={bits:h.lenbits},Ut=inftrees$1(LENS,h.lens,0,h.nlen,h.lencode,0,h.work,kt),h.lenbits=kt.bits,Ut){s.msg="invalid literal/lengths set",h.mode=BAD;break}if(h.distbits=6,h.distcode=h.distdyn,kt={bits:h.distbits},Ut=inftrees$1(DISTS,h.lens,h.nlen,h.ndist,h.distcode,0,h.work,kt),h.distbits=kt.bits,Ut){s.msg="invalid distances set",h.mode=BAD;break}if(h.mode=LEN_,o===Z_TREES)break t;case LEN_:h.mode=LEN;case LEN:if(j>=6&&et>=258){s.next_out=b,s.avail_out=et,s.next_in=_,s.avail_in=j,h.hold=tt,h.bits=rt,inffast$1(s,st),b=s.next_out,g=s.output,et=s.avail_out,_=s.next_in,d=s.input,j=s.avail_in,tt=h.hold,rt=h.bits,h.mode===TYPE&&(h.back=-1);break}for(h.back=0;_t=h.lencode[tt&(1<<h.lenbits)-1],gt=_t>>>24,wt=_t>>>16&255,ft=_t&65535,!(gt<=rt);){if(j===0)break t;j--,tt+=d[_++]<<rt,rt+=8}if(wt&&!(wt&240)){for(dt=gt,xt=wt,bt=ft;_t=h.lencode[bt+((tt&(1<<dt+xt)-1)>>dt)],gt=_t>>>24,wt=_t>>>16&255,ft=_t&65535,!(dt+gt<=rt);){if(j===0)break t;j--,tt+=d[_++]<<rt,rt+=8}tt>>>=dt,rt-=dt,h.back+=dt}if(tt>>>=gt,rt-=gt,h.back+=gt,h.length=ft,wt===0){h.mode=LIT;break}if(wt&32){h.back=-1,h.mode=TYPE;break}if(wt&64){s.msg="invalid literal/length code",h.mode=BAD;break}h.extra=wt&15,h.mode=LENEXT;case LENEXT:if(h.extra){for(Nt=h.extra;rt<Nt;){if(j===0)break t;j--,tt+=d[_++]<<rt,rt+=8}h.length+=tt&(1<<h.extra)-1,tt>>>=h.extra,rt-=h.extra,h.back+=h.extra}h.was=h.length,h.mode=DIST;case DIST:for(;_t=h.distcode[tt&(1<<h.distbits)-1],gt=_t>>>24,wt=_t>>>16&255,ft=_t&65535,!(gt<=rt);){if(j===0)break t;j--,tt+=d[_++]<<rt,rt+=8}if(!(wt&240)){for(dt=gt,xt=wt,bt=ft;_t=h.distcode[bt+((tt&(1<<dt+xt)-1)>>dt)],gt=_t>>>24,wt=_t>>>16&255,ft=_t&65535,!(dt+gt<=rt);){if(j===0)break t;j--,tt+=d[_++]<<rt,rt+=8}tt>>>=dt,rt-=dt,h.back+=dt}if(tt>>>=gt,rt-=gt,h.back+=gt,wt&64){s.msg="invalid distance code",h.mode=BAD;break}h.offset=ft,h.extra=wt&15,h.mode=DISTEXT;case DISTEXT:if(h.extra){for(Nt=h.extra;rt<Nt;){if(j===0)break t;j--,tt+=d[_++]<<rt,rt+=8}h.offset+=tt&(1<<h.extra)-1,tt>>>=h.extra,rt-=h.extra,h.back+=h.extra}if(h.offset>h.dmax){s.msg="invalid distance too far back",h.mode=BAD;break}h.mode=MATCH;case MATCH:if(et===0)break t;if(At=st-et,h.offset>At){if(At=h.offset-At,At>h.whave&&h.sane){s.msg="invalid distance too far back",h.mode=BAD;break}At>h.wnext?(At-=h.wnext,ht=h.wsize-At):ht=h.wnext-At,At>h.length&&(At=h.length),ct=h.window}else ct=g,ht=b-h.offset,At=h.length;At>et&&(At=et),et-=At,h.length-=At;do g[b++]=ct[ht++];while(--At);h.length===0&&(h.mode=LEN);break;case LIT:if(et===0)break t;g[b++]=h.length,et--,h.mode=LEN;break;case CHECK:if(h.wrap){for(;rt<32;){if(j===0)break t;j--,tt|=d[_++]<<rt,rt+=8}if(st-=et,s.total_out+=st,h.total+=st,h.wrap&4&&st&&(s.adler=h.check=h.flags?crc32_1$1(h.check,g,st,b-st):adler32_1$1(h.check,g,st,b-st)),st=et,h.wrap&4&&(h.flags?tt:zswap32(tt))!==h.check){s.msg="incorrect data check",h.mode=BAD;break}tt=0,rt=0}h.mode=LENGTH;case LENGTH:if(h.wrap&&h.flags){for(;rt<32;){if(j===0)break t;j--,tt+=d[_++]<<rt,rt+=8}if(h.wrap&4&&tt!==(h.total&4294967295)){s.msg="incorrect length check",h.mode=BAD;break}tt=0,rt=0}h.mode=DONE;case DONE:Ut=Z_STREAM_END$1;break t;case BAD:Ut=Z_DATA_ERROR$1;break t;case MEM:return Z_MEM_ERROR$1;case SYNC:default:return Z_STREAM_ERROR$1}return s.next_out=b,s.avail_out=et,s.next_in=_,s.avail_in=j,h.hold=tt,h.bits=rt,(h.wsize||st!==s.avail_out&&h.mode<BAD&&(h.mode<CHECK||o!==Z_FINISH$1))&&updatewindow(s,s.output,s.next_out,st-s.avail_out),at-=s.avail_in,st-=s.avail_out,s.total_in+=at,s.total_out+=st,h.total+=st,h.wrap&4&&st&&(s.adler=h.check=h.flags?crc32_1$1(h.check,g,st,s.next_out-st):adler32_1$1(h.check,g,st,s.next_out-st)),s.data_type=h.bits+(h.last?64:0)+(h.mode===TYPE?128:0)+(h.mode===LEN_||h.mode===COPY_?256:0),(at===0&&st===0||o===Z_FINISH$1)&&Ut===Z_OK$1&&(Ut=Z_BUF_ERROR),Ut},inflateEnd=s=>{if(inflateStateCheck(s))return Z_STREAM_ERROR$1;let o=s.state;return o.window&&(o.window=null),s.state=null,Z_OK$1},inflateGetHeader=(s,o)=>{if(inflateStateCheck(s))return Z_STREAM_ERROR$1;const h=s.state;return h.wrap&2?(h.head=o,o.done=!1,Z_OK$1):Z_STREAM_ERROR$1},inflateSetDictionary=(s,o)=>{const h=o.length;let d,g,_;return inflateStateCheck(s)||(d=s.state,d.wrap!==0&&d.mode!==DICT)?Z_STREAM_ERROR$1:d.mode===DICT&&(g=1,g=adler32_1$1(g,o,h,0),g!==d.check)?Z_DATA_ERROR$1:(_=updatewindow(s,o,h,h),_?(d.mode=MEM,Z_MEM_ERROR$1):(d.havedict=1,Z_OK$1))};var inflateReset_1=inflateReset,inflateReset2_1=inflateReset2,inflateResetKeep_1=inflateResetKeep,inflateInit_1=inflateInit,inflateInit2_1=inflateInit2,inflate_2$1=inflate$2,inflateEnd_1=inflateEnd,inflateGetHeader_1=inflateGetHeader,inflateSetDictionary_1=inflateSetDictionary,inflateInfo="pako inflate (from Nodeca project)",inflate_1$2={inflateReset:inflateReset_1,inflateReset2:inflateReset2_1,inflateResetKeep:inflateResetKeep_1,inflateInit:inflateInit_1,inflateInit2:inflateInit2_1,inflate:inflate_2$1,inflateEnd:inflateEnd_1,inflateGetHeader:inflateGetHeader_1,inflateSetDictionary:inflateSetDictionary_1,inflateInfo};function GZheader(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var gzheader$1=GZheader;const toString$1=Object.prototype.toString,{Z_NO_FLUSH,Z_FINISH,Z_OK,Z_STREAM_END,Z_NEED_DICT,Z_STREAM_ERROR,Z_DATA_ERROR,Z_MEM_ERROR}=constants$2;function Inflate$1(s){this.options=common$1.assign({chunkSize:1024*64,windowBits:15,to:""},s||{});const o=this.options;o.raw&&o.windowBits>=0&&o.windowBits<16&&(o.windowBits=-o.windowBits,o.windowBits===0&&(o.windowBits=-15)),o.windowBits>=0&&o.windowBits<16&&!(s&&s.windowBits)&&(o.windowBits+=32),o.windowBits>15&&o.windowBits<48&&!(o.windowBits&15)&&(o.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zstream$1,this.strm.avail_out=0;let h=inflate_1$2.inflateInit2(this.strm,o.windowBits);if(h!==Z_OK)throw new Error(messages$1[h]);if(this.header=new gzheader$1,inflate_1$2.inflateGetHeader(this.strm,this.header),o.dictionary&&(typeof o.dictionary=="string"?o.dictionary=strings$1.string2buf(o.dictionary):toString$1.call(o.dictionary)==="[object ArrayBuffer]"&&(o.dictionary=new Uint8Array(o.dictionary)),o.raw&&(h=inflate_1$2.inflateSetDictionary(this.strm,o.dictionary),h!==Z_OK)))throw new Error(messages$1[h])}Inflate$1.prototype.push=function(s,o){const h=this.strm,d=this.options.chunkSize,g=this.options.dictionary;let _,b,j;if(this.ended)return!1;for(o===~~o?b=o:b=o===!0?Z_FINISH:Z_NO_FLUSH,toString$1.call(s)==="[object ArrayBuffer]"?h.input=new Uint8Array(s):h.input=s,h.next_in=0,h.avail_in=h.input.length;;){for(h.avail_out===0&&(h.output=new Uint8Array(d),h.next_out=0,h.avail_out=d),_=inflate_1$2.inflate(h,b),_===Z_NEED_DICT&&g&&(_=inflate_1$2.inflateSetDictionary(h,g),_===Z_OK?_=inflate_1$2.inflate(h,b):_===Z_DATA_ERROR&&(_=Z_NEED_DICT));h.avail_in>0&&_===Z_STREAM_END&&h.state.wrap>0&&s[h.next_in]!==0;)inflate_1$2.inflateReset(h),_=inflate_1$2.inflate(h,b);switch(_){case Z_STREAM_ERROR:case Z_DATA_ERROR:case Z_NEED_DICT:case Z_MEM_ERROR:return this.onEnd(_),this.ended=!0,!1}if(j=h.avail_out,h.next_out&&(h.avail_out===0||_===Z_STREAM_END))if(this.options.to==="string"){let et=strings$1.utf8border(h.output,h.next_out),tt=h.next_out-et,rt=strings$1.buf2string(h.output,et);h.next_out=tt,h.avail_out=d-tt,tt&&h.output.set(h.output.subarray(et,et+tt),0),this.onData(rt)}else this.onData(h.output.length===h.next_out?h.output:h.output.subarray(0,h.next_out));if(!(_===Z_OK&&j===0)){if(_===Z_STREAM_END)return _=inflate_1$2.inflateEnd(this.strm),this.onEnd(_),this.ended=!0,!0;if(h.avail_in===0)break}}return!0};Inflate$1.prototype.onData=function(s){this.chunks.push(s)};Inflate$1.prototype.onEnd=function(s){s===Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=common$1.flattenChunks(this.chunks)),this.chunks=[],this.err=s,this.msg=this.strm.msg};function inflate$1$1(s,o){const h=new Inflate$1(o);if(h.push(s),h.err)throw h.msg||messages$1[h.err];return h.result}var inflate_2=inflate$1$1,inflate_1$1={inflate:inflate_2};const{inflate:inflate$3}=inflate_1$1;var inflate_1=inflate$3;function decompressZlib(s){const o=new Uint8Array(s.buffer,s.byteOffset,s.byteLength),h=inflate_1(o);return new DataView(h.buffer,h.byteOffset,h.byteLength)}const defaultOptions$3={ignoreImageData:!1,onlyFirst:!1};class TIFFDecoder extends IOBuffer{constructor(o){super(o),this._nextIFD=0}get isMultiPage(){let o=0;for(this.decodeHeader();this._nextIFD;)if(o++,this.decodeIFD({ignoreImageData:!0},!0),o===2)return!0;if(o===1)return!1;throw unsupported("ifdCount",o)}get pageCount(){let o=0;for(this.decodeHeader();this._nextIFD;)o++,this.decodeIFD({ignoreImageData:!0},!0);if(o>0)return o;throw unsupported("ifdCount",o)}decode(o={}){o=Object.assign({},defaultOptions$3,o);const h=[];for(this.decodeHeader();this._nextIFD;)if(h.push(this.decodeIFD(o,!0)),o.onlyFirst)return[h[0]];return h}decodeHeader(){const o=this.readUint16();if(o===18761)this.setLittleEndian();else if(o===19789)this.setBigEndian();else throw new Error(`invalid byte order: 0x${o.toString(16)}`);if(this.readUint16()!==42)throw new Error("not a TIFF file");this._nextIFD=this.readUint32()}decodeIFD(o,h){this.seek(this._nextIFD);let d;if(h)d=new TiffIfd;else{if(!o.kind)throw new Error("kind is missing");d=new IFD(o.kind)}const g=this.readUint16();for(let _=0;_<g;_++)this.decodeIFDEntry(d);if(!o.ignoreImageData){if(!(d instanceof TiffIfd))throw new Error("must be a tiff ifd");this.decodeImageData(d)}return this._nextIFD=this.readUint32(),d}decodeIFDEntry(o){const h=this.offset,d=this.readUint16(),g=this.readUint16(),_=this.readUint32();if(g<1||g>12){this.skip(4);return}getByteLength(g,_)>4&&this.seek(this.readUint32());const b=readData(this,g,_);if(o.fields.set(d,b),d===34665||d===34853){let j=this.offset,et="exif";d===34665?et="exif":d===34853&&(et="gps"),this._nextIFD=b,o[et]=this.decodeIFD({kind:et,ignoreImageData:!0},!1),this.offset=j}this.seek(h),this.skip(12)}decodeImageData(o){const h=o.orientation;if(h&&h!==1)throw unsupported("orientation",h);switch(o.type){case 0:case 1:case 2:case 3:this.readStripData(o);break;default:throw unsupported("image type",o.type)}if(this.applyPredictor(o),this.convertAlpha(o),o.type===0){const d=o.bitsPerSample,g=Math.pow(2,d)-1;for(let _=0;_<o.data.length;_++)o.data[_]=g-o.data[_]}}readStripData(o){const h=o.width,d=o.height,g=o.bitsPerSample,_=o.sampleFormat,b=h*d*o.samplesPerPixel,j=getDataArray(b,g,_),et=o.rowsPerStrip*h*o.samplesPerPixel,tt=o.stripOffsets,rt=o.stripByteCounts||guessStripByteCounts(o);let at=b,st=0;for(let At=0;At<tt.length;At++){let ht=new DataView(this.buffer,this.byteOffset+tt[At],rt[At]),ct=at>et?et:at;at-=ct;let _t=ht;switch(o.compression){case 1:break;case 5:{_t=decompressLzw(ht);break}case 8:{_t=decompressZlib(ht);break}case 2:throw unsupported("Compression","CCITT Group 3");case 32773:throw unsupported("Compression","PackBits");default:throw unsupported("Compression",o.compression)}st=this.fillUncompressed(g,_,j,_t,st,ct)}o.data=j}fillUncompressed(o,h,d,g,_,b){if(o===8)return fill8bit(d,g,_,b);if(o===16)return fill16bit(d,g,_,b,this.isLittleEndian());if(o===32&&h===3)return fillFloat32(d,g,_,b,this.isLittleEndian());throw unsupported("bitDepth",o)}applyPredictor(o){const h=o.bitsPerSample;switch(o.predictor){case 1:break;case 2:{if(h===8)applyHorizontalDifferencing8Bit(o.data,o.width,o.components);else if(h===16)applyHorizontalDifferencing16Bit(o.data,o.width,o.components);else throw new Error(`Horizontal differencing is only supported for images with a bit depth of ${h}`);break}default:throw new Error(`invalid predictor: ${o.predictor}`)}}convertAlpha(o){if(o.alpha&&o.associatedAlpha){const{data:h,components:d,maxSampleValue:g}=o;for(let _=0;_<h.length;_+=d){const b=h[_+d-1];for(let j=0;j<d-1;j++)h[_+j]=Math.round(h[_+j]*g/b)}}}}function getDataArray(s,o,h){if(o===8)return new Uint8Array(s);if(o===16)return new Uint16Array(s);if(o===32&&h===3)return new Float32Array(s);throw unsupported("bit depth / sample format",`${o} / ${h}`)}function fill8bit(s,o,h,d){for(let g=0;g<d;g++)s[h++]=o.getUint8(g);return h}function fill16bit(s,o,h,d,g){for(let _=0;_<d*2;_+=2)s[h++]=o.getUint16(_,g);return h}function fillFloat32(s,o,h,d,g){for(let _=0;_<d*4;_+=4)s[h++]=o.getFloat32(_,g);return h}function unsupported(s,o){return new Error(`Unsupported ${s}: ${o}`)}function decodeTIFF(s,o){return new TIFFDecoder(s).decode(o)}function matchAndCrop(s={}){let{algorithm:o="matchToPrevious",ignoreBorder:h=[0,0]}=s;this.checkProcessable("matchAndCrop",{bitDepth:[8,16]});let d=o==="matchToPrevious",g=this[0],_=[];_[0]={position:[0,0],image:this[0]};let b=[0,0];for(let st=1;st<this.length;st++){let At=g.getBestMatch(this[st],{border:h});_[st]={position:[At[0]+b[0],At[1]+b[1]],image:this[st]},d&&(b[0]+=At[0],b[1]+=At[1],g=this[st])}let j=0,et=0,tt=0,rt=0;for(let st=0;st<_.length;st++){let At=_[st];At.position[0]>j&&(j=At.position[0]),At.position[0]<et&&(et=At.position[0]),At.position[1]>tt&&(tt=At.position[1]),At.position[1]<rt&&(rt=At.position[1])}et=0-et,rt=0-rt;for(let st=0;st<_.length;st++){let At=_[st];At.crop=At.image.crop({x:j-At.position[0],y:tt-At.position[1],width:g.width-et-j,height:g.height-rt-tt})}let at=[];for(let st=0;st<_.length;st++)at[st]=_[st].crop;return new Stack(at)}function min$2(){this.checkProcessable("min",{bitDepth:[8,16]});let s=this[0].min;for(let o=1;o<this.length;o++)for(let h=0;h<s.length;h++)s[h]=Math.min(s[h],this[o].min[h]);return s}function max$2(){this.checkProcessable("min",{bitDepth:[8,16]});let s=this[0].max;for(let o=1;o<this.length;o++)for(let h=0;h<s.length;h++)s[h]=Math.max(s[h],this[o].max[h]);return s}function median$2(s){let o=s.reduce((b,j)=>b+j);if(o===0)throw new Error("unreachable");let h=0,d=0,g=o/2,_;for(;;){if(s[h]>0){if(_!==void 0)return(_+h)/2;if(d+=s[h],d>g)return h;d===g&&(_=h)}h++}}function mean$2(s){let o=0,h=0;for(let d=0;d<s.length;d++)o+=s[d],h+=s[d]*d;return o===0?0:h/o}function median$1(){this.checkProcessable("median",{bitDepth:[8,16]});let s=this.getHistograms({maxSlots:this[0].maxValue+1}),o=new Array(s.length);for(let h=0;h<s.length;h++){let d=s[h];o[h]=median$2(d)}return o}function histogram(s){this.checkProcessable("min",{bitDepth:[8,16]});let o=this[0].getHistogram(s);for(let h=1;h<this.length;h++){let d=this[h].getHistogram(s);for(let g=0;g<o.length;g++)o[g]+=d[g]}return o}function histograms(s){this.checkProcessable("min",{bitDepth:[8,16]});let o=this[0].getHistograms(s),h=o[0].length;for(let d=1;d<this.length;d++){let g=this[d].getHistograms(s);for(let _=0;_<o.length;_++)for(let b=0;b<h;b++)o[_][b]+=g[_][b]}return o}function averageImage(){this.checkProcessable("averageImage",{bitDepth:[8,16]});let s=new Uint32Array(this[0].data.length);for(let d=0;d<this.length;d++){let g=this[d];for(let _=0;_<this[0].data.length;_++)s[_]+=g.data[_]}let o=Image$1.createFrom(this[0]),h=o.data;for(let d=0;d<this[0].data.length;d++)h[d]=s[d]/this.length;return o}function maxImage(){this.checkProcessable("max",{bitDepth:[8,16]});let s=Image$1.createFrom(this[0]);s.data.fill(0);for(const o of this)for(let h=0;h<s.data.length;h++)s.data[h]=Math.max(o.data[h],s.data[h]);return s}function minImage(){this.checkProcessable("max",{bitDepth:[8,16]});let s=Image$1.createFrom(this[0]);s.data.fill(s.maxValue);for(const o of this)for(let h=0;h<s.data.length;h++)s.data[h]=Math.min(o.data[h],s.data[h]);return s}function extend$2(s){s.extendMethod("matchAndCrop",matchAndCrop),s.extendMethod("getMin",min$2),s.extendMethod("getMax",max$2),s.extendMethod("getMedian",median$1),s.extendMethod("getHistogram",histogram),s.extendMethod("getHistograms",histograms),s.extendMethod("getAverage",averageImage),s.extendMethod("getAverageImage",averageImage),s.extendMethod("getMaxImage",maxImage),s.extendMethod("getMinImage",minImage)}let computedPropertyDescriptor={configurable:!0,enumerable:!1,get:void 0};class Stack extends Array{constructor(o){if(Array.isArray(o)){super(o.length);for(let h=0;h<o.length;h++)this[h]=o[h]}else typeof o=="number"?super(o):super();this.computed=null}static load(o){return Promise.all(o.map(Image$1.load)).then(h=>new Stack(h))}static extendMethod(o,h,d={}){let{inPlace:g=!1,returnThis:_=!0,partialArgs:b=[]}=d;return g?Stack.prototype[o]=function(...j){this.computed=null;let et=h.apply(this,[...b,...j]);return _?this:et}:Stack.prototype[o]=function(...j){return h.apply(this,[...b,...j])},Stack}static extendProperty(o,h,d={}){let{partialArgs:g=[]}=d;return computedPropertyDescriptor.get=function(){if(this.computed===null)this.computed={};else if(hasOwn(o,this.computed))return this.computed[o];let _=h.apply(this,g);return this.computed[o]=_,_},Object.defineProperty(Stack.prototype,o,computedPropertyDescriptor),Stack}checkProcessable(o,h={}){if(typeof o!="string")throw new TypeError("checkProcessable requires as first parameter the processName (a string)");if(this.size===0)throw new TypeError(`The process: ${o} can not be applied on an empty stack`);this[0].checkProcessable(o,h);for(let d=1;d<this.length;d++){if((h.sameSize===void 0||h.sameSize)&&this[0].width!==this[d].width)throw new TypeError(`The process: ${o} can not be applied if width is not identical in all images`);if((h.sameSize===void 0||h.sameSize)&&this[0].height!==this[d].height)throw new TypeError(`The process: ${o} can not be applied if height is not identical in all images`);if((h.sameAlpha===void 0||h.sameAlpha)&&this[0].alpha!==this[d].alpha)throw new TypeError(`The process: ${o} can not be applied if alpha is not identical in all images`);if((h.sameBitDepth===void 0||h.sameBitDepth)&&this[0].bitDepth!==this[d].bitDepth)throw new TypeError(`The process: ${o} can not be applied if bitDepth is not identical in all images`);if((h.sameColorModel===void 0||h.sameColorModel)&&this[0].colorModel!==this[d].colorModel)throw new TypeError(`The process: ${o} can not be applied if colorModel is not identical in all images`);if((h.sameNumberChannels===void 0||h.sameNumberChannels)&&this[0].channels!==this[d].channels)throw new TypeError(`The process: ${o} can not be applied if channels is not identical in all images`)}}}Array[Symbol.species]||(Stack.prototype.map=function(s,o){if(typeof s!="function")throw new TypeError(`${s} is not a function`);let h=new Stack(this.length);for(let d=0;d<this.length;d++)h[d]=s.call(o,this[d],d,this);return h});extend$2(Stack);const isDataURL=/^data:[a-z]+\/(?:[a-z]+);base64,/;function load(s,o){if(typeof s=="string")return loadURL(s,o);if(s instanceof ArrayBuffer)return Promise.resolve(loadBinary(new Uint8Array(s),void 0,o&&o.ignorePalette));if(s.buffer)return Promise.resolve(loadBinary(s,void 0,o&&o.ignorePalette));throw new Error('argument to "load" must be a string or buffer.')}function loadBinary(s,o,h){const d=imageType(s);if(d)switch(d.mime){case"image/png":return loadPNG(s);case"image/jpeg":return loadJPEG(s);case"image/tiff":return loadTIFF(s,h);default:return loadGeneric(g(d.mime))}return loadGeneric(g("application/octet-stream"));function g(_){return o||toBase64URL(s,_)}}function loadURL(s,o){const h=s.slice(0,64).match(isDataURL);let d;return h!==null?d=Promise.resolve(decode$1$1(s.slice(h[0].length))):d=fetchBinary(s,o),d.then(g=>{const _=new Uint8Array(g);return loadBinary(_,h?s:void 0,o&&o.ignorePalette)})}function loadPNG(s){const o=decodePng(s);let h=o.channels,d,g=0;return h===2||h===4?(d=h-1,g=1):d=h,o.palette?loadPNGFromPalette(o):new Image$1(o.width,o.height,o.data,{components:d,alpha:g,bitDepth:o.depth,meta:{text:o.text}})}function loadPNGFromPalette(s){const o=s.width*s.height,h=s.palette[0].length,d=new Uint8Array(o*h),g=8/s.depth,_=s.depth<8?g:1,b=parseInt("1".repeat(s.depth),2),j=h===4;let et=0;for(let tt=0;tt<o;tt++){const rt=Math.floor(tt/_);let at=s.data[rt];s.depth<8&&(at=at>>>s.depth*(g-1-tt%g)&b);const st=s.palette[at];d[et++]=st[0],d[et++]=st[1],d[et++]=st[2],j&&(d[et++]=st[3])}return new Image$1(s.width,s.height,d,{components:3,alpha:j,bitDepth:8})}function loadJPEG(s){const o=srcExports$2.decode(s);let h;o.exif&&(h=getMetadata(o.exif));const d=jpegJsExports.decode(s,{useTArray:!0,maxMemoryUsageInMB:1024});let g=new Image$1(d.width,d.height,d.data,{meta:h});if(h&&h.tiff.tags.Orientation){const _=h.tiff.tags.Orientation;_>2&&(g=g.rotate({3:180,4:180,5:90,6:90,7:270,8:270}[_])),[2,4,5,7].includes(_)&&(g=g.flipX())}return g}function loadTIFF(s,o){let h=decodeTIFF(s);return h.length===1?getImageFromIFD(h[0],o):new Stack(h.map(function(d){return getImageFromIFD(d,o)}))}function getMetadata(s){const o={tiff:{fields:s.fields,tags:s.map}};return s.exif&&(o.exif=s.exif),s.gps&&(o.gps=s.gps),o}function getImageFromIFD(s,o){if(!o&&s.type===3){const h=new Uint16Array(3*s.width*s.height),d=s.palette;let g=0;for(let _=0;_<s.data.length;_++){const b=s.data[_],j=d[b];h[g++]=j[0],h[g++]=j[1],h[g++]=j[2]}return new Image$1(s.width,s.height,h,{components:3,alpha:s.alpha,colorModel:RGB$1,bitDepth:16,meta:getMetadata(s)})}else return new Image$1(s.width,s.height,s.data,{components:s.type===2?3:1,alpha:s.alpha,colorModel:s.type===2?RGB$1:GREY$1,bitDepth:s.bitsPerSample.length?s.bitsPerSample[0]:s.bitsPerSample,meta:getMetadata(s)})}function loadGeneric(s,o){return o=o||{},new Promise(function(h,d){let g=new DOMImage;g.onload=function(){let _=g.width,b=g.height,j=createCanvas(_,b).getContext("2d");j.drawImage(g,0,0,_,b);let et=j.getImageData(0,0,_,b).data;h(new Image$1(_,b,et,o))},g.onerror=function(){d(new Error(`Could not load ${s}`))},g.src=s})}const valueMethods={getValueXY(s,o,h){return this.data[(o*this.width+s)*this.channels+h]},setValueXY(s,o,h,d){return this.data[(o*this.width+s)*this.channels+h]=d,this.computed=null,this},getValue(s,o){return this.data[s*this.channels+o]},setValue(s,o,h){return this.data[s*this.channels+o]=h,this.computed=null,this},getPixelXY(s,o){return this.getPixel(o*this.width+s)},setPixelXY(s,o,h){return this.setPixel(o*this.width+s,h)},getPixel(s){const o=new Array(this.channels),h=s*this.channels;for(let d=0;d<this.channels;d++)o[d]=this.data[h+d];return o},setPixel(s,o){const h=s*this.channels;for(let d=0;d<o.length;d++)this.data[h+d]=o[d];return this.computed=null,this}};function setValueMethods(s){for(const o in valueMethods)s.prototype[o]=valueMethods[o]}function getImageParameters(s){return{width:s.width,height:s.height,components:s.components,alpha:s.alpha,colorModel:s.colorModel,bitDepth:s.bitDepth}}function getOutputImage(s,o,h,d={}){const{out:g}=o;if(g===void 0)return d.copy?s.clone():Image$1.createFrom(s,h);{if(!Image$1.isImage(g))throw new TypeError("out must be an Image object");const _=Object.assign(getImageParameters(s),h);for(const b in _)if(g[b]!==_[b])throw new RangeError(`cannot use out. Its ${b} must be "${_[b]}" (found "${g[b]}")`);return g}}function getOutputImageOrInPlace(s,o,h){if(o.inPlace!==void 0&&typeof o.inPlace!="boolean")throw new TypeError("inPlace option must be a boolean");if(o.inPlace){if(o.out!==void 0)throw new TypeError("out option must not be set if inPlace option is true");return s}return getOutputImage(s,o,null,h)}function abs(s={}){this.checkProcessable("abs",{bitDepth:[32]});const o=getOutputImageOrInPlace(this,s);return absolute(this,o),o}function absolute(s,o){for(let h=0;h<s.data.length;h++)o.data[h]=Math.abs(s.data[h])}function copyAlphaChannel(s,o){if(s.alpha===1&&o.alpha===1)for(let h=0;h<s.size;h++)o.data[h*o.channels+o.components]=s.data[h*s.channels+s.components]}function invert(s={}){this.checkProcessable("invert",{bitDepth:[1,8,16]});const o=getOutputImageOrInPlace(this,s);return this.bitDepth===1?invertBinary(this,o):(invertColor(this,o),this!==o&&copyAlphaChannel(this,o)),o}function invertBinary(s,o){for(let h=0;h<s.data.length;h++)o.data[h]=~s.data[h]}function invertColor(s,o){for(let h=0;h<s.data.length;h+=s.channels)for(let d=0;d<s.components;d++)o.data[h+d]=s.maxValue-s.data[h+d]}function flipX(){this.checkProcessable("flipX",{bitDepth:[8,16]});for(let s=0;s<this.height;s++){let o=s*this.width*this.channels;for(let h=0;h<Math.floor(this.width/2);h++){let d=h*this.channels+o,g=(this.width-h-1)*this.channels+o;for(let _=0;_<this.channels;_++){let b=this.data[d+_];this.data[d+_]=this.data[g+_],this.data[g+_]=b}}}return this}function flipY(){this.checkProcessable("flipY",{bitDepth:[8,16]});for(let s=0;s<Math.floor(this.height/2);s++)for(let o=0;o<this.width;o++){let h=o*this.channels+s*this.width*this.channels,d=o*this.channels+(this.height-1-s)*this.channels*this.width;for(let g=0;g<this.channels;g++){let _=this.data[h+g];this.data[h+g]=this.data[d+g],this.data[d+g]=_}}return this}function blurFilter(s={}){const{radius:o=1}=s;if(o<1)throw new Error("radius must be greater than 1");const h=2*o+1,d=new Array(h);for(let g=0;g<h;g++){d[g]=new Array(h);for(let _=0;_<h;_++)d[g][_]=1/(h*h)}return this.convolution(d)}var medianQuickselect_min={exports:{}},hasRequiredMedianQuickselect_min;function requireMedianQuickselect_min(){return hasRequiredMedianQuickselect_min||(hasRequiredMedianQuickselect_min=1,function(s){(function(){function o(g){for(var _=0,b=g.length-1,j=void 0,et=void 0,tt=void 0,rt=d(_,b);;){if(b<=_)return g[rt];if(b==_+1)return g[_]>g[b]&&h(g,_,b),g[rt];for(j=d(_,b),g[j]>g[b]&&h(g,j,b),g[_]>g[b]&&h(g,_,b),g[j]>g[_]&&h(g,j,_),h(g,j,_+1),et=_+1,tt=b;;){do et++;while(g[_]>g[et]);do tt--;while(g[tt]>g[_]);if(tt<et)break;h(g,et,tt)}h(g,_,tt),tt<=rt&&(_=et),tt>=rt&&(b=tt-1)}}var h=function(g,_,b){var j;return j=[g[b],g[_]],g[_]=j[0],g[b]=j[1],j},d=function(g,_){return~~((g+_)/2)};s.exports?s.exports=o:window.median=o})()}(medianQuickselect_min)),medianQuickselect_min.exports}var medianQuickselect_minExports=requireMedianQuickselect_min();const quickSelectMedian=getDefaultExportFromCjs(medianQuickselect_minExports);function validateArrayOfChannels(s,o={}){let{channels:h,allowAlpha:d,defaultAlpha:g}=o;return typeof d!="boolean"&&(d=!0),typeof h>"u"?allChannels(s,g):validateChannels(s,h,d)}function allChannels(s,o){let h=o?s.channels:s.components,d=new Array(h);for(let g=0;g<h;g++)d[g]=g;return d}function validateChannels(s,o,h){Array.isArray(o)||(o=[o]);for(let d=0;d<o.length;d++)o[d]=validateChannel(s,o[d],h);return o}function validateChannel(s,o,h=!0){if(o===void 0)throw new RangeError(`validateChannel : the channel has to be >=0 and <${s.channels}`);if(typeof o=="string"){switch(s.colorModel){case GREY$1:break;case RGB$1:if("rgb".includes(o))switch(o){case"r":o=0;break;case"g":o=1;break;case"b":o=2;break}break;case HSL:if("hsl".includes(o))switch(o){case"h":o=0;break;case"s":o=1;break;case"l":o=2;break}break;case HSV:if("hsv".includes(o))switch(o){case"h":o=0;break;case"s":o=1;break;case"v":o=2;break}break;case CMYK$1:if("cmyk".includes(o))switch(o){case"c":o=0;break;case"m":o=1;break;case"y":o=2;break;case"k":o=3;break}break;default:throw new Error(`Unexpected color model: ${s.colorModel}`)}if(o==="a"){if(!s.alpha)throw new Error("validateChannel : the image does not contain alpha channel");o=s.components}if(typeof o=="string")throw new Error(`validateChannel : undefined channel: ${o}`)}if(o>=s.channels)throw new RangeError(`validateChannel : the channel has to be >=0 and <${s.channels}`);if(!h&&o>=s.components)throw new RangeError("validateChannel : alpha channel may not be selected");return o}function medianFilter(s={}){let{radius:o=1,border:h="copy",channels:d}=s;if(this.checkProcessable("medianFilter",{bitDepth:[8,16]}),o<1)throw new Error("radius must be greater than 0");d=validateArrayOfChannels(this,d);let g=o,_=o,b=Image$1.createFrom(this),j=(g*2+1)*(_*2+1),et=new Array(j);for(let tt=0;tt<d.length;tt++){let rt=d[tt];for(let at=_;at<this.height-_;at++)for(let st=g;st<this.width-g;st++){let At=0;for(let ct=-_;ct<=_;ct++)for(let _t=-g;_t<=g;_t++){let gt=((at+ct)*this.width+st+_t)*this.channels+rt;et[At++]=this.data[gt]}let ht=(at*this.width+st)*this.channels+rt;b.data[ht]=quickSelectMedian(et)}}if(this.alpha&&!d.includes(this.channels))for(let tt=this.components;tt<this.data.length;tt=tt+this.channels)b.data[tt]=this.data[tt];return b.setBorder({size:[g,_],algorithm:h}),b}function gaussianFilter(s={}){let{radius:o=1,sigma:h,channels:d,border:g="copy"}=s;this.checkProcessable("gaussian",{bitDepth:[8,16]});const _=getKernel(o,h);return this.convolution([_,_],{border:g,channels:d,algorithm:"separable"})}function getKernel(s,o){const h=s*2+1,d=new Array(h),g=o||((h-1)*.5-1)*.3+.8,_=-.5/(g*g);let b=0;for(let j=0;j<h;j++){const et=j-s,tt=Math.exp(_*et*et);d[j]=tt,b+=tt}for(let j=0;j<h;j++)d[j]/=b;return d}const SOBEL_X=[[-1,0,1],[-2,0,2],[-1,0,1]],SOBEL_Y=[[-1,-2,-1],[0,0,0],[1,2,1]],SCHARR_X=[[3,0,-3],[10,0,-10],[3,0,-3]],SCHARR_Y=[[3,10,3],[0,0,0],[-3,-10,-3]];var src$2={},fftlib={},hasRequiredFftlib;function requireFftlib(){return hasRequiredFftlib||(hasRequiredFftlib=1,function(s){(function(){var o;o=s;var h={release:"0.3.0",date:"2013-03"};o.toString=function(){return"version "+h.release+", released "+h.date};for(var d=0,g=null,_=null,b={init:function(tt){if(tt!==0&&!(tt&tt-1))d=tt,b._initArray(),b._makeBitReversalTable(),b._makeCosSinTable();else throw new Error("init: radix-2 required")},fft1d:function(tt,rt){b.fft(tt,rt,1)},ifft1d:function(tt,rt){var at=1/d;b.fft(tt,rt,-1);for(var st=0;st<d;st++)tt[st]*=at,rt[st]*=at},bt1d:function(tt,rt){b.fft(tt,rt,-1)},fft2d:function(tt,rt){for(var at=[],st=[],At=0,ht=0;ht<d;ht++){At=ht*d;for(var ct=0;ct<d;ct++)at[ct]=tt[ct+At],st[ct]=rt[ct+At];b.fft1d(at,st);for(var _t=0;_t<d;_t++)tt[_t+At]=at[_t],rt[_t+At]=st[_t]}for(var gt=0;gt<d;gt++){for(var wt=0;wt<d;wt++)At=gt+wt*d,at[wt]=tt[At],st[wt]=rt[At];b.fft1d(at,st);for(var ft=0;ft<d;ft++)At=gt+ft*d,tt[At]=at[ft],rt[At]=st[ft]}},ifft2d:function(tt,rt){for(var at=[],st=[],At=0,ht=0;ht<d;ht++){At=ht*d;for(var ct=0;ct<d;ct++)at[ct]=tt[ct+At],st[ct]=rt[ct+At];b.ifft1d(at,st);for(var _t=0;_t<d;_t++)tt[_t+At]=at[_t],rt[_t+At]=st[_t]}for(var gt=0;gt<d;gt++){for(var wt=0;wt<d;wt++)At=gt+wt*d,at[wt]=tt[At],st[wt]=rt[At];b.ifft1d(at,st);for(var ft=0;ft<d;ft++)At=gt+ft*d,tt[At]=at[ft],rt[At]=st[ft]}},fft:function(tt,rt,at){for(var st,At,ht,ct,_t,gt,wt,ft,dt,xt=d>>2,bt=0;bt<d;bt++)ct=g[bt],bt<ct&&(_t=tt[bt],tt[bt]=tt[ct],tt[ct]=_t,_t=rt[bt],rt[bt]=rt[ct],rt[ct]=_t);for(var Ct=1;Ct<d;Ct<<=1){At=0,st=d/(Ct<<1);for(var Ut=0;Ut<Ct;Ut++){gt=_[At+xt],wt=at*_[At];for(var Qt=Ut;Qt<d;Qt+=Ct<<1)ht=Qt+Ct,ft=gt*tt[ht]+wt*rt[ht],dt=gt*rt[ht]-wt*tt[ht],tt[ht]=tt[Qt]-ft,tt[Qt]+=ft,rt[ht]=rt[Qt]-dt,rt[Qt]+=dt;At+=st}}},_initArray:function(){typeof Uint32Array<"u"?g=new Uint32Array(d):g=[],typeof Float64Array<"u"?_=new Float64Array(d*1.25):_=[]},_paddingZero:function(){},_makeBitReversalTable:function(){var tt=0,rt=0,at=0;for(g[0]=0;++tt<d;){for(at=d>>1;at<=rt;)rt-=at,at>>=1;rt+=at,g[tt]=rt}},_makeCosSinTable:function(){var tt=d>>1,rt=d>>2,at=d>>3,st=tt+rt,At=Math.sin(Math.PI/d),ht=2*At*At,ct=Math.sqrt(ht*(2-ht)),_t=_[rt]=1,gt=_[0]=0;At=2*ht;for(var wt=1;wt<at;wt++)_t-=ht,ht+=At*_t,gt+=ct,ct-=At*gt,_[wt]=gt,_[rt-wt]=_t;at!==0&&(_[at]=Math.sqrt(.5));for(var ft=0;ft<rt;ft++)_[tt-ft]=_[ft];for(var dt=0;dt<st;dt++)_[dt+tt]=-_[dt]}},j=["init","fft1d","ifft1d","fft2d","ifft2d"],et=0;et<j.length;et++)o[j[et]]=b[j[et]];return o.bt=b.bt1d,o.fft=b.fft1d,o.ifft=b.ifft1d,o}).call(fftlib)}(fftlib)),fftlib}var FFTUtils_1,hasRequiredFFTUtils;function requireFFTUtils(){if(hasRequiredFFTUtils)return FFTUtils_1;hasRequiredFFTUtils=1;var s=requireFftlib(),o={DEBUG:!1,ifft2DArray:function(h,d,g){var _=new Array(d*g),b=d/2,j=(g-1)*2;s.init(b);for(var et={re:new Array(b),im:new Array(b)},tt=0;tt<g;tt++){for(var rt=b-1;rt>=0;rt--)et.re[rt]=h[rt*2*g+tt],et.im[rt]=h[(rt*2+1)*g+tt];s.bt(et.re,et.im);for(var rt=b-1;rt>=0;rt--)_[rt*2*g+tt]=et.re[rt],_[(rt*2+1)*g+tt]=et.im[rt]}var at=new Array(b*j);s.init(j);for(var st={re:new Array(j),im:new Array(j)},At=j*b,rt=0;rt<d;rt+=2){st.re[0]=_[rt*g],st.im[0]=_[(rt+1)*g];for(var tt=1;tt<g;tt++)st.re[tt]=_[rt*g+tt],st.im[tt]=_[(rt+1)*g+tt],st.re[j-tt]=_[rt*g+tt],st.im[j-tt]=-_[(rt+1)*g+tt];s.bt(st.re,st.im);for(var ht=rt/2*j,tt=j-1;tt>=0;tt--)at[ht+tt]=st.re[tt]/At}return at},fft2DArray:function(h,d,g,_){Object.assign({},{inplace:!0});var b=g/2+1,j=d*2,et=new Array(j*b);s.init(g);for(var tt={re:new Array(g),im:new Array(g)},rt={re:new Array(g),im:new Array(g)},at={re:new Array(g),im:new Array(g)},st,At,ht,ct,_t,gt=0;gt<d/2;gt++){st=gt*2*g,tt.re=h.slice(st,st+g),st=(gt*2+1)*g,tt.im=h.slice(st,st+g),s.fft1d(tt.re,tt.im),this.reconstructTwoRealFFT(tt,rt,at),At=gt*4*b,ht=(gt*4+1)*b,ct=(gt*4+2)*b,_t=(gt*4+3)*b;for(var wt=b-1;wt>=0;wt--)et[At+wt]=rt.re[wt],et[ht+wt]=rt.im[wt],et[ct+wt]=at.re[wt],et[_t+wt]=at.im[wt]}rt=null,at=null;var ft=new Array(j*b);s.init(d);for(var dt={re:new Array(d),im:new Array(d)},xt=b-1;xt>=0;xt--){for(var gt=d-1;gt>=0;gt--)dt.re[gt]=et[gt*2*b+xt],dt.im[gt]=et[(gt*2+1)*b+xt],isNaN(dt.re[gt])&&(dt.re[gt]=0),isNaN(dt.im[gt])&&(dt.im[gt]=0);s.fft1d(dt.re,dt.im);for(var gt=d-1;gt>=0;gt--)ft[gt*2*b+xt]=dt.re[gt],ft[(gt*2+1)*b+xt]=dt.im[gt]}return ft},reconstructTwoRealFFT:function(h,d,g){var _=h.re.length;d.re[0]=h.re[0],d.im[0]=0,g.re[0]=h.im[0],g.im[0]=0;for(var b,j,et,tt,rt,at=_/2;at>0;at--)rt=_-at,b=.5*(h.re[at]-h.re[rt]),j=.5*(h.re[at]+h.re[rt]),et=.5*(h.im[at]-h.im[rt]),tt=.5*(h.im[at]+h.im[rt]),d.re[at]=j,d.im[at]=et,d.re[rt]=j,d.im[rt]=-et,g.re[at]=tt,g.im[at]=-b,g.re[rt]=tt,g.im[rt]=b},convolute2DI:function(h,d,g,_){for(var b,j,et=0;et<g/2;et++)for(var tt=0;tt<_;tt++)b=h[et*2*_+tt]*d[et*2*_+tt]-h[(et*2+1)*_+tt]*d[(et*2+1)*_+tt],j=h[et*2*_+tt]*d[(et*2+1)*_+tt]+h[(et*2+1)*_+tt]*d[et*2*_+tt],h[et*2*_+tt]=b,h[(et*2+1)*_+tt]=j},convolute:function(h,d,g,_,b){for(var j=new Array(_*g),et=0;et<g*_;et++)j[et]=h[et];j=this.fft2DArray(j,g,_);for(var tt=d.length,rt=d[0].length,at=new Array(_*g),et=0;et<_*g;et++)at[et]=0;for(var st,At,ht=Math.floor((tt-1)/2),ct=Math.floor((rt-1)/2),_t=0;_t<tt;_t++){st=(_t-ht+g)%g;for(var gt=0;gt<rt;gt++)At=(gt-ct+_)%_,at[st*_+At]=d[_t][gt]}at=this.fft2DArray(at,g,_);var wt=g*2,ft=_/2+1;return this.convolute2DI(j,at,wt,ft),this.ifft2DArray(j,wt,ft)},toRadix2:function(h,d,g){var _,b,j,et,tt=g,rt=d;if(!(g!==0&&!(g&g-1))){for(tt=0;g>>++tt;);tt=1<<tt}if(!(d!==0&&!(d&d-1))){for(rt=0;d>>++rt;);rt=1<<rt}if(rt==d&&tt==g)return{data:h,rows:d,cols:g};var at=new Array(rt*tt),st=Math.floor((rt-d)/2)-d,At=Math.floor((tt-g)/2)-g;for(_=0;_<rt;_++)for(j=_*tt,et=(_-st)%d*g,b=0;b<tt;b++)at[j+b]=h[et+(b-At)%g];return{data:at,rows:rt,cols:tt}},crop:function(h,d,g,_,b,j){if(d==_&&g==b)return h;Object.assign({},j);var et=new Array(b*_),tt=Math.floor((d-_)/2),rt=Math.floor((g-b)/2),at,st,At,ht;for(At=0;At<_;At++)for(at=At*b,st=(At+tt)*g,ht=0;ht<b;ht++)et[at+ht]=h[st+(ht+rt)];return et}};return FFTUtils_1=o,FFTUtils_1}var hasRequiredSrc$2;function requireSrc$2(){return hasRequiredSrc$2||(hasRequiredSrc$2=1,src$2.FFTUtils=requireFFTUtils(),src$2.FFT=requireFftlib()),src$2}var src$1,hasRequiredSrc$1;function requireSrc$1(){if(hasRequiredSrc$1)return src$1;hasRequiredSrc$1=1;var s=requireSrc$2().FFTUtils;function o(_,b,j){var et=g(_),tt=et.data,rt=Object.assign({normalize:!1,divisor:1,rows:et.rows,cols:et.cols},j),at,st;if(rt.rows&&rt.cols)at=rt.rows,st=rt.cols;else throw new Error("Invalid number of rows or columns "+at+" "+st);var At=rt.divisor,ht,ct,_t=b.length,gt=b[0].length;if(rt.normalize)for(At=0,ht=0;ht<_t;ht++)for(ct=0;ct<gt;ct++)At+=b[ht][ct];if(At===0)throw new RangeError("convolution: The divisor is equal to zero");var wt=s.toRadix2(tt,at,st),ft=s.convolute(wt.data,b,wt.rows,wt.cols);if(ft=s.crop(ft,wt.rows,wt.cols,at,st),At!=0&&At!=1)for(ht=0;ht<ft.length;ht++)ft[ht]/=At;return ft}function h(_,b,j){var et=g(_),tt=et.data,rt=Object.assign({normalize:!1,divisor:1,rows:et.rows,cols:et.cols},j),at,st;if(rt.rows&&rt.cols)at=rt.rows,st=rt.cols;else throw new Error("Invalid number of rows or columns "+at+" "+st);var At=rt.divisor,ht=b.length,ct=b[0].length,_t,gt,wt,ft,dt,xt,bt,Ct,Ut;if(rt.normalize)for(At=0,_t=0;_t<ht;_t++)for(gt=0;gt<ct;gt++)At+=b[_t][gt];if(At===0)throw new RangeError("convolution: The divisor is equal to zero");var Qt=new Array(at*st),kt=Math.floor(ht/2),Nt=Math.floor(ct/2);for(ft=0;ft<at;ft++)for(wt=0;wt<st;wt++){for(xt=0,gt=0;gt<ht;gt++)for(_t=0;_t<ct;_t++)bt=b[ht-gt-1][ct-_t-1],Ct=(ft+gt-kt+at)%at,Ut=(wt+_t-Nt+st)%st,dt=Ct*st+Ut,xt+=tt[dt]*bt;dt=ft*st+wt,Qt[dt]=xt/At}return Qt}function d(_,b,j){var et=1e3;j&&j.factor&&(et=j.factor);var tt=new Array(b),rt,at,st,At;et*=-1;var ht=(b-1)/2,ct=2*_*_;for(rt=0;rt<b;rt++)for(tt[rt]=new Array(b),At=(rt-ht)*(rt-ht),at=0;at<b;at++)st=-((at-ht)*(at-ht)+At)/ct,tt[rt][at]=Math.round(et*(1+st)*Math.exp(st));return tt}function g(_){var b=_,j,et;if(typeof _[0]!="number"){j=_.length,et=_[0].length,b=new Array(j*et);for(var tt=0;tt<j;tt++)for(var rt=0;rt<et;rt++)b[tt*et+rt]=_[tt][rt]}else{var at=Math.sqrt(_.length);Number.isInteger(at)&&(j=at,et=at)}return{data:b,rows:j,cols:et}}return src$1={fft:o,direct:h,kernelFactory:{LoG:d},matrix2Array:g},src$1}var srcExports$1=requireSrc$1(),_isFinite,hasRequired_isFinite;function require_isFinite(){return hasRequired_isFinite||(hasRequired_isFinite=1,_isFinite=Number.isFinite||function(s){return!(typeof s!="number"||s!==s||s===1/0||s===-1/0)}),_isFinite}var isInteger$1,hasRequiredIsInteger;function requireIsInteger(){if(hasRequiredIsInteger)return isInteger$1;hasRequiredIsInteger=1;var s=require_isFinite();return isInteger$1=Number.isInteger||function(o){return typeof o=="number"&&s(o)&&Math.floor(o)===o},isInteger$1}var isIntegerExports=requireIsInteger();const isInteger=getDefaultExportFromCjs(isIntegerExports);function validateKernel(s){let o,h;if(Array.isArray(s))if(Array.isArray(s[0])){if(!(s.length&1)||!(s[0].length&1))throw new RangeError("validateKernel: Kernel rows and columns should be odd numbers");o=Math.floor(s.length/2),h=Math.floor(s[0].length/2)}else{let d=Math.sqrt(s.length);if(isInteger(d))h=o=Math.floor(Math.sqrt(s.length)/2);else throw new RangeError("validateKernel: Kernel array should be a square");let g=new Array(d);for(let _=0;_<d;_++){g[_]=new Array(d);for(let b=0;b<d;b++)g[_][b]=s[_*d+b]}s=g}else throw new Error(`validateKernel: Invalid Kernel: ${s}`);return{kernel:s,kWidth:h,kHeight:o}}function clamp(s,o){return Math.round(Math.min(Math.max(s,0),o.maxValue))}function directConvolution(s,o,h){if(h===void 0){const _=s.length+o.length-1;h=new Array(_)}fill(h);for(var d=0;d<s.length;d++)for(var g=0;g<o.length;g++)h[d+g]+=s[d]*o[g];return h}function fill(s){for(var o=0;o<s.length;o++)s[o]=0}var fft,hasRequiredFft;function requireFft(){if(hasRequiredFft)return fft;hasRequiredFft=1;function s(o){if(this.size=o|0,this.size<=1||(this.size&this.size-1)!==0)throw new Error("FFT size must be a power of two and bigger than 1");this._csize=o<<1;for(var h=new Array(this.size*2),d=0;d<h.length;d+=2){const tt=Math.PI*d/this.size;h[d]=Math.cos(tt),h[d+1]=-Math.sin(tt)}this.table=h;for(var g=0,_=1;this.size>_;_<<=1)g++;this._width=g%2===0?g-1:g,this._bitrev=new Array(1<<this._width);for(var b=0;b<this._bitrev.length;b++){this._bitrev[b]=0;for(var j=0;j<this._width;j+=2){var et=this._width-j-2;this._bitrev[b]|=(b>>>j&3)<<et}}this._out=null,this._data=null,this._inv=0}return fft=s,s.prototype.fromComplexArray=function(o,h){for(var d=h||new Array(o.length>>>1),g=0;g<o.length;g+=2)d[g>>>1]=o[g];return d},s.prototype.createComplexArray=function(){const o=new Array(this._csize);for(var h=0;h<o.length;h++)o[h]=0;return o},s.prototype.toComplexArray=function(o,h){for(var d=h||this.createComplexArray(),g=0;g<d.length;g+=2)d[g]=o[g>>>1],d[g+1]=0;return d},s.prototype.completeSpectrum=function(o){for(var h=this._csize,d=h>>>1,g=2;g<d;g+=2)o[h-g]=o[g],o[h-g+1]=-o[g+1]},s.prototype.transform=function(o,h){if(o===h)throw new Error("Input and output buffers must be different");this._out=o,this._data=h,this._inv=0,this._transform4(),this._out=null,this._data=null},s.prototype.realTransform=function(o,h){if(o===h)throw new Error("Input and output buffers must be different");this._out=o,this._data=h,this._inv=0,this._realTransform4(),this._out=null,this._data=null},s.prototype.inverseTransform=function(o,h){if(o===h)throw new Error("Input and output buffers must be different");this._out=o,this._data=h,this._inv=1,this._transform4();for(var d=0;d<o.length;d++)o[d]/=this.size;this._out=null,this._data=null},s.prototype._transform4=function(){var o=this._out,h=this._csize,d=this._width,g=1<<d,_=h/g<<1,b,j,et=this._bitrev;if(_===4)for(b=0,j=0;b<h;b+=_,j++){const ct=et[j];this._singleTransform2(b,ct,g)}else for(b=0,j=0;b<h;b+=_,j++){const ct=et[j];this._singleTransform4(b,ct,g)}var tt=this._inv?-1:1,rt=this.table;for(g>>=2;g>=2;g>>=2){_=h/g<<1;var at=_>>>2;for(b=0;b<h;b+=_)for(var st=b+at,At=b,ht=0;At<st;At+=2,ht+=g){const ct=At,_t=ct+at,gt=_t+at,wt=gt+at,ft=o[ct],dt=o[ct+1],xt=o[_t],bt=o[_t+1],Ct=o[gt],Ut=o[gt+1],Qt=o[wt],kt=o[wt+1],Nt=ft,Wt=dt,Vt=rt[ht],qt=tt*rt[ht+1],_e=xt*Vt-bt*qt,Jt=xt*qt+bt*Vt,lr=rt[2*ht],jt=tt*rt[2*ht+1],ur=Ct*lr-Ut*jt,Ar=Ct*jt+Ut*lr,mr=rt[3*ht],dr=tt*rt[3*ht+1],Nr=Qt*mr-kt*dr,Ur=Qt*dr+kt*mr,nr=Nt+ur,hr=Wt+Ar,Dr=Nt-ur,Qr=Wt-Ar,vr=_e+Nr,on=Jt+Ur,en=tt*(_e-Nr),zr=tt*(Jt-Ur),or=nr+vr,xr=hr+on,Wr=nr-vr,$r=hr-on,Or=Dr+zr,qr=Qr-en,fr=Dr-zr,Kr=Qr+en;o[ct]=or,o[ct+1]=xr,o[_t]=Or,o[_t+1]=qr,o[gt]=Wr,o[gt+1]=$r,o[wt]=fr,o[wt+1]=Kr}}},s.prototype._singleTransform2=function(o,h,d){const g=this._out,_=this._data,b=_[h],j=_[h+1],et=_[h+d],tt=_[h+d+1],rt=b+et,at=j+tt,st=b-et,At=j-tt;g[o]=rt,g[o+1]=at,g[o+2]=st,g[o+3]=At},s.prototype._singleTransform4=function(o,h,d){const g=this._out,_=this._data,b=this._inv?-1:1,j=d*2,et=d*3,tt=_[h],rt=_[h+1],at=_[h+d],st=_[h+d+1],At=_[h+j],ht=_[h+j+1],ct=_[h+et],_t=_[h+et+1],gt=tt+At,wt=rt+ht,ft=tt-At,dt=rt-ht,xt=at+ct,bt=st+_t,Ct=b*(at-ct),Ut=b*(st-_t),Qt=gt+xt,kt=wt+bt,Nt=ft+Ut,Wt=dt-Ct,Vt=gt-xt,qt=wt-bt,_e=ft-Ut,Jt=dt+Ct;g[o]=Qt,g[o+1]=kt,g[o+2]=Nt,g[o+3]=Wt,g[o+4]=Vt,g[o+5]=qt,g[o+6]=_e,g[o+7]=Jt},s.prototype._realTransform4=function(){var o=this._out,h=this._csize,d=this._width,g=1<<d,_=h/g<<1,b,j,et=this._bitrev;if(_===4)for(b=0,j=0;b<h;b+=_,j++){const kr=et[j];this._singleRealTransform2(b,kr>>>1,g>>>1)}else for(b=0,j=0;b<h;b+=_,j++){const kr=et[j];this._singleRealTransform4(b,kr>>>1,g>>>1)}var tt=this._inv?-1:1,rt=this.table;for(g>>=2;g>=2;g>>=2){_=h/g<<1;var at=_>>>1,st=at>>>1,At=st>>>1;for(b=0;b<h;b+=_)for(var ht=0,ct=0;ht<=At;ht+=2,ct+=g){var _t=b+ht,gt=_t+st,wt=gt+st,ft=wt+st,dt=o[_t],xt=o[_t+1],bt=o[gt],Ct=o[gt+1],Ut=o[wt],Qt=o[wt+1],kt=o[ft],Nt=o[ft+1],Wt=dt,Vt=xt,qt=rt[ct],_e=tt*rt[ct+1],Jt=bt*qt-Ct*_e,lr=bt*_e+Ct*qt,jt=rt[2*ct],ur=tt*rt[2*ct+1],Ar=Ut*jt-Qt*ur,mr=Ut*ur+Qt*jt,dr=rt[3*ct],Nr=tt*rt[3*ct+1],Ur=kt*dr-Nt*Nr,nr=kt*Nr+Nt*dr,hr=Wt+Ar,Dr=Vt+mr,Qr=Wt-Ar,vr=Vt-mr,on=Jt+Ur,en=lr+nr,zr=tt*(Jt-Ur),or=tt*(lr-nr),xr=hr+on,Wr=Dr+en,$r=Qr+or,Or=vr-zr;if(o[_t]=xr,o[_t+1]=Wr,o[gt]=$r,o[gt+1]=Or,ht===0){var qr=hr-on,fr=Dr-en;o[wt]=qr,o[wt+1]=fr;continue}if(ht!==At){var Kr=Qr,jr=-vr,Xr=hr,Tr=-Dr,An=-tt*or,Gr=-tt*zr,Yr=-tt*en,Zr=-tt*on,ln=Kr+An,Hr=jr+Gr,rn=Xr+Zr,zt=Tr-Yr,br=b+st-ht,Sr=b+at-ht;o[br]=ln,o[br+1]=Hr,o[Sr]=rn,o[Sr+1]=zt}}}},s.prototype._singleRealTransform2=function(o,h,d){const g=this._out,_=this._data,b=_[h],j=_[h+d],et=b+j,tt=b-j;g[o]=et,g[o+1]=0,g[o+2]=tt,g[o+3]=0},s.prototype._singleRealTransform4=function(o,h,d){const g=this._out,_=this._data,b=this._inv?-1:1,j=d*2,et=d*3,tt=_[h],rt=_[h+d],at=_[h+j],st=_[h+et],At=tt+at,ht=tt-at,ct=rt+st,_t=b*(rt-st),gt=At+ct,wt=ht,ft=-_t,dt=At-ct,xt=ht,bt=_t;g[o]=gt,g[o+1]=0,g[o+2]=wt,g[o+3]=ft,g[o+4]=dt,g[o+5]=0,g[o+6]=xt,g[o+7]=bt},fft}requireFft();function convolutionSeparable(s,o,h,d){const g=new Array(s.length);let _,b,j,et;et=o[1],j=(et.length-1)/2,b=new Array(h+et.length-1),_=new Array(h);for(let tt=0;tt<d;tt++){for(let rt=0;rt<h;rt++)_[rt]=s[tt*h+rt];directConvolution(_,et,b);for(let rt=0;rt<h;rt++)g[tt*h+rt]=b[j+rt]}et=o[0],j=(et.length-1)/2,b=new Array(d+et.length-1),_=new Array(d);for(let tt=0;tt<h;tt++){for(let rt=0;rt<d;rt++)_[rt]=g[rt*h+tt];directConvolution(_,et,b);for(let rt=0;rt<d;rt++)g[rt*h+tt]=b[j+rt]}return g}var matrix$1={};const toString=Object.prototype.toString;function isAnyArray(s){const o=toString.call(s);return o.endsWith("Array]")&&!o.includes("Big")}const libEsm=Object.freeze(Object.defineProperty({__proto__:null,isAnyArray},Symbol.toStringTag,{value:"Module"})),require$$0$1=getAugmentedNamespace(libEsm);function max$1(s){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!isAnyArray(s))throw new TypeError("input must be an array");if(s.length===0)throw new TypeError("input must not be empty");var h=o.fromIndex,d=h===void 0?0:h,g=o.toIndex,_=g===void 0?s.length:g;if(d<0||d>=s.length||!Number.isInteger(d))throw new Error("fromIndex must be a positive integer smaller than length");if(_<=d||_>s.length||!Number.isInteger(_))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var b=s[d],j=d+1;j<_;j++)s[j]>b&&(b=s[j]);return b}function min$1(s){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!isAnyArray(s))throw new TypeError("input must be an array");if(s.length===0)throw new TypeError("input must not be empty");var h=o.fromIndex,d=h===void 0?0:h,g=o.toIndex,_=g===void 0?s.length:g;if(d<0||d>=s.length||!Number.isInteger(d))throw new Error("fromIndex must be a positive integer smaller than length");if(_<=d||_>s.length||!Number.isInteger(_))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var b=s[d],j=d+1;j<_;j++)s[j]<b&&(b=s[j]);return b}function rescale(s){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(isAnyArray(s)){if(s.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var h;if(o.output!==void 0){if(!isAnyArray(o.output))throw new TypeError("output option must be an array if specified");h=o.output}else h=new Array(s.length);var d=min$1(s),g=max$1(s);if(d===g)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var _=o.min,b=_===void 0?o.autoMinMax?d:0:_,j=o.max,et=j===void 0?o.autoMinMax?g:1:j;if(b>=et)throw new RangeError("min option must be smaller than max option");for(var tt=(et-b)/(g-d),rt=0;rt<s.length;rt++)h[rt]=(s[rt]-d)*tt+b;return h}const libEs6=Object.freeze(Object.defineProperty({__proto__:null,default:rescale},Symbol.toStringTag,{value:"Module"})),require$$1=getAugmentedNamespace(libEs6);var hasRequiredMatrix;function requireMatrix(){var s,o,h;if(hasRequiredMatrix)return matrix$1;hasRequiredMatrix=1,Object.defineProperty(matrix$1,"__esModule",{value:!0});var d=require$$0$1,g=require$$1;const _=" ".repeat(2),b=" ".repeat(4);function j(){return et(this)}function et(mt,ot={}){const{maxRows:it=15,maxColumns:lt=10,maxNumSize:pt=8,padMinus:Et="auto"}=ot;return`${mt.constructor.name} {
${_}[
${b}${tt(mt,it,lt,pt,Et)}
${_}]
${_}rows: ${mt.rows}
${_}columns: ${mt.columns}
}`}function tt(mt,ot,it,lt,pt){const{rows:Et,columns:Pt}=mt,Ht=Math.min(Et,ot),Mt=Math.min(Pt,it),Gt=[];if(pt==="auto"){pt=!1;t:for(let sr=0;sr<Ht;sr++)for(let Xt=0;Xt<Mt;Xt++)if(mt.get(sr,Xt)<0){pt=!0;break t}}for(let sr=0;sr<Ht;sr++){let Xt=[];for(let wr=0;wr<Mt;wr++)Xt.push(rt(mt.get(sr,wr),lt,pt));Gt.push(`${Xt.join(" ")}`)}return Mt!==Pt&&(Gt[Gt.length-1]+=` ... ${Pt-it} more columns`),Ht!==Et&&Gt.push(`... ${Et-ot} more rows`),Gt.join(`
${b}`)}function rt(mt,ot,it){return(mt>=0&&it?` ${at(mt,ot-1)}`:at(mt,ot)).padEnd(ot)}function at(mt,ot){let it=mt.toString();if(it.length<=ot)return it;let lt=mt.toFixed(ot);if(lt.length>ot&&(lt=mt.toFixed(Math.max(0,ot-(lt.length-ot)))),lt.length<=ot&&!lt.startsWith("0.000")&&!lt.startsWith("-0.000"))return lt;let pt=mt.toExponential(ot);return pt.length>ot&&(pt=mt.toExponential(Math.max(0,ot-(pt.length-ot)))),pt.slice(0)}function st(mt,ot){mt.prototype.add=function(it){return typeof it=="number"?this.addS(it):this.addM(it)},mt.prototype.addS=function(it){for(let lt=0;lt<this.rows;lt++)for(let pt=0;pt<this.columns;pt++)this.set(lt,pt,this.get(lt,pt)+it);return this},mt.prototype.addM=function(it){if(it=ot.checkMatrix(it),this.rows!==it.rows||this.columns!==it.columns)throw new RangeError("Matrices dimensions must be equal");for(let lt=0;lt<this.rows;lt++)for(let pt=0;pt<this.columns;pt++)this.set(lt,pt,this.get(lt,pt)+it.get(lt,pt));return this},mt.add=function(it,lt){return new ot(it).add(lt)},mt.prototype.sub=function(it){return typeof it=="number"?this.subS(it):this.subM(it)},mt.prototype.subS=function(it){for(let lt=0;lt<this.rows;lt++)for(let pt=0;pt<this.columns;pt++)this.set(lt,pt,this.get(lt,pt)-it);return this},mt.prototype.subM=function(it){if(it=ot.checkMatrix(it),this.rows!==it.rows||this.columns!==it.columns)throw new RangeError("Matrices dimensions must be equal");for(let lt=0;lt<this.rows;lt++)for(let pt=0;pt<this.columns;pt++)this.set(lt,pt,this.get(lt,pt)-it.get(lt,pt));return this},mt.sub=function(it,lt){return new ot(it).sub(lt)},mt.prototype.subtract=mt.prototype.sub,mt.prototype.subtractS=mt.prototype.subS,mt.prototype.subtractM=mt.prototype.subM,mt.subtract=mt.sub,mt.prototype.mul=function(it){return typeof it=="number"?this.mulS(it):this.mulM(it)},mt.prototype.mulS=function(it){for(let lt=0;lt<this.rows;lt++)for(let pt=0;pt<this.columns;pt++)this.set(lt,pt,this.get(lt,pt)*it);return this},mt.prototype.mulM=function(it){if(it=ot.checkMatrix(it),this.rows!==it.rows||this.columns!==it.columns)throw new RangeError("Matrices dimensions must be equal");for(let lt=0;lt<this.rows;lt++)for(let pt=0;pt<this.columns;pt++)this.set(lt,pt,this.get(lt,pt)*it.get(lt,pt));return this},mt.mul=function(it,lt){return new ot(it).mul(lt)},mt.prototype.multiply=mt.prototype.mul,mt.prototype.multiplyS=mt.prototype.mulS,mt.prototype.multiplyM=mt.prototype.mulM,mt.multiply=mt.mul,mt.prototype.div=function(it){return typeof it=="number"?this.divS(it):this.divM(it)},mt.prototype.divS=function(it){for(let lt=0;lt<this.rows;lt++)for(let pt=0;pt<this.columns;pt++)this.set(lt,pt,this.get(lt,pt)/it);return this},mt.prototype.divM=function(it){if(it=ot.checkMatrix(it),this.rows!==it.rows||this.columns!==it.columns)throw new RangeError("Matrices dimensions must be equal");for(let lt=0;lt<this.rows;lt++)for(let pt=0;pt<this.columns;pt++)this.set(lt,pt,this.get(lt,pt)/it.get(lt,pt));return this},mt.div=function(it,lt){return new ot(it).div(lt)},mt.prototype.divide=mt.prototype.div,mt.prototype.divideS=mt.prototype.divS,mt.prototype.divideM=mt.prototype.divM,mt.divide=mt.div,mt.prototype.mod=function(it){return typeof it=="number"?this.modS(it):this.modM(it)},mt.prototype.modS=function(it){for(let lt=0;lt<this.rows;lt++)for(let pt=0;pt<this.columns;pt++)this.set(lt,pt,this.get(lt,pt)%it);return this},mt.prototype.modM=function(it){if(it=ot.checkMatrix(it),this.rows!==it.rows||this.columns!==it.columns)throw new RangeError("Matrices dimensions must be equal");for(let lt=0;lt<this.rows;lt++)for(let pt=0;pt<this.columns;pt++)this.set(lt,pt,this.get(lt,pt)%it.get(lt,pt));return this},mt.mod=function(it,lt){return new ot(it).mod(lt)},mt.prototype.modulus=mt.prototype.mod,mt.prototype.modulusS=mt.prototype.modS,mt.prototype.modulusM=mt.prototype.modM,mt.modulus=mt.mod,mt.prototype.and=function(it){return typeof it=="number"?this.andS(it):this.andM(it)},mt.prototype.andS=function(it){for(let lt=0;lt<this.rows;lt++)for(let pt=0;pt<this.columns;pt++)this.set(lt,pt,this.get(lt,pt)&it);return this},mt.prototype.andM=function(it){if(it=ot.checkMatrix(it),this.rows!==it.rows||this.columns!==it.columns)throw new RangeError("Matrices dimensions must be equal");for(let lt=0;lt<this.rows;lt++)for(let pt=0;pt<this.columns;pt++)this.set(lt,pt,this.get(lt,pt)&it.get(lt,pt));return this},mt.and=function(it,lt){return new ot(it).and(lt)},mt.prototype.or=function(it){return typeof it=="number"?this.orS(it):this.orM(it)},mt.prototype.orS=function(it){for(let lt=0;lt<this.rows;lt++)for(let pt=0;pt<this.columns;pt++)this.set(lt,pt,this.get(lt,pt)|it);return this},mt.prototype.orM=function(it){if(it=ot.checkMatrix(it),this.rows!==it.rows||this.columns!==it.columns)throw new RangeError("Matrices dimensions must be equal");for(let lt=0;lt<this.rows;lt++)for(let pt=0;pt<this.columns;pt++)this.set(lt,pt,this.get(lt,pt)|it.get(lt,pt));return this},mt.or=function(it,lt){return new ot(it).or(lt)},mt.prototype.xor=function(it){return typeof it=="number"?this.xorS(it):this.xorM(it)},mt.prototype.xorS=function(it){for(let lt=0;lt<this.rows;lt++)for(let pt=0;pt<this.columns;pt++)this.set(lt,pt,this.get(lt,pt)^it);return this},mt.prototype.xorM=function(it){if(it=ot.checkMatrix(it),this.rows!==it.rows||this.columns!==it.columns)throw new RangeError("Matrices dimensions must be equal");for(let lt=0;lt<this.rows;lt++)for(let pt=0;pt<this.columns;pt++)this.set(lt,pt,this.get(lt,pt)^it.get(lt,pt));return this},mt.xor=function(it,lt){return new ot(it).xor(lt)},mt.prototype.leftShift=function(it){return typeof it=="number"?this.leftShiftS(it):this.leftShiftM(it)},mt.prototype.leftShiftS=function(it){for(let lt=0;lt<this.rows;lt++)for(let pt=0;pt<this.columns;pt++)this.set(lt,pt,this.get(lt,pt)<<it);return this},mt.prototype.leftShiftM=function(it){if(it=ot.checkMatrix(it),this.rows!==it.rows||this.columns!==it.columns)throw new RangeError("Matrices dimensions must be equal");for(let lt=0;lt<this.rows;lt++)for(let pt=0;pt<this.columns;pt++)this.set(lt,pt,this.get(lt,pt)<<it.get(lt,pt));return this},mt.leftShift=function(it,lt){return new ot(it).leftShift(lt)},mt.prototype.signPropagatingRightShift=function(it){return typeof it=="number"?this.signPropagatingRightShiftS(it):this.signPropagatingRightShiftM(it)},mt.prototype.signPropagatingRightShiftS=function(it){for(let lt=0;lt<this.rows;lt++)for(let pt=0;pt<this.columns;pt++)this.set(lt,pt,this.get(lt,pt)>>it);return this},mt.prototype.signPropagatingRightShiftM=function(it){if(it=ot.checkMatrix(it),this.rows!==it.rows||this.columns!==it.columns)throw new RangeError("Matrices dimensions must be equal");for(let lt=0;lt<this.rows;lt++)for(let pt=0;pt<this.columns;pt++)this.set(lt,pt,this.get(lt,pt)>>it.get(lt,pt));return this},mt.signPropagatingRightShift=function(it,lt){return new ot(it).signPropagatingRightShift(lt)},mt.prototype.rightShift=function(it){return typeof it=="number"?this.rightShiftS(it):this.rightShiftM(it)},mt.prototype.rightShiftS=function(it){for(let lt=0;lt<this.rows;lt++)for(let pt=0;pt<this.columns;pt++)this.set(lt,pt,this.get(lt,pt)>>>it);return this},mt.prototype.rightShiftM=function(it){if(it=ot.checkMatrix(it),this.rows!==it.rows||this.columns!==it.columns)throw new RangeError("Matrices dimensions must be equal");for(let lt=0;lt<this.rows;lt++)for(let pt=0;pt<this.columns;pt++)this.set(lt,pt,this.get(lt,pt)>>>it.get(lt,pt));return this},mt.rightShift=function(it,lt){return new ot(it).rightShift(lt)},mt.prototype.zeroFillRightShift=mt.prototype.rightShift,mt.prototype.zeroFillRightShiftS=mt.prototype.rightShiftS,mt.prototype.zeroFillRightShiftM=mt.prototype.rightShiftM,mt.zeroFillRightShift=mt.rightShift,mt.prototype.not=function(){for(let it=0;it<this.rows;it++)for(let lt=0;lt<this.columns;lt++)this.set(it,lt,~this.get(it,lt));return this},mt.not=function(it){return new ot(it).not()},mt.prototype.abs=function(){for(let it=0;it<this.rows;it++)for(let lt=0;lt<this.columns;lt++)this.set(it,lt,Math.abs(this.get(it,lt)));return this},mt.abs=function(it){return new ot(it).abs()},mt.prototype.acos=function(){for(let it=0;it<this.rows;it++)for(let lt=0;lt<this.columns;lt++)this.set(it,lt,Math.acos(this.get(it,lt)));return this},mt.acos=function(it){return new ot(it).acos()},mt.prototype.acosh=function(){for(let it=0;it<this.rows;it++)for(let lt=0;lt<this.columns;lt++)this.set(it,lt,Math.acosh(this.get(it,lt)));return this},mt.acosh=function(it){return new ot(it).acosh()},mt.prototype.asin=function(){for(let it=0;it<this.rows;it++)for(let lt=0;lt<this.columns;lt++)this.set(it,lt,Math.asin(this.get(it,lt)));return this},mt.asin=function(it){return new ot(it).asin()},mt.prototype.asinh=function(){for(let it=0;it<this.rows;it++)for(let lt=0;lt<this.columns;lt++)this.set(it,lt,Math.asinh(this.get(it,lt)));return this},mt.asinh=function(it){return new ot(it).asinh()},mt.prototype.atan=function(){for(let it=0;it<this.rows;it++)for(let lt=0;lt<this.columns;lt++)this.set(it,lt,Math.atan(this.get(it,lt)));return this},mt.atan=function(it){return new ot(it).atan()},mt.prototype.atanh=function(){for(let it=0;it<this.rows;it++)for(let lt=0;lt<this.columns;lt++)this.set(it,lt,Math.atanh(this.get(it,lt)));return this},mt.atanh=function(it){return new ot(it).atanh()},mt.prototype.cbrt=function(){for(let it=0;it<this.rows;it++)for(let lt=0;lt<this.columns;lt++)this.set(it,lt,Math.cbrt(this.get(it,lt)));return this},mt.cbrt=function(it){return new ot(it).cbrt()},mt.prototype.ceil=function(){for(let it=0;it<this.rows;it++)for(let lt=0;lt<this.columns;lt++)this.set(it,lt,Math.ceil(this.get(it,lt)));return this},mt.ceil=function(it){return new ot(it).ceil()},mt.prototype.clz32=function(){for(let it=0;it<this.rows;it++)for(let lt=0;lt<this.columns;lt++)this.set(it,lt,Math.clz32(this.get(it,lt)));return this},mt.clz32=function(it){return new ot(it).clz32()},mt.prototype.cos=function(){for(let it=0;it<this.rows;it++)for(let lt=0;lt<this.columns;lt++)this.set(it,lt,Math.cos(this.get(it,lt)));return this},mt.cos=function(it){return new ot(it).cos()},mt.prototype.cosh=function(){for(let it=0;it<this.rows;it++)for(let lt=0;lt<this.columns;lt++)this.set(it,lt,Math.cosh(this.get(it,lt)));return this},mt.cosh=function(it){return new ot(it).cosh()},mt.prototype.exp=function(){for(let it=0;it<this.rows;it++)for(let lt=0;lt<this.columns;lt++)this.set(it,lt,Math.exp(this.get(it,lt)));return this},mt.exp=function(it){return new ot(it).exp()},mt.prototype.expm1=function(){for(let it=0;it<this.rows;it++)for(let lt=0;lt<this.columns;lt++)this.set(it,lt,Math.expm1(this.get(it,lt)));return this},mt.expm1=function(it){return new ot(it).expm1()},mt.prototype.floor=function(){for(let it=0;it<this.rows;it++)for(let lt=0;lt<this.columns;lt++)this.set(it,lt,Math.floor(this.get(it,lt)));return this},mt.floor=function(it){return new ot(it).floor()},mt.prototype.fround=function(){for(let it=0;it<this.rows;it++)for(let lt=0;lt<this.columns;lt++)this.set(it,lt,Math.fround(this.get(it,lt)));return this},mt.fround=function(it){return new ot(it).fround()},mt.prototype.log=function(){for(let it=0;it<this.rows;it++)for(let lt=0;lt<this.columns;lt++)this.set(it,lt,Math.log(this.get(it,lt)));return this},mt.log=function(it){return new ot(it).log()},mt.prototype.log1p=function(){for(let it=0;it<this.rows;it++)for(let lt=0;lt<this.columns;lt++)this.set(it,lt,Math.log1p(this.get(it,lt)));return this},mt.log1p=function(it){return new ot(it).log1p()},mt.prototype.log10=function(){for(let it=0;it<this.rows;it++)for(let lt=0;lt<this.columns;lt++)this.set(it,lt,Math.log10(this.get(it,lt)));return this},mt.log10=function(it){return new ot(it).log10()},mt.prototype.log2=function(){for(let it=0;it<this.rows;it++)for(let lt=0;lt<this.columns;lt++)this.set(it,lt,Math.log2(this.get(it,lt)));return this},mt.log2=function(it){return new ot(it).log2()},mt.prototype.round=function(){for(let it=0;it<this.rows;it++)for(let lt=0;lt<this.columns;lt++)this.set(it,lt,Math.round(this.get(it,lt)));return this},mt.round=function(it){return new ot(it).round()},mt.prototype.sign=function(){for(let it=0;it<this.rows;it++)for(let lt=0;lt<this.columns;lt++)this.set(it,lt,Math.sign(this.get(it,lt)));return this},mt.sign=function(it){return new ot(it).sign()},mt.prototype.sin=function(){for(let it=0;it<this.rows;it++)for(let lt=0;lt<this.columns;lt++)this.set(it,lt,Math.sin(this.get(it,lt)));return this},mt.sin=function(it){return new ot(it).sin()},mt.prototype.sinh=function(){for(let it=0;it<this.rows;it++)for(let lt=0;lt<this.columns;lt++)this.set(it,lt,Math.sinh(this.get(it,lt)));return this},mt.sinh=function(it){return new ot(it).sinh()},mt.prototype.sqrt=function(){for(let it=0;it<this.rows;it++)for(let lt=0;lt<this.columns;lt++)this.set(it,lt,Math.sqrt(this.get(it,lt)));return this},mt.sqrt=function(it){return new ot(it).sqrt()},mt.prototype.tan=function(){for(let it=0;it<this.rows;it++)for(let lt=0;lt<this.columns;lt++)this.set(it,lt,Math.tan(this.get(it,lt)));return this},mt.tan=function(it){return new ot(it).tan()},mt.prototype.tanh=function(){for(let it=0;it<this.rows;it++)for(let lt=0;lt<this.columns;lt++)this.set(it,lt,Math.tanh(this.get(it,lt)));return this},mt.tanh=function(it){return new ot(it).tanh()},mt.prototype.trunc=function(){for(let it=0;it<this.rows;it++)for(let lt=0;lt<this.columns;lt++)this.set(it,lt,Math.trunc(this.get(it,lt)));return this},mt.trunc=function(it){return new ot(it).trunc()},mt.pow=function(it,lt){return new ot(it).pow(lt)},mt.prototype.pow=function(it){return typeof it=="number"?this.powS(it):this.powM(it)},mt.prototype.powS=function(it){for(let lt=0;lt<this.rows;lt++)for(let pt=0;pt<this.columns;pt++)this.set(lt,pt,this.get(lt,pt)**it);return this},mt.prototype.powM=function(it){if(it=ot.checkMatrix(it),this.rows!==it.rows||this.columns!==it.columns)throw new RangeError("Matrices dimensions must be equal");for(let lt=0;lt<this.rows;lt++)for(let pt=0;pt<this.columns;pt++)this.set(lt,pt,this.get(lt,pt)**it.get(lt,pt));return this}}function At(mt,ot,it){let lt=it?mt.rows:mt.rows-1;if(ot<0||ot>lt)throw new RangeError("Row index out of range")}function ht(mt,ot,it){let lt=it?mt.columns:mt.columns-1;if(ot<0||ot>lt)throw new RangeError("Column index out of range")}function ct(mt,ot){if(ot.to1DArray&&(ot=ot.to1DArray()),ot.length!==mt.columns)throw new RangeError("vector size must be the same as the number of columns");return ot}function _t(mt,ot){if(ot.to1DArray&&(ot=ot.to1DArray()),ot.length!==mt.rows)throw new RangeError("vector size must be the same as the number of rows");return ot}function gt(mt,ot){if(!d.isAnyArray(ot))throw new TypeError("row indices must be an array");for(let it=0;it<ot.length;it++)if(ot[it]<0||ot[it]>=mt.rows)throw new RangeError("row indices are out of range")}function wt(mt,ot){if(!d.isAnyArray(ot))throw new TypeError("column indices must be an array");for(let it=0;it<ot.length;it++)if(ot[it]<0||ot[it]>=mt.columns)throw new RangeError("column indices are out of range")}function ft(mt,ot,it,lt,pt){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(xt("startRow",ot),xt("endRow",it),xt("startColumn",lt),xt("endColumn",pt),ot>it||lt>pt||ot<0||ot>=mt.rows||it<0||it>=mt.rows||lt<0||lt>=mt.columns||pt<0||pt>=mt.columns)throw new RangeError("Submatrix indices are out of range")}function dt(mt,ot=0){let it=[];for(let lt=0;lt<mt;lt++)it.push(ot);return it}function xt(mt,ot){if(typeof ot!="number")throw new TypeError(`${mt} must be a number`)}function bt(mt){if(mt.isEmpty())throw new Error("Empty matrix has no elements to index")}function Ct(mt){let ot=dt(mt.rows);for(let it=0;it<mt.rows;++it)for(let lt=0;lt<mt.columns;++lt)ot[it]+=mt.get(it,lt);return ot}function Ut(mt){let ot=dt(mt.columns);for(let it=0;it<mt.rows;++it)for(let lt=0;lt<mt.columns;++lt)ot[lt]+=mt.get(it,lt);return ot}function Qt(mt){let ot=0;for(let it=0;it<mt.rows;it++)for(let lt=0;lt<mt.columns;lt++)ot+=mt.get(it,lt);return ot}function kt(mt){let ot=dt(mt.rows,1);for(let it=0;it<mt.rows;++it)for(let lt=0;lt<mt.columns;++lt)ot[it]*=mt.get(it,lt);return ot}function Nt(mt){let ot=dt(mt.columns,1);for(let it=0;it<mt.rows;++it)for(let lt=0;lt<mt.columns;++lt)ot[lt]*=mt.get(it,lt);return ot}function Wt(mt){let ot=1;for(let it=0;it<mt.rows;it++)for(let lt=0;lt<mt.columns;lt++)ot*=mt.get(it,lt);return ot}function Vt(mt,ot,it){const lt=mt.rows,pt=mt.columns,Et=[];for(let Pt=0;Pt<lt;Pt++){let Ht=0,Mt=0,Gt=0;for(let sr=0;sr<pt;sr++)Gt=mt.get(Pt,sr)-it[Pt],Ht+=Gt,Mt+=Gt*Gt;ot?Et.push((Mt-Ht*Ht/pt)/(pt-1)):Et.push((Mt-Ht*Ht/pt)/pt)}return Et}function qt(mt,ot,it){const lt=mt.rows,pt=mt.columns,Et=[];for(let Pt=0;Pt<pt;Pt++){let Ht=0,Mt=0,Gt=0;for(let sr=0;sr<lt;sr++)Gt=mt.get(sr,Pt)-it[Pt],Ht+=Gt,Mt+=Gt*Gt;ot?Et.push((Mt-Ht*Ht/lt)/(lt-1)):Et.push((Mt-Ht*Ht/lt)/lt)}return Et}function _e(mt,ot,it){const lt=mt.rows,pt=mt.columns,Et=lt*pt;let Pt=0,Ht=0,Mt=0;for(let Gt=0;Gt<lt;Gt++)for(let sr=0;sr<pt;sr++)Mt=mt.get(Gt,sr)-it,Pt+=Mt,Ht+=Mt*Mt;return ot?(Ht-Pt*Pt/Et)/(Et-1):(Ht-Pt*Pt/Et)/Et}function Jt(mt,ot){for(let it=0;it<mt.rows;it++)for(let lt=0;lt<mt.columns;lt++)mt.set(it,lt,mt.get(it,lt)-ot[it])}function lr(mt,ot){for(let it=0;it<mt.rows;it++)for(let lt=0;lt<mt.columns;lt++)mt.set(it,lt,mt.get(it,lt)-ot[lt])}function jt(mt,ot){for(let it=0;it<mt.rows;it++)for(let lt=0;lt<mt.columns;lt++)mt.set(it,lt,mt.get(it,lt)-ot)}function ur(mt){const ot=[];for(let it=0;it<mt.rows;it++){let lt=0;for(let pt=0;pt<mt.columns;pt++)lt+=mt.get(it,pt)**2/(mt.columns-1);ot.push(Math.sqrt(lt))}return ot}function Ar(mt,ot){for(let it=0;it<mt.rows;it++)for(let lt=0;lt<mt.columns;lt++)mt.set(it,lt,mt.get(it,lt)/ot[it])}function mr(mt){const ot=[];for(let it=0;it<mt.columns;it++){let lt=0;for(let pt=0;pt<mt.rows;pt++)lt+=mt.get(pt,it)**2/(mt.rows-1);ot.push(Math.sqrt(lt))}return ot}function dr(mt,ot){for(let it=0;it<mt.rows;it++)for(let lt=0;lt<mt.columns;lt++)mt.set(it,lt,mt.get(it,lt)/ot[lt])}function Nr(mt){const ot=mt.size-1;let it=0;for(let lt=0;lt<mt.columns;lt++)for(let pt=0;pt<mt.rows;pt++)it+=mt.get(pt,lt)**2/ot;return Math.sqrt(it)}function Ur(mt,ot){for(let it=0;it<mt.rows;it++)for(let lt=0;lt<mt.columns;lt++)mt.set(it,lt,mt.get(it,lt)/ot)}class nr{static from1DArray(ot,it,lt){if(ot*it!==lt.length)throw new RangeError("data length does not match given dimensions");let pt=new vr(ot,it);for(let Et=0;Et<ot;Et++)for(let Pt=0;Pt<it;Pt++)pt.set(Et,Pt,lt[Et*it+Pt]);return pt}static rowVector(ot){let it=new vr(1,ot.length);for(let lt=0;lt<ot.length;lt++)it.set(0,lt,ot[lt]);return it}static columnVector(ot){let it=new vr(ot.length,1);for(let lt=0;lt<ot.length;lt++)it.set(lt,0,ot[lt]);return it}static zeros(ot,it){return new vr(ot,it)}static ones(ot,it){return new vr(ot,it).fill(1)}static rand(ot,it,lt={}){if(typeof lt!="object")throw new TypeError("options must be an object");const{random:pt=Math.random}=lt;let Et=new vr(ot,it);for(let Pt=0;Pt<ot;Pt++)for(let Ht=0;Ht<it;Ht++)Et.set(Pt,Ht,pt());return Et}static randInt(ot,it,lt={}){if(typeof lt!="object")throw new TypeError("options must be an object");const{min:pt=0,max:Et=1e3,random:Pt=Math.random}=lt;if(!Number.isInteger(pt))throw new TypeError("min must be an integer");if(!Number.isInteger(Et))throw new TypeError("max must be an integer");if(pt>=Et)throw new RangeError("min must be smaller than max");let Ht=Et-pt,Mt=new vr(ot,it);for(let Gt=0;Gt<ot;Gt++)for(let sr=0;sr<it;sr++){let Xt=pt+Math.round(Pt()*Ht);Mt.set(Gt,sr,Xt)}return Mt}static eye(ot,it,lt){it===void 0&&(it=ot),lt===void 0&&(lt=1);let pt=Math.min(ot,it),Et=this.zeros(ot,it);for(let Pt=0;Pt<pt;Pt++)Et.set(Pt,Pt,lt);return Et}static diag(ot,it,lt){let pt=ot.length;it===void 0&&(it=pt),lt===void 0&&(lt=it);let Et=Math.min(pt,it,lt),Pt=this.zeros(it,lt);for(let Ht=0;Ht<Et;Ht++)Pt.set(Ht,Ht,ot[Ht]);return Pt}static min(ot,it){ot=this.checkMatrix(ot),it=this.checkMatrix(it);let lt=ot.rows,pt=ot.columns,Et=new vr(lt,pt);for(let Pt=0;Pt<lt;Pt++)for(let Ht=0;Ht<pt;Ht++)Et.set(Pt,Ht,Math.min(ot.get(Pt,Ht),it.get(Pt,Ht)));return Et}static max(ot,it){ot=this.checkMatrix(ot),it=this.checkMatrix(it);let lt=ot.rows,pt=ot.columns,Et=new this(lt,pt);for(let Pt=0;Pt<lt;Pt++)for(let Ht=0;Ht<pt;Ht++)Et.set(Pt,Ht,Math.max(ot.get(Pt,Ht),it.get(Pt,Ht)));return Et}static checkMatrix(ot){return nr.isMatrix(ot)?ot:new vr(ot)}static isMatrix(ot){return ot!=null&&ot.klass==="Matrix"}get size(){return this.rows*this.columns}apply(ot){if(typeof ot!="function")throw new TypeError("callback must be a function");for(let it=0;it<this.rows;it++)for(let lt=0;lt<this.columns;lt++)ot.call(this,it,lt);return this}to1DArray(){let ot=[];for(let it=0;it<this.rows;it++)for(let lt=0;lt<this.columns;lt++)ot.push(this.get(it,lt));return ot}to2DArray(){let ot=[];for(let it=0;it<this.rows;it++){ot.push([]);for(let lt=0;lt<this.columns;lt++)ot[it].push(this.get(it,lt))}return ot}toJSON(){return this.to2DArray()}isRowVector(){return this.rows===1}isColumnVector(){return this.columns===1}isVector(){return this.rows===1||this.columns===1}isSquare(){return this.rows===this.columns}isEmpty(){return this.rows===0||this.columns===0}isSymmetric(){if(this.isSquare()){for(let ot=0;ot<this.rows;ot++)for(let it=0;it<=ot;it++)if(this.get(ot,it)!==this.get(it,ot))return!1;return!0}return!1}isDistance(){if(!this.isSymmetric())return!1;for(let ot=0;ot<this.rows;ot++)if(this.get(ot,ot)!==0)return!1;return!0}isEchelonForm(){let ot=0,it=0,lt=-1,pt=!0,Et=!1;for(;ot<this.rows&&pt;){for(it=0,Et=!1;it<this.columns&&Et===!1;)this.get(ot,it)===0?it++:this.get(ot,it)===1&&it>lt?(Et=!0,lt=it):(pt=!1,Et=!0);ot++}return pt}isReducedEchelonForm(){let ot=0,it=0,lt=-1,pt=!0,Et=!1;for(;ot<this.rows&&pt;){for(it=0,Et=!1;it<this.columns&&Et===!1;)this.get(ot,it)===0?it++:this.get(ot,it)===1&&it>lt?(Et=!0,lt=it):(pt=!1,Et=!0);for(let Pt=it+1;Pt<this.rows;Pt++)this.get(ot,Pt)!==0&&(pt=!1);ot++}return pt}echelonForm(){let ot=this.clone(),it=0,lt=0;for(;it<ot.rows&&lt<ot.columns;){let pt=it;for(let Et=it;Et<ot.rows;Et++)ot.get(Et,lt)>ot.get(pt,lt)&&(pt=Et);if(ot.get(pt,lt)===0)lt++;else{ot.swapRows(it,pt);let Et=ot.get(it,lt);for(let Pt=lt;Pt<ot.columns;Pt++)ot.set(it,Pt,ot.get(it,Pt)/Et);for(let Pt=it+1;Pt<ot.rows;Pt++){let Ht=ot.get(Pt,lt)/ot.get(it,lt);ot.set(Pt,lt,0);for(let Mt=lt+1;Mt<ot.columns;Mt++)ot.set(Pt,Mt,ot.get(Pt,Mt)-ot.get(it,Mt)*Ht)}it++,lt++}}return ot}reducedEchelonForm(){let ot=this.echelonForm(),it=ot.columns,lt=ot.rows,pt=lt-1;for(;pt>=0;)if(ot.maxRow(pt)===0)pt--;else{let Et=0,Pt=!1;for(;Et<lt&&Pt===!1;)ot.get(pt,Et)===1?Pt=!0:Et++;for(let Ht=0;Ht<pt;Ht++){let Mt=ot.get(Ht,Et);for(let Gt=Et;Gt<it;Gt++){let sr=ot.get(Ht,Gt)-Mt*ot.get(pt,Gt);ot.set(Ht,Gt,sr)}}pt--}return ot}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(ot={}){if(typeof ot!="object")throw new TypeError("options must be an object");const{rows:it=1,columns:lt=1}=ot;if(!Number.isInteger(it)||it<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(lt)||lt<=0)throw new TypeError("columns must be a positive integer");let pt=new vr(this.rows*it,this.columns*lt);for(let Et=0;Et<it;Et++)for(let Pt=0;Pt<lt;Pt++)pt.setSubMatrix(this,this.rows*Et,this.columns*Pt);return pt}fill(ot){for(let it=0;it<this.rows;it++)for(let lt=0;lt<this.columns;lt++)this.set(it,lt,ot);return this}neg(){return this.mulS(-1)}getRow(ot){At(this,ot);let it=[];for(let lt=0;lt<this.columns;lt++)it.push(this.get(ot,lt));return it}getRowVector(ot){return vr.rowVector(this.getRow(ot))}setRow(ot,it){At(this,ot),it=ct(this,it);for(let lt=0;lt<this.columns;lt++)this.set(ot,lt,it[lt]);return this}swapRows(ot,it){At(this,ot),At(this,it);for(let lt=0;lt<this.columns;lt++){let pt=this.get(ot,lt);this.set(ot,lt,this.get(it,lt)),this.set(it,lt,pt)}return this}getColumn(ot){ht(this,ot);let it=[];for(let lt=0;lt<this.rows;lt++)it.push(this.get(lt,ot));return it}getColumnVector(ot){return vr.columnVector(this.getColumn(ot))}setColumn(ot,it){ht(this,ot),it=_t(this,it);for(let lt=0;lt<this.rows;lt++)this.set(lt,ot,it[lt]);return this}swapColumns(ot,it){ht(this,ot),ht(this,it);for(let lt=0;lt<this.rows;lt++){let pt=this.get(lt,ot);this.set(lt,ot,this.get(lt,it)),this.set(lt,it,pt)}return this}addRowVector(ot){ot=ct(this,ot);for(let it=0;it<this.rows;it++)for(let lt=0;lt<this.columns;lt++)this.set(it,lt,this.get(it,lt)+ot[lt]);return this}subRowVector(ot){ot=ct(this,ot);for(let it=0;it<this.rows;it++)for(let lt=0;lt<this.columns;lt++)this.set(it,lt,this.get(it,lt)-ot[lt]);return this}mulRowVector(ot){ot=ct(this,ot);for(let it=0;it<this.rows;it++)for(let lt=0;lt<this.columns;lt++)this.set(it,lt,this.get(it,lt)*ot[lt]);return this}divRowVector(ot){ot=ct(this,ot);for(let it=0;it<this.rows;it++)for(let lt=0;lt<this.columns;lt++)this.set(it,lt,this.get(it,lt)/ot[lt]);return this}addColumnVector(ot){ot=_t(this,ot);for(let it=0;it<this.rows;it++)for(let lt=0;lt<this.columns;lt++)this.set(it,lt,this.get(it,lt)+ot[it]);return this}subColumnVector(ot){ot=_t(this,ot);for(let it=0;it<this.rows;it++)for(let lt=0;lt<this.columns;lt++)this.set(it,lt,this.get(it,lt)-ot[it]);return this}mulColumnVector(ot){ot=_t(this,ot);for(let it=0;it<this.rows;it++)for(let lt=0;lt<this.columns;lt++)this.set(it,lt,this.get(it,lt)*ot[it]);return this}divColumnVector(ot){ot=_t(this,ot);for(let it=0;it<this.rows;it++)for(let lt=0;lt<this.columns;lt++)this.set(it,lt,this.get(it,lt)/ot[it]);return this}mulRow(ot,it){At(this,ot);for(let lt=0;lt<this.columns;lt++)this.set(ot,lt,this.get(ot,lt)*it);return this}mulColumn(ot,it){ht(this,ot);for(let lt=0;lt<this.rows;lt++)this.set(lt,ot,this.get(lt,ot)*it);return this}max(ot){if(this.isEmpty())return NaN;switch(ot){case"row":{const it=new Array(this.rows).fill(Number.NEGATIVE_INFINITY);for(let lt=0;lt<this.rows;lt++)for(let pt=0;pt<this.columns;pt++)this.get(lt,pt)>it[lt]&&(it[lt]=this.get(lt,pt));return it}case"column":{const it=new Array(this.columns).fill(Number.NEGATIVE_INFINITY);for(let lt=0;lt<this.rows;lt++)for(let pt=0;pt<this.columns;pt++)this.get(lt,pt)>it[pt]&&(it[pt]=this.get(lt,pt));return it}case void 0:{let it=this.get(0,0);for(let lt=0;lt<this.rows;lt++)for(let pt=0;pt<this.columns;pt++)this.get(lt,pt)>it&&(it=this.get(lt,pt));return it}default:throw new Error(`invalid option: ${ot}`)}}maxIndex(){bt(this);let ot=this.get(0,0),it=[0,0];for(let lt=0;lt<this.rows;lt++)for(let pt=0;pt<this.columns;pt++)this.get(lt,pt)>ot&&(ot=this.get(lt,pt),it[0]=lt,it[1]=pt);return it}min(ot){if(this.isEmpty())return NaN;switch(ot){case"row":{const it=new Array(this.rows).fill(Number.POSITIVE_INFINITY);for(let lt=0;lt<this.rows;lt++)for(let pt=0;pt<this.columns;pt++)this.get(lt,pt)<it[lt]&&(it[lt]=this.get(lt,pt));return it}case"column":{const it=new Array(this.columns).fill(Number.POSITIVE_INFINITY);for(let lt=0;lt<this.rows;lt++)for(let pt=0;pt<this.columns;pt++)this.get(lt,pt)<it[pt]&&(it[pt]=this.get(lt,pt));return it}case void 0:{let it=this.get(0,0);for(let lt=0;lt<this.rows;lt++)for(let pt=0;pt<this.columns;pt++)this.get(lt,pt)<it&&(it=this.get(lt,pt));return it}default:throw new Error(`invalid option: ${ot}`)}}minIndex(){bt(this);let ot=this.get(0,0),it=[0,0];for(let lt=0;lt<this.rows;lt++)for(let pt=0;pt<this.columns;pt++)this.get(lt,pt)<ot&&(ot=this.get(lt,pt),it[0]=lt,it[1]=pt);return it}maxRow(ot){if(At(this,ot),this.isEmpty())return NaN;let it=this.get(ot,0);for(let lt=1;lt<this.columns;lt++)this.get(ot,lt)>it&&(it=this.get(ot,lt));return it}maxRowIndex(ot){At(this,ot),bt(this);let it=this.get(ot,0),lt=[ot,0];for(let pt=1;pt<this.columns;pt++)this.get(ot,pt)>it&&(it=this.get(ot,pt),lt[1]=pt);return lt}minRow(ot){if(At(this,ot),this.isEmpty())return NaN;let it=this.get(ot,0);for(let lt=1;lt<this.columns;lt++)this.get(ot,lt)<it&&(it=this.get(ot,lt));return it}minRowIndex(ot){At(this,ot),bt(this);let it=this.get(ot,0),lt=[ot,0];for(let pt=1;pt<this.columns;pt++)this.get(ot,pt)<it&&(it=this.get(ot,pt),lt[1]=pt);return lt}maxColumn(ot){if(ht(this,ot),this.isEmpty())return NaN;let it=this.get(0,ot);for(let lt=1;lt<this.rows;lt++)this.get(lt,ot)>it&&(it=this.get(lt,ot));return it}maxColumnIndex(ot){ht(this,ot),bt(this);let it=this.get(0,ot),lt=[0,ot];for(let pt=1;pt<this.rows;pt++)this.get(pt,ot)>it&&(it=this.get(pt,ot),lt[0]=pt);return lt}minColumn(ot){if(ht(this,ot),this.isEmpty())return NaN;let it=this.get(0,ot);for(let lt=1;lt<this.rows;lt++)this.get(lt,ot)<it&&(it=this.get(lt,ot));return it}minColumnIndex(ot){ht(this,ot),bt(this);let it=this.get(0,ot),lt=[0,ot];for(let pt=1;pt<this.rows;pt++)this.get(pt,ot)<it&&(it=this.get(pt,ot),lt[0]=pt);return lt}diag(){let ot=Math.min(this.rows,this.columns),it=[];for(let lt=0;lt<ot;lt++)it.push(this.get(lt,lt));return it}norm(ot="frobenius"){switch(ot){case"max":return this.max();case"frobenius":return Math.sqrt(this.dot(this));default:throw new RangeError(`unknown norm type: ${ot}`)}}cumulativeSum(){let ot=0;for(let it=0;it<this.rows;it++)for(let lt=0;lt<this.columns;lt++)ot+=this.get(it,lt),this.set(it,lt,ot);return this}dot(ot){nr.isMatrix(ot)&&(ot=ot.to1DArray());let it=this.to1DArray();if(it.length!==ot.length)throw new RangeError("vectors do not have the same size");let lt=0;for(let pt=0;pt<it.length;pt++)lt+=it[pt]*ot[pt];return lt}mmul(ot){ot=vr.checkMatrix(ot);let it=this.rows,lt=this.columns,pt=ot.columns,Et=new vr(it,pt),Pt=new Float64Array(lt);for(let Ht=0;Ht<pt;Ht++){for(let Mt=0;Mt<lt;Mt++)Pt[Mt]=ot.get(Mt,Ht);for(let Mt=0;Mt<it;Mt++){let Gt=0;for(let sr=0;sr<lt;sr++)Gt+=this.get(Mt,sr)*Pt[sr];Et.set(Mt,Ht,Gt)}}return Et}mpow(ot){if(!this.isSquare())throw new RangeError("Matrix must be square");if(!Number.isInteger(ot)||ot<0)throw new RangeError("Exponent must be a non-negative integer");let it=vr.eye(this.rows),lt=this;for(let pt=ot;pt>=1;pt/=2)pt&1&&(it=it.mmul(lt)),lt=lt.mmul(lt);return it}strassen2x2(ot){ot=vr.checkMatrix(ot);let it=new vr(2,2);const lt=this.get(0,0),pt=ot.get(0,0),Et=this.get(0,1),Pt=ot.get(0,1),Ht=this.get(1,0),Mt=ot.get(1,0),Gt=this.get(1,1),sr=ot.get(1,1),Xt=(lt+Gt)*(pt+sr),wr=(Ht+Gt)*pt,Fr=lt*(Pt-sr),cr=Gt*(Mt-pt),Br=(lt+Et)*sr,Vr=(Ht-lt)*(pt+Pt),rr=(Et-Gt)*(Mt+sr),Mr=Xt+cr-Br+rr,Jr=Fr+Br,fn=wr+cr,dn=Xt-wr+Fr+Vr;return it.set(0,0,Mr),it.set(0,1,Jr),it.set(1,0,fn),it.set(1,1,dn),it}strassen3x3(ot){ot=vr.checkMatrix(ot);let it=new vr(3,3);const lt=this.get(0,0),pt=this.get(0,1),Et=this.get(0,2),Pt=this.get(1,0),Ht=this.get(1,1),Mt=this.get(1,2),Gt=this.get(2,0),sr=this.get(2,1),Xt=this.get(2,2),wr=ot.get(0,0),Fr=ot.get(0,1),cr=ot.get(0,2),Br=ot.get(1,0),Vr=ot.get(1,1),rr=ot.get(1,2),Mr=ot.get(2,0),Jr=ot.get(2,1),fn=ot.get(2,2),dn=(lt+pt+Et-Pt-Ht-sr-Xt)*Vr,xn=(lt-Pt)*(-Fr+Vr),an=Ht*(-wr+Fr+Br-Vr-rr-Mr+fn),hn=(-lt+Pt+Ht)*(wr-Fr+Vr),Sn=(Pt+Ht)*(-wr+Fr),ar=lt*wr,Rr=(-lt+Gt+sr)*(wr-cr+rr),tn=(-lt+Gt)*(cr-rr),Pr=(Gt+sr)*(-wr+cr),Cn=(lt+pt+Et-Ht-Mt-Gt-sr)*rr,En=sr*(-wr+cr+Br-Vr-rr-Mr+Jr),Fn=(-Et+sr+Xt)*(Vr+Mr-Jr),bn=(Et-Xt)*(Vr-Jr),gn=Et*Mr,Bn=(sr+Xt)*(-Mr+Jr),Qn=(-Et+Ht+Mt)*(rr+Mr-fn),Ln=(Et-Mt)*(rr-fn),Pn=(Ht+Mt)*(-Mr+fn),_n=pt*Br,cn=Mt*Jr,vn=Pt*cr,Mn=Gt*Fr,In=Xt*fn,Nn=ar+gn+_n,OA=dn+hn+Sn+ar+Fn+gn+Bn,aA=ar+Rr+Pr+Cn+gn+Qn+Pn,qn=xn+an+hn+ar+gn+Qn+Ln,Tn=xn+hn+Sn+ar+cn,jn=gn+Qn+Ln+Pn+vn,rA=ar+Rr+tn+En+Fn+bn+gn,nA=Fn+bn+gn+Bn+Mn,dA=ar+Rr+tn+Pr+In;return it.set(0,0,Nn),it.set(0,1,OA),it.set(0,2,aA),it.set(1,0,qn),it.set(1,1,Tn),it.set(1,2,jn),it.set(2,0,rA),it.set(2,1,nA),it.set(2,2,dA),it}mmulStrassen(ot){ot=vr.checkMatrix(ot);let it=this.clone(),lt=it.rows,pt=it.columns,Et=ot.rows,Pt=ot.columns;pt!==Et&&console.warn(`Multiplying ${lt} x ${pt} and ${Et} x ${Pt} matrix: dimensions do not match.`);function Ht(Xt,wr,Fr){let cr=Xt.rows,Br=Xt.columns;if(cr===wr&&Br===Fr)return Xt;{let Vr=nr.zeros(wr,Fr);return Vr=Vr.setSubMatrix(Xt,0,0),Vr}}let Mt=Math.max(lt,Et),Gt=Math.max(pt,Pt);it=Ht(it,Mt,Gt),ot=Ht(ot,Mt,Gt);function sr(Xt,wr,Fr,cr){if(Fr<=512||cr<=512)return Xt.mmul(wr);Fr%2===1&&cr%2===1?(Xt=Ht(Xt,Fr+1,cr+1),wr=Ht(wr,Fr+1,cr+1)):Fr%2===1?(Xt=Ht(Xt,Fr+1,cr),wr=Ht(wr,Fr+1,cr)):cr%2===1&&(Xt=Ht(Xt,Fr,cr+1),wr=Ht(wr,Fr,cr+1));let Br=parseInt(Xt.rows/2,10),Vr=parseInt(Xt.columns/2,10),rr=Xt.subMatrix(0,Br-1,0,Vr-1),Mr=wr.subMatrix(0,Br-1,0,Vr-1),Jr=Xt.subMatrix(0,Br-1,Vr,Xt.columns-1),fn=wr.subMatrix(0,Br-1,Vr,wr.columns-1),dn=Xt.subMatrix(Br,Xt.rows-1,0,Vr-1),xn=wr.subMatrix(Br,wr.rows-1,0,Vr-1),an=Xt.subMatrix(Br,Xt.rows-1,Vr,Xt.columns-1),hn=wr.subMatrix(Br,wr.rows-1,Vr,wr.columns-1),Sn=sr(nr.add(rr,an),nr.add(Mr,hn),Br,Vr),ar=sr(nr.add(dn,an),Mr,Br,Vr),Rr=sr(rr,nr.sub(fn,hn),Br,Vr),tn=sr(an,nr.sub(xn,Mr),Br,Vr),Pr=sr(nr.add(rr,Jr),hn,Br,Vr),Cn=sr(nr.sub(dn,rr),nr.add(Mr,fn),Br,Vr),En=sr(nr.sub(Jr,an),nr.add(xn,hn),Br,Vr),Fn=nr.add(Sn,tn);Fn.sub(Pr),Fn.add(En);let bn=nr.add(Rr,Pr),gn=nr.add(ar,tn),Bn=nr.sub(Sn,ar);Bn.add(Rr),Bn.add(Cn);let Qn=nr.zeros(2*Fn.rows,2*Fn.columns);return Qn=Qn.setSubMatrix(Fn,0,0),Qn=Qn.setSubMatrix(bn,Fn.rows,0),Qn=Qn.setSubMatrix(gn,0,Fn.columns),Qn=Qn.setSubMatrix(Bn,Fn.rows,Fn.columns),Qn.subMatrix(0,Fr-1,0,cr-1)}return sr(it,ot,Mt,Gt)}scaleRows(ot={}){if(typeof ot!="object")throw new TypeError("options must be an object");const{min:it=0,max:lt=1}=ot;if(!Number.isFinite(it))throw new TypeError("min must be a number");if(!Number.isFinite(lt))throw new TypeError("max must be a number");if(it>=lt)throw new RangeError("min must be smaller than max");let pt=new vr(this.rows,this.columns);for(let Et=0;Et<this.rows;Et++){const Pt=this.getRow(Et);Pt.length>0&&g(Pt,{min:it,max:lt,output:Pt}),pt.setRow(Et,Pt)}return pt}scaleColumns(ot={}){if(typeof ot!="object")throw new TypeError("options must be an object");const{min:it=0,max:lt=1}=ot;if(!Number.isFinite(it))throw new TypeError("min must be a number");if(!Number.isFinite(lt))throw new TypeError("max must be a number");if(it>=lt)throw new RangeError("min must be smaller than max");let pt=new vr(this.rows,this.columns);for(let Et=0;Et<this.columns;Et++){const Pt=this.getColumn(Et);Pt.length&&g(Pt,{min:it,max:lt,output:Pt}),pt.setColumn(Et,Pt)}return pt}flipRows(){const ot=Math.ceil(this.columns/2);for(let it=0;it<this.rows;it++)for(let lt=0;lt<ot;lt++){let pt=this.get(it,lt),Et=this.get(it,this.columns-1-lt);this.set(it,lt,Et),this.set(it,this.columns-1-lt,pt)}return this}flipColumns(){const ot=Math.ceil(this.rows/2);for(let it=0;it<this.columns;it++)for(let lt=0;lt<ot;lt++){let pt=this.get(lt,it),Et=this.get(this.rows-1-lt,it);this.set(lt,it,Et),this.set(this.rows-1-lt,it,pt)}return this}kroneckerProduct(ot){ot=vr.checkMatrix(ot);let it=this.rows,lt=this.columns,pt=ot.rows,Et=ot.columns,Pt=new vr(it*pt,lt*Et);for(let Ht=0;Ht<it;Ht++)for(let Mt=0;Mt<lt;Mt++)for(let Gt=0;Gt<pt;Gt++)for(let sr=0;sr<Et;sr++)Pt.set(pt*Ht+Gt,Et*Mt+sr,this.get(Ht,Mt)*ot.get(Gt,sr));return Pt}kroneckerSum(ot){if(ot=vr.checkMatrix(ot),!this.isSquare()||!ot.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");let it=this.rows,lt=ot.rows,pt=this.kroneckerProduct(vr.eye(lt,lt)),Et=vr.eye(it,it).kroneckerProduct(ot);return pt.add(Et)}transpose(){let ot=new vr(this.columns,this.rows);for(let it=0;it<this.rows;it++)for(let lt=0;lt<this.columns;lt++)ot.set(lt,it,this.get(it,lt));return ot}sortRows(ot=hr){for(let it=0;it<this.rows;it++)this.setRow(it,this.getRow(it).sort(ot));return this}sortColumns(ot=hr){for(let it=0;it<this.columns;it++)this.setColumn(it,this.getColumn(it).sort(ot));return this}subMatrix(ot,it,lt,pt){ft(this,ot,it,lt,pt);let Et=new vr(it-ot+1,pt-lt+1);for(let Pt=ot;Pt<=it;Pt++)for(let Ht=lt;Ht<=pt;Ht++)Et.set(Pt-ot,Ht-lt,this.get(Pt,Ht));return Et}subMatrixRow(ot,it,lt){if(it===void 0&&(it=0),lt===void 0&&(lt=this.columns-1),it>lt||it<0||it>=this.columns||lt<0||lt>=this.columns)throw new RangeError("Argument out of range");let pt=new vr(ot.length,lt-it+1);for(let Et=0;Et<ot.length;Et++)for(let Pt=it;Pt<=lt;Pt++){if(ot[Et]<0||ot[Et]>=this.rows)throw new RangeError(`Row index out of range: ${ot[Et]}`);pt.set(Et,Pt-it,this.get(ot[Et],Pt))}return pt}subMatrixColumn(ot,it,lt){if(it===void 0&&(it=0),lt===void 0&&(lt=this.rows-1),it>lt||it<0||it>=this.rows||lt<0||lt>=this.rows)throw new RangeError("Argument out of range");let pt=new vr(lt-it+1,ot.length);for(let Et=0;Et<ot.length;Et++)for(let Pt=it;Pt<=lt;Pt++){if(ot[Et]<0||ot[Et]>=this.columns)throw new RangeError(`Column index out of range: ${ot[Et]}`);pt.set(Pt-it,Et,this.get(Pt,ot[Et]))}return pt}setSubMatrix(ot,it,lt){if(ot=vr.checkMatrix(ot),ot.isEmpty())return this;let pt=it+ot.rows-1,Et=lt+ot.columns-1;ft(this,it,pt,lt,Et);for(let Pt=0;Pt<ot.rows;Pt++)for(let Ht=0;Ht<ot.columns;Ht++)this.set(it+Pt,lt+Ht,ot.get(Pt,Ht));return this}selection(ot,it){gt(this,ot),wt(this,it);let lt=new vr(ot.length,it.length);for(let pt=0;pt<ot.length;pt++){let Et=ot[pt];for(let Pt=0;Pt<it.length;Pt++){let Ht=it[Pt];lt.set(pt,Pt,this.get(Et,Ht))}}return lt}trace(){let ot=Math.min(this.rows,this.columns),it=0;for(let lt=0;lt<ot;lt++)it+=this.get(lt,lt);return it}clone(){return this.constructor.copy(this,new vr(this.rows,this.columns))}static copy(ot,it){for(const[lt,pt,Et]of ot.entries())it.set(lt,pt,Et);return it}sum(ot){switch(ot){case"row":return Ct(this);case"column":return Ut(this);case void 0:return Qt(this);default:throw new Error(`invalid option: ${ot}`)}}product(ot){switch(ot){case"row":return kt(this);case"column":return Nt(this);case void 0:return Wt(this);default:throw new Error(`invalid option: ${ot}`)}}mean(ot){const it=this.sum(ot);switch(ot){case"row":{for(let lt=0;lt<this.rows;lt++)it[lt]/=this.columns;return it}case"column":{for(let lt=0;lt<this.columns;lt++)it[lt]/=this.rows;return it}case void 0:return it/this.size;default:throw new Error(`invalid option: ${ot}`)}}variance(ot,it={}){if(typeof ot=="object"&&(it=ot,ot=void 0),typeof it!="object")throw new TypeError("options must be an object");const{unbiased:lt=!0,mean:pt=this.mean(ot)}=it;if(typeof lt!="boolean")throw new TypeError("unbiased must be a boolean");switch(ot){case"row":{if(!d.isAnyArray(pt))throw new TypeError("mean must be an array");return Vt(this,lt,pt)}case"column":{if(!d.isAnyArray(pt))throw new TypeError("mean must be an array");return qt(this,lt,pt)}case void 0:{if(typeof pt!="number")throw new TypeError("mean must be a number");return _e(this,lt,pt)}default:throw new Error(`invalid option: ${ot}`)}}standardDeviation(ot,it){typeof ot=="object"&&(it=ot,ot=void 0);const lt=this.variance(ot,it);if(ot===void 0)return Math.sqrt(lt);for(let pt=0;pt<lt.length;pt++)lt[pt]=Math.sqrt(lt[pt]);return lt}center(ot,it={}){if(typeof ot=="object"&&(it=ot,ot=void 0),typeof it!="object")throw new TypeError("options must be an object");const{center:lt=this.mean(ot)}=it;switch(ot){case"row":{if(!d.isAnyArray(lt))throw new TypeError("center must be an array");return Jt(this,lt),this}case"column":{if(!d.isAnyArray(lt))throw new TypeError("center must be an array");return lr(this,lt),this}case void 0:{if(typeof lt!="number")throw new TypeError("center must be a number");return jt(this,lt),this}default:throw new Error(`invalid option: ${ot}`)}}scale(ot,it={}){if(typeof ot=="object"&&(it=ot,ot=void 0),typeof it!="object")throw new TypeError("options must be an object");let lt=it.scale;switch(ot){case"row":{if(lt===void 0)lt=ur(this);else if(!d.isAnyArray(lt))throw new TypeError("scale must be an array");return Ar(this,lt),this}case"column":{if(lt===void 0)lt=mr(this);else if(!d.isAnyArray(lt))throw new TypeError("scale must be an array");return dr(this,lt),this}case void 0:{if(lt===void 0)lt=Nr(this);else if(typeof lt!="number")throw new TypeError("scale must be a number");return Ur(this,lt),this}default:throw new Error(`invalid option: ${ot}`)}}toString(ot){return et(this,ot)}[Symbol.iterator](){return this.entries()}*entries(){for(let ot=0;ot<this.rows;ot++)for(let it=0;it<this.columns;it++)yield[ot,it,this.get(ot,it)]}*values(){for(let ot=0;ot<this.rows;ot++)for(let it=0;it<this.columns;it++)yield this.get(ot,it)}}nr.prototype.klass="Matrix",typeof Symbol<"u"&&(nr.prototype[Symbol.for("nodejs.util.inspect.custom")]=j);function hr(mt,ot){return mt-ot}function Dr(mt){return mt.every(ot=>typeof ot=="number")}nr.random=nr.rand,nr.randomInt=nr.randInt,nr.diagonal=nr.diag,nr.prototype.diagonal=nr.prototype.diag,nr.identity=nr.eye,nr.prototype.negate=nr.prototype.neg,nr.prototype.tensorProduct=nr.prototype.kroneckerProduct;const Qr=class ls extends nr{constructor(ot,it){if(super(),It(this,s),$e(this,"data"),ls.isMatrix(ot))$t(this,s,o).call(this,ot.rows,ot.columns),ls.copy(ot,this);else if(Number.isInteger(ot)&&ot>=0)$t(this,s,o).call(this,ot,it);else if(d.isAnyArray(ot)){const lt=ot;if(ot=lt.length,it=ot?lt[0].length:0,typeof it!="number")throw new TypeError("Data must be a 2D array with at least one element");this.data=[];for(let pt=0;pt<ot;pt++){if(lt[pt].length!==it)throw new RangeError("Inconsistent array dimensions");if(!Dr(lt[pt]))throw new TypeError("Input data contains non-numeric values");this.data.push(Float64Array.from(lt[pt]))}this.rows=ot,this.columns=it}else throw new TypeError("First argument must be a positive number or an array")}set(ot,it,lt){return this.data[ot][it]=lt,this}get(ot,it){return this.data[ot][it]}removeRow(ot){return At(this,ot),this.data.splice(ot,1),this.rows-=1,this}addRow(ot,it){return it===void 0&&(it=ot,ot=this.rows),At(this,ot,!0),it=Float64Array.from(ct(this,it)),this.data.splice(ot,0,it),this.rows+=1,this}removeColumn(ot){ht(this,ot);for(let it=0;it<this.rows;it++){const lt=new Float64Array(this.columns-1);for(let pt=0;pt<ot;pt++)lt[pt]=this.data[it][pt];for(let pt=ot+1;pt<this.columns;pt++)lt[pt-1]=this.data[it][pt];this.data[it]=lt}return this.columns-=1,this}addColumn(ot,it){typeof it>"u"&&(it=ot,ot=this.columns),ht(this,ot,!0),it=_t(this,it);for(let lt=0;lt<this.rows;lt++){const pt=new Float64Array(this.columns+1);let Et=0;for(;Et<ot;Et++)pt[Et]=this.data[lt][Et];for(pt[Et++]=it[lt];Et<this.columns+1;Et++)pt[Et]=this.data[lt][Et-1];this.data[lt]=pt}return this.columns+=1,this}};s=new WeakSet,o=function(mt,ot){if(this.data=[],Number.isInteger(ot)&&ot>=0)for(let it=0;it<mt;it++)this.data.push(new Float64Array(ot));else throw new TypeError("nColumns must be a positive integer");this.rows=mt,this.columns=ot};let vr=Qr;st(nr,vr);const on=class us extends nr{constructor(ot){if(super(),It(this,h),vr.isMatrix(ot)){if(!ot.isSymmetric())throw new TypeError("not symmetric data");Dt(this,h,vr.copy(ot,new vr(ot.rows,ot.rows)))}else if(Number.isInteger(ot)&&ot>=0)Dt(this,h,new vr(ot,ot));else if(Dt(this,h,new vr(ot)),!this.isSymmetric())throw new TypeError("not symmetric data")}get size(){return St(this,h).size}get rows(){return St(this,h).rows}get columns(){return St(this,h).columns}get diagonalSize(){return this.rows}static isSymmetricMatrix(ot){return vr.isMatrix(ot)&&ot.klassType==="SymmetricMatrix"}static zeros(ot){return new this(ot)}static ones(ot){return new this(ot).fill(1)}clone(){const ot=new us(this.diagonalSize);for(const[it,lt,pt]of this.upperRightEntries())ot.set(it,lt,pt);return ot}toMatrix(){return new vr(this)}get(ot,it){return St(this,h).get(ot,it)}set(ot,it,lt){return St(this,h).set(ot,it,lt),St(this,h).set(it,ot,lt),this}removeCross(ot){return St(this,h).removeRow(ot),St(this,h).removeColumn(ot),this}addCross(ot,it){it===void 0&&(it=ot,ot=this.diagonalSize);const lt=it.slice();return lt.splice(ot,1),St(this,h).addRow(ot,lt),St(this,h).addColumn(ot,it),this}applyMask(ot){if(ot.length!==this.diagonalSize)throw new RangeError("Mask size do not match with matrix size");const it=[];for(const[lt,pt]of ot.entries())pt||it.push(lt);it.reverse();for(const lt of it)this.removeCross(lt);return this}toCompact(){const{diagonalSize:ot}=this,it=new Array(ot*(ot+1)/2);for(let lt=0,pt=0,Et=0;Et<it.length;Et++)it[Et]=this.get(pt,lt),++lt>=ot&&(lt=++pt);return it}static fromCompact(ot){const it=ot.length,lt=(Math.sqrt(8*it+1)-1)/2;if(!Number.isInteger(lt))throw new TypeError(`This array is not a compact representation of a Symmetric Matrix, ${JSON.stringify(ot)}`);const pt=new us(lt);for(let Et=0,Pt=0,Ht=0;Ht<it;Ht++)pt.set(Et,Pt,ot[Ht]),++Et>=lt&&(Et=++Pt);return pt}*upperRightEntries(){for(let ot=0,it=0;ot<this.diagonalSize;void 0){const lt=this.get(ot,it);yield[ot,it,lt],++it>=this.diagonalSize&&(it=++ot)}}*upperRightValues(){for(let ot=0,it=0;ot<this.diagonalSize;void 0)yield this.get(ot,it),++it>=this.diagonalSize&&(it=++ot)}};h=new WeakMap;let en=on;en.prototype.klassType="SymmetricMatrix";class zr extends en{static isDistanceMatrix(ot){return en.isSymmetricMatrix(ot)&&ot.klassSubType==="DistanceMatrix"}constructor(ot){if(super(ot),!this.isDistance())throw new TypeError("Provided arguments do no produce a distance matrix")}set(ot,it,lt){return ot===it&&(lt=0),super.set(ot,it,lt)}addCross(ot,it){return it===void 0&&(it=ot,ot=this.diagonalSize),it=it.slice(),it[ot]=0,super.addCross(ot,it)}toSymmetricMatrix(){return new en(this)}clone(){const ot=new zr(this.diagonalSize);for(const[it,lt,pt]of this.upperRightEntries())it!==lt&&ot.set(it,lt,pt);return ot}toCompact(){const{diagonalSize:ot}=this,it=(ot-1)*ot/2,lt=new Array(it);for(let pt=1,Et=0,Pt=0;Pt<lt.length;Pt++)lt[Pt]=this.get(Et,pt),++pt>=ot&&(pt=++Et+1);return lt}static fromCompact(ot){const it=ot.length;if(it===0)return new this(0);const lt=(Math.sqrt(8*it+1)+1)/2;if(!Number.isInteger(lt))throw new TypeError(`This array is not a compact representation of a DistanceMatrix, ${JSON.stringify(ot)}`);const pt=new this(lt);for(let Et=1,Pt=0,Ht=0;Ht<it;Ht++)pt.set(Et,Pt,ot[Ht]),++Et>=lt&&(Et=++Pt+1);return pt}}zr.prototype.klassSubType="DistanceMatrix";class or extends nr{constructor(ot,it,lt){super(),this.matrix=ot,this.rows=it,this.columns=lt}}class xr extends or{constructor(ot,it){ht(ot,it),super(ot,ot.rows,1),this.column=it}set(ot,it,lt){return this.matrix.set(ot,this.column,lt),this}get(ot){return this.matrix.get(ot,this.column)}}class Wr extends or{constructor(ot,it){wt(ot,it),super(ot,ot.rows,it.length),this.columnIndices=it}set(ot,it,lt){return this.matrix.set(ot,this.columnIndices[it],lt),this}get(ot,it){return this.matrix.get(ot,this.columnIndices[it])}}class $r extends or{constructor(ot){super(ot,ot.rows,ot.columns)}set(ot,it,lt){return this.matrix.set(ot,this.columns-it-1,lt),this}get(ot,it){return this.matrix.get(ot,this.columns-it-1)}}class Or extends or{constructor(ot){super(ot,ot.rows,ot.columns)}set(ot,it,lt){return this.matrix.set(this.rows-ot-1,it,lt),this}get(ot,it){return this.matrix.get(this.rows-ot-1,it)}}class qr extends or{constructor(ot,it){At(ot,it),super(ot,1,ot.columns),this.row=it}set(ot,it,lt){return this.matrix.set(this.row,it,lt),this}get(ot,it){return this.matrix.get(this.row,it)}}class fr extends or{constructor(ot,it){gt(ot,it),super(ot,it.length,ot.columns),this.rowIndices=it}set(ot,it,lt){return this.matrix.set(this.rowIndices[ot],it,lt),this}get(ot,it){return this.matrix.get(this.rowIndices[ot],it)}}class Kr extends or{constructor(ot,it,lt){gt(ot,it),wt(ot,lt),super(ot,it.length,lt.length),this.rowIndices=it,this.columnIndices=lt}set(ot,it,lt){return this.matrix.set(this.rowIndices[ot],this.columnIndices[it],lt),this}get(ot,it){return this.matrix.get(this.rowIndices[ot],this.columnIndices[it])}}class jr extends or{constructor(ot,it,lt,pt,Et){ft(ot,it,lt,pt,Et),super(ot,lt-it+1,Et-pt+1),this.startRow=it,this.startColumn=pt}set(ot,it,lt){return this.matrix.set(this.startRow+ot,this.startColumn+it,lt),this}get(ot,it){return this.matrix.get(this.startRow+ot,this.startColumn+it)}}class Xr extends or{constructor(ot){super(ot,ot.columns,ot.rows)}set(ot,it,lt){return this.matrix.set(it,ot,lt),this}get(ot,it){return this.matrix.get(it,ot)}}class Tr extends nr{constructor(ot,it={}){const{rows:lt=1}=it;if(ot.length%lt!==0)throw new Error("the data length is not divisible by the number of rows");super(),this.rows=lt,this.columns=ot.length/lt,this.data=ot}set(ot,it,lt){let pt=this._calculateIndex(ot,it);return this.data[pt]=lt,this}get(ot,it){let lt=this._calculateIndex(ot,it);return this.data[lt]}_calculateIndex(ot,it){return ot*this.columns+it}}class An extends nr{constructor(ot){super(),this.data=ot,this.rows=ot.length,this.columns=ot[0].length}set(ot,it,lt){return this.data[ot][it]=lt,this}get(ot,it){return this.data[ot][it]}}function Gr(mt,ot){if(d.isAnyArray(mt))return mt[0]&&d.isAnyArray(mt[0])?new An(mt):new Tr(mt,ot);throw new Error("the argument is not an array")}class Yr{constructor(ot){ot=An.checkMatrix(ot);let it=ot.clone(),lt=it.rows,pt=it.columns,Et=new Float64Array(lt),Pt=1,Ht,Mt,Gt,sr,Xt,wr,Fr,cr,Br;for(Ht=0;Ht<lt;Ht++)Et[Ht]=Ht;for(cr=new Float64Array(lt),Mt=0;Mt<pt;Mt++){for(Ht=0;Ht<lt;Ht++)cr[Ht]=it.get(Ht,Mt);for(Ht=0;Ht<lt;Ht++){for(Br=Math.min(Ht,Mt),Xt=0,Gt=0;Gt<Br;Gt++)Xt+=it.get(Ht,Gt)*cr[Gt];cr[Ht]-=Xt,it.set(Ht,Mt,cr[Ht])}for(sr=Mt,Ht=Mt+1;Ht<lt;Ht++)Math.abs(cr[Ht])>Math.abs(cr[sr])&&(sr=Ht);if(sr!==Mt){for(Gt=0;Gt<pt;Gt++)wr=it.get(sr,Gt),it.set(sr,Gt,it.get(Mt,Gt)),it.set(Mt,Gt,wr);Fr=Et[sr],Et[sr]=Et[Mt],Et[Mt]=Fr,Pt=-Pt}if(Mt<lt&&it.get(Mt,Mt)!==0)for(Ht=Mt+1;Ht<lt;Ht++)it.set(Ht,Mt,it.get(Ht,Mt)/it.get(Mt,Mt))}this.LU=it,this.pivotVector=Et,this.pivotSign=Pt}isSingular(){let ot=this.LU,it=ot.columns;for(let lt=0;lt<it;lt++)if(ot.get(lt,lt)===0)return!0;return!1}solve(ot){ot=vr.checkMatrix(ot);let it=this.LU;if(it.rows!==ot.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");let lt=ot.columns,pt=ot.subMatrixRow(this.pivotVector,0,lt-1),Et=it.columns,Pt,Ht,Mt;for(Mt=0;Mt<Et;Mt++)for(Pt=Mt+1;Pt<Et;Pt++)for(Ht=0;Ht<lt;Ht++)pt.set(Pt,Ht,pt.get(Pt,Ht)-pt.get(Mt,Ht)*it.get(Pt,Mt));for(Mt=Et-1;Mt>=0;Mt--){for(Ht=0;Ht<lt;Ht++)pt.set(Mt,Ht,pt.get(Mt,Ht)/it.get(Mt,Mt));for(Pt=0;Pt<Mt;Pt++)for(Ht=0;Ht<lt;Ht++)pt.set(Pt,Ht,pt.get(Pt,Ht)-pt.get(Mt,Ht)*it.get(Pt,Mt))}return pt}get determinant(){let ot=this.LU;if(!ot.isSquare())throw new Error("Matrix must be square");let it=this.pivotSign,lt=ot.columns;for(let pt=0;pt<lt;pt++)it*=ot.get(pt,pt);return it}get lowerTriangularMatrix(){let ot=this.LU,it=ot.rows,lt=ot.columns,pt=new vr(it,lt);for(let Et=0;Et<it;Et++)for(let Pt=0;Pt<lt;Pt++)Et>Pt?pt.set(Et,Pt,ot.get(Et,Pt)):Et===Pt?pt.set(Et,Pt,1):pt.set(Et,Pt,0);return pt}get upperTriangularMatrix(){let ot=this.LU,it=ot.rows,lt=ot.columns,pt=new vr(it,lt);for(let Et=0;Et<it;Et++)for(let Pt=0;Pt<lt;Pt++)Et<=Pt?pt.set(Et,Pt,ot.get(Et,Pt)):pt.set(Et,Pt,0);return pt}get pivotPermutationVector(){return Array.from(this.pivotVector)}}function Zr(mt,ot){let it=0;return Math.abs(mt)>Math.abs(ot)?(it=ot/mt,Math.abs(mt)*Math.sqrt(1+it*it)):ot!==0?(it=mt/ot,Math.abs(ot)*Math.sqrt(1+it*it)):0}class ln{constructor(ot){ot=An.checkMatrix(ot);let it=ot.clone(),lt=ot.rows,pt=ot.columns,Et=new Float64Array(pt),Pt,Ht,Mt,Gt;for(Mt=0;Mt<pt;Mt++){let sr=0;for(Pt=Mt;Pt<lt;Pt++)sr=Zr(sr,it.get(Pt,Mt));if(sr!==0){for(it.get(Mt,Mt)<0&&(sr=-sr),Pt=Mt;Pt<lt;Pt++)it.set(Pt,Mt,it.get(Pt,Mt)/sr);for(it.set(Mt,Mt,it.get(Mt,Mt)+1),Ht=Mt+1;Ht<pt;Ht++){for(Gt=0,Pt=Mt;Pt<lt;Pt++)Gt+=it.get(Pt,Mt)*it.get(Pt,Ht);for(Gt=-Gt/it.get(Mt,Mt),Pt=Mt;Pt<lt;Pt++)it.set(Pt,Ht,it.get(Pt,Ht)+Gt*it.get(Pt,Mt))}}Et[Mt]=-sr}this.QR=it,this.Rdiag=Et}solve(ot){ot=vr.checkMatrix(ot);let it=this.QR,lt=it.rows;if(ot.rows!==lt)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");let pt=ot.columns,Et=ot.clone(),Pt=it.columns,Ht,Mt,Gt,sr;for(Gt=0;Gt<Pt;Gt++)for(Mt=0;Mt<pt;Mt++){for(sr=0,Ht=Gt;Ht<lt;Ht++)sr+=it.get(Ht,Gt)*Et.get(Ht,Mt);for(sr=-sr/it.get(Gt,Gt),Ht=Gt;Ht<lt;Ht++)Et.set(Ht,Mt,Et.get(Ht,Mt)+sr*it.get(Ht,Gt))}for(Gt=Pt-1;Gt>=0;Gt--){for(Mt=0;Mt<pt;Mt++)Et.set(Gt,Mt,Et.get(Gt,Mt)/this.Rdiag[Gt]);for(Ht=0;Ht<Gt;Ht++)for(Mt=0;Mt<pt;Mt++)Et.set(Ht,Mt,Et.get(Ht,Mt)-Et.get(Gt,Mt)*it.get(Ht,Gt))}return Et.subMatrix(0,Pt-1,0,pt-1)}isFullRank(){let ot=this.QR.columns;for(let it=0;it<ot;it++)if(this.Rdiag[it]===0)return!1;return!0}get upperTriangularMatrix(){let ot=this.QR,it=ot.columns,lt=new vr(it,it),pt,Et;for(pt=0;pt<it;pt++)for(Et=0;Et<it;Et++)pt<Et?lt.set(pt,Et,ot.get(pt,Et)):pt===Et?lt.set(pt,Et,this.Rdiag[pt]):lt.set(pt,Et,0);return lt}get orthogonalMatrix(){let ot=this.QR,it=ot.rows,lt=ot.columns,pt=new vr(it,lt),Et,Pt,Ht,Mt;for(Ht=lt-1;Ht>=0;Ht--){for(Et=0;Et<it;Et++)pt.set(Et,Ht,0);for(pt.set(Ht,Ht,1),Pt=Ht;Pt<lt;Pt++)if(ot.get(Ht,Ht)!==0){for(Mt=0,Et=Ht;Et<it;Et++)Mt+=ot.get(Et,Ht)*pt.get(Et,Pt);for(Mt=-Mt/ot.get(Ht,Ht),Et=Ht;Et<it;Et++)pt.set(Et,Pt,pt.get(Et,Pt)+Mt*ot.get(Et,Ht))}}return pt}}class Hr{constructor(ot,it={}){if(ot=An.checkMatrix(ot),ot.isEmpty())throw new Error("Matrix must be non-empty");let lt=ot.rows,pt=ot.columns;const{computeLeftSingularVectors:Et=!0,computeRightSingularVectors:Pt=!0,autoTranspose:Ht=!1}=it;let Mt=!!Et,Gt=!!Pt,sr=!1,Xt;if(lt<pt)if(!Ht)Xt=ot.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{Xt=ot.transpose(),lt=Xt.rows,pt=Xt.columns,sr=!0;let ar=Mt;Mt=Gt,Gt=ar}else Xt=ot.clone();let wr=Math.min(lt,pt),Fr=Math.min(lt+1,pt),cr=new Float64Array(Fr),Br=new vr(lt,wr),Vr=new vr(pt,pt),rr=new Float64Array(pt),Mr=new Float64Array(lt),Jr=new Float64Array(Fr);for(let ar=0;ar<Fr;ar++)Jr[ar]=ar;let fn=Math.min(lt-1,pt),dn=Math.max(0,Math.min(pt-2,lt)),xn=Math.max(fn,dn);for(let ar=0;ar<xn;ar++){if(ar<fn){cr[ar]=0;for(let Rr=ar;Rr<lt;Rr++)cr[ar]=Zr(cr[ar],Xt.get(Rr,ar));if(cr[ar]!==0){Xt.get(ar,ar)<0&&(cr[ar]=-cr[ar]);for(let Rr=ar;Rr<lt;Rr++)Xt.set(Rr,ar,Xt.get(Rr,ar)/cr[ar]);Xt.set(ar,ar,Xt.get(ar,ar)+1)}cr[ar]=-cr[ar]}for(let Rr=ar+1;Rr<pt;Rr++){if(ar<fn&&cr[ar]!==0){let tn=0;for(let Pr=ar;Pr<lt;Pr++)tn+=Xt.get(Pr,ar)*Xt.get(Pr,Rr);tn=-tn/Xt.get(ar,ar);for(let Pr=ar;Pr<lt;Pr++)Xt.set(Pr,Rr,Xt.get(Pr,Rr)+tn*Xt.get(Pr,ar))}rr[Rr]=Xt.get(ar,Rr)}if(Mt&&ar<fn)for(let Rr=ar;Rr<lt;Rr++)Br.set(Rr,ar,Xt.get(Rr,ar));if(ar<dn){rr[ar]=0;for(let Rr=ar+1;Rr<pt;Rr++)rr[ar]=Zr(rr[ar],rr[Rr]);if(rr[ar]!==0){rr[ar+1]<0&&(rr[ar]=0-rr[ar]);for(let Rr=ar+1;Rr<pt;Rr++)rr[Rr]/=rr[ar];rr[ar+1]+=1}if(rr[ar]=-rr[ar],ar+1<lt&&rr[ar]!==0){for(let Rr=ar+1;Rr<lt;Rr++)Mr[Rr]=0;for(let Rr=ar+1;Rr<lt;Rr++)for(let tn=ar+1;tn<pt;tn++)Mr[Rr]+=rr[tn]*Xt.get(Rr,tn);for(let Rr=ar+1;Rr<pt;Rr++){let tn=-rr[Rr]/rr[ar+1];for(let Pr=ar+1;Pr<lt;Pr++)Xt.set(Pr,Rr,Xt.get(Pr,Rr)+tn*Mr[Pr])}}if(Gt)for(let Rr=ar+1;Rr<pt;Rr++)Vr.set(Rr,ar,rr[Rr])}}let an=Math.min(pt,lt+1);if(fn<pt&&(cr[fn]=Xt.get(fn,fn)),lt<an&&(cr[an-1]=0),dn+1<an&&(rr[dn]=Xt.get(dn,an-1)),rr[an-1]=0,Mt){for(let ar=fn;ar<wr;ar++){for(let Rr=0;Rr<lt;Rr++)Br.set(Rr,ar,0);Br.set(ar,ar,1)}for(let ar=fn-1;ar>=0;ar--)if(cr[ar]!==0){for(let Rr=ar+1;Rr<wr;Rr++){let tn=0;for(let Pr=ar;Pr<lt;Pr++)tn+=Br.get(Pr,ar)*Br.get(Pr,Rr);tn=-tn/Br.get(ar,ar);for(let Pr=ar;Pr<lt;Pr++)Br.set(Pr,Rr,Br.get(Pr,Rr)+tn*Br.get(Pr,ar))}for(let Rr=ar;Rr<lt;Rr++)Br.set(Rr,ar,-Br.get(Rr,ar));Br.set(ar,ar,1+Br.get(ar,ar));for(let Rr=0;Rr<ar-1;Rr++)Br.set(Rr,ar,0)}else{for(let Rr=0;Rr<lt;Rr++)Br.set(Rr,ar,0);Br.set(ar,ar,1)}}if(Gt)for(let ar=pt-1;ar>=0;ar--){if(ar<dn&&rr[ar]!==0)for(let Rr=ar+1;Rr<pt;Rr++){let tn=0;for(let Pr=ar+1;Pr<pt;Pr++)tn+=Vr.get(Pr,ar)*Vr.get(Pr,Rr);tn=-tn/Vr.get(ar+1,ar);for(let Pr=ar+1;Pr<pt;Pr++)Vr.set(Pr,Rr,Vr.get(Pr,Rr)+tn*Vr.get(Pr,ar))}for(let Rr=0;Rr<pt;Rr++)Vr.set(Rr,ar,0);Vr.set(ar,ar,1)}let hn=an-1,Sn=Number.EPSILON;for(;an>0;){let ar,Rr;for(ar=an-2;ar>=-1&&ar!==-1;ar--){const tn=Number.MIN_VALUE+Sn*Math.abs(cr[ar]+Math.abs(cr[ar+1]));if(Math.abs(rr[ar])<=tn||Number.isNaN(rr[ar])){rr[ar]=0;break}}if(ar===an-2)Rr=4;else{let tn;for(tn=an-1;tn>=ar&&tn!==ar;tn--){let Pr=(tn!==an?Math.abs(rr[tn]):0)+(tn!==ar+1?Math.abs(rr[tn-1]):0);if(Math.abs(cr[tn])<=Sn*Pr){cr[tn]=0;break}}tn===ar?Rr=3:tn===an-1?Rr=1:(Rr=2,ar=tn)}switch(ar++,Rr){case 1:{let tn=rr[an-2];rr[an-2]=0;for(let Pr=an-2;Pr>=ar;Pr--){let Cn=Zr(cr[Pr],tn),En=cr[Pr]/Cn,Fn=tn/Cn;if(cr[Pr]=Cn,Pr!==ar&&(tn=-Fn*rr[Pr-1],rr[Pr-1]=En*rr[Pr-1]),Gt)for(let bn=0;bn<pt;bn++)Cn=En*Vr.get(bn,Pr)+Fn*Vr.get(bn,an-1),Vr.set(bn,an-1,-Fn*Vr.get(bn,Pr)+En*Vr.get(bn,an-1)),Vr.set(bn,Pr,Cn)}break}case 2:{let tn=rr[ar-1];rr[ar-1]=0;for(let Pr=ar;Pr<an;Pr++){let Cn=Zr(cr[Pr],tn),En=cr[Pr]/Cn,Fn=tn/Cn;if(cr[Pr]=Cn,tn=-Fn*rr[Pr],rr[Pr]=En*rr[Pr],Mt)for(let bn=0;bn<lt;bn++)Cn=En*Br.get(bn,Pr)+Fn*Br.get(bn,ar-1),Br.set(bn,ar-1,-Fn*Br.get(bn,Pr)+En*Br.get(bn,ar-1)),Br.set(bn,Pr,Cn)}break}case 3:{const tn=Math.max(Math.abs(cr[an-1]),Math.abs(cr[an-2]),Math.abs(rr[an-2]),Math.abs(cr[ar]),Math.abs(rr[ar])),Pr=cr[an-1]/tn,Cn=cr[an-2]/tn,En=rr[an-2]/tn,Fn=cr[ar]/tn,bn=rr[ar]/tn,gn=((Cn+Pr)*(Cn-Pr)+En*En)/2,Bn=Pr*En*(Pr*En);let Qn=0;(gn!==0||Bn!==0)&&(gn<0?Qn=0-Math.sqrt(gn*gn+Bn):Qn=Math.sqrt(gn*gn+Bn),Qn=Bn/(gn+Qn));let Ln=(Fn+Pr)*(Fn-Pr)+Qn,Pn=Fn*bn;for(let _n=ar;_n<an-1;_n++){let cn=Zr(Ln,Pn);cn===0&&(cn=Number.MIN_VALUE);let vn=Ln/cn,Mn=Pn/cn;if(_n!==ar&&(rr[_n-1]=cn),Ln=vn*cr[_n]+Mn*rr[_n],rr[_n]=vn*rr[_n]-Mn*cr[_n],Pn=Mn*cr[_n+1],cr[_n+1]=vn*cr[_n+1],Gt)for(let In=0;In<pt;In++)cn=vn*Vr.get(In,_n)+Mn*Vr.get(In,_n+1),Vr.set(In,_n+1,-Mn*Vr.get(In,_n)+vn*Vr.get(In,_n+1)),Vr.set(In,_n,cn);if(cn=Zr(Ln,Pn),cn===0&&(cn=Number.MIN_VALUE),vn=Ln/cn,Mn=Pn/cn,cr[_n]=cn,Ln=vn*rr[_n]+Mn*cr[_n+1],cr[_n+1]=-Mn*rr[_n]+vn*cr[_n+1],Pn=Mn*rr[_n+1],rr[_n+1]=vn*rr[_n+1],Mt&&_n<lt-1)for(let In=0;In<lt;In++)cn=vn*Br.get(In,_n)+Mn*Br.get(In,_n+1),Br.set(In,_n+1,-Mn*Br.get(In,_n)+vn*Br.get(In,_n+1)),Br.set(In,_n,cn)}rr[an-2]=Ln;break}case 4:{if(cr[ar]<=0&&(cr[ar]=cr[ar]<0?-cr[ar]:0,Gt))for(let tn=0;tn<=hn;tn++)Vr.set(tn,ar,-Vr.get(tn,ar));for(;ar<hn&&!(cr[ar]>=cr[ar+1]);){let tn=cr[ar];if(cr[ar]=cr[ar+1],cr[ar+1]=tn,Gt&&ar<pt-1)for(let Pr=0;Pr<pt;Pr++)tn=Vr.get(Pr,ar+1),Vr.set(Pr,ar+1,Vr.get(Pr,ar)),Vr.set(Pr,ar,tn);if(Mt&&ar<lt-1)for(let Pr=0;Pr<lt;Pr++)tn=Br.get(Pr,ar+1),Br.set(Pr,ar+1,Br.get(Pr,ar)),Br.set(Pr,ar,tn);ar++}an--;break}}}if(sr){let ar=Vr;Vr=Br,Br=ar}this.m=lt,this.n=pt,this.s=cr,this.U=Br,this.V=Vr}solve(ot){let it=ot,lt=this.threshold,pt=this.s.length,Et=vr.zeros(pt,pt);for(let wr=0;wr<pt;wr++)Math.abs(this.s[wr])<=lt?Et.set(wr,wr,0):Et.set(wr,wr,1/this.s[wr]);let Pt=this.U,Ht=this.rightSingularVectors,Mt=Ht.mmul(Et),Gt=Ht.rows,sr=Pt.rows,Xt=vr.zeros(Gt,sr);for(let wr=0;wr<Gt;wr++)for(let Fr=0;Fr<sr;Fr++){let cr=0;for(let Br=0;Br<pt;Br++)cr+=Mt.get(wr,Br)*Pt.get(Fr,Br);Xt.set(wr,Fr,cr)}return Xt.mmul(it)}solveForDiagonal(ot){return this.solve(vr.diag(ot))}inverse(){let ot=this.V,it=this.threshold,lt=ot.rows,pt=ot.columns,Et=new vr(lt,this.s.length);for(let sr=0;sr<lt;sr++)for(let Xt=0;Xt<pt;Xt++)Math.abs(this.s[Xt])>it&&Et.set(sr,Xt,ot.get(sr,Xt)/this.s[Xt]);let Pt=this.U,Ht=Pt.rows,Mt=Pt.columns,Gt=new vr(lt,Ht);for(let sr=0;sr<lt;sr++)for(let Xt=0;Xt<Ht;Xt++){let wr=0;for(let Fr=0;Fr<Mt;Fr++)wr+=Et.get(sr,Fr)*Pt.get(Xt,Fr);Gt.set(sr,Xt,wr)}return Gt}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){let ot=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,it=0,lt=this.s;for(let pt=0,Et=lt.length;pt<Et;pt++)lt[pt]>ot&&it++;return it}get diagonal(){return Array.from(this.s)}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return this.U}get rightSingularVectors(){return this.V}get diagonalMatrix(){return vr.diag(this.s)}}function rn(mt,ot=!1){return mt=An.checkMatrix(mt),ot?new Hr(mt).inverse():zt(mt,vr.eye(mt.rows))}function zt(mt,ot,it=!1){return mt=An.checkMatrix(mt),ot=An.checkMatrix(ot),it?new Hr(mt).solve(ot):mt.isSquare()?new Yr(mt).solve(ot):new ln(mt).solve(ot)}function br(mt){if(mt=vr.checkMatrix(mt),mt.isSquare()){if(mt.columns===0)return 1;let ot,it,lt,pt;if(mt.columns===2)return ot=mt.get(0,0),it=mt.get(0,1),lt=mt.get(1,0),pt=mt.get(1,1),ot*pt-it*lt;if(mt.columns===3){let Et,Pt,Ht;return Et=new Kr(mt,[1,2],[1,2]),Pt=new Kr(mt,[1,2],[0,2]),Ht=new Kr(mt,[1,2],[0,1]),ot=mt.get(0,0),it=mt.get(0,1),lt=mt.get(0,2),ot*br(Et)-it*br(Pt)+lt*br(Ht)}else return new Yr(mt).determinant}else throw Error("determinant can only be calculated for a square matrix")}function Sr(mt,ot){let it=[];for(let lt=0;lt<mt;lt++)lt!==ot&&it.push(lt);return it}function kr(mt,ot,it,lt=1e-9,pt=1e-9){if(mt>pt)return new Array(ot.rows+1).fill(0);{let Et=ot.addRow(it,[0]);for(let Pt=0;Pt<Et.rows;Pt++)Math.abs(Et.get(Pt,0))<lt&&Et.set(Pt,0,0);return Et.to1DArray()}}function ir(mt,ot={}){const{thresholdValue:it=1e-9,thresholdError:lt=1e-9}=ot;mt=vr.checkMatrix(mt);let pt=mt.rows,Et=new vr(pt,pt);for(let Pt=0;Pt<pt;Pt++){let Ht=vr.columnVector(mt.getRow(Pt)),Mt=mt.subMatrixRow(Sr(pt,Pt)).transpose(),Gt=new Hr(Mt).solve(Ht),sr=vr.sub(Ht,Mt.mmul(Gt)).abs().max();Et.setRow(Pt,kr(sr,Gt,Pt,it,lt))}return Et}function Er(mt,ot=Number.EPSILON){if(mt=vr.checkMatrix(mt),mt.isEmpty())return mt.transpose();let it=new Hr(mt,{autoTranspose:!0}),lt=it.leftSingularVectors,pt=it.rightSingularVectors,Et=it.diagonal;for(let Pt=0;Pt<Et.length;Pt++)Math.abs(Et[Pt])>ot?Et[Pt]=1/Et[Pt]:Et[Pt]=0;return pt.mmul(vr.diag(Et).mmul(lt.transpose()))}function Lt(mt,ot=mt,it={}){mt=new vr(mt);let lt=!1;if(typeof ot=="object"&&!vr.isMatrix(ot)&&!d.isAnyArray(ot)?(it=ot,ot=mt,lt=!0):ot=new vr(ot),mt.rows!==ot.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:pt=!0}=it;pt&&(mt=mt.center("column"),lt||(ot=ot.center("column")));const Et=mt.transpose().mmul(ot);for(let Pt=0;Pt<Et.rows;Pt++)for(let Ht=0;Ht<Et.columns;Ht++)Et.set(Pt,Ht,Et.get(Pt,Ht)*(1/(mt.rows-1)));return Et}function Ir(mt,ot=mt,it={}){mt=new vr(mt);let lt=!1;if(typeof ot=="object"&&!vr.isMatrix(ot)&&!d.isAnyArray(ot)?(it=ot,ot=mt,lt=!0):ot=new vr(ot),mt.rows!==ot.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:pt=!0,scale:Et=!0}=it;pt&&(mt.center("column"),lt||ot.center("column")),Et&&(mt.scale("column"),lt||ot.scale("column"));const Pt=mt.standardDeviation("column",{unbiased:!0}),Ht=lt?Pt:ot.standardDeviation("column",{unbiased:!0}),Mt=mt.transpose().mmul(ot);for(let Gt=0;Gt<Mt.rows;Gt++)for(let sr=0;sr<Mt.columns;sr++)Mt.set(Gt,sr,Mt.get(Gt,sr)*(1/(Pt[Gt]*Ht[sr]))*(1/(mt.rows-1)));return Mt}class un{constructor(ot,it={}){const{assumeSymmetric:lt=!1}=it;if(ot=An.checkMatrix(ot),!ot.isSquare())throw new Error("Matrix is not a square matrix");if(ot.isEmpty())throw new Error("Matrix must be non-empty");let pt=ot.columns,Et=new vr(pt,pt),Pt=new Float64Array(pt),Ht=new Float64Array(pt),Mt=ot,Gt,sr,Xt=!1;if(lt?Xt=!0:Xt=ot.isSymmetric(),Xt){for(Gt=0;Gt<pt;Gt++)for(sr=0;sr<pt;sr++)Et.set(Gt,sr,Mt.get(Gt,sr));yt(pt,Ht,Pt,Et),_r(pt,Ht,Pt,Et)}else{let wr=new vr(pt,pt),Fr=new Float64Array(pt);for(sr=0;sr<pt;sr++)for(Gt=0;Gt<pt;Gt++)wr.set(Gt,sr,Mt.get(Gt,sr));yr(pt,wr,Fr,Et),Kt(pt,Ht,Pt,Et,wr)}this.n=pt,this.e=Ht,this.d=Pt,this.V=Et}get realEigenvalues(){return Array.from(this.d)}get imaginaryEigenvalues(){return Array.from(this.e)}get eigenvectorMatrix(){return this.V}get diagonalMatrix(){let ot=this.n,it=this.e,lt=this.d,pt=new vr(ot,ot),Et,Pt;for(Et=0;Et<ot;Et++){for(Pt=0;Pt<ot;Pt++)pt.set(Et,Pt,0);pt.set(Et,Et,lt[Et]),it[Et]>0?pt.set(Et,Et+1,it[Et]):it[Et]<0&&pt.set(Et,Et-1,it[Et])}return pt}}function yt(mt,ot,it,lt){let pt,Et,Pt,Ht,Mt,Gt,sr,Xt;for(Mt=0;Mt<mt;Mt++)it[Mt]=lt.get(mt-1,Mt);for(Ht=mt-1;Ht>0;Ht--){for(Xt=0,Pt=0,Gt=0;Gt<Ht;Gt++)Xt=Xt+Math.abs(it[Gt]);if(Xt===0)for(ot[Ht]=it[Ht-1],Mt=0;Mt<Ht;Mt++)it[Mt]=lt.get(Ht-1,Mt),lt.set(Ht,Mt,0),lt.set(Mt,Ht,0);else{for(Gt=0;Gt<Ht;Gt++)it[Gt]/=Xt,Pt+=it[Gt]*it[Gt];for(pt=it[Ht-1],Et=Math.sqrt(Pt),pt>0&&(Et=-Et),ot[Ht]=Xt*Et,Pt=Pt-pt*Et,it[Ht-1]=pt-Et,Mt=0;Mt<Ht;Mt++)ot[Mt]=0;for(Mt=0;Mt<Ht;Mt++){for(pt=it[Mt],lt.set(Mt,Ht,pt),Et=ot[Mt]+lt.get(Mt,Mt)*pt,Gt=Mt+1;Gt<=Ht-1;Gt++)Et+=lt.get(Gt,Mt)*it[Gt],ot[Gt]+=lt.get(Gt,Mt)*pt;ot[Mt]=Et}for(pt=0,Mt=0;Mt<Ht;Mt++)ot[Mt]/=Pt,pt+=ot[Mt]*it[Mt];for(sr=pt/(Pt+Pt),Mt=0;Mt<Ht;Mt++)ot[Mt]-=sr*it[Mt];for(Mt=0;Mt<Ht;Mt++){for(pt=it[Mt],Et=ot[Mt],Gt=Mt;Gt<=Ht-1;Gt++)lt.set(Gt,Mt,lt.get(Gt,Mt)-(pt*ot[Gt]+Et*it[Gt]));it[Mt]=lt.get(Ht-1,Mt),lt.set(Ht,Mt,0)}}it[Ht]=Pt}for(Ht=0;Ht<mt-1;Ht++){if(lt.set(mt-1,Ht,lt.get(Ht,Ht)),lt.set(Ht,Ht,1),Pt=it[Ht+1],Pt!==0){for(Gt=0;Gt<=Ht;Gt++)it[Gt]=lt.get(Gt,Ht+1)/Pt;for(Mt=0;Mt<=Ht;Mt++){for(Et=0,Gt=0;Gt<=Ht;Gt++)Et+=lt.get(Gt,Ht+1)*lt.get(Gt,Mt);for(Gt=0;Gt<=Ht;Gt++)lt.set(Gt,Mt,lt.get(Gt,Mt)-Et*it[Gt])}}for(Gt=0;Gt<=Ht;Gt++)lt.set(Gt,Ht+1,0)}for(Mt=0;Mt<mt;Mt++)it[Mt]=lt.get(mt-1,Mt),lt.set(mt-1,Mt,0);lt.set(mt-1,mt-1,1),ot[0]=0}function _r(mt,ot,it,lt){let pt,Et,Pt,Ht,Mt,Gt,sr,Xt,wr,Fr,cr,Br,Vr,rr,Mr,Jr;for(Pt=1;Pt<mt;Pt++)ot[Pt-1]=ot[Pt];ot[mt-1]=0;let fn=0,dn=0,xn=Number.EPSILON;for(Gt=0;Gt<mt;Gt++){for(dn=Math.max(dn,Math.abs(it[Gt])+Math.abs(ot[Gt])),sr=Gt;sr<mt&&!(Math.abs(ot[sr])<=xn*dn);)sr++;if(sr>Gt)do{for(pt=it[Gt],Xt=(it[Gt+1]-pt)/(2*ot[Gt]),wr=Zr(Xt,1),Xt<0&&(wr=-wr),it[Gt]=ot[Gt]/(Xt+wr),it[Gt+1]=ot[Gt]*(Xt+wr),Fr=it[Gt+1],Et=pt-it[Gt],Pt=Gt+2;Pt<mt;Pt++)it[Pt]-=Et;for(fn=fn+Et,Xt=it[sr],cr=1,Br=cr,Vr=cr,rr=ot[Gt+1],Mr=0,Jr=0,Pt=sr-1;Pt>=Gt;Pt--)for(Vr=Br,Br=cr,Jr=Mr,pt=cr*ot[Pt],Et=cr*Xt,wr=Zr(Xt,ot[Pt]),ot[Pt+1]=Mr*wr,Mr=ot[Pt]/wr,cr=Xt/wr,Xt=cr*it[Pt]-Mr*pt,it[Pt+1]=Et+Mr*(cr*pt+Mr*it[Pt]),Mt=0;Mt<mt;Mt++)Et=lt.get(Mt,Pt+1),lt.set(Mt,Pt+1,Mr*lt.get(Mt,Pt)+cr*Et),lt.set(Mt,Pt,cr*lt.get(Mt,Pt)-Mr*Et);Xt=-Mr*Jr*Vr*rr*ot[Gt]/Fr,ot[Gt]=Mr*Xt,it[Gt]=cr*Xt}while(Math.abs(ot[Gt])>xn*dn);it[Gt]=it[Gt]+fn,ot[Gt]=0}for(Pt=0;Pt<mt-1;Pt++){for(Mt=Pt,Xt=it[Pt],Ht=Pt+1;Ht<mt;Ht++)it[Ht]<Xt&&(Mt=Ht,Xt=it[Ht]);if(Mt!==Pt)for(it[Mt]=it[Pt],it[Pt]=Xt,Ht=0;Ht<mt;Ht++)Xt=lt.get(Ht,Pt),lt.set(Ht,Pt,lt.get(Ht,Mt)),lt.set(Ht,Mt,Xt)}}function yr(mt,ot,it,lt){let pt=0,Et=mt-1,Pt,Ht,Mt,Gt,sr,Xt,wr;for(Xt=pt+1;Xt<=Et-1;Xt++){for(wr=0,Gt=Xt;Gt<=Et;Gt++)wr=wr+Math.abs(ot.get(Gt,Xt-1));if(wr!==0){for(Mt=0,Gt=Et;Gt>=Xt;Gt--)it[Gt]=ot.get(Gt,Xt-1)/wr,Mt+=it[Gt]*it[Gt];for(Ht=Math.sqrt(Mt),it[Xt]>0&&(Ht=-Ht),Mt=Mt-it[Xt]*Ht,it[Xt]=it[Xt]-Ht,sr=Xt;sr<mt;sr++){for(Pt=0,Gt=Et;Gt>=Xt;Gt--)Pt+=it[Gt]*ot.get(Gt,sr);for(Pt=Pt/Mt,Gt=Xt;Gt<=Et;Gt++)ot.set(Gt,sr,ot.get(Gt,sr)-Pt*it[Gt])}for(Gt=0;Gt<=Et;Gt++){for(Pt=0,sr=Et;sr>=Xt;sr--)Pt+=it[sr]*ot.get(Gt,sr);for(Pt=Pt/Mt,sr=Xt;sr<=Et;sr++)ot.set(Gt,sr,ot.get(Gt,sr)-Pt*it[sr])}it[Xt]=wr*it[Xt],ot.set(Xt,Xt-1,wr*Ht)}}for(Gt=0;Gt<mt;Gt++)for(sr=0;sr<mt;sr++)lt.set(Gt,sr,Gt===sr?1:0);for(Xt=Et-1;Xt>=pt+1;Xt--)if(ot.get(Xt,Xt-1)!==0){for(Gt=Xt+1;Gt<=Et;Gt++)it[Gt]=ot.get(Gt,Xt-1);for(sr=Xt;sr<=Et;sr++){for(Ht=0,Gt=Xt;Gt<=Et;Gt++)Ht+=it[Gt]*lt.get(Gt,sr);for(Ht=Ht/it[Xt]/ot.get(Xt,Xt-1),Gt=Xt;Gt<=Et;Gt++)lt.set(Gt,sr,lt.get(Gt,sr)+Ht*it[Gt])}}}function Kt(mt,ot,it,lt,pt){let Et=mt-1,Pt=0,Ht=mt-1,Mt=Number.EPSILON,Gt=0,sr=0,Xt=0,wr=0,Fr=0,cr=0,Br=0,Vr=0,rr,Mr,Jr,fn,dn,xn,an,hn,Sn,ar,Rr,tn,Pr,Cn,En;for(rr=0;rr<mt;rr++)for((rr<Pt||rr>Ht)&&(it[rr]=pt.get(rr,rr),ot[rr]=0),Mr=Math.max(rr-1,0);Mr<mt;Mr++)sr=sr+Math.abs(pt.get(rr,Mr));for(;Et>=Pt;){for(fn=Et;fn>Pt&&(cr=Math.abs(pt.get(fn-1,fn-1))+Math.abs(pt.get(fn,fn)),cr===0&&(cr=sr),!(Math.abs(pt.get(fn,fn-1))<Mt*cr));)fn--;if(fn===Et)pt.set(Et,Et,pt.get(Et,Et)+Gt),it[Et]=pt.get(Et,Et),ot[Et]=0,Et--,Vr=0;else if(fn===Et-1){if(an=pt.get(Et,Et-1)*pt.get(Et-1,Et),Xt=(pt.get(Et-1,Et-1)-pt.get(Et,Et))/2,wr=Xt*Xt+an,Br=Math.sqrt(Math.abs(wr)),pt.set(Et,Et,pt.get(Et,Et)+Gt),pt.set(Et-1,Et-1,pt.get(Et-1,Et-1)+Gt),hn=pt.get(Et,Et),wr>=0){for(Br=Xt>=0?Xt+Br:Xt-Br,it[Et-1]=hn+Br,it[Et]=it[Et-1],Br!==0&&(it[Et]=hn-an/Br),ot[Et-1]=0,ot[Et]=0,hn=pt.get(Et,Et-1),cr=Math.abs(hn)+Math.abs(Br),Xt=hn/cr,wr=Br/cr,Fr=Math.sqrt(Xt*Xt+wr*wr),Xt=Xt/Fr,wr=wr/Fr,Mr=Et-1;Mr<mt;Mr++)Br=pt.get(Et-1,Mr),pt.set(Et-1,Mr,wr*Br+Xt*pt.get(Et,Mr)),pt.set(Et,Mr,wr*pt.get(Et,Mr)-Xt*Br);for(rr=0;rr<=Et;rr++)Br=pt.get(rr,Et-1),pt.set(rr,Et-1,wr*Br+Xt*pt.get(rr,Et)),pt.set(rr,Et,wr*pt.get(rr,Et)-Xt*Br);for(rr=Pt;rr<=Ht;rr++)Br=lt.get(rr,Et-1),lt.set(rr,Et-1,wr*Br+Xt*lt.get(rr,Et)),lt.set(rr,Et,wr*lt.get(rr,Et)-Xt*Br)}else it[Et-1]=hn+Xt,it[Et]=hn+Xt,ot[Et-1]=Br,ot[Et]=-Br;Et=Et-2,Vr=0}else{if(hn=pt.get(Et,Et),Sn=0,an=0,fn<Et&&(Sn=pt.get(Et-1,Et-1),an=pt.get(Et,Et-1)*pt.get(Et-1,Et)),Vr===10){for(Gt+=hn,rr=Pt;rr<=Et;rr++)pt.set(rr,rr,pt.get(rr,rr)-hn);cr=Math.abs(pt.get(Et,Et-1))+Math.abs(pt.get(Et-1,Et-2)),hn=Sn=.75*cr,an=-.4375*cr*cr}if(Vr===30&&(cr=(Sn-hn)/2,cr=cr*cr+an,cr>0)){for(cr=Math.sqrt(cr),Sn<hn&&(cr=-cr),cr=hn-an/((Sn-hn)/2+cr),rr=Pt;rr<=Et;rr++)pt.set(rr,rr,pt.get(rr,rr)-cr);Gt+=cr,hn=Sn=an=.964}for(Vr=Vr+1,dn=Et-2;dn>=fn&&(Br=pt.get(dn,dn),Fr=hn-Br,cr=Sn-Br,Xt=(Fr*cr-an)/pt.get(dn+1,dn)+pt.get(dn,dn+1),wr=pt.get(dn+1,dn+1)-Br-Fr-cr,Fr=pt.get(dn+2,dn+1),cr=Math.abs(Xt)+Math.abs(wr)+Math.abs(Fr),Xt=Xt/cr,wr=wr/cr,Fr=Fr/cr,!(dn===fn||Math.abs(pt.get(dn,dn-1))*(Math.abs(wr)+Math.abs(Fr))<Mt*(Math.abs(Xt)*(Math.abs(pt.get(dn-1,dn-1))+Math.abs(Br)+Math.abs(pt.get(dn+1,dn+1))))));)dn--;for(rr=dn+2;rr<=Et;rr++)pt.set(rr,rr-2,0),rr>dn+2&&pt.set(rr,rr-3,0);for(Jr=dn;Jr<=Et-1&&(Cn=Jr!==Et-1,Jr!==dn&&(Xt=pt.get(Jr,Jr-1),wr=pt.get(Jr+1,Jr-1),Fr=Cn?pt.get(Jr+2,Jr-1):0,hn=Math.abs(Xt)+Math.abs(wr)+Math.abs(Fr),hn!==0&&(Xt=Xt/hn,wr=wr/hn,Fr=Fr/hn)),hn!==0);Jr++)if(cr=Math.sqrt(Xt*Xt+wr*wr+Fr*Fr),Xt<0&&(cr=-cr),cr!==0){for(Jr!==dn?pt.set(Jr,Jr-1,-cr*hn):fn!==dn&&pt.set(Jr,Jr-1,-pt.get(Jr,Jr-1)),Xt=Xt+cr,hn=Xt/cr,Sn=wr/cr,Br=Fr/cr,wr=wr/Xt,Fr=Fr/Xt,Mr=Jr;Mr<mt;Mr++)Xt=pt.get(Jr,Mr)+wr*pt.get(Jr+1,Mr),Cn&&(Xt=Xt+Fr*pt.get(Jr+2,Mr),pt.set(Jr+2,Mr,pt.get(Jr+2,Mr)-Xt*Br)),pt.set(Jr,Mr,pt.get(Jr,Mr)-Xt*hn),pt.set(Jr+1,Mr,pt.get(Jr+1,Mr)-Xt*Sn);for(rr=0;rr<=Math.min(Et,Jr+3);rr++)Xt=hn*pt.get(rr,Jr)+Sn*pt.get(rr,Jr+1),Cn&&(Xt=Xt+Br*pt.get(rr,Jr+2),pt.set(rr,Jr+2,pt.get(rr,Jr+2)-Xt*Fr)),pt.set(rr,Jr,pt.get(rr,Jr)-Xt),pt.set(rr,Jr+1,pt.get(rr,Jr+1)-Xt*wr);for(rr=Pt;rr<=Ht;rr++)Xt=hn*lt.get(rr,Jr)+Sn*lt.get(rr,Jr+1),Cn&&(Xt=Xt+Br*lt.get(rr,Jr+2),lt.set(rr,Jr+2,lt.get(rr,Jr+2)-Xt*Fr)),lt.set(rr,Jr,lt.get(rr,Jr)-Xt),lt.set(rr,Jr+1,lt.get(rr,Jr+1)-Xt*wr)}}}if(sr!==0){for(Et=mt-1;Et>=0;Et--)if(Xt=it[Et],wr=ot[Et],wr===0)for(fn=Et,pt.set(Et,Et,1),rr=Et-1;rr>=0;rr--){for(an=pt.get(rr,rr)-Xt,Fr=0,Mr=fn;Mr<=Et;Mr++)Fr=Fr+pt.get(rr,Mr)*pt.get(Mr,Et);if(ot[rr]<0)Br=an,cr=Fr;else if(fn=rr,ot[rr]===0?pt.set(rr,Et,an!==0?-Fr/an:-Fr/(Mt*sr)):(hn=pt.get(rr,rr+1),Sn=pt.get(rr+1,rr),wr=(it[rr]-Xt)*(it[rr]-Xt)+ot[rr]*ot[rr],xn=(hn*cr-Br*Fr)/wr,pt.set(rr,Et,xn),pt.set(rr+1,Et,Math.abs(hn)>Math.abs(Br)?(-Fr-an*xn)/hn:(-cr-Sn*xn)/Br)),xn=Math.abs(pt.get(rr,Et)),Mt*xn*xn>1)for(Mr=rr;Mr<=Et;Mr++)pt.set(Mr,Et,pt.get(Mr,Et)/xn)}else if(wr<0)for(fn=Et-1,Math.abs(pt.get(Et,Et-1))>Math.abs(pt.get(Et-1,Et))?(pt.set(Et-1,Et-1,wr/pt.get(Et,Et-1)),pt.set(Et-1,Et,-(pt.get(Et,Et)-Xt)/pt.get(Et,Et-1))):(En=tr(0,-pt.get(Et-1,Et),pt.get(Et-1,Et-1)-Xt,wr),pt.set(Et-1,Et-1,En[0]),pt.set(Et-1,Et,En[1])),pt.set(Et,Et-1,0),pt.set(Et,Et,1),rr=Et-2;rr>=0;rr--){for(ar=0,Rr=0,Mr=fn;Mr<=Et;Mr++)ar=ar+pt.get(rr,Mr)*pt.get(Mr,Et-1),Rr=Rr+pt.get(rr,Mr)*pt.get(Mr,Et);if(an=pt.get(rr,rr)-Xt,ot[rr]<0)Br=an,Fr=ar,cr=Rr;else if(fn=rr,ot[rr]===0?(En=tr(-ar,-Rr,an,wr),pt.set(rr,Et-1,En[0]),pt.set(rr,Et,En[1])):(hn=pt.get(rr,rr+1),Sn=pt.get(rr+1,rr),tn=(it[rr]-Xt)*(it[rr]-Xt)+ot[rr]*ot[rr]-wr*wr,Pr=(it[rr]-Xt)*2*wr,tn===0&&Pr===0&&(tn=Mt*sr*(Math.abs(an)+Math.abs(wr)+Math.abs(hn)+Math.abs(Sn)+Math.abs(Br))),En=tr(hn*Fr-Br*ar+wr*Rr,hn*cr-Br*Rr-wr*ar,tn,Pr),pt.set(rr,Et-1,En[0]),pt.set(rr,Et,En[1]),Math.abs(hn)>Math.abs(Br)+Math.abs(wr)?(pt.set(rr+1,Et-1,(-ar-an*pt.get(rr,Et-1)+wr*pt.get(rr,Et))/hn),pt.set(rr+1,Et,(-Rr-an*pt.get(rr,Et)-wr*pt.get(rr,Et-1))/hn)):(En=tr(-Fr-Sn*pt.get(rr,Et-1),-cr-Sn*pt.get(rr,Et),Br,wr),pt.set(rr+1,Et-1,En[0]),pt.set(rr+1,Et,En[1]))),xn=Math.max(Math.abs(pt.get(rr,Et-1)),Math.abs(pt.get(rr,Et))),Mt*xn*xn>1)for(Mr=rr;Mr<=Et;Mr++)pt.set(Mr,Et-1,pt.get(Mr,Et-1)/xn),pt.set(Mr,Et,pt.get(Mr,Et)/xn)}for(rr=0;rr<mt;rr++)if(rr<Pt||rr>Ht)for(Mr=rr;Mr<mt;Mr++)lt.set(rr,Mr,pt.get(rr,Mr));for(Mr=mt-1;Mr>=Pt;Mr--)for(rr=Pt;rr<=Ht;rr++){for(Br=0,Jr=Pt;Jr<=Math.min(Mr,Ht);Jr++)Br=Br+lt.get(rr,Jr)*pt.get(Jr,Mr);lt.set(rr,Mr,Br)}}}function tr(mt,ot,it,lt){let pt,Et;return Math.abs(it)>Math.abs(lt)?(pt=lt/it,Et=it+pt*lt,[(mt+pt*ot)/Et,(ot-pt*mt)/Et]):(pt=it/lt,Et=lt+pt*it,[(pt*mt+ot)/Et,(pt*ot-mt)/Et])}class pr{constructor(ot){if(ot=An.checkMatrix(ot),!ot.isSymmetric())throw new Error("Matrix is not symmetric");let it=ot,lt=it.rows,pt=new vr(lt,lt),Et=!0,Pt,Ht,Mt;for(Ht=0;Ht<lt;Ht++){let Gt=0;for(Mt=0;Mt<Ht;Mt++){let sr=0;for(Pt=0;Pt<Mt;Pt++)sr+=pt.get(Mt,Pt)*pt.get(Ht,Pt);sr=(it.get(Ht,Mt)-sr)/pt.get(Mt,Mt),pt.set(Ht,Mt,sr),Gt=Gt+sr*sr}for(Gt=it.get(Ht,Ht)-Gt,Et&&(Et=Gt>0),pt.set(Ht,Ht,Math.sqrt(Math.max(Gt,0))),Mt=Ht+1;Mt<lt;Mt++)pt.set(Ht,Mt,0)}this.L=pt,this.positiveDefinite=Et}isPositiveDefinite(){return this.positiveDefinite}solve(ot){ot=An.checkMatrix(ot);let it=this.L,lt=it.rows;if(ot.rows!==lt)throw new Error("Matrix dimensions do not match");if(this.isPositiveDefinite()===!1)throw new Error("Matrix is not positive definite");let pt=ot.columns,Et=ot.clone(),Pt,Ht,Mt;for(Mt=0;Mt<lt;Mt++)for(Ht=0;Ht<pt;Ht++){for(Pt=0;Pt<Mt;Pt++)Et.set(Mt,Ht,Et.get(Mt,Ht)-Et.get(Pt,Ht)*it.get(Mt,Pt));Et.set(Mt,Ht,Et.get(Mt,Ht)/it.get(Mt,Mt))}for(Mt=lt-1;Mt>=0;Mt--)for(Ht=0;Ht<pt;Ht++){for(Pt=Mt+1;Pt<lt;Pt++)Et.set(Mt,Ht,Et.get(Mt,Ht)-Et.get(Pt,Ht)*it.get(Pt,Mt));Et.set(Mt,Ht,Et.get(Mt,Ht)/it.get(Mt,Mt))}return Et}get lowerTriangularMatrix(){return this.L}}class sn{constructor(ot,it={}){ot=An.checkMatrix(ot);let{Y:lt}=it;const{scaleScores:pt=!1,maxIterations:Et=1e3,terminationCriteria:Pt=1e-10}=it;let Ht;if(lt){if(d.isAnyArray(lt)&&typeof lt[0]=="number"?lt=vr.columnVector(lt):lt=An.checkMatrix(lt),lt.rows!==ot.rows)throw new Error("Y should have the same number of rows as X");Ht=lt.getColumnVector(0)}else Ht=ot.getColumnVector(0);let Mt=1,Gt,sr,Xt,wr;for(let Fr=0;Fr<Et&&Mt>Pt;Fr++)Xt=ot.transpose().mmul(Ht).div(Ht.transpose().mmul(Ht).get(0,0)),Xt=Xt.div(Xt.norm()),Gt=ot.mmul(Xt).div(Xt.transpose().mmul(Xt).get(0,0)),Fr>0&&(Mt=Gt.clone().sub(wr).pow(2).sum()),wr=Gt.clone(),lt?(sr=lt.transpose().mmul(Gt).div(Gt.transpose().mmul(Gt).get(0,0)),sr=sr.div(sr.norm()),Ht=lt.mmul(sr).div(sr.transpose().mmul(sr).get(0,0))):Ht=Gt;if(lt){let Fr=ot.transpose().mmul(Gt).div(Gt.transpose().mmul(Gt).get(0,0));Fr=Fr.div(Fr.norm());let cr=ot.clone().sub(Gt.clone().mmul(Fr.transpose())),Br=Ht.transpose().mmul(Gt).div(Gt.transpose().mmul(Gt).get(0,0)),Vr=lt.clone().sub(Gt.clone().mulS(Br.get(0,0)).mmul(sr.transpose()));this.t=Gt,this.p=Fr.transpose(),this.w=Xt.transpose(),this.q=sr,this.u=Ht,this.s=Gt.transpose().mmul(Gt),this.xResidual=cr,this.yResidual=Vr,this.betas=Br}else this.w=Xt.transpose(),this.s=Gt.transpose().mmul(Gt).sqrt(),pt?this.t=Gt.clone().div(this.s.get(0,0)):this.t=Gt,this.xResidual=ot.sub(Gt.mmul(Xt.transpose()))}}return matrix$1.AbstractMatrix=nr,matrix$1.CHO=pr,matrix$1.CholeskyDecomposition=pr,matrix$1.DistanceMatrix=zr,matrix$1.EVD=un,matrix$1.EigenvalueDecomposition=un,matrix$1.LU=Yr,matrix$1.LuDecomposition=Yr,matrix$1.Matrix=vr,matrix$1.MatrixColumnSelectionView=Wr,matrix$1.MatrixColumnView=xr,matrix$1.MatrixFlipColumnView=$r,matrix$1.MatrixFlipRowView=Or,matrix$1.MatrixRowSelectionView=fr,matrix$1.MatrixRowView=qr,matrix$1.MatrixSelectionView=Kr,matrix$1.MatrixSubView=jr,matrix$1.MatrixTransposeView=Xr,matrix$1.NIPALS=sn,matrix$1.Nipals=sn,matrix$1.QR=ln,matrix$1.QrDecomposition=ln,matrix$1.SVD=Hr,matrix$1.SingularValueDecomposition=Hr,matrix$1.SymmetricMatrix=en,matrix$1.WrapperMatrix1D=Tr,matrix$1.WrapperMatrix2D=An,matrix$1.correlation=Ir,matrix$1.covariance=Lt,matrix$1.default=vr,matrix$1.determinant=br,matrix$1.inverse=rn,matrix$1.linearDependencies=ir,matrix$1.pseudoInverse=Er,matrix$1.solve=zt,matrix$1.wrap=Gr,matrix$1}var matrixExports=requireMatrix();const matrix$2=getDefaultExportFromCjs(matrixExports),Matrix$1=matrixExports.Matrix,SVD=matrixExports.SVD,SingularValueDecomposition=matrixExports.SingularValueDecomposition;matrix$2.Matrix?matrix$2.Matrix:matrixExports.Matrix;const inverse=matrixExports.inverse,solve=matrixExports.solve;function getSeparatedKernel(s){const o=new SVD(s,{autoTranspose:!0});if(o.rank!==1)return null;const h=Math.sqrt(o.s[0]),d=o.U.to2DArray().map(_=>_[0]*h),g=o.V.to2DArray().map(_=>_[0]*h);return[d,g]}function convolution(s,o={}){let{channels:h,bitDepth:d,normalize:g=!1,divisor:_=1,border:b="copy",algorithm:j="auto"}=o,et={};d&&(et.bitDepth=d);let tt=Image$1.createFrom(this,et);if(h=validateArrayOfChannels(this,h),j!=="separable")({kernel:s}=validateKernel(s));else if(!Array.isArray(s)||s.length!==2)throw new RangeError("separable convolution requires two arrays of numbers to represent the kernel");if(j==="auto"){let dt=getSeparatedKernel(s);dt!==null?(j="separable",s=dt):(s.length>9||s[0].length>9)&&this.width<=4096&&this.height<=4096?j="fft":j="direct"}let rt,at;j==="separable"?(rt=Math.floor(s[0].length/2),at=Math.floor(s[1].length/2)):(rt=Math.floor(s.length/2),at=Math.floor(s[0].length/2));let st=tt.isClamped,At=new Array(this.height*this.width),ht,ct,_t,gt,wt,ft;for(gt=0;gt<h.length;gt++){for(wt=h[gt],_t=0;_t<this.height;_t++)for(ct=0;ct<this.width;ct++)ht=_t*this.width+ct,At[ht]=this.data[ht*this.channels+wt];if(j==="direct")ft=srcExports$1.direct(At,s,{rows:this.height,cols:this.width,normalize:g,divisor:_});else if(j==="separable"){if(ft=convolutionSeparable(At,s,this.width,this.height),g){_=0;for(let dt=0;dt<s[0].length;dt++)for(let xt=0;xt<s[1].length;xt++)_+=s[0][dt]*s[1][xt]}if(_!==1)for(let dt=0;dt<ft.length;dt++)ft[dt]/=_}else ft=srcExports$1.fft(At,s,{rows:this.height,cols:this.width,normalize:g,divisor:_});for(_t=0;_t<this.height;_t++)for(ct=0;ct<this.width;ct++)ht=_t*this.width+ct,st?tt.data[ht*this.channels+wt]=clamp(ft[ht],tt):tt.data[ht*this.channels+wt]=ft[ht]}if(this.alpha&&!h.includes(this.channels))for(ct=this.components;ct<this.data.length;ct=ct+this.channels)tt.data[ct]=this.data[ct];return b!=="periodic"&&tt.setBorder({size:[at,rt],algorithm:b}),tt}function gradientFilter(s={}){let{direction:o="xy",border:h="copy",kernelX:d,kernelY:g,channels:_,bitDepth:b=this.bitDepth}=s;switch(this.checkProcessable("gradientFilter",{bitDepth:[8,16]}),o){case"x":if(!d)throw new Error("kernelX option is missing");return convolution.call(this,d,{channels:_,border:h,bitDepth:b});case"y":if(!g)throw new Error("kernelY option is missing");return convolution.call(this,g,{channels:_,border:h,bitDepth:b});case"xy":{if(!d)throw new Error("kernelX option is missing");if(!g)throw new Error("kernelY option is missing");const j=convolution.call(this,d,{channels:_,border:h,bitDepth:32}),et=convolution.call(this,g,{channels:_,border:h,bitDepth:32});return j.hypotenuse(et,{bitDepth:b,channels:_})}default:throw new Error(`Unknown parameter direction: ${o}`)}}function sobelFilter(s){return gradientFilter.call(this,Object.assign({},s,{kernelX:SOBEL_X,kernelY:SOBEL_Y}))}function scharrFilter(s){return gradientFilter.call(this,Object.assign({},s,{kernelX:SCHARR_X,kernelY:SCHARR_Y}))}var newArray_1,hasRequiredNewArray;function requireNewArray(){if(hasRequiredNewArray)return newArray_1;hasRequiredNewArray=1,newArray_1=s;function s(o,h){o=o||0;for(var d=new Array(o),g=0;g<o;g++)d[g]=h;return d}return newArray_1}var newArrayExports=requireNewArray();const newArray=getDefaultExportFromCjs(newArrayExports);function level(s={}){let{algorithm:o="range",channels:h,min:d=this.min,max:g=this.max}=s;switch(this.checkProcessable("level",{bitDepth:[8,16,32]}),h=validateArrayOfChannels(this,{channels:h}),h.length!==this.channel&&(Array.isArray(d)&&d.length===this.channels&&(d=d.filter((_,b)=>h.includes(b))),Array.isArray(g)&&g.length===this.channels&&(g=g.filter((_,b)=>h.includes(b)))),o){case"range":d<0&&(d=0),g>this.maxValue&&(g=this.maxValue),Array.isArray(d)||(d=newArray(h.length,d)),Array.isArray(g)||(g=newArray(h.length,g)),processImage(this,d,g,h);break;default:throw new Error(`level: algorithm not implement: ${o}`)}return this}function processImage(s,o,h,d){let g=1e-5,_=new Array(d.length);for(let b=0;b<d.length;b++)o[b]===0&&h[b]===s.maxValue||h[b]===o[b]?_[b]=0:_[b]=(s.maxValue+1-g)/(h[b]-o[b]),o[b]+=(.5-g/2)/_[b];for(let b=0;b<d.length;b++){let j=d[b];if(_[b]!==0)for(let et=0;et<s.data.length;et+=s.channels)s.data[et+j]=Math.min(Math.max(0,(s.data[et+j]-o[b])*_[b]+.5|0),s.maxValue)}}var isArrayType,hasRequiredIsArrayType;function requireIsArrayType(){if(hasRequiredIsArrayType)return isArrayType;hasRequiredIsArrayType=1;var s=Object.prototype.toString;return isArrayType=function(o){return s.call(o).substr(-6,5)==="Array"},isArrayType}var isArrayTypeExports=requireIsArrayType();const isArray=getDefaultExportFromCjs(isArrayTypeExports);function checkNumberArray(s){if(isNaN(s)){if(s instanceof Image$1)return s.data;if(!isArray(s))throw new Error("checkNumberArray: the value should be either a number, array or Image");return s}else{if(s<=0)throw new Error("checkNumberArray: the value must be greater than 0");return s}}function add(s,o={}){let{channels:h}=o;if(this.checkProcessable("add",{bitDepth:[8,16]}),h=validateArrayOfChannels(this,{channels:h}),s=checkNumberArray(s),isNaN(s)){if(this.data.length!==s.length)throw new Error("add: the data size is different");for(let d=0;d<h.length;d++){let g=h[d];for(let _=0;_<this.data.length;_+=this.channels)this.data[_+g]=Math.max(0,Math.min(this.maxValue,this.data[_+g]+s[_+g]>>0))}}else for(let d=0;d<h.length;d++){let g=h[d];for(let _=0;_<this.data.length;_+=this.channels)this.data[_+g]=Math.min(this.maxValue,this.data[_+g]+s>>0)}return this}function subtract(s,o={}){let{channels:h}=o;if(this.checkProcessable("subtract",{bitDepth:[8,16]}),h=validateArrayOfChannels(this,{channels:h}),s=checkNumberArray(s),isNaN(s)){if(this.data.length!==s.length)throw new Error("subtract: the data size is different");for(let d=0;d<h.length;d++){let g=h[d];for(let _=0;_<this.data.length;_+=this.channels)this.data[_+g]=Math.max(0,Math.min(this.maxValue,this.data[_+g]-s[_+g]>>0))}}else for(let d=0;d<h.length;d++){let g=h[d];for(let _=0;_<this.data.length;_+=this.channels)this.data[_+g]=Math.max(0,this.data[_+g]-s>>0)}return this}function subtractImage(s,o={}){let{channels:h,absolute:d=!1}=o;if(this.checkProcessable("subtractImage",{bitDepth:[8,16]}),this.width!==s.width||this.height!==s.height)throw new Error("subtractImage: both images must have the same size");if(this.alpha!==s.alpha||this.bitDepth!==s.bitDepth)throw new Error("subtractImage: both images must have the same alpha and bitDepth");if(this.channels!==s.channels)throw new Error("subtractImage: both images must have the same number of channels");let g=this.clone();h=validateArrayOfChannels(this,{channels:h});for(let _=0;_<h.length;_++){let b=h[_];for(let j=b;j<this.data.length;j+=this.channels){let et=this.data[j]-s.data[j];d?g.data[j]=Math.abs(et):g.data[j]=Math.max(et,0)}}return g}function hypotenuse(s,o={}){let{bitDepth:h=this.bitDepth,channels:d}=o;if(this.checkProcessable("hypotenuse",{bitDepth:[8,16,32]}),this.width!==s.width||this.height!==s.height)throw new Error("hypotenuse: both images must have the same size");if(this.alpha!==s.alpha||this.bitDepth!==s.bitDepth)throw new Error("hypotenuse: both images must have the same alpha and bitDepth");if(this.channels!==s.channels)throw new Error("hypotenuse: both images must have the same number of channels");let g=Image$1.createFrom(this,{bitDepth:h});d=validateArrayOfChannels(this,{channels:d});let _=g.isClamped;for(let b=0;b<d.length;b++){let j=d[b];for(let et=j;et<this.data.length;et+=this.channels){let tt=Math.hypot(this.data[et],s.data[et]);_?g.data[et]=Math.min(Math.max(Math.round(tt),0),g.maxValue):g.data[et]=tt}}return g}function multiply(s,o={}){let{channels:h}=o;if(this.checkProcessable("multiply",{bitDepth:[8,16]}),s<=0)throw new Error("multiply: the value must be greater than 0");if(h=validateArrayOfChannels(this,{channels:h}),s=checkNumberArray(s),isNaN(s)){if(this.data.length!==s.length)throw new Error("multiply: the data size is different");for(let d=0;d<h.length;d++){let g=h[d];for(let _=0;_<this.data.length;_+=this.channels)this.data[_+g]=Math.max(0,Math.min(this.maxValue,this.data[_+g]*s[_+g]>>0))}}else for(let d=0;d<h.length;d++){let g=h[d];for(let _=0;_<this.data.length;_+=this.channels)this.data[_+g]=Math.min(this.maxValue,this.data[_+g]*s>>0)}return this}function divide(s,o={}){let{channels:h}=o;if(this.checkProcessable("divide",{bitDepth:[8,16]}),h=validateArrayOfChannels(this,{channels:h}),s=checkNumberArray(s),isNaN(s)){if(this.data.length!==s.length)throw new Error("divide: the: the data size is different");for(let d=0;d<h.length;d++){let g=h[d];for(let _=0;_<this.data.length;_+=this.channels)this.data[_+g]=Math.max(0,Math.min(this.maxValue,this.data[_+g]/s[_+g]>>0))}}else for(let d=0;d<h.length;d++){let g=h[d];for(let _=0;_<this.data.length;_+=this.channels)this.data[_+g]=Math.min(this.maxValue,this.data[_+g]/s>>0)}return this}class BaseRegression{constructor(){if(new.target===BaseRegression)throw new Error("BaseRegression must be subclassed")}predict(o){if(typeof o=="number")return this._predict(o);if(isAnyArray(o)){const h=[];for(let d=0;d<o.length;d++)h.push(this._predict(o[d]));return h}else throw new TypeError("x must be a number or array")}_predict(){throw new Error("_predict must be implemented")}train(){}toString(){return""}toLaTeX(){return""}score(o,h){if(!isAnyArray(o)||!isAnyArray(h)||o.length!==h.length)throw new Error("x and y must be arrays of the same length");const d=o.length,g=new Array(d);for(let At=0;At<d;At++)g[At]=this._predict(o[At]);let _=0,b=0,j=0,et=0,tt=0,rt=0,at=0;for(let At=0;At<d;At++)_+=g[At],b+=h[At],tt+=g[At]*g[At],rt+=h[At]*h[At],at+=g[At]*h[At],h[At]!==0&&(j+=(h[At]-g[At])*(h[At]-g[At])/h[At]),et+=(h[At]-g[At])*(h[At]-g[At]);const st=(d*at-_*b)/Math.sqrt((d*tt-_*_)*(d*rt-b*b));return{r:st,r2:st*st,chi2:j,rmsd:Math.sqrt(et/d)}}}function squaredEuclidean(s,o){let h=0;for(let d=0;d<s.length;d++)h+=(s[d]-o[d])*(s[d]-o[d]);return h}function euclidean(s,o){return Math.sqrt(squaredEuclidean(s,o))}const euclidean$1=Object.freeze(Object.defineProperty({__proto__:null,euclidean,squaredEuclidean},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(euclidean$1);var gaussianKernel,hasRequiredGaussianKernel;function requireGaussianKernel(){if(hasRequiredGaussianKernel)return gaussianKernel;hasRequiredGaussianKernel=1;const{squaredEuclidean:s}=require$$0,o={sigma:1};class h{constructor(g){g=Object.assign({},o,g),this.sigma=g.sigma,this.divisor=2*g.sigma*g.sigma}compute(g,_){const b=s(g,_);return Math.exp(-b/this.divisor)}}return gaussianKernel=h,gaussianKernel}var polynomialKernel,hasRequiredPolynomialKernel;function requirePolynomialKernel(){if(hasRequiredPolynomialKernel)return polynomialKernel;hasRequiredPolynomialKernel=1;const s={degree:1,constant:1,scale:1};class o{constructor(d){d=Object.assign({},s,d),this.degree=d.degree,this.constant=d.constant,this.scale=d.scale}compute(d,g){for(var _=0,b=0;b<d.length;b++)_+=d[b]*g[b];return Math.pow(this.scale*_+this.constant,this.degree)}}return polynomialKernel=o,polynomialKernel}var sigmoidKernel,hasRequiredSigmoidKernel;function requireSigmoidKernel(){if(hasRequiredSigmoidKernel)return sigmoidKernel;hasRequiredSigmoidKernel=1;const s={alpha:.01,constant:-Math.E};class o{constructor(d){d=Object.assign({},s,d),this.alpha=d.alpha,this.constant=d.constant}compute(d,g){for(var _=0,b=0;b<d.length;b++)_+=d[b]*g[b];return Math.tanh(this.alpha*_+this.constant)}}return sigmoidKernel=o,sigmoidKernel}var anovaKernel,hasRequiredAnovaKernel;function requireAnovaKernel(){if(hasRequiredAnovaKernel)return anovaKernel;hasRequiredAnovaKernel=1;const s={sigma:1,degree:1};class o{constructor(d){d=Object.assign({},s,d),this.sigma=d.sigma,this.degree=d.degree}compute(d,g){for(var _=0,b=Math.min(d.length,g.length),j=1;j<=b;++j)_+=Math.pow(Math.exp(-this.sigma*Math.pow(Math.pow(d[j-1],j)-Math.pow(g[j-1],j),2)),this.degree);return _}}return anovaKernel=o,anovaKernel}var cauchyKernel,hasRequiredCauchyKernel;function requireCauchyKernel(){if(hasRequiredCauchyKernel)return cauchyKernel;hasRequiredCauchyKernel=1;const{squaredEuclidean:s}=require$$0,o={sigma:1};class h{constructor(g){g=Object.assign({},o,g),this.sigma=g.sigma}compute(g,_){return 1/(1+s(g,_)/(this.sigma*this.sigma))}}return cauchyKernel=h,cauchyKernel}var exponentialKernel,hasRequiredExponentialKernel;function requireExponentialKernel(){if(hasRequiredExponentialKernel)return exponentialKernel;hasRequiredExponentialKernel=1;const{euclidean:s}=require$$0,o={sigma:1};class h{constructor(g){g=Object.assign({},o,g),this.sigma=g.sigma,this.divisor=2*g.sigma*g.sigma}compute(g,_){const b=s(g,_);return Math.exp(-b/this.divisor)}}return exponentialKernel=h,exponentialKernel}var histogramIntersectionKernel,hasRequiredHistogramIntersectionKernel;function requireHistogramIntersectionKernel(){if(hasRequiredHistogramIntersectionKernel)return histogramIntersectionKernel;hasRequiredHistogramIntersectionKernel=1;class s{compute(h,d){for(var g=Math.min(h.length,d.length),_=0,b=0;b<g;++b)_+=Math.min(h[b],d[b]);return _}}return histogramIntersectionKernel=s,histogramIntersectionKernel}var laplacianKernel,hasRequiredLaplacianKernel;function requireLaplacianKernel(){if(hasRequiredLaplacianKernel)return laplacianKernel;hasRequiredLaplacianKernel=1;const{euclidean:s}=require$$0,o={sigma:1};class h{constructor(g){g=Object.assign({},o,g),this.sigma=g.sigma}compute(g,_){const b=s(g,_);return Math.exp(-b/this.sigma)}}return laplacianKernel=h,laplacianKernel}var multiquadraticKernel,hasRequiredMultiquadraticKernel;function requireMultiquadraticKernel(){if(hasRequiredMultiquadraticKernel)return multiquadraticKernel;hasRequiredMultiquadraticKernel=1;const{squaredEuclidean:s}=require$$0,o={constant:1};class h{constructor(g){g=Object.assign({},o,g),this.constant=g.constant}compute(g,_){return Math.sqrt(s(g,_)+this.constant*this.constant)}}return multiquadraticKernel=h,multiquadraticKernel}var rationalQuadraticKernel,hasRequiredRationalQuadraticKernel;function requireRationalQuadraticKernel(){if(hasRequiredRationalQuadraticKernel)return rationalQuadraticKernel;hasRequiredRationalQuadraticKernel=1;const{squaredEuclidean:s}=require$$0,o={constant:1};class h{constructor(g){g=Object.assign({},o,g),this.constant=g.constant}compute(g,_){const b=s(g,_);return 1-b/(b+this.constant)}}return rationalQuadraticKernel=h,rationalQuadraticKernel}var kernel,hasRequiredKernel;function requireKernel(){if(hasRequiredKernel)return kernel;hasRequiredKernel=1;const{Matrix:s,MatrixTransposeView:o}=requireMatrix(),h=requireGaussianKernel(),d=requirePolynomialKernel(),g=requireSigmoidKernel(),_=requireAnovaKernel(),b=requireCauchyKernel(),j=requireExponentialKernel(),et=requireHistogramIntersectionKernel(),tt=requireLaplacianKernel(),rt=requireMultiquadraticKernel(),at=requireRationalQuadraticKernel(),st={gaussian:h,rbf:h,polynomial:d,poly:d,anova:_,cauchy:b,exponential:j,histogram:et,min:et,laplacian:tt,multiquadratic:rt,rational:at,sigmoid:g,mlp:g};class At{constructor(ct,_t){if(this.kernelType=ct,ct!=="linear")if(typeof ct=="string"){ct=ct.toLowerCase();var gt=st[ct];if(gt)this.kernelFunction=new gt(_t);else throw new Error(`unsupported kernel type: ${ct}`)}else if(typeof ct=="object"&&typeof ct.compute=="function")this.kernelFunction=ct;else throw new TypeError("first argument must be a valid kernel type or instance")}compute(ct,_t){if(ct=s.checkMatrix(ct),_t===void 0?_t=ct:_t=s.checkMatrix(_t),this.kernelType==="linear")return ct.mmul(new o(_t));const gt=new s(ct.rows,_t.rows);if(ct===_t)for(let wt=0;wt<ct.rows;wt++)for(let ft=wt;ft<ct.rows;ft++){const dt=this.kernelFunction.compute(ct.getRow(wt),ct.getRow(ft));gt.set(wt,ft,dt),gt.set(ft,wt,dt)}else for(let wt=0;wt<ct.rows;wt++)for(let ft=0;ft<_t.rows;ft++)gt.set(wt,ft,this.kernelFunction.compute(ct.getRow(wt),_t.getRow(ft)));return gt}}return kernel=At,kernel}var kernelExports=requireKernel();const Kernel=getDefaultExportFromCjs(kernelExports),defaultOptions$2={lambda:.1,kernelType:"gaussian",kernelOptions:{},computeCoefficient:!1};class KernelRidgeRegression extends BaseRegression{constructor(o,h,d){if(super(),o===!0)this.alpha=h.alpha,this.inputs=h.inputs,this.kernelType=h.kernelType,this.kernelOptions=h.kernelOptions,this.kernel=new Kernel(h.kernelType,h.kernelOptions);else{o=Matrix$1.checkMatrix(o),d=Object.assign({},defaultOptions$2,d);const g=new Kernel(d.kernelType,d.kernelOptions),_=g.compute(o),b=o.rows;_.add(Matrix$1.eye(b,b).mul(d.lambda)),this.alpha=solve(_,h),this.inputs=o,this.kernelType=d.kernelType,this.kernelOptions=d.kernelOptions,this.kernel=g}}_predict(o){return this.kernel.compute([o],this.inputs).mmul(this.alpha).getRow(0)}toJSON(){return{name:"kernelRidgeRegression",alpha:this.alpha,inputs:this.inputs,kernelType:this.kernelType,kernelOptions:this.kernelOptions}}static load(o){if(o.name!=="kernelRidgeRegression")throw new TypeError("not a KRR model");return new KernelRidgeRegression(!0,o)}}function background$1(s,o,h){const d=new KernelRidgeRegression(s,o,h),g=new Array(this.size);for(let j=0;j<this.width;j++)for(let et=0;et<this.height;et++)g[et*this.width+j]=[j,et];const _=d.predict(g),b=Image$1.createFrom(this);for(let j=0;j<this.size;j++)b.data[j]=Math.min(this.maxValue,Math.max(0,_[j][0]));return b}function dilate(s={}){let{kernel:o=[[1,1,1],[1,1,1],[1,1,1]],iterations:h=1}=s;if(this.checkProcessable("dilate",{bitDepth:[1,8,16],components:1,alpha:0}),o.columns%2===0||o.rows%2===0)throw new TypeError("dilate: The number of rows and columns of the kernel must be odd");let d=!0;t:for(const _ of o)for(const b of _)if(b!==1){d=!1;break t}let g=this;for(let _=0;_<h;_++)if(this.bitDepth===1)if(d){const b=g.clone();g=dilateOnceBinaryOnlyOnes(g,b,o.length,o[0].length)}else{const b=Image$1.createFrom(g);g=dilateOnceBinary(g,b,o)}else if(d){const b=Image$1.createFrom(g);g=dilateOnceGreyOnlyOnes(g,b,o.length,o[0].length)}else{const b=Image$1.createFrom(g);g=dilateOnceGrey(g,b,o)}return g}function dilateOnceGrey(s,o,h){const d=h.length,g=h[0].length;let _=(d-1)/2,b=(g-1)/2;for(let j=0;j<s.height;j++)for(let et=0;et<s.width;et++){let tt=0;for(let rt=0;rt<g;rt++)for(let at=0;at<d;at++){if(h[at][rt]!==1)continue;let st=at-_+et,At=rt-b+j;if(st<0||At<0||st>=s.width||At>=s.height)continue;const ht=s.getValueXY(st,At,0);ht>tt&&(tt=ht)}o.setValueXY(et,j,0,tt)}return o}function dilateOnceGreyOnlyOnes(s,o,h,d){const g=(h-1)/2,_=(d-1)/2,b=[];for(let j=0;j<s.width;j++)b.push(0);for(let j=0;j<s.height;j++){for(let et=0;et<s.width;et++){let tt=0;for(let rt=Math.max(0,j-_);rt<Math.min(s.height,j+_+1);rt++){const at=s.getValueXY(et,rt,0);at>tt&&(tt=at)}b[et]=tt}for(let et=0;et<s.width;et++){let tt=0;for(let rt=Math.max(0,et-g);rt<Math.min(s.width,et+g+1);rt++)b[rt]>tt&&(tt=b[rt]);o.setValueXY(et,j,0,tt)}}return o}function dilateOnceBinary(s,o,h){const d=h.length,g=h[0].length;let _=(d-1)/2,b=(g-1)/2;for(let j=0;j<s.height;j++)for(let et=0;et<s.width;et++){let tt=0;t:for(let rt=0;rt<g;rt++)for(let at=0;at<d;at++){if(h[at][rt]!==1)continue;let st=at-_+et,At=rt-b+j;if(!(At<0||st<0||st>=s.width||At>=s.height)&&s.getBitXY(st,At)===1){tt=1;break t}}tt===1&&o.setBitXY(et,j)}return o}function dilateOnceBinaryOnlyOnes(s,o,h,d){const g=(h-1)/2,_=(d-1)/2,b=[];for(let j=0;j<s.width;j++)b.push(1);for(let j=0;j<s.height;j++){for(let et=0;et<s.width;et++){b[et]=0;for(let tt=Math.max(0,j-_);tt<Math.min(s.height,j+_+1);tt++)if(s.getBitXY(et,tt)===1){b[et]=1;break}}for(let et=0;et<s.width;et++)if(o.getBitXY(et,j)!==1){for(let tt=Math.max(0,et-g);tt<Math.min(s.width,et+g+1);tt++)if(b[tt]===1){o.setBitXY(et,j);break}}}return o}function erode(s={}){let{kernel:o=[[1,1,1],[1,1,1],[1,1,1]],iterations:h=1}=s;if(this.checkProcessable("erode",{bitDepth:[1,8,16],components:1,alpha:0}),o.columns%2===0||o.rows%2===0)throw new TypeError("erode: The number of rows and columns of the kernel must be odd");let d=!0;t:for(const _ of o)for(const b of _)if(b!==1){d=!1;break t}let g=this;for(let _=0;_<h;_++)if(this.bitDepth===1)if(d){const b=g.clone();g=erodeOnceBinaryOnlyOnes(g,b,o.length,o[0].length)}else{const b=Image$1.createFrom(g);g=erodeOnceBinary(g,b,o)}else if(d){const b=Image$1.createFrom(g);g=erodeOnceGreyOnlyOnes(g,b,o.length,o[0].length)}else{const b=Image$1.createFrom(g);g=erodeOnceGrey(g,b,o)}return g}function erodeOnceGrey(s,o,h){const d=h.length,g=h[0].length;let _=(d-1)/2,b=(g-1)/2;for(let j=0;j<s.height;j++)for(let et=0;et<s.width;et++){let tt=s.maxValue;for(let rt=0;rt<g;rt++)for(let at=0;at<d;at++){if(h[at][rt]!==1)continue;let st=at-_+et,At=rt-b+j;if(st<0||At<0||st>=s.width||At>=s.height)continue;const ht=s.getValueXY(st,At,0);ht<tt&&(tt=ht)}o.setValueXY(et,j,0,tt)}return o}function erodeOnceGreyOnlyOnes(s,o,h,d){const g=(h-1)/2,_=(d-1)/2,b=[];for(let j=0;j<s.width;j++)b.push(0);for(let j=0;j<s.height;j++){for(let et=0;et<s.width;et++){let tt=s.maxValue;for(let rt=Math.max(0,j-_);rt<Math.min(s.height,j+_+1);rt++){const at=s.getValueXY(et,rt,0);at<tt&&(tt=at)}b[et]=tt}for(let et=0;et<s.width;et++){let tt=s.maxValue;for(let rt=Math.max(0,et-g);rt<Math.min(s.width,et+g+1);rt++)b[rt]<tt&&(tt=b[rt]);o.setValueXY(et,j,0,tt)}}return o}function erodeOnceBinary(s,o,h){const d=h.length,g=h[0].length;let _=(d-1)/2,b=(g-1)/2;for(let j=0;j<s.height;j++)for(let et=0;et<s.width;et++){let tt=1;t:for(let rt=0;rt<g;rt++)for(let at=0;at<d;at++){if(h[at][rt]!==1)continue;let st=at-_+et,At=rt-b+j;if(!(At<0||st<0||st>=s.width||At>=s.height)&&s.getBitXY(st,At)===0){tt=0;break t}}tt===1&&o.setBitXY(et,j)}return o}function erodeOnceBinaryOnlyOnes(s,o,h,d){const g=(h-1)/2,_=(d-1)/2,b=[];for(let j=0;j<s.width;j++)b.push(0);for(let j=0;j<s.height;j++){for(let et=0;et<s.width;et++){b[et]=1;for(let tt=Math.max(0,j-_);tt<Math.min(s.height,j+_+1);tt++)if(s.getBitXY(et,tt)===0){b[et]=0;break}}for(let et=0;et<s.width;et++)if(o.getBitXY(et,j)!==0){for(let tt=Math.max(0,et-g);tt<Math.min(s.width,et+g+1);tt++)if(b[tt]===0){o.clearBitXY(et,j);break}}}return o}function open(s={}){let{kernel:o=[[1,1,1],[1,1,1],[1,1,1]],iterations:h=1}=s;if(this.checkProcessable("open",{bitDepth:[8,16],components:1,alpha:0}),o.columns%2===0||o.rows%2===0)throw new TypeError("open: The number of rows and columns of the kernel must be odd");let d=this;for(let g=0;g<h;g++)d=d.erode({kernel:o}),d=d.dilate({kernel:o});return d}function close(s={}){let{kernel:o=[[1,1,1],[1,1,1],[1,1,1]],iterations:h=1}=s;if(this.checkProcessable("close",{bitDepth:[1,8,16],components:1,alpha:0}),o.columns%2===0||o.rows%2===0)throw new TypeError("close: The number of rows and columns of the kernel must be odd");let d=this;for(let g=0;g<h;g++)d=d.dilate({kernel:o}).erode({kernel:o});return d}function topHat(s={}){let{kernel:o=[[1,1,1],[1,1,1],[1,1,1]],iterations:h=1}=s;if(this.checkProcessable("topHat",{bitDepth:[8,16],components:1,alpha:0}),o.length%2===0||o[0].length%2===0)throw new TypeError("topHat: The number of rows and columns of the kernel must be odd");let d=this;for(let g=0;g<h;g++)d=d.open({kernel:o}).subtractImage(d,{absolute:!0});return d}function blackHat(s={}){let{kernel:o=[[1,1,1],[1,1,1],[1,1,1]],iterations:h=1}=s;if(this.checkProcessable("blackHat",{bitDepth:[8,16],components:1,alpha:0}),o.columns%2===0||o.rows%2===0)throw new TypeError("blackHat: The number of rows and columns of the kernel must be odd");let d=this;for(let g=0;g<h;g++)d=d.close({kernel:o}).subtractImage(d,{absolute:!0});return d}function morphologicalGradient(s={}){let{kernel:o=[[1,1,1],[1,1,1],[1,1,1]],iterations:h=1}=s;if(this.checkProcessable("morphologicalGradient",{bitDepth:[8,16],components:1,alpha:0}),o.columns%2===0||o.rows%2===0)throw new TypeError("morphologicalGradient: The number of rows and columns of the kernel must be odd");let d=this;for(let g=0;g<h;g++){let _=d.dilate({kernel:o}),b=d.erode({kernel:o});d=_.subtractImage(b,{absolute:!0})}return d}function order4Points(s){let o=0,h=0,d=0,g=0,_=s[0][0],b=0;for(let tt=1;tt<s.length;tt++)s[tt][0]<_&&(_=s[tt][0],b=tt);let j=s[(b+1)%s.length][0],et=(b+1)%s.length;for(let tt=1;tt<s.length;tt++)s[tt][0]<j&&tt!==b&&(j=s[tt][0],et=tt);return s[et][1]<s[b][1]?(o=s[et],g=s[b],b!==(et+1)%4?(h=s[(et+1)%4],d=s[(et+2)%4]):(h=s[(et+2)%4],d=s[(et+3)%4])):(g=s[et],o=s[b],et!==(b+1)%4?(h=s[(b+1)%4],d=s[(b+2)%4]):(h=s[(b+2)%4],d=s[(b+3)%4])),[o,h,d,g]}function distance2Points(s,o){return Math.sqrt(Math.pow(s[0]-o[0],2)+Math.pow(s[1]-o[1],2))}function crossVect(s,o){return[s[1]*o[2]-s[2]*o[1],s[2]*o[0]-s[0]*o[2],s[0]*o[1]-s[1]*o[0]]}function dotVect(s,o){return s[0]*o[0]+s[1]*o[1]+s[2]*o[2]}function computeWidthAndHeigth(s,o,h,d,g,_){let b=Math.max(distance2Points(s,o),distance2Points(d,h)),j=Math.max(distance2Points(s,d),distance2Points(o,h)),et=0,tt=0,rt=Math.ceil(g/2),at=Math.ceil(_/2),st=b/j,At=[s[0],s[1],1],ht=[o[0],o[1],1],ct=[d[0],d[1],1],_t=[h[0],h[1],1],gt=dotVect(crossVect(At,_t),ct)/dotVect(crossVect(ht,_t),ct),wt=dotVect(crossVect(At,_t),ht)/dotVect(crossVect(ct,_t),ht),ft=[gt*ht[0]-At[0],gt*ht[1]-At[1],gt*ht[2]-At[2]],dt=[wt*ct[0]-At[0],wt*ct[1]-At[1],wt*ct[2]-At[2]],xt=ft[0],bt=ft[1],Ct=ft[2],Ut=dt[0],Qt=dt[1],kt=dt[2],Nt=1/(Ct*kt)*(xt*Ut-(xt*kt+Ct*Ut)*rt+Ct*kt*rt*rt+(bt*Qt-(bt*kt+Ct*Qt)*at+Ct*kt*at*at));Nt>=0?Nt=Math.sqrt(Nt):Nt=Math.sqrt(-Nt);let Wt=new Matrix$1([[Nt,0,rt],[0,Nt,at],[0,0,1]]),Vt=Wt.transpose(),qt=inverse(Vt),_e=inverse(Wt),Jt=Matrix$1.rowVector(ft),lr=Matrix$1.rowVector(dt),jt=Math.sqrt(dotVect(Jt.mmul(qt).mmul(_e).to1DArray(),ft)/dotVect(lr.mmul(qt).mmul(_e).to1DArray(),dt));return jt===0||st===0?(et=Math.ceil(b),tt=Math.ceil(j)):jt<st?(et=Math.ceil(b),tt=Math.ceil(et/jt)):(tt=Math.ceil(j),et=Math.ceil(jt*tt)),[et,tt]}function projectionPoint(s,o,h,d,g,_,b,j,et,tt,rt,at){let[st,At]=[(h*s+d*o+g)/(et*s+tt*o+1),(_*s+b*o+j)/(et*s+tt*o+1)];return rt.getValueXY(Math.floor(st),Math.floor(At),at)}function warpingFourPoints(s,o={}){let{calculateRatio:h=!0}=o;if(s.length!==4)throw new Error(`The array pts must have four elements, which are the four corners. Currently, pts have ${s.length} elements`);let[d,g,_,b]=s,j=[d,g,_,b],[et,tt,rt,at]=order4Points(j),st,At;h?[st,At]=computeWidthAndHeigth(et,tt,rt,at,this.width,this.height):(st=Math.ceil(Math.max(distance2Points(et,tt),distance2Points(at,rt))),At=Math.ceil(Math.max(distance2Points(et,at),distance2Points(tt,rt))));let ht=Image$1.createFrom(this,{width:st,height:At}),[ct,_t]=et,[gt,wt]=tt,[ft,dt]=rt,[xt,bt]=at,[Ct,Ut]=[0,0],[Qt,kt]=[0,st-1],[Nt,Wt]=[At-1,st-1],[Vt,qt]=[At-1,0],_e=new Matrix$1([[Ct,Ut,1,0,0,0,-Ct*ct,-Ut*ct],[Qt,kt,1,0,0,0,-Qt*gt,-kt*gt],[Nt,Wt,1,0,0,0,-Nt*ft,-Ut*ft],[Vt,qt,1,0,0,0,-Vt*xt,-qt*xt],[0,0,0,Ct,Ut,1,-Ct*_t,-Ut*_t],[0,0,0,Qt,kt,1,-Qt*wt,-kt*wt],[0,0,0,Nt,Wt,1,-Nt*dt,-Wt*dt],[0,0,0,Vt,qt,1,-Vt*bt,-qt*bt]]),Jt=Matrix$1.columnVector([ct,gt,ft,xt,_t,wt,dt,bt]),lr=new SingularValueDecomposition(_e).solve(Jt),[jt,ur,Ar,mr,dr,Nr,Ur,nr]=lr.to1DArray(),hr=new Matrix$1(At,st);for(let Dr=0;Dr<this.channels;Dr++){for(let Qr=0;Qr<At;Qr++)for(let vr=0;vr<st;vr++)hr.set(Qr,vr,projectionPoint(Qr,vr,jt,ur,Ar,mr,dr,Nr,Ur,nr,this,Dr));ht.setMatrix(hr,{channel:Dr})}return ht}function crop(s={}){let{x:o=0,y:h=0,width:d=this.width-o,height:g=this.height-h}=s;if(this.checkProcessable("crop",{bitDepth:[1,8,16]}),o=Math.round(o),h=Math.round(h),d=Math.round(d),g=Math.round(g),o>this.width-1||h>this.height-1)throw new RangeError(`crop: origin (x:${o}, y:${h}) out of range (${this.width-1}; ${this.height-1})`);if(d<=0||g<=0)throw new RangeError(`crop: width and height (width:${d}; height:${g}) must be positive numbers`);if(o<0||h<0)throw new RangeError(`crop: x and y (x:${o}, y:${h}) must be positive numbers`);if(d>this.width-o||g>this.height-h)throw new RangeError(`crop: (x: ${o}, y:${h}, width:${d}, height:${g}) size is out of range`);let _=this;if(this.bitDepth===1){const b=new Image$1(d,g,{kind:"BINARY",parent:this});_=cropBinary(this,b,o,h,d,g)}else{const b=Image$1.createFrom(this,{width:d,height:g,position:[o,h]});_=cropDefault(this,b,o,h,d,g)}return _}function cropDefault(s,o,h,d,g,_){let b=g*s.channels,j=d+_,et=0,tt=h*s.channels;for(let rt=d;rt<j;rt++){let at=rt*s.width*s.channels+tt,st=at+b;for(;at<st;at++)o.data[et++]=s.data[at]}return o}function cropBinary(s,o,h,d,g,_){let b=g*s.channels,j=d+_,et=0,tt=h*s.channels;for(let rt=d;rt<j;rt++){let at=rt*s.width*s.channels+tt,st=at+b;for(;at<st;at++)s.getBit(at)&&o.setBit(et),++et}return o}function cropAlpha(s={}){this.checkProcessable("cropAlpha",{alpha:1});const{threshold:o=this.maxValue}=s;let h=findLeft(this,o,this.components);if(h===-1)throw new Error("Could not find new dimensions. Threshold may be too high.");let d=findTop(this,o,this.components,h),g=findBottom(this,o,this.components,h),_=findRight(this,o,this.components,h,d,g);return this.crop({x:h,y:d,width:_-h+1,height:g-d+1})}function findLeft(s,o,h){for(let d=0;d<s.width;d++)for(let g=0;g<s.height;g++)if(s.getValueXY(d,g,h)>=o)return d;return-1}function findTop(s,o,h,d){for(let g=0;g<s.height;g++)for(let _=d;_<s.width;_++)if(s.getValueXY(_,g,h)>=o)return g;return-1}function findBottom(s,o,h,d){for(let g=s.height-1;g>=0;g--)for(let _=d;_<s.width;_++)if(s.getValueXY(_,g,h)>=o)return g;return-1}function findRight(s,o,h,d,g,_){for(let b=s.width-1;b>=d;b--)for(let j=g;j<=_;j++)if(s.getValueXY(b,j,h)>=o)return b;return-1}function getFactor(s){if(typeof s=="string"){const o=s[s.length-1];s=parseFloat(s),o==="%"&&(s/=100)}return s}function getThreshold$1(s,o){if(!o)throw Error("getThreshold : the maxValue should be specified");if(typeof s=="string"){if(s[s.length-1]!=="%")throw Error("getThreshold : if the value is a string it must finish by %");return parseFloat(s)/100*o}else{if(typeof s=="number")return s<1?s*o:s;throw Error("getThreshold : the value is not valid")}}function factorDimensions(s,o,h){s=getFactor(s);let d=Math.round(s*o),g=Math.round(s*h);return d<=0&&(d=1),g<=0&&(g=1),{width:d,height:g}}function checkRow(s,o){if(o<0||o>=s.height)throw new RangeError(`row must be included between 0 and ${s.height-1}. Current value: ${o}`)}function checkColumn(s,o){if(o<0||o>=s.width)throw new RangeError(`column must be included between 0 and ${s.width-1}. Current value: ${o}`)}function checkChannel(s,o){if(o<0||o>=s.channels)throw new RangeError(`channel must be included between 0 and ${s.channels-1}. Current value: ${o}`)}const validInterpolations={nearestneighbor:"nearestNeighbor",nearestneighbour:"nearestNeighbor",bilinear:"bilinear"};function checkInterpolation(s){if(typeof s!="string")throw new TypeError("interpolation must be a string");if(s=s.toLowerCase(),!validInterpolations[s])throw new RangeError(`invalid interpolation algorithm: ${s}`);return validInterpolations[s]}function nearestNeighbor(s,o,h){const d=this.width/o,g=this.height/h;if(this.bitDepth>1)for(let _=0;_<o;_++){const b=Math.floor((_+.5)*d);for(let j=0;j<h;j++){const et=Math.floor((j+.5)*g);for(let tt=0;tt<this.channels;tt++)s.setValueXY(_,j,tt,this.getValueXY(b,et,tt))}}else for(let _=0;_<o;_++){const b=Math.floor((_+.5)*d);for(let j=0;j<h;j++){const et=Math.floor((j+.5)*g);this.getBitXY(b,et)&&s.setBitXY(_,j)}}}function resize(s={}){const{factor:o=1,interpolation:h=validInterpolations.nearestneighbor,preserveAspectRatio:d=!0}=s,g=checkInterpolation(h);let _=s.width,b=s.height;if(_||(b&&d?_=Math.round(b*(this.width/this.height)):_=this.width),b||(d?b=Math.round(_*(this.height/this.width)):b=this.height),{width:_,height:b}=factorDimensions(o,_,b),_===this.width&&b===this.height){const rt=this.clone();return rt.position=[0,0],rt}let j=Math.round((this.width-_)/2),et=Math.round((this.height-b)/2);const tt=Image$1.createFrom(this,{width:_,height:b,position:[j,et]});switch(g){case validInterpolations.nearestneighbor:nearestNeighbor.call(this,tt,_,b);break;default:throw new Error(`unsupported resize interpolation: ${g}`)}return tt}function hsv(){this.checkProcessable("hsv",{bitDepth:[8,16],alpha:[0,1],colorModel:[RGB$1]});let s=Image$1.createFrom(this,{colorModel:HSV}),o=0,h=this.data;for(let d=0;d<h.length;d+=this.channels){let g=h[d],_=h[d+1],b=h[d+2],j=Math.min(g,_,b),et=Math.max(g,_,b),tt=et-j,rt=0,at=et===0?0:tt/et,st=et;if(et!==j){switch(et){case g:rt=(_-b)/tt+(_<b?6:0);break;case _:rt=(b-g)/tt+2;break;case b:rt=(g-_)/tt+4;break;default:throw new Error("unreachable")}rt/=6}s.data[o++]=rt*this.maxValue,s.data[o++]=at*this.maxValue,s.data[o++]=st,this.alpha&&(s.data[o++]=h[d+3])}return s}function hsl$1(){this.checkProcessable("hsl",{bitDepth:[8,16],alpha:[0,1],colorModel:[RGB$1]});let s=Image$1.createFrom(this,{colorModel:HSL}),o=Math.floor(this.maxValue/2),h=0,d=this.data;for(let g=0;g<d.length;g+=this.channels){let _=d[g],b=d[g+1],j=d[g+2],et=Math.max(_,b,j),tt=Math.min(_,b,j),rt=0,at=0,st=(et+tt)/2;if(et!==tt){let At=et-tt;switch(at=st>o?At/(2-et-tt):At/(et+tt),et){case _:rt=(b-j)/At+(b<j?6:0);break;case b:rt=(j-_)/At+2;break;case j:rt=(_-b)/At+4;break;default:throw new Error("unreachable")}rt/=6}s.data[h++]=rt*this.maxValue,s.data[h++]=at*this.maxValue,s.data[h++]=st,this.alpha&&(s.data[h++]=d[g+3])}return s}function cmyk(){this.checkProcessable("cmyk",{bitDepth:[8,16],alpha:[0,1],colorModel:[RGB$1]});let s=Image$1.createFrom(this,{components:4,colorModel:CMYK$1}),o=0,h=this.data;for(let d=0;d<h.length;d+=this.channels){let g=h[d],_=h[d+1],b=h[d+2],j=Math.min(this.maxValue-g,this.maxValue-_,this.maxValue-b),et=(this.maxValue-g-j)/(1-j/this.maxValue),tt=(this.maxValue-_-j)/(1-j/this.maxValue),rt=(this.maxValue-b-j)/(1-j/this.maxValue);s.data[o++]=Math.round(et),s.data[o++]=Math.round(tt),s.data[o++]=Math.round(rt),s.data[o++]=Math.round(j),this.alpha&&(s.data[o++]=h[d+3])}return s}function rgba8(){return new Image$1(this.width,this.height,this.getRGBAData(),{kind:"RGBA",parent:this})}const methods$1={luma709(s,o,h){return s*6966+o*23436+h*2366>>15},luma601(s,o,h){return s*9798+o*19235+h*3735>>15},maximum(s,o,h){return Math.max(s,o,h)},minimum(s,o,h){return Math.min(s,o,h)},average(s,o,h){return(s+o+h)/3>>0},minmax(s,o,h){return(Math.max(s,o,h)+Math.min(s,o,h))/2},red(s){return s},green(s,o){return o},blue(s,o,h){return h},cyan(s,o,h,d){let g=methods$1.black(s,o,h,d);return(d.maxValue-s-g)/(1-g/d.maxValue)>>0},magenta(s,o,h,d){let g=methods$1.black(s,o,h,d);return(d.maxValue-o-g)/(1-g/d.maxValue)>>0},yellow(s,o,h,d){let g=methods$1.black(s,o,h,d);return(d.maxValue-h-g)/(1-g/d.maxValue)>>0},black(s,o,h,d){return Math.min(d.maxValue-s,d.maxValue-o,d.maxValue-h)},hue(s,o,h,d){let g=methods$1.min(s,o,h),_=methods$1.max(s,o,h);if(_===g)return 0;let b=0,j=_-g;switch(_){case s:b=(o-h)/j+(o<h?6:0);break;case o:b=(h-s)/j+2;break;case h:b=(s-o)/j+4;break;default:throw new Error("unreachable")}return b/6*d.maxValue>>0},saturation(s,o,h,d){let g=methods$1.min(s,o,h),_=methods$1.max(s,o,h),b=_-g;return _===0?0:b/_*d.maxValue},lightness(s,o,h){let d=methods$1.min(s,o,h);return(methods$1.max(s,o,h)+d)/2}};Object.defineProperty(methods$1,"luminosity",{enumerable:!1,value:methods$1.lightness});Object.defineProperty(methods$1,"luminance",{enumerable:!1,value:methods$1.lightness});Object.defineProperty(methods$1,"min",{enumerable:!1,value:methods$1.minimum});Object.defineProperty(methods$1,"max",{enumerable:!1,value:methods$1.maximum});Object.defineProperty(methods$1,"brightness",{enumerable:!1,value:methods$1.maximum});Object.keys(methods$1).forEach(s=>{});function grey(s={}){let{algorithm:o="luma709",keepAlpha:h=!1,mergeAlpha:d=!0}=s;if(typeof o!="string"&&typeof o!="function")throw new TypeError("algorithm must be a string or a function");this.checkProcessable("grey",{bitDepth:[8,16],alpha:[0,1]}),this.components===1&&(o="red"),h&=this.alpha,d&=this.alpha,h&&(d=!1);let g=getOutputImage(this,s,{components:1,alpha:h,colorModel:GREY$1}),_;if(typeof o=="function")_=o;else if(_=methods$1[o.toLowerCase()],!_)throw new Error(`unsupported grey algorithm: ${o}`);let b=0;for(let j=0;j<this.data.length;j+=this.channels)d?g.data[b++]=clamp(_(this.data[j],this.data[j+1],this.data[j+2],this)*this.data[j+this.components]/this.maxValue,this):(g.data[b++]=clamp(_(this.data[j],this.data[j+1],this.data[j+2],this),this),g.alpha&&(g.data[b++]=this.data[j+this.components]));return g}function huang(s){let o=0;for(let rt=0;rt<s.length;rt++)if(s[rt]!==0){o=rt;break}let h=s.length-1;for(let rt=s.length-1;rt>=o;rt--)if(s[rt]!==0){h=rt;break}let d=1/(h-o),g=new Array(s.length),_=0,b=0;for(let rt=o;rt<s.length;rt++)_+=rt*s[rt],b+=s[rt],g[rt]=_/b;let j=new Array(s.length);_=b=0;for(let rt=h;rt>0;rt--)_+=rt*s[rt],b+=s[rt],j[rt-1]=_/b;let et=-1,tt=Number.MAX_VALUE;for(let rt=0;rt<s.length;rt++){let at=0,st;for(let At=0;At<=rt;At++)st=1/(1+d*Math.abs(At-g[rt])),st<1e-6||st>.999999||(at+=s[At]*(-st*Math.log(st)-(1-st)*Math.log(1-st)));for(let At=rt+1;At<s.length;At++)st=1/(1+d*Math.abs(At-j[rt])),st<1e-6||st>.999999||(at+=s[At]*(-st*Math.log(st)-(1-st)*Math.log(1-st)));at<tt&&(tt=at,et=rt)}return et}function intermodes(s){let o=s.slice(),h=0;for(;!bimodalTest$1(o);){let g=0,_=0,b=o[0];for(let j=0;j<s.length-1;j++)g=_,_=b,b=o[j+1],o[j]=(g+_+b)/3;if(o[s.length-1]=(_+b)/3,h++,h>1e4)throw new Error("Intermodes Threshold not found after 10000 iterations")}let d=0;for(let g=1;g<s.length-1;g++)o[g-1]<o[g]&&o[g+1]<o[g]&&(d+=g);return Math.floor(d/2)}function bimodalTest$1(s){let o=!1,h=0;for(let d=1;d<s.length-1;d++)if(s[d-1]<s[d]&&s[d+1]<s[d]&&(h++,h>2))return!1;return h===2&&(o=!0),o}function isodata(s){let o,h,d,g,_=0;for(let b=1;b<s.length;b++)if(s[b]>0){_=b+1;break}for(;;){o=0,d=0;for(let b=0;b<_;b++)d=d+s[b],o=o+s[b]*b;g=0,h=0;for(let b=_+1;b<s.length;b++)h+=s[b],g+=s[b]*b;if(d>0&&h>0&&(o/=d,g/=h,_===Math.round((o+g)/2)))break;if(_++,_>s.length-2)throw new Error("Threshold not found")}return _}function li(s,o){let h,d,g,_,b,j,et,tt,rt,at,st,At;st=.5,at=0;for(let ht=0;ht<s.length;ht++)at+=ht*s[ht];at/=o,et=at;do{j=et,h=j+.5|0,d=0,_=0;for(let ht=0;ht<=h;ht++)d+=ht*s[ht],_+=s[ht];tt=_===0?0:d/_,g=0,b=0;for(let ht=h+1;ht<s.length;ht++)g+=ht*s[ht],b+=s[ht];rt=b===0?0:g/b,At=(tt-rt)/(Math.log(tt)-Math.log(rt)),At<-Number.EPSILON?et=At-.5|0:et=At+.5|0}while(Math.abs(et-j)>st);return h}function maxEntropy(s,o){let h=new Array(s.length);for(let st=0;st<s.length;st++)h[st]=s[st]/o;let d=new Array(s.length),g=new Array(s.length);d[0]=h[0],g[0]=1-d[0];for(let st=1;st<s.length;st++)d[st]=d[st-1]+h[st],g[st]=1-d[st];let _=0;for(let st=0;st<s.length;st++)if(Math.abs(d[st])>=Number.EPSILON){_=st;break}let b=s.length-1;for(let st=s.length-1;st>=_;st--)if(Math.abs(g[st])>=Number.EPSILON){b=st;break}let j=-1,et,tt=Number.MIN_VALUE,rt,at;for(let st=_;st<=b;st++){rt=0;for(let At=0;At<=st;At++)s[At]!==0&&(rt-=h[At]/d[st]*Math.log(h[At]/d[st]));at=0;for(let At=st+1;At<s.length;At++)s[At]!==0&&(at-=h[At]/g[st]*Math.log(h[At]/g[st]));et=rt+at,tt<et&&(tt=et,j=st)}return j}function mean$1(s,o){let h=0;for(let d=0;d<s.length;d++)h+=d*s[d];return Math.floor(h/o)}function minError(s,o){let h,d=-2,g,_,b,j,et,tt,rt,at,st,At,ht,ct=0;for(let _t=0;_t<s.length;_t++)ct+=_t*s[_t];for(ct/=o,h=ct;h!==d;){let _t=sumA(s,h),gt=sumA(s,s.length-1),wt=sumB(s,h),ft=sumB(s,s.length-1),dt=sumC(s,h),xt=sumC(s,s.length-1);if(g=wt/_t,_=(ft-wt)/(gt-_t),b=_t/gt,j=(gt-_t)/gt,et=dt/_t-g*g,tt=(xt-dt)/(gt-_t)-_*_,rt=1/et-1/tt,at=g/et-_/tt,st=g*g/et-_*_/tt+Math.log10(et*(j*j)/(tt*(b*b))),At=at*at-rt*st,At<0)return h;d=h,ht=(at+Math.sqrt(At))/rt,isNaN(ht)?h=d:h=Math.floor(ht)}return h}function sumA(s,o){let h=0;for(let d=0;d<=o;d++)h+=s[d];return h}function sumB(s,o){let h=0;for(let d=0;d<=o;d++)h+=d*s[d];return h}function sumC(s,o){let h=0;for(let d=0;d<=o;d++)h+=d*d*s[d];return h}function minimum(s){if(s.length<2)return 0;let o=0,h=-1,d=-1,g=new Array(s.length);for(let _=0;_<s.length;_++)g[_]=s[_],s[_]>0&&(d=_);for(;!bimodalTest(g);)if(g=smoothed(g),o++,o>1e4)return h;return h=minimumBetweenPeeks(g,d),h}function smoothed(s){let o=new Array(s.length);for(let h=1;h<s.length-1;h++)o[h]=(s[h-1]+s[h]+s[h+1])/3;return o[0]=(s[0]+s[1])/3,o[s.length-1]=(s[s.length-2]+s[s.length-1])/3,o}function minimumBetweenPeeks(s,o){let h;for(let d=1;d<o;d++)if(s[d-1]>s[d]&&s[d+1]>=s[d]){h=d;break}return h}function bimodalTest(s){let o=s.length,h=!1,d=0;for(let g=1;g<o-1;g++)if(s[g-1]<s[g]&&s[g+1]<s[g]&&(d++,d>2))return!1;return d===2&&(h=!0),h}function moments(s,o){let h=1,d=0,g=0,_=0,b=0,j,et,tt,rt,at,st,At=-1,ht=s.length,ct=new Array(ht);for(let _t=0;_t<ht;_t++)ct[_t]=s[_t]/o;for(let _t=0;_t<ht;_t++)d+=_t*ct[_t],g+=_t*_t*ct[_t],_+=_t*_t*_t*ct[_t];et=h*g-d*d,tt=(-g*g+d*_)/et,rt=(h*-_+g*d)/et,at=.5*(-rt-Math.sqrt(rt*rt-4*tt)),st=.5*(-rt+Math.sqrt(rt*rt-4*tt)),j=(st-d)/(st-at);for(let _t=0;_t<ht;_t++)if(b+=ct[_t],b>j){At=_t;break}return At}function otsu(s,o){let h=0,d=0,g=0,_=0,b=0;for(let j=0;j<s.length;j++)b+=j*s[j];for(let j=0;j<s.length;j++){d=d+s[j];const et=o-d;if(d===0||et===0)continue;h=h+j*s[j];const tt=(b-h)/et,rt=d*et*(h/d-tt)*(h/d-tt);rt>=g&&(_=j,g=rt)}return _}function percentile(s){let o=-1,h=.5,d=new Array(s.length),g=partialSum(s,s.length-1),_=1;for(let b=0;b<s.length;b++)d[b]=Math.abs(partialSum(s,b)/g-h),d[b]<_&&(_=d[b],o=b);return o}function partialSum(s,o){let h=0;for(let d=0;d<=o;d++)h+=s[d];return h}function renyiEntropy(s,o){let h,d,g,_=new Array(s.length),b=new Array(s.length),j=new Array(s.length),et=0,tt=0,rt=0,at=0,st=0,At=0,ht=1/(1-.5),ct=1/-1;for(let ft=0;ft<s.length;ft++)_[ft]=s[ft]/o;b[0]=_[0],j[0]=1-b[0];for(let ft=1;ft<s.length;ft++)b[ft]=b[ft-1]+_[ft],j[ft]=1-b[ft];d=0;for(let ft=0;ft<s.length;ft++)if(Math.abs(b[ft])>=Number.EPSILON){d=ft;break}g=s.length-1;for(let ft=s.length-1;ft>=d;ft--)if(Math.abs(j[ft])>=Number.EPSILON){g=ft;break}for(let ft=d;ft<=g;ft++){let dt=0,xt=0,bt=0;for(let Vt=0;Vt<=ft;Vt++)s[Vt]!==0&&(dt-=_[Vt]/b[ft]*Math.log(_[Vt]/b[ft])),xt+=Math.sqrt(_[Vt]/b[ft]),bt+=_[Vt]*_[Vt]/(b[ft]*b[ft]);let Ct=0,Ut=0,Qt=0;for(let Vt=ft+1;Vt<s.length;Vt++)s[Vt]!==0&&(Ct-=_[Vt]/j[ft]*Math.log(_[Vt]/j[ft])),Ut+=Math.sqrt(_[Vt]/j[ft]),Qt+=_[Vt]*_[Vt]/(j[ft]*j[ft]);let kt=dt+Ct,Nt=ht*(xt*Ut>0?Math.log(xt*Ut):0),Wt=ct*(bt*Qt>0?Math.log(bt*Qt):0);kt>at&&(at=kt,et=ft),Nt>st&&(st=Nt,tt=ft),Wt>At&&(At=Wt,rt=ft)}let _t=[et,tt,rt];_t.sort((ft,dt)=>ft-dt);let gt;Math.abs(_t[0]-_t[1])<=5?Math.abs(_t[1]-_t[2])<=5?gt=[1,2,1]:gt=[0,1,3]:Math.abs(_t[1]-_t[2])<=5?gt=[3,1,0]:gt=[1,2,1];let wt=b[_t[2]]-b[_t[0]];return h=Math.round(_t[0]*(b[_t[0]]+.25*wt*gt[0])+.25*_t[1]*wt*gt[1]+_t[2]*(j[_t[2]]+.25*wt*gt[2])),h}function shanbhag(s,o){let h=new Array(s.length);for(let At=0;At<s.length;At++)h[At]=s[At]/o;let d=new Array(s.length),g=new Array(s.length);d[0]=h[0],g[0]=1-d[0];for(let At=1;At<s.length;At++)d[At]=d[At-1]+h[At],g[At]=1-d[At];let _=0;for(let At=0;At<s.length;At++)if(Math.abs(d[At])>=Number.EPSILON){_=At;break}let b=s.length-1;for(let At=s.length-1;At>=_;At--)if(Math.abs(g[At])>=Number.EPSILON){b=At;break}let j=-1,et=Number.MAX_VALUE,tt,rt,at,st;for(let At=_;At<=b;At++){at=0,tt=.5/d[At];for(let ht=1;ht<=At;ht++)at-=h[ht]*Math.log(1-tt*d[ht-1]);at*=tt,st=0,tt=.5/g[At];for(let ht=At+1;ht<s.length;ht++)st-=h[ht]*Math.log(1-tt*g[ht]);st*=tt,rt=Math.abs(at-st),rt<et&&(et=rt,j=At)}return j}function triangle$1(s){let o=0,h=0,d=0,g=0;for(let at=0;at<s.length;at++)if(s[at]>0){o=at;break}o>0&&o--;for(let at=s.length-1;at>0;at--)if(s[at]>0){g=at;break}g<s.length-1&&g++;for(let at=0;at<s.length;at++)s[at]>h&&(d=at,h=s[at]);let _=!1;if(d-o<g-d){_=!0;let at=0,st=s.length-1;for(;at<st;){let At=s[at];s[at]=s[st],s[st]=At,at++,st--}o=s.length-1-g,d=s.length-1-d}if(o===d)return o;let b,j,et;b=s[d],j=o-d,et=Math.sqrt(b*b+j*j),b/=et,j/=et,et=b*o+j*s[o];let tt=o,rt=0;for(let at=o+1;at<=d;at++){let st=b*at+j*s[at]-et;st>rt&&(tt=at,rt=st)}if(tt--,_){let at=0,st=s.length-1;for(;at<st;){let At=s[at];s[at]=s[st],s[st]=At,at++,st--}return s.length-1-tt}else return tt}function yen(s,o){let h=new Array(s.length);for(let tt=0;tt<s.length;tt++)h[tt]=s[tt]/o;let d=new Array(s.length);d[0]=h[0];for(let tt=1;tt<s.length;tt++)d[tt]=d[tt-1]+h[tt];let g=new Array(s.length);g[0]=h[0]*h[0];for(let tt=1;tt<s.length;tt++)g[tt]=g[tt-1]+h[tt]*h[tt];let _=new Array(s.length);_[s.length-1]=0;for(let tt=s.length-2;tt>=0;tt--)_[tt]=_[tt+1]+h[tt+1]*h[tt+1];let b=-1,j=Number.MIN_VALUE,et;for(let tt=0;tt<s.length;tt++)et=-1*(g[tt]*_[tt]>0?Math.log(g[tt]*_[tt]):0)+2*(d[tt]*(1-d[tt])>0?Math.log(d[tt]*(1-d[tt])):0),et>j&&(j=et,b=tt);return b}const methods={huang,intermodes,isodata,li,maxentropy:maxEntropy,mean:mean$1,minerror:minError,minimum,moments,otsu,percentile,renyientropy:renyiEntropy,shanbhag,triangle:triangle$1,yen},names={};Object.keys(methods).forEach(s=>{names[s]=s});function getThreshold(s={}){let{algorithm:o=names.otsu}=s;this.checkProcessable("getThreshold",{components:1,bitDepth:[8,16]});let h=methods[o.toLowerCase()];if(h){let d=this.getHistogram();return h(d,this.size)}else throw new Error(`unknown thresholding algorithm: ${o}`)}const THRESHOLD="threshold";function mask(s={}){let{algorithm:o=THRESHOLD,threshold:h=.5,useAlpha:d=!0,invert:g=!1}=s;this.checkProcessable("mask",{components:1,bitDepth:[8,16]}),o===THRESHOLD?h=getThreshold$1(h,this.maxValue):h=getThreshold.call(this,s);let _=new Image$1(this.width,this.height,{kind:"BINARY",parent:this}),b=0;if(this.alpha&&d)for(let j=0;j<this.data.length;j+=this.channels){let et=this.data[j]+(this.maxValue-this.data[j])*(this.maxValue-this.data[j+1])/this.maxValue;(g&&et<=h||!g&&et>=h)&&_.setBit(b),b++}else for(let j=0;j<this.data.length;j+=this.channels)(g&&this.data[j]<=h||!g&&this.data[j]>=h)&&_.setBit(b),b++;return _}function copyImage(s,o,h,d){let g=s.width,_=s.height,b=o.width,j=s.channels;for(let et=0;et<g;et++)for(let tt=0;tt<_;tt++)for(let rt=0;rt<j;rt++){let at=(tt*g+et)*j+rt,st=((d+tt)*b+h+et)*j+rt;o.data[st]=s.data[at]}}function pad(s={}){let{size:o=0,algorithm:h="copy",color:d}=s;if(this.checkProcessable("pad",{bitDepth:[8,16]}),h==="set"){if(d.length!==this.channels)throw new Error(`pad: the color array must have the same length as the number of channels. Here: ${this.channels}`);for(let et=0;et<d.length;et++)d[et]===0&&(d[et]=.001)}else d=newArray(this.channels,null);Array.isArray(o)||(o=[o,o]);let g=this.width+o[0]*2,_=this.height+o[1]*2,b=this.channels,j=Image$1.createFrom(this,{width:g,height:_});copyImage(this,j,o[0],o[1]);for(let et=o[0];et<g-o[0];et++)for(let tt=0;tt<b;tt++){let rt=d[tt]||j.data[(o[1]*g+et)*b+tt];for(let at=0;at<o[1];at++)j.data[(at*g+et)*b+tt]=rt;rt=d[tt]||j.data[((_-o[1]-1)*g+et)*b+tt];for(let at=_-o[1];at<_;at++)j.data[(at*g+et)*b+tt]=rt}for(let et=0;et<_;et++)for(let tt=0;tt<b;tt++){let rt=d[tt]||j.data[(et*g+o[0])*b+tt];for(let at=0;at<o[0];at++)j.data[(et*g+at)*b+tt]=rt;rt=d[tt]||j.data[(et*g+g-o[0]-1)*b+tt];for(let at=g-o[0];at<g;at++)j.data[(et*g+at)*b+tt]=rt}return j}function colorDepth(s=8){if(this.checkProcessable("colorDepth",{bitDepth:[1,8,16]}),![8,16].includes(s))throw Error("You need to specify the new colorDepth as 8 or 16");if(this.bitDepth===s)return this.clone();let o=Image$1.createFrom(this,{bitDepth:s});switch(s){case 8:if(this.bitDepth===1)for(let h=0;h<this.size;h++)this.getBit(h)&&(o.data[h]=255);else for(let h=0;h<this.data.length;h++)o.data[h]=this.data[h]>>8;break;case 16:if(this.bitDepth===1)for(let h=0;h<this.size;h++)this.getBit(h)&&(o.data[h]=65535);else for(let h=0;h<this.data.length;h++)o.data[h]=this.data[h]<<8|this.data[h];break;default:throw new Error("colorDepth conversion unexpected case")}return o}function rotateFree(s,o={}){const{interpolation:h=validInterpolations.nearestneighbor,width:d=this.width,height:g=this.height}=o;if(typeof s!="number")throw new TypeError("degrees must be a number");const _=checkInterpolation(h),b=s*Math.PI/180,j=Math.floor(Math.abs(d*Math.cos(b))+Math.abs(g*Math.sin(b))),et=Math.floor(Math.abs(g*Math.cos(b))+Math.abs(d*Math.sin(b))),tt=Math.cos(-b),rt=Math.sin(-b);let at=j/2,st=et/2;j%2===0?(at=at-.5,et%2===0?st=st-.5:st=Math.floor(st)):(at=Math.floor(at),et%2===0?st=st-.5:st=Math.floor(st));const At=Math.floor(d/2-at),ht=Math.floor(g/2-st);if(this.bitDepth===1){const ct=new Image$1(j,et,{kind:"BINARY",parent:this});switch(_){case validInterpolations.nearestneighbor:return rotateBinaryNearestNeighbor(this,ct,At,ht,at,st,tt,rt);case validInterpolations.bilinear:return rotateBinaryBilinear(this,ct,At,ht,at,st,tt,rt);default:throw new Error(`unsupported rotate interpolation: ${_}`)}}else{const ct=Image$1.createFrom(this,{width:j,height:et});switch(_){case validInterpolations.nearestneighbor:return rotateNearestNeighbor(this,ct,At,ht,at,st,tt,rt);case validInterpolations.bilinear:return rotateBilinear(this,ct,At,ht,at,st,tt,rt);default:throw new Error(`unsupported rotate interpolation: ${_}`)}}}function rotateNearestNeighbor(s,o,h,d,g,_,b,j){for(let et=0;et<o.width;et+=1)for(let tt=0;tt<o.height;tt+=1)for(let rt=0;rt<s.channels;rt++){let at=Math.round((et-g)*b-(tt-_)*j+g)+h,st=Math.round((tt-_)*b+(et-g)*j+_)+d;at<0||at>=s.width||st<0||st>=s.height?s.alpha===1&&rt===s.channels-1?o.setValueXY(et,tt,rt,0):o.setValueXY(et,tt,rt,s.maxValue):o.setValueXY(et,tt,rt,s.getValueXY(at,st,rt))}return o}function rotateBinaryNearestNeighbor(s,o,h,d,g,_,b,j){for(let et=0;et<o.width;et+=1)for(let tt=0;tt<o.height;tt+=1){let rt=Math.round((et-g)*b-(tt-_)*j+g)+h,at=Math.round((tt-_)*b+(et-g)*j+_)+d;(rt<0||rt>=s.width||at<0||at>=s.height||s.getBitXY(rt,at))&&o.setBitXY(et,tt)}return o}function rotateBilinear(s,o,h,d,g,_,b,j){let et=s.width*s.channels;for(let tt=0;tt<o.height;tt++)for(let rt=0;rt<o.width;rt++){let at=(rt-g)*b-(tt-_)*j+g+h,st=(tt-_)*b+(rt-g)*j+_+d,At=at|0,ht=st|0,ct=at-At,_t=st-ht;for(let gt=0;gt<s.channels;gt++)if(at<0||at>=s.width||st<0||st>=s.height)s.alpha===1&&gt===s.channels-1?o.setValueXY(rt,tt,gt,0):o.setValueXY(rt,tt,gt,s.maxValue);else{let wt=(ht*s.width+At)*s.channels+gt,ft=s.data[wt],dt=s.data[wt+s.channels],xt=s.data[wt+et],bt=s.data[wt+et+s.channels],Ct=ft+ct*(dt-ft)+_t*(xt-ft)+ct*_t*(ft-dt-xt+bt)|0;o.setValueXY(rt,tt,gt,Ct)}}return o}function rotateBinaryBilinear(s,o,h,d,g,_,b,j){let et=s.width;for(let tt=0;tt<o.height;tt++)for(let rt=0;rt<o.width;rt++){let at=(rt-g)*b-(tt-_)*j+g+h,st=(tt-_)*b+(rt-g)*j+_+d,At=at|0,ht=st|0,ct=at-At,_t=st-ht;if(at<0||at>=s.width||st<0||st>=s.height)o.setBitXY(rt,tt);else{let gt=ht*s.width+At,wt=s.getBit(gt),ft=s.getBit(gt+1),dt=s.getBit(gt+et),xt=s.getBit(gt+1+et);(wt|ct&ft-wt|_t&dt-wt|ct&_t&wt-ft-dt+xt)>0&&o.setBitXY(rt,tt)}}return o}function rotate$1(s,o){if(this.checkProcessable("rotate",{bitDepth:[1,8,16]}),typeof s!="number")throw new TypeError("angle must be a number");switch(s<0&&(s=Math.ceil(-s/360)*360+s),s%360){case 0:return this.clone();case 90:return rotateRight.call(this);case 180:return rotate180.call(this);case 270:return rotateLeft.call(this);default:return rotateFree.call(this,s,o)}}function rotateLeft(){if(this.bitDepth===1){const s=new Image$1(this.height,this.width,{kind:"BINARY",parent:this}),o=s.height-1;for(let h=0;h<this.height;h++)for(let d=0;d<this.width;d++)this.getBitXY(d,h)&&s.setBitXY(h,o-d);return s}else{const s=Image$1.createFrom(this,{width:this.height,height:this.width}),o=s.height-1;for(let h=0;h<this.height;h++)for(let d=0;d<this.width;d++)for(let g=0;g<this.channels;g++)s.setValueXY(h,o-d,g,this.getValueXY(d,h,g));return s}}function rotateRight(){if(this.bitDepth===1){const s=new Image$1(this.height,this.width,{kind:"BINARY",parent:this}),o=s.width-1;for(let h=0;h<this.height;h++)for(let d=0;d<this.width;d++)this.getBitXY(d,h)&&s.setBitXY(o-h,d);return s}else{const s=Image$1.createFrom(this,{width:this.height,height:this.width}),o=s.width-1;for(let h=0;h<this.height;h++)for(let d=0;d<this.width;d++)for(let g=0;g<this.channels;g++)s.setValueXY(o-h,d,g,this.getValueXY(d,h,g));return s}}function rotate180(){if(this.bitDepth===1){const s=new Image$1(this.width,this.height,{kind:"BINARY",parent:this}),o=s.width-1,h=s.height-1;for(let d=0;d<this.height;d++)for(let g=0;g<this.width;g++)this.getBitXY(g,d)&&s.setBitXY(o-g,h-d);return s}else{const s=Image$1.createFrom(this),o=s.width-1,h=s.height-1;for(let d=0;d<this.height;d++)for(let g=0;g<this.width;g++)for(let _=0;_<this.channels;_++)s.setValueXY(o-g,h-d,_,this.getValueXY(g,d,_));return s}}function insert(s,o={}){const h=getImageParameters(s);this.checkProcessable("insert",h);let{x:d=0,y:g=0}=o;const _=getOutputImageOrInPlace(this,o,{copy:!0}),b=Math.min(_.height,g+s.height),j=Math.min(_.width,d+s.width);if(_.bitDepth===1)for(let et=g;et<b;et++)for(let tt=d;tt<j;tt++)s.getBitXY(tt-d,et-g)?_.setBitXY(tt,et):_.clearBitXY(tt,et);else for(let et=g;et<b;et++)for(let tt=d;tt<j;tt++)_.setPixelXY(tt,et,s.getPixelXY(tt-d,et-g));return _}function setBorder(s={}){let{size:o=0,algorithm:h="copy",color:d}=s;if(this.checkProcessable("setBorder",{bitDepth:[8,16,32,64]}),h==="set"){if(d.length!==this.channels)throw new Error(`setBorder: the color array must have the same length as the number of channels. Here: ${this.channels}`);for(let j=0;j<d.length;j++)d[j]===0&&(d[j]=.001)}else d=newArray(this.channels,null);Array.isArray(o)||(o=[o,o]);let g=o[0],_=o[1],b=this.channels;for(let j=g;j<this.width-g;j++)for(let et=0;et<b;et++){let tt=d[et]||this.data[(j+this.width*_)*b+et];for(let rt=0;rt<_;rt++)this.data[(rt*this.width+j)*b+et]=tt;tt=d[et]||this.data[(j+this.width*(this.height-_-1))*b+et];for(let rt=this.height-_;rt<this.height;rt++)this.data[(rt*this.width+j)*b+et]=tt}for(let j=0;j<this.height;j++)for(let et=0;et<b;et++){let tt=d[et]||this.data[(j*this.width+g)*b+et];for(let rt=0;rt<g;rt++)this.data[(j*this.width+rt)*b+et]=tt;tt=d[et]||this.data[(j*this.width+this.width-g-1)*b+et];for(let rt=this.width-g;rt<this.width;rt++)this.data[(j*this.width+rt)*b+et]=tt}return this}function split(s={}){let{preserveAlpha:o=!0}=s;if(this.checkProcessable("split",{bitDepth:[8,16]}),this.components===1)return new Stack([this.clone()]);let h=new Stack,d=this.data;if(this.alpha&&o)for(let g=0;g<this.components;g++){let _=Image$1.createFrom(this,{components:1,alpha:!0,colorModel:GREY$1}),b=0;for(let j=0;j<d.length;j+=this.channels)_.data[b++]=d[j+g],_.data[b++]=d[j+this.components];h.push(_)}else for(let g=0;g<this.channels;g++){let _=Image$1.createFrom(this,{components:1,alpha:!1,colorModel:GREY$1}),b=0;for(let j=0;j<d.length;j+=this.channels)_.data[b++]=d[j+g];h.push(_)}return h}function getChannel(s,o={}){let{keepAlpha:h=!1,mergeAlpha:d=!1}=o;h&=this.alpha,d&=this.alpha,this.checkProcessable("getChannel",{bitDepth:[8,16]}),s=validateChannel(this,s);let g=Image$1.createFrom(this,{components:1,alpha:h,colorModel:GREY$1}),_=0;for(let b=0;b<this.data.length;b+=this.channels)d?g.data[_++]=this.data[b+s]*this.data[b+this.components]/this.maxValue:(g.data[_++]=this.data[b+s],h&&(g.data[_++]=this.data[b+this.components]));return g}function combineChannels(s=defaultCombineMethod,o={}){let{mergeAlpha:h=!1,keepAlpha:d=!1}=o;h&=this.alpha,d&=this.alpha,this.checkProcessable("combineChannels",{bitDepth:[8,16]});let g=Image$1.createFrom(this,{components:1,alpha:d,colorModel:GREY$1}),_=0;for(let b=0;b<this.size;b++){let j=s(this.getPixel(b));h?g.data[_++]=j*this.data[b*this.channels+this.components]/this.maxValue:(g.data[_++]=j,d&&(g.data[_++]=this.data[b*this.channels+this.components]))}return g}function defaultCombineMethod(s){return(s[0]+s[1]+s[2])/3}function setChannel(s,o){if(this.checkProcessable("setChannel",{bitDepth:[8,16]}),o.checkProcessable("setChannel (image parameter check)",{bitDepth:[this.bitDepth],alpha:[0],components:[1]}),o.width!==this.width||o.height!==this.height)throw new Error("Images must have exactly the same width and height");s=validateChannel(this,s);let h=s;for(let d=0;d<o.data.length;d++)this.data[h]=o.data[d],h+=this.channels;return this}function getSimilarity(s,o={}){let{shift:h=[0,0],average:d,channels:g,defaultAlpha:_,normalize:b,border:j=[0,0]}=o;if(this.checkProcessable("getSimilarity",{bitDepth:[8,16]}),Array.isArray(j)||(j=[j,j]),g=validateArrayOfChannels(this,{channels:g,defaultAlpha:_}),this.bitDepth!==s.bitDepth)throw new Error("Both images must have the same bitDepth");if(this.channels!==s.channels)throw new Error("Both images must have the same number of channels");if(this.colorModel!==s.colorModel)throw new Error("Both images must have the same colorModel");typeof d>"u"&&(d=!0);let et=Math.max(j[0],-h[0]),tt=Math.min(this.width-j[0],this.width-h[0]),rt=Math.max(j[1],-h[1]),at=Math.min(this.height-j[1],this.height-h[1]),st=newArray(g.length,0);for(let At=0;At<g.length;At++){let ht=g[At],ct=b?this.sum[ht]:Math.max(this.sum[ht],s.sum[ht]),_t=b?s.sum[ht]:Math.max(this.sum[ht],s.sum[ht]);if(ct!==0&&_t!==0)for(let gt=et;gt<tt;gt++)for(let wt=rt;wt<at;wt++){let ft=gt*this.multiplierX+wt*this.multiplierY+ht,dt=ft+h[0]*this.multiplierX+h[1]*this.multiplierY;st[At]+=Math.min(this.data[ft]/ct,s.data[dt]/_t)}}return d?st.reduce((At,ht)=>At+ht)/st.length:st}function getPixelsGrid(s={}){let{sampling:o=[10,10],painted:h=!1,mask:d}=s;this.checkProcessable("getPixelsGrid",{bitDepth:[8,16],channels:1}),Array.isArray(o)||(o=[o,o]);const g=o[0],_=o[1],b=[],j=[],et=this.width/g,tt=this.height/_;let rt=Math.floor(et/2);for(let st=0;st<g;st++){let At=Math.floor(tt/2);for(let ht=0;ht<_;ht++){let ct=Math.round(rt),_t=Math.round(At);(!d||d.getBitXY(ct,_t))&&(b.push([ct,_t]),j.push(this.getPixelXY(ct,_t))),At+=tt}rt+=et}const at={xyS:b,zS:j};return h&&(at.painted=this.rgba8().paintPoints(b)),at}function Matrix(s,o,h){const d=new Array(s);for(let g=0;g<s;g++)d[g]=new Array(o);if(h)for(let g=0;g<s;g++)for(let _=0;_<o;_++)d[g][_]=h;return d.width=s,d.height=o,Object.setPrototypeOf(d,Matrix.prototype),d}Matrix.prototype.localMin=function(s,o){let h=this[s][o],d=[s,o];for(let g=Math.max(0,s-1);g<Math.min(this.length,s+2);g++)for(let _=Math.max(0,o-1);_<Math.min(this[0].length,o+2);_++)this[g][_]<h&&(h=this[g][_],d=[g,_]);return{position:d,value:h}};Matrix.prototype.localMax=function(s,o){let h=this[s][o],d=[s,o];for(let g=Math.max(0,s-1);g<Math.min(this.length,s+2);g++)for(let _=Math.max(0,o-1);_<Math.min(this[0].length,o+2);_++)this[g][_]>h&&(h=this[g][_],d=[g,_]);return{position:d,value:h}};Matrix.prototype.localSearch=function(s,o,h){let d=[];for(let g=Math.max(0,s-1);g<Math.min(this.length,s+2);g++)for(let _=Math.max(0,o-1);_<Math.min(this[0].length,o+2);_++)this[g][_]===h&&d.push([g,_]);return d};function getBestMatch(s,o={}){let{border:h}=o;if(this.checkProcessable("getChannel",{bitDepth:[8,16]}),this.bitDepth!==s.bitDepth)throw new Error("Both images must have the same bitDepth");if(this.channels!==s.channels)throw new Error("Both images must have the same number of channels");if(this.colorModel!==s.colorModel)throw new Error("Both images must have the same colorModel");let d=new Matrix(s.width,s.height,-1/0),g=Math.floor(s.width/2),_=Math.floor(s.height/2),b=g,j=_,et=!1;for(;!et;){let tt=d.localSearch(g,_,-1/0);for(let at=0;at<tt.length;at++){let st=tt[at],At=this.getSimilarity(s,{border:h,shift:[b-st[0],j-st[1]]});d[st[0]][st[1]]=At}let rt=d.localMax(g,_);rt.position[0]!==g||rt.position[1]!==_?(g=rt.position[0],_=rt.position[1]):et=!0}return[g-b,_-j]}function getRow(s,o=0){this.checkProcessable("getRow",{bitDepth:[8,16]}),checkRow(this,s),checkChannel(this,o);let h=new Array(this.width),d=0,g=s*this.width*this.channels+o,_=g+this.width*this.channels;for(let b=g;b<_;b+=this.channels)h[d++]=this.data[b];return h}function getColumn(s,o=0){this.checkProcessable("getColumn",{bitDepth:[8,16]}),checkColumn(this,s),checkChannel(this,o);let h=new Array(this.height),d=0,g=this.width*this.channels;for(let _=o+s*this.channels;_<this.data.length;_+=g)h[d++]=this.data[_];return h}function getMatrix(s={}){let{channel:o}=s;if(this.checkProcessable("getMatrix",{bitDepth:[8,16]}),o===void 0){if(this.components>1)throw new RangeError("You need to define the channel for an image that contains more than one channel");o=0}let h=new Matrix$1(this.height,this.width);for(let d=0;d<this.height;d++)for(let g=0;g<this.width;g++)h.set(d,g,this.getValueXY(g,d,o));return h}function setMatrix(s,o={}){s=new Matrix$1(s);let{channel:h}=o;if(this.checkProcessable("getMatrix",{bitDepth:[8,16]}),h===void 0){if(this.components>1)throw new RangeError("You need to define the channel for an image that contains more than one channel");h=0}if(this.width!==s.columns||this.height!==s.rows)throw new RangeError("The size of the matrix must be equal to the size of the image");for(let d=0;d<this.height;d++)for(let g=0;g<this.width;g++)this.setValueXY(g,d,h,s.get(d,g));return this}function getPixelsArray(){this.checkProcessable("getPixelsArray",{bitDepth:[8,16,32]});let s=new Array(this.size),o=0;for(let h=0;h<this.data.length;h+=this.channels){let d=new Array(this.components);for(let g=0;g<this.components;g++)d[g]=this.data[h+g];s[o++]=d}return s}function getIntersection(s){let o=this,h=o.getClosestCommonParent(s),d=o.getRelativePosition(h,{defaultFurther:!0}),g=getRelativePositionForAllPixels(o,d),_=s.getRelativePosition(h,{defaultFurther:!0}),b=getRelativePositionForAllPixels(s,_),j=getCommonSurface(g,b),et={whitePixelsMask1:[],whitePixelsMask2:[],commonWhitePixels:[]};for(let tt=0;tt<j.length;tt++){let rt=j[tt],at=[rt[0]-d[0],rt[1]-d[1]],st=[rt[0]-_[0],rt[1]-_[1]],At=o.getBitXY(at[0],at[1]),ht=s.getBitXY(st[0],st[1]);At===1&&ht===1&&et.commonWhitePixels.push(rt)}for(let tt=0;tt<g.length;tt++){let rt,at;tt!==0&&(rt=Math.floor(tt/o.width),at=tt%o.width),o.getBitXY(rt,at)===1&&et.whitePixelsMask1.push(g[tt])}for(let tt=0;tt<b.length;tt++){let rt=0,at=0;tt!==0&&(rt=Math.floor(tt/s.width),at=tt%s.width),s.getBitXY(rt,at)===1&&et.whitePixelsMask2.push(b[tt])}return et}function getRelativePositionForAllPixels(s,o){let h=[];for(let d=0;d<s.height;d++)for(let g=0;g<s.width;g++){let _=[d,g];h.push([_[0]+o[0],_[1]+o[1]])}return h}function getCommonSurface(s,o){let h=0,d=0,g=[];for(;h<s.length&&d<o.length;)s[h][0]===o[d][0]&&s[h][1]===o[d][1]?(g.push(s[h]),h++,d++):s[h][0]<o[d][0]||s[h][0]===o[d][0]&&s[h][1]<o[d][1]?h++:d++;return g}function getClosestCommonParent(s){let o=getDepth(this),h=getDepth(s),d;if(o>=h?d=getFurthestParent(this,o):d=getFurthestParent(s,h),o===0||h===0)return d;let g=this,_=s;for(;o!==h;)if(o>h){if(g=g.parent,g===null)return d;o=o-1}else{if(_=_.parent,_===null)return d;h=h-1}for(;g!==_&&g!==null&&_!==null;)if(g=g.parent,_=_.parent,g===null||_===null)return d;return g!==_?d:g}function getDepth(s){let o=0,h=s;for(;h.parent!=null;)h=h.parent,o++;return o}function getFurthestParent(s,o){let h=s;for(;o>0;)h=h.parent,o=o-1;return h}const defaultOptions$1={lowThreshold:10,highThreshold:30,gaussianBlur:1.1},Gx=[[-1,0,1],[-2,0,2],[-1,0,1]],Gy=[[-1,-2,-1],[0,0,0],[1,2,1]],convOptions={bitDepth:32,mode:"periodic"};function cannyEdgeDetector(s,o){s.checkProcessable("Canny edge detector",{bitDepth:8,channels:1,components:1}),o=Object.assign({},defaultOptions$1,o);const h=s.width,d=s.height,g=s.maxValue,_={sigma:o.gaussianBlur,radius:3},b=s.gaussianFilter(_),j=b.convolution(Gy,convOptions),et=b.convolution(Gx,convOptions),tt=et.hypotenuse(j),rt=s.constructor,at=new rt(h,d,{kind:"GREY",bitDepth:32}),st=new rt(h,d,{kind:"GREY",bitDepth:32}),At=new rt(h,d,{kind:"GREY"});for(var ht=1;ht<h-1;ht++)for(var ct=1;ct<d-1;ct++){var _t=(Math.round(Math.atan2(et.getValueXY(ht,ct,0),j.getValueXY(ht,ct,0))*(5/Math.PI))+5)%5;_t===0&&(tt.getValueXY(ht,ct,0)<=tt.getValueXY(ht,ct-1,0)||tt.getValueXY(ht,ct,0)<=tt.getValueXY(ht,ct+1,0))||_t===1&&(tt.getValueXY(ht,ct,0)<=tt.getValueXY(ht-1,ct+1,0)||tt.getValueXY(ht,ct,0)<=tt.getValueXY(ht+1,ct-1,0))||_t===2&&(tt.getValueXY(ht,ct,0)<=tt.getValueXY(ht-1,ct,0)||tt.getValueXY(ht,ct,0)<=tt.getValueXY(ht+1,ct,0))||_t===3&&(tt.getValueXY(ht,ct,0)<=tt.getValueXY(ht-1,ct-1,0)||tt.getValueXY(ht,ct,0)<=tt.getValueXY(ht+1,ct+1,0))||at.setValueXY(ht,ct,0,tt.getValueXY(ht,ct,0))}for(ht=0;ht<h*d;++ht){var gt=at.data[ht],wt=0;gt>o.highThreshold&&(wt++,At.data[ht]=g),gt>o.lowThreshold&&wt++,st.data[ht]=wt}var ft=[];for(ht=1;ht<h-1;++ht)for(ct=1;ct<d-1;++ct)if(st.getValueXY(ht,ct,0)===1){t:for(var dt=ht-1;dt<ht+2;++dt)for(var xt=ct-1;xt<ct+2;++xt)if(st.getValueXY(dt,xt,0)===2){ft.push([ht,ct]),At.setValueXY(ht,ct,0,g);break t}}for(;ft.length>0;){var bt=[];for(ht=0;ht<ft.length;++ht)for(ct=-1;ct<2;++ct)for(dt=-1;dt<2;++dt)if(!(ct===0&&dt===0)){var Ct=ft[ht][0]+ct,Ut=ft[ht][1]+dt;st.getValueXY(Ct,Ut,0)===1&&At.getValueXY(Ct,Ut,0)===0&&(bt.push([Ct,Ut]),At.setValueXY(Ct,Ut,0,g))}ft=bt}return At}function cannyEdge(s){return cannyEdgeDetector(this,s)}function extract(s,o={}){let{position:h}=o;if(this.checkProcessable("extract",{bitDepth:[1,8,16]}),!h&&(h=s.getRelativePosition(this),!h))throw new Error("extract : can not extract an image because the relative position can not be determined, try to specify manually the position as an array of 2 elements [x,y].");if(this.bitDepth>1){let d=Image$1.createFrom(this,{width:s.width,height:s.height,alpha:1,position:h,parent:this});for(let g=0;g<s.width;g++)for(let _=0;_<s.height;_++){for(let b=0;b<this.channels;b++){let j=this.getValueXY(g+h[0],_+h[1],b);d.setValueXY(g,_,b,j)}s.getBitXY(g,_)||d.setValueXY(g,_,this.components,0)}return d}else{let d=Image$1.createFrom(this,{width:s.width,height:s.height,position:h,parent:this});for(let g=0;g<s.height;g++)for(let _=0;_<s.width;_++)s.getBitXY(_,g)&&this.getBitXY(_+h[0],g+h[1])&&d.setBitXY(_,g);return d}}var fastList={exports:{}},hasRequiredFastList;function requireFastList(){return hasRequiredFastList||(hasRequiredFastList=1,function(s,o){(function(){function h(g,_,b){this.next=b,b&&(b.prev=this),this.prev=_,_&&(_.next=this),this.data=g}function d(){if(!(this instanceof d))return new d;this._head=null,this._tail=null,this.length=0}d.prototype={push:function(g){this._tail=new h(g,this._tail,null),this._head||(this._head=this._tail),this.length++},pop:function(){if(this.length!==0){var g=this._tail;return this._tail=g.prev,g.prev&&(g.prev=this._tail.next=null),this.length--,this.length===1?this._head=this._tail:this.length===0&&(this._head=this._tail=null),g.data}},unshift:function(g){this._head=new h(g,null,this._head),this._tail||(this._tail=this._head),this.length++},shift:function(){if(this.length!==0){var g=this._head;return this._head=g.next,g.next&&(g.next=this._head.prev=null),this.length--,this.length===1?this._tail=this._head:this.length===0&&(this._head=this._tail=null),g.data}},item:function(g){g<0&&(g=this.length+g);for(var _=this._head;g-- >0&&_;)_=_.next;return _?_.data:void 0},slice:function(g,_){if(g||(g=0),_||(_=this.length),_<0&&(_=this.length+_),g<0&&(g=this.length+g),_===g)return[];if(_<g)throw new Error("invalid offset: "+g+","+_+" (length="+this.length+")");for(var b=_-g,j=new Array(b),et=0,tt=this._head;g-- >0&&tt;)tt=tt.next;for(;et<b&&tt;)j[et++]=tt.data,tt=tt.next;return j},drop:function(){d.call(this)},forEach:function(g,_){for(var b=this._head,j=0,et=this.length;j<et&&b;)g.call(_||this,b.data,j,this),b=b.next,j++},map:function(g,_){var b=new d;return this.forEach(function(j,et,tt){b.push(g.call(_||tt,j,et,tt))}),b},filter:function(g,_){var b=new d;return this.forEach(function(j,et,tt){g.call(_||tt,j,et,tt)&&b.push(j)}),b},reduce:function(g,_,b){var j=0,et=this._head,tt=this.length;for(_||(j=1,_=et&&et.data,et=et&&et.next);j<tt&&et;)_=g.call(b||this,_,et.data,this),j++,et=et.next;return _}},s.exports=d})()}(fastList)),fastList.exports}var fastListExports=requireFastList();const LinkedList=getDefaultExportFromCjs(fastListExports);function floodFill(s={}){const{x:o=0,y:h=0,inPlace:d=!0}=s,g=d?this:Image$1.createFrom(this);if(this.checkProcessable("floodFill",{bitDepth:1}),this.getBitXY(o,h))return g;const _=new LinkedList;for(_.push(new Node$1(o,h));_.length>0;){const b=_.shift();g.setBitXY(b.x,b.y);for(let j=b.x+1;j<this.width&&!g.getBitXY(j,b.y)&&!this.getBitXY(j,b.y);j++)g.setBitXY(j,b.y),b.y+1<this.height&&!this.getBitXY(j,b.y+1)&&_.push(new Node$1(j,b.y+1)),b.y-1>=0&&!this.getBitXY(j,b.y-1)&&_.push(new Node$1(j,b.y-1));for(let j=b.x-1;j>=0&&!g.getBitXY(j,b.y)&&!this.getBitXY(j,b.y);j++)g.setBitXY(j,b.y),b.y+1<this.height&&!this.getBitXY(j,b.y+1)&&_.push(new Node$1(j,b.y+1)),b.y-1>=0&&!this.getBitXY(j,b.y-1)&&_.push(new Node$1(j,b.y-1))}return g}function Node$1(s,o){this.x=s,this.y=o}function _extends(){return _extends=Object.assign?Object.assign.bind():function(s){for(var o=1;o<arguments.length;o++){var h=arguments[o];for(var d in h)({}).hasOwnProperty.call(h,d)&&(s[d]=h[d])}return s},_extends.apply(null,arguments)}function hsv2rgb(s,o,h){o=o/100,h=h/100;var d=[],g=h*o,_=s/60,b=g*(1-Math.abs(_%2-1)),j=h-g;return _>=0&&_<1?d=[g,b,0]:_>=1&&_<2?d=[b,g,0]:_>=2&&_<3?d=[0,g,b]:s>=3&&_<4?d=[0,b,g]:s>=4&&_<5?d=[b,0,g]:s>=5&&_<=6?d=[g,0,b]:d=[0,0,0],{r:Math.round(255*(d[0]+j)),g:Math.round(255*(d[1]+j)),b:Math.round(255*(d[2]+j))}}function hsl2hsv(s,o,h){return o*=(h<50?h:100-h)/100,{h:s,s:2*o/(h+o)*100,v:h+o}}function hsl2rgb$1(s,o,h){var d=hsl2hsv(s,o,h);return hsv2rgb(d.h,d.s,d.v)}var colors={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]};function parse$1(s){return named(s)||hex3(s)||hex6(s)||rgb$1(s)||rgba$1(s)||hsl$2(s)||hsla(s)}function named(s){var o=colors[s.toLowerCase()];if(o)return{r:o[0],g:o[1],b:o[2],a:100}}function rgb$1(s){var o=s.match(/rgb\(([^)]+)\)/);if(o){var h=o[1].split(/ *, */).map(Number);return{r:h[0],g:h[1],b:h[2],a:100}}}function rgba$1(s){var o=s.match(/rgba\(([^)]+)\)/);if(o){var h=o[1].split(/ *, */).map(Number);return{r:h[0],g:h[1],b:h[2],a:h[3]*100}}}function hex6(s){if(s[0]==="#"&&s.length===7)return{r:parseInt(s.slice(1,3),16),g:parseInt(s.slice(3,5),16),b:parseInt(s.slice(5,7),16),a:100}}function hex3(s){if(s[0]==="#"&&s.length===4)return{r:parseInt(s[1]+s[1],16),g:parseInt(s[2]+s[2],16),b:parseInt(s[3]+s[3],16),a:100}}function hsl$2(s){var o=s.match(/hsl\(([^)]+)\)/);if(o){var h=o[1].split(/ *, */),d=parseInt(h[0],10),g=parseInt(h[1],10),_=parseInt(h[2],10),b=hsl2rgb$1(d,g,_);return _extends({},b,{a:100})}}function hsla(s){var o=s.match(/hsla\(([^)]+)\)/);if(o){var h=o[1].split(/ *, */),d=parseInt(h[0],10),g=parseInt(h[1],10),_=parseInt(h[2],10),b=parseInt(parseFloat(h[3])*100,10),j=hsl2rgb$1(d,g,_);return _extends({},j,{a:b})}}function css2array(s){let o=parse$1(s);return[o.r,o.g,o.b,Math.round(o.a*255/100)]}function hue2rgb$1(s,o,h){return h<0&&(h+=1),h>1&&(h-=1),h<1/6?s+(o-s)*6*h:h<1/2?o:h<2/3?s+(o-s)*(2/3-h)*6:s}function hsl2rgb(s,o,h){let d,g,_,b,j,et;return o/=100,h/=100,o===0?b=j=et=h*255:(h<=.5?g=h*(o+1):g=h+o-h*o,d=h*2-g,_=s/360,b=hue2rgb$1(d,g,_+1/3),j=hue2rgb$1(d,g,_),et=hue2rgb$1(d,g,_-1/3)),{r:b,g:j,b:et}}function getDistinctColors(s){let o=new Array(s),h=0;for(let d=0;d<360;d+=360/s){h++;let g=hsl2rgb(d,100,30+h%4*15);o[h-1]=[Math.round(g.r*255),Math.round(g.g*255),Math.round(g.b*255)]}return o}function getRandomColor(){return[Math.floor(Math.random()*256),Math.floor(Math.random()*256),Math.floor(Math.random()*256)]}function getColors(s){let{color:o,colors:h,randomColors:d,numberColors:g=50}=s;if(o&&!Array.isArray(o)&&(o=css2array(o)),o)return[o];if(h)return h=h.map(function(_){return Array.isArray(_)?_:css2array(_)}),h;if(d){h=new Array(g);for(let _=0;_<g;_++)h[_]=getRandomColor()}return getDistinctColors(g)}function paintLabels(s,o,h={}){let{color:d="blue",colors:g,font:_="12px Helvetica",rotate:b=0}=h;if(this.checkProcessable("paintMasks",{channels:[3,4],bitDepth:[8,16],colorModel:RGB$1}),!Array.isArray(s))throw Error("paintLabels: labels must be an array");if(!Array.isArray(o))throw Error("paintLabels: positions must be an array");if(d&&!Array.isArray(d)&&(d=css2array(d)),g?g=g.map(function(et){return Array.isArray(et)?et:css2array(et)}):g=[d],s.length!==o.length)throw Error("paintLabels: positions and labels must be arrays from the same size");Array.isArray(_)||(_=[_]),Array.isArray(b)||(b=[b]);let j=this.getCanvas().getContext("2d");for(let et=0;et<s.length;et++){j.save();let tt=g[et%g.length];j.fillStyle=`rgba(${tt[0]},${tt[1]},${tt[2]},${tt[3]/this.maxValue})`,j.font=_[et%_.length];let rt=o[et];j.translate(rt[0],rt[1]),j.rotate(b[et%b.length]/180*Math.PI),j.fillText(s[et],0,0),j.restore()}return this.data=Uint8Array.from(j.getImageData(0,0,this.width,this.height).data),this}function paintMasks(s,o={}){let{alpha:h=255,labels:d=[],labelsPosition:g=[],labelColor:_="blue",labelFont:b="12px Helvetica"}=o;this.checkProcessable("paintMasks",{channels:[3,4],bitDepth:[8,16],colorModel:RGB$1});let j=getColors(Object.assign({},o,{numberColors:s.length}));Array.isArray(s)||(s=[s]);for(let et=0;et<s.length;et++){let tt=s[et],rt=j[et%j.length];for(let at=0;at<tt.width;at++)for(let st=0;st<tt.height;st++)if(tt.getBitXY(at,st))for(let At=0;At<Math.min(this.components,rt.length);At++)if(h===255)this.setValueXY(at+tt.position[0],st+tt.position[1],At,rt[At]);else{let ht=this.getValueXY(at+tt.position[0],st+tt.position[1],At);ht=Math.round((ht*(255-h)+rt[At]*h)/255),this.setValueXY(at+tt.position[0],st+tt.position[1],At,ht)}}if(Array.isArray(d)&&d.length>0){let et=this.getCanvas().getContext("2d");et.fillStyle=_,et.font=b;for(let tt=0;tt<Math.min(s.length,d.length);tt++){let rt=g[tt]?g[tt]:s[tt].position;et.fillText(d[tt],rt[0],rt[1])}this.data=Uint8Array.from(et.getImageData(0,0,this.width,this.height).data)}return this}function zerosMatrix(s,o){let h=new Array(s);for(let d=0;d<s;d++)h[d]=new Array(o).fill(0);return h}const cross=[[0,0,1,0,0],[0,0,1,0,0],[1,1,1,1,1],[0,0,1,0,0],[0,0,1,0,0]],smallCross=[[0,1,0],[1,1,1],[0,1,0]];class Shape{constructor(o={}){let{kind:h="cross",shape:d,size:g,width:_,height:b,filled:j=!0}=o;if(g&&(_=g,b=g),d)switch(d.toLowerCase()){case"square":case"rectangle":this.matrix=rectangle(_,b,{filled:j});break;case"circle":case"ellipse":this.matrix=ellipse(_,b,{filled:j});break;case"triangle":this.matrix=triangle(_,b,{filled:j});break;default:throw new Error(`Shape: unexpected shape: ${d}`)}else if(h)switch(h.toLowerCase()){case"cross":this.matrix=cross;break;case"smallcross":this.matrix=smallCross;break;default:throw new Error(`Shape: unexpected kind: ${h}`)}else throw new Error("Shape: expected a kind or a shape option");this.height=this.matrix.length,this.width=this.matrix[0].length,this.halfHeight=this.height/2>>0,this.halfWidth=this.width/2>>0}getPoints(){let o=this.matrix,h=[];for(let d=0;d<o.length;d++)for(let g=0;g<o[0].length;g++)o[d][g]&&h.push([g-this.halfWidth,d-this.halfHeight]);return h}getMask(){let o=new Image$1(this.width,this.height,{kind:BINARY});for(let h=0;h<this.matrix.length;h++)for(let d=0;d<this.matrix[0].length;d++)this.matrix[h][d]&&o.setBitXY(d,h);return o}}function rectangle(s,o,h){const d=zerosMatrix(o,s);if(h.filled)for(let g=0;g<o;g++)for(let _=0;_<s;_++)d[g][_]=1;else{for(let g of[0,o-1])for(let _=0;_<s;_++)d[g][_]=1;for(let g=0;g<o;g++)for(let _ of[0,s-1])d[g][_]=1}return d}function ellipse(s,o,h){const d=zerosMatrix(o,s);let g=1-o%2,_=1-s%2,b=Math.floor((s-1)/2),j=Math.floor((o-1)/2),et=b*b,tt=j*j;if(h.filled)for(let rt=0;rt<=j;rt++){let at=Math.floor(Math.sqrt(et-et*rt*rt/tt));for(let st=b-at;st<=b;st++)d[j-rt][st]=1,d[j+rt+g][st]=1,d[j-rt][s-st-1]=1,d[j+rt+g][s-st-1]=1}else{for(let rt=0;rt<=j;rt++){let at=Math.floor(Math.sqrt(et-et*rt*rt/tt)),st=b-at;d[j-rt][st]=1,d[j+rt+g][st]=1,d[j-rt][s-st-1]=1,d[j+rt+g][s-st-1]=1}for(let rt=0;rt<=b;rt++){let at=Math.floor(Math.sqrt(tt-tt*rt*rt/et)),st=j-at;d[st][b-rt]=1,d[st][b+rt+_]=1,d[o-st-1][b-rt]=1,d[o-st-1][b+rt+_]=1}}return d}function triangle(s,o,h){if(!h.filled)throw new Error("Non filled triangle is not implemented");const d=zerosMatrix(o,s);for(let g=0;g<o;g++){let _=Math.floor((1-g/o)*s/2);for(let b=_;b<s-_;b++)d[g][b]=1}return d}function paintPoints(s,o={}){let{shape:h}=o;this.checkProcessable("paintPoints",{bitDepth:[8,16]});let d=getColors(Object.assign({},o,{numberColors:s.length})),g=new Shape(h).getPoints(),_=Math.min(this.channels,d[0].length);for(let b=0;b<s.length;b++){let j=d[b%d.length],et=s[b][0],tt=s[b][1];for(let rt=0;rt<g.length;rt++){let at=g[rt][0],st=g[rt][1];if(et+at>=0&&tt+st>=0&&et+at<this.width&&tt+st<this.height){let At=(et+at+(tt+st)*this.width)*this.channels;for(let ht=0;ht<_;ht++)this.data[At+ht]=j[ht]}}}return this}function paintPolyline(s,o={}){let{color:h=[this.maxValue,0,0],closed:d=!1}=o;this.checkProcessable("paintPoints",{bitDepth:[1,8,16]});let g=Math.min(this.channels,h.length);for(let _=0;_<s.length-1+d;_++){let b=s[_],j=s[(_+1)%s.length],et=j[0]-b[0],tt=j[1]-b[1],rt=Math.max(Math.abs(et),Math.abs(tt)),at=et/rt,st=tt/rt,At=b[0],ht=b[1];for(let ct=0;ct<=rt;ct++){let _t=Math.round(At),gt=Math.round(ht);if(_t>=0&&gt>=0&&_t<this.width&&gt<this.height)if(this.bitDepth===1)this.setBitXY(_t,gt);else{let wt=(_t+gt*this.width)*this.channels;for(let ft=0;ft<g;ft++)this.data[wt+ft]=h[ft]}At=At+at,ht=ht+st}}return this}function paintPolylines(s,o={}){let h=Object.assign({},o);this.checkProcessable("paintPolylines",{bitDepth:[8,16]});let d=getColors(Object.assign({},o,{numberColors:s.length}));for(let g=0;g<s.length;g++)h.color=d[g%d.length],this.paintPolyline(s[g],h);return this}function paintPolygon(s,o={}){let{color:h=[this.maxValue,0,0],filled:d=!1}=o;this.checkProcessable("paintPoints",{bitDepth:[1,8,16]}),o.closed=!0;let g=deleteDouble(s);if(d===!1)return this.paintPolyline(s,o);{let _=Array(this.height);for(let b=0;b<this.height;b++){_[b]=[];for(let j=0;j<this.width;j++)_[b].push(0)}for(let b=0;b<g.length;b++){const j=lineBetweenTwoPoints(g[b],g[(b+1)%g.length]);for(let et=0;et<this.height;et++)for(let tt=0;tt<this.width;tt++)isAtTheRightOfTheLine(tt,et,j,this.height)&&(_[et][tt]=_[et][tt]===0?1:0)}for(let b=0;b<this.height;b++)for(let j=0;j<this.width;j++)if(_[b][j]===1)if(this.bitDepth===1)this.setBitXY(j,b);else{let et=Math.min(this.channels,h.length),tt=(j+b*this.width)*this.channels;for(let rt=0;rt<et;rt++)this.data[tt+rt]=h[rt]}return this.paintPolyline(s,o)}}function deleteDouble(s){let o=[];for(let h=0;h<s.length;h++)if(!(s[h][0]===s[(h+1)%s.length][0]&&s[h][1]===s[(h+1)%s.length][1])){if(s[h][0]===s[(h-1+s.length)%s.length][0]&&s[h][1]===s[(h-1+s.length)%s.length][1]||s[(h+1)%s.length][0]===s[(h-1+s.length)%s.length][0]&&s[(h-1+s.length)%s.length][1]===s[(h+1)%s.length][1])continue;o.push(s[h])}return o}function lineBetweenTwoPoints(s,o){if(s[0]===o[0])return{a:0,b:s[0],vertical:!0};{const h=(o[1]-s[1])/(o[0]-s[0]),d=s[1]-h*s[0];return{a:h,b:d,vertical:!1}}}function isAtTheRightOfTheLine(s,o,h,d){if(h.vertical===!0)return h.b<=s;if(h.a===0)return!1;{const g=(o-h.b)/h.a;return g<s&&g>=0&&g<=d}}function paintPolygons(s,o={}){let h=Object.assign({},o);this.checkProcessable("paintPolygons",{bitDepth:[8,16]});let d=getColors(Object.assign({},o,{numberColors:s.length}));for(let g=0;g<s.length;g++)h.color=d[g%d.length],this.paintPolygon(s[g],h);return this}function getHistogram(s={}){let{maxSlots:o=256,channel:h,useAlpha:d=!0}=s;if(this.checkProcessable("getHistogram",{bitDepth:[1,8,16]}),h===void 0){if(this.components>1)throw new RangeError("You need to define the channel for an image that contains more than one channel");h=0}return getChannelHistogram.call(this,h,{useAlpha:d,maxSlots:o})}function getHistograms(s={}){const{maxSlots:o=256,useAlpha:h=!0}=s;this.checkProcessable("getHistograms",{bitDepth:[8,16]});let d=new Array(h?this.components:this.channels);for(let g=0;g<d.length;g++)d[g]=getChannelHistogram.call(this,g,{useAlpha:h,maxSlots:o});return d}function getChannelHistogram(s,o){let{useAlpha:h,maxSlots:d}=o;if(this.bitDepth===1){let et=[0,0];for(let tt=0;tt<this.height;tt++)for(let rt=0;rt<this.width;rt++){let at=this.getBitXY(tt,rt);at===0?et[0]+=1:at===1&&(et[1]+=1)}return et}let g=Math.log2(d);if(!isInteger(g))throw new RangeError("maxSlots must be a power of 2, for example: 64, 256, 1024");let _=0;this.bitDepth>g&&(_=this.bitDepth-g);let b=this.data,j=newArray(Math.pow(2,Math.min(this.bitDepth,g)),0);if(h&&this.alpha){let et=this.channels-s-1;for(let tt=s;tt<b.length;tt+=this.channels)j[b[tt]>>_]+=b[tt+et]/this.maxValue}else for(let et=s;et<b.length;et+=this.channels)j[b[et]>>_]++;return j}function getColorHistogram(s={}){let{useAlpha:o=!0,nbSlots:h=512}=s;this.checkProcessable("getColorHistogram",{bitDepth:[8,16],components:[3]});let d=Math.log(h)/Math.log(8);if(d!==Math.floor(d))throw new RangeError("nbSlots must be a power of 8. Usually 8, 64, 512 or 4096");let g=this.bitDepth-d,_=this.data,b=newArray(Math.pow(8,d),0),j=Math.pow(2,d*2),et=Math.pow(2,d);for(let tt=0;tt<_.length;tt+=this.channels){let rt=(_[tt]>>g)*j+(_[tt+1]>>g)*et+(_[tt+2]>>g);o&&this.alpha?b[rt]+=_[tt+this.channels-1]/this.maxValue:b[rt]++}return b}function min(){this.checkProcessable("min",{bitDepth:[8,16,32]});let s=newArray(this.channels,1/0);for(let o=0;o<this.data.length;o+=this.channels)for(let h=0;h<this.channels;h++)this.data[o+h]<s[h]&&(s[h]=this.data[o+h]);return s}function max(){this.checkProcessable("max",{bitDepth:[8,16,32]});let s=newArray(this.channels,-1/0);for(let o=0;o<this.data.length;o+=this.channels)for(let h=0;h<this.channels;h++)this.data[o+h]>s[h]&&(s[h]=this.data[o+h]);return s}function sum(){this.checkProcessable("sum",{bitDepth:[8,16]});let s=newArray(this.channels,0);for(let o=0;o<this.data.length;o+=this.channels)for(let h=0;h<this.channels;h++)s[h]+=this.data[o+h];return s}function getMoment(s=0,o=0){this.checkProcessable("getMoment",{bitDepth:[1]});let h=0;for(let d=0;d<this.width;d++)for(let g=0;g<this.height;g++)this.getBitXY(d,g)===1&&(h+=d**s*g**o);return h}function localMaxima(s={}){let{mask:o,region:h=3,removeClosePoints:d=0,invert:g=!1,maxEquals:_=2}=s,b=this;this.checkProcessable("localMaxima",{bitDepth:[8,16],components:1}),h*=4;let j=g?0:1,et=[1,0,-1,0,1,1,-1,-1,2,0,-2,0,2,2,-2,-2],tt=[0,1,0,-1,1,-1,1,-1,0,2,0,-2,2,-2,2,-2],rt=h<=8?1:2,at=[];for(let st=rt;st<b.height-rt;st++)for(let At=rt;At<b.width-rt;At++){if(o&&o.getBitXY(At,st)!==j)continue;let ht=0,ct=0,_t=b.data[At+st*b.width];for(let gt=0;gt<h;gt++)g?b.data[At+et[gt]+(st+tt[gt])*b.width]>_t&&ht++:b.data[At+et[gt]+(st+tt[gt])*b.width]<_t&&ht++,b.data[At+et[gt]+(st+tt[gt])*b.width]===_t&&ct++;ht+ct===h&&ct<=_&&at.push([At,st])}if(d>0)for(let st=0;st<at.length;st++)for(let At=st+1;At<at.length;At++)Math.sqrt(Math.pow(at[st][0]-at[At][0],2)+Math.pow(at[st][1]-at[At][1],2))<d&&(at[st][0]=at[st][0]+at[At][0]>>1,at[st][1]=at[st][1]+at[At][1]>>1,at.splice(At,1),At--);return at}function mean(){let s=this.getHistograms({maxSlots:this.maxValue+1}),o=new Array(s.length);for(let h=0;h<s.length;h++){let d=s[h];o[h]=mean$2(d)}return o}function median(){let s=this.getHistograms({maxSlots:this.maxValue+1}),o=new Array(s.length);for(let h=0;h<s.length;h++){let d=s[h];o[h]=median$2(d)}return o}function points(){this.checkProcessable("points",{bitDepth:[1]});const s=[];for(let o=0;o<this.width;o++)for(let h=0;h<this.height;h++)this.getBitXY(o,h)===1&&s.push([o,h]);return s}function extendedPoints(){this.checkProcessable("extendedPoints",{bitDepth:[1]});const s=[];for(let o=0;o<this.height;o++)for(let h=0;h<this.width;h++)if(this.getBitXY(h,o)===1)for(s.push([h,o]),this.getBitXY(h+1,o)!==1?(s.push([h+1,o]),s.push([h+1,o+1]),this.getBitXY(h,o+1)!==1&&s.push([h,o+1])):this.getBitXY(h,o+1)!==1&&(s.push([h,o+1]),s.push([h+1,o+1]));h<this.width-2&&this.getBitXY(h+1,o)===1&&this.getBitXY(h+2,o)===1;)h++;return s}function getRelativePosition(s,o={}){if(this===s)return[0,0];let h=[0,0],d=this;for(;d;){if(d===s)return h;d.position&&(h[0]+=d.position[0],h[1]+=d.position[1]),d=d.parent}return o.defaultFurther?h:!1}function countAlphaPixels(s={}){let{alpha:o=1}=s;this.checkProcessable("countAlphaPixels",{bitDepth:[8,16],alpha:1});let h=0;if(o!==void 0){for(let d=this.components;d<this.data.length;d+=this.channels)this.data[d]===o&&h++;return h}else return this.size}function monotoneChainConvexHull$1(s,o={}){const{sorted:h}=o;h||(s=s.slice().sort(byXThenY));const d=s.length,g=new Array(d*2);let _=0;for(let j=0;j<d;j++){const et=s[j];for(;_>=2&&cw(g[_-2],g[_-1],et)<=0;)_--;g[_++]=et}const b=_+1;for(let j=d-2;j>=0;j--){const et=s[j];for(;_>=b&&cw(g[_-2],g[_-1],et)<=0;)_--;g[_++]=et}return g.slice(0,_-1)}function cw(s,o,h){return(o[1]-s[1])*(h[0]-s[0])-(o[0]-s[0])*(h[1]-s[1])}function byXThenY(s,o){return s[0]===o[0]?s[1]-o[1]:s[0]-o[0]}function monotoneChainConvexHull(){return monotoneChainConvexHull$1(this.extendedPoints,{sorted:!1})}function round(s){for(let o=0;o<s.length;o++)s[o][0]=Math.round(s[o][0]),s[o][1]=Math.round(s[o][1]);return s}function difference(s,o){return[s[0]-o[0],s[1]-o[1]]}function normalize(s){let o=Math.sqrt(s[0]**2+s[1]**2);return[s[0]/o,s[1]/o]}function rotate(s,o,h){h===void 0&&(h=new Array(o.length));let d=Math.cos(s),g=Math.sin(s);for(let _=0;_<h.length;++_)h[_]=[d*o[_][0]-g*o[_][1],g*o[_][0]+d*o[_][1]];return h}function perimeter(s){let o=0;for(let h=0;h<s.length;h++){let d=s[h][0],g=s[h][1],_=s[h===s.length-1?0:h+1][0],b=s[h===s.length-1?0:h+1][1];o+=Math.sqrt((_-d)**2+(b-g)**2)}return o}function surface(s){let o=0;for(let h=0;h<s.length;h++){let d=s[h][0],g=s[h===s.length-1?0:h+1][1],_=s[h===s.length-1?0:h+1][0],b=s[h][1];o+=d*g*.5,o-=_*b*.5}return Math.abs(o)}function minMax(s){let o=1/0,h=1/0,d=-1/0,g=-1/0;for(let _=0;_<s.length;_++)s[_][0]<o&&(o=s[_][0]),s[_][0]>d&&(d=s[_][0]),s[_][1]<h&&(h=s[_][1]),s[_][1]>g&&(g=s[_][1]);return[[o,h],[d,g]]}function moveToZeroZero(s,o){o===void 0&&(o=new Array(s.length).fill(0).map(()=>[]));let h=minMax(s),d=h[0][0],g=h[0][1];for(let _=0;_<s.length;_++)o[_][0]=s[_][0]-d,o[_][1]=s[_][1]-g;return o}function minimalBoundingRectangle(s={}){const{originalPoints:o=monotoneChainConvexHull.call(this)}=s;if(o.length===0)return[];if(o.length===1)return[o[0],o[0],o[0],o[0]];const h=new Array(o.length);let d=1/0,g=0,_;for(let b=0;b<h.length;b++){let j=getAngle$1(o[b],o[(b+1)%h.length]);rotate(-j,o,h);let et=h[b][0],tt=h[b][1],rt=h[(b+1)%h.length][0],at=h[(b+1)%h.length][1],st=!0,At=0,ht=0,ct=0;for(let ft=0;ft<h.length;ft++){let dt=h[ft][0],xt=h[ft][1],bt=(dt-et)/(rt-et);st===!0?(st=!1,At=bt,ht=bt):(bt<At&&(At=bt),bt>ht&&(ht=bt));let Ct=(-(rt-et)*xt+rt*tt-at*et)/(rt-et);Math.abs(Ct)>Math.abs(ct)&&(ct=Ct)}let _t=[et+At*(rt-et),tt],gt=[et+ht*(rt-et),tt],wt=Math.abs(ct*(At-ht)*(rt-et));wt<d&&(g=j,d=wt,_=[_t,gt,[gt[0],gt[1]-ct],[_t[0],_t[1]-ct]])}return rotate(g,_,_),_}function getAngle$1(s,o){let h=difference(o,s),d=normalize(h),g=Math.acos(d[0]);return d[1]<0?-g:g}function extend$1(s){let o={inPlace:!0};s.extendMethod("invert",invert),s.extendMethod("abs",abs),s.extendMethod("level",level,o),s.extendMethod("add",add,o),s.extendMethod("subtract",subtract,o),s.extendMethod("subtractImage",subtractImage),s.extendMethod("multiply",multiply,o),s.extendMethod("divide",divide,o),s.extendMethod("hypotenuse",hypotenuse),s.extendMethod("background",background$1),s.extendMethod("flipX",flipX),s.extendMethod("flipY",flipY),s.extendMethod("blurFilter",blurFilter),s.extendMethod("medianFilter",medianFilter),s.extendMethod("gaussianFilter",gaussianFilter),s.extendMethod("sobelFilter",sobelFilter),s.extendMethod("gradientFilter",gradientFilter),s.extendMethod("scharrFilter",scharrFilter),s.extendMethod("dilate",dilate),s.extendMethod("erode",erode),s.extendMethod("open",open),s.extendMethod("close",close),s.extendMethod("topHat",topHat),s.extendMethod("blackHat",blackHat),s.extendMethod("morphologicalGradient",morphologicalGradient),s.extendMethod("warpingFourPoints",warpingFourPoints),s.extendMethod("crop",crop),s.extendMethod("cropAlpha",cropAlpha),s.extendMethod("resize",resize).extendMethod("scale",resize),s.extendMethod("hsv",hsv),s.extendMethod("hsl",hsl$1),s.extendMethod("cmyk",cmyk),s.extendMethod("rgba8",rgba8),s.extendMethod("grey",grey).extendMethod("gray",grey),s.extendMethod("mask",mask),s.extendMethod("pad",pad),s.extendMethod("colorDepth",colorDepth),s.extendMethod("setBorder",setBorder,o),s.extendMethod("rotate",rotate$1),s.extendMethod("rotateLeft",rotateLeft),s.extendMethod("rotateRight",rotateRight),s.extendMethod("insert",insert),s.extendMethod("getRow",getRow),s.extendMethod("getColumn",getColumn),s.extendMethod("getMatrix",getMatrix),s.extendMethod("setMatrix",setMatrix),s.extendMethod("getPixelsArray",getPixelsArray),s.extendMethod("getIntersection",getIntersection),s.extendMethod("getClosestCommonParent",getClosestCommonParent),s.extendMethod("getThreshold",getThreshold),s.extendMethod("split",split),s.extendMethod("getChannel",getChannel),s.extendMethod("combineChannels",combineChannels),s.extendMethod("setChannel",setChannel),s.extendMethod("getSimilarity",getSimilarity),s.extendMethod("getPixelsGrid",getPixelsGrid),s.extendMethod("getBestMatch",getBestMatch),s.extendMethod("cannyEdge",cannyEdge),s.extendMethod("convolution",convolution),s.extendMethod("extract",extract),s.extendMethod("floodFill",floodFill),s.extendMethod("paintLabels",paintLabels,o),s.extendMethod("paintMasks",paintMasks,o),s.extendMethod("paintPoints",paintPoints,o),s.extendMethod("paintPolyline",paintPolyline,o),s.extendMethod("paintPolylines",paintPolylines,o),s.extendMethod("paintPolygon",paintPolygon,o),s.extendMethod("paintPolygons",paintPolygons,o),s.extendMethod("countAlphaPixels",countAlphaPixels),s.extendMethod("monotoneChainConvexHull",monotoneChainConvexHull),s.extendMethod("minimalBoundingRectangle",minimalBoundingRectangle),s.extendMethod("getHistogram",getHistogram).extendProperty("histogram",getHistogram),s.extendMethod("getHistograms",getHistograms).extendProperty("histograms",getHistograms),s.extendMethod("getColorHistogram",getColorHistogram).extendProperty("colorHistogram",getColorHistogram),s.extendMethod("getMin",min).extendProperty("min",min),s.extendMethod("getMax",max).extendProperty("max",max),s.extendMethod("getSum",sum).extendProperty("sum",sum),s.extendMethod("getMoment",getMoment).extendProperty("moment",getMoment),s.extendMethod("getLocalMaxima",localMaxima),s.extendMethod("getMedian",median).extendProperty("median",median),s.extendMethod("getMean",mean).extendProperty("mean",mean),s.extendMethod("getPoints",points).extendProperty("points",points),s.extendMethod("getExtendedPoints",extendedPoints).extendProperty("extendedPoints",extendedPoints),s.extendMethod("getRelativePosition",getRelativePosition)}var quantities$1={exports:{}},quantities=quantities$1.exports,hasRequiredQuantities;function requireQuantities(){return hasRequiredQuantities||(hasRequiredQuantities=1,function(s,o){(function(h,d){s.exports=d()})(quantities,function(){function h(mt){return typeof mt=="string"||mt instanceof String}var d=Number.isFinite||window.isFinite;function g(mt){return d(mt)}function _(mt){return mt}function b(mt){var ot={};return mt.filter(function(it){return ot.hasOwnProperty(it)?!1:ot[it]=!0})}function j(mt,ot){if(ot.length!==mt.length)return!1;for(var it=0;it<mt.length;it++)if(ot[it].compareArray&&!ot[it].compareArray(mt[it])||ot[it]!==mt[it])return!1;return!0}function et(mt,ot){Object.keys(ot).forEach(function(it){mt[it]=ot[it]})}function tt(){for(var mt=1,ot=0,it=0;it<arguments.length;it++){var lt=arguments[it];ot=ot+st(lt),mt*=lt}return ot!==0?at(mt,ot):mt}function rt(mt,ot){if(ot===0)throw new Error("Divide by zero");var it=Math.pow(10,st(ot)),lt=it/(it*ot);return tt(mt,lt)}function at(mt,ot){return Math.round(mt*Math.pow(10,ot))/Math.pow(10,ot)}function st(mt){if(!isFinite(mt))return 0;for(var ot=0;mt%1!==0;)mt*=10,ot++;return ot}function At(){var mt;if(!this)return mt=Object.create(At.prototype),At.apply(mt,arguments),mt;mt=Error.apply(this,arguments),this.name="QtyError",this.message=mt.message,this.stack=mt.stack}At.prototype=Object.create(Error.prototype,{constructor:{value:At}});function ht(mt,ot){throw new At("Incompatible units: "+mt+" and "+ot)}var ct={"<googol>":[["googol"],1e100,"prefix"],"<kibi>":[["Ki","Kibi","kibi"],Math.pow(2,10),"prefix"],"<mebi>":[["Mi","Mebi","mebi"],Math.pow(2,20),"prefix"],"<gibi>":[["Gi","Gibi","gibi"],Math.pow(2,30),"prefix"],"<tebi>":[["Ti","Tebi","tebi"],Math.pow(2,40),"prefix"],"<pebi>":[["Pi","Pebi","pebi"],Math.pow(2,50),"prefix"],"<exi>":[["Ei","Exi","exi"],Math.pow(2,60),"prefix"],"<zebi>":[["Zi","Zebi","zebi"],Math.pow(2,70),"prefix"],"<yebi>":[["Yi","Yebi","yebi"],Math.pow(2,80),"prefix"],"<yotta>":[["Y","Yotta","yotta"],1e24,"prefix"],"<zetta>":[["Z","Zetta","zetta"],1e21,"prefix"],"<exa>":[["E","Exa","exa"],1e18,"prefix"],"<peta>":[["P","Peta","peta"],1e15,"prefix"],"<tera>":[["T","Tera","tera"],1e12,"prefix"],"<giga>":[["G","Giga","giga"],1e9,"prefix"],"<mega>":[["M","Mega","mega"],1e6,"prefix"],"<kilo>":[["k","kilo"],1e3,"prefix"],"<hecto>":[["h","Hecto","hecto"],100,"prefix"],"<deca>":[["da","Deca","deca","deka"],10,"prefix"],"<deci>":[["d","Deci","deci"],.1,"prefix"],"<centi>":[["c","Centi","centi"],.01,"prefix"],"<milli>":[["m","Milli","milli"],.001,"prefix"],"<micro>":[["u","μ","µ","Micro","mc","micro"],1e-6,"prefix"],"<nano>":[["n","Nano","nano"],1e-9,"prefix"],"<pico>":[["p","Pico","pico"],1e-12,"prefix"],"<femto>":[["f","Femto","femto"],1e-15,"prefix"],"<atto>":[["a","Atto","atto"],1e-18,"prefix"],"<zepto>":[["z","Zepto","zepto"],1e-21,"prefix"],"<yocto>":[["y","Yocto","yocto"],1e-24,"prefix"],"<1>":[["1","<1>"],1,""],"<meter>":[["m","meter","meters","metre","metres"],1,"length",["<meter>"]],"<inch>":[["in","inch","inches",'"'],.0254,"length",["<meter>"]],"<foot>":[["ft","foot","feet","'"],.3048,"length",["<meter>"]],"<yard>":[["yd","yard","yards"],.9144,"length",["<meter>"]],"<mile>":[["mi","mile","miles"],1609.344,"length",["<meter>"]],"<naut-mile>":[["nmi","naut-mile"],1852,"length",["<meter>"]],"<league>":[["league","leagues"],4828,"length",["<meter>"]],"<furlong>":[["furlong","furlongs"],201.2,"length",["<meter>"]],"<rod>":[["rd","rod","rods"],5.029,"length",["<meter>"]],"<mil>":[["mil","mils"],254e-7,"length",["<meter>"]],"<angstrom>":[["ang","angstrom","angstroms"],1e-10,"length",["<meter>"]],"<fathom>":[["fathom","fathoms"],1.829,"length",["<meter>"]],"<pica>":[["pica","picas"],.00423333333,"length",["<meter>"]],"<point>":[["pt","point","points"],.000352777778,"length",["<meter>"]],"<redshift>":[["z","red-shift","redshift"],1302773e20,"length",["<meter>"]],"<AU>":[["AU","astronomical-unit"],1495979e5,"length",["<meter>"]],"<light-second>":[["ls","light-second"],299792500,"length",["<meter>"]],"<light-minute>":[["lmin","light-minute"],1798755e4,"length",["<meter>"]],"<light-year>":[["ly","light-year"],9460528e9,"length",["<meter>"]],"<parsec>":[["pc","parsec","parsecs"],3085678e10,"length",["<meter>"]],"<datamile>":[["DM","datamile"],1828.8,"length",["<meter>"]],"<kilogram>":[["kg","kilogram","kilograms"],1,"mass",["<kilogram>"]],"<AMU>":[["u","AMU","amu"],1660538921e-36,"mass",["<kilogram>"]],"<dalton>":[["Da","Dalton","Daltons","dalton","daltons"],1660538921e-36,"mass",["<kilogram>"]],"<slug>":[["slug","slugs"],14.5939029,"mass",["<kilogram>"]],"<short-ton>":[["tn","ton","short-ton"],907.18474,"mass",["<kilogram>"]],"<metric-ton>":[["t","tonne","metric-ton"],1e3,"mass",["<kilogram>"]],"<carat>":[["ct","carat","carats"],2e-4,"mass",["<kilogram>"]],"<pound>":[["lbs","lb","pound","pounds","#"],.45359237,"mass",["<kilogram>"]],"<ounce>":[["oz","ounce","ounces"],.0283495231,"mass",["<kilogram>"]],"<gram>":[["g","gram","grams","gramme","grammes"],.001,"mass",["<kilogram>"]],"<grain>":[["grain","grains","gr"],6479891e-11,"mass",["<kilogram>"]],"<dram>":[["dram","drams","dr"],.0017718452,"mass",["<kilogram>"]],"<stone>":[["stone","stones","st"],6.35029318,"mass",["<kilogram>"]],"<hectare>":[["hectare"],1e4,"area",["<meter>","<meter>"]],"<acre>":[["acre","acres"],4046.85642,"area",["<meter>","<meter>"]],"<sqft>":[["sqft"],1,"area",["<foot>","<foot>"]],"<liter>":[["l","L","liter","liters","litre","litres"],.001,"volume",["<meter>","<meter>","<meter>"]],"<gallon>":[["gal","gallon","gallons"],.0037854118,"volume",["<meter>","<meter>","<meter>"]],"<gallon-imp>":[["galimp","gallon-imp","gallons-imp"],.00454609,"volume",["<meter>","<meter>","<meter>"]],"<quart>":[["qt","quart","quarts"],.00094635295,"volume",["<meter>","<meter>","<meter>"]],"<pint>":[["pt","pint","pints"],.000473176475,"volume",["<meter>","<meter>","<meter>"]],"<pint-imp>":[["ptimp","pint-imp","pints-imp"],.00056826125,"volume",["<meter>","<meter>","<meter>"]],"<cup>":[["cu","cup","cups"],.000236588238,"volume",["<meter>","<meter>","<meter>"]],"<fluid-ounce>":[["floz","fluid-ounce","fluid-ounces"],295735297e-13,"volume",["<meter>","<meter>","<meter>"]],"<fluid-ounce-imp>":[["flozimp","floz-imp","fluid-ounce-imp","fluid-ounces-imp"],284130625e-13,"volume",["<meter>","<meter>","<meter>"]],"<tablespoon>":[["tb","tbsp","tbs","tablespoon","tablespoons"],147867648e-13,"volume",["<meter>","<meter>","<meter>"]],"<teaspoon>":[["tsp","teaspoon","teaspoons"],492892161e-14,"volume",["<meter>","<meter>","<meter>"]],"<bushel>":[["bu","bsh","bushel","bushels"],.035239072,"volume",["<meter>","<meter>","<meter>"]],"<oilbarrel>":[["bbl","oilbarrel","oilbarrels","oil-barrel","oil-barrels"],.158987294928,"volume",["<meter>","<meter>","<meter>"]],"<beerbarrel>":[["bl","bl-us","beerbarrel","beerbarrels","beer-barrel","beer-barrels"],.1173477658,"volume",["<meter>","<meter>","<meter>"]],"<beerbarrel-imp>":[["blimp","bl-imp","beerbarrel-imp","beerbarrels-imp","beer-barrel-imp","beer-barrels-imp"],.16365924,"volume",["<meter>","<meter>","<meter>"]],"<kph>":[["kph"],.277777778,"speed",["<meter>"],["<second>"]],"<mph>":[["mph"],.44704,"speed",["<meter>"],["<second>"]],"<knot>":[["kt","kn","kts","knot","knots"],.514444444,"speed",["<meter>"],["<second>"]],"<fps>":[["fps"],.3048,"speed",["<meter>"],["<second>"]],"<gee>":[["gee"],9.80665,"acceleration",["<meter>"],["<second>","<second>"]],"<Gal>":[["Gal"],.01,"acceleration",["<meter>"],["<second>","<second>"]],"<kelvin>":[["degK","kelvin"],1,"temperature",["<kelvin>"]],"<celsius>":[["degC","celsius","celsius","centigrade"],1,"temperature",["<kelvin>"]],"<fahrenheit>":[["degF","fahrenheit"],5/9,"temperature",["<kelvin>"]],"<rankine>":[["degR","rankine"],5/9,"temperature",["<kelvin>"]],"<temp-K>":[["tempK","temp-K"],1,"temperature",["<temp-K>"]],"<temp-C>":[["tempC","temp-C"],1,"temperature",["<temp-K>"]],"<temp-F>":[["tempF","temp-F"],5/9,"temperature",["<temp-K>"]],"<temp-R>":[["tempR","temp-R"],5/9,"temperature",["<temp-K>"]],"<second>":[["s","sec","secs","second","seconds"],1,"time",["<second>"]],"<minute>":[["min","mins","minute","minutes"],60,"time",["<second>"]],"<hour>":[["h","hr","hrs","hour","hours"],3600,"time",["<second>"]],"<day>":[["d","day","days"],3600*24,"time",["<second>"]],"<week>":[["wk","week","weeks"],7*3600*24,"time",["<second>"]],"<fortnight>":[["fortnight","fortnights"],1209600,"time",["<second>"]],"<year>":[["y","yr","year","years","annum"],31556926,"time",["<second>"]],"<decade>":[["decade","decades"],315569260,"time",["<second>"]],"<century>":[["century","centuries"],3155692600,"time",["<second>"]],"<pascal>":[["Pa","pascal","Pascal"],1,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<bar>":[["bar","bars"],1e5,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<mmHg>":[["mmHg"],133.322368,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<inHg>":[["inHg"],3386.3881472,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<torr>":[["torr"],133.322368,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<atm>":[["atm","ATM","atmosphere","atmospheres"],101325,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<psi>":[["psi"],6894.76,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<cmh2o>":[["cmH2O","cmh2o"],98.0638,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<inh2o>":[["inH2O","inh2o"],249.082052,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<poise>":[["P","poise"],.1,"viscosity",["<kilogram>"],["<meter>","<second>"]],"<stokes>":[["St","stokes"],1e-4,"viscosity",["<meter>","<meter>"],["<second>"]],"<mole>":[["mol","mole"],1,"substance",["<mole>"]],"<molar>":[["M","molar"],1e3,"molar_concentration",["<mole>"],["<meter>","<meter>","<meter>"]],"<wtpercent>":[["wt%","wtpercent"],10,"molar_concentration",["<kilogram>"],["<meter>","<meter>","<meter>"]],"<katal>":[["kat","katal","Katal"],1,"activity",["<mole>"],["<second>"]],"<unit>":[["U","enzUnit","unit"],16667e-19,"activity",["<mole>"],["<second>"]],"<farad>":[["F","farad","Farad"],1,"capacitance",["<second>","<second>","<second>","<second>","<ampere>","<ampere>"],["<meter>","<meter>","<kilogram>"]],"<coulomb>":[["C","coulomb","Coulomb"],1,"charge",["<ampere>","<second>"]],"<Ah>":[["Ah"],3600,"charge",["<ampere>","<second>"]],"<ampere>":[["A","Ampere","ampere","amp","amps"],1,"current",["<ampere>"]],"<siemens>":[["S","Siemens","siemens"],1,"conductance",["<second>","<second>","<second>","<ampere>","<ampere>"],["<kilogram>","<meter>","<meter>"]],"<henry>":[["H","Henry","henry"],1,"inductance",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<ampere>","<ampere>"]],"<volt>":[["V","Volt","volt","volts"],1,"potential",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<second>","<ampere>"]],"<ohm>":[["Ohm","ohm","Ω","Ω"],1,"resistance",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<second>","<ampere>","<ampere>"]],"<weber>":[["Wb","weber","webers"],1,"magnetism",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<ampere>"]],"<tesla>":[["T","tesla","teslas"],1,"magnetism",["<kilogram>"],["<second>","<second>","<ampere>"]],"<gauss>":[["G","gauss"],1e-4,"magnetism",["<kilogram>"],["<second>","<second>","<ampere>"]],"<maxwell>":[["Mx","maxwell","maxwells"],1e-8,"magnetism",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<ampere>"]],"<oersted>":[["Oe","oersted","oersteds"],250/Math.PI,"magnetism",["<ampere>"],["<meter>"]],"<joule>":[["J","joule","Joule","joules","Joules"],1,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<erg>":[["erg","ergs"],1e-7,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<btu>":[["BTU","btu","BTUs"],1055.056,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<calorie>":[["cal","calorie","calories"],4.184,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<Calorie>":[["Cal","Calorie","Calories"],4184,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<therm-US>":[["th","therm","therms","Therm","therm-US"],105480400,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<Wh>":[["Wh"],3600,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<electronvolt>":[["eV","electronvolt","electronvolts"],1602176634e-28,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<newton>":[["N","Newton","newton"],1,"force",["<kilogram>","<meter>"],["<second>","<second>"]],"<dyne>":[["dyn","dyne"],1e-5,"force",["<kilogram>","<meter>"],["<second>","<second>"]],"<pound-force>":[["lbf","pound-force"],4.448222,"force",["<kilogram>","<meter>"],["<second>","<second>"]],"<hertz>":[["Hz","hertz","Hertz"],1,"frequency",["<1>"],["<second>"]],"<radian>":[["rad","radian","radians"],1,"angle",["<radian>"]],"<degree>":[["deg","degree","degrees"],Math.PI/180,"angle",["<radian>"]],"<arcminute>":[["arcmin","arcminute","arcminutes"],Math.PI/10800,"angle",["<radian>"]],"<arcsecond>":[["arcsec","arcsecond","arcseconds"],Math.PI/648e3,"angle",["<radian>"]],"<gradian>":[["gon","grad","gradian","grads"],Math.PI/200,"angle",["<radian>"]],"<steradian>":[["sr","steradian","steradians"],1,"solid_angle",["<steradian>"]],"<rotation>":[["rotation"],2*Math.PI,"angle",["<radian>"]],"<rpm>":[["rpm"],2*Math.PI/60,"angular_velocity",["<radian>"],["<second>"]],"<byte>":[["B","byte","bytes"],1,"information",["<byte>"]],"<bit>":[["b","bit","bits"],.125,"information",["<byte>"]],"<Bps>":[["Bps"],1,"information_rate",["<byte>"],["<second>"]],"<bps>":[["bps"],.125,"information_rate",["<byte>"],["<second>"]],"<dollar>":[["USD","dollar"],1,"currency",["<dollar>"]],"<cents>":[["cents"],.01,"currency",["<dollar>"]],"<candela>":[["cd","candela"],1,"luminosity",["<candela>"]],"<lumen>":[["lm","lumen"],1,"luminous_power",["<candela>","<steradian>"]],"<lux>":[["lux"],1,"illuminance",["<candela>","<steradian>"],["<meter>","<meter>"]],"<watt>":[["W","watt","watts"],1,"power",["<kilogram>","<meter>","<meter>"],["<second>","<second>","<second>"]],"<volt-ampere>":[["VA","volt-ampere"],1,"power",["<kilogram>","<meter>","<meter>"],["<second>","<second>","<second>"]],"<volt-ampere-reactive>":[["var","Var","VAr","VAR","volt-ampere-reactive"],1,"power",["<kilogram>","<meter>","<meter>"],["<second>","<second>","<second>"]],"<horsepower>":[["hp","horsepower"],745.699872,"power",["<kilogram>","<meter>","<meter>"],["<second>","<second>","<second>"]],"<gray>":[["Gy","gray","grays"],1,"radiation",["<meter>","<meter>"],["<second>","<second>"]],"<roentgen>":[["R","roentgen"],.00933,"radiation",["<meter>","<meter>"],["<second>","<second>"]],"<sievert>":[["Sv","sievert","sieverts"],1,"radiation",["<meter>","<meter>"],["<second>","<second>"]],"<becquerel>":[["Bq","becquerel","becquerels"],1,"radiation",["<1>"],["<second>"]],"<curie>":[["Ci","curie","curies"],37e9,"radiation",["<1>"],["<second>"]],"<cpm>":[["cpm"],1/60,"rate",["<count>"],["<second>"]],"<dpm>":[["dpm"],1/60,"rate",["<count>"],["<second>"]],"<bpm>":[["bpm"],1/60,"rate",["<count>"],["<second>"]],"<dot>":[["dot","dots"],1,"resolution",["<each>"]],"<pixel>":[["pixel","px"],1,"resolution",["<each>"]],"<ppi>":[["ppi"],1,"resolution",["<pixel>"],["<inch>"]],"<dpi>":[["dpi"],1,"typography",["<dot>"],["<inch>"]],"<cell>":[["cells","cell"],1,"counting",["<each>"]],"<each>":[["each"],1,"counting",["<each>"]],"<count>":[["count"],1,"counting",["<each>"]],"<base-pair>":[["bp","base-pair"],1,"counting",["<each>"]],"<nucleotide>":[["nt","nucleotide"],1,"counting",["<each>"]],"<molecule>":[["molecule","molecules"],1,"counting",["<1>"]],"<dozen>":[["doz","dz","dozen"],12,"prefix_only",["<each>"]],"<percent>":[["%","percent"],.01,"prefix_only",["<1>"]],"<ppm>":[["ppm"],1e-6,"prefix_only",["<1>"]],"<ppb>":[["ppb"],1e-9,"prefix_only",["<1>"]],"<ppt>":[["ppt"],1e-12,"prefix_only",["<1>"]],"<ppq>":[["ppq"],1e-15,"prefix_only",["<1>"]],"<gross>":[["gr","gross"],144,"prefix_only",["<dozen>","<dozen>"]],"<decibel>":[["dB","decibel","decibels"],1,"logarithmic",["<decibel>"]]},_t=["<meter>","<kilogram>","<second>","<mole>","<ampere>","<radian>","<kelvin>","<temp-K>","<byte>","<dollar>","<candela>","<each>","<steradian>","<decibel>"],gt="<1>",wt=[gt];function ft(mt,ot){var it=ot[1],lt=ot[3]||[],pt=ot[4]||[];if(!g(it))throw new At(mt+": Invalid unit definition. 'scalar' must be a number");lt.forEach(function(Et){if(ct[Et]===void 0)throw new At(mt+": Invalid unit definition. Unit "+Et+" in 'numerator' is not recognized")}),pt.forEach(function(Et){if(ct[Et]===void 0)throw new At(mt+": Invalid unit definition. Unit "+Et+" in 'denominator' is not recognized")})}var dt={},xt={},bt={},Ct={},Ut={};for(var Qt in ct)if(ct.hasOwnProperty(Qt)){var kt=ct[Qt];if(kt[2]==="prefix"){dt[Qt]=kt[1];for(var Nt=0;Nt<kt[0].length;Nt++)xt[kt[0][Nt]]=Qt}else{ft(Qt,kt),bt[Qt]={scalar:kt[1],numerator:kt[3],denominator:kt[4]};for(var Wt=0;Wt<kt[0].length;Wt++)Ct[kt[0][Wt]]=Qt}Ut[Qt]=kt[0][0]}function Vt(mt){var ot,it=[],lt=Object.keys(ct);if(typeof mt>"u")for(ot=0;ot<lt.length;ot++)["","prefix"].indexOf(ct[lt[ot]][2])===-1&&it.push(lt[ot].substr(1,lt[ot].length-2));else{if(this.getKinds().indexOf(mt)===-1)throw new At("Kind not recognized");for(ot=0;ot<lt.length;ot++)ct[lt[ot]][2]===mt&&it.push(lt[ot].substr(1,lt[ot].length-2))}return it.sort(function(pt,Et){return pt.toLowerCase()<Et.toLowerCase()?-1:pt.toLowerCase()>Et.toLowerCase()?1:0})}function qt(mt){if(!Ct[mt])throw new At("Unit not recognized");return ct[Ct[mt]][0]}var _e=["length","time","temperature","mass","current","substance","luminosity","currency","information","angle"];function Jt(){if(this.signature)return this.signature;for(var mt=lr.call(this),ot=0;ot<mt.length;ot++)mt[ot]*=Math.pow(20,ot);return mt.reduce(function(it,lt){return it+lt},0)}function lr(){if(!this.isBase())return lr.call(this.toBase());for(var mt=new Array(_e.length),ot=0;ot<mt.length;ot++)mt[ot]=0;for(var it,lt,pt=0;pt<this.numerator.length;pt++)(it=ct[this.numerator[pt]])&&(lt=_e.indexOf(it[2]),lt>=0&&(mt[lt]=mt[lt]+1));for(var Et=0;Et<this.denominator.length;Et++)(it=ct[this.denominator[Et]])&&(lt=_e.indexOf(it[2]),lt>=0&&(mt[lt]=mt[lt]-1));return mt}var jt="[+-]",ur="\\d+",Ar=jt+"?"+ur,mr="\\."+ur,dr="(?:"+ur+"(?:"+mr+")?)|(?:"+mr+")",Nr="[Ee]"+Ar,Ur="(?:"+dr+")(?:"+Nr+")?",nr=jt+"?\\s*"+Ur,hr="("+nr+")?\\s*([^/]*)(?:/(.+))?",Dr=new RegExp("^"+hr+"$"),Qr="\\^|\\*{2}",vr="[01234]",on=new RegExp("([^ \\*\\d]+?)(?:"+Qr+")?(-?"+vr+"(?![a-zA-Z]))"),en=new RegExp("([^ \\*\\d]+?)(?:"+Qr+")?("+vr+"(?![a-zA-Z]))");function zr(mt){h(mt)||(mt=mt.toString()),mt=mt.trim();var ot=Dr.exec(mt);if(!ot)throw new At(mt+": Quantity not recognized");var it=ot[1];it?(it=it.replace(/\s/g,""),this.scalar=parseFloat(it)):this.scalar=1;for(var lt=ot[2],pt=ot[3],Et,Pt,Ht;ot=on.exec(lt);){if(Et=parseFloat(ot[2]),isNaN(Et))throw new At("Unit exponent is not a number");if(Et===0&&!Or.test(ot[1]))throw new At("Unit not recognized");Pt=ot[1]+" ",Ht="";for(var Mt=0;Mt<Math.abs(Et);Mt++)Ht+=Pt;Et>=0?lt=lt.replace(ot[0],Ht):(pt=pt?pt+Ht:Ht,lt=lt.replace(ot[0],""))}for(;ot=en.exec(pt);){if(Et=parseFloat(ot[2]),isNaN(Et))throw new At("Unit exponent is not a number");if(Et===0&&!Or.test(ot[1]))throw new At("Unit not recognized");Pt=ot[1]+" ",Ht="";for(var Gt=0;Gt<Et;Gt++)Ht+=Pt;pt=pt.replace(ot[0],Ht)}lt&&(this.numerator=Kr(lt.trim())),pt&&(this.denominator=Kr(pt.trim()))}var or=Object.keys(xt).sort(function(mt,ot){return ot.length-mt.length}).join("|"),xr=Object.keys(Ct).sort(function(mt,ot){return ot.length-mt.length}).join("|"),Wr="\\b|$",$r="("+or+")??("+xr+")(?:"+Wr+")",Or=new RegExp("^\\s*("+$r+"[\\s\\*]*)+$"),qr=new RegExp($r,"g"),fr={};function Kr(mt){var ot=fr[mt];if(ot)return ot;var it,lt=[];if(!Or.test(mt))throw new At("Unit not recognized");for(;it=qr.exec(mt);)lt.push(it.slice(1));return lt=lt.map(function(pt){return xt[pt[0]]?[xt[pt[0]],Ct[pt[1]]]:[Ct[pt[1]]]}),lt=lt.reduce(function(pt,Et){return pt.concat(Et)},[]),lt=lt.filter(function(pt){return pt}),fr[mt]=lt,lt}function jr(mt){if(!h(mt))throw new At("Argument should be a string");try{return this(mt)}catch{return null}}function Xr(mt){return mt instanceof Tr}function Tr(mt,ot){if(An.apply(null,arguments),!Xr(this))return new Tr(mt,ot);if(this.scalar=null,this.baseScalar=null,this.signature=null,this._conversionCache={},this.numerator=wt,this.denominator=wt,Gr(mt)?(this.scalar=mt.scalar,this.numerator=mt.numerator&&mt.numerator.length!==0?mt.numerator:wt,this.denominator=mt.denominator&&mt.denominator.length!==0?mt.denominator:wt):ot?(zr.call(this,ot),this.scalar=mt):zr.call(this,mt),this.denominator.join("*").indexOf("temp")>=0)throw new At("Cannot divide with temperatures");if(this.numerator.join("*").indexOf("temp")>=0){if(this.numerator.length>1)throw new At("Cannot multiply by temperatures");if(!j(this.denominator,wt))throw new At("Cannot divide with temperatures")}if(this.initValue=mt,Yr.call(this),this.isTemperature()&&this.baseScalar<0)throw new At("Temperatures must not be less than absolute zero")}Tr.prototype={constructor:Tr};function An(mt,ot){if(ot){if(!(g(mt)&&h(ot)))throw new At("Only number accepted as initialization value when units are explicitly provided")}else if(!(h(mt)||g(mt)||Xr(mt)||Gr(mt)))throw new At("Only string, number or quantity accepted as single initialization value")}function Gr(mt){return mt&&typeof mt=="object"&&mt.hasOwnProperty("scalar")}function Yr(){if(this.baseScalar)return this.baseScalar;if(this.isBase())this.baseScalar=this.scalar,this.signature=Jt.call(this);else{var mt=this.toBase();this.baseScalar=mt.scalar,this.signature=mt.signature}}var Zr={"-312078":"elastance","-312058":"resistance","-312038":"inductance","-152058":"potential","-152040":"magnetism","-152038":"magnetism","-7997":"specific_volume","-79":"snap","-59":"jolt","-39":"acceleration","-38":"radiation","-20":"frequency","-19":"speed","-18":"viscosity","-17":"volumetric_flow","-1":"wavenumber",0:"unitless",1:"length",2:"area",3:"volume",20:"time",400:"temperature",7941:"yank",7942:"power",7959:"pressure",7961:"force",7962:"energy",7979:"viscosity",7981:"momentum",7982:"angular_momentum",7997:"density",7998:"area_density",8e3:"mass",152020:"radiation_exposure",159999:"magnetism",16e4:"current",160020:"charge",312058:"conductance",312078:"capacitance",3199980:"activity",3199997:"molar_concentration",32e5:"substance",63999998:"illuminance",64e6:"luminous_power",128e7:"currency","25599999980":"information_rate","25600000000":"information","511999999980":"angular_velocity","512000000000":"angle"};function ln(){return b(Object.keys(Zr).map(function(mt){return Zr[mt]}))}Tr.prototype.kind=function(){return Zr[this.signature.toString()]},et(Tr.prototype,{isDegrees:function(){return(this.signature===null||this.signature===400)&&this.numerator.length===1&&j(this.denominator,wt)&&(this.numerator[0].match(/<temp-[CFRK]>/)||this.numerator[0].match(/<(kelvin|celsius|rankine|fahrenheit)>/))},isTemperature:function(){return this.isDegrees()&&this.numerator[0].match(/<temp-[CFRK]>/)}});function Hr(mt,ot){var it=mt.units(),lt=ot.to(it),pt=Tr(br(it));return Tr({scalar:mt.scalar-lt.scalar,numerator:pt.numerator,denominator:pt.denominator})}function rn(mt,ot){var it=ot.to(br(mt.units()));return Tr({scalar:mt.scalar-it.scalar,numerator:mt.numerator,denominator:mt.denominator})}function zt(mt,ot){var it=ot.to(br(mt.units()));return Tr({scalar:mt.scalar+it.scalar,numerator:mt.numerator,denominator:mt.denominator})}function br(mt){if(mt==="tempK")return"degK";if(mt==="tempC")return"degC";if(mt==="tempF")return"degF";if(mt==="tempR")return"degR";throw new At("Unknown type for temp conversion from: "+mt)}function Sr(mt,ot){var it=kr(mt),lt=ot.units(),pt;if(lt==="degK")pt=it.scalar;else if(lt==="degC")pt=it.scalar;else if(lt==="degF")pt=it.scalar*9/5;else if(lt==="degR")pt=it.scalar*9/5;else throw new At("Unknown type for degree conversion to: "+lt);return Tr({scalar:pt,numerator:ot.numerator,denominator:ot.denominator})}function kr(mt){var ot=mt.units(),it;if(ot.match(/(deg)[CFRK]/))it=mt.baseScalar;else if(ot==="tempK")it=mt.scalar;else if(ot==="tempC")it=mt.scalar;else if(ot==="tempF")it=mt.scalar*5/9;else if(ot==="tempR")it=mt.scalar*5/9;else throw new At("Unknown type for temp conversion from: "+ot);return Tr({scalar:it,numerator:["<kelvin>"],denominator:wt})}function ir(mt,ot){var it=ot.units(),lt;if(it==="tempK")lt=mt.baseScalar;else if(it==="tempC")lt=mt.baseScalar-273.15;else if(it==="tempF")lt=mt.baseScalar*9/5-459.67;else if(it==="tempR")lt=mt.baseScalar*9/5;else throw new At("Unknown type for temp conversion to: "+it);return Tr({scalar:lt,numerator:ot.numerator,denominator:ot.denominator})}function Er(mt){var ot=mt.units(),it;if(ot.match(/(deg)[CFRK]/))it=mt.baseScalar;else if(ot==="tempK")it=mt.scalar;else if(ot==="tempC")it=mt.scalar+273.15;else if(ot==="tempF")it=(mt.scalar+459.67)*5/9;else if(ot==="tempR")it=mt.scalar*5/9;else throw new At("Unknown type for temp conversion from: "+ot);return Tr({scalar:it,numerator:["<temp-K>"],denominator:wt})}et(Tr.prototype,{to:function(mt){var ot,it;if(mt==null)return this;if(!h(mt))return this.to(mt.units());if(ot=this._conversionCache[mt],ot)return ot;if(it=Tr(mt),it.units()===this.units())return this;if(!this.isCompatible(it))this.isInverse(it)?it=this.inverse().to(mt):ht(this.units(),it.units());else if(it.isTemperature())it=ir(this,it);else if(it.isDegrees())it=Sr(this,it);else{var lt=rt(this.baseScalar,it.baseScalar);it=Tr({scalar:lt,numerator:it.numerator,denominator:it.denominator})}return this._conversionCache[mt]=it,it},toBase:function(){if(this.isBase())return this;if(this.isTemperature())return Er(this);var mt=Ir[this.units()];return mt||(mt=un(this.numerator,this.denominator),Ir[this.units()]=mt),mt.mul(this.scalar)},toFloat:function(){if(this.isUnitless())return this.scalar;throw new At("Can't convert to Float unless unitless.  Use Unit#scalar")},toPrec:function(mt){if(h(mt)&&(mt=Tr(mt)),g(mt)&&(mt=Tr(mt+" "+this.units())),this.isUnitless()?mt.isUnitless()||ht(this.units(),mt.units()):mt=mt.to(this.units()),mt.scalar===0)throw new At("Divide by zero");var ot=tt(Math.round(this.scalar/mt.scalar),mt.scalar);return Tr(ot+this.units())}});function Lt(mt,ot){var it=Tr(mt),lt=Tr(ot);if(it.eq(lt))return _;var pt;return it.isTemperature()?pt=function(Et){return it.mul(Et).to(lt).scalar}:pt=function(Et){return Et*it.baseScalar/lt.baseScalar},function(Et){var Pt,Ht,Mt;if(Array.isArray(Et)){for(Ht=Et.length,Mt=[],Pt=0;Pt<Ht;Pt++)Mt.push(pt(Et[Pt]));return Mt}else return pt(Et)}}var Ir={};function un(mt,ot){for(var it=[],lt=[],pt=1,Et,Pt=0;Pt<mt.length;Pt++)Et=mt[Pt],dt[Et]?pt=tt(pt,dt[Et]):bt[Et]&&(pt*=bt[Et].scalar,bt[Et].numerator&&it.push(bt[Et].numerator),bt[Et].denominator&&lt.push(bt[Et].denominator));for(var Ht=0;Ht<ot.length;Ht++)Et=ot[Ht],dt[Et]?pt/=dt[Et]:bt[Et]&&(pt/=bt[Et].scalar,bt[Et].numerator&&lt.push(bt[Et].numerator),bt[Et].denominator&&it.push(bt[Et].denominator));return it=it.reduce(function(Mt,Gt){return Mt.concat(Gt)},[]),lt=lt.reduce(function(Mt,Gt){return Mt.concat(Gt)},[]),Tr({scalar:pt,numerator:it,denominator:lt})}Tr.parse=jr,Tr.getUnits=Vt,Tr.getAliases=qt,Tr.mulSafe=tt,Tr.divSafe=rt,Tr.getKinds=ln,Tr.swiftConverter=Lt,Tr.Error=At,et(Tr.prototype,{add:function(mt){if(h(mt)&&(mt=Tr(mt)),this.isCompatible(mt)||ht(this.units(),mt.units()),this.isTemperature()&&mt.isTemperature())throw new At("Cannot add two temperatures");return this.isTemperature()?zt(this,mt):mt.isTemperature()?zt(mt,this):Tr({scalar:this.scalar+mt.to(this).scalar,numerator:this.numerator,denominator:this.denominator})},sub:function(mt){if(h(mt)&&(mt=Tr(mt)),this.isCompatible(mt)||ht(this.units(),mt.units()),this.isTemperature()&&mt.isTemperature())return Hr(this,mt);if(this.isTemperature())return rn(this,mt);if(mt.isTemperature())throw new At("Cannot subtract a temperature from a differential degree unit");return Tr({scalar:this.scalar-mt.to(this).scalar,numerator:this.numerator,denominator:this.denominator})},mul:function(mt){if(g(mt))return Tr({scalar:tt(this.scalar,mt),numerator:this.numerator,denominator:this.denominator});if(h(mt)&&(mt=Tr(mt)),(this.isTemperature()||mt.isTemperature())&&!(this.isUnitless()||mt.isUnitless()))throw new At("Cannot multiply by temperatures");var ot=this,it=mt;ot.isCompatible(it)&&ot.signature!==400&&(it=it.to(ot));var lt=yt(ot.numerator,ot.denominator,it.numerator,it.denominator);return Tr({scalar:tt(ot.scalar,it.scalar,lt[2]),numerator:lt[0],denominator:lt[1]})},div:function(mt){if(g(mt)){if(mt===0)throw new At("Divide by zero");return Tr({scalar:this.scalar/mt,numerator:this.numerator,denominator:this.denominator})}else h(mt)&&(mt=Tr(mt));if(mt.scalar===0)throw new At("Divide by zero");if(mt.isTemperature())throw new At("Cannot divide with temperatures");if(this.isTemperature()&&!mt.isUnitless())throw new At("Cannot divide with temperatures");var ot=this,it=mt;ot.isCompatible(it)&&ot.signature!==400&&(it=it.to(ot));var lt=yt(ot.numerator,ot.denominator,it.denominator,it.numerator);return Tr({scalar:tt(ot.scalar,lt[2])/it.scalar,numerator:lt[0],denominator:lt[1]})},inverse:function(){if(this.isTemperature())throw new At("Cannot divide with temperatures");if(this.scalar===0)throw new At("Divide by zero");return Tr({scalar:1/this.scalar,numerator:this.denominator,denominator:this.numerator})}});function yt(mt,ot,it,lt){function pt(Fr){return Fr!==gt}mt=mt.filter(pt),it=it.filter(pt),ot=ot.filter(pt),lt=lt.filter(pt);var Et={};function Pt(Fr,cr){for(var Br,Vr,rr,Mr=0;Mr<Fr.length;Mr++)if(dt[Fr[Mr]]?(Br=Fr[Mr+1],Vr=Fr[Mr],rr=dt[Vr],Mr++):(Br=Fr[Mr],Vr=null,rr=1),Br&&Br!==gt)if(Et[Br]){Et[Br][0]+=cr;var Jr=Et[Br][2]?dt[Et[Br][2]]:1;Et[Br][cr===1?3:4]*=rt(rr,Jr)}else Et[Br]=[cr,Br,Vr,1,1]}Pt(mt,1),Pt(ot,-1),Pt(it,1),Pt(lt,-1);var Ht=[],Mt=[],Gt=1;for(var sr in Et)if(Et.hasOwnProperty(sr)){var Xt=Et[sr],wr;if(Xt[0]>0)for(wr=0;wr<Xt[0];wr++)Ht.push(Xt[2]===null?Xt[1]:[Xt[2],Xt[1]]);else if(Xt[0]<0)for(wr=0;wr<-Xt[0];wr++)Mt.push(Xt[2]===null?Xt[1]:[Xt[2],Xt[1]]);Gt*=rt(Xt[3],Xt[4])}return Ht.length===0&&(Ht=wt),Mt.length===0&&(Mt=wt),Ht=Ht.reduce(function(Fr,cr){return Fr.concat(cr)},[]),Mt=Mt.reduce(function(Fr,cr){return Fr.concat(cr)},[]),[Ht,Mt,Gt]}et(Tr.prototype,{eq:function(mt){return this.compareTo(mt)===0},lt:function(mt){return this.compareTo(mt)===-1},lte:function(mt){return this.eq(mt)||this.lt(mt)},gt:function(mt){return this.compareTo(mt)===1},gte:function(mt){return this.eq(mt)||this.gt(mt)},compareTo:function(mt){if(h(mt))return this.compareTo(Tr(mt));if(this.isCompatible(mt)||ht(this.units(),mt.units()),this.baseScalar<mt.baseScalar)return-1;if(this.baseScalar===mt.baseScalar)return 0;if(this.baseScalar>mt.baseScalar)return 1},same:function(mt){return this.scalar===mt.scalar&&this.units()===mt.units()}}),et(Tr.prototype,{isUnitless:function(){return[this.numerator,this.denominator].every(function(mt){return j(mt,wt)})},isCompatible:function(mt){return h(mt)?this.isCompatible(Tr(mt)):Xr(mt)&&mt.signature!==void 0?this.signature===mt.signature:!1},isInverse:function(mt){return this.inverse().isCompatible(mt)},isBase:function(){return this._isBase!==void 0?this._isBase:this.isDegrees()&&this.numerator[0].match(/<(kelvin|temp-K)>/)?(this._isBase=!0,this._isBase):(this.numerator.concat(this.denominator).forEach(function(mt){mt!==gt&&_t.indexOf(mt)===-1&&(this._isBase=!1)},this),this._isBase===!1?this._isBase:(this._isBase=!0,this._isBase))}});function _r(){}_r.prototype.get=function(mt){return arguments.length>1&&(mt=Array.apply(null,arguments)),mt.reduce(function(ot,it,lt){if(ot){var pt=ot[it];return lt===mt.length-1?pt?pt.data:void 0:pt}},this)},_r.prototype.set=function(mt,ot){return arguments.length>2&&(mt=Array.prototype.slice.call(arguments,0,-1),ot=arguments[arguments.length-1]),mt.reduce(function(it,lt,pt){var Et=it[lt];return Et===void 0&&(Et=it[lt]={}),pt===mt.length-1?(Et.data=ot,ot):Et},this)};function yr(mt,ot){return(mt+" "+ot).trim()}Tr.formatter=yr,et(Tr.prototype,{units:function(){if(this._units!==void 0)return this._units;var mt=j(this.numerator,wt),ot=j(this.denominator,wt);if(mt&&ot)return this._units="",this._units;var it=tr(this.numerator),lt=tr(this.denominator);return this._units=it+(ot?"":"/"+lt),this._units},toString:function(mt,ot){var it;if(g(mt))it=this.units(),ot=mt;else if(h(mt))it=mt;else if(Xr(mt))return this.toPrec(mt).toString(ot);var lt=this.to(it),pt=ot!==void 0?at(lt.scalar,ot):lt.scalar;return lt=(pt+" "+lt.units()).trim(),lt},format:function(mt,ot){arguments.length===1&&typeof mt=="function"&&(ot=mt,mt=void 0),ot=ot||Tr.formatter;var it=this.to(mt);return ot.call(this,it.scalar,it.units())}});var Kt=new _r;function tr(mt){var ot=Kt.get(mt);if(ot)return ot;var it=j(mt,wt);return it?ot="1":ot=sn(pr(mt)).join("*"),Kt.set(mt,ot),ot}function pr(mt){for(var ot=[],it,lt,pt=0;pt<mt.length;pt++)it=mt[pt],lt=mt[pt+1],dt[it]?(ot.push(Ut[it]+Ut[lt]),pt++):ot.push(Ut[it]);return ot}function sn(mt){var ot=mt.reduce(function(it,lt){var pt=it[lt];return pt||it.push(pt=it[lt]=[lt,0]),pt[1]++,it},[]);return ot.map(function(it){return it[0]+(it[1]>1?it[1]:"")})}return Tr.version="1.8.0",Tr})}(quantities$1)),quantities$1.exports}var quantitiesExports=requireQuantities();const Qty=getDefaultExportFromCjs(quantitiesExports);function deepValue(s,o=""){let h=o.split(".");for(let d of h){if(s[d]===void 0)return;s=s[d]}return s}var orientation$1={exports:{}},twoProduct_1,hasRequiredTwoProduct;function requireTwoProduct(){if(hasRequiredTwoProduct)return twoProduct_1;hasRequiredTwoProduct=1,twoProduct_1=o;var s=+(Math.pow(2,27)+1);function o(h,d,g){var _=h*d,b=s*h,j=b-h,et=b-j,tt=h-et,rt=s*d,at=rt-d,st=rt-at,At=d-st,ht=_-et*st,ct=ht-tt*st,_t=ct-et*At,gt=tt*At-_t;return g?(g[0]=gt,g[1]=_,g):[gt,_]}return twoProduct_1}var robustSum,hasRequiredRobustSum;function requireRobustSum(){if(hasRequiredRobustSum)return robustSum;hasRequiredRobustSum=1,robustSum=o;function s(h,d){var g=h+d,_=g-h,b=g-_,j=d-_,et=h-b,tt=et+j;return tt?[tt,g]:[g]}function o(h,d){var g=h.length|0,_=d.length|0;if(g===1&&_===1)return s(h[0],d[0]);var b=g+_,j=new Array(b),et=0,tt=0,rt=0,at=Math.abs,st=h[tt],At=at(st),ht=d[rt],ct=at(ht),_t,gt;At<ct?(gt=st,tt+=1,tt<g&&(st=h[tt],At=at(st))):(gt=ht,rt+=1,rt<_&&(ht=d[rt],ct=at(ht))),tt<g&&At<ct||rt>=_?(_t=st,tt+=1,tt<g&&(st=h[tt],At=at(st))):(_t=ht,rt+=1,rt<_&&(ht=d[rt],ct=at(ht)));for(var wt=_t+gt,ft=wt-_t,dt=gt-ft,xt=dt,bt=wt,Ct,Ut,Qt,kt,Nt;tt<g&&rt<_;)At<ct?(_t=st,tt+=1,tt<g&&(st=h[tt],At=at(st))):(_t=ht,rt+=1,rt<_&&(ht=d[rt],ct=at(ht))),gt=xt,wt=_t+gt,ft=wt-_t,dt=gt-ft,dt&&(j[et++]=dt),Ct=bt+wt,Ut=Ct-bt,Qt=Ct-Ut,kt=wt-Ut,Nt=bt-Qt,xt=Nt+kt,bt=Ct;for(;tt<g;)_t=st,gt=xt,wt=_t+gt,ft=wt-_t,dt=gt-ft,dt&&(j[et++]=dt),Ct=bt+wt,Ut=Ct-bt,Qt=Ct-Ut,kt=wt-Ut,Nt=bt-Qt,xt=Nt+kt,bt=Ct,tt+=1,tt<g&&(st=h[tt]);for(;rt<_;)_t=ht,gt=xt,wt=_t+gt,ft=wt-_t,dt=gt-ft,dt&&(j[et++]=dt),Ct=bt+wt,Ut=Ct-bt,Qt=Ct-Ut,kt=wt-Ut,Nt=bt-Qt,xt=Nt+kt,bt=Ct,rt+=1,rt<_&&(ht=d[rt]);return xt&&(j[et++]=xt),bt&&(j[et++]=bt),et||(j[et++]=0),j.length=et,j}return robustSum}var twoSum,hasRequiredTwoSum;function requireTwoSum(){if(hasRequiredTwoSum)return twoSum;hasRequiredTwoSum=1,twoSum=s;function s(o,h,d){var g=o+h,_=g-o,b=g-_,j=h-_,et=o-b;return d?(d[0]=et+j,d[1]=g,d):[et+j,g]}return twoSum}var robustScale,hasRequiredRobustScale;function requireRobustScale(){if(hasRequiredRobustScale)return robustScale;hasRequiredRobustScale=1;var s=requireTwoProduct(),o=requireTwoSum();robustScale=h;function h(d,g){var _=d.length;if(_===1){var b=s(d[0],g);return b[0]?b:[b[1]]}var j=new Array(2*_),et=[.1,.1],tt=[.1,.1],rt=0;s(d[0],g,et),et[0]&&(j[rt++]=et[0]);for(var at=1;at<_;++at){s(d[at],g,tt);var st=et[1];o(st,tt[0],et),et[0]&&(j[rt++]=et[0]);var At=tt[1],ht=et[1],ct=At+ht,_t=ct-At,gt=ht-_t;et[1]=ct,gt&&(j[rt++]=gt)}return et[1]&&(j[rt++]=et[1]),rt===0&&(j[rt++]=0),j.length=rt,j}return robustScale}var robustDiff,hasRequiredRobustDiff;function requireRobustDiff(){if(hasRequiredRobustDiff)return robustDiff;hasRequiredRobustDiff=1,robustDiff=o;function s(h,d){var g=h+d,_=g-h,b=g-_,j=d-_,et=h-b,tt=et+j;return tt?[tt,g]:[g]}function o(h,d){var g=h.length|0,_=d.length|0;if(g===1&&_===1)return s(h[0],-d[0]);var b=g+_,j=new Array(b),et=0,tt=0,rt=0,at=Math.abs,st=h[tt],At=at(st),ht=-d[rt],ct=at(ht),_t,gt;At<ct?(gt=st,tt+=1,tt<g&&(st=h[tt],At=at(st))):(gt=ht,rt+=1,rt<_&&(ht=-d[rt],ct=at(ht))),tt<g&&At<ct||rt>=_?(_t=st,tt+=1,tt<g&&(st=h[tt],At=at(st))):(_t=ht,rt+=1,rt<_&&(ht=-d[rt],ct=at(ht)));for(var wt=_t+gt,ft=wt-_t,dt=gt-ft,xt=dt,bt=wt,Ct,Ut,Qt,kt,Nt;tt<g&&rt<_;)At<ct?(_t=st,tt+=1,tt<g&&(st=h[tt],At=at(st))):(_t=ht,rt+=1,rt<_&&(ht=-d[rt],ct=at(ht))),gt=xt,wt=_t+gt,ft=wt-_t,dt=gt-ft,dt&&(j[et++]=dt),Ct=bt+wt,Ut=Ct-bt,Qt=Ct-Ut,kt=wt-Ut,Nt=bt-Qt,xt=Nt+kt,bt=Ct;for(;tt<g;)_t=st,gt=xt,wt=_t+gt,ft=wt-_t,dt=gt-ft,dt&&(j[et++]=dt),Ct=bt+wt,Ut=Ct-bt,Qt=Ct-Ut,kt=wt-Ut,Nt=bt-Qt,xt=Nt+kt,bt=Ct,tt+=1,tt<g&&(st=h[tt]);for(;rt<_;)_t=ht,gt=xt,wt=_t+gt,ft=wt-_t,dt=gt-ft,dt&&(j[et++]=dt),Ct=bt+wt,Ut=Ct-bt,Qt=Ct-Ut,kt=wt-Ut,Nt=bt-Qt,xt=Nt+kt,bt=Ct,rt+=1,rt<_&&(ht=-d[rt]);return xt&&(j[et++]=xt),bt&&(j[et++]=bt),et||(j[et++]=0),j.length=et,j}return robustDiff}var hasRequiredOrientation;function requireOrientation(){return hasRequiredOrientation||(hasRequiredOrientation=1,function(s){var o=requireTwoProduct(),h=requireRobustSum(),d=requireRobustScale(),g=requireRobustDiff(),_=5,b=11102230246251565e-32,j=(3+16*b)*b,et=(7+56*b)*b;function tt(ft,dt,xt,bt){return function(Ct,Ut,Qt){var kt=ft(ft(dt(Ut[1],Qt[0]),dt(-Qt[1],Ut[0])),ft(dt(Ct[1],Ut[0]),dt(-Ut[1],Ct[0]))),Nt=ft(dt(Ct[1],Qt[0]),dt(-Qt[1],Ct[0])),Wt=bt(kt,Nt);return Wt[Wt.length-1]}}function rt(ft,dt,xt,bt){return function(Ct,Ut,Qt,kt){var Nt=ft(ft(xt(ft(dt(Qt[1],kt[0]),dt(-kt[1],Qt[0])),Ut[2]),ft(xt(ft(dt(Ut[1],kt[0]),dt(-kt[1],Ut[0])),-Qt[2]),xt(ft(dt(Ut[1],Qt[0]),dt(-Qt[1],Ut[0])),kt[2]))),ft(xt(ft(dt(Ut[1],kt[0]),dt(-kt[1],Ut[0])),Ct[2]),ft(xt(ft(dt(Ct[1],kt[0]),dt(-kt[1],Ct[0])),-Ut[2]),xt(ft(dt(Ct[1],Ut[0]),dt(-Ut[1],Ct[0])),kt[2])))),Wt=ft(ft(xt(ft(dt(Qt[1],kt[0]),dt(-kt[1],Qt[0])),Ct[2]),ft(xt(ft(dt(Ct[1],kt[0]),dt(-kt[1],Ct[0])),-Qt[2]),xt(ft(dt(Ct[1],Qt[0]),dt(-Qt[1],Ct[0])),kt[2]))),ft(xt(ft(dt(Ut[1],Qt[0]),dt(-Qt[1],Ut[0])),Ct[2]),ft(xt(ft(dt(Ct[1],Qt[0]),dt(-Qt[1],Ct[0])),-Ut[2]),xt(ft(dt(Ct[1],Ut[0]),dt(-Ut[1],Ct[0])),Qt[2])))),Vt=bt(Nt,Wt);return Vt[Vt.length-1]}}function at(ft,dt,xt,bt){return function(Ct,Ut,Qt,kt,Nt){var Wt=ft(ft(ft(xt(ft(xt(ft(dt(kt[1],Nt[0]),dt(-Nt[1],kt[0])),Qt[2]),ft(xt(ft(dt(Qt[1],Nt[0]),dt(-Nt[1],Qt[0])),-kt[2]),xt(ft(dt(Qt[1],kt[0]),dt(-kt[1],Qt[0])),Nt[2]))),Ut[3]),ft(xt(ft(xt(ft(dt(kt[1],Nt[0]),dt(-Nt[1],kt[0])),Ut[2]),ft(xt(ft(dt(Ut[1],Nt[0]),dt(-Nt[1],Ut[0])),-kt[2]),xt(ft(dt(Ut[1],kt[0]),dt(-kt[1],Ut[0])),Nt[2]))),-Qt[3]),xt(ft(xt(ft(dt(Qt[1],Nt[0]),dt(-Nt[1],Qt[0])),Ut[2]),ft(xt(ft(dt(Ut[1],Nt[0]),dt(-Nt[1],Ut[0])),-Qt[2]),xt(ft(dt(Ut[1],Qt[0]),dt(-Qt[1],Ut[0])),Nt[2]))),kt[3]))),ft(xt(ft(xt(ft(dt(Qt[1],kt[0]),dt(-kt[1],Qt[0])),Ut[2]),ft(xt(ft(dt(Ut[1],kt[0]),dt(-kt[1],Ut[0])),-Qt[2]),xt(ft(dt(Ut[1],Qt[0]),dt(-Qt[1],Ut[0])),kt[2]))),-Nt[3]),ft(xt(ft(xt(ft(dt(kt[1],Nt[0]),dt(-Nt[1],kt[0])),Ut[2]),ft(xt(ft(dt(Ut[1],Nt[0]),dt(-Nt[1],Ut[0])),-kt[2]),xt(ft(dt(Ut[1],kt[0]),dt(-kt[1],Ut[0])),Nt[2]))),Ct[3]),xt(ft(xt(ft(dt(kt[1],Nt[0]),dt(-Nt[1],kt[0])),Ct[2]),ft(xt(ft(dt(Ct[1],Nt[0]),dt(-Nt[1],Ct[0])),-kt[2]),xt(ft(dt(Ct[1],kt[0]),dt(-kt[1],Ct[0])),Nt[2]))),-Ut[3])))),ft(ft(xt(ft(xt(ft(dt(Ut[1],Nt[0]),dt(-Nt[1],Ut[0])),Ct[2]),ft(xt(ft(dt(Ct[1],Nt[0]),dt(-Nt[1],Ct[0])),-Ut[2]),xt(ft(dt(Ct[1],Ut[0]),dt(-Ut[1],Ct[0])),Nt[2]))),kt[3]),ft(xt(ft(xt(ft(dt(Ut[1],kt[0]),dt(-kt[1],Ut[0])),Ct[2]),ft(xt(ft(dt(Ct[1],kt[0]),dt(-kt[1],Ct[0])),-Ut[2]),xt(ft(dt(Ct[1],Ut[0]),dt(-Ut[1],Ct[0])),kt[2]))),-Nt[3]),xt(ft(xt(ft(dt(Qt[1],kt[0]),dt(-kt[1],Qt[0])),Ut[2]),ft(xt(ft(dt(Ut[1],kt[0]),dt(-kt[1],Ut[0])),-Qt[2]),xt(ft(dt(Ut[1],Qt[0]),dt(-Qt[1],Ut[0])),kt[2]))),Ct[3]))),ft(xt(ft(xt(ft(dt(Qt[1],kt[0]),dt(-kt[1],Qt[0])),Ct[2]),ft(xt(ft(dt(Ct[1],kt[0]),dt(-kt[1],Ct[0])),-Qt[2]),xt(ft(dt(Ct[1],Qt[0]),dt(-Qt[1],Ct[0])),kt[2]))),-Ut[3]),ft(xt(ft(xt(ft(dt(Ut[1],kt[0]),dt(-kt[1],Ut[0])),Ct[2]),ft(xt(ft(dt(Ct[1],kt[0]),dt(-kt[1],Ct[0])),-Ut[2]),xt(ft(dt(Ct[1],Ut[0]),dt(-Ut[1],Ct[0])),kt[2]))),Qt[3]),xt(ft(xt(ft(dt(Ut[1],Qt[0]),dt(-Qt[1],Ut[0])),Ct[2]),ft(xt(ft(dt(Ct[1],Qt[0]),dt(-Qt[1],Ct[0])),-Ut[2]),xt(ft(dt(Ct[1],Ut[0]),dt(-Ut[1],Ct[0])),Qt[2]))),-kt[3]))))),Vt=ft(ft(ft(xt(ft(xt(ft(dt(kt[1],Nt[0]),dt(-Nt[1],kt[0])),Qt[2]),ft(xt(ft(dt(Qt[1],Nt[0]),dt(-Nt[1],Qt[0])),-kt[2]),xt(ft(dt(Qt[1],kt[0]),dt(-kt[1],Qt[0])),Nt[2]))),Ct[3]),xt(ft(xt(ft(dt(kt[1],Nt[0]),dt(-Nt[1],kt[0])),Ct[2]),ft(xt(ft(dt(Ct[1],Nt[0]),dt(-Nt[1],Ct[0])),-kt[2]),xt(ft(dt(Ct[1],kt[0]),dt(-kt[1],Ct[0])),Nt[2]))),-Qt[3])),ft(xt(ft(xt(ft(dt(Qt[1],Nt[0]),dt(-Nt[1],Qt[0])),Ct[2]),ft(xt(ft(dt(Ct[1],Nt[0]),dt(-Nt[1],Ct[0])),-Qt[2]),xt(ft(dt(Ct[1],Qt[0]),dt(-Qt[1],Ct[0])),Nt[2]))),kt[3]),xt(ft(xt(ft(dt(Qt[1],kt[0]),dt(-kt[1],Qt[0])),Ct[2]),ft(xt(ft(dt(Ct[1],kt[0]),dt(-kt[1],Ct[0])),-Qt[2]),xt(ft(dt(Ct[1],Qt[0]),dt(-Qt[1],Ct[0])),kt[2]))),-Nt[3]))),ft(ft(xt(ft(xt(ft(dt(Qt[1],Nt[0]),dt(-Nt[1],Qt[0])),Ut[2]),ft(xt(ft(dt(Ut[1],Nt[0]),dt(-Nt[1],Ut[0])),-Qt[2]),xt(ft(dt(Ut[1],Qt[0]),dt(-Qt[1],Ut[0])),Nt[2]))),Ct[3]),xt(ft(xt(ft(dt(Qt[1],Nt[0]),dt(-Nt[1],Qt[0])),Ct[2]),ft(xt(ft(dt(Ct[1],Nt[0]),dt(-Nt[1],Ct[0])),-Qt[2]),xt(ft(dt(Ct[1],Qt[0]),dt(-Qt[1],Ct[0])),Nt[2]))),-Ut[3])),ft(xt(ft(xt(ft(dt(Ut[1],Nt[0]),dt(-Nt[1],Ut[0])),Ct[2]),ft(xt(ft(dt(Ct[1],Nt[0]),dt(-Nt[1],Ct[0])),-Ut[2]),xt(ft(dt(Ct[1],Ut[0]),dt(-Ut[1],Ct[0])),Nt[2]))),Qt[3]),xt(ft(xt(ft(dt(Ut[1],Qt[0]),dt(-Qt[1],Ut[0])),Ct[2]),ft(xt(ft(dt(Ct[1],Qt[0]),dt(-Qt[1],Ct[0])),-Ut[2]),xt(ft(dt(Ct[1],Ut[0]),dt(-Ut[1],Ct[0])),Qt[2]))),-Nt[3])))),qt=bt(Wt,Vt);return qt[qt.length-1]}}function st(ft){var dt=ft===3?tt:ft===4?rt:at;return dt(h,o,d,g)}var At=st(3),ht=st(4),ct=[function(){return 0},function(){return 0},function(ft,dt){return dt[0]-ft[0]},function(ft,dt,xt){var bt=(ft[1]-xt[1])*(dt[0]-xt[0]),Ct=(ft[0]-xt[0])*(dt[1]-xt[1]),Ut=bt-Ct,Qt;if(bt>0){if(Ct<=0)return Ut;Qt=bt+Ct}else if(bt<0){if(Ct>=0)return Ut;Qt=-(bt+Ct)}else return Ut;var kt=j*Qt;return Ut>=kt||Ut<=-kt?Ut:At(ft,dt,xt)},function(ft,dt,xt,bt){var Ct=ft[0]-bt[0],Ut=dt[0]-bt[0],Qt=xt[0]-bt[0],kt=ft[1]-bt[1],Nt=dt[1]-bt[1],Wt=xt[1]-bt[1],Vt=ft[2]-bt[2],qt=dt[2]-bt[2],_e=xt[2]-bt[2],Jt=Ut*Wt,lr=Qt*Nt,jt=Qt*kt,ur=Ct*Wt,Ar=Ct*Nt,mr=Ut*kt,dr=Vt*(Jt-lr)+qt*(jt-ur)+_e*(Ar-mr),Nr=(Math.abs(Jt)+Math.abs(lr))*Math.abs(Vt)+(Math.abs(jt)+Math.abs(ur))*Math.abs(qt)+(Math.abs(Ar)+Math.abs(mr))*Math.abs(_e),Ur=et*Nr;return dr>Ur||-dr>Ur?dr:ht(ft,dt,xt,bt)}];function _t(ft){var dt=ct[ft.length];return dt||(dt=ct[ft.length]=st(ft.length)),dt.apply(void 0,ft)}function gt(ft,dt,xt,bt,Ct,Ut,Qt){return function(kt,Nt,Wt,Vt,qt){switch(arguments.length){case 0:case 1:return 0;case 2:return bt(kt,Nt);case 3:return Ct(kt,Nt,Wt);case 4:return Ut(kt,Nt,Wt,Vt);case 5:return Qt(kt,Nt,Wt,Vt,qt)}for(var _e=new Array(arguments.length),Jt=0;Jt<arguments.length;++Jt)_e[Jt]=arguments[Jt];return ft(_e)}}function wt(){for(;ct.length<=_;)ct.push(st(ct.length));s.exports=gt.apply(void 0,[_t].concat(ct));for(var ft=0;ft<=_;++ft)s.exports[ft]=ct[ft]}wt()}(orientation$1)),orientation$1.exports}var robustPnp,hasRequiredRobustPnp;function requireRobustPnp(){if(hasRequiredRobustPnp)return robustPnp;hasRequiredRobustPnp=1,robustPnp=o;var s=requireOrientation();function o(h,d){for(var g=d[0],_=d[1],b=h.length,j=1,et=b,tt=0,rt=b-1;tt<et;rt=tt++){var at=h[tt],st=h[rt],At=at[1],ht=st[1];if(ht<At){if(ht<_&&_<At){var ct=s(at,st,d);if(ct===0)return 0;j^=0<ct|0}else if(_===At){var _t=h[(tt+1)%b],gt=_t[1];if(At<gt){var ct=s(at,st,d);if(ct===0)return 0;j^=0<ct|0}}}else if(At<ht){if(At<_&&_<ht){var ct=s(at,st,d);if(ct===0)return 0;j^=ct<0|0}else if(_===At){var _t=h[(tt+1)%b],gt=_t[1];if(gt<At){var ct=s(at,st,d);if(ct===0)return 0;j^=ct<0|0}}}else if(_===At){var wt=Math.min(at[0],st[0]),ft=Math.max(at[0],st[0]);if(tt===0){for(;rt>0;){var dt=(rt+b-1)%b,xt=h[dt];if(xt[1]!==_)break;var bt=xt[0];wt=Math.min(wt,bt),ft=Math.max(ft,bt),rt=dt}if(rt===0)return wt<=g&&g<=ft?0:1;et=rt+1}for(var Ct=h[(rt+b-1)%b][1];tt+1<et;){var xt=h[tt+1];if(xt[1]!==_)break;var bt=xt[0];wt=Math.min(wt,bt),ft=Math.max(ft,bt),tt+=1}if(wt<=g&&g<=ft)return 0;var Ut=h[(tt+1)%b][1];g<wt&&Ct<_!=Ut<_&&(j^=1)}}return 2*j-1}return robustPnp}var robustPnpExports=requireRobustPnp();const robustPointInPolygon=getDefaultExportFromCjs(robustPnpExports);function feretDiameters(s={}){const{originalPoints:o=monotoneChainConvexHull.call(this)}=s;if(o.length===0)return{min:0,max:0,minLine:[],maxLine:[],aspectRatio:1};if(o.length===1)return{min:1,max:1,minLine:[o[0],o[0]],maxLine:[o[0],o[0]],aspectRatio:1};const h=new Array(o.length);let d=1/0,g=0,_=[];for(let tt=0;tt<o.length;tt++){let rt=getAngle(o[tt],o[(tt+1)%o.length]);rotate(-rt,o,h);let at=0,st=[];for(let At=0;At<o.length;At++){let ht=Math.abs(h[tt][1]-h[At][1]);ht>at&&(at=ht,st=[],st.push([h[At][0],h[tt][1]],[h[At][0],h[At][1]]))}at<d&&(d=at,g=rt,_=st)}rotate(g,_,_);let b=0,j=[],et=0;for(let tt=0;tt<o.length-1;tt++)for(let rt=tt+1;rt<o.length;rt++){let at=(o[tt][0]-o[rt][0])**2+(o[tt][1]-o[rt][1])**2;at>et&&(et=at,b=Math.sqrt(at),j=[o[tt],o[rt]])}return{min:d,minLine:_,max:b,maxLine:j,aspectRatio:d/b}}function getAngle(s,o){let h=difference(o,s),d=normalize(h),g=Math.acos(d[0]);return d[1]<0?-g:g}class Roi{constructor(o,h){this.map=o,this.id=h,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY,this.meanX=0,this.meanY=0,this.surface=0,this.computed={}}getMask(o={}){const{scale:h=1,kind:d=""}=o;let g;switch(d){case"contour":g=this.contourMask;break;case"box":g=this.boxMask;break;case"filled":g=this.filledMask;break;case"center":g=this.centerMask;break;case"mbr":g=this.mbrFilledMask;break;case"hull":g=this.convexHullFilledMask;break;case"hullContour":g=this.convexHullMask;break;case"mbrContour":g=this.mbrMask;break;case"feret":g=this.feretMask;break;default:g=this.mask}return h<1&&(g=g.resize({factor:h}),g.parent=this.mask.parent,g.position[0]+=this.minX,g.position[1]+=this.minY),g}get mean(){throw new Error("Roi mean not implemented yet")}get center(){return this.computed.center||(this.computed.center=[this.width/2>>0,this.height/2>>0]),this.computed.center}get ratio(){return this.width/this.height}get width(){return this.maxX-this.minX+1}get height(){return this.maxY-this.minY+1}_computExternalIDs(){let o=this.borderIDs,h=this.borderLengths;this.computed.externalIDs=[],this.computed.externalLengths=[];let d=this.internalIDs;for(let g=0;g<o.length;g++)d.includes(o[g])||(this.computed.externalIDs.push(o[g]),this.computed.externalLengths.push(h[g]))}get externalIDs(){return this.computed.externalIDs?this.computed.externalIDs:(this._computExternalIDs(),this.computed.externalIDs)}get externalLengths(){return this.computed.externalLengths?this.computed.externalLengths:(this._computExternalIDs(),this.computed.externalLengths)}_computeBorderIDs(){let o=getBorders(this);this.computed.borderIDs=o.ids,this.computed.borderLengths=o.lengths}get borderIDs(){return this.computed.borderIDs?this.computed.borderIDs:(this._computeBorderIDs(),this.computed.borderIDs)}get borderLengths(){return this.computed.borderLengths?this.computed.borderLengths:(this._computeBorderIDs(),this.computed.borderLengths)}get boxIDs(){return this.computed.boxIDs||(this.computed.boxIDs=getBoxIDs(this)),this.computed.boxIDs}get internalIDs(){return this.computed.internalIDs||(this.computed.internalIDs=getInternalIDs(this)),this.computed.internalIDs}get box(){return this.computed.box||(this.computed.box=getBox(this)),this.computed.box}get external(){return this.computed.external||(this.computed.external=getExternal(this)),this.computed.external}get holesInfo(){return this.computed.holesInfo||(this.computed.holesInfo=getHolesInfo(this)),this.computed.holesInfo}get border(){return this.computed.border||(this.computed.border=getBorder(this)),this.computed.border}get contourMask(){if(!this.computed.contourMask){let o=new Image$1(this.width,this.height,{kind:BINARY,position:[this.minX,this.minY],parent:this.map.parent});for(let h=0;h<this.width;h++)for(let d=0;d<this.height;d++)this.map.data[h+this.minX+(d+this.minY)*this.map.width]===this.id&&(h>0&&h<this.width-1&&d>0&&d<this.height-1?(this.map.data[h-1+this.minX+(d+this.minY)*this.map.width]!==this.id||this.map.data[h+1+this.minX+(d+this.minY)*this.map.width]!==this.id||this.map.data[h+this.minX+(d-1+this.minY)*this.map.width]!==this.id||this.map.data[h+this.minX+(d+1+this.minY)*this.map.width]!==this.id)&&o.setBitXY(h,d):o.setBitXY(h,d));this.computed.contourMask=o}return this.computed.contourMask}get boxMask(){if(!this.computed.boxMask){let o=new Image$1(this.width,this.height,{kind:BINARY,position:[this.minX,this.minY],parent:this.map.parent});for(let h=0;h<this.width;h++)o.setBitXY(h,0),o.setBitXY(h,this.height-1);for(let h=0;h<this.height;h++)o.setBitXY(0,h),o.setBitXY(this.width-1,h);this.computed.boxMask=o}return this.computed.boxMask}get mask(){if(!this.computed.mask){let o=new Image$1(this.width,this.height,{kind:BINARY,position:[this.minX,this.minY],parent:this.map.parent});for(let h=0;h<this.width;h++)for(let d=0;d<this.height;d++)this.map.data[h+this.minX+(d+this.minY)*this.map.width]===this.id&&o.setBitXY(h,d);this.computed.mask=o}return this.computed.mask}get filledMask(){if(!this.computed.filledMask){let o=new Image$1(this.width,this.height,{kind:BINARY,position:[this.minX,this.minY],parent:this.map.parent});for(let h=0;h<this.width;h++)for(let d=0;d<this.height;d++){let g=h+this.minX+(d+this.minY)*this.map.width;this.internalIDs.includes(this.map.data[g])&&o.setBitXY(h,d)}this.computed.filledMask=o}return this.computed.filledMask}get centerMask(){if(!this.computed.centerMask){let o=new Shape({kind:"smallCross"}).getMask();o.parent=this.map.parent,o.position=[this.minX+this.center[0]-1,this.minY+this.center[1]-1],this.computed.centerMask=o}return this.computed.centerMask}get convexHull(){if(!this.computed.convexHull){const o=[];for(let d=0;d<this.width;d++)for(let g=0;g<this.height;g++)this.map.data[d+this.minX+(g+this.minY)*this.map.width]===this.id&&(d>0&&d<this.width-1&&g>0&&g<this.height-1?(this.map.data[d-1+this.minX+(g+this.minY)*this.map.width]!==this.id||this.map.data[d+1+this.minX+(g+this.minY)*this.map.width]!==this.id||this.map.data[d+this.minX+(g-1+this.minY)*this.map.width]!==this.id||this.map.data[d+this.minX+(g+1+this.minY)*this.map.width]!==this.id)&&(o.push([d,g]),o.push([d+1,g]),o.push([d,g+1]),o.push([d+1,g+1])):(o.push([d,g]),o.push([d+1,g]),o.push([d,g+1]),o.push([d+1,g+1])));const h=monotoneChainConvexHull$1(o);this.computed.convexHull={polyline:h,surface:surface(h),perimeter:perimeter(h)}}return this.computed.convexHull}get convexHullMask(){if(!this.computed.convexHullMask){const o=this.convexHull,h=new Image$1(this.width+1,this.height+1,{kind:BINARY,position:[this.minX,this.minY],parent:this.map.parent});h.paintPolyline(o.polyline,{closed:!0}),this.computed.convexHullMask=h}return this.computed.convexHullMask}get convexHullFilledMask(){if(!this.computed.convexHullFilledMask){const o=this.convexHull,h=new Image$1(this.width,this.height,{kind:BINARY,position:[this.minX,this.minY],parent:this.map.parent});for(let d=0;d<this.width;d++)for(let g=0;g<this.height;g++)robustPointInPolygon(o.polyline,[d,g])!==1&&h.setBitXY(d,g);this.computed.convexHullFilledMask=h}return this.computed.convexHullFilledMask}get mbr(){if(!this.computed.mbr){let o=minimalBoundingRectangle({originalPoints:this.convexHull.polyline});if(o.length===0)this.computed.mbr={width:0,height:0,surface:0,perimeter:0,rectangle:o};else{let h=o[0],d=o[1],g=o[2],_=Math.sqrt((h[0]-d[0])**2+(h[1]-d[1])**2),b=Math.sqrt((g[0]-d[0])**2+(g[1]-d[1])**2);this.computed.mbr={width:_,height:b,elongation:1-_/b,aspectRatio:_/b,surface:_*b,perimeter:(_+b)*2,rectangle:o}}}return this.computed.mbr}get filledSurface(){return this.surface+this.holesInfo.surface}get fillRatio(){return this.surface/(this.surface+this.holesInfo.surface)}get feretDiameters(){return this.computed.feretDiameters||(this.computed.feretDiameters=feretDiameters({originalPoints:this.convexHull.polyline})),this.computed.feretDiameters}get eqpc(){return this.computed.eqpc||(this.computed.eqpc=2*Math.sqrt(this.surface/Math.PI)),this.computed.eqpc}get perimeterInfo(){return this.computed.perimeterInfo||(this.computed.perimeterInfo=getPerimeterInfo(this)),this.computed.perimeterInfo}get perimeter(){let o=this.perimeterInfo,h=2-Math.sqrt(2);return o.one+o.two*2+o.three*3+o.four*4-h*(o.two+o.three*2+o.four)}get ped(){return this.computed.ped||(this.computed.ped=this.perimeter/Math.PI),this.computed.ped}get feretMask(){if(!this.computed.feretMask){const o=new Image$1(this.width+1,this.height+1,{kind:BINARY,position:[this.minX,this.minY],parent:this.map.parent});o.paintPolyline(this.feretDiameters.minLine),o.paintPolyline(this.feretDiameters.maxLine),this.computed.feretMask=o}return this.computed.feretMask}get mbrMask(){if(!this.computed.mbrMask){let o=round(this.mbr.rectangle);if(o.length>0){const h=minMax(o),d=new Image$1(h[1][0]-h[0][0]+1,h[1][1]-h[0][1]+1,{kind:BINARY,position:[this.minX+h[0][0],this.minY+h[0][1]],parent:this.map.parent});o=moveToZeroZero(o),d.paintPolyline(o,{closed:!0}),this.computed.mbrMask=d}else this.computed.mbrMask=new Image$1(1,1,{kind:BINARY,position:[this.minX,this.minY],parent:this.map.parent})}return this.computed.mbrMask}get mbrFilledMask(){if(!this.computed.mbrFilledMask){const o=new Image$1(this.width,this.height,{kind:BINARY,position:[this.minX,this.minY],parent:this.map.parent}),h=this.mask.minimalBoundingRectangle();for(let d=0;d<this.width;d++)for(let g=0;g<this.height;g++)robustPointInPolygon(h,[d,g])!==1&&o.setBitXY(d,g);this.computed.mbrFilledMask=o}return this.computed.mbrFilledMask}get points(){if(!this.computed.points){let o=[];for(let h=0;h<this.height;h++)for(let d=0;d<this.width;d++){let g=(h+this.minY)*this.map.width+d+this.minX;this.map.data[g]===this.id&&o.push([d,h])}this.computed.points=o}return this.computed.points}get maxLengthPoints(){if(!this.computed.maxLengthPoints){let o=0,h;const d=this.points;for(let g=0;g<d.length;g++)for(let _=g+1;_<d.length;_++){let b=Math.pow(d[g][0]-d[_][0],2)+Math.pow(d[g][1]-d[_][1],2);b>=o&&(o=b,h=[d[g],d[_]])}this.computed.maxLengthPoints=h}return this.computed.maxLengthPoints}get maxLength(){if(!this.computed.maxLength){let o=Math.sqrt(Math.pow(this.maxLengthPoints[0][0]-this.maxLengthPoints[1][0],2)+Math.pow(this.maxLengthPoints[0][1]-this.maxLengthPoints[1][1],2));this.computed.maxLength=o}return this.computed.maxLength}get roundness(){return 4*this.surface/(Math.PI*this.feretDiameters.max**2)}get sphericity(){return 2*Math.sqrt(this.surface*Math.PI)/this.perimeter}get solidity(){return this.surface/this.convexHull.surface}get angle(){if(!this.computed.angle){let o=this.maxLengthPoints,h=-Math.atan2(o[0][1]-o[1][1],o[0][0]-o[1][0])*180/Math.PI;this.computed.angle=h}return this.computed.angle}toJSON(){return{id:this.id,minX:this.minX,maxX:this.maxX,minY:this.minY,maxY:this.maxY,meanX:this.meanX,meanY:this.meanY,height:this.height,width:this.width,filledSurface:this.filledSurface,surface:this.surface,hullSurface:this.convexHull.surface,hullPerimeter:this.convexHull.perimeter,mbrWidth:this.mbr.width,mbrHeight:this.mbr.height,mbrSurface:this.mbr.surface,eqpc:this.eqpc,ped:this.ped,feretDiameterMin:this.feretDiameters.min,feretDiameterMax:this.feretDiameters.max,aspectRatio:this.feretDiameters.aspectRatio,fillRatio:this.fillRatio,sphericity:this.sphericity,roundness:this.roundness,solidity:this.solidity,perimeter:this.perimeter}}}function getBorders(s){let o=s.map,h=o.data,d=new Set,g=new Map,_=new Set,b=[1,0,-1,0],j=[0,1,0,-1];for(let rt=s.minX;rt<=s.maxX;rt++)for(let at=s.minY;at<=s.maxY;at++){let st=rt+at*o.width;if(h[st]===s.id)for(let At=0;At<4;At++){let ht=rt+b[At],ct=at+j[At];if(ht>=0&&ct>=0&&ht<o.width&&ct<o.height){let _t=ht+ct*o.width;if(h[_t]!==s.id&&!_.has(_t)){_.add(_t),d.add(h[_t]);let gt=g.get(h[_t]);gt?g.set(h[_t],++gt):g.set(h[_t],1)}}}}let et=Array.from(d),tt=et.map(function(rt){return g.get(rt)});return{ids:et,lengths:tt}}function getBoxIDs(s){let o=new Set,h=s.map,d=h.data;for(let g of[0,s.height-1])for(let _=0;_<s.width;_++){let b=(g+s.minY)*h.width+_+s.minX;if(_-s.minX>0&&d[b]===s.id&&d[b-1]!==s.id){let j=d[b-1];o.add(j)}if(h.width-_-s.minX>1&&d[b]===s.id&&d[b+1]!==s.id){let j=d[b+1];o.add(j)}}for(let g of[0,s.width-1])for(let _=0;_<s.height;_++){let b=(_+s.minY)*h.width+g+s.minX;if(_-s.minY>0&&d[b]===s.id&&d[b-h.width]!==s.id){let j=d[b-h.width];o.add(j)}if(h.height-_-s.minY>1&&d[b]===s.id&&d[b+h.width]!==s.id){let j=d[b+h.width];o.add(j)}}return Array.from(o)}function getBox(s){let o=0,h=s.map,d=h.data,g=[0];s.height>1&&(g[1]=s.height-1);for(let b of g)for(let j=1;j<s.width-1;j++){let et=(b+s.minY)*h.width+j+s.minX;d[et]===s.id&&o++}let _=[0];s.width>1&&(_[1]=s.width-1);for(let b of _)for(let j=0;j<s.height;j++){let et=(j+s.minY)*h.width+b+s.minX;d[et]===s.id&&o++}return o}function getBorder(s){let o=0,h=s.map,d=h.data;for(let g=1;g<s.width-1;g++)for(let _=1;_<s.height-1;_++){let b=(_+s.minY)*h.width+g+s.minX;d[b]===s.id&&(d[b-1]!==s.id||d[b+1]!==s.id||d[b-h.width]!==s.id||d[b+h.width]!==s.id)&&o++}return o+s.box}function getPerimeterInfo(s){let o=s.map,h=o.data,d=0,g=0,_=0,b=0;for(let j=0;j<s.width;j++)for(let et=0;et<s.height;et++){let tt=(et+s.minY)*o.width+j+s.minX;if(h[tt]===s.id){let rt=0;switch((j===0||s.externalIDs.includes(h[tt-1]))&&rt++,(j===s.width-1||s.externalIDs.includes(h[tt+1]))&&rt++,(et===0||s.externalIDs.includes(h[tt-o.width]))&&rt++,(et===s.height-1||s.externalIDs.includes(h[tt+o.width]))&&rt++,rt){case 1:d++;break;case 2:g++;break;case 3:_++;break;case 4:b++;break}}}return{one:d,two:g,three:_,four:b}}function getExternal(s){let o=0,h=s.map,d=h.data;for(let g=1;g<s.width-1;g++)for(let _=1;_<s.height-1;_++){let b=(_+s.minY)*h.width+g+s.minX;d[b]===s.id&&(s.externalIDs.includes(d[b-1])||s.externalIDs.includes(d[b+1])||s.externalIDs.includes(d[b-h.width])||s.externalIDs.includes(d[b+h.width]))&&o++}return o+s.box}function getHolesInfo(s){let o=0,h=s.map.width,d=s.map.data;for(let g=1;g<s.width-1;g++)for(let _=1;_<s.height-1;_++){let b=(_+s.minY)*h+g+s.minX;s.internalIDs.includes(d[b])&&d[b]!==s.id&&o++}return{number:s.internalIDs.length-1,surface:o}}function getInternalIDs(s){let o=[s.id],h=s.map,d=h.data;if(s.height>2)for(let _=0;_<s.width;_++){let b=s.minY*h.width+_+s.minX;if(o.includes(d[b])){let j=d[b+h.width];!o.includes(j)&&!s.boxIDs.includes(j)&&o.push(j)}}let g=new Array(4);for(let _=1;_<s.width-1;_++)for(let b=1;b<s.height-1;b++){let j=(b+s.minY)*h.width+_+s.minX;if(o.includes(d[j])){g[0]=d[j-1],g[1]=d[j+1],g[2]=d[j-h.width],g[3]=d[j+h.width];for(let et=0;et<4;et++){let tt=g[et];!o.includes(tt)&&!s.boxIDs.includes(tt)&&o.push(tt)}}}return o}class RoiLayer{constructor(o,h){this.roiMap=o,this.options=h,this.roi=this.createRoi()}createRoi(){let o=this.roiMap.data,h={};this.roiMap.positive=0,this.roiMap.negative=0;for(let j=0;j<o.length;j++)o[j]&&!h[o[j]]&&(h[o[j]]=!0,o[j]>0?this.roiMap.positive++:this.roiMap.negative++);let d={};for(let j in h)d[j]=new Roi(this.roiMap,j*1);let g=this.roiMap.width,_=this.roiMap.height;for(let j=0;j<_;j++)for(let et=0;et<g;et++){let tt=j*g+et;if(o[tt]!==0){const rt=o[tt],at=d[rt];et<at.minX&&(at.minX=et),et>at.maxX&&(at.maxX=et),j<at.minY&&(at.minY=j),j>at.maxY&&(at.maxY=j),at.meanX+=et,at.meanY+=j,at.surface++}}let b=[];for(let j in h)d[j].meanX/=d[j].surface,d[j].meanY/=d[j].surface,b.push(d[j]);return b}}function commonBorderLength(s){let o=s.data,h=[1,0,-1,0],d=[0,1,0,-1],g=s.minMax,_=-g.min,b=g.max+_,j=[];for(let tt=0;tt<=b;tt++)j.push(Object.create(null));for(let tt=0;tt<s.width;tt++)for(let rt=0;rt<s.height;rt++){let at=tt+rt*s.width,st=o[at];if(st!==0){let At=Object.create(null),ht=!1;for(let ct=0;ct<4;ct++){let _t=tt+h[ct],gt=rt+d[ct];if(_t>=0&&gt>=0&&_t<s.width&&gt<s.height){let wt=o[_t+gt*s.width];st!==wt&&(ht=!0,wt!==0&&At[wt]===void 0&&(At[wt]=!0,j[wt+_][st]?j[wt+_][st]++:j[wt+_][st]=1))}else ht=!0}ht&&(j[st+_][st]?j[st+_][st]++:j[st+_][st]=1)}}let et={};for(let tt=0;tt<j.length;tt++)Object.keys(j[tt]).length>0&&(et[tt-_]=j[tt]);return et}function mergeRoi(s={}){const{algorithm:o="commonBorderLength",minCommonBorderLength:h=5,maxCommonBorderLength:d=100,minCommonBorderRatio:g=.3,maxCommonBorderRatio:_=1}=s;let b=function(_t,gt,wt){return _t[wt]>=h&&_t[wt]<=d};typeof o=="function"&&(b=o),o.toLowerCase()==="commonborderratio"&&(b=function(_t,gt,wt){let ft=Math.min(_t[wt]/_t[gt],1);return ft>=g&&ft<=_});const j=this,et=j.commonBorderLength;let tt={},rt={};for(let _t of Object.keys(et)){let gt=et[_t],wt=Object.keys(gt);for(let ft of wt)if(ft!==_t&&b(gt,_t,ft)){let dt=ft;rt[ft]&&(dt=rt[ft]);let xt=_t;if(rt[_t]&&(xt=rt[_t]),Number(dt)!==xt){let bt=Math.min(dt,xt),Ct=Math.max(dt,xt);if(tt[bt]||(tt[bt]={}),tt[bt][Ct]=!0,rt[Ct]=bt,tt[Ct]){for(let Ut of Object.keys(tt[Ct]))tt[bt][Ut]=!0,rt[Ut]=bt;delete tt[Ct]}}}}let at=j.minMax,st=-at.min,At=at.max+st,ht=new Array(At+1).fill(0);for(let _t of Object.keys(rt))ht[Number(_t)+st]=rt[_t];let ct=j.data;for(let _t=0;_t<ct.length;_t++){let gt=ct[_t];if(gt!==0){let wt=ht[gt+st];wt!==0&&(ct[_t]=wt)}}return j.computed={},j}class RoiMap{constructor(o,h){this.parent=o,this.width=o.width,this.height=o.height,this.data=h,this.negative=0,this.positive=0}get total(){return this.negative+this.positive}get minMax(){let o=Number.MAX_SAFE_INTEGER,h=Number.MIN_SAFE_INTEGER;for(let d=0;d<this.data.length;d++)this.data[d]<o&&(o=this.data[d]),this.data[d]>h&&(h=this.data[d]);return{min:o,max:h}}get commonBorderLength(){return commonBorderLength(this)}mergeRoi(o={}){return mergeRoi.call(this,o)}mergeRois(o){const h=o[0],d=o.slice(1);for(let g=0;g<this.data.length;g++)d.includes(this.data[g])&&(this.data[g]=h)}rowsInfo(){let o=new Array(this.height),h=0;for(let d=0;d<this.data.length;d+=this.width){let g={row:h,positivePixel:0,negativePixel:0,zeroPixel:0,positiveRoi:0,negativeRoi:0,medianChange:0};o[h++]=g;let _={},b={},j=[],et=this.data[d],tt=0;for(let rt=d;rt<d+this.width;rt++){let at=this.data[rt];et!==at&&(et=at,j.push(tt),tt=0),tt++,at>0?(g.positivePixel++,_[at]||(_[at]=!0)):at<0?(g.negativePixel++,b[at]||(b[at]=!0)):g.zeroPixel++}j.push(tt),g.medianChange=j.sort((rt,at)=>rt-at)[Math.floor(j.length/2)],g.positiveRoiIDs=Object.keys(_),g.negativeRoiIDs=Object.keys(b),g.positiveRoi=g.positiveRoiIDs.length,g.negativeRoi=g.negativeRoiIDs.length}return o}colsInfo(){let o=new Array(this.width),h=0;for(let d=0;d<this.width;d++){let g={col:h,positivePixel:0,negativePixel:0,zeroPixel:0,positiveRoi:0,negativeRoi:0,medianChange:0};o[h++]=g;let _={},b={},j=[],et=this.data[d],tt=0;for(let rt=d;rt<d+this.data.length;rt+=this.width){let at=this.data[rt];et!==at&&(et=at,j.push(tt),tt=0),tt++,at>0?(g.positivePixel++,_[at]||(_[at]=!0)):at<0?(g.negativePixel++,b[at]||(b[at]=!0)):g.zeroPixel++}j.push(tt),g.medianChange=j.sort((rt,at)=>rt-at)[Math.floor(j.length/2)],g.positiveRoiIDs=Object.keys(_),g.negativeRoiIDs=Object.keys(b),g.positiveRoi=g.positiveRoiIDs.length,g.negativeRoi=g.negativeRoiIDs.length}return o}}function fromMask(s,o={}){const{allowCorners:h=!1}=o,d=65535;let g=new Int16Array(s.size),_=0,b=0,j=new Uint16Array(d+1),et=new Uint16Array(d+1);for(let rt=0;rt<s.width;rt++)for(let at=0;at<s.height;at++)g[at*s.width+rt]===0&&tt(rt,at);function tt(rt,at){let st=0,At=0,ht=s.getBitXY(rt,at),ct=ht?++_:--b;if(_>32767||b<-32768)throw new Error("Too many regions of interest");for(j[0]=rt,et[0]=at;st<=At;){let _t=j[st&d],gt=et[st&d];if(g[gt*s.width+_t]=ct,_t>0&&g[gt*s.width+_t-1]===0&&s.getBitXY(_t-1,gt)===ht&&(At++,j[At&d]=_t-1,et[At&d]=gt,g[gt*s.width+_t-1]=-32768),gt>0&&g[(gt-1)*s.width+_t]===0&&s.getBitXY(_t,gt-1)===ht&&(At++,j[At&d]=_t,et[At&d]=gt-1,g[(gt-1)*s.width+_t]=-32768),_t<s.width-1&&g[gt*s.width+_t+1]===0&&s.getBitXY(_t+1,gt)===ht&&(At++,j[At&d]=_t+1,et[At&d]=gt,g[gt*s.width+_t+1]=-32768),gt<s.height-1&&g[(gt+1)*s.width+_t]===0&&s.getBitXY(_t,gt+1)===ht&&(At++,j[At&d]=_t,et[At&d]=gt+1,g[(gt+1)*s.width+_t]=-32768),h&&(_t>0&&gt>0&&g[(gt-1)*s.width+_t-1]===0&&s.getBitXY(_t-1,gt-1)===ht&&(At++,j[At&d]=_t-1,et[At&d]=gt-1,g[(gt-1)*s.width+_t-1]=-32768),_t<s.width-1&&gt>0&&g[(gt-1)*s.width+_t+1]===0&&s.getBitXY(_t+1,gt-1)===ht&&(At++,j[At&d]=_t+1,et[At&d]=gt-1,g[(gt-1)*s.width+_t+1]=-32768),_t>0&&gt<s.height-1&&g[(gt+1)*s.width+_t-1]===0&&s.getBitXY(_t-1,gt+1)===ht&&(At++,j[At&d]=_t-1,et[At&d]=gt+1,g[(gt+1)*s.width+_t-1]=-32768),_t<s.width-1&&gt<s.height-1&&g[(gt+1)*s.width+_t+1]===0&&s.getBitXY(_t+1,gt+1)===ht&&(At++,j[At&d]=_t+1,et[At&d]=gt+1,g[(gt+1)*s.width+_t+1]=-32768)),st++,At-st>d)throw new Error("analyseMask can not finish, the array to manage internal data is not big enough.You could improve mask by changing MAX_ARRAY")}}return new RoiMap(s,g)}var DisjointSet_1,hasRequiredDisjointSet;function requireDisjointSet(){if(hasRequiredDisjointSet)return DisjointSet_1;hasRequiredDisjointSet=1;class s{constructor(){this.nodes=new Map}add(d){var g=this.nodes.get(d);return g||(g=new o(d),this.nodes.set(d,g)),g}union(d,g){const _=this.find(d),b=this.find(g);_!==b&&(_.rank<b.rank?_.parent=b:_.rank>b.rank?b.parent=_:(b.parent=_,_.rank++))}find(d){for(var g=d;g.parent!==null;)g=g.parent;for(var _=d;_.parent!==null;){var b=_;_=_.parent,b.parent=g}return g}connected(d,g){return this.find(d)===this.find(g)}}DisjointSet_1=s;function o(h){this.value=h,this.parent=null,this.rank=0}return DisjointSet_1}var DisjointSetExports=requireDisjointSet();const DisjointSet=getDefaultExportFromCjs(DisjointSetExports),direction4X=[-1,0],direction4Y=[0,-1],neighbours4=[null,null],direction8X=[-1,-1,0,1],direction8Y=[0,-1,-1,-1],neighbours8=[null,null,null,null];function fromMaskConnectedComponentLabelingAlgorithm(s,o={}){const{allowCorners:h=!1}=o;let d=4;h&&(d=8);let g,_,b;if(d===8)g=direction8X,_=direction8Y,b=neighbours8;else if(d===4)g=direction4X,_=direction4Y,b=neighbours4;else throw new RangeError(`unsupported neighbours count: ${d}`);const j=s.size,et=s.width,tt=s.height,rt=new Array(j),at=new Uint32Array(j),st=new DisjointSet;let At=1;for(let ht=0;ht<tt;ht++)for(let ct=0;ct<et;ct++){const _t=ct+ht*et;if(s.getBit(_t)){let gt=null;for(let wt=0;wt<b.length;wt++){const ft=ct+g[wt],dt=ht+_[wt];if(ft>=0&&dt>=0&&ft<et&&dt<tt){const xt=ft+dt*et;let bt=rt[xt];bt?(b[wt]=bt,(!gt||b[wt].value<gt.value)&&(gt=b[wt])):b[wt]=null}}if(!gt)rt[_t]=st.add(At++);else{rt[_t]=gt;for(let wt=0;wt<b.length;wt++)b[wt]&&b[wt]!==gt&&st.union(gt,b[wt])}}}for(let ht=0;ht<tt;ht++)for(let ct=0;ct<et;ct++){const _t=ct+ht*et;s.getBit(_t)&&(at[_t]=st.find(rt[_t]).value)}return new RoiMap(s,at)}function fromMaxima(s={}){let{allowCorner:o=!0,onlyTop:h=!1,invert:d=!1}=s,g=this;g.checkProcessable("fromMaxima",{components:[1]});const _=1,b=2;let j=0,et=0,tt=new Int16Array(g.size),rt=new Int8Array(g.size),at=new Float32Array(g.size),st=1048575,At=new Uint16Array(st+1),ht=new Uint16Array(st+1),ct=0,_t=0,gt=new Uint16Array(st+1),wt=new Uint16Array(st+1),ft=0,dt=0;for(xt(g);ct<_t;){let Ut=At[ct&st],Qt=ht[ct&st];Ct(Ut,Qt,b),ct++}return new RoiMap(g,tt);function xt({maxima:Ut=!0}){for(let Qt=1;Qt<g.height-1;Qt++)for(let kt=1;kt<g.width-1;kt++){let Nt=kt+Qt*g.width;if(rt[Nt]===0){let Wt=Ut?g.data[Nt]:-g.data[kt+Qt*g.width];if(g.data[Qt*g.width+kt-1]>Wt||g.data[Qt*g.width+kt+1]>Wt||g.data[(Qt-1)*g.width+kt]>Wt||g.data[(Qt+1)*g.width+kt]>Wt||o&&(g.data[(Qt-1)*g.width+kt-1]>Wt||g.data[(Qt-1)*g.width+kt+1]>Wt||g.data[(Qt+1)*g.width+kt-1]>Wt||g.data[(Qt+1)*g.width+kt+1]>Wt))continue;tt[Nt]=Ut?++j:--et,bt(kt,Qt)||(Ut?--j:++et)}}}function bt(Ut,Qt){let kt=_t;ft=0,dt=1,gt[0]=Ut,wt[0]=Qt;let Nt=!0;for(;ft<dt;){let Wt=gt[ft&st],Vt=wt[ft&st];Nt&=Ct(Wt,Vt,_),ft++}if(!Nt){for(let Wt=0;Wt<dt;Wt++){let Vt=gt[Wt&st],qt=wt[Wt&st]*g.width+Vt;tt[qt]=0}_t=kt}return Nt}function Ct(Ut,Qt,kt){let Nt=tt[Qt*g.width+Ut],Wt=g.data[Qt*g.width+Ut];for(let Vt=Qt-1;Vt<=Qt+1;Vt++)for(let qt=Ut-1;qt<=Ut+1;qt++){let _e=Vt*g.width+qt;if(rt[_e]===0)switch(rt[_e]=1,at[_e]=g.data[_e]-Wt,kt){case _:if(at[_e]===0){if(qt===0||Vt===0||qt===g.width-1||Vt===g.height-1)return!1;tt[_e]=Nt,gt[dt&st]=qt,wt[dt&st]=Vt,dt++}else{if(at[_e]>0)return!1;h||(tt[_e]=Nt,At[_t&st]=qt,ht[_t&st]=Vt,_t++)}break;case b:at[_e]<=0&&(tt[_e]=Nt,At[_t&st]=qt,ht[_t&st]=Vt,_t++);break;default:throw new Error("unreachable")}}return!0}}function fromPoints(s,o={}){let h=new Shape(o),d=new Int16Array(this.size),g=0,_=h.getPoints();for(let b=0;b<s.length;b++){g++;let j=s[b][0],et=s[b][1];for(let tt=0;tt<_.length;tt++){let rt=_[tt][0],at=_[tt][1];j+rt>=0&&et+at>=0&&j+rt<this.width&&et+at<this.height&&(d[j+rt+(et+at)*this.width]=g)}}return new RoiMap(this,d)}function commonjsRequire(s){throw new Error('Could not dynamically require "'+s+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var priorityQueue={exports:{}},hasRequiredPriorityQueue;function requirePriorityQueue(){return hasRequiredPriorityQueue||(hasRequiredPriorityQueue=1,function(s,o){(function(h){s.exports=h()})(function(){return function h(d,g,_){function b(tt,rt){if(!g[tt]){if(!d[tt]){var at=typeof commonjsRequire=="function"&&commonjsRequire;if(!rt&&at)return at(tt,!0);if(j)return j(tt,!0);var st=new Error("Cannot find module '"+tt+"'");throw st.code="MODULE_NOT_FOUND",st}var At=g[tt]={exports:{}};d[tt][0].call(At.exports,function(ht){var ct=d[tt][1][ht];return b(ct||ht)},At,At.exports,h,d,g,_)}return g[tt].exports}for(var j=typeof commonjsRequire=="function"&&commonjsRequire,et=0;et<_.length;et++)b(_[et]);return b}({1:[function(h,d,g){var _,b,j,et,tt,rt=function(st,At){for(var ht in At)at.call(At,ht)&&(st[ht]=At[ht]);function ct(){this.constructor=st}return ct.prototype=At.prototype,st.prototype=new ct,st.__super__=At.prototype,st},at={}.hasOwnProperty;_=h("./PriorityQueue/AbstractPriorityQueue"),b=h("./PriorityQueue/ArrayStrategy"),et=h("./PriorityQueue/BinaryHeapStrategy"),j=h("./PriorityQueue/BHeapStrategy"),tt=function(st){rt(At,st);function At(ht){ht||(ht={}),ht.strategy||(ht.strategy=et),ht.comparator||(ht.comparator=function(ct,_t){return(ct||0)-(_t||0)}),At.__super__.constructor.call(this,ht)}return At}(_),tt.ArrayStrategy=b,tt.BinaryHeapStrategy=et,tt.BHeapStrategy=j,d.exports=tt},{"./PriorityQueue/AbstractPriorityQueue":2,"./PriorityQueue/ArrayStrategy":3,"./PriorityQueue/BHeapStrategy":4,"./PriorityQueue/BinaryHeapStrategy":5}],2:[function(h,d,g){d.exports=function(){function _(b){var j;if((b!=null?b.strategy:void 0)==null)throw"Must pass options.strategy, a strategy";if((b!=null?b.comparator:void 0)==null)throw"Must pass options.comparator, a comparator";this.priv=new b.strategy(b),this.length=(b!=null&&(j=b.initialValues)!=null?j.length:void 0)||0}return _.prototype.queue=function(b){this.length++,this.priv.queue(b)},_.prototype.dequeue=function(b){if(!this.length)throw"Empty queue";return this.length--,this.priv.dequeue()},_.prototype.peek=function(b){if(!this.length)throw"Empty queue";return this.priv.peek()},_.prototype.clear=function(){return this.length=0,this.priv.clear()},_}()},{}],3:[function(h,d,g){var _;_=function(b,j,et){var tt,rt,at;for(rt=0,tt=b.length;rt<tt;)at=rt+tt>>>1,et(b[at],j)>=0?rt=at+1:tt=at;return rt},d.exports=function(){function b(j){var et;this.options=j,this.comparator=this.options.comparator,this.data=((et=this.options.initialValues)!=null?et.slice(0):void 0)||[],this.data.sort(this.comparator).reverse()}return b.prototype.queue=function(j){var et;et=_(this.data,j,this.comparator),this.data.splice(et,0,j)},b.prototype.dequeue=function(){return this.data.pop()},b.prototype.peek=function(){return this.data[this.data.length-1]},b.prototype.clear=function(){this.data.length=0},b}()},{}],4:[function(h,d,g){d.exports=function(){function _(b){var j,et,tt,rt,at,st,At,ht;for(this.comparator=(b!=null?b.comparator:void 0)||function(ct,_t){return ct-_t},this.pageSize=(b!=null?b.pageSize:void 0)||512,this.length=0,At=0;1<<At<this.pageSize;)At+=1;if(1<<At!==this.pageSize)throw"pageSize must be a power of two";for(this._shift=At,this._emptyMemoryPageTemplate=j=[],et=0,at=this.pageSize;0<=at?et<at:et>at;0<=at?++et:--et)j.push(null);if(this._memory=[],this._mask=this.pageSize-1,b.initialValues)for(st=b.initialValues,tt=0,rt=st.length;tt<rt;tt++)ht=st[tt],this.queue(ht)}return _.prototype.queue=function(b){this.length+=1,this._write(this.length,b),this._bubbleUp(this.length,b)},_.prototype.dequeue=function(){var b,j;return b=this._read(1),j=this._read(this.length),this.length-=1,this.length>0&&(this._write(1,j),this._bubbleDown(1,j)),b},_.prototype.peek=function(){return this._read(1)},_.prototype.clear=function(){this.length=0,this._memory.length=0},_.prototype._write=function(b,j){var et;for(et=b>>this._shift;et>=this._memory.length;)this._memory.push(this._emptyMemoryPageTemplate.slice(0));return this._memory[et][b&this._mask]=j},_.prototype._read=function(b){return this._memory[b>>this._shift][b&this._mask]},_.prototype._bubbleUp=function(b,j){var et,tt,rt,at;for(et=this.comparator;b>1&&(tt=b&this._mask,b<this.pageSize||tt>3?rt=b&~this._mask|tt>>1:tt<2?(rt=b-this.pageSize>>this._shift,rt+=rt&~(this._mask>>1),rt|=this.pageSize>>1):rt=b-2,at=this._read(rt),!(et(at,j)<0));)this._write(rt,j),this._write(b,at),b=rt},_.prototype._bubbleDown=function(b,j){var et,tt,rt,at,st;for(st=this.comparator;b<this.length;)if(b>this._mask&&!(b&this._mask-1)?et=tt=b+2:b&this.pageSize>>1?(et=(b&~this._mask)>>1,et|=b&this._mask>>1,et=et+1<<this._shift,tt=et+1):(et=b+(b&this._mask),tt=et+1),et!==tt&&tt<=this.length)if(rt=this._read(et),at=this._read(tt),st(rt,j)<0&&st(rt,at)<=0)this._write(et,j),this._write(b,rt),b=et;else if(st(at,j)<0)this._write(tt,j),this._write(b,at),b=tt;else break;else if(et<=this.length)if(rt=this._read(et),st(rt,j)<0)this._write(et,j),this._write(b,rt),b=et;else break;else break},_}()},{}],5:[function(h,d,g){d.exports=function(){function _(b){var j;this.comparator=(b!=null?b.comparator:void 0)||function(et,tt){return et-tt},this.length=0,this.data=((j=b.initialValues)!=null?j.slice(0):void 0)||[],this._heapify()}return _.prototype._heapify=function(){var b,j,et;if(this.data.length>0)for(b=j=1,et=this.data.length;1<=et?j<et:j>et;b=1<=et?++j:--j)this._bubbleUp(b)},_.prototype.queue=function(b){this.data.push(b),this._bubbleUp(this.data.length-1)},_.prototype.dequeue=function(){var b,j;return j=this.data[0],b=this.data.pop(),this.data.length>0&&(this.data[0]=b,this._bubbleDown(0)),j},_.prototype.peek=function(){return this.data[0]},_.prototype.clear=function(){this.length=0,this.data.length=0},_.prototype._bubbleUp=function(b){for(var j,et;b>0&&(j=b-1>>>1,this.comparator(this.data[b],this.data[j])<0);)et=this.data[j],this.data[j]=this.data[b],this.data[b]=et,b=j},_.prototype._bubbleDown=function(b){var j,et,tt,rt,at;for(j=this.data.length-1;et=(b<<1)+1,rt=et+1,tt=b,et<=j&&this.comparator(this.data[et],this.data[tt])<0&&(tt=et),rt<=j&&this.comparator(this.data[rt],this.data[tt])<0&&(tt=rt),tt!==b;)at=this.data[tt],this.data[tt]=this.data[b],this.data[b]=at,b=tt},_}()},{}]},{},[1])(1)})}(priorityQueue)),priorityQueue.exports}var priorityQueueExports=requirePriorityQueue();const PriorityQueue=getDefaultExportFromCjs(priorityQueueExports),dxs=[1,0,-1,0,1,1,-1,-1],dys=[0,1,0,-1,1,-1,1,-1];function fromWaterShed(s={}){let{points:o,mask:h,image:d,fillMaxValue:g=this.maxValue,invert:_=!1}=s,b=d||this;b.checkProcessable("fromWaterShed",{bitDepth:[8,16],components:1}),_=!_,o||(o=b.getLocalMaxima({invert:_,mask:h}));let j=_?0:1,et=new Int16Array(b.size),tt=b.width,rt=b.height,at=new PriorityQueue({comparator:(st,At)=>st[2]-At[2],strategy:PriorityQueue.BinaryHeapStrategy});for(let st=0;st<o.length;st++){let At=o[st][0]+o[st][1]*tt;et[At]=st+1;let ht=b.data[At];(_&&ht<=g||!_&&ht>=g)&&at.queue([o[st][0],o[st][1],ht])}for(;at.length>0;){let st=at.dequeue(),At=st[0]+st[1]*tt;for(let ht=0;ht<4;ht++){let ct=st[0]+dxs[ht],_t=st[1]+dys[ht];if(ct>=0&&_t>=0&&ct<tt&&_t<rt){let gt=ct+_t*tt;if(!h||h.getBit(gt)===j){let wt=b.data[gt];(_&&wt<=g||!_&&wt>=g)&&et[gt]===0&&(et[gt]=et[At],at.queue([st[0]+dxs[ht],st[1]+dys[ht],wt]))}}}}return new RoiMap(b,et)}class RoiManager{constructor(o,h={}){this._image=o,this._options=h,this._options.label||(this._options.label="default"),this._layers={},this._painted=null}fromMaxima(o={}){let h=Object.assign({},this._options,o),d=fromMaxima.call(this._image,o);this._layers[h.label]=new RoiLayer(d,h)}fromPoints(o,h={}){let d=Object.assign({},this._options,h),g=fromPoints.call(this._image,o,h);return this._layers[d.label]=new RoiLayer(g,d),this}putMap(o,h={}){let d=new RoiMap(this._image,o),g=Object.assign({},this._options,h);return this._layers[g.label]=new RoiLayer(d,g),this}fromWaterShed(o={}){let h=Object.assign({},this._options,o),d=fromWaterShed.call(this._image,o);this._layers[h.label]=new RoiLayer(d,h)}fromMask(o,h={}){let d=Object.assign({},this._options,h),g=fromMask.call(this._image,o,h);return this._layers[d.label]=new RoiLayer(g,d),this}fromMaskConnectedComponentLabelingAlgorithm(o,h={}){let d=Object.assign({},this._options,h),g=fromMaskConnectedComponentLabelingAlgorithm.call(this._image,o,h);return this._layers[d.label]=new RoiLayer(g,d),this}getMap(o={}){let h=Object.assign({},this._options,o);return this._assertLayerWithLabel(h.label),this._layers[h.label].roiMap}rowsInfo(o={}){return this.getMap(o).rowsInfo()}colsInfo(o={}){return this.getMap(o).rowsInfo()}getRoiIds(o={}){let h=this.getRois(o);if(h){let d=new Array(h.length);for(let g=0;g<h.length;g++)d[g]=h[g].id;return d}throw new Error("ROIs not found")}getRois(o={}){let{label:h=this._options.label,positive:d=!0,negative:g=!0,minSurface:_=0,maxSurface:b=Number.POSITIVE_INFINITY,minWidth:j=0,maxWidth:et=Number.POSITIVE_INFINITY,minHeight:tt=0,maxHeight:rt=Number.POSITIVE_INFINITY,minRatio:at=0,maxRatio:st=Number.POSITIVE_INFINITY}=o;if(!this._layers[h])throw new Error(`this Roi layer (${h}) does not exist`);const At=this._layers[h].roi,ht=[];for(const ct of At)(ct.id<0&&g||ct.id>0&&d)&&ct.surface>=_&&ct.surface<=b&&ct.width>=j&&ct.width<=et&&ct.height>=tt&&ct.height<=rt&&ct.ratio>=at&&ct.ratio<=st&&ht.push(ct);return ht}getRoi(o,h={}){const{label:d=this._options.label}=h;if(!this._layers[d])throw new Error(`this Roi layer (${d}) does not exist`);const g=this._layers[d].roi.find(_=>_.id===o);if(!g)throw new Error(`found no Roi with id ${o}`);return g}getMasks(o={}){let h=this.getRois(o),d=new Array(h.length);for(let g=0;g<h.length;g++)d[g]=h[g].getMask(o);return d}getAnalysisMasks(o={}){const{analysisProperty:h}=o;let d=`${h}Mask`,g=this.getRois(o);return g.length===0||!g[0][d]?[]:g.map(_=>_[d])}getData(o={}){let h=Object.assign({},this._options,o);return this._assertLayerWithLabel(h.label),this._layers[h.label].roiMap.data}paint(o={}){let{labelProperty:h,analysisProperty:d}=o;this._painted||(this._painted=this._image.rgba8());let g=this.getMasks(o);if(h){const _=this.getRois(o);o.labels=_.map(tt=>deepValue(tt,h));const b=Math.max(...o.labels);let j=!1,et=!1;if(h.includes("surface")?j=!0:/(?:perimeter|min|max|external|width|height|length)/.test(h)&&(et=!0),isFinite(b)){let tt="";if(o.unit!=="pixel"&&o.pixelSize&&(et||j)){tt=j?`${o.unit}^2`:o.unit;let rt=j?"m^2":"m",at=j?o.pixelSize**2:o.pixelSize;const st=Qty.swiftConverter(rt,tt);o.labels=o.labels.map(At=>st(at*At))}b>50?o.labels=o.labels.map(rt=>Math.round(rt)+tt):b>10?o.labels=o.labels.map(rt=>rt.toFixed(1)+tt):o.labels=o.labels.map(rt=>rt.toFixed(2)+tt)}o.labelsPosition=_.map(tt=>[tt.meanX,tt.meanY])}if(this._painted.paintMasks(g,o),d){let _=this.getAnalysisMasks(o);this._painted.paintMasks(_,{color:o.analysisColor,alpha:o.analysisAlpha})}return this._painted}getMask(o={}){let h=new Image$1(this._image.width,this._image.height,{kind:"BINARY"}),d=this.getMasks(o);for(let g=0;g<d.length;g++){let _=d[g];for(let b=0;b<_.width;b++)for(let j=0;j<_.height;j++)_.getBitXY(b,j)&&h.setBitXY(b+_.position[0],j+_.position[1])}return h}resetPainted(o={}){const{image:h}=o;h?this._painted=this.image.rgba8():this._painted=this._image.rgba8()}mergeRoi(o={}){const h=this.getMap(o);return h.mergeRoi(o),this.putMap(h.data,o),this}mergeRois(o,h={}){if(!Array.isArray(o)||o.some(g=>!Number.isInteger(g)))throw new Error("Roi ids must be an array of integers");if(o.length<2)throw new Error("Roi ids must have at least two elements");if(new Set(o).size!==o.length)throw new Error("Roi ids must be all different");o.forEach(g=>this.getRoi(g));const d=this.getMap(h);return d.mergeRois(o),this.putMap(d.data,h),this}findCorrespondingRoi(o,h={}){let d=this.getRois(h),g=[];for(let _=0;_<d.length;_++){let b=d[_],j=b.minX,et=b.minY,tt=b.points,rt=Math.sign(b.id),at=correspondingRoisInformation(j,et,tt,o,rt);g.push(at)}return g}_assertLayerWithLabel(o){if(!this._layers[o])throw new Error(`no layer with label ${o}`)}}function correspondingRoisInformation(s,o,h,d,g){let _={id:[],surface:[],roiSurfaceCovered:[],same:0,opposite:0,total:0};for(let b=0;b<h.length;b++){let j=h[b],et=j[0],tt=j[1],rt=et+s+(tt+o)*d.width,at=d.data[rt];(at>0||at<0)&&(_.id.includes(at)?_.surface[_.id.indexOf(at)]+=1:(_.id.push(at),_.surface.push(1)))}for(let b=0;b<_.id.length;b++)Math.sign(_.id[b])===g?_.same+=_.surface[b]:_.opposite+=_.surface[b],_.roiSurfaceCovered[b]=_.surface[b]/h.length;return _.total=_.opposite+_.same,_}const objectToString=Object.prototype.toString;let Image$1=class NA{constructor(o,h,d,g){if(arguments.length===1?(g=o,{width:o,height:h,data:d}=g):d&&!d.length&&(g=d,{data:d}=g),o===void 0&&(o=1),h===void 0&&(h=1),g===void 0&&(g={}),typeof g!="object"||g===null)throw new TypeError("options must be an object");if(!Number.isInteger(o)||o<=0)throw new RangeError("width must be a positive integer");if(!Number.isInteger(h)||h<=0)throw new RangeError("height must be a positive integer");const{kind:_=RGBA}=g;if(typeof _!="string")throw new TypeError("kind must be a string");const b=getKind(_),j=Object.assign({},g);for(const ct in b)j[ct]===void 0&&(j[ct]=b[ct]);verifyKindDefinition(j);const{components:et,bitDepth:tt,colorModel:rt}=j,at=j.alpha+0,st=o*h,At=et+at,ht=tt===32?Number.MAX_VALUE:2**tt-1;if(d===void 0)d=createPixelArray(st,et,at,At,tt,ht);else{const ct=getTheoreticalPixelArraySize(st,At,tt);if(d.length!==ct)throw new RangeError(`incorrect data size: ${d.length}. Should be ${ct}`)}this.width=o,this.height=h,this.data=d,this.size=st,this.components=et,this.alpha=at,this.bitDepth=tt,this.maxValue=ht,this.colorModel=rt,this.channels=At,this.meta=g.meta||{},Object.defineProperty(this,"parent",{enumerable:!1,writable:!0,configurable:!0,value:g.parent||null}),this.position=g.position||[0,0],this.computed=null,this.sizes=[this.width,this.height],this.multiplierX=this.channels,this.multiplierY=this.channels*this.width,this.isClamped=this.bitDepth<32,this.borderSizes=[0,0]}get[Symbol.toStringTag](){return"IJSImage"}static isImage(o){return objectToString.call(o)==="[object IJSImage]"}static fromCanvas(o){const h=o.getContext("2d").getImageData(0,0,o.width,o.height);return new NA(h.width,h.height,h.data)}static createFrom(o,h){const d=getImageParameters(o);return Object.assign(d,{parent:o,position:[0,0]},h),new NA(d)}getRoiManager(o){return new RoiManager(this,o)}clone(){const o=this.data.slice();return new NA(this.width,this.height,o,this)}apply(o){for(let h=0;h<this.height;h++)for(let d=0;d<this.width;d++){let g=(h*this.width+d)*this.channels;o.call(this,g)}}};setValueMethods(Image$1);setBitMethods(Image$1);setExportMethods(Image$1);Image$1.prototype.checkProcessable=checkProcessable;Image$1.prototype.getRGBAData=getRGBAData;Image$1.load=load;Image$1.extendMethod=extendMethod;Image$1.extendProperty=extendProperty;extend$1(Image$1);var workerTemplate={},hasRequiredWorkerTemplate;function requireWorkerTemplate(){if(hasRequiredWorkerTemplate)return workerTemplate;hasRequiredWorkerTemplate=1;var s=function(){self.window=self;function h(){this._listeners={}}h.prototype.on=function(g,_){if(this._listeners[g])throw new RangeError("there is already a listener for "+g);if(typeof _!="function")throw new TypeError("callback argument must be a function");this._listeners[g]=_},h.prototype._send=function(g,_,b){b===void 0?b=[]:Array.isArray(b)||(b=[b]),self.postMessage({id:g,data:_},b)},h.prototype._trigger=function(g,_){if(!this._listeners[g])throw new Error("event "+g+" is not defined");this._listeners[g].apply(null,_)};var d=new h;self.onmessage=function(g){switch(g.data.action){case"exec":g.data.args.unshift(function(_,b){d._send(g.data.id,_,b)}),d._trigger(g.data.event,g.data.args);break;case"ping":d._send(g.data.id,"pong");break;default:throw new Error("unexpected action: "+g.data.action)}}},o=s.toString().split('"CODE";');return workerTemplate.newWorkerURL=function(h,d){var g=new Blob(["(",o[0],"importScripts.apply(self, "+JSON.stringify(d)+`);
`,"(",h,")();",o[1],")();"],{type:"application/javascript"});return URL.createObjectURL(g)},workerTemplate}var src,hasRequiredSrc;function requireSrc(){if(hasRequiredSrc)return src;hasRequiredSrc=1;var s=requireWorkerTemplate(),o=navigator.hardwareConcurrency||1;function h(d,g){if(typeof d!="string"&&typeof d!="function")throw new TypeError("func argument must be a function");if(g===void 0&&(g={}),typeof g!="object"||g===null)throw new TypeError("options argument must be an object");this._workerCode=d.toString(),g.maxWorkers===void 0||g.maxWorkers==="auto"?this._numWorkers=Math.min(o-1,1):g.maxWorkers>0?this._numWorkers=Math.min(g.maxWorkers,o):this._numWorkers=o,this._workers=new Map,this._timeout=g.timeout||0,this._terminateOnError=!!g.terminateOnError;var _=g.deps;typeof _=="string"&&(_=[_]),Array.isArray(_)||(_=void 0),this._id=0,this._terminated=!1,this._working=0,this._waiting=[],this._init(_)}return h.prototype._init=function(d){for(var g=s.newWorkerURL(this._workerCode,d),_=0;_<this._numWorkers;_++){var b=new Worker(g);b.onmessage=this._onmessage.bind(this,b),b.onerror=this._onerror.bind(this,b),b.running=!1,b.id=_,this._workers.set(b,null)}URL.revokeObjectURL(g)},h.prototype._onerror=function(d,g){if(!this._terminated){this._working--,d.running=!1;var _=this._workers.get(d);_&&_[1](g.message),this._workers.set(d,null),this._terminateOnError?this.terminate():this._exec()}},h.prototype._onmessage=function(d,g){if(!this._terminated){this._working--,d.running=!1;var _=this._workers.get(d);_&&_[0](g.data.data),this._workers.set(d,null),this._exec()}},h.prototype._exec=function(){for(var d of this._workers.keys()){if(this._working===this._numWorkers||this._waiting.length===0)return;if(!d.running)for(var g=0;g<this._waiting.length;g++){var _=this._waiting[g];if(!(typeof _[4]=="number"&&_[4]!==d.id)){this._waiting.splice(g,1),d.postMessage({action:"exec",event:_[0],args:_[1]},_[2]),d.running=!0,d.time=Date.now(),this._workers.set(d,_[3]),this._working++;break}}}},h.prototype.terminate=function(){if(!this._terminated){for(var d of this._workers)d[0].terminate(),d[1]&&d[1][1](new Error("Terminated"));this._workers.clear(),this._waiting=[],this._working=0,this._terminated=!0}},h.prototype.postAll=function(d,g){if(this._terminated)throw new Error("Cannot post (terminated)");var _=[];for(var b of this._workers.keys())_.push(this.post(d,g,[],b.id));return Promise.all(_)},h.prototype.post=function(d,g,_,b){g===void 0&&(g=[]),_===void 0&&(_=[]),Array.isArray(g)||(g=[g]),Array.isArray(_)||(_=[_]);var j=this;return new Promise(function(et,tt){if(j._terminated)throw new Error("Cannot post (terminated)");j._waiting.push([d,g,_,[et,tt],b]),j._exec()})},src=h,src}var srcExports=requireSrc();const WorkerManager=getDefaultExportFromCjs(srcExports),defaultOptions={regression:{kernelType:"polynomial",kernelOptions:{degree:2,constant:1}},threshold:.02,roi:{minSurface:100,positive:!1},sampling:20,include:[]};function run(s,o,h){o=Object.assign({},defaultOptions,o);const d=this.manager;return Array.isArray(s)?Promise.all(s.map(function(g){const _=runOnce(d,g,o);return typeof h=="function"&&_.then(h),_})):runOnce(d,s,o)}function runOnce(s,o,h){return s.post("data",[o,h]).then(function(d){for(let g in d)d[g]=new Image$1(d[g]);return d})}function work(){worker.on("data",function(s,o,h){o=new IJS(o);const d={},g=[],_=o.grey(),b=_.sobelFilter();At("sobel",b);const j=b.level().mask({threshold:h.threshold});At("mask",j);const et=b.getRoiManager();et.fromMask(j);const tt=et.getMask(h.roi);At("realMask",tt);const rt=_.getPixelsGrid({sampling:h.sampling,mask:tt}),at=o.getBackground(rt.xyS,rt.zS,h.regression);At("background",at);const st=o.subtract(at);d.result=st,g.push(st.data.buffer),s(d,g);function At(ht,ct){h.include.includes(ht)&&(d[ht]=ct,g.push(ct.data.buffer))}})}const background={run,work};function extend(s){s.extendMethod("background",background)}let Worker$1=class Zs{constructor(){this._url=null,this._deps=[null]}checkUrl(){if(this._url===null)throw new Error("image worker must be initialized with an URL")}get url(){return this._url}set url(o){if(typeof o!="string")throw new TypeError("worker URL must be a string");this._url=o,this._deps[0]=o}static extendMethod(o,h){let d,g,_={};function b(...j){return d||(this.checkUrl(),g=this.url,d=new WorkerManager(h.work,{deps:g}),_.manager=d),h.run.call(_,...j)}b.reset=function(){d&&(d.terminate(),d=new WorkerManager(h.work,{deps:g}),_.manager=d)},Zs.prototype[o]=b}};extend(Worker$1);var lz4$1={},xxh32={},util={},hasRequiredUtil;function requireUtil(){return hasRequiredUtil||(hasRequiredUtil=1,util.hashU32=function(s){return s=s|0,s=s+2127912214+(s<<12)|0,s=s^-949894596^s>>>19,s=s+374761393+(s<<5)|0,s=s+-744332180^s<<9,s=s+-42973499+(s<<3)|0,s^-1252372727^s>>>16|0},util.readU64=function(s,o){var h=0;return h|=s[o++]<<0,h|=s[o++]<<8,h|=s[o++]<<16,h|=s[o++]<<24,h|=s[o++]<<32,h|=s[o++]<<40,h|=s[o++]<<48,h|=s[o++]<<56,h},util.readU32=function(s,o){var h=0;return h|=s[o++]<<0,h|=s[o++]<<8,h|=s[o++]<<16,h|=s[o++]<<24,h},util.writeU32=function(s,o,h){s[o++]=h>>0&255,s[o++]=h>>8&255,s[o++]=h>>16&255,s[o++]=h>>24&255},util.imul=function(s,o){var h=s>>>16,d=s&65535,g=o>>>16,_=o&65535;return d*_+(h*_+d*g<<16)|0}),util}var hasRequiredXxh32;function requireXxh32(){if(hasRequiredXxh32)return xxh32;hasRequiredXxh32=1;var s=requireUtil(),o=2654435761,h=2246822519,d=3266489917,g=668265263,_=374761393;function b(ht,ct){return ht=ht|0,ct=ct|0,ht>>>(32-ct|0)|ht<<ct|0}function j(ht,ct,_t){return ht=ht|0,ct=ct|0,_t=_t|0,s.imul(ht>>>(32-ct|0)|ht<<ct,_t)|0}function et(ht,ct){return ht=ht|0,ct=ct|0,ht>>>ct^ht|0}function tt(ht,ct,_t,gt,wt){return j(s.imul(ct,_t)+ht,gt,wt)}function rt(ht,ct,_t){return j(ht+s.imul(ct[_t],_),11,o)}function at(ht,ct,_t){return tt(ht,s.readU32(ct,_t),d,17,g)}function st(ht,ct,_t){return[tt(ht[0],s.readU32(ct,_t+0),h,13,o),tt(ht[1],s.readU32(ct,_t+4),h,13,o),tt(ht[2],s.readU32(ct,_t+8),h,13,o),tt(ht[3],s.readU32(ct,_t+12),h,13,o)]}function At(ht,ct,_t,gt){var wt,ft;if(ft=gt,gt>=16){for(wt=[ht+o+h,ht+h,ht,ht-o];gt>=16;)wt=st(wt,ct,_t),_t+=16,gt-=16;wt=b(wt[0],1)+b(wt[1],7)+b(wt[2],12)+b(wt[3],18)+ft}else wt=ht+_+gt>>>0;for(;gt>=4;)wt=at(wt,ct,_t),_t+=4,gt-=4;for(;gt>0;)wt=rt(wt,ct,_t),_t++,gt--;return wt=et(s.imul(et(s.imul(et(wt,15),h),13),d),16),wt>>>0}return xxh32.hash=At,xxh32}var hasRequiredLz4;function requireLz4(){return hasRequiredLz4||(hasRequiredLz4=1,function(s){var o=requireXxh32(),h=requireUtil(),d=4,g=13,_=5,b=6,j=65536,et=4,tt=(1<<et)-1,rt=4,at=(1<<rt)-1,st=Nt(5<<20),At=Qt(),ht=407708164,ct=4,_t=8,gt=16,wt=64,ft=192,dt=2147483648,xt=7,bt=4,Ct=7,Ut={4:65536,5:262144,6:1048576,7:4194304};function Qt(){try{return new Uint32Array(j)}catch{for(var Vt=new Array(j),qt=0;qt<j;qt++)Vt[qt]=0;return Vt}}function kt(Vt){for(var qt=0;qt<j;qt++)At[qt]=0}function Nt(Vt){try{return new Uint8Array(Vt)}catch{for(var qt=new Array(Vt),_e=0;_e<Vt;_e++)qt[_e]=0;return qt}}function Wt(Vt,qt,_e){if(typeof Vt.buffer!==void 0){if(Uint8Array.prototype.slice)return Vt.slice(qt,_e);var Jt=Vt.length;qt=qt|0,qt=qt<0?Math.max(Jt+qt,0):Math.min(qt,Jt),_e=_e===void 0?Jt:_e|0,_e=_e<0?Math.max(Jt+_e,0):Math.min(_e,Jt);for(var lr=new Uint8Array(_e-qt),jt=qt,ur=0;jt<_e;)lr[ur++]=Vt[jt++];return lr}else return Vt.slice(qt,_e)}s.compressBound=function(Vt){return Vt+Vt/255+16|0},s.decompressBound=function(Vt){var qt=0;if(h.readU32(Vt,qt)!==ht)throw new Error("invalid magic number");qt+=4;var _e=Vt[qt++];if((_e&ft)!==wt)throw new Error("incompatible descriptor version "+(_e&ft));var Jt=(_e&gt)!==0,lr=(_e&_t)!==0,jt=Vt[qt++]>>bt&Ct;if(Ut[jt]===void 0)throw new Error("invalid block size "+jt);var ur=Ut[jt];if(lr)return h.readU64(Vt,qt);qt++;for(var Ar=0;;){var mr=h.readU32(Vt,qt);if(qt+=4,mr&dt?(mr&=2147483647,Ar+=mr):Ar+=ur,mr===0)return Ar;Jt&&(qt+=4),qt+=mr}},s.makeBuffer=Nt,s.decompressBlock=function(Vt,qt,_e,Jt,lr){var jt,ur,Ar,mr,dr;for(Ar=_e+Jt;_e<Ar;){var Nr=Vt[_e++],Ur=Nr>>4;if(Ur>0){if(Ur===15)for(;Ur+=Vt[_e],Vt[_e++]===255;);for(mr=_e+Ur;_e<mr;)qt[lr++]=Vt[_e++]}if(_e>=Ar)break;if(jt=Nr&15,ur=Vt[_e++]|Vt[_e++]<<8,jt===15)for(;jt+=Vt[_e],Vt[_e++]===255;);for(jt+=d,dr=lr-ur,mr=dr+jt;dr<mr;)qt[lr++]=qt[dr++]|0}return lr},s.compressBlock=function(Vt,qt,_e,Jt,lr){var jt,ur,Ar,mr,dr,Nr,Ur,nr,hr;if(Ur=0,nr=Jt+_e,ur=_e,Jt>=g)for(var Dr=(1<<b)+3;_e+d<nr-_;){var Qr=h.readU32(Vt,_e),vr=h.hashU32(Qr)>>>0;if(vr=(vr>>16^vr)>>>0&65535,jt=lr[vr]-1,lr[vr]=_e+1,jt<0||_e-jt>>>16>0||h.readU32(Vt,jt)!==Qr){dr=Dr++>>b,_e+=dr;continue}for(Dr=(1<<b)+3,Nr=_e-ur,mr=_e-jt,_e+=d,jt+=d,Ar=_e;_e<nr-_&&Vt[_e]===Vt[jt];)_e++,jt++;Ar=_e-Ar;var on=Ar<tt?Ar:tt;if(Nr>=at){for(qt[Ur++]=(at<<et)+on,hr=Nr-at;hr>=255;hr-=255)qt[Ur++]=255;qt[Ur++]=hr}else qt[Ur++]=(Nr<<et)+on;for(var en=0;en<Nr;en++)qt[Ur++]=Vt[ur+en];if(qt[Ur++]=mr,qt[Ur++]=mr>>8,Ar>=tt){for(hr=Ar-tt;hr>=255;hr-=255)qt[Ur++]=255;qt[Ur++]=hr}ur=_e}if(ur===0)return 0;if(Nr=nr-ur,Nr>=at){for(qt[Ur++]=at<<et,hr=Nr-at;hr>=255;hr-=255)qt[Ur++]=255;qt[Ur++]=hr}else qt[Ur++]=Nr<<et;for(_e=ur;_e<nr;)qt[Ur++]=Vt[_e++];return Ur},s.decompressFrame=function(Vt,qt){var _e,Jt,lr,jt,ur=0,Ar=0;if(h.readU32(Vt,ur)!==ht)throw new Error("invalid magic number");if(ur+=4,jt=Vt[ur++],(jt&ft)!==wt)throw new Error("incompatible descriptor version");_e=(jt&gt)!==0,Jt=(jt&ct)!==0,lr=(jt&_t)!==0;var mr=Vt[ur++]>>bt&Ct;if(Ut[mr]===void 0)throw new Error("invalid block size");for(lr&&(ur+=8),ur++;;){var dr;if(dr=h.readU32(Vt,ur),ur+=4,dr===0)break;if(_e&&(ur+=4),(dr&dt)!==0){dr&=2147483647;for(var Nr=0;Nr<dr;Nr++)qt[Ar++]=Vt[ur++]}else Ar=s.decompressBlock(Vt,qt,ur,dr,Ar),ur+=dr}return Jt&&(ur+=4),Ar},s.compressFrame=function(Vt,qt){var _e=0;h.writeU32(qt,_e,ht),_e+=4,qt[_e++]=wt,qt[_e++]=xt<<bt,qt[_e]=o.hash(0,qt,4,_e-4)>>8,_e++;var Jt=Ut[xt],lr=Vt.length,jt=0;for(kt();lr>0;){var ur=0,Ar=lr>Jt?Jt:lr;if(ur=s.compressBlock(Vt,st,jt,Ar,At),ur>Ar||ur===0){h.writeU32(qt,_e,2147483648|Ar),_e+=4;for(var mr=jt+Ar;jt<mr;)qt[_e++]=Vt[jt++];lr-=Ar}else{h.writeU32(qt,_e,ur),_e+=4;for(var dr=0;dr<ur;)qt[_e++]=st[dr++];jt+=Ar,lr-=Ar}}return h.writeU32(qt,_e,0),_e+=4,_e},s.decompress=function(Vt,qt){var _e,Jt;return qt===void 0&&(qt=s.decompressBound(Vt)),_e=s.makeBuffer(qt),Jt=s.decompressFrame(Vt,_e),Jt!==qt&&(_e=Wt(_e,0,Jt)),_e},s.compress=function(Vt,qt){var _e,Jt;return qt===void 0&&(qt=s.compressBound(Vt.length)),_e=s.makeBuffer(qt),Jt=s.compressFrame(Vt,_e),Jt!==qt&&(_e=Wt(_e,0,Jt)),_e}}(lz4$1)),lz4$1}var lz4Exports=requireLz4();const lz4=getDefaultExportFromCjs(lz4Exports);var __defProp=Object.defineProperty,__defNormalProp=(s,o,h)=>o in s?__defProp(s,o,{enumerable:!0,configurable:!0,writable:!0,value:h}):s[o]=h,__export=(s,o)=>{for(var h in o)__defProp(s,h,{get:o[h],enumerable:!0})},__publicField=(s,o,h)=>(__defNormalProp(s,typeof o!="symbol"?o+"":o,h),h),constants_exports={};__export(constants_exports,{bt709:()=>bt709_exports});var bt709_exports={};__export(bt709_exports,{Y:()=>Y,x:()=>x,y:()=>y});var Y=(s=>(s[s.RED=.2126]="RED",s[s.GREEN=.7152]="GREEN",s[s.BLUE=.0722]="BLUE",s[s.WHITE=1]="WHITE",s))(Y||{}),x=(s=>(s[s.RED=.64]="RED",s[s.GREEN=.3]="GREEN",s[s.BLUE=.15]="BLUE",s[s.WHITE=.3127]="WHITE",s))(x||{}),y=(s=>(s[s.RED=.33]="RED",s[s.GREEN=.6]="GREEN",s[s.BLUE=.06]="BLUE",s[s.WHITE=.329]="WHITE",s))(y||{}),conversion_exports={};__export(conversion_exports,{lab2rgb:()=>lab2rgb,lab2xyz:()=>lab2xyz,rgb2hsl:()=>rgb2hsl,rgb2lab:()=>rgb2lab,rgb2xyz:()=>rgb2xyz,xyz2lab:()=>xyz2lab,xyz2rgb:()=>xyz2rgb});function correctGamma(s){return s>.04045?((s+.055)/1.055)**2.4:s/12.92}function rgb2xyz(s,o,h){return s=correctGamma(s/255),o=correctGamma(o/255),h=correctGamma(h/255),{x:s*.4124+o*.3576+h*.1805,y:s*.2126+o*.7152+h*.0722,z:s*.0193+o*.1192+h*.9505}}var arithmetic_exports={};__export(arithmetic_exports,{degrees2radians:()=>degrees2radians,inRange0to255:()=>inRange0to255,inRange0to255Rounded:()=>inRange0to255Rounded,intInRange:()=>intInRange,max3:()=>max3,min3:()=>min3,stableSort:()=>stableSort});function degrees2radians(s){return s*(Math.PI/180)}function max3(s,o,h){let d=s;return d<o&&(d=o),d<h&&(d=h),d}function min3(s,o,h){let d=s;return d>o&&(d=o),d>h&&(d=h),d}function intInRange(s,o,h){return s>h&&(s=h),s<o&&(s=o),s|0}function inRange0to255Rounded(s){return s=Math.round(s),s>255?s=255:s<0&&(s=0),s}function inRange0to255(s){return s>255?s=255:s<0&&(s=0),s}function stableSort(s,o){const h=typeof s[0];let d;if(h==="number"||h==="string"){const g=Object.create(null);for(let _=0,b=s.length;_<b;_++){const j=s[_];g[j]||g[j]===0||(g[j]=_)}d=s.sort((_,b)=>o(_,b)||g[_]-g[b])}else{const g=s.slice(0);d=s.sort((_,b)=>o(_,b)||g.indexOf(_)-g.indexOf(b))}return d}function rgb2hsl(s,o,h){const d=min3(s,o,h),g=max3(s,o,h),_=g-d,b=(d+g)/510;let j=0;b>0&&b<1&&(j=_/(b<.5?g+d:510-g-d));let et=0;return _>0&&(g===s?et=(o-h)/_:g===o?et=2+(h-s)/_:et=4+(s-o)/_,et*=60,et<0&&(et+=360)),{h:et,s:j,l:b}}var refX=.95047,refY=1,refZ=1.08883;function pivot(s){return s>.008856?s**(1/3):7.787*s+16/116}function xyz2lab(s,o,h){if(s=pivot(s/refX),o=pivot(o/refY),h=pivot(h/refZ),116*o-16<0)throw new Error("xxx");return{L:Math.max(0,116*o-16),a:500*(s-o),b:200*(o-h)}}function rgb2lab(s,o,h){const d=rgb2xyz(s,o,h);return xyz2lab(d.x,d.y,d.z)}var refX2=.95047,refY2=1,refZ2=1.08883;function pivot2(s){return s>.206893034?s**3:(s-16/116)/7.787}function lab2xyz(s,o,h){const d=(s+16)/116,g=o/500+d,_=d-h/200;return{x:refX2*pivot2(g),y:refY2*pivot2(d),z:refZ2*pivot2(_)}}function correctGamma2(s){return s>.0031308?1.055*s**(1/2.4)-.055:12.92*s}function xyz2rgb(s,o,h){const d=correctGamma2(s*3.2406+o*-1.5372+h*-.4986),g=correctGamma2(s*-.9689+o*1.8758+h*.0415),_=correctGamma2(s*.0557+o*-.204+h*1.057);return{r:inRange0to255Rounded(d*255),g:inRange0to255Rounded(g*255),b:inRange0to255Rounded(_*255)}}function lab2rgb(s,o,h){const d=lab2xyz(s,o,h);return xyz2rgb(d.x,d.y,d.z)}var distance_exports={};__export(distance_exports,{AbstractDistanceCalculator:()=>AbstractDistanceCalculator,AbstractEuclidean:()=>AbstractEuclidean,AbstractManhattan:()=>AbstractManhattan,CIE94GraphicArts:()=>CIE94GraphicArts,CIE94Textiles:()=>CIE94Textiles,CIEDE2000:()=>CIEDE2000,CMetric:()=>CMetric,Euclidean:()=>Euclidean,EuclideanBT709:()=>EuclideanBT709,EuclideanBT709NoAlpha:()=>EuclideanBT709NoAlpha,Manhattan:()=>Manhattan,ManhattanBT709:()=>ManhattanBT709,ManhattanNommyde:()=>ManhattanNommyde,PNGQuant:()=>PNGQuant});var AbstractDistanceCalculator=class{constructor(){__publicField(this,"_maxDistance"),__publicField(this,"_whitePoint"),this._setDefaults(),this.setWhitePoint(255,255,255,255)}setWhitePoint(s,o,h,d){this._whitePoint={r:s>0?255/s:0,g:o>0?255/o:0,b:h>0?255/h:0,a:d>0?255/d:0},this._maxDistance=this.calculateRaw(s,o,h,d,0,0,0,0)}calculateNormalized(s,o){return this.calculateRaw(s.r,s.g,s.b,s.a,o.r,o.g,o.b,o.a)/this._maxDistance}},AbstractCIE94=class extends AbstractDistanceCalculator{calculateRaw(s,o,h,d,g,_,b,j){const et=rgb2lab(inRange0to255(s*this._whitePoint.r),inRange0to255(o*this._whitePoint.g),inRange0to255(h*this._whitePoint.b)),tt=rgb2lab(inRange0to255(g*this._whitePoint.r),inRange0to255(_*this._whitePoint.g),inRange0to255(b*this._whitePoint.b)),rt=et.L-tt.L,at=et.a-tt.a,st=et.b-tt.b,At=Math.sqrt(et.a*et.a+et.b*et.b),ht=Math.sqrt(tt.a*tt.a+tt.b*tt.b),ct=At-ht;let _t=at*at+st*st-ct*ct;_t=_t<0?0:Math.sqrt(_t);const gt=(j-d)*this._whitePoint.a*this._kA;return Math.sqrt((rt/this._Kl)**2+(ct/(1+this._K1*At))**2+(_t/(1+this._K2*At))**2+gt**2)}},CIE94Textiles=class extends AbstractCIE94{_setDefaults(){this._Kl=2,this._K1=.048,this._K2=.014,this._kA=.25*50/255}},CIE94GraphicArts=class extends AbstractCIE94{_setDefaults(){this._Kl=1,this._K1=.045,this._K2=.015,this._kA=.25*100/255}},_CIEDE2000=class extends AbstractDistanceCalculator{_setDefaults(){}static _calculatehp(s,o){const h=Math.atan2(s,o);return h>=0?h:h+_CIEDE2000._deg360InRad}static _calculateRT(s,o){const h=o**7,d=2*Math.sqrt(h/(h+_CIEDE2000._pow25to7)),g=_CIEDE2000._deg30InRad*Math.exp(-(((s-_CIEDE2000._deg275InRad)/_CIEDE2000._deg25InRad)**2));return-Math.sin(2*g)*d}static _calculateT(s){return 1-.17*Math.cos(s-_CIEDE2000._deg30InRad)+.24*Math.cos(s*2)+.32*Math.cos(s*3+_CIEDE2000._deg6InRad)-.2*Math.cos(s*4-_CIEDE2000._deg63InRad)}static _calculate_ahp(s,o,h,d){const g=h+d;return s===0?g:o<=_CIEDE2000._deg180InRad?g/2:g<_CIEDE2000._deg360InRad?(g+_CIEDE2000._deg360InRad)/2:(g-_CIEDE2000._deg360InRad)/2}static _calculate_dHp(s,o,h,d){let g;return s===0?g=0:o<=_CIEDE2000._deg180InRad?g=h-d:h<=d?g=h-d+_CIEDE2000._deg360InRad:g=h-d-_CIEDE2000._deg360InRad,2*Math.sqrt(s)*Math.sin(g/2)}calculateRaw(s,o,h,d,g,_,b,j){const et=rgb2lab(inRange0to255(s*this._whitePoint.r),inRange0to255(o*this._whitePoint.g),inRange0to255(h*this._whitePoint.b)),tt=rgb2lab(inRange0to255(g*this._whitePoint.r),inRange0to255(_*this._whitePoint.g),inRange0to255(b*this._whitePoint.b)),rt=(j-d)*this._whitePoint.a*_CIEDE2000._kA,at=this.calculateRawInLab(et,tt);return Math.sqrt(at+rt*rt)}calculateRawInLab(s,o){const h=s.L,d=s.a,g=s.b,_=o.L,b=o.a,j=o.b,et=Math.sqrt(d*d+g*g),tt=Math.sqrt(b*b+j*j),rt=((et+tt)/2)**7,at=.5*(1-Math.sqrt(rt/(rt+_CIEDE2000._pow25to7))),st=(1+at)*d,At=(1+at)*b,ht=Math.sqrt(st*st+g*g),ct=Math.sqrt(At*At+j*j),_t=ht*ct,gt=_CIEDE2000._calculatehp(g,st),wt=_CIEDE2000._calculatehp(j,At),ft=Math.abs(gt-wt),dt=_-h,xt=ct-ht,bt=_CIEDE2000._calculate_dHp(_t,ft,wt,gt),Ct=_CIEDE2000._calculate_ahp(_t,ft,gt,wt),Ut=_CIEDE2000._calculateT(Ct),Qt=(ht+ct)/2,kt=((h+_)/2-50)**2,Nt=1+.015*kt/Math.sqrt(20+kt),Wt=1+.045*Qt,Vt=1+.015*Ut*Qt,qt=_CIEDE2000._calculateRT(Ct,Qt),_e=dt/Nt,Jt=xt/Wt,lr=bt/Vt;return _e**2+Jt**2+lr**2+qt*Jt*lr}},CIEDE2000=_CIEDE2000;__publicField(CIEDE2000,"_kA",.25*100/255);__publicField(CIEDE2000,"_pow25to7",25**7);__publicField(CIEDE2000,"_deg360InRad",degrees2radians(360));__publicField(CIEDE2000,"_deg180InRad",degrees2radians(180));__publicField(CIEDE2000,"_deg30InRad",degrees2radians(30));__publicField(CIEDE2000,"_deg6InRad",degrees2radians(6));__publicField(CIEDE2000,"_deg63InRad",degrees2radians(63));__publicField(CIEDE2000,"_deg275InRad",degrees2radians(275));__publicField(CIEDE2000,"_deg25InRad",degrees2radians(25));var CMetric=class extends AbstractDistanceCalculator{calculateRaw(s,o,h,d,g,_,b,j){const et=(s+g)/2*this._whitePoint.r,tt=(s-g)*this._whitePoint.r,rt=(o-_)*this._whitePoint.g,at=(h-b)*this._whitePoint.b,st=((512+et)*tt*tt>>8)+4*rt*rt+((767-et)*at*at>>8),At=(j-d)*this._whitePoint.a;return Math.sqrt(st+At*At)}_setDefaults(){}},AbstractEuclidean=class extends AbstractDistanceCalculator{calculateRaw(s,o,h,d,g,_,b,j){const et=g-s,tt=_-o,rt=b-h,at=j-d;return Math.sqrt(this._kR*et*et+this._kG*tt*tt+this._kB*rt*rt+this._kA*at*at)}},Euclidean=class extends AbstractEuclidean{_setDefaults(){this._kR=1,this._kG=1,this._kB=1,this._kA=1}},EuclideanBT709=class extends AbstractEuclidean{_setDefaults(){this._kR=.2126,this._kG=.7152,this._kB=.0722,this._kA=1}},EuclideanBT709NoAlpha=class extends AbstractEuclidean{_setDefaults(){this._kR=.2126,this._kG=.7152,this._kB=.0722,this._kA=0}},AbstractManhattan=class extends AbstractDistanceCalculator{calculateRaw(s,o,h,d,g,_,b,j){let et=g-s,tt=_-o,rt=b-h,at=j-d;return et<0&&(et=0-et),tt<0&&(tt=0-tt),rt<0&&(rt=0-rt),at<0&&(at=0-at),this._kR*et+this._kG*tt+this._kB*rt+this._kA*at}},Manhattan=class extends AbstractManhattan{_setDefaults(){this._kR=1,this._kG=1,this._kB=1,this._kA=1}},ManhattanNommyde=class extends AbstractManhattan{_setDefaults(){this._kR=.4984,this._kG=.8625,this._kB=.2979,this._kA=1}},ManhattanBT709=class extends AbstractManhattan{_setDefaults(){this._kR=.2126,this._kG=.7152,this._kB=.0722,this._kA=1}},PNGQuant=class extends AbstractDistanceCalculator{calculateRaw(s,o,h,d,g,_,b,j){const et=(j-d)*this._whitePoint.a;return this._colordifferenceCh(s*this._whitePoint.r,g*this._whitePoint.r,et)+this._colordifferenceCh(o*this._whitePoint.g,_*this._whitePoint.g,et)+this._colordifferenceCh(h*this._whitePoint.b,b*this._whitePoint.b,et)}_colordifferenceCh(s,o,h){const d=s-o,g=d+h;return d*d+g*g}_setDefaults(){}},palette_exports={};__export(palette_exports,{AbstractPaletteQuantizer:()=>AbstractPaletteQuantizer,ColorHistogram:()=>ColorHistogram,NeuQuant:()=>NeuQuant,NeuQuantFloat:()=>NeuQuantFloat,RGBQuant:()=>RGBQuant,WuColorCube:()=>WuColorCube,WuQuant:()=>WuQuant});var AbstractPaletteQuantizer=class{quantizeSync(){for(const s of this.quantize())if(s.palette)return s.palette;throw new Error("unreachable")}},Point=class{constructor(){__publicField(this,"r"),__publicField(this,"g"),__publicField(this,"b"),__publicField(this,"a"),__publicField(this,"uint32"),__publicField(this,"rgba"),this.uint32=-1>>>0,this.r=this.g=this.b=this.a=0,this.rgba=new Array(4),this.rgba[0]=0,this.rgba[1]=0,this.rgba[2]=0,this.rgba[3]=0}static createByQuadruplet(s){const o=new Point;return o.r=s[0]|0,o.g=s[1]|0,o.b=s[2]|0,o.a=s[3]|0,o._loadUINT32(),o._loadQuadruplet(),o}static createByRGBA(s,o,h,d){const g=new Point;return g.r=s|0,g.g=o|0,g.b=h|0,g.a=d|0,g._loadUINT32(),g._loadQuadruplet(),g}static createByUint32(s){const o=new Point;return o.uint32=s>>>0,o._loadRGBA(),o._loadQuadruplet(),o}from(s){this.r=s.r,this.g=s.g,this.b=s.b,this.a=s.a,this.uint32=s.uint32,this.rgba[0]=s.r,this.rgba[1]=s.g,this.rgba[2]=s.b,this.rgba[3]=s.a}getLuminosity(s){let o=this.r,h=this.g,d=this.b;return s&&(o=Math.min(255,255-this.a+this.a*o/255),h=Math.min(255,255-this.a+this.a*h/255),d=Math.min(255,255-this.a+this.a*d/255)),o*.2126+h*.7152+d*.0722}_loadUINT32(){this.uint32=(this.a<<24|this.b<<16|this.g<<8|this.r)>>>0}_loadRGBA(){this.r=this.uint32&255,this.g=this.uint32>>>8&255,this.b=this.uint32>>>16&255,this.a=this.uint32>>>24&255}_loadQuadruplet(){this.rgba[0]=this.r,this.rgba[1]=this.g,this.rgba[2]=this.b,this.rgba[3]=this.a}},PointContainer=class{constructor(){__publicField(this,"_pointArray"),__publicField(this,"_width"),__publicField(this,"_height"),this._width=0,this._height=0,this._pointArray=[]}getWidth(){return this._width}getHeight(){return this._height}setWidth(s){this._width=s}setHeight(s){this._height=s}getPointArray(){return this._pointArray}clone(){const s=new PointContainer;s._width=this._width,s._height=this._height;for(let o=0,h=this._pointArray.length;o<h;o++)s._pointArray[o]=Point.createByUint32(this._pointArray[o].uint32|0);return s}toUint32Array(){const s=this._pointArray.length,o=new Uint32Array(s);for(let h=0;h<s;h++)o[h]=this._pointArray[h].uint32;return o}toUint8Array(){return new Uint8Array(this.toUint32Array().buffer)}static fromHTMLImageElement(s){const o=s.naturalWidth,h=s.naturalHeight,d=document.createElement("canvas");return d.width=o,d.height=h,d.getContext("2d").drawImage(s,0,0,o,h,0,0,o,h),PointContainer.fromHTMLCanvasElement(d)}static fromHTMLCanvasElement(s){const o=s.width,h=s.height,d=s.getContext("2d").getImageData(0,0,o,h);return PointContainer.fromImageData(d)}static fromImageData(s){const o=s.width,h=s.height;return PointContainer.fromUint8Array(s.data,o,h)}static fromUint8Array(s,o,h){switch(Object.prototype.toString.call(s)){case"[object Uint8ClampedArray]":case"[object Uint8Array]":break;default:s=new Uint8Array(s)}const d=new Uint32Array(s.buffer);return PointContainer.fromUint32Array(d,o,h)}static fromUint32Array(s,o,h){const d=new PointContainer;d._width=o,d._height=h;for(let g=0,_=s.length;g<_;g++)d._pointArray[g]=Point.createByUint32(s[g]|0);return d}static fromBuffer(s,o,h){const d=new Uint32Array(s.buffer,s.byteOffset,s.byteLength/Uint32Array.BYTES_PER_ELEMENT);return PointContainer.fromUint32Array(d,o,h)}},hueGroups=10;function hueGroup(s,o){const h=360/o,d=h/2;for(let g=1,_=h-d;g<o;g++,_+=h)if(s>=_&&s<_+h)return g;return 0}var Palette=class{constructor(){__publicField(this,"_pointContainer"),__publicField(this,"_pointArray",[]),__publicField(this,"_i32idx",{}),this._pointContainer=new PointContainer,this._pointContainer.setHeight(1),this._pointArray=this._pointContainer.getPointArray()}add(s){this._pointArray.push(s),this._pointContainer.setWidth(this._pointArray.length)}has(s){for(let o=this._pointArray.length-1;o>=0;o--)if(s.uint32===this._pointArray[o].uint32)return!0;return!1}getNearestColor(s,o){return this._pointArray[this._getNearestIndex(s,o)|0]}getPointContainer(){return this._pointContainer}_nearestPointFromCache(s){return typeof this._i32idx[s]=="number"?this._i32idx[s]:-1}_getNearestIndex(s,o){let h=this._nearestPointFromCache(""+o.uint32);if(h>=0)return h;let d=Number.MAX_VALUE;h=0;for(let g=0,_=this._pointArray.length;g<_;g++){const b=this._pointArray[g],j=s.calculateRaw(o.r,o.g,o.b,o.a,b.r,b.g,b.b,b.a);j<d&&(d=j,h=g)}return this._i32idx[o.uint32]=h,h}sort(){this._i32idx={},this._pointArray.sort((s,o)=>{const h=rgb2hsl(s.r,s.g,s.b),d=rgb2hsl(o.r,o.g,o.b),g=s.r===s.g&&s.g===s.b?0:1+hueGroup(h.h,hueGroups),_=(o.r===o.g&&o.g===o.b?0:1+hueGroup(d.h,hueGroups))-g;if(_)return-_;const b=s.getLuminosity(!0),j=o.getLuminosity(!0);if(j-b!==0)return j-b;const et=(d.s*100|0)-(h.s*100|0);return et?-et:0})}},utils_exports={};__export(utils_exports,{HueStatistics:()=>HueStatistics,Palette:()=>Palette,Point:()=>Point,PointContainer:()=>PointContainer,ProgressTracker:()=>ProgressTracker,arithmetic:()=>arithmetic_exports});var HueGroup=class{constructor(){__publicField(this,"num",0),__publicField(this,"cols",[])}},HueStatistics=class{constructor(s,o){__publicField(this,"_numGroups"),__publicField(this,"_minCols"),__publicField(this,"_stats"),__publicField(this,"_groupsFull"),this._numGroups=s,this._minCols=o,this._stats=[];for(let h=0;h<=s;h++)this._stats[h]=new HueGroup;this._groupsFull=0}check(s){this._groupsFull===this._numGroups+1&&(this.check=()=>{});const o=s&255,h=s>>>8&255,d=s>>>16&255,g=o===h&&h===d?0:1+hueGroup(rgb2hsl(o,h,d).h,this._numGroups),_=this._stats[g],b=this._minCols;_.num++,!(_.num>b)&&(_.num===b&&this._groupsFull++,_.num<=b&&this._stats[g].cols.push(s))}injectIntoDictionary(s){for(let o=0;o<=this._numGroups;o++)this._stats[o].num<=this._minCols&&this._stats[o].cols.forEach(h=>{s[h]?s[h]++:s[h]=1})}injectIntoArray(s){for(let o=0;o<=this._numGroups;o++)this._stats[o].num<=this._minCols&&this._stats[o].cols.forEach(h=>{s.indexOf(h)===-1&&s.push(h)})}},_ProgressTracker=class{constructor(s,o){__publicField(this,"progress"),__publicField(this,"_step"),__publicField(this,"_range"),__publicField(this,"_last"),__publicField(this,"_progressRange"),this._range=s,this._progressRange=o,this._step=Math.max(1,this._range/(_ProgressTracker.steps+1)|0),this._last=-this._step,this.progress=0}shouldNotify(s){return s-this._last>=this._step?(this._last=s,this.progress=Math.min(this._progressRange*this._last/this._range,this._progressRange),!0):!1}},ProgressTracker=_ProgressTracker;__publicField(ProgressTracker,"steps",100);var networkBiasShift=3,Neuron=class{constructor(s){__publicField(this,"r"),__publicField(this,"g"),__publicField(this,"b"),__publicField(this,"a"),this.r=this.g=this.b=this.a=s}toPoint(){return Point.createByRGBA(this.r>>networkBiasShift,this.g>>networkBiasShift,this.b>>networkBiasShift,this.a>>networkBiasShift)}subtract(s,o,h,d){this.r-=s|0,this.g-=o|0,this.b-=h|0,this.a-=d|0}},_NeuQuant=class extends AbstractPaletteQuantizer{constructor(s,o=256){super(),__publicField(this,"_pointArray"),__publicField(this,"_networkSize"),__publicField(this,"_network"),__publicField(this,"_sampleFactor"),__publicField(this,"_radPower"),__publicField(this,"_freq"),__publicField(this,"_bias"),__publicField(this,"_distance"),this._distance=s,this._pointArray=[],this._sampleFactor=1,this._networkSize=o,this._distance.setWhitePoint(255<<networkBiasShift,255<<networkBiasShift,255<<networkBiasShift,255<<networkBiasShift)}sample(s){this._pointArray=this._pointArray.concat(s.getPointArray())}*quantize(){this._init(),yield*this._learn(),yield{palette:this._buildPalette(),progress:100}}_init(){this._freq=[],this._bias=[],this._radPower=[],this._network=[];for(let s=0;s<this._networkSize;s++)this._network[s]=new Neuron((s<<networkBiasShift+8)/this._networkSize|0),this._freq[s]=_NeuQuant._initialBias/this._networkSize|0,this._bias[s]=0}*_learn(){let s=this._sampleFactor;const o=this._pointArray.length;o<_NeuQuant._minpicturebytes&&(s=1);const h=30+(s-1)/3|0,d=o/s|0;let g=d/_NeuQuant._nCycles|0,_=_NeuQuant._initAlpha,b=(this._networkSize>>3)*_NeuQuant._radiusBias,j=b>>_NeuQuant._radiusBiasShift;j<=1&&(j=0);for(let rt=0;rt<j;rt++)this._radPower[rt]=_*((j*j-rt*rt)*_NeuQuant._radBias/(j*j))>>>0;let et;o<_NeuQuant._minpicturebytes?et=1:o%_NeuQuant._prime1!==0?et=_NeuQuant._prime1:o%_NeuQuant._prime2!==0?et=_NeuQuant._prime2:o%_NeuQuant._prime3!==0?et=_NeuQuant._prime3:et=_NeuQuant._prime4;const tt=new ProgressTracker(d,99);for(let rt=0,at=0;rt<d;){tt.shouldNotify(rt)&&(yield{progress:tt.progress});const st=this._pointArray[at],At=st.b<<networkBiasShift,ht=st.g<<networkBiasShift,ct=st.r<<networkBiasShift,_t=st.a<<networkBiasShift,gt=this._contest(At,ht,ct,_t);if(this._alterSingle(_,gt,At,ht,ct,_t),j!==0&&this._alterNeighbour(j,gt,At,ht,ct,_t),at+=et,at>=o&&(at-=o),rt++,g===0&&(g=1),rt%g===0){_-=_/h|0,b-=b/_NeuQuant._radiusDecrease|0,j=b>>_NeuQuant._radiusBiasShift,j<=1&&(j=0);for(let wt=0;wt<j;wt++)this._radPower[wt]=_*((j*j-wt*wt)*_NeuQuant._radBias/(j*j))>>>0}}}_buildPalette(){const s=new Palette;return this._network.forEach(o=>{s.add(o.toPoint())}),s.sort(),s}_alterNeighbour(s,o,h,d,g,_){let b=o-s;b<-1&&(b=-1);let j=o+s;j>this._networkSize&&(j=this._networkSize);let et=o+1,tt=o-1,rt=1;for(;et<j||tt>b;){const at=this._radPower[rt++]/_NeuQuant._alphaRadBias;if(et<j){const st=this._network[et++];st.subtract(at*(st.r-g),at*(st.g-d),at*(st.b-h),at*(st.a-_))}if(tt>b){const st=this._network[tt--];st.subtract(at*(st.r-g),at*(st.g-d),at*(st.b-h),at*(st.a-_))}}}_alterSingle(s,o,h,d,g,_){s/=_NeuQuant._initAlpha;const b=this._network[o];b.subtract(s*(b.r-g),s*(b.g-d),s*(b.b-h),s*(b.a-_))}_contest(s,o,h,d){const g=1020<<networkBiasShift;let _=2147483647,b=_,j=-1,et=j;for(let tt=0;tt<this._networkSize;tt++){const rt=this._network[tt],at=this._distance.calculateNormalized(rt,{r:h,g:o,b:s,a:d})*g|0;at<_&&(_=at,j=tt);const st=at-(this._bias[tt]>>_NeuQuant._initialBiasShift-networkBiasShift);st<b&&(b=st,et=tt);const At=this._freq[tt]>>_NeuQuant._betaShift;this._freq[tt]-=At,this._bias[tt]+=At<<_NeuQuant._gammaShift}return this._freq[j]+=_NeuQuant._beta,this._bias[j]-=_NeuQuant._betaGamma,et}},NeuQuant=_NeuQuant;__publicField(NeuQuant,"_prime1",499);__publicField(NeuQuant,"_prime2",491);__publicField(NeuQuant,"_prime3",487);__publicField(NeuQuant,"_prime4",503);__publicField(NeuQuant,"_minpicturebytes",_NeuQuant._prime4);__publicField(NeuQuant,"_nCycles",100);__publicField(NeuQuant,"_initialBiasShift",16);__publicField(NeuQuant,"_initialBias",1<<_NeuQuant._initialBiasShift);__publicField(NeuQuant,"_gammaShift",10);__publicField(NeuQuant,"_betaShift",10);__publicField(NeuQuant,"_beta",_NeuQuant._initialBias>>_NeuQuant._betaShift);__publicField(NeuQuant,"_betaGamma",_NeuQuant._initialBias<<_NeuQuant._gammaShift-_NeuQuant._betaShift);__publicField(NeuQuant,"_radiusBiasShift",6);__publicField(NeuQuant,"_radiusBias",1<<_NeuQuant._radiusBiasShift);__publicField(NeuQuant,"_radiusDecrease",30);__publicField(NeuQuant,"_alphaBiasShift",10);__publicField(NeuQuant,"_initAlpha",1<<_NeuQuant._alphaBiasShift);__publicField(NeuQuant,"_radBiasShift",8);__publicField(NeuQuant,"_radBias",1<<_NeuQuant._radBiasShift);__publicField(NeuQuant,"_alphaRadBiasShift",_NeuQuant._alphaBiasShift+_NeuQuant._radBiasShift);__publicField(NeuQuant,"_alphaRadBias",1<<_NeuQuant._alphaRadBiasShift);var networkBiasShift2=3,NeuronFloat=class{constructor(s){__publicField(this,"r"),__publicField(this,"g"),__publicField(this,"b"),__publicField(this,"a"),this.r=this.g=this.b=this.a=s}toPoint(){return Point.createByRGBA(this.r>>networkBiasShift2,this.g>>networkBiasShift2,this.b>>networkBiasShift2,this.a>>networkBiasShift2)}subtract(s,o,h,d){this.r-=s,this.g-=o,this.b-=h,this.a-=d}},_NeuQuantFloat=class extends AbstractPaletteQuantizer{constructor(s,o=256){super(),__publicField(this,"_pointArray"),__publicField(this,"_networkSize"),__publicField(this,"_network"),__publicField(this,"_sampleFactor"),__publicField(this,"_radPower"),__publicField(this,"_freq"),__publicField(this,"_bias"),__publicField(this,"_distance"),this._distance=s,this._pointArray=[],this._sampleFactor=1,this._networkSize=o,this._distance.setWhitePoint(255<<networkBiasShift2,255<<networkBiasShift2,255<<networkBiasShift2,255<<networkBiasShift2)}sample(s){this._pointArray=this._pointArray.concat(s.getPointArray())}*quantize(){this._init(),yield*this._learn(),yield{palette:this._buildPalette(),progress:100}}_init(){this._freq=[],this._bias=[],this._radPower=[],this._network=[];for(let s=0;s<this._networkSize;s++)this._network[s]=new NeuronFloat((s<<networkBiasShift2+8)/this._networkSize),this._freq[s]=_NeuQuantFloat._initialBias/this._networkSize,this._bias[s]=0}*_learn(){let s=this._sampleFactor;const o=this._pointArray.length;o<_NeuQuantFloat._minpicturebytes&&(s=1);const h=30+(s-1)/3,d=o/s;let g=d/_NeuQuantFloat._nCycles|0,_=_NeuQuantFloat._initAlpha,b=(this._networkSize>>3)*_NeuQuantFloat._radiusBias,j=b>>_NeuQuantFloat._radiusBiasShift;j<=1&&(j=0);for(let rt=0;rt<j;rt++)this._radPower[rt]=_*((j*j-rt*rt)*_NeuQuantFloat._radBias/(j*j));let et;o<_NeuQuantFloat._minpicturebytes?et=1:o%_NeuQuantFloat._prime1!==0?et=_NeuQuantFloat._prime1:o%_NeuQuantFloat._prime2!==0?et=_NeuQuantFloat._prime2:o%_NeuQuantFloat._prime3!==0?et=_NeuQuantFloat._prime3:et=_NeuQuantFloat._prime4;const tt=new ProgressTracker(d,99);for(let rt=0,at=0;rt<d;){tt.shouldNotify(rt)&&(yield{progress:tt.progress});const st=this._pointArray[at],At=st.b<<networkBiasShift2,ht=st.g<<networkBiasShift2,ct=st.r<<networkBiasShift2,_t=st.a<<networkBiasShift2,gt=this._contest(At,ht,ct,_t);if(this._alterSingle(_,gt,At,ht,ct,_t),j!==0&&this._alterNeighbour(j,gt,At,ht,ct,_t),at+=et,at>=o&&(at-=o),rt++,g===0&&(g=1),rt%g===0){_-=_/h,b-=b/_NeuQuantFloat._radiusDecrease,j=b>>_NeuQuantFloat._radiusBiasShift,j<=1&&(j=0);for(let wt=0;wt<j;wt++)this._radPower[wt]=_*((j*j-wt*wt)*_NeuQuantFloat._radBias/(j*j))}}}_buildPalette(){const s=new Palette;return this._network.forEach(o=>{s.add(o.toPoint())}),s.sort(),s}_alterNeighbour(s,o,h,d,g,_){let b=o-s;b<-1&&(b=-1);let j=o+s;j>this._networkSize&&(j=this._networkSize);let et=o+1,tt=o-1,rt=1;for(;et<j||tt>b;){const at=this._radPower[rt++]/_NeuQuantFloat._alphaRadBias;if(et<j){const st=this._network[et++];st.subtract(at*(st.r-g),at*(st.g-d),at*(st.b-h),at*(st.a-_))}if(tt>b){const st=this._network[tt--];st.subtract(at*(st.r-g),at*(st.g-d),at*(st.b-h),at*(st.a-_))}}}_alterSingle(s,o,h,d,g,_){s/=_NeuQuantFloat._initAlpha;const b=this._network[o];b.subtract(s*(b.r-g),s*(b.g-d),s*(b.b-h),s*(b.a-_))}_contest(s,o,h,d){const g=1020<<networkBiasShift2;let _=2147483647,b=_,j=-1,et=j;for(let tt=0;tt<this._networkSize;tt++){const rt=this._network[tt],at=this._distance.calculateNormalized(rt,{r:h,g:o,b:s,a:d})*g;at<_&&(_=at,j=tt);const st=at-(this._bias[tt]>>_NeuQuantFloat._initialBiasShift-networkBiasShift2);st<b&&(b=st,et=tt);const At=this._freq[tt]>>_NeuQuantFloat._betaShift;this._freq[tt]-=At,this._bias[tt]+=At<<_NeuQuantFloat._gammaShift}return this._freq[j]+=_NeuQuantFloat._beta,this._bias[j]-=_NeuQuantFloat._betaGamma,et}},NeuQuantFloat=_NeuQuantFloat;__publicField(NeuQuantFloat,"_prime1",499);__publicField(NeuQuantFloat,"_prime2",491);__publicField(NeuQuantFloat,"_prime3",487);__publicField(NeuQuantFloat,"_prime4",503);__publicField(NeuQuantFloat,"_minpicturebytes",_NeuQuantFloat._prime4);__publicField(NeuQuantFloat,"_nCycles",100);__publicField(NeuQuantFloat,"_initialBiasShift",16);__publicField(NeuQuantFloat,"_initialBias",1<<_NeuQuantFloat._initialBiasShift);__publicField(NeuQuantFloat,"_gammaShift",10);__publicField(NeuQuantFloat,"_betaShift",10);__publicField(NeuQuantFloat,"_beta",_NeuQuantFloat._initialBias>>_NeuQuantFloat._betaShift);__publicField(NeuQuantFloat,"_betaGamma",_NeuQuantFloat._initialBias<<_NeuQuantFloat._gammaShift-_NeuQuantFloat._betaShift);__publicField(NeuQuantFloat,"_radiusBiasShift",6);__publicField(NeuQuantFloat,"_radiusBias",1<<_NeuQuantFloat._radiusBiasShift);__publicField(NeuQuantFloat,"_radiusDecrease",30);__publicField(NeuQuantFloat,"_alphaBiasShift",10);__publicField(NeuQuantFloat,"_initAlpha",1<<_NeuQuantFloat._alphaBiasShift);__publicField(NeuQuantFloat,"_radBiasShift",8);__publicField(NeuQuantFloat,"_radBias",1<<_NeuQuantFloat._radBiasShift);__publicField(NeuQuantFloat,"_alphaRadBiasShift",_NeuQuantFloat._alphaBiasShift+_NeuQuantFloat._radBiasShift);__publicField(NeuQuantFloat,"_alphaRadBias",1<<_NeuQuantFloat._alphaRadBiasShift);var _ColorHistogram=class{constructor(s,o){__publicField(this,"_method"),__publicField(this,"_hueStats"),__publicField(this,"_histogram"),__publicField(this,"_initColors"),__publicField(this,"_minHueCols"),this._method=s,this._minHueCols=o<<2,this._initColors=o<<2,this._hueStats=new HueStatistics(_ColorHistogram._hueGroups,this._minHueCols),this._histogram=Object.create(null)}sample(s){switch(this._method){case 1:this._colorStats1D(s);break;case 2:this._colorStats2D(s);break}}getImportanceSortedColorsIDXI32(){const s=stableSort(Object.keys(this._histogram),(h,d)=>this._histogram[d]-this._histogram[h]);if(s.length===0)return[];let o;switch(this._method){case 1:const h=Math.min(s.length,this._initColors),d=s[h-1],g=this._histogram[d];o=s.slice(0,h);let _=h;const b=s.length;for(;_<b&&this._histogram[s[_]]===g;)o.push(s[_++]);this._hueStats.injectIntoArray(o);break;case 2:o=s;break;default:throw new Error("Incorrect method")}return o.map(h=>+h)}_colorStats1D(s){const o=this._histogram,h=s.getPointArray(),d=h.length;for(let g=0;g<d;g++){const _=h[g].uint32;this._hueStats.check(_),_ in o?o[_]++:o[_]=1}}_colorStats2D(s){const o=s.getWidth(),h=s.getHeight(),d=s.getPointArray(),g=_ColorHistogram._boxSize[0],_=_ColorHistogram._boxSize[1],b=g*_,j=this._makeBoxes(o,h,g,_),et=this._histogram;j.forEach(tt=>{let rt=Math.round(tt.w*tt.h/b)*_ColorHistogram._boxPixels;rt<2&&(rt=2);const at={};this._iterateBox(tt,o,st=>{const At=d[st].uint32;this._hueStats.check(At),At in et?et[At]++:At in at?++at[At]>=rt&&(et[At]=at[At]):at[At]=1})}),this._hueStats.injectIntoDictionary(et)}_iterateBox(s,o,h){const d=s,g=d.y*o+d.x,_=(d.y+d.h-1)*o+(d.x+d.w-1),b=o-d.w+1;let j=0,et=g;do h.call(this,et),et+=++j%d.w===0?b:1;while(et<=_)}_makeBoxes(s,o,h,d){const g=s%h,_=o%d,b=s-g,j=o-_,et=[];for(let tt=0;tt<o;tt+=d)for(let rt=0;rt<s;rt+=h)et.push({x:rt,y:tt,w:rt===b?g:h,h:tt===j?_:d});return et}},ColorHistogram=_ColorHistogram;__publicField(ColorHistogram,"_boxSize",[64,64]);__publicField(ColorHistogram,"_boxPixels",2);__publicField(ColorHistogram,"_hueGroups",10);var RemovedColor=class{constructor(s,o,h){__publicField(this,"index"),__publicField(this,"color"),__publicField(this,"distance"),this.index=s,this.color=o,this.distance=h}},RGBQuant=class extends AbstractPaletteQuantizer{constructor(s,o=256,h=2){super(),__publicField(this,"_colors"),__publicField(this,"_initialDistance"),__publicField(this,"_distanceIncrement"),__publicField(this,"_histogram"),__publicField(this,"_distance"),this._distance=s,this._colors=o,this._histogram=new ColorHistogram(h,o),this._initialDistance=.01,this._distanceIncrement=.005}sample(s){this._histogram.sample(s)}*quantize(){const s=this._histogram.getImportanceSortedColorsIDXI32();if(s.length===0)throw new Error("No colors in image");yield*this._buildPalette(s)}*_buildPalette(s){const o=new Palette,h=o.getPointContainer().getPointArray(),d=new Array(s.length);for(let rt=0;rt<s.length;rt++)h.push(Point.createByUint32(s[rt])),d[rt]=1;const g=h.length,_=[];let b=g,j=this._initialDistance;const et=new ProgressTracker(b-this._colors,99);for(;b>this._colors;){_.length=0;for(let rt=0;rt<g;rt++){if(et.shouldNotify(g-b)&&(yield{progress:et.progress}),d[rt]===0)continue;const at=h[rt];for(let st=rt+1;st<g;st++){if(d[st]===0)continue;const At=h[st],ht=this._distance.calculateNormalized(at,At);ht<j&&(_.push(new RemovedColor(st,At,ht)),d[st]=0,b--)}}j+=b>this._colors*3?this._initialDistance:this._distanceIncrement}if(b<this._colors){stableSort(_,(at,st)=>st.distance-at.distance);let rt=0;for(;b<this._colors&&rt<_.length;){const at=_[rt];d[at.index]=1,b++,rt++}}let tt=h.length;for(let rt=tt-1;rt>=0;rt--)d[rt]===0&&(rt!==tt-1&&(h[rt]=h[tt-1]),--tt);h.length=tt,o.sort(),yield{palette:o,progress:100}}};function createArray1D(s){const o=[];for(let h=0;h<s;h++)o[h]=0;return o}function createArray4D(s,o,h,d){const g=new Array(s);for(let _=0;_<s;_++){g[_]=new Array(o);for(let b=0;b<o;b++){g[_][b]=new Array(h);for(let j=0;j<h;j++){g[_][b][j]=new Array(d);for(let et=0;et<d;et++)g[_][b][j][et]=0}}}return g}function createArray3D(s,o,h){const d=new Array(s);for(let g=0;g<s;g++){d[g]=new Array(o);for(let _=0;_<o;_++){d[g][_]=new Array(h);for(let b=0;b<h;b++)d[g][_][b]=0}}return d}function fillArray3D(s,o,h,d,g){for(let _=0;_<o;_++){s[_]=[];for(let b=0;b<h;b++){s[_][b]=[];for(let j=0;j<d;j++)s[_][b][j]=g}}}function fillArray1D(s,o,h){for(let d=0;d<o;d++)s[d]=h}var WuColorCube=class{constructor(){__publicField(this,"redMinimum"),__publicField(this,"redMaximum"),__publicField(this,"greenMinimum"),__publicField(this,"greenMaximum"),__publicField(this,"blueMinimum"),__publicField(this,"blueMaximum"),__publicField(this,"volume"),__publicField(this,"alphaMinimum"),__publicField(this,"alphaMaximum")}},_WuQuant=class extends AbstractPaletteQuantizer{constructor(s,o=256,h=5){super(),__publicField(this,"_reds"),__publicField(this,"_greens"),__publicField(this,"_blues"),__publicField(this,"_alphas"),__publicField(this,"_sums"),__publicField(this,"_weights"),__publicField(this,"_momentsRed"),__publicField(this,"_momentsGreen"),__publicField(this,"_momentsBlue"),__publicField(this,"_momentsAlpha"),__publicField(this,"_moments"),__publicField(this,"_table"),__publicField(this,"_pixels"),__publicField(this,"_cubes"),__publicField(this,"_colors"),__publicField(this,"_significantBitsPerChannel"),__publicField(this,"_maxSideIndex"),__publicField(this,"_alphaMaxSideIndex"),__publicField(this,"_sideSize"),__publicField(this,"_alphaSideSize"),__publicField(this,"_distance"),this._distance=s,this._setQuality(h),this._initialize(o)}sample(s){const o=s.getPointArray();for(let h=0,d=o.length;h<d;h++)this._addColor(o[h]);this._pixels=this._pixels.concat(o)}*quantize(){yield*this._preparePalette();const s=new Palette;for(let o=0;o<this._colors;o++)if(this._sums[o]>0){const h=this._sums[o],d=this._reds[o]/h,g=this._greens[o]/h,_=this._blues[o]/h,b=this._alphas[o]/h,j=Point.createByRGBA(d|0,g|0,_|0,b|0);s.add(j)}s.sort(),yield{palette:s,progress:100}}*_preparePalette(){yield*this._calculateMoments();let s=0;const o=createArray1D(this._colors);for(let b=1;b<this._colors;++b){this._cut(this._cubes[s],this._cubes[b])?(o[s]=this._cubes[s].volume>1?this._calculateVariance(this._cubes[s]):0,o[b]=this._cubes[b].volume>1?this._calculateVariance(this._cubes[b]):0):(o[s]=0,b--),s=0;let j=o[0];for(let et=1;et<=b;++et)o[et]>j&&(j=o[et],s=et);if(j<=0){this._colors=b+1;break}}const h=[],d=[],g=[],_=[];for(let b=0;b<this._colors;++b){const j=_WuQuant._volume(this._cubes[b],this._weights);j>0?(h[b]=_WuQuant._volume(this._cubes[b],this._momentsRed)/j|0,d[b]=_WuQuant._volume(this._cubes[b],this._momentsGreen)/j|0,g[b]=_WuQuant._volume(this._cubes[b],this._momentsBlue)/j|0,_[b]=_WuQuant._volume(this._cubes[b],this._momentsAlpha)/j|0):(h[b]=0,d[b]=0,g[b]=0,_[b]=0)}this._reds=createArray1D(this._colors+1),this._greens=createArray1D(this._colors+1),this._blues=createArray1D(this._colors+1),this._alphas=createArray1D(this._colors+1),this._sums=createArray1D(this._colors+1);for(let b=0,j=this._pixels.length;b<j;b++){const et=this._pixels[b];let tt=-1,rt=Number.MAX_VALUE;for(let at=0;at<this._colors;at++){const st=h[at],At=d[at],ht=g[at],ct=_[at],_t=this._distance.calculateRaw(st,At,ht,ct,et.r,et.g,et.b,et.a);_t<rt&&(rt=_t,tt=at)}this._reds[tt]+=et.r,this._greens[tt]+=et.g,this._blues[tt]+=et.b,this._alphas[tt]+=et.a,this._sums[tt]++}}_addColor(s){const o=8-this._significantBitsPerChannel,h=(s.r>>o)+1,d=(s.g>>o)+1,g=(s.b>>o)+1,_=(s.a>>o)+1;this._weights[_][h][d][g]++,this._momentsRed[_][h][d][g]+=s.r,this._momentsGreen[_][h][d][g]+=s.g,this._momentsBlue[_][h][d][g]+=s.b,this._momentsAlpha[_][h][d][g]+=s.a,this._moments[_][h][d][g]+=this._table[s.r]+this._table[s.g]+this._table[s.b]+this._table[s.a]}*_calculateMoments(){const s=[],o=[],h=[],d=[],g=[],_=[],b=createArray3D(this._sideSize,this._sideSize,this._sideSize),j=createArray3D(this._sideSize,this._sideSize,this._sideSize),et=createArray3D(this._sideSize,this._sideSize,this._sideSize),tt=createArray3D(this._sideSize,this._sideSize,this._sideSize),rt=createArray3D(this._sideSize,this._sideSize,this._sideSize),at=createArray3D(this._sideSize,this._sideSize,this._sideSize);let st=0;const At=new ProgressTracker(this._alphaMaxSideIndex*this._maxSideIndex,99);for(let ht=1;ht<=this._alphaMaxSideIndex;++ht){fillArray3D(b,this._sideSize,this._sideSize,this._sideSize,0),fillArray3D(j,this._sideSize,this._sideSize,this._sideSize,0),fillArray3D(et,this._sideSize,this._sideSize,this._sideSize,0),fillArray3D(tt,this._sideSize,this._sideSize,this._sideSize,0),fillArray3D(rt,this._sideSize,this._sideSize,this._sideSize,0),fillArray3D(at,this._sideSize,this._sideSize,this._sideSize,0);for(let ct=1;ct<=this._maxSideIndex;++ct,++st){At.shouldNotify(st)&&(yield{progress:At.progress}),fillArray1D(s,this._sideSize,0),fillArray1D(o,this._sideSize,0),fillArray1D(h,this._sideSize,0),fillArray1D(d,this._sideSize,0),fillArray1D(g,this._sideSize,0),fillArray1D(_,this._sideSize,0);for(let _t=1;_t<=this._maxSideIndex;++_t){let gt=0,wt=0,ft=0,dt=0,xt=0,bt=0;for(let Ct=1;Ct<=this._maxSideIndex;++Ct)gt+=this._weights[ht][ct][_t][Ct],wt+=this._momentsRed[ht][ct][_t][Ct],ft+=this._momentsGreen[ht][ct][_t][Ct],dt+=this._momentsBlue[ht][ct][_t][Ct],xt+=this._momentsAlpha[ht][ct][_t][Ct],bt+=this._moments[ht][ct][_t][Ct],s[Ct]+=gt,o[Ct]+=wt,h[Ct]+=ft,d[Ct]+=dt,g[Ct]+=xt,_[Ct]+=bt,b[ct][_t][Ct]=b[ct-1][_t][Ct]+s[Ct],j[ct][_t][Ct]=j[ct-1][_t][Ct]+o[Ct],et[ct][_t][Ct]=et[ct-1][_t][Ct]+h[Ct],tt[ct][_t][Ct]=tt[ct-1][_t][Ct]+d[Ct],rt[ct][_t][Ct]=rt[ct-1][_t][Ct]+g[Ct],at[ct][_t][Ct]=at[ct-1][_t][Ct]+_[Ct],this._weights[ht][ct][_t][Ct]=this._weights[ht-1][ct][_t][Ct]+b[ct][_t][Ct],this._momentsRed[ht][ct][_t][Ct]=this._momentsRed[ht-1][ct][_t][Ct]+j[ct][_t][Ct],this._momentsGreen[ht][ct][_t][Ct]=this._momentsGreen[ht-1][ct][_t][Ct]+et[ct][_t][Ct],this._momentsBlue[ht][ct][_t][Ct]=this._momentsBlue[ht-1][ct][_t][Ct]+tt[ct][_t][Ct],this._momentsAlpha[ht][ct][_t][Ct]=this._momentsAlpha[ht-1][ct][_t][Ct]+rt[ct][_t][Ct],this._moments[ht][ct][_t][Ct]=this._moments[ht-1][ct][_t][Ct]+at[ct][_t][Ct]}}}}static _volumeFloat(s,o){return o[s.alphaMaximum][s.redMaximum][s.greenMaximum][s.blueMaximum]-o[s.alphaMaximum][s.redMaximum][s.greenMinimum][s.blueMaximum]-o[s.alphaMaximum][s.redMinimum][s.greenMaximum][s.blueMaximum]+o[s.alphaMaximum][s.redMinimum][s.greenMinimum][s.blueMaximum]-o[s.alphaMinimum][s.redMaximum][s.greenMaximum][s.blueMaximum]+o[s.alphaMinimum][s.redMaximum][s.greenMinimum][s.blueMaximum]+o[s.alphaMinimum][s.redMinimum][s.greenMaximum][s.blueMaximum]-o[s.alphaMinimum][s.redMinimum][s.greenMinimum][s.blueMaximum]-(o[s.alphaMaximum][s.redMaximum][s.greenMaximum][s.blueMinimum]-o[s.alphaMinimum][s.redMaximum][s.greenMaximum][s.blueMinimum]-o[s.alphaMaximum][s.redMaximum][s.greenMinimum][s.blueMinimum]+o[s.alphaMinimum][s.redMaximum][s.greenMinimum][s.blueMinimum]-o[s.alphaMaximum][s.redMinimum][s.greenMaximum][s.blueMinimum]+o[s.alphaMinimum][s.redMinimum][s.greenMaximum][s.blueMinimum]+o[s.alphaMaximum][s.redMinimum][s.greenMinimum][s.blueMinimum]-o[s.alphaMinimum][s.redMinimum][s.greenMinimum][s.blueMinimum])}static _volume(s,o){return _WuQuant._volumeFloat(s,o)|0}static _top(s,o,h,d){let g;switch(o){case _WuQuant._alpha:g=d[h][s.redMaximum][s.greenMaximum][s.blueMaximum]-d[h][s.redMaximum][s.greenMinimum][s.blueMaximum]-d[h][s.redMinimum][s.greenMaximum][s.blueMaximum]+d[h][s.redMinimum][s.greenMinimum][s.blueMaximum]-(d[h][s.redMaximum][s.greenMaximum][s.blueMinimum]-d[h][s.redMaximum][s.greenMinimum][s.blueMinimum]-d[h][s.redMinimum][s.greenMaximum][s.blueMinimum]+d[h][s.redMinimum][s.greenMinimum][s.blueMinimum]);break;case _WuQuant._red:g=d[s.alphaMaximum][h][s.greenMaximum][s.blueMaximum]-d[s.alphaMaximum][h][s.greenMinimum][s.blueMaximum]-d[s.alphaMinimum][h][s.greenMaximum][s.blueMaximum]+d[s.alphaMinimum][h][s.greenMinimum][s.blueMaximum]-(d[s.alphaMaximum][h][s.greenMaximum][s.blueMinimum]-d[s.alphaMaximum][h][s.greenMinimum][s.blueMinimum]-d[s.alphaMinimum][h][s.greenMaximum][s.blueMinimum]+d[s.alphaMinimum][h][s.greenMinimum][s.blueMinimum]);break;case _WuQuant._green:g=d[s.alphaMaximum][s.redMaximum][h][s.blueMaximum]-d[s.alphaMaximum][s.redMinimum][h][s.blueMaximum]-d[s.alphaMinimum][s.redMaximum][h][s.blueMaximum]+d[s.alphaMinimum][s.redMinimum][h][s.blueMaximum]-(d[s.alphaMaximum][s.redMaximum][h][s.blueMinimum]-d[s.alphaMaximum][s.redMinimum][h][s.blueMinimum]-d[s.alphaMinimum][s.redMaximum][h][s.blueMinimum]+d[s.alphaMinimum][s.redMinimum][h][s.blueMinimum]);break;case _WuQuant._blue:g=d[s.alphaMaximum][s.redMaximum][s.greenMaximum][h]-d[s.alphaMaximum][s.redMaximum][s.greenMinimum][h]-d[s.alphaMaximum][s.redMinimum][s.greenMaximum][h]+d[s.alphaMaximum][s.redMinimum][s.greenMinimum][h]-(d[s.alphaMinimum][s.redMaximum][s.greenMaximum][h]-d[s.alphaMinimum][s.redMaximum][s.greenMinimum][h]-d[s.alphaMinimum][s.redMinimum][s.greenMaximum][h]+d[s.alphaMinimum][s.redMinimum][s.greenMinimum][h]);break;default:throw new Error("impossible")}return g|0}static _bottom(s,o,h){switch(o){case _WuQuant._alpha:return-h[s.alphaMinimum][s.redMaximum][s.greenMaximum][s.blueMaximum]+h[s.alphaMinimum][s.redMaximum][s.greenMinimum][s.blueMaximum]+h[s.alphaMinimum][s.redMinimum][s.greenMaximum][s.blueMaximum]-h[s.alphaMinimum][s.redMinimum][s.greenMinimum][s.blueMaximum]-(-h[s.alphaMinimum][s.redMaximum][s.greenMaximum][s.blueMinimum]+h[s.alphaMinimum][s.redMaximum][s.greenMinimum][s.blueMinimum]+h[s.alphaMinimum][s.redMinimum][s.greenMaximum][s.blueMinimum]-h[s.alphaMinimum][s.redMinimum][s.greenMinimum][s.blueMinimum]);case _WuQuant._red:return-h[s.alphaMaximum][s.redMinimum][s.greenMaximum][s.blueMaximum]+h[s.alphaMaximum][s.redMinimum][s.greenMinimum][s.blueMaximum]+h[s.alphaMinimum][s.redMinimum][s.greenMaximum][s.blueMaximum]-h[s.alphaMinimum][s.redMinimum][s.greenMinimum][s.blueMaximum]-(-h[s.alphaMaximum][s.redMinimum][s.greenMaximum][s.blueMinimum]+h[s.alphaMaximum][s.redMinimum][s.greenMinimum][s.blueMinimum]+h[s.alphaMinimum][s.redMinimum][s.greenMaximum][s.blueMinimum]-h[s.alphaMinimum][s.redMinimum][s.greenMinimum][s.blueMinimum]);case _WuQuant._green:return-h[s.alphaMaximum][s.redMaximum][s.greenMinimum][s.blueMaximum]+h[s.alphaMaximum][s.redMinimum][s.greenMinimum][s.blueMaximum]+h[s.alphaMinimum][s.redMaximum][s.greenMinimum][s.blueMaximum]-h[s.alphaMinimum][s.redMinimum][s.greenMinimum][s.blueMaximum]-(-h[s.alphaMaximum][s.redMaximum][s.greenMinimum][s.blueMinimum]+h[s.alphaMaximum][s.redMinimum][s.greenMinimum][s.blueMinimum]+h[s.alphaMinimum][s.redMaximum][s.greenMinimum][s.blueMinimum]-h[s.alphaMinimum][s.redMinimum][s.greenMinimum][s.blueMinimum]);case _WuQuant._blue:return-h[s.alphaMaximum][s.redMaximum][s.greenMaximum][s.blueMinimum]+h[s.alphaMaximum][s.redMaximum][s.greenMinimum][s.blueMinimum]+h[s.alphaMaximum][s.redMinimum][s.greenMaximum][s.blueMinimum]-h[s.alphaMaximum][s.redMinimum][s.greenMinimum][s.blueMinimum]-(-h[s.alphaMinimum][s.redMaximum][s.greenMaximum][s.blueMinimum]+h[s.alphaMinimum][s.redMaximum][s.greenMinimum][s.blueMinimum]+h[s.alphaMinimum][s.redMinimum][s.greenMaximum][s.blueMinimum]-h[s.alphaMinimum][s.redMinimum][s.greenMinimum][s.blueMinimum]);default:return 0}}_calculateVariance(s){const o=_WuQuant._volume(s,this._momentsRed),h=_WuQuant._volume(s,this._momentsGreen),d=_WuQuant._volume(s,this._momentsBlue),g=_WuQuant._volume(s,this._momentsAlpha),_=_WuQuant._volumeFloat(s,this._moments),b=_WuQuant._volume(s,this._weights),j=o*o+h*h+d*d+g*g;return _-j/b}_maximize(s,o,h,d,g,_,b,j,et){const tt=_WuQuant._bottom(s,o,this._momentsRed)|0,rt=_WuQuant._bottom(s,o,this._momentsGreen)|0,at=_WuQuant._bottom(s,o,this._momentsBlue)|0,st=_WuQuant._bottom(s,o,this._momentsAlpha)|0,At=_WuQuant._bottom(s,o,this._weights)|0;let ht=0,ct=-1;for(let _t=h;_t<d;++_t){let gt=tt+_WuQuant._top(s,o,_t,this._momentsRed),wt=rt+_WuQuant._top(s,o,_t,this._momentsGreen),ft=at+_WuQuant._top(s,o,_t,this._momentsBlue),dt=st+_WuQuant._top(s,o,_t,this._momentsAlpha),xt=At+_WuQuant._top(s,o,_t,this._weights);if(xt!==0){let bt=gt*gt+wt*wt+ft*ft+dt*dt,Ct=bt/xt;gt=g-gt,wt=_-wt,ft=b-ft,dt=j-dt,xt=et-xt,xt!==0&&(bt=gt*gt+wt*wt+ft*ft+dt*dt,Ct+=bt/xt,Ct>ht&&(ht=Ct,ct=_t))}}return{max:ht,position:ct}}_cut(s,o){let h;const d=_WuQuant._volume(s,this._momentsRed),g=_WuQuant._volume(s,this._momentsGreen),_=_WuQuant._volume(s,this._momentsBlue),b=_WuQuant._volume(s,this._momentsAlpha),j=_WuQuant._volume(s,this._weights),et=this._maximize(s,_WuQuant._red,s.redMinimum+1,s.redMaximum,d,g,_,b,j),tt=this._maximize(s,_WuQuant._green,s.greenMinimum+1,s.greenMaximum,d,g,_,b,j),rt=this._maximize(s,_WuQuant._blue,s.blueMinimum+1,s.blueMaximum,d,g,_,b,j),at=this._maximize(s,_WuQuant._alpha,s.alphaMinimum+1,s.alphaMaximum,d,g,_,b,j);if(at.max>=et.max&&at.max>=tt.max&&at.max>=rt.max){if(h=_WuQuant._alpha,at.position<0)return!1}else et.max>=at.max&&et.max>=tt.max&&et.max>=rt.max?h=_WuQuant._red:tt.max>=at.max&&tt.max>=et.max&&tt.max>=rt.max?h=_WuQuant._green:h=_WuQuant._blue;switch(o.redMaximum=s.redMaximum,o.greenMaximum=s.greenMaximum,o.blueMaximum=s.blueMaximum,o.alphaMaximum=s.alphaMaximum,h){case _WuQuant._red:o.redMinimum=s.redMaximum=et.position,o.greenMinimum=s.greenMinimum,o.blueMinimum=s.blueMinimum,o.alphaMinimum=s.alphaMinimum;break;case _WuQuant._green:o.greenMinimum=s.greenMaximum=tt.position,o.redMinimum=s.redMinimum,o.blueMinimum=s.blueMinimum,o.alphaMinimum=s.alphaMinimum;break;case _WuQuant._blue:o.blueMinimum=s.blueMaximum=rt.position,o.redMinimum=s.redMinimum,o.greenMinimum=s.greenMinimum,o.alphaMinimum=s.alphaMinimum;break;case _WuQuant._alpha:o.alphaMinimum=s.alphaMaximum=at.position,o.blueMinimum=s.blueMinimum,o.redMinimum=s.redMinimum,o.greenMinimum=s.greenMinimum;break}return s.volume=(s.redMaximum-s.redMinimum)*(s.greenMaximum-s.greenMinimum)*(s.blueMaximum-s.blueMinimum)*(s.alphaMaximum-s.alphaMinimum),o.volume=(o.redMaximum-o.redMinimum)*(o.greenMaximum-o.greenMinimum)*(o.blueMaximum-o.blueMinimum)*(o.alphaMaximum-o.alphaMinimum),!0}_initialize(s){this._colors=s,this._cubes=[];for(let o=0;o<s;o++)this._cubes[o]=new WuColorCube;this._cubes[0].redMinimum=0,this._cubes[0].greenMinimum=0,this._cubes[0].blueMinimum=0,this._cubes[0].alphaMinimum=0,this._cubes[0].redMaximum=this._maxSideIndex,this._cubes[0].greenMaximum=this._maxSideIndex,this._cubes[0].blueMaximum=this._maxSideIndex,this._cubes[0].alphaMaximum=this._alphaMaxSideIndex,this._weights=createArray4D(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize),this._momentsRed=createArray4D(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize),this._momentsGreen=createArray4D(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize),this._momentsBlue=createArray4D(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize),this._momentsAlpha=createArray4D(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize),this._moments=createArray4D(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize),this._table=[];for(let o=0;o<256;++o)this._table[o]=o*o;this._pixels=[]}_setQuality(s=5){this._significantBitsPerChannel=s,this._maxSideIndex=1<<this._significantBitsPerChannel,this._alphaMaxSideIndex=this._maxSideIndex,this._sideSize=this._maxSideIndex+1,this._alphaSideSize=this._alphaMaxSideIndex+1}},WuQuant=_WuQuant;__publicField(WuQuant,"_alpha",3);__publicField(WuQuant,"_red",2);__publicField(WuQuant,"_green",1);__publicField(WuQuant,"_blue",0);var image_exports={};__export(image_exports,{AbstractImageQuantizer:()=>AbstractImageQuantizer,ErrorDiffusionArray:()=>ErrorDiffusionArray,ErrorDiffusionArrayKernel:()=>ErrorDiffusionArrayKernel,ErrorDiffusionRiemersma:()=>ErrorDiffusionRiemersma,NearestColor:()=>NearestColor});var AbstractImageQuantizer=class{quantizeSync(s,o){for(const h of this.quantize(s,o))if(h.pointContainer)return h.pointContainer;throw new Error("unreachable")}},NearestColor=class extends AbstractImageQuantizer{constructor(s){super(),__publicField(this,"_distance"),this._distance=s}*quantize(s,o){const h=s.getPointArray(),d=s.getWidth(),g=s.getHeight(),_=new ProgressTracker(g,99);for(let b=0;b<g;b++){_.shouldNotify(b)&&(yield{progress:_.progress});for(let j=0,et=b*d;j<d;j++,et++){const tt=h[et];tt.from(o.getNearestColor(this._distance,tt))}}yield{pointContainer:s,progress:100}}},ErrorDiffusionArrayKernel=(s=>(s[s.FloydSteinberg=0]="FloydSteinberg",s[s.FalseFloydSteinberg=1]="FalseFloydSteinberg",s[s.Stucki=2]="Stucki",s[s.Atkinson=3]="Atkinson",s[s.Jarvis=4]="Jarvis",s[s.Burkes=5]="Burkes",s[s.Sierra=6]="Sierra",s[s.TwoSierra=7]="TwoSierra",s[s.SierraLite=8]="SierraLite",s))(ErrorDiffusionArrayKernel||{}),ErrorDiffusionArray=class extends AbstractImageQuantizer{constructor(s,o,h=!0,d=0,g=!1){super(),__publicField(this,"_minColorDistance"),__publicField(this,"_serpentine"),__publicField(this,"_kernel"),__publicField(this,"_calculateErrorLikeGIMP"),__publicField(this,"_distance"),this._setKernel(o),this._distance=s,this._minColorDistance=d,this._serpentine=h,this._calculateErrorLikeGIMP=g}*quantize(s,o){const h=s.getPointArray(),d=new Point,g=s.getWidth(),_=s.getHeight(),b=[];let j=1,et=1;for(const rt of this._kernel){const at=rt[2]+1;et<at&&(et=at)}for(let rt=0;rt<et;rt++)this._fillErrorLine(b[rt]=[],g);const tt=new ProgressTracker(_,99);for(let rt=0;rt<_;rt++){tt.shouldNotify(rt)&&(yield{progress:tt.progress}),this._serpentine&&(j*=-1);const at=rt*g,st=j===1?0:g-1,At=j===1?g:-1;this._fillErrorLine(b[0],g),b.push(b.shift());const ht=b[0];for(let ct=st,_t=at+st;ct!==At;ct+=j,_t+=j){const gt=h[_t],wt=ht[ct];d.from(gt);const ft=Point.createByRGBA(inRange0to255Rounded(gt.r+wt[0]),inRange0to255Rounded(gt.g+wt[1]),inRange0to255Rounded(gt.b+wt[2]),inRange0to255Rounded(gt.a+wt[3])),dt=o.getNearestColor(this._distance,ft);if(gt.from(dt),this._minColorDistance&&this._distance.calculateNormalized(d,dt)<this._minColorDistance)continue;let xt,bt,Ct,Ut;this._calculateErrorLikeGIMP?(xt=ft.r-dt.r,bt=ft.g-dt.g,Ct=ft.b-dt.b,Ut=ft.a-dt.a):(xt=d.r-dt.r,bt=d.g-dt.g,Ct=d.b-dt.b,Ut=d.a-dt.a);const Qt=j===1?0:this._kernel.length-1,kt=j===1?this._kernel.length:-1;for(let Nt=Qt;Nt!==kt;Nt+=j){const Wt=this._kernel[Nt][1]*j,Vt=this._kernel[Nt][2];if(Wt+ct>=0&&Wt+ct<g&&Vt+rt>=0&&Vt+rt<_){const qt=this._kernel[Nt][0],_e=b[Vt][Wt+ct];_e[0]+=xt*qt,_e[1]+=bt*qt,_e[2]+=Ct*qt,_e[3]+=Ut*qt}}}}yield{pointContainer:s,progress:100}}_fillErrorLine(s,o){s.length>o&&(s.length=o);const h=s.length;for(let d=0;d<h;d++){const g=s[d];g[0]=g[1]=g[2]=g[3]=0}for(let d=h;d<o;d++)s[d]=[0,0,0,0]}_setKernel(s){switch(s){case 0:this._kernel=[[7/16,1,0],[3/16,-1,1],[5/16,0,1],[1/16,1,1]];break;case 1:this._kernel=[[3/8,1,0],[3/8,0,1],[2/8,1,1]];break;case 2:this._kernel=[[8/42,1,0],[4/42,2,0],[2/42,-2,1],[4/42,-1,1],[8/42,0,1],[4/42,1,1],[2/42,2,1],[1/42,-2,2],[2/42,-1,2],[4/42,0,2],[2/42,1,2],[1/42,2,2]];break;case 3:this._kernel=[[1/8,1,0],[1/8,2,0],[1/8,-1,1],[1/8,0,1],[1/8,1,1],[1/8,0,2]];break;case 4:this._kernel=[[7/48,1,0],[5/48,2,0],[3/48,-2,1],[5/48,-1,1],[7/48,0,1],[5/48,1,1],[3/48,2,1],[1/48,-2,2],[3/48,-1,2],[5/48,0,2],[3/48,1,2],[1/48,2,2]];break;case 5:this._kernel=[[8/32,1,0],[4/32,2,0],[2/32,-2,1],[4/32,-1,1],[8/32,0,1],[4/32,1,1],[2/32,2,1]];break;case 6:this._kernel=[[5/32,1,0],[3/32,2,0],[2/32,-2,1],[4/32,-1,1],[5/32,0,1],[4/32,1,1],[2/32,2,1],[2/32,-1,2],[3/32,0,2],[2/32,1,2]];break;case 7:this._kernel=[[4/16,1,0],[3/16,2,0],[1/16,-2,1],[2/16,-1,1],[3/16,0,1],[2/16,1,1],[1/16,2,1]];break;case 8:this._kernel=[[2/4,1,0],[1/4,-1,1],[1/4,0,1]];break;default:throw new Error(`ErrorDiffusionArray: unknown kernel = ${s}`)}}};function*hilbertCurve(s,o,h){const d=Math.max(s,o),g=Math.floor(Math.log(d)/Math.log(2)+1),_=new ProgressTracker(s*o,99),b={width:s,height:o,level:g,callback:h,tracker:_,index:0,x:0,y:0};yield*walkHilbert(b,1),visit(b,0)}function*walkHilbert(s,o){if(!(s.level<1)){switch(s.tracker.shouldNotify(s.index)&&(yield{progress:s.tracker.progress}),s.level--,o){case 2:yield*walkHilbert(s,1),visit(s,3),yield*walkHilbert(s,2),visit(s,4),yield*walkHilbert(s,2),visit(s,2),yield*walkHilbert(s,4);break;case 3:yield*walkHilbert(s,4),visit(s,2),yield*walkHilbert(s,3),visit(s,1),yield*walkHilbert(s,3),visit(s,3),yield*walkHilbert(s,1);break;case 1:yield*walkHilbert(s,2),visit(s,4),yield*walkHilbert(s,1),visit(s,3),yield*walkHilbert(s,1),visit(s,1),yield*walkHilbert(s,3);break;case 4:yield*walkHilbert(s,3),visit(s,1),yield*walkHilbert(s,4),visit(s,2),yield*walkHilbert(s,4),visit(s,4),yield*walkHilbert(s,2);break}s.level++}}function visit(s,o){switch(s.x>=0&&s.x<s.width&&s.y>=0&&s.y<s.height&&(s.callback(s.x,s.y),s.index++),o){case 2:s.x--;break;case 3:s.x++;break;case 1:s.y--;break;case 4:s.y++;break}}var ErrorDiffusionRiemersma=class extends AbstractImageQuantizer{constructor(s,o=16,h=1){super(),__publicField(this,"_distance"),__publicField(this,"_weights"),__publicField(this,"_errorQueueSize"),this._distance=s,this._errorQueueSize=o,this._weights=ErrorDiffusionRiemersma._createWeights(h,o)}*quantize(s,o){const h=s.getPointArray(),d=s.getWidth(),g=s.getHeight(),_=[];let b=0;for(let j=0;j<this._errorQueueSize;j++)_[j]={r:0,g:0,b:0,a:0};yield*hilbertCurve(d,g,(j,et)=>{const tt=h[j+et*d];let{r:rt,g:at,b:st,a:At}=tt;for(let gt=0;gt<this._errorQueueSize;gt++){const wt=this._weights[gt],ft=_[(gt+b)%this._errorQueueSize];rt+=ft.r*wt,at+=ft.g*wt,st+=ft.b*wt,At+=ft.a*wt}const ht=Point.createByRGBA(inRange0to255Rounded(rt),inRange0to255Rounded(at),inRange0to255Rounded(st),inRange0to255Rounded(At)),ct=o.getNearestColor(this._distance,ht);b=(b+1)%this._errorQueueSize;const _t=(b+this._errorQueueSize-1)%this._errorQueueSize;_[_t].r=tt.r-ct.r,_[_t].g=tt.g-ct.g,_[_t].b=tt.b-ct.b,_[_t].a=tt.a-ct.a,tt.from(ct)}),yield{pointContainer:s,progress:100}}static _createWeights(s,o){const h=[],d=Math.exp(Math.log(o)/(o-1));for(let g=0,_=1;g<o;g++)h[g]=(_+.5|0)/o*s,_*=d;return h}},quality_exports={};__export(quality_exports,{ssim:()=>ssim});var K1=.01,K2=.03;function ssim(s,o){if(s.getHeight()!==o.getHeight()||s.getWidth()!==o.getWidth())throw new Error("Images have different sizes!");const h=255,d=(K1*h)**2,g=(K2*h)**2;let _=0,b=0;return iterate(s,o,(j,et,tt,rt)=>{let at=0,st=0,At=0;for(let wt=0;wt<j.length;wt++)st+=(j[wt]-tt)**2,At+=(et[wt]-rt)**2,at+=(j[wt]-tt)*(et[wt]-rt);const ht=j.length-1;st/=ht,At/=ht,at/=ht;const ct=(2*tt*rt+d)*(2*at+g),_t=(tt**2+rt**2+d)*(st+At+g),gt=ct/_t;b+=gt,_++}),b/_}function iterate(s,o,h){const d=s.getWidth(),g=s.getHeight();for(let _=0;_<g;_+=8)for(let b=0;b<d;b+=8){const j=Math.min(8,d-b),et=Math.min(8,g-_),tt=calculateLumaValuesForWindow(s,b,_,j,et),rt=calculateLumaValuesForWindow(o,b,_,j,et),at=calculateAverageLuma(tt),st=calculateAverageLuma(rt);h(tt,rt,at,st)}}function calculateLumaValuesForWindow(s,o,h,d,g){const _=s.getPointArray(),b=[];let j=0;for(let et=h;et<h+g;et++){const tt=et*s.getWidth();for(let rt=o;rt<o+d;rt++){const at=_[tt+rt];b[j]=at.r*.2126+at.g*.7152+at.b*.0722,j++}}return b}function calculateAverageLuma(s){let o=0;for(const h of s)o+=h;return o/s.length}typeof setImmediate=="function"?setImmediate:typeof process<"u"&&(process==null||process.nextTick);function buildPaletteSync(s,{colorDistanceFormula:o,paletteQuantization:h,colors:d}={}){const g=colorDistanceFormulaToColorDistance(o),_=paletteQuantizationToPaletteQuantizer(g,h,d);return s.forEach(b=>_.sample(b)),_.quantizeSync()}function applyPaletteSync(s,o,{colorDistanceFormula:h,imageQuantization:d}={}){const g=colorDistanceFormulaToColorDistance(h);return imageQuantizationToImageQuantizer(g,d).quantizeSync(s,o)}function colorDistanceFormulaToColorDistance(s="euclidean-bt709"){switch(s){case"cie94-graphic-arts":return new CIE94GraphicArts;case"cie94-textiles":return new CIE94Textiles;case"ciede2000":return new CIEDE2000;case"color-metric":return new CMetric;case"euclidean":return new Euclidean;case"euclidean-bt709":return new EuclideanBT709;case"euclidean-bt709-noalpha":return new EuclideanBT709NoAlpha;case"manhattan":return new Manhattan;case"manhattan-bt709":return new ManhattanBT709;case"manhattan-nommyde":return new ManhattanNommyde;case"pngquant":return new PNGQuant;default:throw new Error(`Unknown colorDistanceFormula ${s}`)}}function imageQuantizationToImageQuantizer(s,o="floyd-steinberg"){switch(o){case"nearest":return new NearestColor(s);case"riemersma":return new ErrorDiffusionRiemersma(s);case"floyd-steinberg":return new ErrorDiffusionArray(s,0);case"false-floyd-steinberg":return new ErrorDiffusionArray(s,1);case"stucki":return new ErrorDiffusionArray(s,2);case"atkinson":return new ErrorDiffusionArray(s,3);case"jarvis":return new ErrorDiffusionArray(s,4);case"burkes":return new ErrorDiffusionArray(s,5);case"sierra":return new ErrorDiffusionArray(s,6);case"two-sierra":return new ErrorDiffusionArray(s,7);case"sierra-lite":return new ErrorDiffusionArray(s,8);default:throw new Error(`Unknown imageQuantization ${o}`)}}function paletteQuantizationToPaletteQuantizer(s,o="wuquant",h=256){switch(o){case"neuquant":return new NeuQuant(s,h);case"rgbquant":return new RGBQuant(s,h);case"wuquant":return new WuQuant(s,h);case"neuquant-float":return new NeuQuantFloat(s,h);default:throw new Error(`Unknown paletteQuantization ${o}`)}}/**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * cie94.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * ciede2000.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * cmetric.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * common.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * constants.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * ditherErrorDiffusionArray.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * euclidean.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * helper.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * hueStatistics.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * iq.ts - Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * lab2rgb.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * lab2xyz.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * manhattanNeuQuant.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * nearestColor.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * palette.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * pngQuant.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * point.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * pointContainer.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * rgb2hsl.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * rgb2lab.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * rgb2xyz.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * ssim.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * wuQuant.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * xyz2lab.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * xyz2rgb.ts - part of Image Quantization Library
 *//**
 * @preserve
 * MIT License
 *
 * Copyright 2015-2018 Igor Bezkrovnyi
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL
 * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * riemersma.ts - part of Image Quantization Library
 *//**
 * @preserve TypeScript port:
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * colorHistogram.ts - part of Image Quantization Library
 *//**
 * @preserve TypeScript port:
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * neuquant.ts - part of Image Quantization Library
 *//**
 * @preserve TypeScript port:
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * rgbquant.ts - part of Image Quantization Library
 */var common={},hasRequiredCommon;function requireCommon(){return hasRequiredCommon||(hasRequiredCommon=1,function(s){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function h(_,b){return Object.prototype.hasOwnProperty.call(_,b)}s.assign=function(_){for(var b=Array.prototype.slice.call(arguments,1);b.length;){var j=b.shift();if(j){if(typeof j!="object")throw new TypeError(j+"must be non-object");for(var et in j)h(j,et)&&(_[et]=j[et])}}return _},s.shrinkBuf=function(_,b){return _.length===b?_:_.subarray?_.subarray(0,b):(_.length=b,_)};var d={arraySet:function(_,b,j,et,tt){if(b.subarray&&_.subarray){_.set(b.subarray(j,j+et),tt);return}for(var rt=0;rt<et;rt++)_[tt+rt]=b[j+rt]},flattenChunks:function(_){var b,j,et,tt,rt,at;for(et=0,b=0,j=_.length;b<j;b++)et+=_[b].length;for(at=new Uint8Array(et),tt=0,b=0,j=_.length;b<j;b++)rt=_[b],at.set(rt,tt),tt+=rt.length;return at}},g={arraySet:function(_,b,j,et,tt){for(var rt=0;rt<et;rt++)_[tt+rt]=b[j+rt]},flattenChunks:function(_){return[].concat.apply([],_)}};s.setTyped=function(_){_?(s.Buf8=Uint8Array,s.Buf16=Uint16Array,s.Buf32=Int32Array,s.assign(s,d)):(s.Buf8=Array,s.Buf16=Array,s.Buf32=Array,s.assign(s,g))},s.setTyped(o)}(common)),common}var deflate$1={},deflate={},trees={},hasRequiredTrees;function requireTrees(){if(hasRequiredTrees)return trees;hasRequiredTrees=1;var s=requireCommon(),o=4,h=0,d=1,g=2;function _(zt){for(var br=zt.length;--br>=0;)zt[br]=0}var b=0,j=1,et=2,tt=3,rt=258,at=29,st=256,At=st+1+at,ht=30,ct=19,_t=2*At+1,gt=15,wt=16,ft=7,dt=256,xt=16,bt=17,Ct=18,Ut=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Qt=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],kt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Nt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Wt=512,Vt=new Array((At+2)*2);_(Vt);var qt=new Array(ht*2);_(qt);var _e=new Array(Wt);_(_e);var Jt=new Array(rt-tt+1);_(Jt);var lr=new Array(at);_(lr);var jt=new Array(ht);_(jt);function ur(zt,br,Sr,kr,ir){this.static_tree=zt,this.extra_bits=br,this.extra_base=Sr,this.elems=kr,this.max_length=ir,this.has_stree=zt&&zt.length}var Ar,mr,dr;function Nr(zt,br){this.dyn_tree=zt,this.max_code=0,this.stat_desc=br}function Ur(zt){return zt<256?_e[zt]:_e[256+(zt>>>7)]}function nr(zt,br){zt.pending_buf[zt.pending++]=br&255,zt.pending_buf[zt.pending++]=br>>>8&255}function hr(zt,br,Sr){zt.bi_valid>wt-Sr?(zt.bi_buf|=br<<zt.bi_valid&65535,nr(zt,zt.bi_buf),zt.bi_buf=br>>wt-zt.bi_valid,zt.bi_valid+=Sr-wt):(zt.bi_buf|=br<<zt.bi_valid&65535,zt.bi_valid+=Sr)}function Dr(zt,br,Sr){hr(zt,Sr[br*2],Sr[br*2+1])}function Qr(zt,br){var Sr=0;do Sr|=zt&1,zt>>>=1,Sr<<=1;while(--br>0);return Sr>>>1}function vr(zt){zt.bi_valid===16?(nr(zt,zt.bi_buf),zt.bi_buf=0,zt.bi_valid=0):zt.bi_valid>=8&&(zt.pending_buf[zt.pending++]=zt.bi_buf&255,zt.bi_buf>>=8,zt.bi_valid-=8)}function on(zt,br){var Sr=br.dyn_tree,kr=br.max_code,ir=br.stat_desc.static_tree,Er=br.stat_desc.has_stree,Lt=br.stat_desc.extra_bits,Ir=br.stat_desc.extra_base,un=br.stat_desc.max_length,yt,_r,yr,Kt,tr,pr,sn=0;for(Kt=0;Kt<=gt;Kt++)zt.bl_count[Kt]=0;for(Sr[zt.heap[zt.heap_max]*2+1]=0,yt=zt.heap_max+1;yt<_t;yt++)_r=zt.heap[yt],Kt=Sr[Sr[_r*2+1]*2+1]+1,Kt>un&&(Kt=un,sn++),Sr[_r*2+1]=Kt,!(_r>kr)&&(zt.bl_count[Kt]++,tr=0,_r>=Ir&&(tr=Lt[_r-Ir]),pr=Sr[_r*2],zt.opt_len+=pr*(Kt+tr),Er&&(zt.static_len+=pr*(ir[_r*2+1]+tr)));if(sn!==0){do{for(Kt=un-1;zt.bl_count[Kt]===0;)Kt--;zt.bl_count[Kt]--,zt.bl_count[Kt+1]+=2,zt.bl_count[un]--,sn-=2}while(sn>0);for(Kt=un;Kt!==0;Kt--)for(_r=zt.bl_count[Kt];_r!==0;)yr=zt.heap[--yt],!(yr>kr)&&(Sr[yr*2+1]!==Kt&&(zt.opt_len+=(Kt-Sr[yr*2+1])*Sr[yr*2],Sr[yr*2+1]=Kt),_r--)}}function en(zt,br,Sr){var kr=new Array(gt+1),ir=0,Er,Lt;for(Er=1;Er<=gt;Er++)kr[Er]=ir=ir+Sr[Er-1]<<1;for(Lt=0;Lt<=br;Lt++){var Ir=zt[Lt*2+1];Ir!==0&&(zt[Lt*2]=Qr(kr[Ir]++,Ir))}}function zr(){var zt,br,Sr,kr,ir,Er=new Array(gt+1);for(Sr=0,kr=0;kr<at-1;kr++)for(lr[kr]=Sr,zt=0;zt<1<<Ut[kr];zt++)Jt[Sr++]=kr;for(Jt[Sr-1]=kr,ir=0,kr=0;kr<16;kr++)for(jt[kr]=ir,zt=0;zt<1<<Qt[kr];zt++)_e[ir++]=kr;for(ir>>=7;kr<ht;kr++)for(jt[kr]=ir<<7,zt=0;zt<1<<Qt[kr]-7;zt++)_e[256+ir++]=kr;for(br=0;br<=gt;br++)Er[br]=0;for(zt=0;zt<=143;)Vt[zt*2+1]=8,zt++,Er[8]++;for(;zt<=255;)Vt[zt*2+1]=9,zt++,Er[9]++;for(;zt<=279;)Vt[zt*2+1]=7,zt++,Er[7]++;for(;zt<=287;)Vt[zt*2+1]=8,zt++,Er[8]++;for(en(Vt,At+1,Er),zt=0;zt<ht;zt++)qt[zt*2+1]=5,qt[zt*2]=Qr(zt,5);Ar=new ur(Vt,Ut,st+1,At,gt),mr=new ur(qt,Qt,0,ht,gt),dr=new ur(new Array(0),kt,0,ct,ft)}function or(zt){var br;for(br=0;br<At;br++)zt.dyn_ltree[br*2]=0;for(br=0;br<ht;br++)zt.dyn_dtree[br*2]=0;for(br=0;br<ct;br++)zt.bl_tree[br*2]=0;zt.dyn_ltree[dt*2]=1,zt.opt_len=zt.static_len=0,zt.last_lit=zt.matches=0}function xr(zt){zt.bi_valid>8?nr(zt,zt.bi_buf):zt.bi_valid>0&&(zt.pending_buf[zt.pending++]=zt.bi_buf),zt.bi_buf=0,zt.bi_valid=0}function Wr(zt,br,Sr,kr){xr(zt),nr(zt,Sr),nr(zt,~Sr),s.arraySet(zt.pending_buf,zt.window,br,Sr,zt.pending),zt.pending+=Sr}function $r(zt,br,Sr,kr){var ir=br*2,Er=Sr*2;return zt[ir]<zt[Er]||zt[ir]===zt[Er]&&kr[br]<=kr[Sr]}function Or(zt,br,Sr){for(var kr=zt.heap[Sr],ir=Sr<<1;ir<=zt.heap_len&&(ir<zt.heap_len&&$r(br,zt.heap[ir+1],zt.heap[ir],zt.depth)&&ir++,!$r(br,kr,zt.heap[ir],zt.depth));)zt.heap[Sr]=zt.heap[ir],Sr=ir,ir<<=1;zt.heap[Sr]=kr}function qr(zt,br,Sr){var kr,ir,Er=0,Lt,Ir;if(zt.last_lit!==0)do kr=zt.pending_buf[zt.d_buf+Er*2]<<8|zt.pending_buf[zt.d_buf+Er*2+1],ir=zt.pending_buf[zt.l_buf+Er],Er++,kr===0?Dr(zt,ir,br):(Lt=Jt[ir],Dr(zt,Lt+st+1,br),Ir=Ut[Lt],Ir!==0&&(ir-=lr[Lt],hr(zt,ir,Ir)),kr--,Lt=Ur(kr),Dr(zt,Lt,Sr),Ir=Qt[Lt],Ir!==0&&(kr-=jt[Lt],hr(zt,kr,Ir)));while(Er<zt.last_lit);Dr(zt,dt,br)}function fr(zt,br){var Sr=br.dyn_tree,kr=br.stat_desc.static_tree,ir=br.stat_desc.has_stree,Er=br.stat_desc.elems,Lt,Ir,un=-1,yt;for(zt.heap_len=0,zt.heap_max=_t,Lt=0;Lt<Er;Lt++)Sr[Lt*2]!==0?(zt.heap[++zt.heap_len]=un=Lt,zt.depth[Lt]=0):Sr[Lt*2+1]=0;for(;zt.heap_len<2;)yt=zt.heap[++zt.heap_len]=un<2?++un:0,Sr[yt*2]=1,zt.depth[yt]=0,zt.opt_len--,ir&&(zt.static_len-=kr[yt*2+1]);for(br.max_code=un,Lt=zt.heap_len>>1;Lt>=1;Lt--)Or(zt,Sr,Lt);yt=Er;do Lt=zt.heap[1],zt.heap[1]=zt.heap[zt.heap_len--],Or(zt,Sr,1),Ir=zt.heap[1],zt.heap[--zt.heap_max]=Lt,zt.heap[--zt.heap_max]=Ir,Sr[yt*2]=Sr[Lt*2]+Sr[Ir*2],zt.depth[yt]=(zt.depth[Lt]>=zt.depth[Ir]?zt.depth[Lt]:zt.depth[Ir])+1,Sr[Lt*2+1]=Sr[Ir*2+1]=yt,zt.heap[1]=yt++,Or(zt,Sr,1);while(zt.heap_len>=2);zt.heap[--zt.heap_max]=zt.heap[1],on(zt,br),en(Sr,un,zt.bl_count)}function Kr(zt,br,Sr){var kr,ir=-1,Er,Lt=br[0*2+1],Ir=0,un=7,yt=4;for(Lt===0&&(un=138,yt=3),br[(Sr+1)*2+1]=65535,kr=0;kr<=Sr;kr++)Er=Lt,Lt=br[(kr+1)*2+1],!(++Ir<un&&Er===Lt)&&(Ir<yt?zt.bl_tree[Er*2]+=Ir:Er!==0?(Er!==ir&&zt.bl_tree[Er*2]++,zt.bl_tree[xt*2]++):Ir<=10?zt.bl_tree[bt*2]++:zt.bl_tree[Ct*2]++,Ir=0,ir=Er,Lt===0?(un=138,yt=3):Er===Lt?(un=6,yt=3):(un=7,yt=4))}function jr(zt,br,Sr){var kr,ir=-1,Er,Lt=br[0*2+1],Ir=0,un=7,yt=4;for(Lt===0&&(un=138,yt=3),kr=0;kr<=Sr;kr++)if(Er=Lt,Lt=br[(kr+1)*2+1],!(++Ir<un&&Er===Lt)){if(Ir<yt)do Dr(zt,Er,zt.bl_tree);while(--Ir!==0);else Er!==0?(Er!==ir&&(Dr(zt,Er,zt.bl_tree),Ir--),Dr(zt,xt,zt.bl_tree),hr(zt,Ir-3,2)):Ir<=10?(Dr(zt,bt,zt.bl_tree),hr(zt,Ir-3,3)):(Dr(zt,Ct,zt.bl_tree),hr(zt,Ir-11,7));Ir=0,ir=Er,Lt===0?(un=138,yt=3):Er===Lt?(un=6,yt=3):(un=7,yt=4)}}function Xr(zt){var br;for(Kr(zt,zt.dyn_ltree,zt.l_desc.max_code),Kr(zt,zt.dyn_dtree,zt.d_desc.max_code),fr(zt,zt.bl_desc),br=ct-1;br>=3&&zt.bl_tree[Nt[br]*2+1]===0;br--);return zt.opt_len+=3*(br+1)+5+5+4,br}function Tr(zt,br,Sr,kr){var ir;for(hr(zt,br-257,5),hr(zt,Sr-1,5),hr(zt,kr-4,4),ir=0;ir<kr;ir++)hr(zt,zt.bl_tree[Nt[ir]*2+1],3);jr(zt,zt.dyn_ltree,br-1),jr(zt,zt.dyn_dtree,Sr-1)}function An(zt){var br=4093624447,Sr;for(Sr=0;Sr<=31;Sr++,br>>>=1)if(br&1&&zt.dyn_ltree[Sr*2]!==0)return h;if(zt.dyn_ltree[9*2]!==0||zt.dyn_ltree[10*2]!==0||zt.dyn_ltree[13*2]!==0)return d;for(Sr=32;Sr<st;Sr++)if(zt.dyn_ltree[Sr*2]!==0)return d;return h}var Gr=!1;function Yr(zt){Gr||(zr(),Gr=!0),zt.l_desc=new Nr(zt.dyn_ltree,Ar),zt.d_desc=new Nr(zt.dyn_dtree,mr),zt.bl_desc=new Nr(zt.bl_tree,dr),zt.bi_buf=0,zt.bi_valid=0,or(zt)}function Zr(zt,br,Sr,kr){hr(zt,(b<<1)+(kr?1:0),3),Wr(zt,br,Sr)}function ln(zt){hr(zt,j<<1,3),Dr(zt,dt,Vt),vr(zt)}function Hr(zt,br,Sr,kr){var ir,Er,Lt=0;zt.level>0?(zt.strm.data_type===g&&(zt.strm.data_type=An(zt)),fr(zt,zt.l_desc),fr(zt,zt.d_desc),Lt=Xr(zt),ir=zt.opt_len+3+7>>>3,Er=zt.static_len+3+7>>>3,Er<=ir&&(ir=Er)):ir=Er=Sr+5,Sr+4<=ir&&br!==-1?Zr(zt,br,Sr,kr):zt.strategy===o||Er===ir?(hr(zt,(j<<1)+(kr?1:0),3),qr(zt,Vt,qt)):(hr(zt,(et<<1)+(kr?1:0),3),Tr(zt,zt.l_desc.max_code+1,zt.d_desc.max_code+1,Lt+1),qr(zt,zt.dyn_ltree,zt.dyn_dtree)),or(zt),kr&&xr(zt)}function rn(zt,br,Sr){return zt.pending_buf[zt.d_buf+zt.last_lit*2]=br>>>8&255,zt.pending_buf[zt.d_buf+zt.last_lit*2+1]=br&255,zt.pending_buf[zt.l_buf+zt.last_lit]=Sr&255,zt.last_lit++,br===0?zt.dyn_ltree[Sr*2]++:(zt.matches++,br--,zt.dyn_ltree[(Jt[Sr]+st+1)*2]++,zt.dyn_dtree[Ur(br)*2]++),zt.last_lit===zt.lit_bufsize-1}return trees._tr_init=Yr,trees._tr_stored_block=Zr,trees._tr_flush_block=Hr,trees._tr_tally=rn,trees._tr_align=ln,trees}var adler32_1,hasRequiredAdler32;function requireAdler32(){if(hasRequiredAdler32)return adler32_1;hasRequiredAdler32=1;function s(o,h,d,g){for(var _=o&65535|0,b=o>>>16&65535|0,j=0;d!==0;){j=d>2e3?2e3:d,d-=j;do _=_+h[g++]|0,b=b+_|0;while(--j);_%=65521,b%=65521}return _|b<<16|0}return adler32_1=s,adler32_1}var crc32_1,hasRequiredCrc32;function requireCrc32(){if(hasRequiredCrc32)return crc32_1;hasRequiredCrc32=1;function s(){for(var d,g=[],_=0;_<256;_++){d=_;for(var b=0;b<8;b++)d=d&1?3988292384^d>>>1:d>>>1;g[_]=d}return g}var o=s();function h(d,g,_,b){var j=o,et=b+_;d^=-1;for(var tt=b;tt<et;tt++)d=d>>>8^j[(d^g[tt])&255];return d^-1}return crc32_1=h,crc32_1}var messages,hasRequiredMessages;function requireMessages(){return hasRequiredMessages||(hasRequiredMessages=1,messages={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}),messages}var hasRequiredDeflate$1;function requireDeflate$1(){if(hasRequiredDeflate$1)return deflate;hasRequiredDeflate$1=1;var s=requireCommon(),o=requireTrees(),h=requireAdler32(),d=requireCrc32(),g=requireMessages(),_=0,b=1,j=3,et=4,tt=5,rt=0,at=1,st=-2,At=-3,ht=-5,ct=-1,_t=1,gt=2,wt=3,ft=4,dt=0,xt=2,bt=8,Ct=9,Ut=15,Qt=8,kt=29,Nt=256,Wt=Nt+1+kt,Vt=30,qt=19,_e=2*Wt+1,Jt=15,lr=3,jt=258,ur=jt+lr+1,Ar=32,mr=42,dr=69,Nr=73,Ur=91,nr=103,hr=113,Dr=666,Qr=1,vr=2,on=3,en=4,zr=3;function or(yt,_r){return yt.msg=g[_r],_r}function xr(yt){return(yt<<1)-(yt>4?9:0)}function Wr(yt){for(var _r=yt.length;--_r>=0;)yt[_r]=0}function $r(yt){var _r=yt.state,yr=_r.pending;yr>yt.avail_out&&(yr=yt.avail_out),yr!==0&&(s.arraySet(yt.output,_r.pending_buf,_r.pending_out,yr,yt.next_out),yt.next_out+=yr,_r.pending_out+=yr,yt.total_out+=yr,yt.avail_out-=yr,_r.pending-=yr,_r.pending===0&&(_r.pending_out=0))}function Or(yt,_r){o._tr_flush_block(yt,yt.block_start>=0?yt.block_start:-1,yt.strstart-yt.block_start,_r),yt.block_start=yt.strstart,$r(yt.strm)}function qr(yt,_r){yt.pending_buf[yt.pending++]=_r}function fr(yt,_r){yt.pending_buf[yt.pending++]=_r>>>8&255,yt.pending_buf[yt.pending++]=_r&255}function Kr(yt,_r,yr,Kt){var tr=yt.avail_in;return tr>Kt&&(tr=Kt),tr===0?0:(yt.avail_in-=tr,s.arraySet(_r,yt.input,yt.next_in,tr,yr),yt.state.wrap===1?yt.adler=h(yt.adler,_r,tr,yr):yt.state.wrap===2&&(yt.adler=d(yt.adler,_r,tr,yr)),yt.next_in+=tr,yt.total_in+=tr,tr)}function jr(yt,_r){var yr=yt.max_chain_length,Kt=yt.strstart,tr,pr,sn=yt.prev_length,mt=yt.nice_match,ot=yt.strstart>yt.w_size-ur?yt.strstart-(yt.w_size-ur):0,it=yt.window,lt=yt.w_mask,pt=yt.prev,Et=yt.strstart+jt,Pt=it[Kt+sn-1],Ht=it[Kt+sn];yt.prev_length>=yt.good_match&&(yr>>=2),mt>yt.lookahead&&(mt=yt.lookahead);do if(tr=_r,!(it[tr+sn]!==Ht||it[tr+sn-1]!==Pt||it[tr]!==it[Kt]||it[++tr]!==it[Kt+1])){Kt+=2,tr++;do;while(it[++Kt]===it[++tr]&&it[++Kt]===it[++tr]&&it[++Kt]===it[++tr]&&it[++Kt]===it[++tr]&&it[++Kt]===it[++tr]&&it[++Kt]===it[++tr]&&it[++Kt]===it[++tr]&&it[++Kt]===it[++tr]&&Kt<Et);if(pr=jt-(Et-Kt),Kt=Et-jt,pr>sn){if(yt.match_start=_r,sn=pr,pr>=mt)break;Pt=it[Kt+sn-1],Ht=it[Kt+sn]}}while((_r=pt[_r&lt])>ot&&--yr!==0);return sn<=yt.lookahead?sn:yt.lookahead}function Xr(yt){var _r=yt.w_size,yr,Kt,tr,pr,sn;do{if(pr=yt.window_size-yt.lookahead-yt.strstart,yt.strstart>=_r+(_r-ur)){s.arraySet(yt.window,yt.window,_r,_r,0),yt.match_start-=_r,yt.strstart-=_r,yt.block_start-=_r,Kt=yt.hash_size,yr=Kt;do tr=yt.head[--yr],yt.head[yr]=tr>=_r?tr-_r:0;while(--Kt);Kt=_r,yr=Kt;do tr=yt.prev[--yr],yt.prev[yr]=tr>=_r?tr-_r:0;while(--Kt);pr+=_r}if(yt.strm.avail_in===0)break;if(Kt=Kr(yt.strm,yt.window,yt.strstart+yt.lookahead,pr),yt.lookahead+=Kt,yt.lookahead+yt.insert>=lr)for(sn=yt.strstart-yt.insert,yt.ins_h=yt.window[sn],yt.ins_h=(yt.ins_h<<yt.hash_shift^yt.window[sn+1])&yt.hash_mask;yt.insert&&(yt.ins_h=(yt.ins_h<<yt.hash_shift^yt.window[sn+lr-1])&yt.hash_mask,yt.prev[sn&yt.w_mask]=yt.head[yt.ins_h],yt.head[yt.ins_h]=sn,sn++,yt.insert--,!(yt.lookahead+yt.insert<lr)););}while(yt.lookahead<ur&&yt.strm.avail_in!==0)}function Tr(yt,_r){var yr=65535;for(yr>yt.pending_buf_size-5&&(yr=yt.pending_buf_size-5);;){if(yt.lookahead<=1){if(Xr(yt),yt.lookahead===0&&_r===_)return Qr;if(yt.lookahead===0)break}yt.strstart+=yt.lookahead,yt.lookahead=0;var Kt=yt.block_start+yr;if((yt.strstart===0||yt.strstart>=Kt)&&(yt.lookahead=yt.strstart-Kt,yt.strstart=Kt,Or(yt,!1),yt.strm.avail_out===0)||yt.strstart-yt.block_start>=yt.w_size-ur&&(Or(yt,!1),yt.strm.avail_out===0))return Qr}return yt.insert=0,_r===et?(Or(yt,!0),yt.strm.avail_out===0?on:en):(yt.strstart>yt.block_start&&(Or(yt,!1),yt.strm.avail_out),Qr)}function An(yt,_r){for(var yr,Kt;;){if(yt.lookahead<ur){if(Xr(yt),yt.lookahead<ur&&_r===_)return Qr;if(yt.lookahead===0)break}if(yr=0,yt.lookahead>=lr&&(yt.ins_h=(yt.ins_h<<yt.hash_shift^yt.window[yt.strstart+lr-1])&yt.hash_mask,yr=yt.prev[yt.strstart&yt.w_mask]=yt.head[yt.ins_h],yt.head[yt.ins_h]=yt.strstart),yr!==0&&yt.strstart-yr<=yt.w_size-ur&&(yt.match_length=jr(yt,yr)),yt.match_length>=lr)if(Kt=o._tr_tally(yt,yt.strstart-yt.match_start,yt.match_length-lr),yt.lookahead-=yt.match_length,yt.match_length<=yt.max_lazy_match&&yt.lookahead>=lr){yt.match_length--;do yt.strstart++,yt.ins_h=(yt.ins_h<<yt.hash_shift^yt.window[yt.strstart+lr-1])&yt.hash_mask,yr=yt.prev[yt.strstart&yt.w_mask]=yt.head[yt.ins_h],yt.head[yt.ins_h]=yt.strstart;while(--yt.match_length!==0);yt.strstart++}else yt.strstart+=yt.match_length,yt.match_length=0,yt.ins_h=yt.window[yt.strstart],yt.ins_h=(yt.ins_h<<yt.hash_shift^yt.window[yt.strstart+1])&yt.hash_mask;else Kt=o._tr_tally(yt,0,yt.window[yt.strstart]),yt.lookahead--,yt.strstart++;if(Kt&&(Or(yt,!1),yt.strm.avail_out===0))return Qr}return yt.insert=yt.strstart<lr-1?yt.strstart:lr-1,_r===et?(Or(yt,!0),yt.strm.avail_out===0?on:en):yt.last_lit&&(Or(yt,!1),yt.strm.avail_out===0)?Qr:vr}function Gr(yt,_r){for(var yr,Kt,tr;;){if(yt.lookahead<ur){if(Xr(yt),yt.lookahead<ur&&_r===_)return Qr;if(yt.lookahead===0)break}if(yr=0,yt.lookahead>=lr&&(yt.ins_h=(yt.ins_h<<yt.hash_shift^yt.window[yt.strstart+lr-1])&yt.hash_mask,yr=yt.prev[yt.strstart&yt.w_mask]=yt.head[yt.ins_h],yt.head[yt.ins_h]=yt.strstart),yt.prev_length=yt.match_length,yt.prev_match=yt.match_start,yt.match_length=lr-1,yr!==0&&yt.prev_length<yt.max_lazy_match&&yt.strstart-yr<=yt.w_size-ur&&(yt.match_length=jr(yt,yr),yt.match_length<=5&&(yt.strategy===_t||yt.match_length===lr&&yt.strstart-yt.match_start>4096)&&(yt.match_length=lr-1)),yt.prev_length>=lr&&yt.match_length<=yt.prev_length){tr=yt.strstart+yt.lookahead-lr,Kt=o._tr_tally(yt,yt.strstart-1-yt.prev_match,yt.prev_length-lr),yt.lookahead-=yt.prev_length-1,yt.prev_length-=2;do++yt.strstart<=tr&&(yt.ins_h=(yt.ins_h<<yt.hash_shift^yt.window[yt.strstart+lr-1])&yt.hash_mask,yr=yt.prev[yt.strstart&yt.w_mask]=yt.head[yt.ins_h],yt.head[yt.ins_h]=yt.strstart);while(--yt.prev_length!==0);if(yt.match_available=0,yt.match_length=lr-1,yt.strstart++,Kt&&(Or(yt,!1),yt.strm.avail_out===0))return Qr}else if(yt.match_available){if(Kt=o._tr_tally(yt,0,yt.window[yt.strstart-1]),Kt&&Or(yt,!1),yt.strstart++,yt.lookahead--,yt.strm.avail_out===0)return Qr}else yt.match_available=1,yt.strstart++,yt.lookahead--}return yt.match_available&&(Kt=o._tr_tally(yt,0,yt.window[yt.strstart-1]),yt.match_available=0),yt.insert=yt.strstart<lr-1?yt.strstart:lr-1,_r===et?(Or(yt,!0),yt.strm.avail_out===0?on:en):yt.last_lit&&(Or(yt,!1),yt.strm.avail_out===0)?Qr:vr}function Yr(yt,_r){for(var yr,Kt,tr,pr,sn=yt.window;;){if(yt.lookahead<=jt){if(Xr(yt),yt.lookahead<=jt&&_r===_)return Qr;if(yt.lookahead===0)break}if(yt.match_length=0,yt.lookahead>=lr&&yt.strstart>0&&(tr=yt.strstart-1,Kt=sn[tr],Kt===sn[++tr]&&Kt===sn[++tr]&&Kt===sn[++tr])){pr=yt.strstart+jt;do;while(Kt===sn[++tr]&&Kt===sn[++tr]&&Kt===sn[++tr]&&Kt===sn[++tr]&&Kt===sn[++tr]&&Kt===sn[++tr]&&Kt===sn[++tr]&&Kt===sn[++tr]&&tr<pr);yt.match_length=jt-(pr-tr),yt.match_length>yt.lookahead&&(yt.match_length=yt.lookahead)}if(yt.match_length>=lr?(yr=o._tr_tally(yt,1,yt.match_length-lr),yt.lookahead-=yt.match_length,yt.strstart+=yt.match_length,yt.match_length=0):(yr=o._tr_tally(yt,0,yt.window[yt.strstart]),yt.lookahead--,yt.strstart++),yr&&(Or(yt,!1),yt.strm.avail_out===0))return Qr}return yt.insert=0,_r===et?(Or(yt,!0),yt.strm.avail_out===0?on:en):yt.last_lit&&(Or(yt,!1),yt.strm.avail_out===0)?Qr:vr}function Zr(yt,_r){for(var yr;;){if(yt.lookahead===0&&(Xr(yt),yt.lookahead===0)){if(_r===_)return Qr;break}if(yt.match_length=0,yr=o._tr_tally(yt,0,yt.window[yt.strstart]),yt.lookahead--,yt.strstart++,yr&&(Or(yt,!1),yt.strm.avail_out===0))return Qr}return yt.insert=0,_r===et?(Or(yt,!0),yt.strm.avail_out===0?on:en):yt.last_lit&&(Or(yt,!1),yt.strm.avail_out===0)?Qr:vr}function ln(yt,_r,yr,Kt,tr){this.good_length=yt,this.max_lazy=_r,this.nice_length=yr,this.max_chain=Kt,this.func=tr}var Hr;Hr=[new ln(0,0,0,0,Tr),new ln(4,4,8,4,An),new ln(4,5,16,8,An),new ln(4,6,32,32,An),new ln(4,4,16,16,Gr),new ln(8,16,32,32,Gr),new ln(8,16,128,128,Gr),new ln(8,32,128,256,Gr),new ln(32,128,258,1024,Gr),new ln(32,258,258,4096,Gr)];function rn(yt){yt.window_size=2*yt.w_size,Wr(yt.head),yt.max_lazy_match=Hr[yt.level].max_lazy,yt.good_match=Hr[yt.level].good_length,yt.nice_match=Hr[yt.level].nice_length,yt.max_chain_length=Hr[yt.level].max_chain,yt.strstart=0,yt.block_start=0,yt.lookahead=0,yt.insert=0,yt.match_length=yt.prev_length=lr-1,yt.match_available=0,yt.ins_h=0}function zt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=bt,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new s.Buf16(_e*2),this.dyn_dtree=new s.Buf16((2*Vt+1)*2),this.bl_tree=new s.Buf16((2*qt+1)*2),Wr(this.dyn_ltree),Wr(this.dyn_dtree),Wr(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new s.Buf16(Jt+1),this.heap=new s.Buf16(2*Wt+1),Wr(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new s.Buf16(2*Wt+1),Wr(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function br(yt){var _r;return!yt||!yt.state?or(yt,st):(yt.total_in=yt.total_out=0,yt.data_type=xt,_r=yt.state,_r.pending=0,_r.pending_out=0,_r.wrap<0&&(_r.wrap=-_r.wrap),_r.status=_r.wrap?mr:hr,yt.adler=_r.wrap===2?0:1,_r.last_flush=_,o._tr_init(_r),rt)}function Sr(yt){var _r=br(yt);return _r===rt&&rn(yt.state),_r}function kr(yt,_r){return!yt||!yt.state||yt.state.wrap!==2?st:(yt.state.gzhead=_r,rt)}function ir(yt,_r,yr,Kt,tr,pr){if(!yt)return st;var sn=1;if(_r===ct&&(_r=6),Kt<0?(sn=0,Kt=-Kt):Kt>15&&(sn=2,Kt-=16),tr<1||tr>Ct||yr!==bt||Kt<8||Kt>15||_r<0||_r>9||pr<0||pr>ft)return or(yt,st);Kt===8&&(Kt=9);var mt=new zt;return yt.state=mt,mt.strm=yt,mt.wrap=sn,mt.gzhead=null,mt.w_bits=Kt,mt.w_size=1<<mt.w_bits,mt.w_mask=mt.w_size-1,mt.hash_bits=tr+7,mt.hash_size=1<<mt.hash_bits,mt.hash_mask=mt.hash_size-1,mt.hash_shift=~~((mt.hash_bits+lr-1)/lr),mt.window=new s.Buf8(mt.w_size*2),mt.head=new s.Buf16(mt.hash_size),mt.prev=new s.Buf16(mt.w_size),mt.lit_bufsize=1<<tr+6,mt.pending_buf_size=mt.lit_bufsize*4,mt.pending_buf=new s.Buf8(mt.pending_buf_size),mt.d_buf=1*mt.lit_bufsize,mt.l_buf=3*mt.lit_bufsize,mt.level=_r,mt.strategy=pr,mt.method=yr,Sr(yt)}function Er(yt,_r){return ir(yt,_r,bt,Ut,Qt,dt)}function Lt(yt,_r){var yr,Kt,tr,pr;if(!yt||!yt.state||_r>tt||_r<0)return yt?or(yt,st):st;if(Kt=yt.state,!yt.output||!yt.input&&yt.avail_in!==0||Kt.status===Dr&&_r!==et)return or(yt,yt.avail_out===0?ht:st);if(Kt.strm=yt,yr=Kt.last_flush,Kt.last_flush=_r,Kt.status===mr)if(Kt.wrap===2)yt.adler=0,qr(Kt,31),qr(Kt,139),qr(Kt,8),Kt.gzhead?(qr(Kt,(Kt.gzhead.text?1:0)+(Kt.gzhead.hcrc?2:0)+(Kt.gzhead.extra?4:0)+(Kt.gzhead.name?8:0)+(Kt.gzhead.comment?16:0)),qr(Kt,Kt.gzhead.time&255),qr(Kt,Kt.gzhead.time>>8&255),qr(Kt,Kt.gzhead.time>>16&255),qr(Kt,Kt.gzhead.time>>24&255),qr(Kt,Kt.level===9?2:Kt.strategy>=gt||Kt.level<2?4:0),qr(Kt,Kt.gzhead.os&255),Kt.gzhead.extra&&Kt.gzhead.extra.length&&(qr(Kt,Kt.gzhead.extra.length&255),qr(Kt,Kt.gzhead.extra.length>>8&255)),Kt.gzhead.hcrc&&(yt.adler=d(yt.adler,Kt.pending_buf,Kt.pending,0)),Kt.gzindex=0,Kt.status=dr):(qr(Kt,0),qr(Kt,0),qr(Kt,0),qr(Kt,0),qr(Kt,0),qr(Kt,Kt.level===9?2:Kt.strategy>=gt||Kt.level<2?4:0),qr(Kt,zr),Kt.status=hr);else{var sn=bt+(Kt.w_bits-8<<4)<<8,mt=-1;Kt.strategy>=gt||Kt.level<2?mt=0:Kt.level<6?mt=1:Kt.level===6?mt=2:mt=3,sn|=mt<<6,Kt.strstart!==0&&(sn|=Ar),sn+=31-sn%31,Kt.status=hr,fr(Kt,sn),Kt.strstart!==0&&(fr(Kt,yt.adler>>>16),fr(Kt,yt.adler&65535)),yt.adler=1}if(Kt.status===dr)if(Kt.gzhead.extra){for(tr=Kt.pending;Kt.gzindex<(Kt.gzhead.extra.length&65535)&&!(Kt.pending===Kt.pending_buf_size&&(Kt.gzhead.hcrc&&Kt.pending>tr&&(yt.adler=d(yt.adler,Kt.pending_buf,Kt.pending-tr,tr)),$r(yt),tr=Kt.pending,Kt.pending===Kt.pending_buf_size));)qr(Kt,Kt.gzhead.extra[Kt.gzindex]&255),Kt.gzindex++;Kt.gzhead.hcrc&&Kt.pending>tr&&(yt.adler=d(yt.adler,Kt.pending_buf,Kt.pending-tr,tr)),Kt.gzindex===Kt.gzhead.extra.length&&(Kt.gzindex=0,Kt.status=Nr)}else Kt.status=Nr;if(Kt.status===Nr)if(Kt.gzhead.name){tr=Kt.pending;do{if(Kt.pending===Kt.pending_buf_size&&(Kt.gzhead.hcrc&&Kt.pending>tr&&(yt.adler=d(yt.adler,Kt.pending_buf,Kt.pending-tr,tr)),$r(yt),tr=Kt.pending,Kt.pending===Kt.pending_buf_size)){pr=1;break}Kt.gzindex<Kt.gzhead.name.length?pr=Kt.gzhead.name.charCodeAt(Kt.gzindex++)&255:pr=0,qr(Kt,pr)}while(pr!==0);Kt.gzhead.hcrc&&Kt.pending>tr&&(yt.adler=d(yt.adler,Kt.pending_buf,Kt.pending-tr,tr)),pr===0&&(Kt.gzindex=0,Kt.status=Ur)}else Kt.status=Ur;if(Kt.status===Ur)if(Kt.gzhead.comment){tr=Kt.pending;do{if(Kt.pending===Kt.pending_buf_size&&(Kt.gzhead.hcrc&&Kt.pending>tr&&(yt.adler=d(yt.adler,Kt.pending_buf,Kt.pending-tr,tr)),$r(yt),tr=Kt.pending,Kt.pending===Kt.pending_buf_size)){pr=1;break}Kt.gzindex<Kt.gzhead.comment.length?pr=Kt.gzhead.comment.charCodeAt(Kt.gzindex++)&255:pr=0,qr(Kt,pr)}while(pr!==0);Kt.gzhead.hcrc&&Kt.pending>tr&&(yt.adler=d(yt.adler,Kt.pending_buf,Kt.pending-tr,tr)),pr===0&&(Kt.status=nr)}else Kt.status=nr;if(Kt.status===nr&&(Kt.gzhead.hcrc?(Kt.pending+2>Kt.pending_buf_size&&$r(yt),Kt.pending+2<=Kt.pending_buf_size&&(qr(Kt,yt.adler&255),qr(Kt,yt.adler>>8&255),yt.adler=0,Kt.status=hr)):Kt.status=hr),Kt.pending!==0){if($r(yt),yt.avail_out===0)return Kt.last_flush=-1,rt}else if(yt.avail_in===0&&xr(_r)<=xr(yr)&&_r!==et)return or(yt,ht);if(Kt.status===Dr&&yt.avail_in!==0)return or(yt,ht);if(yt.avail_in!==0||Kt.lookahead!==0||_r!==_&&Kt.status!==Dr){var ot=Kt.strategy===gt?Zr(Kt,_r):Kt.strategy===wt?Yr(Kt,_r):Hr[Kt.level].func(Kt,_r);if((ot===on||ot===en)&&(Kt.status=Dr),ot===Qr||ot===on)return yt.avail_out===0&&(Kt.last_flush=-1),rt;if(ot===vr&&(_r===b?o._tr_align(Kt):_r!==tt&&(o._tr_stored_block(Kt,0,0,!1),_r===j&&(Wr(Kt.head),Kt.lookahead===0&&(Kt.strstart=0,Kt.block_start=0,Kt.insert=0))),$r(yt),yt.avail_out===0))return Kt.last_flush=-1,rt}return _r!==et?rt:Kt.wrap<=0?at:(Kt.wrap===2?(qr(Kt,yt.adler&255),qr(Kt,yt.adler>>8&255),qr(Kt,yt.adler>>16&255),qr(Kt,yt.adler>>24&255),qr(Kt,yt.total_in&255),qr(Kt,yt.total_in>>8&255),qr(Kt,yt.total_in>>16&255),qr(Kt,yt.total_in>>24&255)):(fr(Kt,yt.adler>>>16),fr(Kt,yt.adler&65535)),$r(yt),Kt.wrap>0&&(Kt.wrap=-Kt.wrap),Kt.pending!==0?rt:at)}function Ir(yt){var _r;return!yt||!yt.state?st:(_r=yt.state.status,_r!==mr&&_r!==dr&&_r!==Nr&&_r!==Ur&&_r!==nr&&_r!==hr&&_r!==Dr?or(yt,st):(yt.state=null,_r===hr?or(yt,At):rt))}function un(yt,_r){var yr=_r.length,Kt,tr,pr,sn,mt,ot,it,lt;if(!yt||!yt.state||(Kt=yt.state,sn=Kt.wrap,sn===2||sn===1&&Kt.status!==mr||Kt.lookahead))return st;for(sn===1&&(yt.adler=h(yt.adler,_r,yr,0)),Kt.wrap=0,yr>=Kt.w_size&&(sn===0&&(Wr(Kt.head),Kt.strstart=0,Kt.block_start=0,Kt.insert=0),lt=new s.Buf8(Kt.w_size),s.arraySet(lt,_r,yr-Kt.w_size,Kt.w_size,0),_r=lt,yr=Kt.w_size),mt=yt.avail_in,ot=yt.next_in,it=yt.input,yt.avail_in=yr,yt.next_in=0,yt.input=_r,Xr(Kt);Kt.lookahead>=lr;){tr=Kt.strstart,pr=Kt.lookahead-(lr-1);do Kt.ins_h=(Kt.ins_h<<Kt.hash_shift^Kt.window[tr+lr-1])&Kt.hash_mask,Kt.prev[tr&Kt.w_mask]=Kt.head[Kt.ins_h],Kt.head[Kt.ins_h]=tr,tr++;while(--pr);Kt.strstart=tr,Kt.lookahead=lr-1,Xr(Kt)}return Kt.strstart+=Kt.lookahead,Kt.block_start=Kt.strstart,Kt.insert=Kt.lookahead,Kt.lookahead=0,Kt.match_length=Kt.prev_length=lr-1,Kt.match_available=0,yt.next_in=ot,yt.input=it,yt.avail_in=mt,Kt.wrap=sn,rt}return deflate.deflateInit=Er,deflate.deflateInit2=ir,deflate.deflateReset=Sr,deflate.deflateResetKeep=br,deflate.deflateSetHeader=kr,deflate.deflate=Lt,deflate.deflateEnd=Ir,deflate.deflateSetDictionary=un,deflate.deflateInfo="pako deflate (from Nodeca project)",deflate}var strings={},hasRequiredStrings;function requireStrings(){if(hasRequiredStrings)return strings;hasRequiredStrings=1;var s=requireCommon(),o=!0,h=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{h=!1}for(var d=new s.Buf8(256),g=0;g<256;g++)d[g]=g>=252?6:g>=248?5:g>=240?4:g>=224?3:g>=192?2:1;d[254]=d[254]=1,strings.string2buf=function(b){var j,et,tt,rt,at,st=b.length,At=0;for(rt=0;rt<st;rt++)et=b.charCodeAt(rt),(et&64512)===55296&&rt+1<st&&(tt=b.charCodeAt(rt+1),(tt&64512)===56320&&(et=65536+(et-55296<<10)+(tt-56320),rt++)),At+=et<128?1:et<2048?2:et<65536?3:4;for(j=new s.Buf8(At),at=0,rt=0;at<At;rt++)et=b.charCodeAt(rt),(et&64512)===55296&&rt+1<st&&(tt=b.charCodeAt(rt+1),(tt&64512)===56320&&(et=65536+(et-55296<<10)+(tt-56320),rt++)),et<128?j[at++]=et:et<2048?(j[at++]=192|et>>>6,j[at++]=128|et&63):et<65536?(j[at++]=224|et>>>12,j[at++]=128|et>>>6&63,j[at++]=128|et&63):(j[at++]=240|et>>>18,j[at++]=128|et>>>12&63,j[at++]=128|et>>>6&63,j[at++]=128|et&63);return j};function _(b,j){if(j<65534&&(b.subarray&&h||!b.subarray&&o))return String.fromCharCode.apply(null,s.shrinkBuf(b,j));for(var et="",tt=0;tt<j;tt++)et+=String.fromCharCode(b[tt]);return et}return strings.buf2binstring=function(b){return _(b,b.length)},strings.binstring2buf=function(b){for(var j=new s.Buf8(b.length),et=0,tt=j.length;et<tt;et++)j[et]=b.charCodeAt(et);return j},strings.buf2string=function(b,j){var et,tt,rt,at,st=j||b.length,At=new Array(st*2);for(tt=0,et=0;et<st;){if(rt=b[et++],rt<128){At[tt++]=rt;continue}if(at=d[rt],at>4){At[tt++]=65533,et+=at-1;continue}for(rt&=at===2?31:at===3?15:7;at>1&&et<st;)rt=rt<<6|b[et++]&63,at--;if(at>1){At[tt++]=65533;continue}rt<65536?At[tt++]=rt:(rt-=65536,At[tt++]=55296|rt>>10&1023,At[tt++]=56320|rt&1023)}return _(At,tt)},strings.utf8border=function(b,j){var et;for(j=j||b.length,j>b.length&&(j=b.length),et=j-1;et>=0&&(b[et]&192)===128;)et--;return et<0||et===0?j:et+d[b[et]]>j?et:j},strings}var zstream,hasRequiredZstream;function requireZstream(){if(hasRequiredZstream)return zstream;hasRequiredZstream=1;function s(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}return zstream=s,zstream}var hasRequiredDeflate;function requireDeflate(){if(hasRequiredDeflate)return deflate$1;hasRequiredDeflate=1;var s=requireDeflate$1(),o=requireCommon(),h=requireStrings(),d=requireMessages(),g=requireZstream(),_=Object.prototype.toString,b=0,j=4,et=0,tt=1,rt=2,at=-1,st=0,At=8;function ht(wt){if(!(this instanceof ht))return new ht(wt);this.options=o.assign({level:at,method:At,chunkSize:16384,windowBits:15,memLevel:8,strategy:st,to:""},wt||{});var ft=this.options;ft.raw&&ft.windowBits>0?ft.windowBits=-ft.windowBits:ft.gzip&&ft.windowBits>0&&ft.windowBits<16&&(ft.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new g,this.strm.avail_out=0;var dt=s.deflateInit2(this.strm,ft.level,ft.method,ft.windowBits,ft.memLevel,ft.strategy);if(dt!==et)throw new Error(d[dt]);if(ft.header&&s.deflateSetHeader(this.strm,ft.header),ft.dictionary){var xt;if(typeof ft.dictionary=="string"?xt=h.string2buf(ft.dictionary):_.call(ft.dictionary)==="[object ArrayBuffer]"?xt=new Uint8Array(ft.dictionary):xt=ft.dictionary,dt=s.deflateSetDictionary(this.strm,xt),dt!==et)throw new Error(d[dt]);this._dict_set=!0}}ht.prototype.push=function(wt,ft){var dt=this.strm,xt=this.options.chunkSize,bt,Ct;if(this.ended)return!1;Ct=ft===~~ft?ft:ft===!0?j:b,typeof wt=="string"?dt.input=h.string2buf(wt):_.call(wt)==="[object ArrayBuffer]"?dt.input=new Uint8Array(wt):dt.input=wt,dt.next_in=0,dt.avail_in=dt.input.length;do{if(dt.avail_out===0&&(dt.output=new o.Buf8(xt),dt.next_out=0,dt.avail_out=xt),bt=s.deflate(dt,Ct),bt!==tt&&bt!==et)return this.onEnd(bt),this.ended=!0,!1;(dt.avail_out===0||dt.avail_in===0&&(Ct===j||Ct===rt))&&(this.options.to==="string"?this.onData(h.buf2binstring(o.shrinkBuf(dt.output,dt.next_out))):this.onData(o.shrinkBuf(dt.output,dt.next_out)))}while((dt.avail_in>0||dt.avail_out===0)&&bt!==tt);return Ct===j?(bt=s.deflateEnd(this.strm),this.onEnd(bt),this.ended=!0,bt===et):(Ct===rt&&(this.onEnd(et),dt.avail_out=0),!0)},ht.prototype.onData=function(wt){this.chunks.push(wt)},ht.prototype.onEnd=function(wt){wt===et&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=wt,this.msg=this.strm.msg};function ct(wt,ft){var dt=new ht(ft);if(dt.push(wt,!0),dt.err)throw dt.msg||d[dt.err];return dt.result}function _t(wt,ft){return ft=ft||{},ft.raw=!0,ct(wt,ft)}function gt(wt,ft){return ft=ft||{},ft.gzip=!0,ct(wt,ft)}return deflate$1.Deflate=ht,deflate$1.deflate=ct,deflate$1.deflateRaw=_t,deflate$1.gzip=gt,deflate$1}var inflate$1={},inflate={},inffast,hasRequiredInffast;function requireInffast(){if(hasRequiredInffast)return inffast;hasRequiredInffast=1;var s=30,o=12;return inffast=function(h,d){var g,_,b,j,et,tt,rt,at,st,At,ht,ct,_t,gt,wt,ft,dt,xt,bt,Ct,Ut,Qt,kt,Nt,Wt;g=h.state,_=h.next_in,Nt=h.input,b=_+(h.avail_in-5),j=h.next_out,Wt=h.output,et=j-(d-h.avail_out),tt=j+(h.avail_out-257),rt=g.dmax,at=g.wsize,st=g.whave,At=g.wnext,ht=g.window,ct=g.hold,_t=g.bits,gt=g.lencode,wt=g.distcode,ft=(1<<g.lenbits)-1,dt=(1<<g.distbits)-1;t:do{_t<15&&(ct+=Nt[_++]<<_t,_t+=8,ct+=Nt[_++]<<_t,_t+=8),xt=gt[ct&ft];e:for(;;){if(bt=xt>>>24,ct>>>=bt,_t-=bt,bt=xt>>>16&255,bt===0)Wt[j++]=xt&65535;else if(bt&16){Ct=xt&65535,bt&=15,bt&&(_t<bt&&(ct+=Nt[_++]<<_t,_t+=8),Ct+=ct&(1<<bt)-1,ct>>>=bt,_t-=bt),_t<15&&(ct+=Nt[_++]<<_t,_t+=8,ct+=Nt[_++]<<_t,_t+=8),xt=wt[ct&dt];r:for(;;){if(bt=xt>>>24,ct>>>=bt,_t-=bt,bt=xt>>>16&255,bt&16){if(Ut=xt&65535,bt&=15,_t<bt&&(ct+=Nt[_++]<<_t,_t+=8,_t<bt&&(ct+=Nt[_++]<<_t,_t+=8)),Ut+=ct&(1<<bt)-1,Ut>rt){h.msg="invalid distance too far back",g.mode=s;break t}if(ct>>>=bt,_t-=bt,bt=j-et,Ut>bt){if(bt=Ut-bt,bt>st&&g.sane){h.msg="invalid distance too far back",g.mode=s;break t}if(Qt=0,kt=ht,At===0){if(Qt+=at-bt,bt<Ct){Ct-=bt;do Wt[j++]=ht[Qt++];while(--bt);Qt=j-Ut,kt=Wt}}else if(At<bt){if(Qt+=at+At-bt,bt-=At,bt<Ct){Ct-=bt;do Wt[j++]=ht[Qt++];while(--bt);if(Qt=0,At<Ct){bt=At,Ct-=bt;do Wt[j++]=ht[Qt++];while(--bt);Qt=j-Ut,kt=Wt}}}else if(Qt+=At-bt,bt<Ct){Ct-=bt;do Wt[j++]=ht[Qt++];while(--bt);Qt=j-Ut,kt=Wt}for(;Ct>2;)Wt[j++]=kt[Qt++],Wt[j++]=kt[Qt++],Wt[j++]=kt[Qt++],Ct-=3;Ct&&(Wt[j++]=kt[Qt++],Ct>1&&(Wt[j++]=kt[Qt++]))}else{Qt=j-Ut;do Wt[j++]=Wt[Qt++],Wt[j++]=Wt[Qt++],Wt[j++]=Wt[Qt++],Ct-=3;while(Ct>2);Ct&&(Wt[j++]=Wt[Qt++],Ct>1&&(Wt[j++]=Wt[Qt++]))}}else if(bt&64){h.msg="invalid distance code",g.mode=s;break t}else{xt=wt[(xt&65535)+(ct&(1<<bt)-1)];continue r}break}}else if(bt&64)if(bt&32){g.mode=o;break t}else{h.msg="invalid literal/length code",g.mode=s;break t}else{xt=gt[(xt&65535)+(ct&(1<<bt)-1)];continue e}break}}while(_<b&&j<tt);Ct=_t>>3,_-=Ct,_t-=Ct<<3,ct&=(1<<_t)-1,h.next_in=_,h.next_out=j,h.avail_in=_<b?5+(b-_):5-(_-b),h.avail_out=j<tt?257+(tt-j):257-(j-tt),g.hold=ct,g.bits=_t},inffast}var inftrees,hasRequiredInftrees;function requireInftrees(){if(hasRequiredInftrees)return inftrees;hasRequiredInftrees=1;var s=requireCommon(),o=15,h=852,d=592,g=0,_=1,b=2,j=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],et=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],tt=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],rt=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];return inftrees=function(at,st,At,ht,ct,_t,gt,wt){var ft=wt.bits,dt=0,xt=0,bt=0,Ct=0,Ut=0,Qt=0,kt=0,Nt=0,Wt=0,Vt=0,qt,_e,Jt,lr,jt,ur=null,Ar=0,mr,dr=new s.Buf16(o+1),Nr=new s.Buf16(o+1),Ur=null,nr=0,hr,Dr,Qr;for(dt=0;dt<=o;dt++)dr[dt]=0;for(xt=0;xt<ht;xt++)dr[st[At+xt]]++;for(Ut=ft,Ct=o;Ct>=1&&dr[Ct]===0;Ct--);if(Ut>Ct&&(Ut=Ct),Ct===0)return ct[_t++]=1<<24|64<<16|0,ct[_t++]=1<<24|64<<16|0,wt.bits=1,0;for(bt=1;bt<Ct&&dr[bt]===0;bt++);for(Ut<bt&&(Ut=bt),Nt=1,dt=1;dt<=o;dt++)if(Nt<<=1,Nt-=dr[dt],Nt<0)return-1;if(Nt>0&&(at===g||Ct!==1))return-1;for(Nr[1]=0,dt=1;dt<o;dt++)Nr[dt+1]=Nr[dt]+dr[dt];for(xt=0;xt<ht;xt++)st[At+xt]!==0&&(gt[Nr[st[At+xt]]++]=xt);if(at===g?(ur=Ur=gt,mr=19):at===_?(ur=j,Ar-=257,Ur=et,nr-=257,mr=256):(ur=tt,Ur=rt,mr=-1),Vt=0,xt=0,dt=bt,jt=_t,Qt=Ut,kt=0,Jt=-1,Wt=1<<Ut,lr=Wt-1,at===_&&Wt>h||at===b&&Wt>d)return 1;for(;;){hr=dt-kt,gt[xt]<mr?(Dr=0,Qr=gt[xt]):gt[xt]>mr?(Dr=Ur[nr+gt[xt]],Qr=ur[Ar+gt[xt]]):(Dr=96,Qr=0),qt=1<<dt-kt,_e=1<<Qt,bt=_e;do _e-=qt,ct[jt+(Vt>>kt)+_e]=hr<<24|Dr<<16|Qr|0;while(_e!==0);for(qt=1<<dt-1;Vt&qt;)qt>>=1;if(qt!==0?(Vt&=qt-1,Vt+=qt):Vt=0,xt++,--dr[dt]===0){if(dt===Ct)break;dt=st[At+gt[xt]]}if(dt>Ut&&(Vt&lr)!==Jt){for(kt===0&&(kt=Ut),jt+=bt,Qt=dt-kt,Nt=1<<Qt;Qt+kt<Ct&&(Nt-=dr[Qt+kt],!(Nt<=0));)Qt++,Nt<<=1;if(Wt+=1<<Qt,at===_&&Wt>h||at===b&&Wt>d)return 1;Jt=Vt&lr,ct[Jt]=Ut<<24|Qt<<16|jt-_t|0}}return Vt!==0&&(ct[jt+Vt]=dt-kt<<24|64<<16|0),wt.bits=Ut,0},inftrees}var hasRequiredInflate$1;function requireInflate$1(){if(hasRequiredInflate$1)return inflate;hasRequiredInflate$1=1;var s=requireCommon(),o=requireAdler32(),h=requireCrc32(),d=requireInffast(),g=requireInftrees(),_=0,b=1,j=2,et=4,tt=5,rt=6,at=0,st=1,At=2,ht=-2,ct=-3,_t=-4,gt=-5,wt=8,ft=1,dt=2,xt=3,bt=4,Ct=5,Ut=6,Qt=7,kt=8,Nt=9,Wt=10,Vt=11,qt=12,_e=13,Jt=14,lr=15,jt=16,ur=17,Ar=18,mr=19,dr=20,Nr=21,Ur=22,nr=23,hr=24,Dr=25,Qr=26,vr=27,on=28,en=29,zr=30,or=31,xr=32,Wr=852,$r=592,Or=15,qr=Or;function fr(ir){return(ir>>>24&255)+(ir>>>8&65280)+((ir&65280)<<8)+((ir&255)<<24)}function Kr(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function jr(ir){var Er;return!ir||!ir.state?ht:(Er=ir.state,ir.total_in=ir.total_out=Er.total=0,ir.msg="",Er.wrap&&(ir.adler=Er.wrap&1),Er.mode=ft,Er.last=0,Er.havedict=0,Er.dmax=32768,Er.head=null,Er.hold=0,Er.bits=0,Er.lencode=Er.lendyn=new s.Buf32(Wr),Er.distcode=Er.distdyn=new s.Buf32($r),Er.sane=1,Er.back=-1,at)}function Xr(ir){var Er;return!ir||!ir.state?ht:(Er=ir.state,Er.wsize=0,Er.whave=0,Er.wnext=0,jr(ir))}function Tr(ir,Er){var Lt,Ir;return!ir||!ir.state||(Ir=ir.state,Er<0?(Lt=0,Er=-Er):(Lt=(Er>>4)+1,Er<48&&(Er&=15)),Er&&(Er<8||Er>15))?ht:(Ir.window!==null&&Ir.wbits!==Er&&(Ir.window=null),Ir.wrap=Lt,Ir.wbits=Er,Xr(ir))}function An(ir,Er){var Lt,Ir;return ir?(Ir=new Kr,ir.state=Ir,Ir.window=null,Lt=Tr(ir,Er),Lt!==at&&(ir.state=null),Lt):ht}function Gr(ir){return An(ir,qr)}var Yr=!0,Zr,ln;function Hr(ir){if(Yr){var Er;for(Zr=new s.Buf32(512),ln=new s.Buf32(32),Er=0;Er<144;)ir.lens[Er++]=8;for(;Er<256;)ir.lens[Er++]=9;for(;Er<280;)ir.lens[Er++]=7;for(;Er<288;)ir.lens[Er++]=8;for(g(b,ir.lens,0,288,Zr,0,ir.work,{bits:9}),Er=0;Er<32;)ir.lens[Er++]=5;g(j,ir.lens,0,32,ln,0,ir.work,{bits:5}),Yr=!1}ir.lencode=Zr,ir.lenbits=9,ir.distcode=ln,ir.distbits=5}function rn(ir,Er,Lt,Ir){var un,yt=ir.state;return yt.window===null&&(yt.wsize=1<<yt.wbits,yt.wnext=0,yt.whave=0,yt.window=new s.Buf8(yt.wsize)),Ir>=yt.wsize?(s.arraySet(yt.window,Er,Lt-yt.wsize,yt.wsize,0),yt.wnext=0,yt.whave=yt.wsize):(un=yt.wsize-yt.wnext,un>Ir&&(un=Ir),s.arraySet(yt.window,Er,Lt-Ir,un,yt.wnext),Ir-=un,Ir?(s.arraySet(yt.window,Er,Lt-Ir,Ir,0),yt.wnext=Ir,yt.whave=yt.wsize):(yt.wnext+=un,yt.wnext===yt.wsize&&(yt.wnext=0),yt.whave<yt.wsize&&(yt.whave+=un))),0}function zt(ir,Er){var Lt,Ir,un,yt,_r,yr,Kt,tr,pr,sn,mt,ot,it,lt,pt=0,Et,Pt,Ht,Mt,Gt,sr,Xt,wr,Fr=new s.Buf8(4),cr,Br,Vr=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!ir||!ir.state||!ir.output||!ir.input&&ir.avail_in!==0)return ht;Lt=ir.state,Lt.mode===qt&&(Lt.mode=_e),_r=ir.next_out,un=ir.output,Kt=ir.avail_out,yt=ir.next_in,Ir=ir.input,yr=ir.avail_in,tr=Lt.hold,pr=Lt.bits,sn=yr,mt=Kt,wr=at;t:for(;;)switch(Lt.mode){case ft:if(Lt.wrap===0){Lt.mode=_e;break}for(;pr<16;){if(yr===0)break t;yr--,tr+=Ir[yt++]<<pr,pr+=8}if(Lt.wrap&2&&tr===35615){Lt.check=0,Fr[0]=tr&255,Fr[1]=tr>>>8&255,Lt.check=h(Lt.check,Fr,2,0),tr=0,pr=0,Lt.mode=dt;break}if(Lt.flags=0,Lt.head&&(Lt.head.done=!1),!(Lt.wrap&1)||(((tr&255)<<8)+(tr>>8))%31){ir.msg="incorrect header check",Lt.mode=zr;break}if((tr&15)!==wt){ir.msg="unknown compression method",Lt.mode=zr;break}if(tr>>>=4,pr-=4,Xt=(tr&15)+8,Lt.wbits===0)Lt.wbits=Xt;else if(Xt>Lt.wbits){ir.msg="invalid window size",Lt.mode=zr;break}Lt.dmax=1<<Xt,ir.adler=Lt.check=1,Lt.mode=tr&512?Wt:qt,tr=0,pr=0;break;case dt:for(;pr<16;){if(yr===0)break t;yr--,tr+=Ir[yt++]<<pr,pr+=8}if(Lt.flags=tr,(Lt.flags&255)!==wt){ir.msg="unknown compression method",Lt.mode=zr;break}if(Lt.flags&57344){ir.msg="unknown header flags set",Lt.mode=zr;break}Lt.head&&(Lt.head.text=tr>>8&1),Lt.flags&512&&(Fr[0]=tr&255,Fr[1]=tr>>>8&255,Lt.check=h(Lt.check,Fr,2,0)),tr=0,pr=0,Lt.mode=xt;case xt:for(;pr<32;){if(yr===0)break t;yr--,tr+=Ir[yt++]<<pr,pr+=8}Lt.head&&(Lt.head.time=tr),Lt.flags&512&&(Fr[0]=tr&255,Fr[1]=tr>>>8&255,Fr[2]=tr>>>16&255,Fr[3]=tr>>>24&255,Lt.check=h(Lt.check,Fr,4,0)),tr=0,pr=0,Lt.mode=bt;case bt:for(;pr<16;){if(yr===0)break t;yr--,tr+=Ir[yt++]<<pr,pr+=8}Lt.head&&(Lt.head.xflags=tr&255,Lt.head.os=tr>>8),Lt.flags&512&&(Fr[0]=tr&255,Fr[1]=tr>>>8&255,Lt.check=h(Lt.check,Fr,2,0)),tr=0,pr=0,Lt.mode=Ct;case Ct:if(Lt.flags&1024){for(;pr<16;){if(yr===0)break t;yr--,tr+=Ir[yt++]<<pr,pr+=8}Lt.length=tr,Lt.head&&(Lt.head.extra_len=tr),Lt.flags&512&&(Fr[0]=tr&255,Fr[1]=tr>>>8&255,Lt.check=h(Lt.check,Fr,2,0)),tr=0,pr=0}else Lt.head&&(Lt.head.extra=null);Lt.mode=Ut;case Ut:if(Lt.flags&1024&&(ot=Lt.length,ot>yr&&(ot=yr),ot&&(Lt.head&&(Xt=Lt.head.extra_len-Lt.length,Lt.head.extra||(Lt.head.extra=new Array(Lt.head.extra_len)),s.arraySet(Lt.head.extra,Ir,yt,ot,Xt)),Lt.flags&512&&(Lt.check=h(Lt.check,Ir,ot,yt)),yr-=ot,yt+=ot,Lt.length-=ot),Lt.length))break t;Lt.length=0,Lt.mode=Qt;case Qt:if(Lt.flags&2048){if(yr===0)break t;ot=0;do Xt=Ir[yt+ot++],Lt.head&&Xt&&Lt.length<65536&&(Lt.head.name+=String.fromCharCode(Xt));while(Xt&&ot<yr);if(Lt.flags&512&&(Lt.check=h(Lt.check,Ir,ot,yt)),yr-=ot,yt+=ot,Xt)break t}else Lt.head&&(Lt.head.name=null);Lt.length=0,Lt.mode=kt;case kt:if(Lt.flags&4096){if(yr===0)break t;ot=0;do Xt=Ir[yt+ot++],Lt.head&&Xt&&Lt.length<65536&&(Lt.head.comment+=String.fromCharCode(Xt));while(Xt&&ot<yr);if(Lt.flags&512&&(Lt.check=h(Lt.check,Ir,ot,yt)),yr-=ot,yt+=ot,Xt)break t}else Lt.head&&(Lt.head.comment=null);Lt.mode=Nt;case Nt:if(Lt.flags&512){for(;pr<16;){if(yr===0)break t;yr--,tr+=Ir[yt++]<<pr,pr+=8}if(tr!==(Lt.check&65535)){ir.msg="header crc mismatch",Lt.mode=zr;break}tr=0,pr=0}Lt.head&&(Lt.head.hcrc=Lt.flags>>9&1,Lt.head.done=!0),ir.adler=Lt.check=0,Lt.mode=qt;break;case Wt:for(;pr<32;){if(yr===0)break t;yr--,tr+=Ir[yt++]<<pr,pr+=8}ir.adler=Lt.check=fr(tr),tr=0,pr=0,Lt.mode=Vt;case Vt:if(Lt.havedict===0)return ir.next_out=_r,ir.avail_out=Kt,ir.next_in=yt,ir.avail_in=yr,Lt.hold=tr,Lt.bits=pr,At;ir.adler=Lt.check=1,Lt.mode=qt;case qt:if(Er===tt||Er===rt)break t;case _e:if(Lt.last){tr>>>=pr&7,pr-=pr&7,Lt.mode=vr;break}for(;pr<3;){if(yr===0)break t;yr--,tr+=Ir[yt++]<<pr,pr+=8}switch(Lt.last=tr&1,tr>>>=1,pr-=1,tr&3){case 0:Lt.mode=Jt;break;case 1:if(Hr(Lt),Lt.mode=dr,Er===rt){tr>>>=2,pr-=2;break t}break;case 2:Lt.mode=ur;break;case 3:ir.msg="invalid block type",Lt.mode=zr}tr>>>=2,pr-=2;break;case Jt:for(tr>>>=pr&7,pr-=pr&7;pr<32;){if(yr===0)break t;yr--,tr+=Ir[yt++]<<pr,pr+=8}if((tr&65535)!==(tr>>>16^65535)){ir.msg="invalid stored block lengths",Lt.mode=zr;break}if(Lt.length=tr&65535,tr=0,pr=0,Lt.mode=lr,Er===rt)break t;case lr:Lt.mode=jt;case jt:if(ot=Lt.length,ot){if(ot>yr&&(ot=yr),ot>Kt&&(ot=Kt),ot===0)break t;s.arraySet(un,Ir,yt,ot,_r),yr-=ot,yt+=ot,Kt-=ot,_r+=ot,Lt.length-=ot;break}Lt.mode=qt;break;case ur:for(;pr<14;){if(yr===0)break t;yr--,tr+=Ir[yt++]<<pr,pr+=8}if(Lt.nlen=(tr&31)+257,tr>>>=5,pr-=5,Lt.ndist=(tr&31)+1,tr>>>=5,pr-=5,Lt.ncode=(tr&15)+4,tr>>>=4,pr-=4,Lt.nlen>286||Lt.ndist>30){ir.msg="too many length or distance symbols",Lt.mode=zr;break}Lt.have=0,Lt.mode=Ar;case Ar:for(;Lt.have<Lt.ncode;){for(;pr<3;){if(yr===0)break t;yr--,tr+=Ir[yt++]<<pr,pr+=8}Lt.lens[Vr[Lt.have++]]=tr&7,tr>>>=3,pr-=3}for(;Lt.have<19;)Lt.lens[Vr[Lt.have++]]=0;if(Lt.lencode=Lt.lendyn,Lt.lenbits=7,cr={bits:Lt.lenbits},wr=g(_,Lt.lens,0,19,Lt.lencode,0,Lt.work,cr),Lt.lenbits=cr.bits,wr){ir.msg="invalid code lengths set",Lt.mode=zr;break}Lt.have=0,Lt.mode=mr;case mr:for(;Lt.have<Lt.nlen+Lt.ndist;){for(;pt=Lt.lencode[tr&(1<<Lt.lenbits)-1],Et=pt>>>24,Pt=pt>>>16&255,Ht=pt&65535,!(Et<=pr);){if(yr===0)break t;yr--,tr+=Ir[yt++]<<pr,pr+=8}if(Ht<16)tr>>>=Et,pr-=Et,Lt.lens[Lt.have++]=Ht;else{if(Ht===16){for(Br=Et+2;pr<Br;){if(yr===0)break t;yr--,tr+=Ir[yt++]<<pr,pr+=8}if(tr>>>=Et,pr-=Et,Lt.have===0){ir.msg="invalid bit length repeat",Lt.mode=zr;break}Xt=Lt.lens[Lt.have-1],ot=3+(tr&3),tr>>>=2,pr-=2}else if(Ht===17){for(Br=Et+3;pr<Br;){if(yr===0)break t;yr--,tr+=Ir[yt++]<<pr,pr+=8}tr>>>=Et,pr-=Et,Xt=0,ot=3+(tr&7),tr>>>=3,pr-=3}else{for(Br=Et+7;pr<Br;){if(yr===0)break t;yr--,tr+=Ir[yt++]<<pr,pr+=8}tr>>>=Et,pr-=Et,Xt=0,ot=11+(tr&127),tr>>>=7,pr-=7}if(Lt.have+ot>Lt.nlen+Lt.ndist){ir.msg="invalid bit length repeat",Lt.mode=zr;break}for(;ot--;)Lt.lens[Lt.have++]=Xt}}if(Lt.mode===zr)break;if(Lt.lens[256]===0){ir.msg="invalid code -- missing end-of-block",Lt.mode=zr;break}if(Lt.lenbits=9,cr={bits:Lt.lenbits},wr=g(b,Lt.lens,0,Lt.nlen,Lt.lencode,0,Lt.work,cr),Lt.lenbits=cr.bits,wr){ir.msg="invalid literal/lengths set",Lt.mode=zr;break}if(Lt.distbits=6,Lt.distcode=Lt.distdyn,cr={bits:Lt.distbits},wr=g(j,Lt.lens,Lt.nlen,Lt.ndist,Lt.distcode,0,Lt.work,cr),Lt.distbits=cr.bits,wr){ir.msg="invalid distances set",Lt.mode=zr;break}if(Lt.mode=dr,Er===rt)break t;case dr:Lt.mode=Nr;case Nr:if(yr>=6&&Kt>=258){ir.next_out=_r,ir.avail_out=Kt,ir.next_in=yt,ir.avail_in=yr,Lt.hold=tr,Lt.bits=pr,d(ir,mt),_r=ir.next_out,un=ir.output,Kt=ir.avail_out,yt=ir.next_in,Ir=ir.input,yr=ir.avail_in,tr=Lt.hold,pr=Lt.bits,Lt.mode===qt&&(Lt.back=-1);break}for(Lt.back=0;pt=Lt.lencode[tr&(1<<Lt.lenbits)-1],Et=pt>>>24,Pt=pt>>>16&255,Ht=pt&65535,!(Et<=pr);){if(yr===0)break t;yr--,tr+=Ir[yt++]<<pr,pr+=8}if(Pt&&!(Pt&240)){for(Mt=Et,Gt=Pt,sr=Ht;pt=Lt.lencode[sr+((tr&(1<<Mt+Gt)-1)>>Mt)],Et=pt>>>24,Pt=pt>>>16&255,Ht=pt&65535,!(Mt+Et<=pr);){if(yr===0)break t;yr--,tr+=Ir[yt++]<<pr,pr+=8}tr>>>=Mt,pr-=Mt,Lt.back+=Mt}if(tr>>>=Et,pr-=Et,Lt.back+=Et,Lt.length=Ht,Pt===0){Lt.mode=Qr;break}if(Pt&32){Lt.back=-1,Lt.mode=qt;break}if(Pt&64){ir.msg="invalid literal/length code",Lt.mode=zr;break}Lt.extra=Pt&15,Lt.mode=Ur;case Ur:if(Lt.extra){for(Br=Lt.extra;pr<Br;){if(yr===0)break t;yr--,tr+=Ir[yt++]<<pr,pr+=8}Lt.length+=tr&(1<<Lt.extra)-1,tr>>>=Lt.extra,pr-=Lt.extra,Lt.back+=Lt.extra}Lt.was=Lt.length,Lt.mode=nr;case nr:for(;pt=Lt.distcode[tr&(1<<Lt.distbits)-1],Et=pt>>>24,Pt=pt>>>16&255,Ht=pt&65535,!(Et<=pr);){if(yr===0)break t;yr--,tr+=Ir[yt++]<<pr,pr+=8}if(!(Pt&240)){for(Mt=Et,Gt=Pt,sr=Ht;pt=Lt.distcode[sr+((tr&(1<<Mt+Gt)-1)>>Mt)],Et=pt>>>24,Pt=pt>>>16&255,Ht=pt&65535,!(Mt+Et<=pr);){if(yr===0)break t;yr--,tr+=Ir[yt++]<<pr,pr+=8}tr>>>=Mt,pr-=Mt,Lt.back+=Mt}if(tr>>>=Et,pr-=Et,Lt.back+=Et,Pt&64){ir.msg="invalid distance code",Lt.mode=zr;break}Lt.offset=Ht,Lt.extra=Pt&15,Lt.mode=hr;case hr:if(Lt.extra){for(Br=Lt.extra;pr<Br;){if(yr===0)break t;yr--,tr+=Ir[yt++]<<pr,pr+=8}Lt.offset+=tr&(1<<Lt.extra)-1,tr>>>=Lt.extra,pr-=Lt.extra,Lt.back+=Lt.extra}if(Lt.offset>Lt.dmax){ir.msg="invalid distance too far back",Lt.mode=zr;break}Lt.mode=Dr;case Dr:if(Kt===0)break t;if(ot=mt-Kt,Lt.offset>ot){if(ot=Lt.offset-ot,ot>Lt.whave&&Lt.sane){ir.msg="invalid distance too far back",Lt.mode=zr;break}ot>Lt.wnext?(ot-=Lt.wnext,it=Lt.wsize-ot):it=Lt.wnext-ot,ot>Lt.length&&(ot=Lt.length),lt=Lt.window}else lt=un,it=_r-Lt.offset,ot=Lt.length;ot>Kt&&(ot=Kt),Kt-=ot,Lt.length-=ot;do un[_r++]=lt[it++];while(--ot);Lt.length===0&&(Lt.mode=Nr);break;case Qr:if(Kt===0)break t;un[_r++]=Lt.length,Kt--,Lt.mode=Nr;break;case vr:if(Lt.wrap){for(;pr<32;){if(yr===0)break t;yr--,tr|=Ir[yt++]<<pr,pr+=8}if(mt-=Kt,ir.total_out+=mt,Lt.total+=mt,mt&&(ir.adler=Lt.check=Lt.flags?h(Lt.check,un,mt,_r-mt):o(Lt.check,un,mt,_r-mt)),mt=Kt,(Lt.flags?tr:fr(tr))!==Lt.check){ir.msg="incorrect data check",Lt.mode=zr;break}tr=0,pr=0}Lt.mode=on;case on:if(Lt.wrap&&Lt.flags){for(;pr<32;){if(yr===0)break t;yr--,tr+=Ir[yt++]<<pr,pr+=8}if(tr!==(Lt.total&4294967295)){ir.msg="incorrect length check",Lt.mode=zr;break}tr=0,pr=0}Lt.mode=en;case en:wr=st;break t;case zr:wr=ct;break t;case or:return _t;case xr:default:return ht}return ir.next_out=_r,ir.avail_out=Kt,ir.next_in=yt,ir.avail_in=yr,Lt.hold=tr,Lt.bits=pr,(Lt.wsize||mt!==ir.avail_out&&Lt.mode<zr&&(Lt.mode<vr||Er!==et))&&rn(ir,ir.output,ir.next_out,mt-ir.avail_out),sn-=ir.avail_in,mt-=ir.avail_out,ir.total_in+=sn,ir.total_out+=mt,Lt.total+=mt,Lt.wrap&&mt&&(ir.adler=Lt.check=Lt.flags?h(Lt.check,un,mt,ir.next_out-mt):o(Lt.check,un,mt,ir.next_out-mt)),ir.data_type=Lt.bits+(Lt.last?64:0)+(Lt.mode===qt?128:0)+(Lt.mode===dr||Lt.mode===lr?256:0),(sn===0&&mt===0||Er===et)&&wr===at&&(wr=gt),wr}function br(ir){if(!ir||!ir.state)return ht;var Er=ir.state;return Er.window&&(Er.window=null),ir.state=null,at}function Sr(ir,Er){var Lt;return!ir||!ir.state||(Lt=ir.state,(Lt.wrap&2)===0)?ht:(Lt.head=Er,Er.done=!1,at)}function kr(ir,Er){var Lt=Er.length,Ir,un,yt;return!ir||!ir.state||(Ir=ir.state,Ir.wrap!==0&&Ir.mode!==Vt)?ht:Ir.mode===Vt&&(un=1,un=o(un,Er,Lt,0),un!==Ir.check)?ct:(yt=rn(ir,Er,Lt,Lt),yt?(Ir.mode=or,_t):(Ir.havedict=1,at))}return inflate.inflateReset=Xr,inflate.inflateReset2=Tr,inflate.inflateResetKeep=jr,inflate.inflateInit=Gr,inflate.inflateInit2=An,inflate.inflate=zt,inflate.inflateEnd=br,inflate.inflateGetHeader=Sr,inflate.inflateSetDictionary=kr,inflate.inflateInfo="pako inflate (from Nodeca project)",inflate}var constants,hasRequiredConstants;function requireConstants(){return hasRequiredConstants||(hasRequiredConstants=1,constants={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}),constants}var gzheader,hasRequiredGzheader;function requireGzheader(){if(hasRequiredGzheader)return gzheader;hasRequiredGzheader=1;function s(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}return gzheader=s,gzheader}var hasRequiredInflate;function requireInflate(){if(hasRequiredInflate)return inflate$1;hasRequiredInflate=1;var s=requireInflate$1(),o=requireCommon(),h=requireStrings(),d=requireConstants(),g=requireMessages(),_=requireZstream(),b=requireGzheader(),j=Object.prototype.toString;function et(at){if(!(this instanceof et))return new et(at);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},at||{});var st=this.options;st.raw&&st.windowBits>=0&&st.windowBits<16&&(st.windowBits=-st.windowBits,st.windowBits===0&&(st.windowBits=-15)),st.windowBits>=0&&st.windowBits<16&&!(at&&at.windowBits)&&(st.windowBits+=32),st.windowBits>15&&st.windowBits<48&&!(st.windowBits&15)&&(st.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new _,this.strm.avail_out=0;var At=s.inflateInit2(this.strm,st.windowBits);if(At!==d.Z_OK)throw new Error(g[At]);if(this.header=new b,s.inflateGetHeader(this.strm,this.header),st.dictionary&&(typeof st.dictionary=="string"?st.dictionary=h.string2buf(st.dictionary):j.call(st.dictionary)==="[object ArrayBuffer]"&&(st.dictionary=new Uint8Array(st.dictionary)),st.raw&&(At=s.inflateSetDictionary(this.strm,st.dictionary),At!==d.Z_OK)))throw new Error(g[At])}et.prototype.push=function(at,st){var At=this.strm,ht=this.options.chunkSize,ct=this.options.dictionary,_t,gt,wt,ft,dt,xt=!1;if(this.ended)return!1;gt=st===~~st?st:st===!0?d.Z_FINISH:d.Z_NO_FLUSH,typeof at=="string"?At.input=h.binstring2buf(at):j.call(at)==="[object ArrayBuffer]"?At.input=new Uint8Array(at):At.input=at,At.next_in=0,At.avail_in=At.input.length;do{if(At.avail_out===0&&(At.output=new o.Buf8(ht),At.next_out=0,At.avail_out=ht),_t=s.inflate(At,d.Z_NO_FLUSH),_t===d.Z_NEED_DICT&&ct&&(_t=s.inflateSetDictionary(this.strm,ct)),_t===d.Z_BUF_ERROR&&xt===!0&&(_t=d.Z_OK,xt=!1),_t!==d.Z_STREAM_END&&_t!==d.Z_OK)return this.onEnd(_t),this.ended=!0,!1;At.next_out&&(At.avail_out===0||_t===d.Z_STREAM_END||At.avail_in===0&&(gt===d.Z_FINISH||gt===d.Z_SYNC_FLUSH))&&(this.options.to==="string"?(wt=h.utf8border(At.output,At.next_out),ft=At.next_out-wt,dt=h.buf2string(At.output,wt),At.next_out=ft,At.avail_out=ht-ft,ft&&o.arraySet(At.output,At.output,wt,ft,0),this.onData(dt)):this.onData(o.shrinkBuf(At.output,At.next_out))),At.avail_in===0&&At.avail_out===0&&(xt=!0)}while((At.avail_in>0||At.avail_out===0)&&_t!==d.Z_STREAM_END);return _t===d.Z_STREAM_END&&(gt=d.Z_FINISH),gt===d.Z_FINISH?(_t=s.inflateEnd(this.strm),this.onEnd(_t),this.ended=!0,_t===d.Z_OK):(gt===d.Z_SYNC_FLUSH&&(this.onEnd(d.Z_OK),At.avail_out=0),!0)},et.prototype.onData=function(at){this.chunks.push(at)},et.prototype.onEnd=function(at){at===d.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=at,this.msg=this.strm.msg};function tt(at,st){var At=new et(st);if(At.push(at,!0),At.err)throw At.msg||g[At.err];return At.result}function rt(at,st){return st=st||{},st.raw=!0,tt(at,st)}return inflate$1.Inflate=et,inflate$1.inflate=tt,inflate$1.inflateRaw=rt,inflate$1.ungzip=tt,inflate$1}var pako_1,hasRequiredPako;function requirePako(){if(hasRequiredPako)return pako_1;hasRequiredPako=1;var s=requireCommon().assign,o=requireDeflate(),h=requireInflate(),d=requireConstants(),g={};return s(g,o,h,d),pako_1=g,pako_1}var pakoExports=requirePako();const pako=getDefaultExportFromCjs(pakoExports);var UPNG={};UPNG.toRGBA8=function(s){var o=s.width,h=s.height;if(s.tabs.acTL==null)return[UPNG.toRGBA8.decodeImage(s.data,o,h,s).buffer];var d=[];s.frames[0].data==null&&(s.frames[0].data=s.data);for(var g=o*h*4,_=new Uint8Array(g),b=new Uint8Array(g),j=new Uint8Array(g),et=0;et<s.frames.length;et++){var tt=s.frames[et],rt=tt.rect.x,at=tt.rect.y,st=tt.rect.width,At=tt.rect.height,ht=UPNG.toRGBA8.decodeImage(tt.data,st,At,s);if(et!=0)for(var ct=0;ct<g;ct++)j[ct]=_[ct];if(tt.blend==0?UPNG._copyTile(ht,st,At,_,o,h,rt,at,0):tt.blend==1&&UPNG._copyTile(ht,st,At,_,o,h,rt,at,1),d.push(_.buffer.slice(0)),tt.dispose!=0){if(tt.dispose==1)UPNG._copyTile(b,st,At,_,o,h,rt,at,0);else if(tt.dispose==2)for(var ct=0;ct<g;ct++)_[ct]=j[ct]}}return d};UPNG.toRGBA8.decodeImage=function(s,o,h,d){var g=o*h,_=UPNG.decode._getBPP(d),b=Math.ceil(o*_/8),j=new Uint8Array(g*4),et=new Uint32Array(j.buffer),tt=d.ctype,rt=d.depth,at=UPNG._bin.readUshort;if(tt==6){var st=g<<2;if(rt==8)for(var At=0;At<st;At+=4)j[At]=s[At],j[At+1]=s[At+1],j[At+2]=s[At+2],j[At+3]=s[At+3];if(rt==16)for(var At=0;At<st;At++)j[At]=s[At<<1]}else if(tt==2){var ht=d.tabs.tRNS;if(ht==null){if(rt==8)for(var At=0;At<g;At++){var ct=At*3;et[At]=255<<24|s[ct+2]<<16|s[ct+1]<<8|s[ct]}if(rt==16)for(var At=0;At<g;At++){var ct=At*6;et[At]=255<<24|s[ct+4]<<16|s[ct+2]<<8|s[ct]}}else{var _t=ht[0],gt=ht[1],wt=ht[2];if(rt==8)for(var At=0;At<g;At++){var ft=At<<2,ct=At*3;et[At]=255<<24|s[ct+2]<<16|s[ct+1]<<8|s[ct],s[ct]==_t&&s[ct+1]==gt&&s[ct+2]==wt&&(j[ft+3]=0)}if(rt==16)for(var At=0;At<g;At++){var ft=At<<2,ct=At*6;et[At]=255<<24|s[ct+4]<<16|s[ct+2]<<8|s[ct],at(s,ct)==_t&&at(s,ct+2)==gt&&at(s,ct+4)==wt&&(j[ft+3]=0)}}}else if(tt==3){var dt=d.tabs.PLTE,xt=d.tabs.tRNS,bt=xt?xt.length:0;if(rt==1)for(var Ct=0;Ct<h;Ct++)for(var Ut=Ct*b,Qt=Ct*o,At=0;At<o;At++){var ft=Qt+At<<2,kt=s[Ut+(At>>3)]>>7-((At&7)<<0)&1,Nt=3*kt;j[ft]=dt[Nt],j[ft+1]=dt[Nt+1],j[ft+2]=dt[Nt+2],j[ft+3]=kt<bt?xt[kt]:255}if(rt==2)for(var Ct=0;Ct<h;Ct++)for(var Ut=Ct*b,Qt=Ct*o,At=0;At<o;At++){var ft=Qt+At<<2,kt=s[Ut+(At>>2)]>>6-((At&3)<<1)&3,Nt=3*kt;j[ft]=dt[Nt],j[ft+1]=dt[Nt+1],j[ft+2]=dt[Nt+2],j[ft+3]=kt<bt?xt[kt]:255}if(rt==4)for(var Ct=0;Ct<h;Ct++)for(var Ut=Ct*b,Qt=Ct*o,At=0;At<o;At++){var ft=Qt+At<<2,kt=s[Ut+(At>>1)]>>4-((At&1)<<2)&15,Nt=3*kt;j[ft]=dt[Nt],j[ft+1]=dt[Nt+1],j[ft+2]=dt[Nt+2],j[ft+3]=kt<bt?xt[kt]:255}if(rt==8)for(var At=0;At<g;At++){var ft=At<<2,kt=s[At],Nt=3*kt;j[ft]=dt[Nt],j[ft+1]=dt[Nt+1],j[ft+2]=dt[Nt+2],j[ft+3]=kt<bt?xt[kt]:255}}else if(tt==4){if(rt==8)for(var At=0;At<g;At++){var ft=At<<2,Wt=At<<1,Vt=s[Wt];j[ft]=Vt,j[ft+1]=Vt,j[ft+2]=Vt,j[ft+3]=s[Wt+1]}if(rt==16)for(var At=0;At<g;At++){var ft=At<<2,Wt=At<<2,Vt=s[Wt];j[ft]=Vt,j[ft+1]=Vt,j[ft+2]=Vt,j[ft+3]=s[Wt+2]}}else if(tt==0)for(var _t=d.tabs.tRNS?d.tabs.tRNS:-1,Ct=0;Ct<h;Ct++){var qt=Ct*b,_e=Ct*o;if(rt==1)for(var Jt=0;Jt<o;Jt++){var Vt=255*(s[qt+(Jt>>>3)]>>>7-(Jt&7)&1),lr=Vt==_t*255?0:255;et[_e+Jt]=lr<<24|Vt<<16|Vt<<8|Vt}else if(rt==2)for(var Jt=0;Jt<o;Jt++){var Vt=85*(s[qt+(Jt>>>2)]>>>6-((Jt&3)<<1)&3),lr=Vt==_t*85?0:255;et[_e+Jt]=lr<<24|Vt<<16|Vt<<8|Vt}else if(rt==4)for(var Jt=0;Jt<o;Jt++){var Vt=17*(s[qt+(Jt>>>1)]>>>4-((Jt&1)<<2)&15),lr=Vt==_t*17?0:255;et[_e+Jt]=lr<<24|Vt<<16|Vt<<8|Vt}else if(rt==8)for(var Jt=0;Jt<o;Jt++){var Vt=s[qt+Jt],lr=Vt==_t?0:255;et[_e+Jt]=lr<<24|Vt<<16|Vt<<8|Vt}else if(rt==16)for(var Jt=0;Jt<o;Jt++){var Vt=s[qt+(Jt<<1)],lr=at(s,qt+(Jt<<At))==_t?0:255;et[_e+Jt]=lr<<24|Vt<<16|Vt<<8|Vt}}return j};UPNG.decode=function(s){for(var o=new Uint8Array(s),h=8,d=UPNG._bin,g=d.readUshort,_=d.readUint,b={tabs:{},frames:[]},j=new Uint8Array(o.length),et=0,tt,rt=0,at=[137,80,78,71,13,10,26,10],st=0;st<8;st++)if(o[st]!=at[st])throw"The input is not a PNG file!";for(;h<o.length;){var At=d.readUint(o,h);h+=4;var ht=d.readASCII(o,h,4);if(h+=4,ht=="IHDR")UPNG.decode._IHDR(o,h,b);else if(ht=="IDAT"){for(var st=0;st<At;st++)j[et+st]=o[h+st];et+=At}else if(ht=="acTL")b.tabs[ht]={num_frames:_(o,h),num_plays:_(o,h+4)},tt=new Uint8Array(o.length);else if(ht=="fcTL"){if(rt!=0){var ct=b.frames[b.frames.length-1];ct.data=UPNG.decode._decompress(b,tt.slice(0,rt),ct.rect.width,ct.rect.height),rt=0}var _t={x:_(o,h+12),y:_(o,h+16),width:_(o,h+4),height:_(o,h+8)},gt=g(o,h+22);gt=g(o,h+20)/(gt==0?100:gt);var wt={rect:_t,delay:Math.round(gt*1e3),dispose:o[h+24],blend:o[h+25]};b.frames.push(wt)}else if(ht=="fdAT"){for(var st=0;st<At-4;st++)tt[rt+st]=o[h+st+4];rt+=At-4}else if(ht=="pHYs")b.tabs[ht]=[d.readUint(o,h),d.readUint(o,h+4),o[h+8]];else if(ht=="cHRM"){b.tabs[ht]=[];for(var st=0;st<8;st++)b.tabs[ht].push(d.readUint(o,h+st*4))}else if(ht=="tEXt"){b.tabs[ht]==null&&(b.tabs[ht]={});var ft=d.nextZero(o,h),dt=d.readASCII(o,h,ft-h),xt=d.readASCII(o,ft+1,h+At-ft-1);b.tabs[ht][dt]=xt}else if(ht=="iTXt"){b.tabs[ht]==null&&(b.tabs[ht]={});var ft=0,bt=h;ft=d.nextZero(o,bt);var dt=d.readASCII(o,bt,ft-bt);bt=ft+1,o[bt],o[bt+1],bt+=2,ft=d.nextZero(o,bt),d.readASCII(o,bt,ft-bt),bt=ft+1,ft=d.nextZero(o,bt),d.readUTF8(o,bt,ft-bt),bt=ft+1;var xt=d.readUTF8(o,bt,At-(bt-h));b.tabs[ht][dt]=xt}else if(ht=="PLTE")b.tabs[ht]=d.readBytes(o,h,At);else if(ht=="hIST"){var Ct=b.tabs.PLTE.length/3;b.tabs[ht]=[];for(var st=0;st<Ct;st++)b.tabs[ht].push(g(o,h+st*2))}else if(ht=="tRNS")b.ctype==3?b.tabs[ht]=d.readBytes(o,h,At):b.ctype==0?b.tabs[ht]=g(o,h):b.ctype==2&&(b.tabs[ht]=[g(o,h),g(o,h+2),g(o,h+4)]);else if(ht=="gAMA")b.tabs[ht]=d.readUint(o,h)/1e5;else if(ht=="sRGB")b.tabs[ht]=o[h];else if(ht=="bKGD")b.ctype==0||b.ctype==4?b.tabs[ht]=[g(o,h)]:b.ctype==2||b.ctype==6?b.tabs[ht]=[g(o,h),g(o,h+2),g(o,h+4)]:b.ctype==3&&(b.tabs[ht]=o[h]);else if(ht=="IEND")break;h+=At,d.readUint(o,h),h+=4}if(rt!=0){var ct=b.frames[b.frames.length-1];ct.data=UPNG.decode._decompress(b,tt.slice(0,rt),ct.rect.width,ct.rect.height),rt=0}return b.data=UPNG.decode._decompress(b,j,b.width,b.height),delete b.compress,delete b.interlace,delete b.filter,b};UPNG.decode._decompress=function(s,o,h,d){var g=UPNG.decode._getBPP(s),_=Math.ceil(h*g/8),b=new Uint8Array((_+1+s.interlace)*d);return o=UPNG.decode._inflate(o,b),s.interlace==0?o=UPNG.decode._filterZero(o,s,0,h,d):s.interlace==1&&(o=UPNG.decode._readInterlace(o,s)),o};UPNG.decode._inflate=function(s,o){var h=UPNG.inflateRaw(new Uint8Array(s.buffer,2,s.length-6),o);return h};UPNG.inflateRaw=function(){var s={};return s.H={},s.H.N=function(o,h){var d=Uint8Array,g=0,_=0,b=0,j=0,et=0,tt=0,rt=0,at=0,st=0,At,ht;if(o[0]==3&&o[1]==0)return h||new d(0);var ct=s.H,_t=ct.b,gt=ct.e,wt=ct.R,ft=ct.n,dt=ct.A,xt=ct.Z,bt=ct.m,Ct=h==null;for(Ct&&(h=new d(o.length>>>2<<3));g==0;){if(g=_t(o,st,1),_=_t(o,st+1,2),st+=3,_==0){st&7&&(st+=8-(st&7));var Ut=(st>>>3)+4,Qt=o[Ut-4]|o[Ut-3]<<8;Ct&&(h=s.H.W(h,at+Qt)),h.set(new d(o.buffer,o.byteOffset+Ut,Qt),at),st=Ut+Qt<<3,at+=Qt;continue}if(Ct&&(h=s.H.W(h,at+(1<<17))),_==1&&(At=bt.J,ht=bt.h,tt=511,rt=31),_==2){b=gt(o,st,5)+257,j=gt(o,st+5,5)+1,et=gt(o,st+10,4)+4,st+=14;for(var kt=1,Nt=0;Nt<38;Nt+=2)bt.Q[Nt]=0,bt.Q[Nt+1]=0;for(var Nt=0;Nt<et;Nt++){var Wt=gt(o,st+Nt*3,3);bt.Q[(bt.X[Nt]<<1)+1]=Wt,Wt>kt&&(kt=Wt)}st+=3*et,ft(bt.Q,kt),dt(bt.Q,kt,bt.u),At=bt.w,ht=bt.d,st=wt(bt.u,(1<<kt)-1,b+j,o,st,bt.v);var Vt=ct.V(bt.v,0,b,bt.C);tt=(1<<Vt)-1;var qt=ct.V(bt.v,b,j,bt.D);rt=(1<<qt)-1,ft(bt.C,Vt),dt(bt.C,Vt,At),ft(bt.D,qt),dt(bt.D,qt,ht)}for(;;){var _e=At[xt(o,st)&tt];st+=_e&15;var Jt=_e>>>4;if(!(Jt>>>8))h[at++]=Jt;else{if(Jt==256)break;var lr=at+Jt-254;if(Jt>264){var jt=bt.q[Jt-257];lr=at+(jt>>>3)+gt(o,st,jt&7),st+=jt&7}var ur=ht[xt(o,st)&rt];st+=ur&15;var Ar=ur>>>4,mr=bt.c[Ar],dr=(mr>>>4)+_t(o,st,mr&15);for(st+=mr&15;at<lr;)h[at]=h[at++-dr],h[at]=h[at++-dr],h[at]=h[at++-dr],h[at]=h[at++-dr];at=lr}}}return h.length==at?h:h.slice(0,at)},s.H.W=function(o,h){var d=o.length;if(h<=d)return o;var g=new Uint8Array(d<<1);return g.set(o,0),g},s.H.R=function(o,h,d,g,_,b){for(var j=s.H.e,et=s.H.Z,tt=0;tt<d;){var rt=o[et(g,_)&h];_+=rt&15;var at=rt>>>4;if(at<=15)b[tt]=at,tt++;else{var st=0,At=0;at==16?(At=3+j(g,_,2),_+=2,st=b[tt-1]):at==17?(At=3+j(g,_,3),_+=3):at==18&&(At=11+j(g,_,7),_+=7);for(var ht=tt+At;tt<ht;)b[tt]=st,tt++}}return _},s.H.V=function(o,h,d,g){for(var _=0,b=0,j=g.length>>>1;b<d;){var et=o[b+h];g[b<<1]=0,g[(b<<1)+1]=et,et>_&&(_=et),b++}for(;b<j;)g[b<<1]=0,g[(b<<1)+1]=0,b++;return _},s.H.n=function(o,h){for(var d=s.H.m,g=o.length,_,b,j,rt,et,tt=d.j,rt=0;rt<=h;rt++)tt[rt]=0;for(rt=1;rt<g;rt+=2)tt[o[rt]]++;var at=d.K;for(_=0,tt[0]=0,b=1;b<=h;b++)_=_+tt[b-1]<<1,at[b]=_;for(j=0;j<g;j+=2)et=o[j+1],et!=0&&(o[j]=at[et],at[et]++)},s.H.A=function(o,h,d){for(var g=o.length,_=s.H.m,b=_.r,j=0;j<g;j+=2)if(o[j+1]!=0)for(var et=j>>1,tt=o[j+1],rt=et<<4|tt,at=h-tt,st=o[j]<<at,At=st+(1<<at);st!=At;){var ht=b[st]>>>15-h;d[ht]=rt,st++}},s.H.l=function(o,h){for(var d=s.H.m.r,g=15-h,_=0;_<o.length;_+=2){var b=o[_]<<h-o[_+1];o[_]=d[b]>>>g}},s.H.M=function(o,h,d){d=d<<(h&7);var g=h>>>3;o[g]|=d,o[g+1]|=d>>>8},s.H.I=function(o,h,d){d=d<<(h&7);var g=h>>>3;o[g]|=d,o[g+1]|=d>>>8,o[g+2]|=d>>>16},s.H.e=function(o,h,d){return(o[h>>>3]|o[(h>>>3)+1]<<8)>>>(h&7)&(1<<d)-1},s.H.b=function(o,h,d){return(o[h>>>3]|o[(h>>>3)+1]<<8|o[(h>>>3)+2]<<16)>>>(h&7)&(1<<d)-1},s.H.Z=function(o,h){return(o[h>>>3]|o[(h>>>3)+1]<<8|o[(h>>>3)+2]<<16)>>>(h&7)},s.H.i=function(o,h){return(o[h>>>3]|o[(h>>>3)+1]<<8|o[(h>>>3)+2]<<16|o[(h>>>3)+3]<<24)>>>(h&7)},s.H.m=function(){var o=Uint16Array,h=Uint32Array;return{K:new o(16),j:new o(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new o(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new h(32),J:new o(512),_:[],h:new o(32),$:[],w:new o(32768),C:[],v:[],d:new o(32768),D:[],u:new o(512),Q:[],r:new o(32768),s:new h(286),Y:new h(30),a:new h(19),t:new h(15e3),k:new o(65536),g:new o(32768)}}(),function(){for(var o=s.H.m,h=32768,d=0;d<h;d++){var g=d;g=(g&2863311530)>>>1|(g&1431655765)<<1,g=(g&3435973836)>>>2|(g&858993459)<<2,g=(g&4042322160)>>>4|(g&252645135)<<4,g=(g&4278255360)>>>8|(g&16711935)<<8,o.r[d]=(g>>>16|g<<16)>>>17}function _(b,j,et){for(;j--!=0;)b.push(0,et)}for(var d=0;d<32;d++)o.q[d]=o.S[d]<<3|o.T[d],o.c[d]=o.p[d]<<4|o.z[d];_(o._,144,8),_(o._,112,9),_(o._,24,7),_(o._,8,8),s.H.n(o._,9),s.H.A(o._,9,o.J),s.H.l(o._,9),_(o.$,32,5),s.H.n(o.$,5),s.H.A(o.$,5,o.h),s.H.l(o.$,5),_(o.Q,19,0),_(o.C,286,0),_(o.D,30,0),_(o.v,320,0)}(),s.H.N}();UPNG.decode._readInterlace=function(s,o){for(var h=o.width,d=o.height,g=UPNG.decode._getBPP(o),_=g>>3,b=Math.ceil(h*g/8),j=new Uint8Array(d*b),et=0,tt=[0,0,4,0,2,0,1],rt=[0,4,0,2,0,1,0],at=[8,8,8,4,4,2,2],st=[8,8,4,4,2,2,1],At=0;At<7;){for(var ht=at[At],ct=st[At],_t=0,gt=0,wt=tt[At];wt<d;)wt+=ht,gt++;for(var ft=rt[At];ft<h;)ft+=ct,_t++;var dt=Math.ceil(_t*g/8);UPNG.decode._filterZero(s,o,et,_t,gt);for(var xt=0,bt=tt[At];bt<d;){for(var Ct=rt[At],Ut=et+xt*dt<<3;Ct<h;){if(g==1){var Qt=s[Ut>>3];Qt=Qt>>7-(Ut&7)&1,j[bt*b+(Ct>>3)]|=Qt<<7-((Ct&7)<<0)}if(g==2){var Qt=s[Ut>>3];Qt=Qt>>6-(Ut&7)&3,j[bt*b+(Ct>>2)]|=Qt<<6-((Ct&3)<<1)}if(g==4){var Qt=s[Ut>>3];Qt=Qt>>4-(Ut&7)&15,j[bt*b+(Ct>>1)]|=Qt<<4-((Ct&1)<<2)}if(g>=8)for(var kt=bt*b+Ct*_,Nt=0;Nt<_;Nt++)j[kt+Nt]=s[(Ut>>3)+Nt];Ut+=g,Ct+=ct}xt++,bt+=ht}_t*gt!=0&&(et+=gt*(1+dt)),At=At+1}return j};UPNG.decode._getBPP=function(s){var o=[1,null,3,1,2,null,4][s.ctype];return o*s.depth};UPNG.decode._filterZero=function(s,o,h,d,g){var _=UPNG.decode._getBPP(o),b=Math.ceil(d*_/8),j=UPNG.decode._paeth;_=Math.ceil(_/8);var et=0,tt=1,rt=s[h],at=0;if(rt>1&&(s[h]=[0,0,1][rt-2]),rt==3)for(at=_;at<b;at++)s[at+1]=s[at+1]+(s[at+1-_]>>>1)&255;for(var st=0;st<g;st++)if(et=h+st*b,tt=et+st+1,rt=s[tt-1],at=0,rt==0)for(;at<b;at++)s[et+at]=s[tt+at];else if(rt==1){for(;at<_;at++)s[et+at]=s[tt+at];for(;at<b;at++)s[et+at]=s[tt+at]+s[et+at-_]}else if(rt==2)for(;at<b;at++)s[et+at]=s[tt+at]+s[et+at-b];else if(rt==3){for(;at<_;at++)s[et+at]=s[tt+at]+(s[et+at-b]>>>1);for(;at<b;at++)s[et+at]=s[tt+at]+(s[et+at-b]+s[et+at-_]>>>1)}else{for(;at<_;at++)s[et+at]=s[tt+at]+j(0,s[et+at-b],0);for(;at<b;at++)s[et+at]=s[tt+at]+j(s[et+at-_],s[et+at-b],s[et+at-_-b])}return s};UPNG.decode._paeth=function(s,o,h){var d=s+o-h,g=d-s,_=d-o,b=d-h;return g*g<=_*_&&g*g<=b*b?s:_*_<=b*b?o:h};UPNG.decode._IHDR=function(s,o,h){var d=UPNG._bin;h.width=d.readUint(s,o),o+=4,h.height=d.readUint(s,o),o+=4,h.depth=s[o],o++,h.ctype=s[o],o++,h.compress=s[o],o++,h.filter=s[o],o++,h.interlace=s[o],o++};UPNG._bin={nextZero:function(s,o){for(;s[o]!=0;)o++;return o},readUshort:function(s,o){return s[o]<<8|s[o+1]},writeUshort:function(s,o,h){s[o]=h>>8&255,s[o+1]=h&255},readUint:function(s,o){return s[o]*(256*256*256)+(s[o+1]<<16|s[o+2]<<8|s[o+3])},writeUint:function(s,o,h){s[o]=h>>24&255,s[o+1]=h>>16&255,s[o+2]=h>>8&255,s[o+3]=h&255},readASCII:function(s,o,h){for(var d="",g=0;g<h;g++)d+=String.fromCharCode(s[o+g]);return d},writeASCII:function(s,o,h){for(var d=0;d<h.length;d++)s[o+d]=h.charCodeAt(d)},readBytes:function(s,o,h){for(var d=[],g=0;g<h;g++)d.push(s[o+g]);return d},pad:function(s){return s.length<2?"0"+s:s},readUTF8:function(s,o,h){for(var d="",g,_=0;_<h;_++)d+="%"+UPNG._bin.pad(s[o+_].toString(16));try{g=decodeURIComponent(d)}catch{return UPNG._bin.readASCII(s,o,h)}return g}};UPNG._copyTile=function(s,o,h,d,g,_,b,j,et){for(var tt=Math.min(o,g),rt=Math.min(h,_),at=0,st=0,At=0;At<rt;At++)for(var ht=0;ht<tt;ht++)if(b>=0&&j>=0?(at=At*o+ht<<2,st=(j+At)*g+b+ht<<2):(at=(-j+At)*o-b+ht<<2,st=At*g+ht<<2),et==0)d[st]=s[at],d[st+1]=s[at+1],d[st+2]=s[at+2],d[st+3]=s[at+3];else if(et==1){var ct=s[at+3]*.00392156862745098,_t=s[at]*ct,gt=s[at+1]*ct,wt=s[at+2]*ct,ft=d[st+3]*(1/255),dt=d[st]*ft,xt=d[st+1]*ft,bt=d[st+2]*ft,Ct=1-ct,Ut=ct+ft*Ct,Qt=Ut==0?0:1/Ut;d[st+3]=255*Ut,d[st+0]=(_t+dt*Ct)*Qt,d[st+1]=(gt+xt*Ct)*Qt,d[st+2]=(wt+bt*Ct)*Qt}else if(et==2){var ct=s[at+3],_t=s[at],gt=s[at+1],wt=s[at+2],ft=d[st+3],dt=d[st],xt=d[st+1],bt=d[st+2];ct==ft&&_t==dt&&gt==xt&&wt==bt?(d[st]=0,d[st+1]=0,d[st+2]=0,d[st+3]=0):(d[st]=_t,d[st+1]=gt,d[st+2]=wt,d[st+3]=ct)}else if(et==3){var ct=s[at+3],_t=s[at],gt=s[at+1],wt=s[at+2],ft=d[st+3],dt=d[st],xt=d[st+1],bt=d[st+2];if(ct==ft&&_t==dt&&gt==xt&&wt==bt)continue;if(ct<220&&ft>20)return!1}return!0};UPNG.encode=function(s,o,h,d,g,_,b){d==null&&(d=0),b==null&&(b=!1);var j=UPNG.encode.compress(s,o,h,d,[!1,!1,!1,0,b]);return UPNG.encode.compressPNG(j,-1),UPNG.encode._main(j,o,h,g,_)};UPNG.encodeLL=function(s,o,h,d,g,_,b,j){for(var et={ctype:0+(d==1?0:2)+(g==0?0:4),depth:_,frames:[]},tt=(d+g)*_,rt=tt*o,at=0;at<s.length;at++)et.frames.push({rect:{x:0,y:0,width:o,height:h},img:new Uint8Array(s[at]),blend:0,dispose:1,bpp:Math.ceil(tt/8),bpl:Math.ceil(rt/8)});UPNG.encode.compressPNG(et,0,!0);var st=UPNG.encode._main(et,o,h,b,j);return st};UPNG.encode._main=function(s,o,h,d,g){g==null&&(g={});var _=UPNG.crc.crc,b=UPNG._bin.writeUint,j=UPNG._bin.writeUshort,et=UPNG._bin.writeASCII,tt=8,rt=s.frames.length>1,at=!1,st=33+(rt?20:0);if(g.sRGB!=null&&(st+=13),g.pHYs!=null&&(st+=21),s.ctype==3){for(var At=s.plte.length,ht=0;ht<At;ht++)s.plte[ht]>>>24!=255&&(at=!0);st+=8+At*3+4+(at?8+At*1+4:0)}for(var ct=0;ct<s.frames.length;ct++){var _t=s.frames[ct];rt&&(st+=38),st+=_t.cimg.length+12,ct!=0&&(st+=4)}st+=12;for(var gt=new Uint8Array(st),wt=[137,80,78,71,13,10,26,10],ht=0;ht<8;ht++)gt[ht]=wt[ht];if(b(gt,tt,13),tt+=4,et(gt,tt,"IHDR"),tt+=4,b(gt,tt,o),tt+=4,b(gt,tt,h),tt+=4,gt[tt]=s.depth,tt++,gt[tt]=s.ctype,tt++,gt[tt]=0,tt++,gt[tt]=0,tt++,gt[tt]=0,tt++,b(gt,tt,_(gt,tt-17,17)),tt+=4,g.sRGB!=null&&(b(gt,tt,1),tt+=4,et(gt,tt,"sRGB"),tt+=4,gt[tt]=g.sRGB,tt++,b(gt,tt,_(gt,tt-5,5)),tt+=4),g.pHYs!=null&&(b(gt,tt,9),tt+=4,et(gt,tt,"pHYs"),tt+=4,b(gt,tt,g.pHYs[0]),tt+=4,b(gt,tt,g.pHYs[1]),tt+=4,gt[tt]=g.pHYs[2],tt++,b(gt,tt,_(gt,tt-13,13)),tt+=4),rt&&(b(gt,tt,8),tt+=4,et(gt,tt,"acTL"),tt+=4,b(gt,tt,s.frames.length),tt+=4,b(gt,tt,g.loop!=null?g.loop:0),tt+=4,b(gt,tt,_(gt,tt-12,12)),tt+=4),s.ctype==3){var At=s.plte.length;b(gt,tt,At*3),tt+=4,et(gt,tt,"PLTE"),tt+=4;for(var ht=0;ht<At;ht++){var ft=ht*3,dt=s.plte[ht],xt=dt&255,bt=dt>>>8&255,Ct=dt>>>16&255;gt[tt+ft+0]=xt,gt[tt+ft+1]=bt,gt[tt+ft+2]=Ct}if(tt+=At*3,b(gt,tt,_(gt,tt-At*3-4,At*3+4)),tt+=4,at){b(gt,tt,At),tt+=4,et(gt,tt,"tRNS"),tt+=4;for(var ht=0;ht<At;ht++)gt[tt+ht]=s.plte[ht]>>>24&255;tt+=At,b(gt,tt,_(gt,tt-At-4,At+4)),tt+=4}}for(var Ut=0,ct=0;ct<s.frames.length;ct++){var _t=s.frames[ct];rt&&(b(gt,tt,26),tt+=4,et(gt,tt,"fcTL"),tt+=4,b(gt,tt,Ut++),tt+=4,b(gt,tt,_t.rect.width),tt+=4,b(gt,tt,_t.rect.height),tt+=4,b(gt,tt,_t.rect.x),tt+=4,b(gt,tt,_t.rect.y),tt+=4,j(gt,tt,d[ct]),tt+=2,j(gt,tt,1e3),tt+=2,gt[tt]=_t.dispose,tt++,gt[tt]=_t.blend,tt++,b(gt,tt,_(gt,tt-30,30)),tt+=4);var Qt=_t.cimg,At=Qt.length;b(gt,tt,At+(ct==0?0:4)),tt+=4;var kt=tt;et(gt,tt,ct==0?"IDAT":"fdAT"),tt+=4,ct!=0&&(b(gt,tt,Ut++),tt+=4),gt.set(Qt,tt),tt+=At,b(gt,tt,_(gt,kt,tt-kt)),tt+=4}return b(gt,tt,0),tt+=4,et(gt,tt,"IEND"),tt+=4,b(gt,tt,_(gt,tt-4,4)),tt+=4,gt.buffer};UPNG.encode.compressPNG=function(s,o,h){for(var d=0;d<s.frames.length;d++){var g=s.frames[d];g.rect.width;var _=g.rect.height,b=new Uint8Array(_*g.bpl+_);g.cimg=UPNG.encode._filterZero(g.img,_,g.bpp,g.bpl,b,o,h)}};UPNG.encode.compress=function(s,o,h,d,g){for(var _=g[0],b=g[1],j=g[2],et=g[3],tt=g[4],rt=6,at=8,st=255,At=0;At<s.length;At++)for(var ht=new Uint8Array(s[At]),ct=ht.length,_t=0;_t<ct;_t+=4)st&=ht[_t+3];var gt=st!=255,wt=UPNG.encode.framize(s,o,h,_,b,j),ft={},dt=[],xt=[];if(d!=0){for(var bt=[],_t=0;_t<wt.length;_t++)bt.push(wt[_t].img.buffer);for(var Ct=UPNG.encode.concatRGBA(bt),Ut=UPNG.quantize(Ct,d),Qt=0,kt=new Uint8Array(Ut.abuf),_t=0;_t<wt.length;_t++){var Nt=wt[_t].img,Wt=Nt.length;xt.push(new Uint8Array(Ut.inds.buffer,Qt>>2,Wt>>2));for(var At=0;At<Wt;At+=4)Nt[At]=kt[Qt+At],Nt[At+1]=kt[Qt+At+1],Nt[At+2]=kt[Qt+At+2],Nt[At+3]=kt[Qt+At+3];Qt+=Wt}for(var _t=0;_t<Ut.plte.length;_t++)dt.push(Ut.plte[_t].est.rgba)}else for(var At=0;At<wt.length;At++){var Vt=wt[At],qt=new Uint32Array(Vt.img.buffer),_e=Vt.rect.width,ct=qt.length,Jt=new Uint8Array(ct);xt.push(Jt);for(var _t=0;_t<ct;_t++){var lr=qt[_t];if(_t!=0&&lr==qt[_t-1])Jt[_t]=Jt[_t-1];else if(_t>_e&&lr==qt[_t-_e])Jt[_t]=Jt[_t-_e];else{var jt=ft[lr];if(jt==null&&(ft[lr]=jt=dt.length,dt.push(lr),dt.length>=300))break;Jt[_t]=jt}}}var ur=dt.length;ur<=256&&tt==!1&&(ur<=2?at=1:ur<=4?at=2:ur<=16?at=4:at=8,at=Math.max(at,et));for(var At=0;At<wt.length;At++){var Vt=wt[At];Vt.rect.x,Vt.rect.y;var _e=Vt.rect.width,Ar=Vt.rect.height,mr=Vt.img;new Uint32Array(mr.buffer);var dr=4*_e,Nr=4;if(ur<=256&&tt==!1){dr=Math.ceil(at*_e/8);for(var Ur=new Uint8Array(dr*Ar),nr=xt[At],hr=0;hr<Ar;hr++){var _t=hr*dr,Dr=hr*_e;if(at==8)for(var Qr=0;Qr<_e;Qr++)Ur[_t+Qr]=nr[Dr+Qr];else if(at==4)for(var Qr=0;Qr<_e;Qr++)Ur[_t+(Qr>>1)]|=nr[Dr+Qr]<<4-(Qr&1)*4;else if(at==2)for(var Qr=0;Qr<_e;Qr++)Ur[_t+(Qr>>2)]|=nr[Dr+Qr]<<6-(Qr&3)*2;else if(at==1)for(var Qr=0;Qr<_e;Qr++)Ur[_t+(Qr>>3)]|=nr[Dr+Qr]<<7-(Qr&7)*1}mr=Ur,rt=3,Nr=1}else if(gt==!1&&wt.length==1){for(var Ur=new Uint8Array(_e*Ar*3),vr=_e*Ar,_t=0;_t<vr;_t++){var Nt=_t*3,on=_t*4;Ur[Nt]=mr[on],Ur[Nt+1]=mr[on+1],Ur[Nt+2]=mr[on+2]}mr=Ur,rt=2,Nr=3,dr=3*_e}Vt.img=mr,Vt.bpl=dr,Vt.bpp=Nr}return{ctype:rt,depth:at,plte:dt,frames:wt}};UPNG.encode.framize=function(s,o,h,d,g,_){for(var b=[],j=0;j<s.length;j++){var et=new Uint8Array(s[j]),tt=new Uint32Array(et.buffer),rt,at=0,st=0,At=o,ht=h,ct=d?1:0;if(j!=0){for(var _t=_||d||j==1||b[j-2].dispose!=0?1:2,gt=0,wt=1e9,ft=0;ft<_t;ft++){for(var Vt=new Uint8Array(s[j-1-ft]),dt=new Uint32Array(s[j-1-ft]),xt=o,bt=h,Ct=-1,Ut=-1,Qt=0;Qt<h;Qt++)for(var kt=0;kt<o;kt++){var Nt=Qt*o+kt;tt[Nt]!=dt[Nt]&&(kt<xt&&(xt=kt),kt>Ct&&(Ct=kt),Qt<bt&&(bt=Qt),Qt>Ut&&(Ut=Qt))}Ct==-1&&(xt=bt=Ct=Ut=0),g&&((xt&1)==1&&xt--,(bt&1)==1&&bt--);var Wt=(Ct-xt+1)*(Ut-bt+1);Wt<wt&&(wt=Wt,gt=ft,at=xt,st=bt,At=Ct-xt+1,ht=Ut-bt+1)}var Vt=new Uint8Array(s[j-1-gt]);gt==1&&(b[j-1].dispose=2),rt=new Uint8Array(At*ht*4),UPNG._copyTile(Vt,o,h,rt,At,ht,-at,-st,0),ct=UPNG._copyTile(et,o,h,rt,At,ht,-at,-st,3)?1:0,ct==1?UPNG.encode._prepareDiff(et,o,h,rt,{x:at,y:st,width:At,height:ht}):UPNG._copyTile(et,o,h,rt,At,ht,-at,-st,0)}else rt=et.slice(0);b.push({rect:{x:at,y:st,width:At,height:ht},img:rt,blend:ct,dispose:0})}if(d)for(var j=0;j<b.length;j++){var qt=b[j];if(qt.blend!=1){var _e=qt.rect,Jt=b[j-1].rect,lr=Math.min(_e.x,Jt.x),jt=Math.min(_e.y,Jt.y),ur=Math.max(_e.x+_e.width,Jt.x+Jt.width),Ar=Math.max(_e.y+_e.height,Jt.y+Jt.height),mr={x:lr,y:jt,width:ur-lr,height:Ar-jt};b[j-1].dispose=1,j-1!=0&&UPNG.encode._updateFrame(s,o,h,b,j-1,mr,g),UPNG.encode._updateFrame(s,o,h,b,j,mr,g)}}var dr=0;if(s.length!=1)for(var Nt=0;Nt<b.length;Nt++){var qt=b[Nt];dr+=qt.rect.width*qt.rect.height}return b};UPNG.encode._updateFrame=function(s,o,h,d,g,_,b){for(var j=Uint8Array,et=Uint32Array,tt=new j(s[g-1]),rt=new et(s[g-1]),at=g+1<s.length?new j(s[g+1]):null,st=new j(s[g]),At=new et(st.buffer),ht=o,ct=h,_t=-1,gt=-1,wt=0;wt<_.height;wt++)for(var ft=0;ft<_.width;ft++){var dt=_.x+ft,xt=_.y+wt,bt=xt*o+dt,Ct=At[bt];Ct==0||d[g-1].dispose==0&&rt[bt]==Ct&&(at==null||at[bt*4+3]!=0)||(dt<ht&&(ht=dt),dt>_t&&(_t=dt),xt<ct&&(ct=xt),xt>gt&&(gt=xt))}_t==-1&&(ht=ct=_t=gt=0),b&&((ht&1)==1&&ht--,(ct&1)==1&&ct--),_={x:ht,y:ct,width:_t-ht+1,height:gt-ct+1};var Ut=d[g];Ut.rect=_,Ut.blend=1,Ut.img=new Uint8Array(_.width*_.height*4),d[g-1].dispose==0?(UPNG._copyTile(tt,o,h,Ut.img,_.width,_.height,-_.x,-_.y,0),UPNG.encode._prepareDiff(st,o,h,Ut.img,_)):UPNG._copyTile(st,o,h,Ut.img,_.width,_.height,-_.x,-_.y,0)};UPNG.encode._prepareDiff=function(s,o,h,d,g){UPNG._copyTile(s,o,h,d,g.width,g.height,-g.x,-g.y,2)};UPNG.encode._filterZero=function(s,o,h,d,g,_,b){var j=[],et=[0,1,2,3,4];_!=-1?et=[_]:(o*d>5e5||h==1)&&(et=[0]);var tt;b&&(tt={level:0});for(var rt=b&&UZIP!=null?UZIP:pako,at=0;at<et.length;at++){for(var st=0;st<o;st++)UPNG.encode._filterLine(g,s,st,d,h,et[at]);j.push(rt.deflate(g,tt))}for(var At,ht=1e9,at=0;at<j.length;at++)j[at].length<ht&&(At=at,ht=j[at].length);return j[At]};UPNG.encode._filterLine=function(s,o,h,d,g,_){var b=h*d,j=b+h,et=UPNG.decode._paeth;if(s[j]=_,j++,_==0)if(d<500)for(var tt=0;tt<d;tt++)s[j+tt]=o[b+tt];else s.set(new Uint8Array(o.buffer,b,d),j);else if(_==1){for(var tt=0;tt<g;tt++)s[j+tt]=o[b+tt];for(var tt=g;tt<d;tt++)s[j+tt]=o[b+tt]-o[b+tt-g]+256&255}else if(h==0){for(var tt=0;tt<g;tt++)s[j+tt]=o[b+tt];if(_==2)for(var tt=g;tt<d;tt++)s[j+tt]=o[b+tt];if(_==3)for(var tt=g;tt<d;tt++)s[j+tt]=o[b+tt]-(o[b+tt-g]>>1)+256&255;if(_==4)for(var tt=g;tt<d;tt++)s[j+tt]=o[b+tt]-et(o[b+tt-g],0,0)+256&255}else{if(_==2)for(var tt=0;tt<d;tt++)s[j+tt]=o[b+tt]+256-o[b+tt-d]&255;if(_==3){for(var tt=0;tt<g;tt++)s[j+tt]=o[b+tt]+256-(o[b+tt-d]>>1)&255;for(var tt=g;tt<d;tt++)s[j+tt]=o[b+tt]+256-(o[b+tt-d]+o[b+tt-g]>>1)&255}if(_==4){for(var tt=0;tt<g;tt++)s[j+tt]=o[b+tt]+256-et(0,o[b+tt-d],0)&255;for(var tt=g;tt<d;tt++)s[j+tt]=o[b+tt]+256-et(o[b+tt-g],o[b+tt-d],o[b+tt-g-d])&255}}};UPNG.crc={table:function(){for(var s=new Uint32Array(256),o=0;o<256;o++){for(var h=o,d=0;d<8;d++)h&1?h=3988292384^h>>>1:h=h>>>1;s[o]=h}return s}(),update:function(s,o,h,d){for(var g=0;g<d;g++)s=UPNG.crc.table[(s^o[h+g])&255]^s>>>8;return s},crc:function(s,o,h){return UPNG.crc.update(4294967295,s,o,h)^4294967295}};UPNG.quantize=function(s,o){var h=new Uint8Array(s),d=h.slice(0),g=new Uint32Array(d.buffer),_=UPNG.quantize.getKDtree(d,o),b=_[0],j=_[1];UPNG.quantize.planeDst;for(var et=h,tt=g,rt=et.length,at=new Uint8Array(h.length>>2),st=0;st<rt;st+=4){var At=et[st]*.00392156862745098,ht=et[st+1]*(1/255),ct=et[st+2]*(1/255),_t=et[st+3]*(1/255),gt=UPNG.quantize.getNearest(b,At,ht,ct,_t);at[st>>2]=gt.ind,tt[st>>2]=gt.est.rgba}return{abuf:d.buffer,inds:at,plte:j}};UPNG.quantize.getKDtree=function(s,o,h){h==null&&(h=1e-4);var d=new Uint32Array(s.buffer),g={i0:0,i1:s.length,bst:null,est:null,tdst:0,left:null,right:null};g.bst=UPNG.quantize.stats(s,g.i0,g.i1),g.est=UPNG.quantize.estats(g.bst);for(var _=[g];_.length<o;){for(var b=0,j=0,et=0;et<_.length;et++)_[et].est.L>b&&(b=_[et].est.L,j=et);if(b<h)break;var tt=_[j],rt=UPNG.quantize.splitPixels(s,d,tt.i0,tt.i1,tt.est.e,tt.est.eMq255),at=tt.i0>=rt||tt.i1<=rt;if(at){tt.est.L=0;continue}var st={i0:tt.i0,i1:rt,bst:null,est:null,tdst:0,left:null,right:null};st.bst=UPNG.quantize.stats(s,st.i0,st.i1),st.est=UPNG.quantize.estats(st.bst);var At={i0:rt,i1:tt.i1,bst:null,est:null,tdst:0,left:null,right:null};At.bst={R:[],m:[],N:tt.bst.N-st.bst.N};for(var et=0;et<16;et++)At.bst.R[et]=tt.bst.R[et]-st.bst.R[et];for(var et=0;et<4;et++)At.bst.m[et]=tt.bst.m[et]-st.bst.m[et];At.est=UPNG.quantize.estats(At.bst),tt.left=st,tt.right=At,_[j]=st,_.push(At)}_.sort(function(ht,ct){return ct.bst.N-ht.bst.N});for(var et=0;et<_.length;et++)_[et].ind=et;return[g,_]};UPNG.quantize.getNearest=function(s,o,h,d,g){if(s.left==null)return s.tdst=UPNG.quantize.dist(s.est.q,o,h,d,g),s;var _=UPNG.quantize.planeDst(s.est,o,h,d,g),b=s.left,j=s.right;_>0&&(b=s.right,j=s.left);var et=UPNG.quantize.getNearest(b,o,h,d,g);if(et.tdst<=_*_)return et;var tt=UPNG.quantize.getNearest(j,o,h,d,g);return tt.tdst<et.tdst?tt:et};UPNG.quantize.planeDst=function(s,o,h,d,g){var _=s.e;return _[0]*o+_[1]*h+_[2]*d+_[3]*g-s.eMq};UPNG.quantize.dist=function(s,o,h,d,g){var _=o-s[0],b=h-s[1],j=d-s[2],et=g-s[3];return _*_+b*b+j*j+et*et};UPNG.quantize.splitPixels=function(s,o,h,d,g,_){var b=UPNG.quantize.vecDot;for(d-=4;h<d;){for(;b(s,h,g)<=_;)h+=4;for(;b(s,d,g)>_;)d-=4;if(h>=d)break;var j=o[h>>2];o[h>>2]=o[d>>2],o[d>>2]=j,h+=4,d-=4}for(;b(s,h,g)>_;)h-=4;return h+4};UPNG.quantize.vecDot=function(s,o,h){return s[o]*h[0]+s[o+1]*h[1]+s[o+2]*h[2]+s[o+3]*h[3]};UPNG.quantize.stats=function(s,o,h){for(var d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],g=[0,0,0,0],_=h-o>>2,b=o;b<h;b+=4){var j=s[b]*.00392156862745098,et=s[b+1]*(1/255),tt=s[b+2]*(1/255),rt=s[b+3]*(1/255);g[0]+=j,g[1]+=et,g[2]+=tt,g[3]+=rt,d[0]+=j*j,d[1]+=j*et,d[2]+=j*tt,d[3]+=j*rt,d[5]+=et*et,d[6]+=et*tt,d[7]+=et*rt,d[10]+=tt*tt,d[11]+=tt*rt,d[15]+=rt*rt}return d[4]=d[1],d[8]=d[2],d[9]=d[6],d[12]=d[3],d[13]=d[7],d[14]=d[11],{R:d,m:g,N:_}};UPNG.quantize.estats=function(s){var o=s.R,h=s.m,d=s.N,g=h[0],_=h[1],b=h[2],j=h[3],et=d==0?0:1/d,tt=[o[0]-g*g*et,o[1]-g*_*et,o[2]-g*b*et,o[3]-g*j*et,o[4]-_*g*et,o[5]-_*_*et,o[6]-_*b*et,o[7]-_*j*et,o[8]-b*g*et,o[9]-b*_*et,o[10]-b*b*et,o[11]-b*j*et,o[12]-j*g*et,o[13]-j*_*et,o[14]-j*b*et,o[15]-j*j*et],rt=tt,at=UPNG.M4,st=[.5,.5,.5,.5],At=0,ht=0;if(d!=0)for(var ct=0;ct<10&&(st=at.multVec(rt,st),ht=Math.sqrt(at.dot(st,st)),st=at.sml(1/ht,st),!(Math.abs(ht-At)<1e-9));ct++)At=ht;var _t=[g*et,_*et,b*et,j*et],gt=at.dot(at.sml(255,_t),st);return{Cov:tt,q:_t,e:st,L:At,eMq255:gt,eMq:at.dot(st,_t),rgba:(Math.round(255*_t[3])<<24|Math.round(255*_t[2])<<16|Math.round(255*_t[1])<<8|Math.round(255*_t[0])<<0)>>>0}};UPNG.M4={multVec:function(s,o){return[s[0]*o[0]+s[1]*o[1]+s[2]*o[2]+s[3]*o[3],s[4]*o[0]+s[5]*o[1]+s[6]*o[2]+s[7]*o[3],s[8]*o[0]+s[9]*o[1]+s[10]*o[2]+s[11]*o[3],s[12]*o[0]+s[13]*o[1]+s[14]*o[2]+s[15]*o[3]]},dot:function(s,o){return s[0]*o[0]+s[1]*o[1]+s[2]*o[2]+s[3]*o[3]},sml:function(s,o){return[s*o[0],s*o[1],s*o[2],s*o[3]]}};UPNG.encode.concatRGBA=function(s){for(var o=0,h=0;h<s.length;h++)o+=s[h].byteLength;for(var d=new Uint8Array(o),g=0,h=0;h<s.length;h++){for(var _=new Uint8Array(s[h]),b=_.length,j=0;j<b;j+=4){var et=_[j],tt=_[j+1],rt=_[j+2],at=_[j+3];at==0&&(et=tt=rt=0),d[g+j]=et,d[g+j+1]=tt,d[g+j+2]=rt,d[g+j+3]=at}g+=b}return d.buffer};class TxSprite{constructor(o,h,d,g,_,b=!1){$e(this,"width"),$e(this,"height"),$e(this,"numColors"),$e(this,"paletteData"),$e(this,"pixelData"),$e(this,"compress"),this.width=o,this.height=h,this.numColors=d,this.paletteData=g,this.pixelData=_,this.compress=b,g.length/3!==d&&d>0&&console.warn(`TxSprite constructor: numColors (${d}) does not match paletteData length (${g.length/3} colors).`),_.length!==o*h&&o*h>0&&console.warn(`TxSprite constructor: pixelData length (${_.length}) does not match width*height (${o*h}).`)}static async fromIndexedPngBytes(o,h=!1){const d=UPNG.decode(o),{width:g,height:_,data:b,ctype:j,tabs:et}=d;return console.log(`PNG dimensions: ${g}x${_}, data length: ${b.byteLength}, ctype: ${j}, PLTE: ${et.PLTE}`),new TxSprite(g,_,et.PLTE?et.PLTE.length/3:0,et.PLTE?new Uint8Array(et.PLTE):new Uint8Array,new Uint8Array(b.slice(0,g*_)),h)}static async fromImageBytes(o,h=48e3,d=!1){let g=await Image$1.load(o),_=g.width*g.height;if(_>h){const st=Math.sqrt(h/_);g=g.resize({factor:st})}(g.width>640||g.height>400)&&(g=g.resize({width:640,height:400,preserveAspectRatio:!0,interpolation:"nearestNeighbor"})),console.log(`Resized image to ${g.width}x${g.height}`);const b=utils_exports.PointContainer.fromUint8Array(g.getRGBAData(),g.width,g.height);console.log(`PointContainer created with ${b.getPointArray().length} points.`);const j=buildPaletteSync([b],{colors:15});console.log(`Palette built: ${j.getPointContainer().getPointArray().length} colors.`),j.getPointContainer().getPointArray().unshift(utils_exports.Point.createByQuadruplet([0,0,0,0]));const et=applyPaletteSync(b,j);console.log(`OutPointContainer: ${et.getPointArray().length} points.`);const tt=new Uint8Array(et.toUint32Array());console.log(`Indexed pixel data size: ${tt.length}.`);const rt=j.getPointContainer().getPointArray().length,at=new Uint8Array(rt*3);return j.getPointContainer().getPointArray().forEach((st,At)=>{at[At*3+0]=st.r,at[At*3+1]=st.g,at[At*3+2]=st.b,console.log(`Color ${At}: R=${st.r}, G=${st.g}, B=${st.b}`)}),new TxSprite(g.width,g.height,rt,at,tt,d)}get bpp(){return this.numColors<=0?4:this.numColors<=2?1:this.numColors<=4?2:(this.numColors<=16||console.warn(`numColors (${this.numColors}) is greater than 16. Defaulting BPP to 4.`),4)}pack(){let o;const h=this.bpp;switch(h){case 1:o=TxSprite._pack_1bit(this.pixelData);break;case 2:o=TxSprite._pack_2bit(this.pixelData);break;case 4:o=TxSprite._pack_4bit(this.pixelData);break;default:throw new Error(`Unsupported bpp: ${h}`)}const d=new Uint8Array(7),g=new DataView(d.buffer);g.setUint16(0,this.width,!1),g.setUint16(2,this.height,!1),g.setUint8(4,this.compress?1:0),g.setUint8(5,h),g.setUint8(6,this.numColors>16?16:this.numColors);let _=o;if(this.compress)try{_=lz4.compress(Buffer.from(o),9)}catch(j){throw console.error("LZ4 compression failed:",j),j}const b=new Uint8Array(d.length+this.paletteData.length+_.length);return b.set(d,0),b.set(this.paletteData,d.length),b.set(_,d.length+this.paletteData.length),b}static _pack_1bit(o){const h=Math.ceil(o.length/8),d=new Uint8Array(h);for(let g=0;g<o.length;g++){const _=Math.floor(g/8),b=7-g%8;o[g]&1&&(d[_]|=1<<b)}return d}static _pack_2bit(o){const h=Math.ceil(o.length/4),d=new Uint8Array(h);for(let g=0;g<o.length;g++){const _=Math.floor(g/4),b=(3-g%4)*2;d[_]|=(o[g]&3)<<b}return d}static _pack_4bit(o){const h=Math.ceil(o.length/2),d=new Uint8Array(h);for(let g=0;g<o.length;g++){const _=Math.floor(g/2),b=(1-g%2)*4;d[_]|=(o[g]&15)<<b}return d}}class TxTextSpriteBlock{constructor(o){$e(this,"width"),$e(this,"fontSize"),$e(this,"maxDisplayRows"),$e(this,"text"),$e(this,"fontFamily"),$e(this,"sprites",[]),this.width=o.width,this.fontSize=o.fontSize,this.maxDisplayRows=o.maxDisplayRows,this.text=o.text,this.fontFamily=o.fontFamily||"sans-serif",this._createTextSprites()}_createTextSprites(){const o=this.fontSize*this.maxDisplayRows;if(this.width<=0||o<=0)return;const h=document.createElement("canvas");h.width=this.width,h.height=o;const d=h.getContext("2d",{willReadFrequently:!0});if(!d){console.error("TxTextSpriteBlock: Could not get 2D rendering context.");return}d.fillStyle="black",d.fillRect(0,0,h.width,h.height),d.fillStyle="white",d.font=`${this.fontSize}px ${this.fontFamily}`,d.textBaseline="top";const g=this.text.split(`
`);let _=0;const b=[];for(let j=0;j<g.length&&!(b.length>=this.maxDisplayRows);j++)b.push({text:g[j],drawY:_}),_+=this.fontSize;for(const j of b){const{text:et,drawY:tt}=j;d.fillText(et,0,tt);const rt=d.getImageData(0,tt,this.width,this.fontSize),{data:at,width:st,height:At}=rt;let ht=st,ct=At,_t=-1,gt=-1,wt=!1;for(let ft=0;ft<At;ft++)for(let dt=0;dt<st;dt++)at[(ft*st+dt)*4]>0&&(wt=!0,dt<ht&&(ht=dt),dt>_t&&(_t=dt),ft<ct&&(ct=ft),ft>gt&&(gt=ft));if(wt){const ft=ht,dt=tt+ct,xt=_t-ht+1,bt=gt-ct+1,Ct=d.getImageData(ft,dt,xt,bt),{data:Ut,width:Qt,height:kt}=Ct,Nt=new Uint8Array(Qt*kt);for(let Vt=0,qt=0;Vt<Ut.length;Vt+=4,qt++)Nt[qt]=Ut[Vt]>127?1:0;const Wt=new TxSprite(Qt,kt,2,new Uint8Array([0,0,0,255,255,255]),Nt,!1);this.sprites.push(Wt)}}}pack(){if(this.sprites.length===0)throw new Error("TxTextSpriteBlock: No sprites to pack. Text might be empty or not renderable within constraints.");const o=5,h=this.sprites.length*4,d=o+h,g=new ArrayBuffer(d),_=new DataView(g);let b=0;_.setUint8(b,255),b+=1,_.setUint16(b,this.width,!1),b+=2,_.setUint8(b,this.maxDisplayRows&255),b+=1,_.setUint8(b,this.sprites.length&255),b+=1;let j=0;for(const et of this.sprites)_.setUint16(b,0,!1),b+=2,_.setUint16(b,j,!1),b+=2,j+=et.height;return new Uint8Array(g)}}const Rt=class CA{constructor(o={}){$e(this,"nonFinalChunkFlag"),$e(this,"finalChunkFlag"),$e(this,"upright"),$e(this,"isRaw"),$e(this,"quality"),$e(this,"resolution"),$e(this,"queue"),$e(this,"_imageDataChunks"),this.nonFinalChunkFlag=o.nonFinalChunkFlag??7,this.finalChunkFlag=o.finalChunkFlag??8,this.upright=o.upright??!0,this.isRaw=o.isRaw??!1,this.quality=o.quality??null,this.resolution=o.resolution??null,this.queue=null,this._imageDataChunks=[]}static hasJpegHeader(o,h){return`${o}_${h}`in CA._jpegHeaderMap}concatenateImageData(){let o=0;for(const g of this._imageDataChunks)o+=g.length;const h=new Uint8Array(o);let d=0;for(const g of this._imageDataChunks)h.set(g,d),d+=g.length;return h}handleData(o){if(!this.queue){console.warn("RxPhoto: Received data but queue not initialized - call attach() first");return}const h=o[0],d=o.slice(1);this._imageDataChunks.push(d),h===this.finalChunkFlag&&this._processCompleteImage().catch(g=>{console.error("RxPhoto: Error processing complete image:",g),this._imageDataChunks=[]})}async _processCompleteImage(){if(!this.queue)return;let o;const h=this.concatenateImageData();if(this._imageDataChunks=[],this.isRaw){if(!this.quality||!this.resolution)throw new Error("RxPhoto: Quality and resolution must be set for raw images if no header is cached.");const d=`${this.quality}_${this.resolution}`,g=CA._jpegHeaderMap[d];if(!g)throw new Error(`RxPhoto: No JPEG header found for quality ${this.quality} and resolution ${this.resolution} - request full JPEG first to cache header.`);const _=new Uint8Array(g.length+h.length);_.set(g,0),_.set(h,g.length),o=_}else if(o=h,this.quality&&this.resolution){const d=`${this.quality}_${this.resolution}`;if(!CA._jpegHeaderMap[d]){const g=o.slice(0,623);CA._jpegHeaderMap[d]=g}}this.upright?(console.log("Rotating image 90 degrees counter-clockwise"),this.queue.put(await this.rotateJpeg90CounterClockwise(o))):this.queue.put(o)}async attach(o){return this.isRaw&&(!this.quality||!this.resolution)&&console.warn("RxPhoto: Handling raw images without quality/resolution specified. Header must be pre-cached or will fail."),this.queue=new AsyncQueue,this._imageDataChunks=[],o.registerDataResponseHandler(this,[this.nonFinalChunkFlag,this.finalChunkFlag],this.handleData.bind(this)),this.queue}detach(o){o.unregisterDataResponseHandler(this),this.queue&&this.queue.clear(),this.queue=null,this._imageDataChunks=[]}async rotateJpeg90CounterClockwise(o){const h=jpeg.decode(o,{useTArray:!0});if(!h||!h.data||!h.width||!h.height)throw new Error("Failed to decode JPEG image.");const d=document.createElement("canvas");d.width=h.height,d.height=h.width;const g=d.getContext("2d");if(!g)throw new Error("Failed to get canvas 2D context.");const _=document.createElement("canvas");_.width=h.width,_.height=h.height;const b=_.getContext("2d");if(!b)throw new Error("Failed to get temporary canvas 2D context.");b.putImageData(new ImageData(new Uint8ClampedArray(h.data.buffer),h.width,h.height),0,0),g.clearRect(0,0,d.width,d.height),g.translate(0,d.height),g.rotate(-90*Math.PI/180),g.drawImage(_,0,0);const j=await(await new Promise((et,tt)=>{d.toBlob(rt=>{rt?et(rt):tt(new Error("Failed to convert canvas to JPEG blob."))},"image/jpeg")})).arrayBuffer();return new Uint8Array(j)}};$e(Rt,"_jpegHeaderMap",{});let RxPhoto=Rt;const markinoFrameApp=`local data = require('data.min')
local plain_txt = require('plain_text.min')
local camera = require('camera.min')
local sprite = require('sprite.min')
local TEXT_MSG = 0x0A
local CAPTURE_SETTINGS_MSG = 0x0D
local IMAGE_SPRITE_MSG = 0x20
data.parsers[TEXT_MSG] = plain_txt.parse_plain_text
data.parsers[CAPTURE_SETTINGS_MSG] = camera.parse_capture_settings
data.parsers[IMAGE_SPRITE_MSG] = sprite.parse_sprite
local CHAR_PER_LINE = 25
local LINES_PER_PAGE = 5
local LINE_HEIGHT = 60
local wrapped = {}
local page = 1
local function wrap(s)
  local out = {}
  for i = 1, #s, CHAR_PER_LINE do
    out[#out + 1] = s:sub(i, i + CHAR_PER_LINE - 1)
  end
  return out
end
local function clear()
  frame.display.text(' ', 1, 1)
  frame.display.show()
  frame.sleep(0.04)
end
local function render()
  clear()
  for o = 0, LINES_PER_PAGE - 1 do
    local L = wrapped[page + o]
    if not L then break end
    frame.display.text(L, 1, o * LINE_HEIGHT + 1)
  end
  frame.display.show()
end
local function on_tap()
  page = page + LINES_PER_PAGE
  if page > #wrapped then page = 1 end
  render()
end
frame.imu.tap_callback(on_tap)
clear()
print('In esecuzione')
while true do
  local ok, err = pcall(function()
    local n = data.process_raw_items()
    if n > 0 then
      -- testo
      if data.app_data[TEXT_MSG] then
        wrapped = wrap(data.app_data[TEXT_MSG].string or '')
        page    = 1
        render()
        data.app_data[TEXT_MSG] = nil
      end
      if data.app_data[CAPTURE_SETTINGS_MSG] then
        camera.capture_and_send(data.app_data[CAPTURE_SETTINGS_MSG])
        data.app_data[CAPTURE_SETTINGS_MSG] = nil
      end
      if data.app_data[IMAGE_SPRITE_MSG] then
        local spr = data.app_data[IMAGE_SPRITE_MSG]
        print("Sprite ricevuto", spr.width, spr.height)
        sprite.set_palette(spr.num_colors, spr.palette_data)
        frame.display.bitmap(1, 1, spr.width, 2 ^ spr.bpp, 0, spr.pixel_data)
        frame.display.show()
        print("Sprite visualizzato")
        data.app_data[IMAGE_SPRITE_MSG] = nil
        collectgarbage('collect')
      end
    end
  end)
  if not ok then
    print('Errore:', err)
    clear()
  end
  frame.sleep(0.1)
end
`,markinoFrameAppOPT=`local data = require('data.min')
local plain_txt = require('plain_text.min')
local txt_block = require('text_sprite_block.min')
local img_block = require('image_sprite_block.min')
local camera = require('camera.min')
local sprite = require('sprite.min')
local PLAIN_TEXT_MSG = 0x0A
local CAPTURE_SETTINGS_MSG = 0x0D
local IMAGE_SPRITE_MSG = 0x20
local IMAGE_SPRITE_BLOCK = 0x21
local TEXT_SPRITE_BLOCK = 0x22
data.parsers[PLAIN_TEXT_MSG]     = plain_txt.parse_plain_text
data.parsers[CAPTURE_SETTINGS_MSG] = camera.parse_capture_settings
data.parsers[IMAGE_SPRITE_MSG]   = sprite.parse_sprite
data.parsers[IMAGE_SPRITE_BLOCK] = img_block.parse_image_sprite_block
data.parsers[TEXT_SPRITE_BLOCK]  = txt_block.parse_text_sprite_block
local CHAR_PER_LINE, LINES_PER_PAGE, LINE_HEIGHT = 25, 5, 60
local wrapped, page = {}, 1
local function wrap_text(s)
  local out = {}
  for i = 1, #s, CHAR_PER_LINE do
    out[#out + 1] = s:sub(i, i + CHAR_PER_LINE - 1)
  end
  return out
end
local function clear_display()
  frame.display.text(" ", 1, 1)
  frame.display.show()
  frame.sleep(0.04)
end
local function render_plain_paged()
  clear_display()
  for i = 0, LINES_PER_PAGE - 1 do
    local line = wrapped[page + i]
    if not line then break end
    frame.display.text(line, 1, i * LINE_HEIGHT + 1)
  end
  frame.display.show()
end
local function on_tap()
  page = page + LINES_PER_PAGE
  if page > #wrapped then page = 1 end
  render_plain_paged()
end
frame.imu.tap_callback(on_tap)
local function render_sprite(spr)
  sprite.set_palette(spr.num_colors, spr.palette_data)
  frame.display.bitmap(1, 1, spr.width, 2 ^ spr.bpp, 0, spr.pixel_data)
  frame.display.show()
end
local function render_image_block(isb)
  if isb.current_sprite_index == 0 then return end
  for idx = 1, isb.active_sprites do
    local spr = isb.sprites[idx]
    local y   = isb.sprite_line_height * (idx - 1)
    if spr.compressed then
      frame.compression.process_function(function(decmp)
        frame.display.bitmap(1, y + 1, spr.width, 2 ^ spr.bpp, 0, decmp)
      end)
      local full_bytes = (spr.width * spr.height + ((8 / spr.bpp) - 1)) // (8 / spr.bpp)
      frame.compression.decompress(spr.pixel_data, full_bytes)
    else
      frame.display.bitmap(1, y + 1, spr.width, 2 ^ spr.bpp, 0, spr.pixel_data)
    end
  end
  frame.display.show()
end
local function render_text_block(tsb)
  if tsb.first_sprite_index == 0 then return end
  local spr0 = tsb.sprites[tsb.first_sprite_index]
  sprite.set_palette(spr0.num_colors, spr0.palette_data)
  local active = tsb.active_sprites or #tsb.sprites
  for idx = 1, active do
    local spr = tsb.sprites[idx]
    local y = (idx - 1) * spr.height
    frame.display.bitmap(1, y + 1, spr.width, 2 ^ spr.bpp, 0, spr.pixel_data)
  end
  frame.display.show()
end
clear_display()
print("Combined app running")
while true do
  local ok, err = pcall(function()
    if data.process_raw_items() > 0 then
      if data.app_data[PLAIN_TEXT_MSG] then
        wrapped = wrap_text(data.app_data[PLAIN_TEXT_MSG].string or "")
        page    = 1
        render_plain_paged()
        data.app_data[PLAIN_TEXT_MSG] = nil
      end
      if data.app_data[CAPTURE_SETTINGS_MSG] then
        camera.capture_and_send(data.app_data[CAPTURE_SETTINGS_MSG])
        data.app_data[CAPTURE_SETTINGS_MSG] = nil
      end
      if data.app_data[IMAGE_SPRITE_MSG] then
        render_sprite(data.app_data[IMAGE_SPRITE_MSG])
        data.app_data[IMAGE_SPRITE_MSG] = nil
        collectgarbage()
      end
      if data.app_data[IMAGE_SPRITE_BLOCK] then
        render_image_block(data.app_data[IMAGE_SPRITE_BLOCK])
        data.app_data[IMAGE_SPRITE_BLOCK] = nil
        collectgarbage()
      end
      if data.app_data[TEXT_SPRITE_BLOCK] then
        local tsb = data.app_data[TEXT_SPRITE_BLOCK]
        local active = tsb.active_sprites or #tsb.sprites
        local total  = tsb.total_sprites  or #tsb.sprites
        if tsb.first_sprite_index > 0 and
           (tsb.progressive_render or active == total) then
          clear_display()
          render_text_block(tsb)
          data.app_data[TEXT_SPRITE_BLOCK] = nil
          collectgarbage()
        end
      end
    end
  end)
  if not ok then
    print("Error:", err)
    clear_display()
  end
  frame.sleep(0.05)
end
`;var leafletSrc={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(s,o){(function(h,d){d(o)})(commonjsGlobal,function(h){var d="1.9.4";function g($){var nt,ut,vt,Ft;for(ut=1,vt=arguments.length;ut<vt;ut++){Ft=arguments[ut];for(nt in Ft)$[nt]=Ft[nt]}return $}var _=Object.create||function(){function $(){}return function(nt){return $.prototype=nt,new $}}();function b($,nt){var ut=Array.prototype.slice;if($.bind)return $.bind.apply($,ut.call(arguments,1));var vt=ut.call(arguments,2);return function(){return $.apply(nt,vt.length?vt.concat(ut.call(arguments)):arguments)}}var j=0;function et($){return"_leaflet_id"in $||($._leaflet_id=++j),$._leaflet_id}function tt($,nt,ut){var vt,Ft,Ot,er;return er=function(){vt=!1,Ft&&(Ot.apply(ut,Ft),Ft=!1)},Ot=function(){vt?Ft=arguments:($.apply(ut,arguments),setTimeout(er,nt),vt=!0)},Ot}function rt($,nt,ut){var vt=nt[1],Ft=nt[0],Ot=vt-Ft;return $===vt&&ut?$:(($-Ft)%Ot+Ot)%Ot+Ft}function at(){return!1}function st($,nt){if(nt===!1)return $;var ut=Math.pow(10,nt===void 0?6:nt);return Math.round($*ut)/ut}function At($){return $.trim?$.trim():$.replace(/^\s+|\s+$/g,"")}function ht($){return At($).split(/\s+/)}function ct($,nt){Object.prototype.hasOwnProperty.call($,"options")||($.options=$.options?_($.options):{});for(var ut in nt)$.options[ut]=nt[ut];return $.options}function _t($,nt,ut){var vt=[];for(var Ft in $)vt.push(encodeURIComponent(ut?Ft.toUpperCase():Ft)+"="+encodeURIComponent($[Ft]));return(!nt||nt.indexOf("?")===-1?"?":"&")+vt.join("&")}var gt=/\{ *([\w_ -]+) *\}/g;function wt($,nt){return $.replace(gt,function(ut,vt){var Ft=nt[vt];if(Ft===void 0)throw new Error("No value provided for variable "+ut);return typeof Ft=="function"&&(Ft=Ft(nt)),Ft})}var ft=Array.isArray||function($){return Object.prototype.toString.call($)==="[object Array]"};function dt($,nt){for(var ut=0;ut<$.length;ut++)if($[ut]===nt)return ut;return-1}var xt="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function bt($){return window["webkit"+$]||window["moz"+$]||window["ms"+$]}var Ct=0;function Ut($){var nt=+new Date,ut=Math.max(0,16-(nt-Ct));return Ct=nt+ut,window.setTimeout($,ut)}var Qt=window.requestAnimationFrame||bt("RequestAnimationFrame")||Ut,kt=window.cancelAnimationFrame||bt("CancelAnimationFrame")||bt("CancelRequestAnimationFrame")||function($){window.clearTimeout($)};function Nt($,nt,ut){if(ut&&Qt===Ut)$.call(nt);else return Qt.call(window,b($,nt))}function Wt($){$&&kt.call(window,$)}var Vt={__proto__:null,extend:g,create:_,bind:b,get lastId(){return j},stamp:et,throttle:tt,wrapNum:rt,falseFn:at,formatNum:st,trim:At,splitWords:ht,setOptions:ct,getParamString:_t,template:wt,isArray:ft,indexOf:dt,emptyImageUrl:xt,requestFn:Qt,cancelFn:kt,requestAnimFrame:Nt,cancelAnimFrame:Wt};function qt(){}qt.extend=function($){var nt=function(){ct(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},ut=nt.__super__=this.prototype,vt=_(ut);vt.constructor=nt,nt.prototype=vt;for(var Ft in this)Object.prototype.hasOwnProperty.call(this,Ft)&&Ft!=="prototype"&&Ft!=="__super__"&&(nt[Ft]=this[Ft]);return $.statics&&g(nt,$.statics),$.includes&&(_e($.includes),g.apply(null,[vt].concat($.includes))),g(vt,$),delete vt.statics,delete vt.includes,vt.options&&(vt.options=ut.options?_(ut.options):{},g(vt.options,$.options)),vt._initHooks=[],vt.callInitHooks=function(){if(!this._initHooksCalled){ut.callInitHooks&&ut.callInitHooks.call(this),this._initHooksCalled=!0;for(var Ot=0,er=vt._initHooks.length;Ot<er;Ot++)vt._initHooks[Ot].call(this)}},nt},qt.include=function($){var nt=this.prototype.options;return g(this.prototype,$),$.options&&(this.prototype.options=nt,this.mergeOptions($.options)),this},qt.mergeOptions=function($){return g(this.prototype.options,$),this},qt.addInitHook=function($){var nt=Array.prototype.slice.call(arguments,1),ut=typeof $=="function"?$:function(){this[$].apply(this,nt)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(ut),this};function _e($){if(!(typeof L>"u"||!L||!L.Mixin)){$=ft($)?$:[$];for(var nt=0;nt<$.length;nt++)$[nt]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Jt={on:function($,nt,ut){if(typeof $=="object")for(var vt in $)this._on(vt,$[vt],nt);else{$=ht($);for(var Ft=0,Ot=$.length;Ft<Ot;Ft++)this._on($[Ft],nt,ut)}return this},off:function($,nt,ut){if(!arguments.length)delete this._events;else if(typeof $=="object")for(var vt in $)this._off(vt,$[vt],nt);else{$=ht($);for(var Ft=arguments.length===1,Ot=0,er=$.length;Ot<er;Ot++)Ft?this._off($[Ot]):this._off($[Ot],nt,ut)}return this},_on:function($,nt,ut,vt){if(typeof nt!="function"){console.warn("wrong listener type: "+typeof nt);return}if(this._listens($,nt,ut)===!1){ut===this&&(ut=void 0);var Ft={fn:nt,ctx:ut};vt&&(Ft.once=!0),this._events=this._events||{},this._events[$]=this._events[$]||[],this._events[$].push(Ft)}},_off:function($,nt,ut){var vt,Ft,Ot;if(this._events&&(vt=this._events[$],!!vt)){if(arguments.length===1){if(this._firingCount)for(Ft=0,Ot=vt.length;Ft<Ot;Ft++)vt[Ft].fn=at;delete this._events[$];return}if(typeof nt!="function"){console.warn("wrong listener type: "+typeof nt);return}var er=this._listens($,nt,ut);if(er!==!1){var gr=vt[er];this._firingCount&&(gr.fn=at,this._events[$]=vt=vt.slice()),vt.splice(er,1)}}},fire:function($,nt,ut){if(!this.listens($,ut))return this;var vt=g({},nt,{type:$,target:this,sourceTarget:nt&&nt.sourceTarget||this});if(this._events){var Ft=this._events[$];if(Ft){this._firingCount=this._firingCount+1||1;for(var Ot=0,er=Ft.length;Ot<er;Ot++){var gr=Ft[Ot],Cr=gr.fn;gr.once&&this.off($,Cr,gr.ctx),Cr.call(gr.ctx||this,vt)}this._firingCount--}}return ut&&this._propagateEvent(vt),this},listens:function($,nt,ut,vt){typeof $!="string"&&console.warn('"string" type argument expected');var Ft=nt;typeof nt!="function"&&(vt=!!nt,Ft=void 0,ut=void 0);var Ot=this._events&&this._events[$];if(Ot&&Ot.length&&this._listens($,Ft,ut)!==!1)return!0;if(vt){for(var er in this._eventParents)if(this._eventParents[er].listens($,nt,ut,vt))return!0}return!1},_listens:function($,nt,ut){if(!this._events)return!1;var vt=this._events[$]||[];if(!nt)return!!vt.length;ut===this&&(ut=void 0);for(var Ft=0,Ot=vt.length;Ft<Ot;Ft++)if(vt[Ft].fn===nt&&vt[Ft].ctx===ut)return Ft;return!1},once:function($,nt,ut){if(typeof $=="object")for(var vt in $)this._on(vt,$[vt],nt,!0);else{$=ht($);for(var Ft=0,Ot=$.length;Ft<Ot;Ft++)this._on($[Ft],nt,ut,!0)}return this},addEventParent:function($){return this._eventParents=this._eventParents||{},this._eventParents[et($)]=$,this},removeEventParent:function($){return this._eventParents&&delete this._eventParents[et($)],this},_propagateEvent:function($){for(var nt in this._eventParents)this._eventParents[nt].fire($.type,g({layer:$.target,propagatedFrom:$.target},$),!0)}};Jt.addEventListener=Jt.on,Jt.removeEventListener=Jt.clearAllEventListeners=Jt.off,Jt.addOneTimeEventListener=Jt.once,Jt.fireEvent=Jt.fire,Jt.hasEventListeners=Jt.listens;var lr=qt.extend(Jt);function jt($,nt,ut){this.x=ut?Math.round($):$,this.y=ut?Math.round(nt):nt}var ur=Math.trunc||function($){return $>0?Math.floor($):Math.ceil($)};jt.prototype={clone:function(){return new jt(this.x,this.y)},add:function($){return this.clone()._add(Ar($))},_add:function($){return this.x+=$.x,this.y+=$.y,this},subtract:function($){return this.clone()._subtract(Ar($))},_subtract:function($){return this.x-=$.x,this.y-=$.y,this},divideBy:function($){return this.clone()._divideBy($)},_divideBy:function($){return this.x/=$,this.y/=$,this},multiplyBy:function($){return this.clone()._multiplyBy($)},_multiplyBy:function($){return this.x*=$,this.y*=$,this},scaleBy:function($){return new jt(this.x*$.x,this.y*$.y)},unscaleBy:function($){return new jt(this.x/$.x,this.y/$.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ur(this.x),this.y=ur(this.y),this},distanceTo:function($){$=Ar($);var nt=$.x-this.x,ut=$.y-this.y;return Math.sqrt(nt*nt+ut*ut)},equals:function($){return $=Ar($),$.x===this.x&&$.y===this.y},contains:function($){return $=Ar($),Math.abs($.x)<=Math.abs(this.x)&&Math.abs($.y)<=Math.abs(this.y)},toString:function(){return"Point("+st(this.x)+", "+st(this.y)+")"}};function Ar($,nt,ut){return $ instanceof jt?$:ft($)?new jt($[0],$[1]):$==null?$:typeof $=="object"&&"x"in $&&"y"in $?new jt($.x,$.y):new jt($,nt,ut)}function mr($,nt){if($)for(var ut=nt?[$,nt]:$,vt=0,Ft=ut.length;vt<Ft;vt++)this.extend(ut[vt])}mr.prototype={extend:function($){var nt,ut;if(!$)return this;if($ instanceof jt||typeof $[0]=="number"||"x"in $)nt=ut=Ar($);else if($=dr($),nt=$.min,ut=$.max,!nt||!ut)return this;return!this.min&&!this.max?(this.min=nt.clone(),this.max=ut.clone()):(this.min.x=Math.min(nt.x,this.min.x),this.max.x=Math.max(ut.x,this.max.x),this.min.y=Math.min(nt.y,this.min.y),this.max.y=Math.max(ut.y,this.max.y)),this},getCenter:function($){return Ar((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,$)},getBottomLeft:function(){return Ar(this.min.x,this.max.y)},getTopRight:function(){return Ar(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function($){var nt,ut;return typeof $[0]=="number"||$ instanceof jt?$=Ar($):$=dr($),$ instanceof mr?(nt=$.min,ut=$.max):nt=ut=$,nt.x>=this.min.x&&ut.x<=this.max.x&&nt.y>=this.min.y&&ut.y<=this.max.y},intersects:function($){$=dr($);var nt=this.min,ut=this.max,vt=$.min,Ft=$.max,Ot=Ft.x>=nt.x&&vt.x<=ut.x,er=Ft.y>=nt.y&&vt.y<=ut.y;return Ot&&er},overlaps:function($){$=dr($);var nt=this.min,ut=this.max,vt=$.min,Ft=$.max,Ot=Ft.x>nt.x&&vt.x<ut.x,er=Ft.y>nt.y&&vt.y<ut.y;return Ot&&er},isValid:function(){return!!(this.min&&this.max)},pad:function($){var nt=this.min,ut=this.max,vt=Math.abs(nt.x-ut.x)*$,Ft=Math.abs(nt.y-ut.y)*$;return dr(Ar(nt.x-vt,nt.y-Ft),Ar(ut.x+vt,ut.y+Ft))},equals:function($){return $?($=dr($),this.min.equals($.getTopLeft())&&this.max.equals($.getBottomRight())):!1}};function dr($,nt){return!$||$ instanceof mr?$:new mr($,nt)}function Nr($,nt){if($)for(var ut=nt?[$,nt]:$,vt=0,Ft=ut.length;vt<Ft;vt++)this.extend(ut[vt])}Nr.prototype={extend:function($){var nt=this._southWest,ut=this._northEast,vt,Ft;if($ instanceof nr)vt=$,Ft=$;else if($ instanceof Nr){if(vt=$._southWest,Ft=$._northEast,!vt||!Ft)return this}else return $?this.extend(hr($)||Ur($)):this;return!nt&&!ut?(this._southWest=new nr(vt.lat,vt.lng),this._northEast=new nr(Ft.lat,Ft.lng)):(nt.lat=Math.min(vt.lat,nt.lat),nt.lng=Math.min(vt.lng,nt.lng),ut.lat=Math.max(Ft.lat,ut.lat),ut.lng=Math.max(Ft.lng,ut.lng)),this},pad:function($){var nt=this._southWest,ut=this._northEast,vt=Math.abs(nt.lat-ut.lat)*$,Ft=Math.abs(nt.lng-ut.lng)*$;return new Nr(new nr(nt.lat-vt,nt.lng-Ft),new nr(ut.lat+vt,ut.lng+Ft))},getCenter:function(){return new nr((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new nr(this.getNorth(),this.getWest())},getSouthEast:function(){return new nr(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function($){typeof $[0]=="number"||$ instanceof nr||"lat"in $?$=hr($):$=Ur($);var nt=this._southWest,ut=this._northEast,vt,Ft;return $ instanceof Nr?(vt=$.getSouthWest(),Ft=$.getNorthEast()):vt=Ft=$,vt.lat>=nt.lat&&Ft.lat<=ut.lat&&vt.lng>=nt.lng&&Ft.lng<=ut.lng},intersects:function($){$=Ur($);var nt=this._southWest,ut=this._northEast,vt=$.getSouthWest(),Ft=$.getNorthEast(),Ot=Ft.lat>=nt.lat&&vt.lat<=ut.lat,er=Ft.lng>=nt.lng&&vt.lng<=ut.lng;return Ot&&er},overlaps:function($){$=Ur($);var nt=this._southWest,ut=this._northEast,vt=$.getSouthWest(),Ft=$.getNorthEast(),Ot=Ft.lat>nt.lat&&vt.lat<ut.lat,er=Ft.lng>nt.lng&&vt.lng<ut.lng;return Ot&&er},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function($,nt){return $?($=Ur($),this._southWest.equals($.getSouthWest(),nt)&&this._northEast.equals($.getNorthEast(),nt)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Ur($,nt){return $ instanceof Nr?$:new Nr($,nt)}function nr($,nt,ut){if(isNaN($)||isNaN(nt))throw new Error("Invalid LatLng object: ("+$+", "+nt+")");this.lat=+$,this.lng=+nt,ut!==void 0&&(this.alt=+ut)}nr.prototype={equals:function($,nt){if(!$)return!1;$=hr($);var ut=Math.max(Math.abs(this.lat-$.lat),Math.abs(this.lng-$.lng));return ut<=(nt===void 0?1e-9:nt)},toString:function($){return"LatLng("+st(this.lat,$)+", "+st(this.lng,$)+")"},distanceTo:function($){return Qr.distance(this,hr($))},wrap:function(){return Qr.wrapLatLng(this)},toBounds:function($){var nt=180*$/40075017,ut=nt/Math.cos(Math.PI/180*this.lat);return Ur([this.lat-nt,this.lng-ut],[this.lat+nt,this.lng+ut])},clone:function(){return new nr(this.lat,this.lng,this.alt)}};function hr($,nt,ut){return $ instanceof nr?$:ft($)&&typeof $[0]!="object"?$.length===3?new nr($[0],$[1],$[2]):$.length===2?new nr($[0],$[1]):null:$==null?$:typeof $=="object"&&"lat"in $?new nr($.lat,"lng"in $?$.lng:$.lon,$.alt):nt===void 0?null:new nr($,nt,ut)}var Dr={latLngToPoint:function($,nt){var ut=this.projection.project($),vt=this.scale(nt);return this.transformation._transform(ut,vt)},pointToLatLng:function($,nt){var ut=this.scale(nt),vt=this.transformation.untransform($,ut);return this.projection.unproject(vt)},project:function($){return this.projection.project($)},unproject:function($){return this.projection.unproject($)},scale:function($){return 256*Math.pow(2,$)},zoom:function($){return Math.log($/256)/Math.LN2},getProjectedBounds:function($){if(this.infinite)return null;var nt=this.projection.bounds,ut=this.scale($),vt=this.transformation.transform(nt.min,ut),Ft=this.transformation.transform(nt.max,ut);return new mr(vt,Ft)},infinite:!1,wrapLatLng:function($){var nt=this.wrapLng?rt($.lng,this.wrapLng,!0):$.lng,ut=this.wrapLat?rt($.lat,this.wrapLat,!0):$.lat,vt=$.alt;return new nr(ut,nt,vt)},wrapLatLngBounds:function($){var nt=$.getCenter(),ut=this.wrapLatLng(nt),vt=nt.lat-ut.lat,Ft=nt.lng-ut.lng;if(vt===0&&Ft===0)return $;var Ot=$.getSouthWest(),er=$.getNorthEast(),gr=new nr(Ot.lat-vt,Ot.lng-Ft),Cr=new nr(er.lat-vt,er.lng-Ft);return new Nr(gr,Cr)}},Qr=g({},Dr,{wrapLng:[-180,180],R:6371e3,distance:function($,nt){var ut=Math.PI/180,vt=$.lat*ut,Ft=nt.lat*ut,Ot=Math.sin((nt.lat-$.lat)*ut/2),er=Math.sin((nt.lng-$.lng)*ut/2),gr=Ot*Ot+Math.cos(vt)*Math.cos(Ft)*er*er,Cr=2*Math.atan2(Math.sqrt(gr),Math.sqrt(1-gr));return this.R*Cr}}),vr=6378137,on={R:vr,MAX_LATITUDE:85.0511287798,project:function($){var nt=Math.PI/180,ut=this.MAX_LATITUDE,vt=Math.max(Math.min(ut,$.lat),-ut),Ft=Math.sin(vt*nt);return new jt(this.R*$.lng*nt,this.R*Math.log((1+Ft)/(1-Ft))/2)},unproject:function($){var nt=180/Math.PI;return new nr((2*Math.atan(Math.exp($.y/this.R))-Math.PI/2)*nt,$.x*nt/this.R)},bounds:function(){var $=vr*Math.PI;return new mr([-$,-$],[$,$])}()};function en($,nt,ut,vt){if(ft($)){this._a=$[0],this._b=$[1],this._c=$[2],this._d=$[3];return}this._a=$,this._b=nt,this._c=ut,this._d=vt}en.prototype={transform:function($,nt){return this._transform($.clone(),nt)},_transform:function($,nt){return nt=nt||1,$.x=nt*(this._a*$.x+this._b),$.y=nt*(this._c*$.y+this._d),$},untransform:function($,nt){return nt=nt||1,new jt(($.x/nt-this._b)/this._a,($.y/nt-this._d)/this._c)}};function zr($,nt,ut,vt){return new en($,nt,ut,vt)}var or=g({},Qr,{code:"EPSG:3857",projection:on,transformation:function(){var $=.5/(Math.PI*on.R);return zr($,.5,-$,.5)}()}),xr=g({},or,{code:"EPSG:900913"});function Wr($){return document.createElementNS("http://www.w3.org/2000/svg",$)}function $r($,nt){var ut="",vt,Ft,Ot,er,gr,Cr;for(vt=0,Ot=$.length;vt<Ot;vt++){for(gr=$[vt],Ft=0,er=gr.length;Ft<er;Ft++)Cr=gr[Ft],ut+=(Ft?"L":"M")+Cr.x+" "+Cr.y;ut+=nt?Mt.svg?"z":"x":""}return ut||"M0 0"}var Or=document.documentElement.style,qr="ActiveXObject"in window,fr=qr&&!document.addEventListener,Kr="msLaunchUri"in navigator&&!("documentMode"in document),jr=Ht("webkit"),Xr=Ht("android"),Tr=Ht("android 2")||Ht("android 3"),An=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Gr=Xr&&Ht("Google")&&An<537&&!("AudioNode"in window),Yr=!!window.opera,Zr=!Kr&&Ht("chrome"),ln=Ht("gecko")&&!jr&&!Yr&&!qr,Hr=!Zr&&Ht("safari"),rn=Ht("phantom"),zt="OTransition"in Or,br=navigator.platform.indexOf("Win")===0,Sr=qr&&"transition"in Or,kr="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Tr,ir="MozPerspective"in Or,Er=!window.L_DISABLE_3D&&(Sr||kr||ir)&&!zt&&!rn,Lt=typeof orientation<"u"||Ht("mobile"),Ir=Lt&&jr,un=Lt&&kr,yt=!window.PointerEvent&&window.MSPointerEvent,_r=!!(window.PointerEvent||yt),yr="ontouchstart"in window||!!window.TouchEvent,Kt=!window.L_NO_TOUCH&&(yr||_r),tr=Lt&&Yr,pr=Lt&&ln,sn=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,mt=function(){var $=!1;try{var nt=Object.defineProperty({},"passive",{get:function(){$=!0}});window.addEventListener("testPassiveEventSupport",at,nt),window.removeEventListener("testPassiveEventSupport",at,nt)}catch{}return $}(),ot=function(){return!!document.createElement("canvas").getContext}(),it=!!(document.createElementNS&&Wr("svg").createSVGRect),lt=!!it&&function(){var $=document.createElement("div");return $.innerHTML="<svg/>",($.firstChild&&$.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),pt=!it&&function(){try{var $=document.createElement("div");$.innerHTML='<v:shape adj="1"/>';var nt=$.firstChild;return nt.style.behavior="url(#default#VML)",nt&&typeof nt.adj=="object"}catch{return!1}}(),Et=navigator.platform.indexOf("Mac")===0,Pt=navigator.platform.indexOf("Linux")===0;function Ht($){return navigator.userAgent.toLowerCase().indexOf($)>=0}var Mt={ie:qr,ielt9:fr,edge:Kr,webkit:jr,android:Xr,android23:Tr,androidStock:Gr,opera:Yr,chrome:Zr,gecko:ln,safari:Hr,phantom:rn,opera12:zt,win:br,ie3d:Sr,webkit3d:kr,gecko3d:ir,any3d:Er,mobile:Lt,mobileWebkit:Ir,mobileWebkit3d:un,msPointer:yt,pointer:_r,touch:Kt,touchNative:yr,mobileOpera:tr,mobileGecko:pr,retina:sn,passiveEvents:mt,canvas:ot,svg:it,vml:pt,inlineSvg:lt,mac:Et,linux:Pt},Gt=Mt.msPointer?"MSPointerDown":"pointerdown",sr=Mt.msPointer?"MSPointerMove":"pointermove",Xt=Mt.msPointer?"MSPointerUp":"pointerup",wr=Mt.msPointer?"MSPointerCancel":"pointercancel",Fr={touchstart:Gt,touchmove:sr,touchend:Xt,touchcancel:wr},cr={touchstart:hn,touchmove:an,touchend:an,touchcancel:an},Br={},Vr=!1;function rr($,nt,ut){return nt==="touchstart"&&xn(),cr[nt]?(ut=cr[nt].bind(this,ut),$.addEventListener(Fr[nt],ut,!1),ut):(console.warn("wrong event specified:",nt),at)}function Mr($,nt,ut){if(!Fr[nt]){console.warn("wrong event specified:",nt);return}$.removeEventListener(Fr[nt],ut,!1)}function Jr($){Br[$.pointerId]=$}function fn($){Br[$.pointerId]&&(Br[$.pointerId]=$)}function dn($){delete Br[$.pointerId]}function xn(){Vr||(document.addEventListener(Gt,Jr,!0),document.addEventListener(sr,fn,!0),document.addEventListener(Xt,dn,!0),document.addEventListener(wr,dn,!0),Vr=!0)}function an($,nt){if(nt.pointerType!==(nt.MSPOINTER_TYPE_MOUSE||"mouse")){nt.touches=[];for(var ut in Br)nt.touches.push(Br[ut]);nt.changedTouches=[nt],$(nt)}}function hn($,nt){nt.MSPOINTER_TYPE_TOUCH&&nt.pointerType===nt.MSPOINTER_TYPE_TOUCH&&Dn(nt),an($,nt)}function Sn($){var nt={},ut,vt;for(vt in $)ut=$[vt],nt[vt]=ut&&ut.bind?ut.bind($):ut;return $=nt,nt.type="dblclick",nt.detail=2,nt.isTrusted=!1,nt._simulated=!0,nt}var ar=200;function Rr($,nt){$.addEventListener("dblclick",nt);var ut=0,vt;function Ft(Ot){if(Ot.detail!==1){vt=Ot.detail;return}if(!(Ot.pointerType==="mouse"||Ot.sourceCapabilities&&!Ot.sourceCapabilities.firesTouchEvents)){var er=fs(Ot);if(!(er.some(function(Cr){return Cr instanceof HTMLLabelElement&&Cr.attributes.for})&&!er.some(function(Cr){return Cr instanceof HTMLInputElement||Cr instanceof HTMLSelectElement}))){var gr=Date.now();gr-ut<=ar?(vt++,vt===2&&nt(Sn(Ot))):vt=1,ut=gr}}}return $.addEventListener("click",Ft),{dblclick:nt,simDblclick:Ft}}function tn($,nt){$.removeEventListener("dblclick",nt.dblclick),$.removeEventListener("click",nt.simDblclick)}var Pr=aA(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Cn=aA(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),En=Cn==="webkitTransition"||Cn==="OTransition"?Cn+"End":"transitionend";function Fn($){return typeof $=="string"?document.getElementById($):$}function bn($,nt){var ut=$.style[nt]||$.currentStyle&&$.currentStyle[nt];if((!ut||ut==="auto")&&document.defaultView){var vt=document.defaultView.getComputedStyle($,null);ut=vt?vt[nt]:null}return ut==="auto"?null:ut}function gn($,nt,ut){var vt=document.createElement($);return vt.className=nt||"",ut&&ut.appendChild(vt),vt}function Bn($){var nt=$.parentNode;nt&&nt.removeChild($)}function Qn($){for(;$.firstChild;)$.removeChild($.firstChild)}function Ln($){var nt=$.parentNode;nt&&nt.lastChild!==$&&nt.appendChild($)}function Pn($){var nt=$.parentNode;nt&&nt.firstChild!==$&&nt.insertBefore($,nt.firstChild)}function _n($,nt){if($.classList!==void 0)return $.classList.contains(nt);var ut=In($);return ut.length>0&&new RegExp("(^|\\s)"+nt+"(\\s|$)").test(ut)}function cn($,nt){if($.classList!==void 0)for(var ut=ht(nt),vt=0,Ft=ut.length;vt<Ft;vt++)$.classList.add(ut[vt]);else if(!_n($,nt)){var Ot=In($);Mn($,(Ot?Ot+" ":"")+nt)}}function vn($,nt){$.classList!==void 0?$.classList.remove(nt):Mn($,At((" "+In($)+" ").replace(" "+nt+" "," ")))}function Mn($,nt){$.className.baseVal===void 0?$.className=nt:$.className.baseVal=nt}function In($){return $.correspondingElement&&($=$.correspondingElement),$.className.baseVal===void 0?$.className:$.className.baseVal}function Nn($,nt){"opacity"in $.style?$.style.opacity=nt:"filter"in $.style&&OA($,nt)}function OA($,nt){var ut=!1,vt="DXImageTransform.Microsoft.Alpha";try{ut=$.filters.item(vt)}catch{if(nt===1)return}nt=Math.round(nt*100),ut?(ut.Enabled=nt!==100,ut.Opacity=nt):$.style.filter+=" progid:"+vt+"(opacity="+nt+")"}function aA($){for(var nt=document.documentElement.style,ut=0;ut<$.length;ut++)if($[ut]in nt)return $[ut];return!1}function qn($,nt,ut){var vt=nt||new jt(0,0);$.style[Pr]=(Mt.ie3d?"translate("+vt.x+"px,"+vt.y+"px)":"translate3d("+vt.x+"px,"+vt.y+"px,0)")+(ut?" scale("+ut+")":"")}function Tn($,nt){$._leaflet_pos=nt,Mt.any3d?qn($,nt):($.style.left=nt.x+"px",$.style.top=nt.y+"px")}function jn($){return $._leaflet_pos||new jt(0,0)}var rA,nA,dA;if("onselectstart"in document)rA=function(){mn(window,"selectstart",Dn)},nA=function(){Un(window,"selectstart",Dn)};else{var gA=aA(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);rA=function(){if(gA){var $=document.documentElement.style;dA=$[gA],$[gA]="none"}},nA=function(){gA&&(document.documentElement.style[gA]=dA,dA=void 0)}}function $A(){mn(window,"dragstart",Dn)}function KA(){Un(window,"dragstart",Dn)}var bA,zA;function GA($){for(;$.tabIndex===-1;)$=$.parentNode;$.style&&(xA(),bA=$,zA=$.style.outlineStyle,$.style.outlineStyle="none",mn(window,"keydown",xA))}function xA(){bA&&(bA.style.outlineStyle=zA,bA=void 0,zA=void 0,Un(window,"keydown",xA))}function hs($){do $=$.parentNode;while((!$.offsetWidth||!$.offsetHeight)&&$!==document.body);return $}function VA($){var nt=$.getBoundingClientRect();return{x:nt.width/$.offsetWidth||1,y:nt.height/$.offsetHeight||1,boundingClientRect:nt}}var Ws={__proto__:null,TRANSFORM:Pr,TRANSITION:Cn,TRANSITION_END:En,get:Fn,getStyle:bn,create:gn,remove:Bn,empty:Qn,toFront:Ln,toBack:Pn,hasClass:_n,addClass:cn,removeClass:vn,setClass:Mn,getClass:In,setOpacity:Nn,testProp:aA,setTransform:qn,setPosition:Tn,getPosition:jn,get disableTextSelection(){return rA},get enableTextSelection(){return nA},disableImageDrag:$A,enableImageDrag:KA,preventOutline:GA,restoreOutline:xA,getSizedParentNode:hs,getScale:VA};function mn($,nt,ut,vt){if(nt&&typeof nt=="object")for(var Ft in nt)YA($,Ft,nt[Ft],ut);else{nt=ht(nt);for(var Ot=0,er=nt.length;Ot<er;Ot++)YA($,nt[Ot],ut,vt)}return this}var Vn="_leaflet_events";function Un($,nt,ut,vt){if(arguments.length===1)cs($),delete $[Vn];else if(nt&&typeof nt=="object")for(var Ft in nt)qA($,Ft,nt[Ft],ut);else if(nt=ht(nt),arguments.length===2)cs($,function(gr){return dt(nt,gr)!==-1});else for(var Ot=0,er=nt.length;Ot<er;Ot++)qA($,nt[Ot],ut,vt);return this}function cs($,nt){for(var ut in $[Vn]){var vt=ut.split(/\d/)[0];(!nt||nt(vt))&&qA($,vt,null,null,ut)}}var XA={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function YA($,nt,ut,vt){var Ft=nt+et(ut)+(vt?"_"+et(vt):"");if($[Vn]&&$[Vn][Ft])return this;var Ot=function(gr){return ut.call(vt||$,gr||window.event)},er=Ot;!Mt.touchNative&&Mt.pointer&&nt.indexOf("touch")===0?Ot=rr($,nt,Ot):Mt.touch&&nt==="dblclick"?Ot=Rr($,Ot):"addEventListener"in $?nt==="touchstart"||nt==="touchmove"||nt==="wheel"||nt==="mousewheel"?$.addEventListener(XA[nt]||nt,Ot,Mt.passiveEvents?{passive:!1}:!1):nt==="mouseenter"||nt==="mouseleave"?(Ot=function(gr){gr=gr||window.event,ZA($,gr)&&er(gr)},$.addEventListener(XA[nt],Ot,!1)):$.addEventListener(nt,er,!1):$.attachEvent("on"+nt,Ot),$[Vn]=$[Vn]||{},$[Vn][Ft]=Ot}function qA($,nt,ut,vt,Ft){Ft=Ft||nt+et(ut)+(vt?"_"+et(vt):"");var Ot=$[Vn]&&$[Vn][Ft];if(!Ot)return this;!Mt.touchNative&&Mt.pointer&&nt.indexOf("touch")===0?Mr($,nt,Ot):Mt.touch&&nt==="dblclick"?tn($,Ot):"removeEventListener"in $?$.removeEventListener(XA[nt]||nt,Ot,!1):$.detachEvent("on"+nt,Ot),$[Vn][Ft]=null}function iA($){return $.stopPropagation?$.stopPropagation():$.originalEvent?$.originalEvent._stopped=!0:$.cancelBubble=!0,this}function jA($){return YA($,"wheel",iA),this}function pA($){return mn($,"mousedown touchstart dblclick contextmenu",iA),$._leaflet_disable_click=!0,this}function Dn($){return $.preventDefault?$.preventDefault():$.returnValue=!1,this}function AA($){return Dn($),iA($),this}function fs($){if($.composedPath)return $.composedPath();for(var nt=[],ut=$.target;ut;)nt.push(ut),ut=ut.parentNode;return nt}function ds($,nt){if(!nt)return new jt($.clientX,$.clientY);var ut=VA(nt),vt=ut.boundingClientRect;return new jt(($.clientX-vt.left)/ut.x-nt.clientLeft,($.clientY-vt.top)/ut.y-nt.clientTop)}var Js=Mt.linux&&Mt.chrome?window.devicePixelRatio:Mt.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function gs($){return Mt.edge?$.wheelDeltaY/2:$.deltaY&&$.deltaMode===0?-$.deltaY/Js:$.deltaY&&$.deltaMode===1?-$.deltaY*20:$.deltaY&&$.deltaMode===2?-$.deltaY*60:$.deltaX||$.deltaZ?0:$.wheelDelta?($.wheelDeltaY||$.wheelDelta)/2:$.detail&&Math.abs($.detail)<32765?-$.detail*20:$.detail?$.detail/-32765*60:0}function ZA($,nt){var ut=nt.relatedTarget;if(!ut)return!0;try{for(;ut&&ut!==$;)ut=ut.parentNode}catch{return!1}return ut!==$}var na={__proto__:null,on:mn,off:Un,stopPropagation:iA,disableScrollPropagation:jA,disableClickPropagation:pA,preventDefault:Dn,stop:AA,getPropagationPath:fs,getMousePosition:ds,getWheelDelta:gs,isExternalTarget:ZA,addListener:mn,removeListener:Un},ps=lr.extend({run:function($,nt,ut,vt){this.stop(),this._el=$,this._inProgress=!0,this._duration=ut||.25,this._easeOutPower=1/Math.max(vt||.5,.2),this._startPos=jn($),this._offset=nt.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=Nt(this._animate,this),this._step()},_step:function($){var nt=+new Date-this._startTime,ut=this._duration*1e3;nt<ut?this._runFrame(this._easeOut(nt/ut),$):(this._runFrame(1),this._complete())},_runFrame:function($,nt){var ut=this._startPos.add(this._offset.multiplyBy($));nt&&ut._round(),Tn(this._el,ut),this.fire("step")},_complete:function(){Wt(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function($){return 1-Math.pow(1-$,this._easeOutPower)}}),yn=lr.extend({options:{crs:or,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function($,nt){nt=ct(this,nt),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer($),this._initLayout(),this._onResize=b(this._onResize,this),this._initEvents(),nt.maxBounds&&this.setMaxBounds(nt.maxBounds),nt.zoom!==void 0&&(this._zoom=this._limitZoom(nt.zoom)),nt.center&&nt.zoom!==void 0&&this.setView(hr(nt.center),nt.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Cn&&Mt.any3d&&!Mt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),mn(this._proxy,En,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function($,nt,ut){if(nt=nt===void 0?this._zoom:this._limitZoom(nt),$=this._limitCenter(hr($),nt,this.options.maxBounds),ut=ut||{},this._stop(),this._loaded&&!ut.reset&&ut!==!0){ut.animate!==void 0&&(ut.zoom=g({animate:ut.animate},ut.zoom),ut.pan=g({animate:ut.animate,duration:ut.duration},ut.pan));var vt=this._zoom!==nt?this._tryAnimatedZoom&&this._tryAnimatedZoom($,nt,ut.zoom):this._tryAnimatedPan($,ut.pan);if(vt)return clearTimeout(this._sizeTimer),this}return this._resetView($,nt,ut.pan&&ut.pan.noMoveStart),this},setZoom:function($,nt){return this._loaded?this.setView(this.getCenter(),$,{zoom:nt}):(this._zoom=$,this)},zoomIn:function($,nt){return $=$||(Mt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+$,nt)},zoomOut:function($,nt){return $=$||(Mt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-$,nt)},setZoomAround:function($,nt,ut){var vt=this.getZoomScale(nt),Ft=this.getSize().divideBy(2),Ot=$ instanceof jt?$:this.latLngToContainerPoint($),er=Ot.subtract(Ft).multiplyBy(1-1/vt),gr=this.containerPointToLatLng(Ft.add(er));return this.setView(gr,nt,{zoom:ut})},_getBoundsCenterZoom:function($,nt){nt=nt||{},$=$.getBounds?$.getBounds():Ur($);var ut=Ar(nt.paddingTopLeft||nt.padding||[0,0]),vt=Ar(nt.paddingBottomRight||nt.padding||[0,0]),Ft=this.getBoundsZoom($,!1,ut.add(vt));if(Ft=typeof nt.maxZoom=="number"?Math.min(nt.maxZoom,Ft):Ft,Ft===1/0)return{center:$.getCenter(),zoom:Ft};var Ot=vt.subtract(ut).divideBy(2),er=this.project($.getSouthWest(),Ft),gr=this.project($.getNorthEast(),Ft),Cr=this.unproject(er.add(gr).divideBy(2).add(Ot),Ft);return{center:Cr,zoom:Ft}},fitBounds:function($,nt){if($=Ur($),!$.isValid())throw new Error("Bounds are not valid.");var ut=this._getBoundsCenterZoom($,nt);return this.setView(ut.center,ut.zoom,nt)},fitWorld:function($){return this.fitBounds([[-90,-180],[90,180]],$)},panTo:function($,nt){return this.setView($,this._zoom,{pan:nt})},panBy:function($,nt){if($=Ar($).round(),nt=nt||{},!$.x&&!$.y)return this.fire("moveend");if(nt.animate!==!0&&!this.getSize().contains($))return this._resetView(this.unproject(this.project(this.getCenter()).add($)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new ps,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),nt.noMoveStart||this.fire("movestart"),nt.animate!==!1){cn(this._mapPane,"leaflet-pan-anim");var ut=this._getMapPanePos().subtract($).round();this._panAnim.run(this._mapPane,ut,nt.duration||.25,nt.easeLinearity)}else this._rawPanBy($),this.fire("move").fire("moveend");return this},flyTo:function($,nt,ut){if(ut=ut||{},ut.animate===!1||!Mt.any3d)return this.setView($,nt,ut);this._stop();var vt=this.project(this.getCenter()),Ft=this.project($),Ot=this.getSize(),er=this._zoom;$=hr($),nt=nt===void 0?er:nt;var gr=Math.max(Ot.x,Ot.y),Cr=gr*this.getZoomScale(er,nt),Lr=Ft.distanceTo(vt)||1,nn=1.42,pn=nn*nn;function wn(kn){var HA=kn?-1:1,Do=kn?Cr:gr,Po=Cr*Cr-gr*gr+HA*pn*pn*Lr*Lr,Ho=2*Do*pn*Lr,os=Po/Ho,js=Math.sqrt(os*os+1)-os,No=js<1e-9?-18:Math.log(js);return No}function Hn(kn){return(Math.exp(kn)-Math.exp(-kn))/2}function Rn(kn){return(Math.exp(kn)+Math.exp(-kn))/2}function Kn(kn){return Hn(kn)/Rn(kn)}var On=wn(0);function fA(kn){return gr*(Rn(On)/Rn(On+nn*kn))}function ko(kn){return gr*(Rn(On)*Kn(On+nn*kn)-Hn(On))/pn}function Ro(kn){return 1-Math.pow(1-kn,1.5)}var Lo=Date.now(),Ys=(wn(1)-On)/nn,Mo=ut.duration?1e3*ut.duration:1e3*Ys*.8;function qs(){var kn=(Date.now()-Lo)/Mo,HA=Ro(kn)*Ys;kn<=1?(this._flyToFrame=Nt(qs,this),this._move(this.unproject(vt.add(Ft.subtract(vt).multiplyBy(ko(HA)/Lr)),er),this.getScaleZoom(gr/fA(HA),er),{flyTo:!0})):this._move($,nt)._moveEnd(!0)}return this._moveStart(!0,ut.noMoveStart),qs.call(this),this},flyToBounds:function($,nt){var ut=this._getBoundsCenterZoom($,nt);return this.flyTo(ut.center,ut.zoom,nt)},setMaxBounds:function($){return $=Ur($),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),$.isValid()?(this.options.maxBounds=$,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function($){var nt=this.options.minZoom;return this.options.minZoom=$,this._loaded&&nt!==$&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom($):this},setMaxZoom:function($){var nt=this.options.maxZoom;return this.options.maxZoom=$,this._loaded&&nt!==$&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom($):this},panInsideBounds:function($,nt){this._enforcingBounds=!0;var ut=this.getCenter(),vt=this._limitCenter(ut,this._zoom,Ur($));return ut.equals(vt)||this.panTo(vt,nt),this._enforcingBounds=!1,this},panInside:function($,nt){nt=nt||{};var ut=Ar(nt.paddingTopLeft||nt.padding||[0,0]),vt=Ar(nt.paddingBottomRight||nt.padding||[0,0]),Ft=this.project(this.getCenter()),Ot=this.project($),er=this.getPixelBounds(),gr=dr([er.min.add(ut),er.max.subtract(vt)]),Cr=gr.getSize();if(!gr.contains(Ot)){this._enforcingBounds=!0;var Lr=Ot.subtract(gr.getCenter()),nn=gr.extend(Ot).getSize().subtract(Cr);Ft.x+=Lr.x<0?-nn.x:nn.x,Ft.y+=Lr.y<0?-nn.y:nn.y,this.panTo(this.unproject(Ft),nt),this._enforcingBounds=!1}return this},invalidateSize:function($){if(!this._loaded)return this;$=g({animate:!1,pan:!0},$===!0?{animate:!0}:$);var nt=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var ut=this.getSize(),vt=nt.divideBy(2).round(),Ft=ut.divideBy(2).round(),Ot=vt.subtract(Ft);return!Ot.x&&!Ot.y?this:($.animate&&$.pan?this.panBy(Ot):($.pan&&this._rawPanBy(Ot),this.fire("move"),$.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(b(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:nt,newSize:ut}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function($){if($=this._locateOptions=g({timeout:1e4,watch:!1},$),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var nt=b(this._handleGeolocationResponse,this),ut=b(this._handleGeolocationError,this);return $.watch?this._locationWatchId=navigator.geolocation.watchPosition(nt,ut,$):navigator.geolocation.getCurrentPosition(nt,ut,$),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function($){if(this._container._leaflet_id){var nt=$.code,ut=$.message||(nt===1?"permission denied":nt===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:nt,message:"Geolocation error: "+ut+"."})}},_handleGeolocationResponse:function($){if(this._container._leaflet_id){var nt=$.coords.latitude,ut=$.coords.longitude,vt=new nr(nt,ut),Ft=vt.toBounds($.coords.accuracy*2),Ot=this._locateOptions;if(Ot.setView){var er=this.getBoundsZoom(Ft);this.setView(vt,Ot.maxZoom?Math.min(er,Ot.maxZoom):er)}var gr={latlng:vt,bounds:Ft,timestamp:$.timestamp};for(var Cr in $.coords)typeof $.coords[Cr]=="number"&&(gr[Cr]=$.coords[Cr]);this.fire("locationfound",gr)}},addHandler:function($,nt){if(!nt)return this;var ut=this[$]=new nt(this);return this._handlers.push(ut),this.options[$]&&ut.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Bn(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Wt(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var $;for($ in this._layers)this._layers[$].remove();for($ in this._panes)Bn(this._panes[$]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function($,nt){var ut="leaflet-pane"+($?" leaflet-"+$.replace("Pane","")+"-pane":""),vt=gn("div",ut,nt||this._mapPane);return $&&(this._panes[$]=vt),vt},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var $=this.getPixelBounds(),nt=this.unproject($.getBottomLeft()),ut=this.unproject($.getTopRight());return new Nr(nt,ut)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function($,nt,ut){$=Ur($),ut=Ar(ut||[0,0]);var vt=this.getZoom()||0,Ft=this.getMinZoom(),Ot=this.getMaxZoom(),er=$.getNorthWest(),gr=$.getSouthEast(),Cr=this.getSize().subtract(ut),Lr=dr(this.project(gr,vt),this.project(er,vt)).getSize(),nn=Mt.any3d?this.options.zoomSnap:1,pn=Cr.x/Lr.x,wn=Cr.y/Lr.y,Hn=nt?Math.max(pn,wn):Math.min(pn,wn);return vt=this.getScaleZoom(Hn,vt),nn&&(vt=Math.round(vt/(nn/100))*(nn/100),vt=nt?Math.ceil(vt/nn)*nn:Math.floor(vt/nn)*nn),Math.max(Ft,Math.min(Ot,vt))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new jt(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function($,nt){var ut=this._getTopLeftPoint($,nt);return new mr(ut,ut.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function($){return this.options.crs.getProjectedBounds($===void 0?this.getZoom():$)},getPane:function($){return typeof $=="string"?this._panes[$]:$},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function($,nt){var ut=this.options.crs;return nt=nt===void 0?this._zoom:nt,ut.scale($)/ut.scale(nt)},getScaleZoom:function($,nt){var ut=this.options.crs;nt=nt===void 0?this._zoom:nt;var vt=ut.zoom($*ut.scale(nt));return isNaN(vt)?1/0:vt},project:function($,nt){return nt=nt===void 0?this._zoom:nt,this.options.crs.latLngToPoint(hr($),nt)},unproject:function($,nt){return nt=nt===void 0?this._zoom:nt,this.options.crs.pointToLatLng(Ar($),nt)},layerPointToLatLng:function($){var nt=Ar($).add(this.getPixelOrigin());return this.unproject(nt)},latLngToLayerPoint:function($){var nt=this.project(hr($))._round();return nt._subtract(this.getPixelOrigin())},wrapLatLng:function($){return this.options.crs.wrapLatLng(hr($))},wrapLatLngBounds:function($){return this.options.crs.wrapLatLngBounds(Ur($))},distance:function($,nt){return this.options.crs.distance(hr($),hr(nt))},containerPointToLayerPoint:function($){return Ar($).subtract(this._getMapPanePos())},layerPointToContainerPoint:function($){return Ar($).add(this._getMapPanePos())},containerPointToLatLng:function($){var nt=this.containerPointToLayerPoint(Ar($));return this.layerPointToLatLng(nt)},latLngToContainerPoint:function($){return this.layerPointToContainerPoint(this.latLngToLayerPoint(hr($)))},mouseEventToContainerPoint:function($){return ds($,this._container)},mouseEventToLayerPoint:function($){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint($))},mouseEventToLatLng:function($){return this.layerPointToLatLng(this.mouseEventToLayerPoint($))},_initContainer:function($){var nt=this._container=Fn($);if(nt){if(nt._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");mn(nt,"scroll",this._onScroll,this),this._containerId=et(nt)},_initLayout:function(){var $=this._container;this._fadeAnimated=this.options.fadeAnimation&&Mt.any3d,cn($,"leaflet-container"+(Mt.touch?" leaflet-touch":"")+(Mt.retina?" leaflet-retina":"")+(Mt.ielt9?" leaflet-oldie":"")+(Mt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var nt=bn($,"position");nt!=="absolute"&&nt!=="relative"&&nt!=="fixed"&&nt!=="sticky"&&($.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var $=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Tn(this._mapPane,new jt(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(cn($.markerPane,"leaflet-zoom-hide"),cn($.shadowPane,"leaflet-zoom-hide"))},_resetView:function($,nt,ut){Tn(this._mapPane,new jt(0,0));var vt=!this._loaded;this._loaded=!0,nt=this._limitZoom(nt),this.fire("viewprereset");var Ft=this._zoom!==nt;this._moveStart(Ft,ut)._move($,nt)._moveEnd(Ft),this.fire("viewreset"),vt&&this.fire("load")},_moveStart:function($,nt){return $&&this.fire("zoomstart"),nt||this.fire("movestart"),this},_move:function($,nt,ut,vt){nt===void 0&&(nt=this._zoom);var Ft=this._zoom!==nt;return this._zoom=nt,this._lastCenter=$,this._pixelOrigin=this._getNewPixelOrigin($),vt?ut&&ut.pinch&&this.fire("zoom",ut):((Ft||ut&&ut.pinch)&&this.fire("zoom",ut),this.fire("move",ut)),this},_moveEnd:function($){return $&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Wt(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function($){Tn(this._mapPane,this._getMapPanePos().subtract($))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function($){this._targets={},this._targets[et(this._container)]=this;var nt=$?Un:mn;nt(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&nt(window,"resize",this._onResize,this),Mt.any3d&&this.options.transform3DLimit&&($?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Wt(this._resizeRequest),this._resizeRequest=Nt(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var $=this._getMapPanePos();Math.max(Math.abs($.x),Math.abs($.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function($,nt){for(var ut=[],vt,Ft=nt==="mouseout"||nt==="mouseover",Ot=$.target||$.srcElement,er=!1;Ot;){if(vt=this._targets[et(Ot)],vt&&(nt==="click"||nt==="preclick")&&this._draggableMoved(vt)){er=!0;break}if(vt&&vt.listens(nt,!0)&&(Ft&&!ZA(Ot,$)||(ut.push(vt),Ft))||Ot===this._container)break;Ot=Ot.parentNode}return!ut.length&&!er&&!Ft&&this.listens(nt,!0)&&(ut=[this]),ut},_isClickDisabled:function($){for(;$&&$!==this._container;){if($._leaflet_disable_click)return!0;$=$.parentNode}},_handleDOMEvent:function($){var nt=$.target||$.srcElement;if(!(!this._loaded||nt._leaflet_disable_events||$.type==="click"&&this._isClickDisabled(nt))){var ut=$.type;ut==="mousedown"&&GA(nt),this._fireDOMEvent($,ut)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function($,nt,ut){if($.type==="click"){var vt=g({},$);vt.type="preclick",this._fireDOMEvent(vt,vt.type,ut)}var Ft=this._findEventTargets($,nt);if(ut){for(var Ot=[],er=0;er<ut.length;er++)ut[er].listens(nt,!0)&&Ot.push(ut[er]);Ft=Ot.concat(Ft)}if(Ft.length){nt==="contextmenu"&&Dn($);var gr=Ft[0],Cr={originalEvent:$};if($.type!=="keypress"&&$.type!=="keydown"&&$.type!=="keyup"){var Lr=gr.getLatLng&&(!gr._radius||gr._radius<=10);Cr.containerPoint=Lr?this.latLngToContainerPoint(gr.getLatLng()):this.mouseEventToContainerPoint($),Cr.layerPoint=this.containerPointToLayerPoint(Cr.containerPoint),Cr.latlng=Lr?gr.getLatLng():this.layerPointToLatLng(Cr.layerPoint)}for(er=0;er<Ft.length;er++)if(Ft[er].fire(nt,Cr,!0),Cr.originalEvent._stopped||Ft[er].options.bubblingMouseEvents===!1&&dt(this._mouseEvents,nt)!==-1)return}},_draggableMoved:function($){return $=$.dragging&&$.dragging.enabled()?$:this,$.dragging&&$.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var $=0,nt=this._handlers.length;$<nt;$++)this._handlers[$].disable()},whenReady:function($,nt){return this._loaded?$.call(nt||this,{target:this}):this.on("load",$,nt),this},_getMapPanePos:function(){return jn(this._mapPane)||new jt(0,0)},_moved:function(){var $=this._getMapPanePos();return $&&!$.equals([0,0])},_getTopLeftPoint:function($,nt){var ut=$&&nt!==void 0?this._getNewPixelOrigin($,nt):this.getPixelOrigin();return ut.subtract(this._getMapPanePos())},_getNewPixelOrigin:function($,nt){var ut=this.getSize()._divideBy(2);return this.project($,nt)._subtract(ut)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function($,nt,ut){var vt=this._getNewPixelOrigin(ut,nt);return this.project($,nt)._subtract(vt)},_latLngBoundsToNewLayerBounds:function($,nt,ut){var vt=this._getNewPixelOrigin(ut,nt);return dr([this.project($.getSouthWest(),nt)._subtract(vt),this.project($.getNorthWest(),nt)._subtract(vt),this.project($.getSouthEast(),nt)._subtract(vt),this.project($.getNorthEast(),nt)._subtract(vt)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function($){return this.latLngToLayerPoint($).subtract(this._getCenterLayerPoint())},_limitCenter:function($,nt,ut){if(!ut)return $;var vt=this.project($,nt),Ft=this.getSize().divideBy(2),Ot=new mr(vt.subtract(Ft),vt.add(Ft)),er=this._getBoundsOffset(Ot,ut,nt);return Math.abs(er.x)<=1&&Math.abs(er.y)<=1?$:this.unproject(vt.add(er),nt)},_limitOffset:function($,nt){if(!nt)return $;var ut=this.getPixelBounds(),vt=new mr(ut.min.add($),ut.max.add($));return $.add(this._getBoundsOffset(vt,nt))},_getBoundsOffset:function($,nt,ut){var vt=dr(this.project(nt.getNorthEast(),ut),this.project(nt.getSouthWest(),ut)),Ft=vt.min.subtract($.min),Ot=vt.max.subtract($.max),er=this._rebound(Ft.x,-Ot.x),gr=this._rebound(Ft.y,-Ot.y);return new jt(er,gr)},_rebound:function($,nt){return $+nt>0?Math.round($-nt)/2:Math.max(0,Math.ceil($))-Math.max(0,Math.floor(nt))},_limitZoom:function($){var nt=this.getMinZoom(),ut=this.getMaxZoom(),vt=Mt.any3d?this.options.zoomSnap:1;return vt&&($=Math.round($/vt)*vt),Math.max(nt,Math.min(ut,$))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){vn(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function($,nt){var ut=this._getCenterOffset($)._trunc();return(nt&&nt.animate)!==!0&&!this.getSize().contains(ut)?!1:(this.panBy(ut,nt),!0)},_createAnimProxy:function(){var $=this._proxy=gn("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild($),this.on("zoomanim",function(nt){var ut=Pr,vt=this._proxy.style[ut];qn(this._proxy,this.project(nt.center,nt.zoom),this.getZoomScale(nt.zoom,1)),vt===this._proxy.style[ut]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Bn(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var $=this.getCenter(),nt=this.getZoom();qn(this._proxy,this.project($,nt),this.getZoomScale(nt,1))},_catchTransitionEnd:function($){this._animatingZoom&&$.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function($,nt,ut){if(this._animatingZoom)return!0;if(ut=ut||{},!this._zoomAnimated||ut.animate===!1||this._nothingToAnimate()||Math.abs(nt-this._zoom)>this.options.zoomAnimationThreshold)return!1;var vt=this.getZoomScale(nt),Ft=this._getCenterOffset($)._divideBy(1-1/vt);return ut.animate!==!0&&!this.getSize().contains(Ft)?!1:(Nt(function(){this._moveStart(!0,ut.noMoveStart||!1)._animateZoom($,nt,!0)},this),!0)},_animateZoom:function($,nt,ut,vt){this._mapPane&&(ut&&(this._animatingZoom=!0,this._animateToCenter=$,this._animateToZoom=nt,cn(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:$,zoom:nt,noUpdate:vt}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(b(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&vn(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function ga($,nt){return new yn($,nt)}var zn=qt.extend({options:{position:"topright"},initialize:function($){ct(this,$)},getPosition:function(){return this.options.position},setPosition:function($){var nt=this._map;return nt&&nt.removeControl(this),this.options.position=$,nt&&nt.addControl(this),this},getContainer:function(){return this._container},addTo:function($){this.remove(),this._map=$;var nt=this._container=this.onAdd($),ut=this.getPosition(),vt=$._controlCorners[ut];return cn(nt,"leaflet-control"),ut.indexOf("bottom")!==-1?vt.insertBefore(nt,vt.firstChild):vt.appendChild(nt),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Bn(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function($){this._map&&$&&$.screenX>0&&$.screenY>0&&this._map.getContainer().focus()}}),mA=function($){return new zn($)};yn.include({addControl:function($){return $.addTo(this),this},removeControl:function($){return $.remove(),this},_initControlPos:function(){var $=this._controlCorners={},nt="leaflet-",ut=this._controlContainer=gn("div",nt+"control-container",this._container);function vt(Ft,Ot){var er=nt+Ft+" "+nt+Ot;$[Ft+Ot]=gn("div",er,ut)}vt("top","left"),vt("top","right"),vt("bottom","left"),vt("bottom","right")},_clearControlPos:function(){for(var $ in this._controlCorners)Bn(this._controlCorners[$]);Bn(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var ms=zn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function($,nt,ut,vt){return ut<vt?-1:vt<ut?1:0}},initialize:function($,nt,ut){ct(this,ut),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var vt in $)this._addLayer($[vt],vt);for(vt in nt)this._addLayer(nt[vt],vt,!0)},onAdd:function($){this._initLayout(),this._update(),this._map=$,$.on("zoomend",this._checkDisabledLayers,this);for(var nt=0;nt<this._layers.length;nt++)this._layers[nt].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function($){return zn.prototype.addTo.call(this,$),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var $=0;$<this._layers.length;$++)this._layers[$].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function($,nt){return this._addLayer($,nt),this._map?this._update():this},addOverlay:function($,nt){return this._addLayer($,nt,!0),this._map?this._update():this},removeLayer:function($){$.off("add remove",this._onLayerChange,this);var nt=this._getLayer(et($));return nt&&this._layers.splice(this._layers.indexOf(nt),1),this._map?this._update():this},expand:function(){cn(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var $=this._map.getSize().y-(this._container.offsetTop+50);return $<this._section.clientHeight?(cn(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=$+"px"):vn(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return vn(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var $="leaflet-control-layers",nt=this._container=gn("div",$),ut=this.options.collapsed;nt.setAttribute("aria-haspopup",!0),pA(nt),jA(nt);var vt=this._section=gn("section",$+"-list");ut&&(this._map.on("click",this.collapse,this),mn(nt,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var Ft=this._layersLink=gn("a",$+"-toggle",nt);Ft.href="#",Ft.title="Layers",Ft.setAttribute("role","button"),mn(Ft,{keydown:function(Ot){Ot.keyCode===13&&this._expandSafely()},click:function(Ot){Dn(Ot),this._expandSafely()}},this),ut||this.expand(),this._baseLayersList=gn("div",$+"-base",vt),this._separator=gn("div",$+"-separator",vt),this._overlaysList=gn("div",$+"-overlays",vt),nt.appendChild(vt)},_getLayer:function($){for(var nt=0;nt<this._layers.length;nt++)if(this._layers[nt]&&et(this._layers[nt].layer)===$)return this._layers[nt]},_addLayer:function($,nt,ut){this._map&&$.on("add remove",this._onLayerChange,this),this._layers.push({layer:$,name:nt,overlay:ut}),this.options.sortLayers&&this._layers.sort(b(function(vt,Ft){return this.options.sortFunction(vt.layer,Ft.layer,vt.name,Ft.name)},this)),this.options.autoZIndex&&$.setZIndex&&(this._lastZIndex++,$.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Qn(this._baseLayersList),Qn(this._overlaysList),this._layerControlInputs=[];var $,nt,ut,vt,Ft=0;for(ut=0;ut<this._layers.length;ut++)vt=this._layers[ut],this._addItem(vt),nt=nt||vt.overlay,$=$||!vt.overlay,Ft+=vt.overlay?0:1;return this.options.hideSingleBase&&($=$&&Ft>1,this._baseLayersList.style.display=$?"":"none"),this._separator.style.display=nt&&$?"":"none",this},_onLayerChange:function($){this._handlingClick||this._update();var nt=this._getLayer(et($.target)),ut=nt.overlay?$.type==="add"?"overlayadd":"overlayremove":$.type==="add"?"baselayerchange":null;ut&&this._map.fire(ut,nt)},_createRadioElement:function($,nt){var ut='<input type="radio" class="leaflet-control-layers-selector" name="'+$+'"'+(nt?' checked="checked"':"")+"/>",vt=document.createElement("div");return vt.innerHTML=ut,vt.firstChild},_addItem:function($){var nt=document.createElement("label"),ut=this._map.hasLayer($.layer),vt;$.overlay?(vt=document.createElement("input"),vt.type="checkbox",vt.className="leaflet-control-layers-selector",vt.defaultChecked=ut):vt=this._createRadioElement("leaflet-base-layers_"+et(this),ut),this._layerControlInputs.push(vt),vt.layerId=et($.layer),mn(vt,"click",this._onInputClick,this);var Ft=document.createElement("span");Ft.innerHTML=" "+$.name;var Ot=document.createElement("span");nt.appendChild(Ot),Ot.appendChild(vt),Ot.appendChild(Ft);var er=$.overlay?this._overlaysList:this._baseLayersList;return er.appendChild(nt),this._checkDisabledLayers(),nt},_onInputClick:function(){if(!this._preventClick){var $=this._layerControlInputs,nt,ut,vt=[],Ft=[];this._handlingClick=!0;for(var Ot=$.length-1;Ot>=0;Ot--)nt=$[Ot],ut=this._getLayer(nt.layerId).layer,nt.checked?vt.push(ut):nt.checked||Ft.push(ut);for(Ot=0;Ot<Ft.length;Ot++)this._map.hasLayer(Ft[Ot])&&this._map.removeLayer(Ft[Ot]);for(Ot=0;Ot<vt.length;Ot++)this._map.hasLayer(vt[Ot])||this._map.addLayer(vt[Ot]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var $=this._layerControlInputs,nt,ut,vt=this._map.getZoom(),Ft=$.length-1;Ft>=0;Ft--)nt=$[Ft],ut=this._getLayer(nt.layerId).layer,nt.disabled=ut.options.minZoom!==void 0&&vt<ut.options.minZoom||ut.options.maxZoom!==void 0&&vt>ut.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var $=this._section;this._preventClick=!0,mn($,"click",Dn),this.expand();var nt=this;setTimeout(function(){Un($,"click",Dn),nt._preventClick=!1})}}),_a=function($,nt,ut){return new ms($,nt,ut)},WA=zn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function($){var nt="leaflet-control-zoom",ut=gn("div",nt+" leaflet-bar"),vt=this.options;return this._zoomInButton=this._createButton(vt.zoomInText,vt.zoomInTitle,nt+"-in",ut,this._zoomIn),this._zoomOutButton=this._createButton(vt.zoomOutText,vt.zoomOutTitle,nt+"-out",ut,this._zoomOut),this._updateDisabled(),$.on("zoomend zoomlevelschange",this._updateDisabled,this),ut},onRemove:function($){$.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function($){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*($.shiftKey?3:1))},_zoomOut:function($){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*($.shiftKey?3:1))},_createButton:function($,nt,ut,vt,Ft){var Ot=gn("a",ut,vt);return Ot.innerHTML=$,Ot.href="#",Ot.title=nt,Ot.setAttribute("role","button"),Ot.setAttribute("aria-label",nt),pA(Ot),mn(Ot,"click",AA),mn(Ot,"click",Ft,this),mn(Ot,"click",this._refocusOnMap,this),Ot},_updateDisabled:function(){var $=this._map,nt="leaflet-disabled";vn(this._zoomInButton,nt),vn(this._zoomOutButton,nt),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||$._zoom===$.getMinZoom())&&(cn(this._zoomOutButton,nt),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||$._zoom===$.getMaxZoom())&&(cn(this._zoomInButton,nt),this._zoomInButton.setAttribute("aria-disabled","true"))}});yn.mergeOptions({zoomControl:!0}),yn.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new WA,this.addControl(this.zoomControl))});var ba=function($){return new WA($)},_s=zn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function($){var nt="leaflet-control-scale",ut=gn("div",nt),vt=this.options;return this._addScales(vt,nt+"-line",ut),$.on(vt.updateWhenIdle?"moveend":"move",this._update,this),$.whenReady(this._update,this),ut},onRemove:function($){$.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function($,nt,ut){$.metric&&(this._mScale=gn("div",nt,ut)),$.imperial&&(this._iScale=gn("div",nt,ut))},_update:function(){var $=this._map,nt=$.getSize().y/2,ut=$.distance($.containerPointToLatLng([0,nt]),$.containerPointToLatLng([this.options.maxWidth,nt]));this._updateScales(ut)},_updateScales:function($){this.options.metric&&$&&this._updateMetric($),this.options.imperial&&$&&this._updateImperial($)},_updateMetric:function($){var nt=this._getRoundNum($),ut=nt<1e3?nt+" m":nt/1e3+" km";this._updateScale(this._mScale,ut,nt/$)},_updateImperial:function($){var nt=$*3.2808399,ut,vt,Ft;nt>5280?(ut=nt/5280,vt=this._getRoundNum(ut),this._updateScale(this._iScale,vt+" mi",vt/ut)):(Ft=this._getRoundNum(nt),this._updateScale(this._iScale,Ft+" ft",Ft/nt))},_updateScale:function($,nt,ut){$.style.width=Math.round(this.options.maxWidth*ut)+"px",$.innerHTML=nt},_getRoundNum:function($){var nt=Math.pow(10,(Math.floor($)+"").length-1),ut=$/nt;return ut=ut>=10?10:ut>=5?5:ut>=3?3:ut>=2?2:1,nt*ut}}),xa=function($){return new _s($)},$a='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',JA=zn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Mt.inlineSvg?$a+" ":"")+"Leaflet</a>"},initialize:function($){ct(this,$),this._attributions={}},onAdd:function($){$.attributionControl=this,this._container=gn("div","leaflet-control-attribution"),pA(this._container);for(var nt in $._layers)$._layers[nt].getAttribution&&this.addAttribution($._layers[nt].getAttribution());return this._update(),$.on("layeradd",this._addAttribution,this),this._container},onRemove:function($){$.off("layeradd",this._addAttribution,this)},_addAttribution:function($){$.layer.getAttribution&&(this.addAttribution($.layer.getAttribution()),$.layer.once("remove",function(){this.removeAttribution($.layer.getAttribution())},this))},setPrefix:function($){return this.options.prefix=$,this._update(),this},addAttribution:function($){return $?(this._attributions[$]||(this._attributions[$]=0),this._attributions[$]++,this._update(),this):this},removeAttribution:function($){return $?(this._attributions[$]&&(this._attributions[$]--,this._update()),this):this},_update:function(){if(this._map){var $=[];for(var nt in this._attributions)this._attributions[nt]&&$.push(nt);var ut=[];this.options.prefix&&ut.push(this.options.prefix),$.length&&ut.push($.join(", ")),this._container.innerHTML=ut.join(' <span aria-hidden="true">|</span> ')}}});yn.mergeOptions({attributionControl:!0}),yn.addInitHook(function(){this.options.attributionControl&&new JA().addTo(this)});var to=function($){return new JA($)};zn.Layers=ms,zn.Zoom=WA,zn.Scale=_s,zn.Attribution=JA,mA.layers=_a,mA.zoom=ba,mA.scale=xa,mA.attribution=to;var Xn=qt.extend({initialize:function($){this._map=$},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Xn.addTo=function($,nt){return $.addHandler(nt,this),this};var eo={Events:Jt},ws=Mt.touch?"touchstart mousedown":"mousedown",tA=lr.extend({options:{clickTolerance:3},initialize:function($,nt,ut,vt){ct(this,vt),this._element=$,this._dragStartTarget=nt||$,this._preventOutline=ut},enable:function(){this._enabled||(mn(this._dragStartTarget,ws,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(tA._dragging===this&&this.finishDrag(!0),Un(this._dragStartTarget,ws,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function($){if(this._enabled&&(this._moved=!1,!_n(this._element,"leaflet-zoom-anim"))){if($.touches&&$.touches.length!==1){tA._dragging===this&&this.finishDrag();return}if(!(tA._dragging||$.shiftKey||$.which!==1&&$.button!==1&&!$.touches)&&(tA._dragging=this,this._preventOutline&&GA(this._element),$A(),rA(),!this._moving)){this.fire("down");var nt=$.touches?$.touches[0]:$,ut=hs(this._element);this._startPoint=new jt(nt.clientX,nt.clientY),this._startPos=jn(this._element),this._parentScale=VA(ut);var vt=$.type==="mousedown";mn(document,vt?"mousemove":"touchmove",this._onMove,this),mn(document,vt?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function($){if(this._enabled){if($.touches&&$.touches.length>1){this._moved=!0;return}var nt=$.touches&&$.touches.length===1?$.touches[0]:$,ut=new jt(nt.clientX,nt.clientY)._subtract(this._startPoint);!ut.x&&!ut.y||Math.abs(ut.x)+Math.abs(ut.y)<this.options.clickTolerance||(ut.x/=this._parentScale.x,ut.y/=this._parentScale.y,Dn($),this._moved||(this.fire("dragstart"),this._moved=!0,cn(document.body,"leaflet-dragging"),this._lastTarget=$.target||$.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),cn(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(ut),this._moving=!0,this._lastEvent=$,this._updatePosition())}},_updatePosition:function(){var $={originalEvent:this._lastEvent};this.fire("predrag",$),Tn(this._element,this._newPos),this.fire("drag",$)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function($){vn(document.body,"leaflet-dragging"),this._lastTarget&&(vn(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Un(document,"mousemove touchmove",this._onMove,this),Un(document,"mouseup touchend touchcancel",this._onUp,this),KA(),nA();var nt=this._moved&&this._moving;this._moving=!1,tA._dragging=!1,nt&&this.fire("dragend",{noInertia:$,distance:this._newPos.distanceTo(this._startPos)})}});function Bs($,nt,ut){var vt,Ft=[1,4,2,8],Ot,er,gr,Cr,Lr,nn,pn,wn;for(Ot=0,nn=$.length;Ot<nn;Ot++)$[Ot]._code=sA($[Ot],nt);for(gr=0;gr<4;gr++){for(pn=Ft[gr],vt=[],Ot=0,nn=$.length,er=nn-1;Ot<nn;er=Ot++)Cr=$[Ot],Lr=$[er],Cr._code&pn?Lr._code&pn||(wn=FA(Lr,Cr,pn,nt,ut),wn._code=sA(wn,nt),vt.push(wn)):(Lr._code&pn&&(wn=FA(Lr,Cr,pn,nt,ut),wn._code=sA(wn,nt),vt.push(wn)),vt.push(Cr));$=vt}return $}function vs($,nt){var ut,vt,Ft,Ot,er,gr,Cr,Lr,nn;if(!$||$.length===0)throw new Error("latlngs not passed");$n($)||(console.warn("latlngs are not flat! Only the first ring will be used"),$=$[0]);var pn=hr([0,0]),wn=Ur($),Hn=wn.getNorthWest().distanceTo(wn.getSouthWest())*wn.getNorthEast().distanceTo(wn.getNorthWest());Hn<1700&&(pn=ts($));var Rn=$.length,Kn=[];for(ut=0;ut<Rn;ut++){var On=hr($[ut]);Kn.push(nt.project(hr([On.lat-pn.lat,On.lng-pn.lng])))}for(gr=Cr=Lr=0,ut=0,vt=Rn-1;ut<Rn;vt=ut++)Ft=Kn[ut],Ot=Kn[vt],er=Ft.y*Ot.x-Ot.y*Ft.x,Cr+=(Ft.x+Ot.x)*er,Lr+=(Ft.y+Ot.y)*er,gr+=er*3;gr===0?nn=Kn[0]:nn=[Cr/gr,Lr/gr];var fA=nt.unproject(Ar(nn));return hr([fA.lat+pn.lat,fA.lng+pn.lng])}function ts($){for(var nt=0,ut=0,vt=0,Ft=0;Ft<$.length;Ft++){var Ot=hr($[Ft]);nt+=Ot.lat,ut+=Ot.lng,vt++}return hr([nt/vt,ut/vt])}var ro={__proto__:null,clipPolygon:Bs,polygonCenter:vs,centroid:ts};function ys($,nt){if(!nt||!$.length)return $.slice();var ut=nt*nt;return $=Ao($,ut),$=io($,ut),$}function Es($,nt,ut){return Math.sqrt(_A($,nt,ut,!0))}function no($,nt,ut){return _A($,nt,ut)}function io($,nt){var ut=$.length,vt=typeof Uint8Array<"u"?Uint8Array:Array,Ft=new vt(ut);Ft[0]=Ft[ut-1]=1,es($,Ft,nt,0,ut-1);var Ot,er=[];for(Ot=0;Ot<ut;Ot++)Ft[Ot]&&er.push($[Ot]);return er}function es($,nt,ut,vt,Ft){var Ot=0,er,gr,Cr;for(gr=vt+1;gr<=Ft-1;gr++)Cr=_A($[gr],$[vt],$[Ft],!0),Cr>Ot&&(er=gr,Ot=Cr);Ot>ut&&(nt[er]=1,es($,nt,ut,vt,er),es($,nt,ut,er,Ft))}function Ao($,nt){for(var ut=[$[0]],vt=1,Ft=0,Ot=$.length;vt<Ot;vt++)so($[vt],$[Ft])>nt&&(ut.push($[vt]),Ft=vt);return Ft<Ot-1&&ut.push($[Ot-1]),ut}var Cs;function bs($,nt,ut,vt,Ft){var Ot=vt?Cs:sA($,ut),er=sA(nt,ut),gr,Cr,Lr;for(Cs=er;;){if(!(Ot|er))return[$,nt];if(Ot&er)return!1;gr=Ot||er,Cr=FA($,nt,gr,ut,Ft),Lr=sA(Cr,ut),gr===Ot?($=Cr,Ot=Lr):(nt=Cr,er=Lr)}}function FA($,nt,ut,vt,Ft){var Ot=nt.x-$.x,er=nt.y-$.y,gr=vt.min,Cr=vt.max,Lr,nn;return ut&8?(Lr=$.x+Ot*(Cr.y-$.y)/er,nn=Cr.y):ut&4?(Lr=$.x+Ot*(gr.y-$.y)/er,nn=gr.y):ut&2?(Lr=Cr.x,nn=$.y+er*(Cr.x-$.x)/Ot):ut&1&&(Lr=gr.x,nn=$.y+er*(gr.x-$.x)/Ot),new jt(Lr,nn,Ft)}function sA($,nt){var ut=0;return $.x<nt.min.x?ut|=1:$.x>nt.max.x&&(ut|=2),$.y<nt.min.y?ut|=4:$.y>nt.max.y&&(ut|=8),ut}function so($,nt){var ut=nt.x-$.x,vt=nt.y-$.y;return ut*ut+vt*vt}function _A($,nt,ut,vt){var Ft=nt.x,Ot=nt.y,er=ut.x-Ft,gr=ut.y-Ot,Cr=er*er+gr*gr,Lr;return Cr>0&&(Lr=(($.x-Ft)*er+($.y-Ot)*gr)/Cr,Lr>1?(Ft=ut.x,Ot=ut.y):Lr>0&&(Ft+=er*Lr,Ot+=gr*Lr)),er=$.x-Ft,gr=$.y-Ot,vt?er*er+gr*gr:new jt(Ft,Ot)}function $n($){return!ft($[0])||typeof $[0][0]!="object"&&typeof $[0][0]<"u"}function xs($){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),$n($)}function Ss($,nt){var ut,vt,Ft,Ot,er,gr,Cr,Lr;if(!$||$.length===0)throw new Error("latlngs not passed");$n($)||(console.warn("latlngs are not flat! Only the first ring will be used"),$=$[0]);var nn=hr([0,0]),pn=Ur($),wn=pn.getNorthWest().distanceTo(pn.getSouthWest())*pn.getNorthEast().distanceTo(pn.getNorthWest());wn<1700&&(nn=ts($));var Hn=$.length,Rn=[];for(ut=0;ut<Hn;ut++){var Kn=hr($[ut]);Rn.push(nt.project(hr([Kn.lat-nn.lat,Kn.lng-nn.lng])))}for(ut=0,vt=0;ut<Hn-1;ut++)vt+=Rn[ut].distanceTo(Rn[ut+1])/2;if(vt===0)Lr=Rn[0];else for(ut=0,Ot=0;ut<Hn-1;ut++)if(er=Rn[ut],gr=Rn[ut+1],Ft=er.distanceTo(gr),Ot+=Ft,Ot>vt){Cr=(Ot-vt)/Ft,Lr=[gr.x-Cr*(gr.x-er.x),gr.y-Cr*(gr.y-er.y)];break}var On=nt.unproject(Ar(Lr));return hr([On.lat+nn.lat,On.lng+nn.lng])}var ao={__proto__:null,simplify:ys,pointToSegmentDistance:Es,closestPointOnSegment:no,clipSegment:bs,_getEdgeIntersection:FA,_getBitCode:sA,_sqClosestPointOnSegment:_A,isFlat:$n,_flat:xs,polylineCenter:Ss},rs={project:function($){return new jt($.lng,$.lat)},unproject:function($){return new nr($.y,$.x)},bounds:new mr([-180,-90],[180,90])},ns={R:6378137,R_MINOR:6356752314245179e-9,bounds:new mr([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function($){var nt=Math.PI/180,ut=this.R,vt=$.lat*nt,Ft=this.R_MINOR/ut,Ot=Math.sqrt(1-Ft*Ft),er=Ot*Math.sin(vt),gr=Math.tan(Math.PI/4-vt/2)/Math.pow((1-er)/(1+er),Ot/2);return vt=-ut*Math.log(Math.max(gr,1e-10)),new jt($.lng*nt*ut,vt)},unproject:function($){for(var nt=180/Math.PI,ut=this.R,vt=this.R_MINOR/ut,Ft=Math.sqrt(1-vt*vt),Ot=Math.exp(-$.y/ut),er=Math.PI/2-2*Math.atan(Ot),gr=0,Cr=.1,Lr;gr<15&&Math.abs(Cr)>1e-7;gr++)Lr=Ft*Math.sin(er),Lr=Math.pow((1-Lr)/(1+Lr),Ft/2),Cr=Math.PI/2-2*Math.atan(Ot*Lr)-er,er+=Cr;return new nr(er*nt,$.x*nt/ut)}},oo={__proto__:null,LonLat:rs,Mercator:ns,SphericalMercator:on},lo=g({},Qr,{code:"EPSG:3395",projection:ns,transformation:function(){var $=.5/(Math.PI*ns.R);return zr($,.5,-$,.5)}()}),Fs=g({},Qr,{code:"EPSG:4326",projection:rs,transformation:zr(1/180,1,-1/180,.5)}),uo=g({},Dr,{projection:rs,transformation:zr(1,0,-1,0),scale:function($){return Math.pow(2,$)},zoom:function($){return Math.log($)/Math.LN2},distance:function($,nt){var ut=nt.lng-$.lng,vt=nt.lat-$.lat;return Math.sqrt(ut*ut+vt*vt)},infinite:!0});Dr.Earth=Qr,Dr.EPSG3395=lo,Dr.EPSG3857=or,Dr.EPSG900913=xr,Dr.EPSG4326=Fs,Dr.Simple=uo;var Gn=lr.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function($){return $.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function($){return $&&$.removeLayer(this),this},getPane:function($){return this._map.getPane($?this.options[$]||$:this.options.pane)},addInteractiveTarget:function($){return this._map._targets[et($)]=this,this},removeInteractiveTarget:function($){return delete this._map._targets[et($)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function($){var nt=$.target;if(nt.hasLayer(this)){if(this._map=nt,this._zoomAnimated=nt._zoomAnimated,this.getEvents){var ut=this.getEvents();nt.on(ut,this),this.once("remove",function(){nt.off(ut,this)},this)}this.onAdd(nt),this.fire("add"),nt.fire("layeradd",{layer:this})}}});yn.include({addLayer:function($){if(!$._layerAdd)throw new Error("The provided object is not a Layer.");var nt=et($);return this._layers[nt]?this:(this._layers[nt]=$,$._mapToAdd=this,$.beforeAdd&&$.beforeAdd(this),this.whenReady($._layerAdd,$),this)},removeLayer:function($){var nt=et($);return this._layers[nt]?(this._loaded&&$.onRemove(this),delete this._layers[nt],this._loaded&&(this.fire("layerremove",{layer:$}),$.fire("remove")),$._map=$._mapToAdd=null,this):this},hasLayer:function($){return et($)in this._layers},eachLayer:function($,nt){for(var ut in this._layers)$.call(nt,this._layers[ut]);return this},_addLayers:function($){$=$?ft($)?$:[$]:[];for(var nt=0,ut=$.length;nt<ut;nt++)this.addLayer($[nt])},_addZoomLimit:function($){(!isNaN($.options.maxZoom)||!isNaN($.options.minZoom))&&(this._zoomBoundLayers[et($)]=$,this._updateZoomLevels())},_removeZoomLimit:function($){var nt=et($);this._zoomBoundLayers[nt]&&(delete this._zoomBoundLayers[nt],this._updateZoomLevels())},_updateZoomLevels:function(){var $=1/0,nt=-1/0,ut=this._getZoomSpan();for(var vt in this._zoomBoundLayers){var Ft=this._zoomBoundLayers[vt].options;$=Ft.minZoom===void 0?$:Math.min($,Ft.minZoom),nt=Ft.maxZoom===void 0?nt:Math.max(nt,Ft.maxZoom)}this._layersMaxZoom=nt===-1/0?void 0:nt,this._layersMinZoom=$===1/0?void 0:$,ut!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var oA=Gn.extend({initialize:function($,nt){ct(this,nt),this._layers={};var ut,vt;if($)for(ut=0,vt=$.length;ut<vt;ut++)this.addLayer($[ut])},addLayer:function($){var nt=this.getLayerId($);return this._layers[nt]=$,this._map&&this._map.addLayer($),this},removeLayer:function($){var nt=$ in this._layers?$:this.getLayerId($);return this._map&&this._layers[nt]&&this._map.removeLayer(this._layers[nt]),delete this._layers[nt],this},hasLayer:function($){var nt=typeof $=="number"?$:this.getLayerId($);return nt in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function($){var nt=Array.prototype.slice.call(arguments,1),ut,vt;for(ut in this._layers)vt=this._layers[ut],vt[$]&&vt[$].apply(vt,nt);return this},onAdd:function($){this.eachLayer($.addLayer,$)},onRemove:function($){this.eachLayer($.removeLayer,$)},eachLayer:function($,nt){for(var ut in this._layers)$.call(nt,this._layers[ut]);return this},getLayer:function($){return this._layers[$]},getLayers:function(){var $=[];return this.eachLayer($.push,$),$},setZIndex:function($){return this.invoke("setZIndex",$)},getLayerId:function($){return et($)}}),ho=function($,nt){return new oA($,nt)},Zn=oA.extend({addLayer:function($){return this.hasLayer($)?this:($.addEventParent(this),oA.prototype.addLayer.call(this,$),this.fire("layeradd",{layer:$}))},removeLayer:function($){return this.hasLayer($)?($ in this._layers&&($=this._layers[$]),$.removeEventParent(this),oA.prototype.removeLayer.call(this,$),this.fire("layerremove",{layer:$})):this},setStyle:function($){return this.invoke("setStyle",$)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var $=new Nr;for(var nt in this._layers){var ut=this._layers[nt];$.extend(ut.getBounds?ut.getBounds():ut.getLatLng())}return $}}),co=function($,nt){return new Zn($,nt)},lA=qt.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function($){ct(this,$)},createIcon:function($){return this._createIcon("icon",$)},createShadow:function($){return this._createIcon("shadow",$)},_createIcon:function($,nt){var ut=this._getIconUrl($);if(!ut){if($==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var vt=this._createImg(ut,nt&&nt.tagName==="IMG"?nt:null);return this._setIconStyles(vt,$),(this.options.crossOrigin||this.options.crossOrigin==="")&&(vt.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),vt},_setIconStyles:function($,nt){var ut=this.options,vt=ut[nt+"Size"];typeof vt=="number"&&(vt=[vt,vt]);var Ft=Ar(vt),Ot=Ar(nt==="shadow"&&ut.shadowAnchor||ut.iconAnchor||Ft&&Ft.divideBy(2,!0));$.className="leaflet-marker-"+nt+" "+(ut.className||""),Ot&&($.style.marginLeft=-Ot.x+"px",$.style.marginTop=-Ot.y+"px"),Ft&&($.style.width=Ft.x+"px",$.style.height=Ft.y+"px")},_createImg:function($,nt){return nt=nt||document.createElement("img"),nt.src=$,nt},_getIconUrl:function($){return Mt.retina&&this.options[$+"RetinaUrl"]||this.options[$+"Url"]}});function fo($){return new lA($)}var wA=lA.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function($){return typeof wA.imagePath!="string"&&(wA.imagePath=this._detectIconPath()),(this.options.imagePath||wA.imagePath)+lA.prototype._getIconUrl.call(this,$)},_stripUrl:function($){var nt=function(ut,vt,Ft){var Ot=vt.exec(ut);return Ot&&Ot[Ft]};return $=nt($,/^url\((['"])?(.+)\1\)$/,2),$&&nt($,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var $=gn("div","leaflet-default-icon-path",document.body),nt=bn($,"background-image")||bn($,"backgroundImage");if(document.body.removeChild($),nt=this._stripUrl(nt),nt)return nt;var ut=document.querySelector('link[href$="leaflet.css"]');return ut?ut.href.substring(0,ut.href.length-11-1):""}}),Us=Xn.extend({initialize:function($){this._marker=$},addHooks:function(){var $=this._marker._icon;this._draggable||(this._draggable=new tA($,$,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),cn($,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&vn(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function($){var nt=this._marker,ut=nt._map,vt=this._marker.options.autoPanSpeed,Ft=this._marker.options.autoPanPadding,Ot=jn(nt._icon),er=ut.getPixelBounds(),gr=ut.getPixelOrigin(),Cr=dr(er.min._subtract(gr).add(Ft),er.max._subtract(gr).subtract(Ft));if(!Cr.contains(Ot)){var Lr=Ar((Math.max(Cr.max.x,Ot.x)-Cr.max.x)/(er.max.x-Cr.max.x)-(Math.min(Cr.min.x,Ot.x)-Cr.min.x)/(er.min.x-Cr.min.x),(Math.max(Cr.max.y,Ot.y)-Cr.max.y)/(er.max.y-Cr.max.y)-(Math.min(Cr.min.y,Ot.y)-Cr.min.y)/(er.min.y-Cr.min.y)).multiplyBy(vt);ut.panBy(Lr,{animate:!1}),this._draggable._newPos._add(Lr),this._draggable._startPos._add(Lr),Tn(nt._icon,this._draggable._newPos),this._onDrag($),this._panRequest=Nt(this._adjustPan.bind(this,$))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function($){this._marker.options.autoPan&&(Wt(this._panRequest),this._panRequest=Nt(this._adjustPan.bind(this,$)))},_onDrag:function($){var nt=this._marker,ut=nt._shadow,vt=jn(nt._icon),Ft=nt._map.layerPointToLatLng(vt);ut&&Tn(ut,vt),nt._latlng=Ft,$.latlng=Ft,$.oldLatLng=this._oldLatLng,nt.fire("move",$).fire("drag",$)},_onDragEnd:function($){Wt(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",$)}}),UA=Gn.extend({options:{icon:new wA,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function($,nt){ct(this,nt),this._latlng=hr($)},onAdd:function($){this._zoomAnimated=this._zoomAnimated&&$.options.markerZoomAnimation,this._zoomAnimated&&$.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function($){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&$.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function($){var nt=this._latlng;return this._latlng=hr($),this.update(),this.fire("move",{oldLatLng:nt,latlng:this._latlng})},setZIndexOffset:function($){return this.options.zIndexOffset=$,this.update()},getIcon:function(){return this.options.icon},setIcon:function($){return this.options.icon=$,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var $=this._map.latLngToLayerPoint(this._latlng).round();this._setPos($)}return this},_initIcon:function(){var $=this.options,nt="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),ut=$.icon.createIcon(this._icon),vt=!1;ut!==this._icon&&(this._icon&&this._removeIcon(),vt=!0,$.title&&(ut.title=$.title),ut.tagName==="IMG"&&(ut.alt=$.alt||"")),cn(ut,nt),$.keyboard&&(ut.tabIndex="0",ut.setAttribute("role","button")),this._icon=ut,$.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&mn(ut,"focus",this._panOnFocus,this);var Ft=$.icon.createShadow(this._shadow),Ot=!1;Ft!==this._shadow&&(this._removeShadow(),Ot=!0),Ft&&(cn(Ft,nt),Ft.alt=""),this._shadow=Ft,$.opacity<1&&this._updateOpacity(),vt&&this.getPane().appendChild(this._icon),this._initInteraction(),Ft&&Ot&&this.getPane($.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Un(this._icon,"focus",this._panOnFocus,this),Bn(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Bn(this._shadow),this._shadow=null},_setPos:function($){this._icon&&Tn(this._icon,$),this._shadow&&Tn(this._shadow,$),this._zIndex=$.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function($){this._icon&&(this._icon.style.zIndex=this._zIndex+$)},_animateZoom:function($){var nt=this._map._latLngToNewLayerPoint(this._latlng,$.zoom,$.center).round();this._setPos(nt)},_initInteraction:function(){if(this.options.interactive&&(cn(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Us)){var $=this.options.draggable;this.dragging&&($=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Us(this),$&&this.dragging.enable()}},setOpacity:function($){return this.options.opacity=$,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var $=this.options.opacity;this._icon&&Nn(this._icon,$),this._shadow&&Nn(this._shadow,$)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var $=this._map;if($){var nt=this.options.icon.options,ut=nt.iconSize?Ar(nt.iconSize):Ar(0,0),vt=nt.iconAnchor?Ar(nt.iconAnchor):Ar(0,0);$.panInside(this._latlng,{paddingTopLeft:vt,paddingBottomRight:ut.subtract(vt)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function go($,nt){return new UA($,nt)}var eA=Gn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function($){this._renderer=$.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function($){return ct(this,$),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&$&&Object.prototype.hasOwnProperty.call($,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),QA=eA.extend({options:{fill:!0,radius:10},initialize:function($,nt){ct(this,nt),this._latlng=hr($),this._radius=this.options.radius},setLatLng:function($){var nt=this._latlng;return this._latlng=hr($),this.redraw(),this.fire("move",{oldLatLng:nt,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function($){return this.options.radius=this._radius=$,this.redraw()},getRadius:function(){return this._radius},setStyle:function($){var nt=$&&$.radius||this._radius;return eA.prototype.setStyle.call(this,$),this.setRadius(nt),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var $=this._radius,nt=this._radiusY||$,ut=this._clickTolerance(),vt=[$+ut,nt+ut];this._pxBounds=new mr(this._point.subtract(vt),this._point.add(vt))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function($){return $.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function po($,nt){return new QA($,nt)}var is=QA.extend({initialize:function($,nt,ut){if(typeof nt=="number"&&(nt=g({},ut,{radius:nt})),ct(this,nt),this._latlng=hr($),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function($){return this._mRadius=$,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var $=[this._radius,this._radiusY||this._radius];return new Nr(this._map.layerPointToLatLng(this._point.subtract($)),this._map.layerPointToLatLng(this._point.add($)))},setStyle:eA.prototype.setStyle,_project:function(){var $=this._latlng.lng,nt=this._latlng.lat,ut=this._map,vt=ut.options.crs;if(vt.distance===Qr.distance){var Ft=Math.PI/180,Ot=this._mRadius/Qr.R/Ft,er=ut.project([nt+Ot,$]),gr=ut.project([nt-Ot,$]),Cr=er.add(gr).divideBy(2),Lr=ut.unproject(Cr).lat,nn=Math.acos((Math.cos(Ot*Ft)-Math.sin(nt*Ft)*Math.sin(Lr*Ft))/(Math.cos(nt*Ft)*Math.cos(Lr*Ft)))/Ft;(isNaN(nn)||nn===0)&&(nn=Ot/Math.cos(Math.PI/180*nt)),this._point=Cr.subtract(ut.getPixelOrigin()),this._radius=isNaN(nn)?0:Cr.x-ut.project([Lr,$-nn]).x,this._radiusY=Cr.y-er.y}else{var pn=vt.unproject(vt.project(this._latlng).subtract([this._mRadius,0]));this._point=ut.latLngToLayerPoint(this._latlng),this._radius=this._point.x-ut.latLngToLayerPoint(pn).x}this._updateBounds()}});function mo($,nt,ut){return new is($,nt,ut)}var Wn=eA.extend({options:{smoothFactor:1,noClip:!1},initialize:function($,nt){ct(this,nt),this._setLatLngs($)},getLatLngs:function(){return this._latlngs},setLatLngs:function($){return this._setLatLngs($),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function($){for(var nt=1/0,ut=null,vt=_A,Ft,Ot,er=0,gr=this._parts.length;er<gr;er++)for(var Cr=this._parts[er],Lr=1,nn=Cr.length;Lr<nn;Lr++){Ft=Cr[Lr-1],Ot=Cr[Lr];var pn=vt($,Ft,Ot,!0);pn<nt&&(nt=pn,ut=vt($,Ft,Ot))}return ut&&(ut.distance=Math.sqrt(nt)),ut},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ss(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function($,nt){return nt=nt||this._defaultShape(),$=hr($),nt.push($),this._bounds.extend($),this.redraw()},_setLatLngs:function($){this._bounds=new Nr,this._latlngs=this._convertLatLngs($)},_defaultShape:function(){return $n(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function($){for(var nt=[],ut=$n($),vt=0,Ft=$.length;vt<Ft;vt++)ut?(nt[vt]=hr($[vt]),this._bounds.extend(nt[vt])):nt[vt]=this._convertLatLngs($[vt]);return nt},_project:function(){var $=new mr;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,$),this._bounds.isValid()&&$.isValid()&&(this._rawPxBounds=$,this._updateBounds())},_updateBounds:function(){var $=this._clickTolerance(),nt=new jt($,$);this._rawPxBounds&&(this._pxBounds=new mr([this._rawPxBounds.min.subtract(nt),this._rawPxBounds.max.add(nt)]))},_projectLatlngs:function($,nt,ut){var vt=$[0]instanceof nr,Ft=$.length,Ot,er;if(vt){for(er=[],Ot=0;Ot<Ft;Ot++)er[Ot]=this._map.latLngToLayerPoint($[Ot]),ut.extend(er[Ot]);nt.push(er)}else for(Ot=0;Ot<Ft;Ot++)this._projectLatlngs($[Ot],nt,ut)},_clipPoints:function(){var $=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects($))){if(this.options.noClip){this._parts=this._rings;return}var nt=this._parts,ut,vt,Ft,Ot,er,gr,Cr;for(ut=0,Ft=0,Ot=this._rings.length;ut<Ot;ut++)for(Cr=this._rings[ut],vt=0,er=Cr.length;vt<er-1;vt++)gr=bs(Cr[vt],Cr[vt+1],$,vt,!0),gr&&(nt[Ft]=nt[Ft]||[],nt[Ft].push(gr[0]),(gr[1]!==Cr[vt+1]||vt===er-2)&&(nt[Ft].push(gr[1]),Ft++))}},_simplifyPoints:function(){for(var $=this._parts,nt=this.options.smoothFactor,ut=0,vt=$.length;ut<vt;ut++)$[ut]=ys($[ut],nt)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function($,nt){var ut,vt,Ft,Ot,er,gr,Cr=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains($))return!1;for(ut=0,Ot=this._parts.length;ut<Ot;ut++)for(gr=this._parts[ut],vt=0,er=gr.length,Ft=er-1;vt<er;Ft=vt++)if(!(!nt&&vt===0)&&Es($,gr[Ft],gr[vt])<=Cr)return!0;return!1}});function _o($,nt){return new Wn($,nt)}Wn._flat=xs;var uA=Wn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return vs(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function($){var nt=Wn.prototype._convertLatLngs.call(this,$),ut=nt.length;return ut>=2&&nt[0]instanceof nr&&nt[0].equals(nt[ut-1])&&nt.pop(),nt},_setLatLngs:function($){Wn.prototype._setLatLngs.call(this,$),$n(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return $n(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var $=this._renderer._bounds,nt=this.options.weight,ut=new jt(nt,nt);if($=new mr($.min.subtract(ut),$.max.add(ut)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects($))){if(this.options.noClip){this._parts=this._rings;return}for(var vt=0,Ft=this._rings.length,Ot;vt<Ft;vt++)Ot=Bs(this._rings[vt],$,!0),Ot.length&&this._parts.push(Ot)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function($){var nt=!1,ut,vt,Ft,Ot,er,gr,Cr,Lr;if(!this._pxBounds||!this._pxBounds.contains($))return!1;for(Ot=0,Cr=this._parts.length;Ot<Cr;Ot++)for(ut=this._parts[Ot],er=0,Lr=ut.length,gr=Lr-1;er<Lr;gr=er++)vt=ut[er],Ft=ut[gr],vt.y>$.y!=Ft.y>$.y&&$.x<(Ft.x-vt.x)*($.y-vt.y)/(Ft.y-vt.y)+vt.x&&(nt=!nt);return nt||Wn.prototype._containsPoint.call(this,$,!0)}});function wo($,nt){return new uA($,nt)}var Jn=Zn.extend({initialize:function($,nt){ct(this,nt),this._layers={},$&&this.addData($)},addData:function($){var nt=ft($)?$:$.features,ut,vt,Ft;if(nt){for(ut=0,vt=nt.length;ut<vt;ut++)Ft=nt[ut],(Ft.geometries||Ft.geometry||Ft.features||Ft.coordinates)&&this.addData(Ft);return this}var Ot=this.options;if(Ot.filter&&!Ot.filter($))return this;var er=IA($,Ot);return er?(er.feature=RA($),er.defaultOptions=er.options,this.resetStyle(er),Ot.onEachFeature&&Ot.onEachFeature($,er),this.addLayer(er)):this},resetStyle:function($){return $===void 0?this.eachLayer(this.resetStyle,this):($.options=g({},$.defaultOptions),this._setLayerStyle($,this.options.style),this)},setStyle:function($){return this.eachLayer(function(nt){this._setLayerStyle(nt,$)},this)},_setLayerStyle:function($,nt){$.setStyle&&(typeof nt=="function"&&(nt=nt($.feature)),$.setStyle(nt))}});function IA($,nt){var ut=$.type==="Feature"?$.geometry:$,vt=ut?ut.coordinates:null,Ft=[],Ot=nt&&nt.pointToLayer,er=nt&&nt.coordsToLatLng||As,gr,Cr,Lr,nn;if(!vt&&!ut)return null;switch(ut.type){case"Point":return gr=er(vt),Qs(Ot,$,gr,nt);case"MultiPoint":for(Lr=0,nn=vt.length;Lr<nn;Lr++)gr=er(vt[Lr]),Ft.push(Qs(Ot,$,gr,nt));return new Zn(Ft);case"LineString":case"MultiLineString":return Cr=TA(vt,ut.type==="LineString"?0:1,er),new Wn(Cr,nt);case"Polygon":case"MultiPolygon":return Cr=TA(vt,ut.type==="Polygon"?1:2,er),new uA(Cr,nt);case"GeometryCollection":for(Lr=0,nn=ut.geometries.length;Lr<nn;Lr++){var pn=IA({geometry:ut.geometries[Lr],type:"Feature",properties:$.properties},nt);pn&&Ft.push(pn)}return new Zn(Ft);case"FeatureCollection":for(Lr=0,nn=ut.features.length;Lr<nn;Lr++){var wn=IA(ut.features[Lr],nt);wn&&Ft.push(wn)}return new Zn(Ft);default:throw new Error("Invalid GeoJSON object.")}}function Qs($,nt,ut,vt){return $?$(nt,ut):new UA(ut,vt&&vt.markersInheritOptions&&vt)}function As($){return new nr($[1],$[0],$[2])}function TA($,nt,ut){for(var vt=[],Ft=0,Ot=$.length,er;Ft<Ot;Ft++)er=nt?TA($[Ft],nt-1,ut):(ut||As)($[Ft]),vt.push(er);return vt}function ss($,nt){return $=hr($),$.alt!==void 0?[st($.lng,nt),st($.lat,nt),st($.alt,nt)]:[st($.lng,nt),st($.lat,nt)]}function kA($,nt,ut,vt){for(var Ft=[],Ot=0,er=$.length;Ot<er;Ot++)Ft.push(nt?kA($[Ot],$n($[Ot])?0:nt-1,ut,vt):ss($[Ot],vt));return!nt&&ut&&Ft.length>0&&Ft.push(Ft[0].slice()),Ft}function hA($,nt){return $.feature?g({},$.feature,{geometry:nt}):RA(nt)}function RA($){return $.type==="Feature"||$.type==="FeatureCollection"?$:{type:"Feature",properties:{},geometry:$}}var as={toGeoJSON:function($){return hA(this,{type:"Point",coordinates:ss(this.getLatLng(),$)})}};UA.include(as),is.include(as),QA.include(as),Wn.include({toGeoJSON:function($){var nt=!$n(this._latlngs),ut=kA(this._latlngs,nt?1:0,!1,$);return hA(this,{type:(nt?"Multi":"")+"LineString",coordinates:ut})}}),uA.include({toGeoJSON:function($){var nt=!$n(this._latlngs),ut=nt&&!$n(this._latlngs[0]),vt=kA(this._latlngs,ut?2:nt?1:0,!0,$);return nt||(vt=[vt]),hA(this,{type:(ut?"Multi":"")+"Polygon",coordinates:vt})}}),oA.include({toMultiPoint:function($){var nt=[];return this.eachLayer(function(ut){nt.push(ut.toGeoJSON($).geometry.coordinates)}),hA(this,{type:"MultiPoint",coordinates:nt})},toGeoJSON:function($){var nt=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(nt==="MultiPoint")return this.toMultiPoint($);var ut=nt==="GeometryCollection",vt=[];return this.eachLayer(function(Ft){if(Ft.toGeoJSON){var Ot=Ft.toGeoJSON($);if(ut)vt.push(Ot.geometry);else{var er=RA(Ot);er.type==="FeatureCollection"?vt.push.apply(vt,er.features):vt.push(er)}}}),ut?hA(this,{geometries:vt,type:"GeometryCollection"}):{type:"FeatureCollection",features:vt}}});function Is($,nt){return new Jn($,nt)}var Bo=Is,LA=Gn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function($,nt,ut){this._url=$,this._bounds=Ur(nt),ct(this,ut)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(cn(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Bn(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function($){return this.options.opacity=$,this._image&&this._updateOpacity(),this},setStyle:function($){return $.opacity&&this.setOpacity($.opacity),this},bringToFront:function(){return this._map&&Ln(this._image),this},bringToBack:function(){return this._map&&Pn(this._image),this},setUrl:function($){return this._url=$,this._image&&(this._image.src=$),this},setBounds:function($){return this._bounds=Ur($),this._map&&this._reset(),this},getEvents:function(){var $={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&($.zoomanim=this._animateZoom),$},setZIndex:function($){return this.options.zIndex=$,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var $=this._url.tagName==="IMG",nt=this._image=$?this._url:gn("img");if(cn(nt,"leaflet-image-layer"),this._zoomAnimated&&cn(nt,"leaflet-zoom-animated"),this.options.className&&cn(nt,this.options.className),nt.onselectstart=at,nt.onmousemove=at,nt.onload=b(this.fire,this,"load"),nt.onerror=b(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(nt.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),$){this._url=nt.src;return}nt.src=this._url,nt.alt=this.options.alt},_animateZoom:function($){var nt=this._map.getZoomScale($.zoom),ut=this._map._latLngBoundsToNewLayerBounds(this._bounds,$.zoom,$.center).min;qn(this._image,ut,nt)},_reset:function(){var $=this._image,nt=new mr(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),ut=nt.getSize();Tn($,nt.min),$.style.width=ut.x+"px",$.style.height=ut.y+"px"},_updateOpacity:function(){Nn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var $=this.options.errorOverlayUrl;$&&this._url!==$&&(this._url=$,this._image.src=$)},getCenter:function(){return this._bounds.getCenter()}}),vo=function($,nt,ut){return new LA($,nt,ut)},Ts=LA.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var $=this._url.tagName==="VIDEO",nt=this._image=$?this._url:gn("video");if(cn(nt,"leaflet-image-layer"),this._zoomAnimated&&cn(nt,"leaflet-zoom-animated"),this.options.className&&cn(nt,this.options.className),nt.onselectstart=at,nt.onmousemove=at,nt.onloadeddata=b(this.fire,this,"load"),$){for(var ut=nt.getElementsByTagName("source"),vt=[],Ft=0;Ft<ut.length;Ft++)vt.push(ut[Ft].src);this._url=ut.length>0?vt:[nt.src];return}ft(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(nt.style,"objectFit")&&(nt.style.objectFit="fill"),nt.autoplay=!!this.options.autoplay,nt.loop=!!this.options.loop,nt.muted=!!this.options.muted,nt.playsInline=!!this.options.playsInline;for(var Ot=0;Ot<this._url.length;Ot++){var er=gn("source");er.src=this._url[Ot],nt.appendChild(er)}}});function yo($,nt,ut){return new Ts($,nt,ut)}var ks=LA.extend({_initImage:function(){var $=this._image=this._url;cn($,"leaflet-image-layer"),this._zoomAnimated&&cn($,"leaflet-zoom-animated"),this.options.className&&cn($,this.options.className),$.onselectstart=at,$.onmousemove=at}});function Eo($,nt,ut){return new ks($,nt,ut)}var Yn=Gn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function($,nt){$&&($ instanceof nr||ft($))?(this._latlng=hr($),ct(this,nt)):(ct(this,$),this._source=nt),this.options.content&&(this._content=this.options.content)},openOn:function($){return $=arguments.length?$:this._source._map,$.hasLayer(this)||$.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function($){return this._map?this.close():(arguments.length?this._source=$:$=this._source,this._prepareOpen(),this.openOn($._map)),this},onAdd:function($){this._zoomAnimated=$._zoomAnimated,this._container||this._initLayout(),$._fadeAnimated&&Nn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),$._fadeAnimated&&Nn(this._container,1),this.bringToFront(),this.options.interactive&&(cn(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function($){$._fadeAnimated?(Nn(this._container,0),this._removeTimeout=setTimeout(b(Bn,void 0,this._container),200)):Bn(this._container),this.options.interactive&&(vn(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function($){return this._latlng=hr($),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function($){return this._content=$,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var $={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&($.zoomanim=this._animateZoom),$},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Ln(this._container),this},bringToBack:function(){return this._map&&Pn(this._container),this},_prepareOpen:function($){var nt=this._source;if(!nt._map)return!1;if(nt instanceof Zn){nt=null;var ut=this._source._layers;for(var vt in ut)if(ut[vt]._map){nt=ut[vt];break}if(!nt)return!1;this._source=nt}if(!$)if(nt.getCenter)$=nt.getCenter();else if(nt.getLatLng)$=nt.getLatLng();else if(nt.getBounds)$=nt.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng($),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var $=this._contentNode,nt=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof nt=="string")$.innerHTML=nt;else{for(;$.hasChildNodes();)$.removeChild($.firstChild);$.appendChild(nt)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var $=this._map.latLngToLayerPoint(this._latlng),nt=Ar(this.options.offset),ut=this._getAnchor();this._zoomAnimated?Tn(this._container,$.add(ut)):nt=nt.add($).add(ut);var vt=this._containerBottom=-nt.y,Ft=this._containerLeft=-Math.round(this._containerWidth/2)+nt.x;this._container.style.bottom=vt+"px",this._container.style.left=Ft+"px"}},_getAnchor:function(){return[0,0]}});yn.include({_initOverlay:function($,nt,ut,vt){var Ft=nt;return Ft instanceof $||(Ft=new $(vt).setContent(nt)),ut&&Ft.setLatLng(ut),Ft}}),Gn.include({_initOverlay:function($,nt,ut,vt){var Ft=ut;return Ft instanceof $?(ct(Ft,vt),Ft._source=this):(Ft=nt&&!vt?nt:new $(vt,this),Ft.setContent(ut)),Ft}});var MA=Yn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function($){return $=arguments.length?$:this._source._map,!$.hasLayer(this)&&$._popup&&$._popup.options.autoClose&&$.removeLayer($._popup),$._popup=this,Yn.prototype.openOn.call(this,$)},onAdd:function($){Yn.prototype.onAdd.call(this,$),$.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof eA||this._source.on("preclick",iA))},onRemove:function($){Yn.prototype.onRemove.call(this,$),$.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof eA||this._source.off("preclick",iA))},getEvents:function(){var $=Yn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&($.preclick=this.close),this.options.keepInView&&($.moveend=this._adjustPan),$},_initLayout:function(){var $="leaflet-popup",nt=this._container=gn("div",$+" "+(this.options.className||"")+" leaflet-zoom-animated"),ut=this._wrapper=gn("div",$+"-content-wrapper",nt);if(this._contentNode=gn("div",$+"-content",ut),pA(nt),jA(this._contentNode),mn(nt,"contextmenu",iA),this._tipContainer=gn("div",$+"-tip-container",nt),this._tip=gn("div",$+"-tip",this._tipContainer),this.options.closeButton){var vt=this._closeButton=gn("a",$+"-close-button",nt);vt.setAttribute("role","button"),vt.setAttribute("aria-label","Close popup"),vt.href="#close",vt.innerHTML='<span aria-hidden="true">&#215;</span>',mn(vt,"click",function(Ft){Dn(Ft),this.close()},this)}},_updateLayout:function(){var $=this._contentNode,nt=$.style;nt.width="",nt.whiteSpace="nowrap";var ut=$.offsetWidth;ut=Math.min(ut,this.options.maxWidth),ut=Math.max(ut,this.options.minWidth),nt.width=ut+1+"px",nt.whiteSpace="",nt.height="";var vt=$.offsetHeight,Ft=this.options.maxHeight,Ot="leaflet-popup-scrolled";Ft&&vt>Ft?(nt.height=Ft+"px",cn($,Ot)):vn($,Ot),this._containerWidth=this._container.offsetWidth},_animateZoom:function($){var nt=this._map._latLngToNewLayerPoint(this._latlng,$.zoom,$.center),ut=this._getAnchor();Tn(this._container,nt.add(ut))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var $=this._map,nt=parseInt(bn(this._container,"marginBottom"),10)||0,ut=this._container.offsetHeight+nt,vt=this._containerWidth,Ft=new jt(this._containerLeft,-ut-this._containerBottom);Ft._add(jn(this._container));var Ot=$.layerPointToContainerPoint(Ft),er=Ar(this.options.autoPanPadding),gr=Ar(this.options.autoPanPaddingTopLeft||er),Cr=Ar(this.options.autoPanPaddingBottomRight||er),Lr=$.getSize(),nn=0,pn=0;Ot.x+vt+Cr.x>Lr.x&&(nn=Ot.x+vt-Lr.x+Cr.x),Ot.x-nn-gr.x<0&&(nn=Ot.x-gr.x),Ot.y+ut+Cr.y>Lr.y&&(pn=Ot.y+ut-Lr.y+Cr.y),Ot.y-pn-gr.y<0&&(pn=Ot.y-gr.y),(nn||pn)&&(this.options.keepInView&&(this._autopanning=!0),$.fire("autopanstart").panBy([nn,pn]))}},_getAnchor:function(){return Ar(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Co=function($,nt){return new MA($,nt)};yn.mergeOptions({closePopupOnClick:!0}),yn.include({openPopup:function($,nt,ut){return this._initOverlay(MA,$,nt,ut).openOn(this),this},closePopup:function($){return $=arguments.length?$:this._popup,$&&$.close(),this}}),Gn.include({bindPopup:function($,nt){return this._popup=this._initOverlay(MA,this._popup,$,nt),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function($){return this._popup&&(this instanceof Zn||(this._popup._source=this),this._popup._prepareOpen($||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function($){return this._popup&&this._popup.setContent($),this},getPopup:function(){return this._popup},_openPopup:function($){if(!(!this._popup||!this._map)){AA($);var nt=$.layer||$.target;if(this._popup._source===nt&&!(nt instanceof eA)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup($.latlng);return}this._popup._source=nt,this.openPopup($.latlng)}},_movePopup:function($){this._popup.setLatLng($.latlng)},_onKeyPress:function($){$.originalEvent.keyCode===13&&this._openPopup($)}});var DA=Yn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function($){Yn.prototype.onAdd.call(this,$),this.setOpacity(this.options.opacity),$.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function($){Yn.prototype.onRemove.call(this,$),$.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var $=Yn.prototype.getEvents.call(this);return this.options.permanent||($.preclick=this.close),$},_initLayout:function(){var $="leaflet-tooltip",nt=$+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=gn("div",nt),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+et(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function($){var nt,ut,vt=this._map,Ft=this._container,Ot=vt.latLngToContainerPoint(vt.getCenter()),er=vt.layerPointToContainerPoint($),gr=this.options.direction,Cr=Ft.offsetWidth,Lr=Ft.offsetHeight,nn=Ar(this.options.offset),pn=this._getAnchor();gr==="top"?(nt=Cr/2,ut=Lr):gr==="bottom"?(nt=Cr/2,ut=0):gr==="center"?(nt=Cr/2,ut=Lr/2):gr==="right"?(nt=0,ut=Lr/2):gr==="left"?(nt=Cr,ut=Lr/2):er.x<Ot.x?(gr="right",nt=0,ut=Lr/2):(gr="left",nt=Cr+(nn.x+pn.x)*2,ut=Lr/2),$=$.subtract(Ar(nt,ut,!0)).add(nn).add(pn),vn(Ft,"leaflet-tooltip-right"),vn(Ft,"leaflet-tooltip-left"),vn(Ft,"leaflet-tooltip-top"),vn(Ft,"leaflet-tooltip-bottom"),cn(Ft,"leaflet-tooltip-"+gr),Tn(Ft,$)},_updatePosition:function(){var $=this._map.latLngToLayerPoint(this._latlng);this._setPosition($)},setOpacity:function($){this.options.opacity=$,this._container&&Nn(this._container,$)},_animateZoom:function($){var nt=this._map._latLngToNewLayerPoint(this._latlng,$.zoom,$.center);this._setPosition(nt)},_getAnchor:function(){return Ar(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),bo=function($,nt){return new DA($,nt)};yn.include({openTooltip:function($,nt,ut){return this._initOverlay(DA,$,nt,ut).openOn(this),this},closeTooltip:function($){return $.close(),this}}),Gn.include({bindTooltip:function($,nt){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(DA,this._tooltip,$,nt),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function($){if(!(!$&&this._tooltipHandlersAdded)){var nt=$?"off":"on",ut={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?ut.add=this._openTooltip:(ut.mouseover=this._openTooltip,ut.mouseout=this.closeTooltip,ut.click=this._openTooltip,this._map?this._addFocusListeners():ut.add=this._addFocusListeners),this._tooltip.options.sticky&&(ut.mousemove=this._moveTooltip),this[nt](ut),this._tooltipHandlersAdded=!$}},openTooltip:function($){return this._tooltip&&(this instanceof Zn||(this._tooltip._source=this),this._tooltip._prepareOpen($)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function($){return this._tooltip&&this._tooltip.setContent($),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function($){var nt=typeof $.getElement=="function"&&$.getElement();nt&&(mn(nt,"focus",function(){this._tooltip._source=$,this.openTooltip()},this),mn(nt,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function($){var nt=typeof $.getElement=="function"&&$.getElement();nt&&nt.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function($){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var nt=this;this._map.once("moveend",function(){nt._openOnceFlag=!1,nt._openTooltip($)});return}this._tooltip._source=$.layer||$.target,this.openTooltip(this._tooltip.options.sticky?$.latlng:void 0)}},_moveTooltip:function($){var nt=$.latlng,ut,vt;this._tooltip.options.sticky&&$.originalEvent&&(ut=this._map.mouseEventToContainerPoint($.originalEvent),vt=this._map.containerPointToLayerPoint(ut),nt=this._map.layerPointToLatLng(vt)),this._tooltip.setLatLng(nt)}});var Rs=lA.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function($){var nt=$&&$.tagName==="DIV"?$:document.createElement("div"),ut=this.options;if(ut.html instanceof Element?(Qn(nt),nt.appendChild(ut.html)):nt.innerHTML=ut.html!==!1?ut.html:"",ut.bgPos){var vt=Ar(ut.bgPos);nt.style.backgroundPosition=-vt.x+"px "+-vt.y+"px"}return this._setIconStyles(nt,"icon"),nt},createShadow:function(){return null}});function xo($){return new Rs($)}lA.Default=wA;var vA=Gn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Mt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function($){ct(this,$)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function($){$._addZoomLimit(this)},onRemove:function($){this._removeAllTiles(),Bn(this._container),$._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Ln(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Pn(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function($){return this.options.opacity=$,this._updateOpacity(),this},setZIndex:function($){return this.options.zIndex=$,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var $=this._clampZoom(this._map.getZoom());$!==this._tileZoom&&(this._tileZoom=$,this._updateLevels()),this._update()}return this},getEvents:function(){var $={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=tt(this._onMoveEnd,this.options.updateInterval,this)),$.move=this._onMove),this._zoomAnimated&&($.zoomanim=this._animateZoom),$},createTile:function(){return document.createElement("div")},getTileSize:function(){var $=this.options.tileSize;return $ instanceof jt?$:new jt($,$)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function($){for(var nt=this.getPane().children,ut=-$(-1/0,1/0),vt=0,Ft=nt.length,Ot;vt<Ft;vt++)Ot=nt[vt].style.zIndex,nt[vt]!==this._container&&Ot&&(ut=$(ut,+Ot));isFinite(ut)&&(this.options.zIndex=ut+$(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Mt.ielt9){Nn(this._container,this.options.opacity);var $=+new Date,nt=!1,ut=!1;for(var vt in this._tiles){var Ft=this._tiles[vt];if(!(!Ft.current||!Ft.loaded)){var Ot=Math.min(1,($-Ft.loaded)/200);Nn(Ft.el,Ot),Ot<1?nt=!0:(Ft.active?ut=!0:this._onOpaqueTile(Ft),Ft.active=!0)}}ut&&!this._noPrune&&this._pruneTiles(),nt&&(Wt(this._fadeFrame),this._fadeFrame=Nt(this._updateOpacity,this))}},_onOpaqueTile:at,_initContainer:function(){this._container||(this._container=gn("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var $=this._tileZoom,nt=this.options.maxZoom;if($!==void 0){for(var ut in this._levels)ut=Number(ut),this._levels[ut].el.children.length||ut===$?(this._levels[ut].el.style.zIndex=nt-Math.abs($-ut),this._onUpdateLevel(ut)):(Bn(this._levels[ut].el),this._removeTilesAtZoom(ut),this._onRemoveLevel(ut),delete this._levels[ut]);var vt=this._levels[$],Ft=this._map;return vt||(vt=this._levels[$]={},vt.el=gn("div","leaflet-tile-container leaflet-zoom-animated",this._container),vt.el.style.zIndex=nt,vt.origin=Ft.project(Ft.unproject(Ft.getPixelOrigin()),$).round(),vt.zoom=$,this._setZoomTransform(vt,Ft.getCenter(),Ft.getZoom()),at(vt.el.offsetWidth),this._onCreateLevel(vt)),this._level=vt,vt}},_onUpdateLevel:at,_onRemoveLevel:at,_onCreateLevel:at,_pruneTiles:function(){if(this._map){var $,nt,ut=this._map.getZoom();if(ut>this.options.maxZoom||ut<this.options.minZoom){this._removeAllTiles();return}for($ in this._tiles)nt=this._tiles[$],nt.retain=nt.current;for($ in this._tiles)if(nt=this._tiles[$],nt.current&&!nt.active){var vt=nt.coords;this._retainParent(vt.x,vt.y,vt.z,vt.z-5)||this._retainChildren(vt.x,vt.y,vt.z,vt.z+2)}for($ in this._tiles)this._tiles[$].retain||this._removeTile($)}},_removeTilesAtZoom:function($){for(var nt in this._tiles)this._tiles[nt].coords.z===$&&this._removeTile(nt)},_removeAllTiles:function(){for(var $ in this._tiles)this._removeTile($)},_invalidateAll:function(){for(var $ in this._levels)Bn(this._levels[$].el),this._onRemoveLevel(Number($)),delete this._levels[$];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function($,nt,ut,vt){var Ft=Math.floor($/2),Ot=Math.floor(nt/2),er=ut-1,gr=new jt(+Ft,+Ot);gr.z=+er;var Cr=this._tileCoordsToKey(gr),Lr=this._tiles[Cr];return Lr&&Lr.active?(Lr.retain=!0,!0):(Lr&&Lr.loaded&&(Lr.retain=!0),er>vt?this._retainParent(Ft,Ot,er,vt):!1)},_retainChildren:function($,nt,ut,vt){for(var Ft=2*$;Ft<2*$+2;Ft++)for(var Ot=2*nt;Ot<2*nt+2;Ot++){var er=new jt(Ft,Ot);er.z=ut+1;var gr=this._tileCoordsToKey(er),Cr=this._tiles[gr];if(Cr&&Cr.active){Cr.retain=!0;continue}else Cr&&Cr.loaded&&(Cr.retain=!0);ut+1<vt&&this._retainChildren(Ft,Ot,ut+1,vt)}},_resetView:function($){var nt=$&&($.pinch||$.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),nt,nt)},_animateZoom:function($){this._setView($.center,$.zoom,!0,$.noUpdate)},_clampZoom:function($){var nt=this.options;return nt.minNativeZoom!==void 0&&$<nt.minNativeZoom?nt.minNativeZoom:nt.maxNativeZoom!==void 0&&nt.maxNativeZoom<$?nt.maxNativeZoom:$},_setView:function($,nt,ut,vt){var Ft=Math.round(nt);this.options.maxZoom!==void 0&&Ft>this.options.maxZoom||this.options.minZoom!==void 0&&Ft<this.options.minZoom?Ft=void 0:Ft=this._clampZoom(Ft);var Ot=this.options.updateWhenZooming&&Ft!==this._tileZoom;(!vt||Ot)&&(this._tileZoom=Ft,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),Ft!==void 0&&this._update($),ut||this._pruneTiles(),this._noPrune=!!ut),this._setZoomTransforms($,nt)},_setZoomTransforms:function($,nt){for(var ut in this._levels)this._setZoomTransform(this._levels[ut],$,nt)},_setZoomTransform:function($,nt,ut){var vt=this._map.getZoomScale(ut,$.zoom),Ft=$.origin.multiplyBy(vt).subtract(this._map._getNewPixelOrigin(nt,ut)).round();Mt.any3d?qn($.el,Ft,vt):Tn($.el,Ft)},_resetGrid:function(){var $=this._map,nt=$.options.crs,ut=this._tileSize=this.getTileSize(),vt=this._tileZoom,Ft=this._map.getPixelWorldBounds(this._tileZoom);Ft&&(this._globalTileRange=this._pxBoundsToTileRange(Ft)),this._wrapX=nt.wrapLng&&!this.options.noWrap&&[Math.floor($.project([0,nt.wrapLng[0]],vt).x/ut.x),Math.ceil($.project([0,nt.wrapLng[1]],vt).x/ut.y)],this._wrapY=nt.wrapLat&&!this.options.noWrap&&[Math.floor($.project([nt.wrapLat[0],0],vt).y/ut.x),Math.ceil($.project([nt.wrapLat[1],0],vt).y/ut.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function($){var nt=this._map,ut=nt._animatingZoom?Math.max(nt._animateToZoom,nt.getZoom()):nt.getZoom(),vt=nt.getZoomScale(ut,this._tileZoom),Ft=nt.project($,this._tileZoom).floor(),Ot=nt.getSize().divideBy(vt*2);return new mr(Ft.subtract(Ot),Ft.add(Ot))},_update:function($){var nt=this._map;if(nt){var ut=this._clampZoom(nt.getZoom());if($===void 0&&($=nt.getCenter()),this._tileZoom!==void 0){var vt=this._getTiledPixelBounds($),Ft=this._pxBoundsToTileRange(vt),Ot=Ft.getCenter(),er=[],gr=this.options.keepBuffer,Cr=new mr(Ft.getBottomLeft().subtract([gr,-gr]),Ft.getTopRight().add([gr,-gr]));if(!(isFinite(Ft.min.x)&&isFinite(Ft.min.y)&&isFinite(Ft.max.x)&&isFinite(Ft.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Lr in this._tiles){var nn=this._tiles[Lr].coords;(nn.z!==this._tileZoom||!Cr.contains(new jt(nn.x,nn.y)))&&(this._tiles[Lr].current=!1)}if(Math.abs(ut-this._tileZoom)>1){this._setView($,ut);return}for(var pn=Ft.min.y;pn<=Ft.max.y;pn++)for(var wn=Ft.min.x;wn<=Ft.max.x;wn++){var Hn=new jt(wn,pn);if(Hn.z=this._tileZoom,!!this._isValidTile(Hn)){var Rn=this._tiles[this._tileCoordsToKey(Hn)];Rn?Rn.current=!0:er.push(Hn)}}if(er.sort(function(On,fA){return On.distanceTo(Ot)-fA.distanceTo(Ot)}),er.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Kn=document.createDocumentFragment();for(wn=0;wn<er.length;wn++)this._addTile(er[wn],Kn);this._level.el.appendChild(Kn)}}}},_isValidTile:function($){var nt=this._map.options.crs;if(!nt.infinite){var ut=this._globalTileRange;if(!nt.wrapLng&&($.x<ut.min.x||$.x>ut.max.x)||!nt.wrapLat&&($.y<ut.min.y||$.y>ut.max.y))return!1}if(!this.options.bounds)return!0;var vt=this._tileCoordsToBounds($);return Ur(this.options.bounds).overlaps(vt)},_keyToBounds:function($){return this._tileCoordsToBounds(this._keyToTileCoords($))},_tileCoordsToNwSe:function($){var nt=this._map,ut=this.getTileSize(),vt=$.scaleBy(ut),Ft=vt.add(ut),Ot=nt.unproject(vt,$.z),er=nt.unproject(Ft,$.z);return[Ot,er]},_tileCoordsToBounds:function($){var nt=this._tileCoordsToNwSe($),ut=new Nr(nt[0],nt[1]);return this.options.noWrap||(ut=this._map.wrapLatLngBounds(ut)),ut},_tileCoordsToKey:function($){return $.x+":"+$.y+":"+$.z},_keyToTileCoords:function($){var nt=$.split(":"),ut=new jt(+nt[0],+nt[1]);return ut.z=+nt[2],ut},_removeTile:function($){var nt=this._tiles[$];nt&&(Bn(nt.el),delete this._tiles[$],this.fire("tileunload",{tile:nt.el,coords:this._keyToTileCoords($)}))},_initTile:function($){cn($,"leaflet-tile");var nt=this.getTileSize();$.style.width=nt.x+"px",$.style.height=nt.y+"px",$.onselectstart=at,$.onmousemove=at,Mt.ielt9&&this.options.opacity<1&&Nn($,this.options.opacity)},_addTile:function($,nt){var ut=this._getTilePos($),vt=this._tileCoordsToKey($),Ft=this.createTile(this._wrapCoords($),b(this._tileReady,this,$));this._initTile(Ft),this.createTile.length<2&&Nt(b(this._tileReady,this,$,null,Ft)),Tn(Ft,ut),this._tiles[vt]={el:Ft,coords:$,current:!0},nt.appendChild(Ft),this.fire("tileloadstart",{tile:Ft,coords:$})},_tileReady:function($,nt,ut){nt&&this.fire("tileerror",{error:nt,tile:ut,coords:$});var vt=this._tileCoordsToKey($);ut=this._tiles[vt],ut&&(ut.loaded=+new Date,this._map._fadeAnimated?(Nn(ut.el,0),Wt(this._fadeFrame),this._fadeFrame=Nt(this._updateOpacity,this)):(ut.active=!0,this._pruneTiles()),nt||(cn(ut.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:ut.el,coords:$})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Mt.ielt9||!this._map._fadeAnimated?Nt(this._pruneTiles,this):setTimeout(b(this._pruneTiles,this),250)))},_getTilePos:function($){return $.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function($){var nt=new jt(this._wrapX?rt($.x,this._wrapX):$.x,this._wrapY?rt($.y,this._wrapY):$.y);return nt.z=$.z,nt},_pxBoundsToTileRange:function($){var nt=this.getTileSize();return new mr($.min.unscaleBy(nt).floor(),$.max.unscaleBy(nt).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var $ in this._tiles)if(!this._tiles[$].loaded)return!1;return!0}});function So($){return new vA($)}var cA=vA.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function($,nt){this._url=$,nt=ct(this,nt),nt.detectRetina&&Mt.retina&&nt.maxZoom>0?(nt.tileSize=Math.floor(nt.tileSize/2),nt.zoomReverse?(nt.zoomOffset--,nt.minZoom=Math.min(nt.maxZoom,nt.minZoom+1)):(nt.zoomOffset++,nt.maxZoom=Math.max(nt.minZoom,nt.maxZoom-1)),nt.minZoom=Math.max(0,nt.minZoom)):nt.zoomReverse?nt.minZoom=Math.min(nt.maxZoom,nt.minZoom):nt.maxZoom=Math.max(nt.minZoom,nt.maxZoom),typeof nt.subdomains=="string"&&(nt.subdomains=nt.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function($,nt){return this._url===$&&nt===void 0&&(nt=!0),this._url=$,nt||this.redraw(),this},createTile:function($,nt){var ut=document.createElement("img");return mn(ut,"load",b(this._tileOnLoad,this,nt,ut)),mn(ut,"error",b(this._tileOnError,this,nt,ut)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(ut.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(ut.referrerPolicy=this.options.referrerPolicy),ut.alt="",ut.src=this.getTileUrl($),ut},getTileUrl:function($){var nt={r:Mt.retina?"@2x":"",s:this._getSubdomain($),x:$.x,y:$.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var ut=this._globalTileRange.max.y-$.y;this.options.tms&&(nt.y=ut),nt["-y"]=ut}return wt(this._url,g(nt,this.options))},_tileOnLoad:function($,nt){Mt.ielt9?setTimeout(b($,this,null,nt),0):$(null,nt)},_tileOnError:function($,nt,ut){var vt=this.options.errorTileUrl;vt&&nt.getAttribute("src")!==vt&&(nt.src=vt),$(ut,nt)},_onTileRemove:function($){$.tile.onload=null},_getZoomForUrl:function(){var $=this._tileZoom,nt=this.options.maxZoom,ut=this.options.zoomReverse,vt=this.options.zoomOffset;return ut&&($=nt-$),$+vt},_getSubdomain:function($){var nt=Math.abs($.x+$.y)%this.options.subdomains.length;return this.options.subdomains[nt]},_abortLoading:function(){var $,nt;for($ in this._tiles)if(this._tiles[$].coords.z!==this._tileZoom&&(nt=this._tiles[$].el,nt.onload=at,nt.onerror=at,!nt.complete)){nt.src=xt;var ut=this._tiles[$].coords;Bn(nt),delete this._tiles[$],this.fire("tileabort",{tile:nt,coords:ut})}},_removeTile:function($){var nt=this._tiles[$];if(nt)return nt.el.setAttribute("src",xt),vA.prototype._removeTile.call(this,$)},_tileReady:function($,nt,ut){if(!(!this._map||ut&&ut.getAttribute("src")===xt))return vA.prototype._tileReady.call(this,$,nt,ut)}});function Ls($,nt){return new cA($,nt)}var Ms=cA.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function($,nt){this._url=$;var ut=g({},this.defaultWmsParams);for(var vt in nt)vt in this.options||(ut[vt]=nt[vt]);nt=ct(this,nt);var Ft=nt.detectRetina&&Mt.retina?2:1,Ot=this.getTileSize();ut.width=Ot.x*Ft,ut.height=Ot.y*Ft,this.wmsParams=ut},onAdd:function($){this._crs=this.options.crs||$.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var nt=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[nt]=this._crs.code,cA.prototype.onAdd.call(this,$)},getTileUrl:function($){var nt=this._tileCoordsToNwSe($),ut=this._crs,vt=dr(ut.project(nt[0]),ut.project(nt[1])),Ft=vt.min,Ot=vt.max,er=(this._wmsVersion>=1.3&&this._crs===Fs?[Ft.y,Ft.x,Ot.y,Ot.x]:[Ft.x,Ft.y,Ot.x,Ot.y]).join(","),gr=cA.prototype.getTileUrl.call(this,$);return gr+_t(this.wmsParams,gr,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+er},setParams:function($,nt){return g(this.wmsParams,$),nt||this.redraw(),this}});function Fo($,nt){return new Ms($,nt)}cA.WMS=Ms,Ls.wms=Fo;var _i=Gn.extend({options:{padding:.1},initialize:function($){ct(this,$),et(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),cn(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var $={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&($.zoomanim=this._onAnimZoom),$},_onAnimZoom:function($){this._updateTransform($.center,$.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function($,nt){var ut=this._map.getZoomScale(nt,this._zoom),vt=this._map.getSize().multiplyBy(.5+this.options.padding),Ft=this._map.project(this._center,nt),Ot=vt.multiplyBy(-ut).add(Ft).subtract(this._map._getNewPixelOrigin($,nt));Mt.any3d?qn(this._container,Ot,ut):Tn(this._container,Ot)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var $ in this._layers)this._layers[$]._reset()},_onZoomEnd:function(){for(var $ in this._layers)this._layers[$]._project()},_updatePaths:function(){for(var $ in this._layers)this._layers[$]._update()},_update:function(){var $=this.options.padding,nt=this._map.getSize(),ut=this._map.containerPointToLayerPoint(nt.multiplyBy(-$)).round();this._bounds=new mr(ut,ut.add(nt.multiplyBy(1+$*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Ds=_i.extend({options:{tolerance:0},getEvents:function(){var $=_i.prototype.getEvents.call(this);return $.viewprereset=this._onViewPreReset,$},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){_i.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var $=this._container=document.createElement("canvas");mn($,"mousemove",this._onMouseMove,this),mn($,"click dblclick mousedown mouseup contextmenu",this._onClick,this),mn($,"mouseout",this._handleMouseOut,this),$._leaflet_disable_events=!0,this._ctx=$.getContext("2d")},_destroyContainer:function(){Wt(this._redrawRequest),delete this._ctx,Bn(this._container),Un(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var $;this._redrawBounds=null;for(var nt in this._layers)$=this._layers[nt],$._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){_i.prototype._update.call(this);var $=this._bounds,nt=this._container,ut=$.getSize(),vt=Mt.retina?2:1;Tn(nt,$.min),nt.width=vt*ut.x,nt.height=vt*ut.y,nt.style.width=ut.x+"px",nt.style.height=ut.y+"px",Mt.retina&&this._ctx.scale(2,2),this._ctx.translate(-$.min.x,-$.min.y),this.fire("update")}},_reset:function(){_i.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function($){this._updateDashArray($),this._layers[et($)]=$;var nt=$._order={layer:$,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=nt),this._drawLast=nt,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function($){this._requestRedraw($)},_removePath:function($){var nt=$._order,ut=nt.next,vt=nt.prev;ut?ut.prev=vt:this._drawLast=vt,vt?vt.next=ut:this._drawFirst=ut,delete $._order,delete this._layers[et($)],this._requestRedraw($)},_updatePath:function($){this._extendRedrawBounds($),$._project(),$._update(),this._requestRedraw($)},_updateStyle:function($){this._updateDashArray($),this._requestRedraw($)},_updateDashArray:function($){if(typeof $.options.dashArray=="string"){var nt=$.options.dashArray.split(/[, ]+/),ut=[],vt,Ft;for(Ft=0;Ft<nt.length;Ft++){if(vt=Number(nt[Ft]),isNaN(vt))return;ut.push(vt)}$.options._dashArray=ut}else $.options._dashArray=$.options.dashArray},_requestRedraw:function($){this._map&&(this._extendRedrawBounds($),this._redrawRequest=this._redrawRequest||Nt(this._redraw,this))},_extendRedrawBounds:function($){if($._pxBounds){var nt=($.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new mr,this._redrawBounds.extend($._pxBounds.min.subtract([nt,nt])),this._redrawBounds.extend($._pxBounds.max.add([nt,nt]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var $=this._redrawBounds;if($){var nt=$.getSize();this._ctx.clearRect($.min.x,$.min.y,nt.x,nt.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var $,nt=this._redrawBounds;if(this._ctx.save(),nt){var ut=nt.getSize();this._ctx.beginPath(),this._ctx.rect(nt.min.x,nt.min.y,ut.x,ut.y),this._ctx.clip()}this._drawing=!0;for(var vt=this._drawFirst;vt;vt=vt.next)$=vt.layer,(!nt||$._pxBounds&&$._pxBounds.intersects(nt))&&$._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function($,nt){if(this._drawing){var ut,vt,Ft,Ot,er=$._parts,gr=er.length,Cr=this._ctx;if(gr){for(Cr.beginPath(),ut=0;ut<gr;ut++){for(vt=0,Ft=er[ut].length;vt<Ft;vt++)Ot=er[ut][vt],Cr[vt?"lineTo":"moveTo"](Ot.x,Ot.y);nt&&Cr.closePath()}this._fillStroke(Cr,$)}}},_updateCircle:function($){if(!(!this._drawing||$._empty())){var nt=$._point,ut=this._ctx,vt=Math.max(Math.round($._radius),1),Ft=(Math.max(Math.round($._radiusY),1)||vt)/vt;Ft!==1&&(ut.save(),ut.scale(1,Ft)),ut.beginPath(),ut.arc(nt.x,nt.y/Ft,vt,0,Math.PI*2,!1),Ft!==1&&ut.restore(),this._fillStroke(ut,$)}},_fillStroke:function($,nt){var ut=nt.options;ut.fill&&($.globalAlpha=ut.fillOpacity,$.fillStyle=ut.fillColor||ut.color,$.fill(ut.fillRule||"evenodd")),ut.stroke&&ut.weight!==0&&($.setLineDash&&$.setLineDash(nt.options&&nt.options._dashArray||[]),$.globalAlpha=ut.opacity,$.lineWidth=ut.weight,$.strokeStyle=ut.color,$.lineCap=ut.lineCap,$.lineJoin=ut.lineJoin,$.stroke())},_onClick:function($){for(var nt=this._map.mouseEventToLayerPoint($),ut,vt,Ft=this._drawFirst;Ft;Ft=Ft.next)ut=Ft.layer,ut.options.interactive&&ut._containsPoint(nt)&&(!($.type==="click"||$.type==="preclick")||!this._map._draggableMoved(ut))&&(vt=ut);this._fireEvent(vt?[vt]:!1,$)},_onMouseMove:function($){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var nt=this._map.mouseEventToLayerPoint($);this._handleMouseHover($,nt)}},_handleMouseOut:function($){var nt=this._hoveredLayer;nt&&(vn(this._container,"leaflet-interactive"),this._fireEvent([nt],$,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function($,nt){if(!this._mouseHoverThrottled){for(var ut,vt,Ft=this._drawFirst;Ft;Ft=Ft.next)ut=Ft.layer,ut.options.interactive&&ut._containsPoint(nt)&&(vt=ut);vt!==this._hoveredLayer&&(this._handleMouseOut($),vt&&(cn(this._container,"leaflet-interactive"),this._fireEvent([vt],$,"mouseover"),this._hoveredLayer=vt)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,$),this._mouseHoverThrottled=!0,setTimeout(b(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function($,nt,ut){this._map._fireDOMEvent(nt,ut||nt.type,$)},_bringToFront:function($){var nt=$._order;if(nt){var ut=nt.next,vt=nt.prev;if(ut)ut.prev=vt;else return;vt?vt.next=ut:ut&&(this._drawFirst=ut),nt.prev=this._drawLast,this._drawLast.next=nt,nt.next=null,this._drawLast=nt,this._requestRedraw($)}},_bringToBack:function($){var nt=$._order;if(nt){var ut=nt.next,vt=nt.prev;if(vt)vt.next=ut;else return;ut?ut.prev=vt:vt&&(this._drawLast=vt),nt.prev=null,nt.next=this._drawFirst,this._drawFirst.prev=nt,this._drawFirst=nt,this._requestRedraw($)}}});function Ps($){return Mt.canvas?new Ds($):null}var yA=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function($){return document.createElement("<lvml:"+$+' class="lvml">')}}catch{}return function($){return document.createElement("<"+$+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Uo={_initContainer:function(){this._container=gn("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(_i.prototype._update.call(this),this.fire("update"))},_initPath:function($){var nt=$._container=yA("shape");cn(nt,"leaflet-vml-shape "+(this.options.className||"")),nt.coordsize="1 1",$._path=yA("path"),nt.appendChild($._path),this._updateStyle($),this._layers[et($)]=$},_addPath:function($){var nt=$._container;this._container.appendChild(nt),$.options.interactive&&$.addInteractiveTarget(nt)},_removePath:function($){var nt=$._container;Bn(nt),$.removeInteractiveTarget(nt),delete this._layers[et($)]},_updateStyle:function($){var nt=$._stroke,ut=$._fill,vt=$.options,Ft=$._container;Ft.stroked=!!vt.stroke,Ft.filled=!!vt.fill,vt.stroke?(nt||(nt=$._stroke=yA("stroke")),Ft.appendChild(nt),nt.weight=vt.weight+"px",nt.color=vt.color,nt.opacity=vt.opacity,vt.dashArray?nt.dashStyle=ft(vt.dashArray)?vt.dashArray.join(" "):vt.dashArray.replace(/( *, *)/g," "):nt.dashStyle="",nt.endcap=vt.lineCap.replace("butt","flat"),nt.joinstyle=vt.lineJoin):nt&&(Ft.removeChild(nt),$._stroke=null),vt.fill?(ut||(ut=$._fill=yA("fill")),Ft.appendChild(ut),ut.color=vt.fillColor||vt.color,ut.opacity=vt.fillOpacity):ut&&(Ft.removeChild(ut),$._fill=null)},_updateCircle:function($){var nt=$._point.round(),ut=Math.round($._radius),vt=Math.round($._radiusY||ut);this._setPath($,$._empty()?"M0 0":"AL "+nt.x+","+nt.y+" "+ut+","+vt+" 0,"+65535*360)},_setPath:function($,nt){$._path.v=nt},_bringToFront:function($){Ln($._container)},_bringToBack:function($){Pn($._container)}},PA=Mt.vml?yA:Wr,EA=_i.extend({_initContainer:function(){this._container=PA("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=PA("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Bn(this._container),Un(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){_i.prototype._update.call(this);var $=this._bounds,nt=$.getSize(),ut=this._container;(!this._svgSize||!this._svgSize.equals(nt))&&(this._svgSize=nt,ut.setAttribute("width",nt.x),ut.setAttribute("height",nt.y)),Tn(ut,$.min),ut.setAttribute("viewBox",[$.min.x,$.min.y,nt.x,nt.y].join(" ")),this.fire("update")}},_initPath:function($){var nt=$._path=PA("path");$.options.className&&cn(nt,$.options.className),$.options.interactive&&cn(nt,"leaflet-interactive"),this._updateStyle($),this._layers[et($)]=$},_addPath:function($){this._rootGroup||this._initContainer(),this._rootGroup.appendChild($._path),$.addInteractiveTarget($._path)},_removePath:function($){Bn($._path),$.removeInteractiveTarget($._path),delete this._layers[et($)]},_updatePath:function($){$._project(),$._update()},_updateStyle:function($){var nt=$._path,ut=$.options;nt&&(ut.stroke?(nt.setAttribute("stroke",ut.color),nt.setAttribute("stroke-opacity",ut.opacity),nt.setAttribute("stroke-width",ut.weight),nt.setAttribute("stroke-linecap",ut.lineCap),nt.setAttribute("stroke-linejoin",ut.lineJoin),ut.dashArray?nt.setAttribute("stroke-dasharray",ut.dashArray):nt.removeAttribute("stroke-dasharray"),ut.dashOffset?nt.setAttribute("stroke-dashoffset",ut.dashOffset):nt.removeAttribute("stroke-dashoffset")):nt.setAttribute("stroke","none"),ut.fill?(nt.setAttribute("fill",ut.fillColor||ut.color),nt.setAttribute("fill-opacity",ut.fillOpacity),nt.setAttribute("fill-rule",ut.fillRule||"evenodd")):nt.setAttribute("fill","none"))},_updatePoly:function($,nt){this._setPath($,$r($._parts,nt))},_updateCircle:function($){var nt=$._point,ut=Math.max(Math.round($._radius),1),vt=Math.max(Math.round($._radiusY),1)||ut,Ft="a"+ut+","+vt+" 0 1,0 ",Ot=$._empty()?"M0 0":"M"+(nt.x-ut)+","+nt.y+Ft+ut*2+",0 "+Ft+-ut*2+",0 ";this._setPath($,Ot)},_setPath:function($,nt){$._path.setAttribute("d",nt)},_bringToFront:function($){Ln($._path)},_bringToBack:function($){Pn($._path)}});Mt.vml&&EA.include(Uo);function Hs($){return Mt.svg||Mt.vml?new EA($):null}yn.include({getRenderer:function($){var nt=$.options.renderer||this._getPaneRenderer($.options.pane)||this.options.renderer||this._renderer;return nt||(nt=this._renderer=this._createRenderer()),this.hasLayer(nt)||this.addLayer(nt),nt},_getPaneRenderer:function($){if($==="overlayPane"||$===void 0)return!1;var nt=this._paneRenderers[$];return nt===void 0&&(nt=this._createRenderer({pane:$}),this._paneRenderers[$]=nt),nt},_createRenderer:function($){return this.options.preferCanvas&&Ps($)||Hs($)}});var Ns=uA.extend({initialize:function($,nt){uA.prototype.initialize.call(this,this._boundsToLatLngs($),nt)},setBounds:function($){return this.setLatLngs(this._boundsToLatLngs($))},_boundsToLatLngs:function($){return $=Ur($),[$.getSouthWest(),$.getNorthWest(),$.getNorthEast(),$.getSouthEast()]}});function Qo($,nt){return new Ns($,nt)}EA.create=PA,EA.pointsToPath=$r,Jn.geometryToLayer=IA,Jn.coordsToLatLng=As,Jn.coordsToLatLngs=TA,Jn.latLngToCoords=ss,Jn.latLngsToCoords=kA,Jn.getFeature=hA,Jn.asFeature=RA,yn.mergeOptions({boxZoom:!0});var Os=Xn.extend({initialize:function($){this._map=$,this._container=$._container,this._pane=$._panes.overlayPane,this._resetStateTimeout=0,$.on("unload",this._destroy,this)},addHooks:function(){mn(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Un(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Bn(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function($){if(!$.shiftKey||$.which!==1&&$.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),rA(),$A(),this._startPoint=this._map.mouseEventToContainerPoint($),mn(document,{contextmenu:AA,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function($){this._moved||(this._moved=!0,this._box=gn("div","leaflet-zoom-box",this._container),cn(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint($);var nt=new mr(this._point,this._startPoint),ut=nt.getSize();Tn(this._box,nt.min),this._box.style.width=ut.x+"px",this._box.style.height=ut.y+"px"},_finish:function(){this._moved&&(Bn(this._box),vn(this._container,"leaflet-crosshair")),nA(),KA(),Un(document,{contextmenu:AA,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function($){if(!($.which!==1&&$.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(b(this._resetState,this),0);var nt=new Nr(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(nt).fire("boxzoomend",{boxZoomBounds:nt})}},_onKeyDown:function($){$.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});yn.addInitHook("addHandler","boxZoom",Os),yn.mergeOptions({doubleClickZoom:!0});var $s=Xn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function($){var nt=this._map,ut=nt.getZoom(),vt=nt.options.zoomDelta,Ft=$.originalEvent.shiftKey?ut-vt:ut+vt;nt.options.doubleClickZoom==="center"?nt.setZoom(Ft):nt.setZoomAround($.containerPoint,Ft)}});yn.addInitHook("addHandler","doubleClickZoom",$s),yn.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Ks=Xn.extend({addHooks:function(){if(!this._draggable){var $=this._map;this._draggable=new tA($._mapPane,$._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),$.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),$.on("zoomend",this._onZoomEnd,this),$.whenReady(this._onZoomEnd,this))}cn(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){vn(this._map._container,"leaflet-grab"),vn(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var $=this._map;if($._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var nt=Ur(this._map.options.maxBounds);this._offsetLimit=dr(this._map.latLngToContainerPoint(nt.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(nt.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;$.fire("movestart").fire("dragstart"),$.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function($){if(this._map.options.inertia){var nt=this._lastTime=+new Date,ut=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(ut),this._times.push(nt),this._prunePositions(nt)}this._map.fire("move",$).fire("drag",$)},_prunePositions:function($){for(;this._positions.length>1&&$-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var $=this._map.getSize().divideBy(2),nt=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=nt.subtract($).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function($,nt){return $-($-nt)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var $=this._draggable._newPos.subtract(this._draggable._startPos),nt=this._offsetLimit;$.x<nt.min.x&&($.x=this._viscousLimit($.x,nt.min.x)),$.y<nt.min.y&&($.y=this._viscousLimit($.y,nt.min.y)),$.x>nt.max.x&&($.x=this._viscousLimit($.x,nt.max.x)),$.y>nt.max.y&&($.y=this._viscousLimit($.y,nt.max.y)),this._draggable._newPos=this._draggable._startPos.add($)}},_onPreDragWrap:function(){var $=this._worldWidth,nt=Math.round($/2),ut=this._initialWorldOffset,vt=this._draggable._newPos.x,Ft=(vt-nt+ut)%$+nt-ut,Ot=(vt+nt+ut)%$-nt-ut,er=Math.abs(Ft+ut)<Math.abs(Ot+ut)?Ft:Ot;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=er},_onDragEnd:function($){var nt=this._map,ut=nt.options,vt=!ut.inertia||$.noInertia||this._times.length<2;if(nt.fire("dragend",$),vt)nt.fire("moveend");else{this._prunePositions(+new Date);var Ft=this._lastPos.subtract(this._positions[0]),Ot=(this._lastTime-this._times[0])/1e3,er=ut.easeLinearity,gr=Ft.multiplyBy(er/Ot),Cr=gr.distanceTo([0,0]),Lr=Math.min(ut.inertiaMaxSpeed,Cr),nn=gr.multiplyBy(Lr/Cr),pn=Lr/(ut.inertiaDeceleration*er),wn=nn.multiplyBy(-pn/2).round();!wn.x&&!wn.y?nt.fire("moveend"):(wn=nt._limitOffset(wn,nt.options.maxBounds),Nt(function(){nt.panBy(wn,{duration:pn,easeLinearity:er,noMoveStart:!0,animate:!0})}))}}});yn.addInitHook("addHandler","dragging",Ks),yn.mergeOptions({keyboard:!0,keyboardPanDelta:80});var zs=Xn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function($){this._map=$,this._setPanDelta($.options.keyboardPanDelta),this._setZoomDelta($.options.zoomDelta)},addHooks:function(){var $=this._map._container;$.tabIndex<=0&&($.tabIndex="0"),mn($,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Un(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var $=document.body,nt=document.documentElement,ut=$.scrollTop||nt.scrollTop,vt=$.scrollLeft||nt.scrollLeft;this._map._container.focus(),window.scrollTo(vt,ut)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function($){var nt=this._panKeys={},ut=this.keyCodes,vt,Ft;for(vt=0,Ft=ut.left.length;vt<Ft;vt++)nt[ut.left[vt]]=[-1*$,0];for(vt=0,Ft=ut.right.length;vt<Ft;vt++)nt[ut.right[vt]]=[$,0];for(vt=0,Ft=ut.down.length;vt<Ft;vt++)nt[ut.down[vt]]=[0,$];for(vt=0,Ft=ut.up.length;vt<Ft;vt++)nt[ut.up[vt]]=[0,-1*$]},_setZoomDelta:function($){var nt=this._zoomKeys={},ut=this.keyCodes,vt,Ft;for(vt=0,Ft=ut.zoomIn.length;vt<Ft;vt++)nt[ut.zoomIn[vt]]=$;for(vt=0,Ft=ut.zoomOut.length;vt<Ft;vt++)nt[ut.zoomOut[vt]]=-$},_addHooks:function(){mn(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Un(document,"keydown",this._onKeyDown,this)},_onKeyDown:function($){if(!($.altKey||$.ctrlKey||$.metaKey)){var nt=$.keyCode,ut=this._map,vt;if(nt in this._panKeys){if(!ut._panAnim||!ut._panAnim._inProgress)if(vt=this._panKeys[nt],$.shiftKey&&(vt=Ar(vt).multiplyBy(3)),ut.options.maxBounds&&(vt=ut._limitOffset(Ar(vt),ut.options.maxBounds)),ut.options.worldCopyJump){var Ft=ut.wrapLatLng(ut.unproject(ut.project(ut.getCenter()).add(vt)));ut.panTo(Ft)}else ut.panBy(vt)}else if(nt in this._zoomKeys)ut.setZoom(ut.getZoom()+($.shiftKey?3:1)*this._zoomKeys[nt]);else if(nt===27&&ut._popup&&ut._popup.options.closeOnEscapeKey)ut.closePopup();else return;AA($)}}});yn.addInitHook("addHandler","keyboard",zs),yn.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Gs=Xn.extend({addHooks:function(){mn(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Un(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function($){var nt=gs($),ut=this._map.options.wheelDebounceTime;this._delta+=nt,this._lastMousePos=this._map.mouseEventToContainerPoint($),this._startTime||(this._startTime=+new Date);var vt=Math.max(ut-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(b(this._performZoom,this),vt),AA($)},_performZoom:function(){var $=this._map,nt=$.getZoom(),ut=this._map.options.zoomSnap||0;$._stop();var vt=this._delta/(this._map.options.wheelPxPerZoomLevel*4),Ft=4*Math.log(2/(1+Math.exp(-Math.abs(vt))))/Math.LN2,Ot=ut?Math.ceil(Ft/ut)*ut:Ft,er=$._limitZoom(nt+(this._delta>0?Ot:-Ot))-nt;this._delta=0,this._startTime=null,er&&($.options.scrollWheelZoom==="center"?$.setZoom(nt+er):$.setZoomAround(this._lastMousePos,nt+er))}});yn.addInitHook("addHandler","scrollWheelZoom",Gs);var Io=600;yn.mergeOptions({tapHold:Mt.touchNative&&Mt.safari&&Mt.mobile,tapTolerance:15});var Vs=Xn.extend({addHooks:function(){mn(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Un(this._map._container,"touchstart",this._onDown,this)},_onDown:function($){if(clearTimeout(this._holdTimeout),$.touches.length===1){var nt=$.touches[0];this._startPos=this._newPos=new jt(nt.clientX,nt.clientY),this._holdTimeout=setTimeout(b(function(){this._cancel(),this._isTapValid()&&(mn(document,"touchend",Dn),mn(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",nt))},this),Io),mn(document,"touchend touchcancel contextmenu",this._cancel,this),mn(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function $(){Un(document,"touchend",Dn),Un(document,"touchend touchcancel",$)},_cancel:function(){clearTimeout(this._holdTimeout),Un(document,"touchend touchcancel contextmenu",this._cancel,this),Un(document,"touchmove",this._onMove,this)},_onMove:function($){var nt=$.touches[0];this._newPos=new jt(nt.clientX,nt.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function($,nt){var ut=new MouseEvent($,{bubbles:!0,cancelable:!0,view:window,screenX:nt.screenX,screenY:nt.screenY,clientX:nt.clientX,clientY:nt.clientY});ut._simulated=!0,nt.target.dispatchEvent(ut)}});yn.addInitHook("addHandler","tapHold",Vs),yn.mergeOptions({touchZoom:Mt.touch,bounceAtZoomLimits:!0});var Xs=Xn.extend({addHooks:function(){cn(this._map._container,"leaflet-touch-zoom"),mn(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){vn(this._map._container,"leaflet-touch-zoom"),Un(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function($){var nt=this._map;if(!(!$.touches||$.touches.length!==2||nt._animatingZoom||this._zooming)){var ut=nt.mouseEventToContainerPoint($.touches[0]),vt=nt.mouseEventToContainerPoint($.touches[1]);this._centerPoint=nt.getSize()._divideBy(2),this._startLatLng=nt.containerPointToLatLng(this._centerPoint),nt.options.touchZoom!=="center"&&(this._pinchStartLatLng=nt.containerPointToLatLng(ut.add(vt)._divideBy(2))),this._startDist=ut.distanceTo(vt),this._startZoom=nt.getZoom(),this._moved=!1,this._zooming=!0,nt._stop(),mn(document,"touchmove",this._onTouchMove,this),mn(document,"touchend touchcancel",this._onTouchEnd,this),Dn($)}},_onTouchMove:function($){if(!(!$.touches||$.touches.length!==2||!this._zooming)){var nt=this._map,ut=nt.mouseEventToContainerPoint($.touches[0]),vt=nt.mouseEventToContainerPoint($.touches[1]),Ft=ut.distanceTo(vt)/this._startDist;if(this._zoom=nt.getScaleZoom(Ft,this._startZoom),!nt.options.bounceAtZoomLimits&&(this._zoom<nt.getMinZoom()&&Ft<1||this._zoom>nt.getMaxZoom()&&Ft>1)&&(this._zoom=nt._limitZoom(this._zoom)),nt.options.touchZoom==="center"){if(this._center=this._startLatLng,Ft===1)return}else{var Ot=ut._add(vt)._divideBy(2)._subtract(this._centerPoint);if(Ft===1&&Ot.x===0&&Ot.y===0)return;this._center=nt.unproject(nt.project(this._pinchStartLatLng,this._zoom).subtract(Ot),this._zoom)}this._moved||(nt._moveStart(!0,!1),this._moved=!0),Wt(this._animRequest);var er=b(nt._move,nt,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=Nt(er,this,!0),Dn($)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Wt(this._animRequest),Un(document,"touchmove",this._onTouchMove,this),Un(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});yn.addInitHook("addHandler","touchZoom",Xs),yn.BoxZoom=Os,yn.DoubleClickZoom=$s,yn.Drag=Ks,yn.Keyboard=zs,yn.ScrollWheelZoom=Gs,yn.TapHold=Vs,yn.TouchZoom=Xs,h.Bounds=mr,h.Browser=Mt,h.CRS=Dr,h.Canvas=Ds,h.Circle=is,h.CircleMarker=QA,h.Class=qt,h.Control=zn,h.DivIcon=Rs,h.DivOverlay=Yn,h.DomEvent=na,h.DomUtil=Ws,h.Draggable=tA,h.Evented=lr,h.FeatureGroup=Zn,h.GeoJSON=Jn,h.GridLayer=vA,h.Handler=Xn,h.Icon=lA,h.ImageOverlay=LA,h.LatLng=nr,h.LatLngBounds=Nr,h.Layer=Gn,h.LayerGroup=oA,h.LineUtil=ao,h.Map=yn,h.Marker=UA,h.Mixin=eo,h.Path=eA,h.Point=jt,h.PolyUtil=ro,h.Polygon=uA,h.Polyline=Wn,h.Popup=MA,h.PosAnimation=ps,h.Projection=oo,h.Rectangle=Ns,h.Renderer=_i,h.SVG=EA,h.SVGOverlay=ks,h.TileLayer=cA,h.Tooltip=DA,h.Transformation=en,h.Util=Vt,h.VideoOverlay=Ts,h.bind=b,h.bounds=dr,h.canvas=Ps,h.circle=mo,h.circleMarker=po,h.control=mA,h.divIcon=xo,h.extend=g,h.featureGroup=co,h.geoJSON=Is,h.geoJson=Bo,h.gridLayer=So,h.icon=fo,h.imageOverlay=vo,h.latLng=hr,h.latLngBounds=Ur,h.layerGroup=ho,h.map=ga,h.marker=go,h.point=Ar,h.polygon=wo,h.polyline=_o,h.popup=Co,h.rectangle=Qo,h.setOptions=ct,h.stamp=et,h.svg=Hs,h.svgOverlay=Eo,h.tileLayer=Ls,h.tooltip=bo,h.transformation=zr,h.version=d,h.videoOverlay=yo;var To=window.L;h.noConflict=function(){return window.L=To,this},window.L=h})})(leafletSrc,leafletSrc.exports);var leafletSrcExports=leafletSrc.exports;const L$2=getDefaultExportFromCjs$1(leafletSrcExports);/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics=function(s,o){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var g in d)Object.prototype.hasOwnProperty.call(d,g)&&(h[g]=d[g])},extendStatics(s,o)};function __extends(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");extendStatics(s,o);function h(){this.constructor=s}s.prototype=o===null?Object.create(o):(h.prototype=o.prototype,new h)}var __assign=function(){return __assign=Object.assign||function(o){for(var h,d=1,g=arguments.length;d<g;d++){h=arguments[d];for(var _ in h)Object.prototype.hasOwnProperty.call(h,_)&&(o[_]=h[_])}return o},__assign.apply(this,arguments)};function __awaiter(s,o,h,d){function g(_){return _ instanceof h?_:new h(function(b){b(_)})}return new(h||(h=Promise))(function(_,b){function j(rt){try{tt(d.next(rt))}catch(at){b(at)}}function et(rt){try{tt(d.throw(rt))}catch(at){b(at)}}function tt(rt){rt.done?_(rt.value):g(rt.value).then(j,et)}tt((d=d.apply(s,[])).next())})}function __generator(s,o){var h={label:0,sent:function(){if(_[0]&1)throw _[1];return _[1]},trys:[],ops:[]},d,g,_,b;return b={next:j(0),throw:j(1),return:j(2)},typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function j(tt){return function(rt){return et([tt,rt])}}function et(tt){if(d)throw new TypeError("Generator is already executing.");for(;h;)try{if(d=1,g&&(_=tt[0]&2?g.return:tt[0]?g.throw||((_=g.return)&&_.call(g),0):g.next)&&!(_=_.call(g,tt[1])).done)return _;switch(g=0,_&&(tt=[tt[0]&2,_.value]),tt[0]){case 0:case 1:_=tt;break;case 4:return h.label++,{value:tt[1],done:!1};case 5:h.label++,g=tt[1],tt=[0];continue;case 7:tt=h.ops.pop(),h.trys.pop();continue;default:if(_=h.trys,!(_=_.length>0&&_[_.length-1])&&(tt[0]===6||tt[0]===2)){h=0;continue}if(tt[0]===3&&(!_||tt[1]>_[0]&&tt[1]<_[3])){h.label=tt[1];break}if(tt[0]===6&&h.label<_[1]){h.label=_[1],_=tt;break}if(_&&h.label<_[2]){h.label=_[2],h.ops.push(tt);break}_[2]&&h.ops.pop(),h.trys.pop();continue}tt=o.call(s,h)}catch(rt){tt=[6,rt],g=0}finally{d=_=0}if(tt[0]&5)throw tt[1];return{value:tt[0]?tt[1]:void 0,done:!0}}}function __spreadArray(s,o,h){if(arguments.length===2)for(var d=0,g=o.length,_;d<g;d++)(_||!(d in o))&&(_||(_=Array.prototype.slice.call(o,0,d)),_[d]=o[d]);return s.concat(_||o)}var Bounds=function(){function s(o,h,d,g){this.left=o,this.top=h,this.width=d,this.height=g}return s.prototype.add=function(o,h,d,g){return new s(this.left+o,this.top+h,this.width+d,this.height+g)},s.fromClientRect=function(o,h){return new s(h.left+o.windowBounds.left,h.top+o.windowBounds.top,h.width,h.height)},s.fromDOMRectList=function(o,h){var d=Array.from(h).find(function(g){return g.width!==0});return d?new s(d.left+o.windowBounds.left,d.top+o.windowBounds.top,d.width,d.height):s.EMPTY},s.EMPTY=new s(0,0,0,0),s}(),parseBounds=function(s,o){return Bounds.fromClientRect(s,o.getBoundingClientRect())},parseDocumentSize=function(s){var o=s.body,h=s.documentElement;if(!o||!h)throw new Error("Unable to get document size");var d=Math.max(Math.max(o.scrollWidth,h.scrollWidth),Math.max(o.offsetWidth,h.offsetWidth),Math.max(o.clientWidth,h.clientWidth)),g=Math.max(Math.max(o.scrollHeight,h.scrollHeight),Math.max(o.offsetHeight,h.offsetHeight),Math.max(o.clientHeight,h.clientHeight));return new Bounds(0,0,d,g)},toCodePoints$1=function(s){for(var o=[],h=0,d=s.length;h<d;){var g=s.charCodeAt(h++);if(g>=55296&&g<=56319&&h<d){var _=s.charCodeAt(h++);(_&64512)===56320?o.push(((g&1023)<<10)+(_&1023)+65536):(o.push(g),h--)}else o.push(g)}return o},fromCodePoint$1=function(){for(var s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];if(String.fromCodePoint)return String.fromCodePoint.apply(String,s);var h=s.length;if(!h)return"";for(var d=[],g=-1,_="";++g<h;){var b=s[g];b<=65535?d.push(b):(b-=65536,d.push((b>>10)+55296,b%1024+56320)),(g+1===h||d.length>16384)&&(_+=String.fromCharCode.apply(String,d),d.length=0)}return _},chars$2="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup$2=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var i$2=0;i$2<chars$2.length;i$2++)lookup$2[chars$2.charCodeAt(i$2)]=i$2;var chars$1$1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup$1$1=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var i$1$1=0;i$1$1<chars$1$1.length;i$1$1++)lookup$1$1[chars$1$1.charCodeAt(i$1$1)]=i$1$1;var decode$1=function(s){var o=s.length*.75,h=s.length,d,g=0,_,b,j,et;s[s.length-1]==="="&&(o--,s[s.length-2]==="="&&o--);var tt=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(o):new Array(o),rt=Array.isArray(tt)?tt:new Uint8Array(tt);for(d=0;d<h;d+=4)_=lookup$1$1[s.charCodeAt(d)],b=lookup$1$1[s.charCodeAt(d+1)],j=lookup$1$1[s.charCodeAt(d+2)],et=lookup$1$1[s.charCodeAt(d+3)],rt[g++]=_<<2|b>>4,rt[g++]=(b&15)<<4|j>>2,rt[g++]=(j&3)<<6|et&63;return tt},polyUint16Array$1=function(s){for(var o=s.length,h=[],d=0;d<o;d+=2)h.push(s[d+1]<<8|s[d]);return h},polyUint32Array$1=function(s){for(var o=s.length,h=[],d=0;d<o;d+=4)h.push(s[d+3]<<24|s[d+2]<<16|s[d+1]<<8|s[d]);return h},UTRIE2_SHIFT_2$1=5,UTRIE2_SHIFT_1$1=11,UTRIE2_INDEX_SHIFT$1=2,UTRIE2_SHIFT_1_2$1=UTRIE2_SHIFT_1$1-UTRIE2_SHIFT_2$1,UTRIE2_LSCP_INDEX_2_OFFSET$1=65536>>UTRIE2_SHIFT_2$1,UTRIE2_DATA_BLOCK_LENGTH$1=1<<UTRIE2_SHIFT_2$1,UTRIE2_DATA_MASK$1=UTRIE2_DATA_BLOCK_LENGTH$1-1,UTRIE2_LSCP_INDEX_2_LENGTH$1=1024>>UTRIE2_SHIFT_2$1,UTRIE2_INDEX_2_BMP_LENGTH$1=UTRIE2_LSCP_INDEX_2_OFFSET$1+UTRIE2_LSCP_INDEX_2_LENGTH$1,UTRIE2_UTF8_2B_INDEX_2_OFFSET$1=UTRIE2_INDEX_2_BMP_LENGTH$1,UTRIE2_UTF8_2B_INDEX_2_LENGTH$1=32,UTRIE2_INDEX_1_OFFSET$1=UTRIE2_UTF8_2B_INDEX_2_OFFSET$1+UTRIE2_UTF8_2B_INDEX_2_LENGTH$1,UTRIE2_OMITTED_BMP_INDEX_1_LENGTH$1=65536>>UTRIE2_SHIFT_1$1,UTRIE2_INDEX_2_BLOCK_LENGTH$1=1<<UTRIE2_SHIFT_1_2$1,UTRIE2_INDEX_2_MASK$1=UTRIE2_INDEX_2_BLOCK_LENGTH$1-1,slice16$1=function(s,o,h){return s.slice?s.slice(o,h):new Uint16Array(Array.prototype.slice.call(s,o,h))},slice32$1=function(s,o,h){return s.slice?s.slice(o,h):new Uint32Array(Array.prototype.slice.call(s,o,h))},createTrieFromBase64$1=function(s,o){var h=decode$1(s),d=Array.isArray(h)?polyUint32Array$1(h):new Uint32Array(h),g=Array.isArray(h)?polyUint16Array$1(h):new Uint16Array(h),_=24,b=slice16$1(g,_/2,d[4]/2),j=d[5]===2?slice16$1(g,(_+d[4])/2):slice32$1(d,Math.ceil((_+d[4])/4));return new Trie$1(d[0],d[1],d[2],d[3],b,j)},Trie$1=function(){function s(o,h,d,g,_,b){this.initialValue=o,this.errorValue=h,this.highStart=d,this.highValueIndex=g,this.index=_,this.data=b}return s.prototype.get=function(o){var h;if(o>=0){if(o<55296||o>56319&&o<=65535)return h=this.index[o>>UTRIE2_SHIFT_2$1],h=(h<<UTRIE2_INDEX_SHIFT$1)+(o&UTRIE2_DATA_MASK$1),this.data[h];if(o<=65535)return h=this.index[UTRIE2_LSCP_INDEX_2_OFFSET$1+(o-55296>>UTRIE2_SHIFT_2$1)],h=(h<<UTRIE2_INDEX_SHIFT$1)+(o&UTRIE2_DATA_MASK$1),this.data[h];if(o<this.highStart)return h=UTRIE2_INDEX_1_OFFSET$1-UTRIE2_OMITTED_BMP_INDEX_1_LENGTH$1+(o>>UTRIE2_SHIFT_1$1),h=this.index[h],h+=o>>UTRIE2_SHIFT_2$1&UTRIE2_INDEX_2_MASK$1,h=this.index[h],h=(h<<UTRIE2_INDEX_SHIFT$1)+(o&UTRIE2_DATA_MASK$1),this.data[h];if(o<=1114111)return this.data[this.highValueIndex]}return this.errorValue},s}(),chars$3="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup$3=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var i$3=0;i$3<chars$3.length;i$3++)lookup$3[chars$3.charCodeAt(i$3)]=i$3;var base64$1="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",LETTER_NUMBER_MODIFIER=50,BK=1,CR$1=2,LF$1=3,CM=4,NL=5,WJ=7,ZW=8,GL=9,SP=10,ZWJ$1=11,B2=12,BA=13,BB=14,HY=15,CB=16,CL=17,CP=18,EX=19,IN=20,NS=21,OP=22,QU=23,IS=24,NU=25,PO=26,PR=27,SY=28,AI=29,AL=30,CJ=31,EB=32,EM=33,H2=34,H3=35,HL=36,ID=37,JL=38,JV=39,JT=40,RI$1=41,SA=42,XX=43,ea_OP=[9001,65288],BREAK_MANDATORY="!",BREAK_NOT_ALLOWED$1="×",BREAK_ALLOWED$1="÷",UnicodeTrie$1=createTrieFromBase64$1(base64$1),ALPHABETICS=[AL,HL],HARD_LINE_BREAKS=[BK,CR$1,LF$1,NL],SPACE$1=[SP,ZW],PREFIX_POSTFIX=[PR,PO],LINE_BREAKS=HARD_LINE_BREAKS.concat(SPACE$1),KOREAN_SYLLABLE_BLOCK=[JL,JV,JT,H2,H3],HYPHEN=[HY,BA],codePointsToCharacterClasses=function(s,o){o===void 0&&(o="strict");var h=[],d=[],g=[];return s.forEach(function(_,b){var j=UnicodeTrie$1.get(_);if(j>LETTER_NUMBER_MODIFIER?(g.push(!0),j-=LETTER_NUMBER_MODIFIER):g.push(!1),["normal","auto","loose"].indexOf(o)!==-1&&[8208,8211,12316,12448].indexOf(_)!==-1)return d.push(b),h.push(CB);if(j===CM||j===ZWJ$1){if(b===0)return d.push(b),h.push(AL);var et=h[b-1];return LINE_BREAKS.indexOf(et)===-1?(d.push(d[b-1]),h.push(et)):(d.push(b),h.push(AL))}if(d.push(b),j===CJ)return h.push(o==="strict"?NS:ID);if(j===SA||j===AI)return h.push(AL);if(j===XX)return _>=131072&&_<=196605||_>=196608&&_<=262141?h.push(ID):h.push(AL);h.push(j)}),[d,h,g]},isAdjacentWithSpaceIgnored=function(s,o,h,d){var g=d[h];if(Array.isArray(s)?s.indexOf(g)!==-1:s===g)for(var _=h;_<=d.length;){_++;var b=d[_];if(b===o)return!0;if(b!==SP)break}if(g===SP)for(var _=h;_>0;){_--;var j=d[_];if(Array.isArray(s)?s.indexOf(j)!==-1:s===j)for(var et=h;et<=d.length;){et++;var b=d[et];if(b===o)return!0;if(b!==SP)break}if(j!==SP)break}return!1},previousNonSpaceClassType=function(s,o){for(var h=s;h>=0;){var d=o[h];if(d===SP)h--;else return d}return 0},_lineBreakAtIndex=function(s,o,h,d,g){if(h[d]===0)return BREAK_NOT_ALLOWED$1;var _=d-1;if(Array.isArray(g)&&g[_]===!0)return BREAK_NOT_ALLOWED$1;var b=_-1,j=_+1,et=o[_],tt=b>=0?o[b]:0,rt=o[j];if(et===CR$1&&rt===LF$1)return BREAK_NOT_ALLOWED$1;if(HARD_LINE_BREAKS.indexOf(et)!==-1)return BREAK_MANDATORY;if(HARD_LINE_BREAKS.indexOf(rt)!==-1||SPACE$1.indexOf(rt)!==-1)return BREAK_NOT_ALLOWED$1;if(previousNonSpaceClassType(_,o)===ZW)return BREAK_ALLOWED$1;if(UnicodeTrie$1.get(s[_])===ZWJ$1||(et===EB||et===EM)&&UnicodeTrie$1.get(s[j])===ZWJ$1||et===WJ||rt===WJ||et===GL||[SP,BA,HY].indexOf(et)===-1&&rt===GL||[CL,CP,EX,IS,SY].indexOf(rt)!==-1||previousNonSpaceClassType(_,o)===OP||isAdjacentWithSpaceIgnored(QU,OP,_,o)||isAdjacentWithSpaceIgnored([CL,CP],NS,_,o)||isAdjacentWithSpaceIgnored(B2,B2,_,o))return BREAK_NOT_ALLOWED$1;if(et===SP)return BREAK_ALLOWED$1;if(et===QU||rt===QU)return BREAK_NOT_ALLOWED$1;if(rt===CB||et===CB)return BREAK_ALLOWED$1;if([BA,HY,NS].indexOf(rt)!==-1||et===BB||tt===HL&&HYPHEN.indexOf(et)!==-1||et===SY&&rt===HL||rt===IN||ALPHABETICS.indexOf(rt)!==-1&&et===NU||ALPHABETICS.indexOf(et)!==-1&&rt===NU||et===PR&&[ID,EB,EM].indexOf(rt)!==-1||[ID,EB,EM].indexOf(et)!==-1&&rt===PO||ALPHABETICS.indexOf(et)!==-1&&PREFIX_POSTFIX.indexOf(rt)!==-1||PREFIX_POSTFIX.indexOf(et)!==-1&&ALPHABETICS.indexOf(rt)!==-1||[PR,PO].indexOf(et)!==-1&&(rt===NU||[OP,HY].indexOf(rt)!==-1&&o[j+1]===NU)||[OP,HY].indexOf(et)!==-1&&rt===NU||et===NU&&[NU,SY,IS].indexOf(rt)!==-1)return BREAK_NOT_ALLOWED$1;if([NU,SY,IS,CL,CP].indexOf(rt)!==-1)for(var at=_;at>=0;){var st=o[at];if(st===NU)return BREAK_NOT_ALLOWED$1;if([SY,IS].indexOf(st)!==-1)at--;else break}if([PR,PO].indexOf(rt)!==-1)for(var at=[CL,CP].indexOf(et)!==-1?b:_;at>=0;){var st=o[at];if(st===NU)return BREAK_NOT_ALLOWED$1;if([SY,IS].indexOf(st)!==-1)at--;else break}if(JL===et&&[JL,JV,H2,H3].indexOf(rt)!==-1||[JV,H2].indexOf(et)!==-1&&[JV,JT].indexOf(rt)!==-1||[JT,H3].indexOf(et)!==-1&&rt===JT||KOREAN_SYLLABLE_BLOCK.indexOf(et)!==-1&&[IN,PO].indexOf(rt)!==-1||KOREAN_SYLLABLE_BLOCK.indexOf(rt)!==-1&&et===PR||ALPHABETICS.indexOf(et)!==-1&&ALPHABETICS.indexOf(rt)!==-1||et===IS&&ALPHABETICS.indexOf(rt)!==-1||ALPHABETICS.concat(NU).indexOf(et)!==-1&&rt===OP&&ea_OP.indexOf(s[j])===-1||ALPHABETICS.concat(NU).indexOf(rt)!==-1&&et===CP)return BREAK_NOT_ALLOWED$1;if(et===RI$1&&rt===RI$1){for(var At=h[_],ht=1;At>0&&(At--,o[At]===RI$1);)ht++;if(ht%2!==0)return BREAK_NOT_ALLOWED$1}return et===EB&&rt===EM?BREAK_NOT_ALLOWED$1:BREAK_ALLOWED$1},cssFormattedClasses=function(s,o){o||(o={lineBreak:"normal",wordBreak:"normal"});var h=codePointsToCharacterClasses(s,o.lineBreak),d=h[0],g=h[1],_=h[2];(o.wordBreak==="break-all"||o.wordBreak==="break-word")&&(g=g.map(function(j){return[NU,AL,SA].indexOf(j)!==-1?ID:j}));var b=o.wordBreak==="keep-all"?_.map(function(j,et){return j&&s[et]>=19968&&s[et]<=40959}):void 0;return[d,g,b]},Break=function(){function s(o,h,d,g){this.codePoints=o,this.required=h===BREAK_MANDATORY,this.start=d,this.end=g}return s.prototype.slice=function(){return fromCodePoint$1.apply(void 0,this.codePoints.slice(this.start,this.end))},s}(),LineBreaker=function(s,o){var h=toCodePoints$1(s),d=cssFormattedClasses(h,o),g=d[0],_=d[1],b=d[2],j=h.length,et=0,tt=0;return{next:function(){if(tt>=j)return{done:!0,value:null};for(var rt=BREAK_NOT_ALLOWED$1;tt<j&&(rt=_lineBreakAtIndex(h,_,g,++tt,b))===BREAK_NOT_ALLOWED$1;);if(rt!==BREAK_NOT_ALLOWED$1||tt===j){var at=new Break(h,rt,et,tt);return et=tt,{value:at,done:!1}}return{done:!0,value:null}}}},FLAG_UNRESTRICTED=1,FLAG_ID=2,FLAG_INTEGER=4,FLAG_NUMBER=8,LINE_FEED=10,SOLIDUS=47,REVERSE_SOLIDUS=92,CHARACTER_TABULATION=9,SPACE=32,QUOTATION_MARK=34,EQUALS_SIGN=61,NUMBER_SIGN=35,DOLLAR_SIGN=36,PERCENTAGE_SIGN=37,APOSTROPHE=39,LEFT_PARENTHESIS=40,RIGHT_PARENTHESIS=41,LOW_LINE=95,HYPHEN_MINUS=45,EXCLAMATION_MARK=33,LESS_THAN_SIGN=60,GREATER_THAN_SIGN=62,COMMERCIAL_AT=64,LEFT_SQUARE_BRACKET=91,RIGHT_SQUARE_BRACKET=93,CIRCUMFLEX_ACCENT=61,LEFT_CURLY_BRACKET=123,QUESTION_MARK=63,RIGHT_CURLY_BRACKET=125,VERTICAL_LINE=124,TILDE=126,CONTROL=128,REPLACEMENT_CHARACTER=65533,ASTERISK=42,PLUS_SIGN=43,COMMA=44,COLON=58,SEMICOLON=59,FULL_STOP=46,NULL=0,BACKSPACE=8,LINE_TABULATION=11,SHIFT_OUT=14,INFORMATION_SEPARATOR_ONE=31,DELETE=127,EOF=-1,ZERO=48,a=97,e=101,f=102,u=117,z=122,A=65,E=69,F=70,U=85,Z=90,isDigit=function(s){return s>=ZERO&&s<=57},isSurrogateCodePoint=function(s){return s>=55296&&s<=57343},isHex=function(s){return isDigit(s)||s>=A&&s<=F||s>=a&&s<=f},isLowerCaseLetter=function(s){return s>=a&&s<=z},isUpperCaseLetter=function(s){return s>=A&&s<=Z},isLetter=function(s){return isLowerCaseLetter(s)||isUpperCaseLetter(s)},isNonASCIICodePoint=function(s){return s>=CONTROL},isWhiteSpace=function(s){return s===LINE_FEED||s===CHARACTER_TABULATION||s===SPACE},isNameStartCodePoint=function(s){return isLetter(s)||isNonASCIICodePoint(s)||s===LOW_LINE},isNameCodePoint=function(s){return isNameStartCodePoint(s)||isDigit(s)||s===HYPHEN_MINUS},isNonPrintableCodePoint=function(s){return s>=NULL&&s<=BACKSPACE||s===LINE_TABULATION||s>=SHIFT_OUT&&s<=INFORMATION_SEPARATOR_ONE||s===DELETE},isValidEscape=function(s,o){return s!==REVERSE_SOLIDUS?!1:o!==LINE_FEED},isIdentifierStart=function(s,o,h){return s===HYPHEN_MINUS?isNameStartCodePoint(o)||isValidEscape(o,h):isNameStartCodePoint(s)?!0:!!(s===REVERSE_SOLIDUS&&isValidEscape(s,o))},isNumberStart=function(s,o,h){return s===PLUS_SIGN||s===HYPHEN_MINUS?isDigit(o)?!0:o===FULL_STOP&&isDigit(h):isDigit(s===FULL_STOP?o:s)},stringToNumber=function(s){var o=0,h=1;(s[o]===PLUS_SIGN||s[o]===HYPHEN_MINUS)&&(s[o]===HYPHEN_MINUS&&(h=-1),o++);for(var d=[];isDigit(s[o]);)d.push(s[o++]);var g=d.length?parseInt(fromCodePoint$1.apply(void 0,d),10):0;s[o]===FULL_STOP&&o++;for(var _=[];isDigit(s[o]);)_.push(s[o++]);var b=_.length,j=b?parseInt(fromCodePoint$1.apply(void 0,_),10):0;(s[o]===E||s[o]===e)&&o++;var et=1;(s[o]===PLUS_SIGN||s[o]===HYPHEN_MINUS)&&(s[o]===HYPHEN_MINUS&&(et=-1),o++);for(var tt=[];isDigit(s[o]);)tt.push(s[o++]);var rt=tt.length?parseInt(fromCodePoint$1.apply(void 0,tt),10):0;return h*(g+j*Math.pow(10,-b))*Math.pow(10,et*rt)},LEFT_PARENTHESIS_TOKEN={type:2},RIGHT_PARENTHESIS_TOKEN={type:3},COMMA_TOKEN={type:4},SUFFIX_MATCH_TOKEN={type:13},PREFIX_MATCH_TOKEN={type:8},COLUMN_TOKEN={type:21},DASH_MATCH_TOKEN={type:9},INCLUDE_MATCH_TOKEN={type:10},LEFT_CURLY_BRACKET_TOKEN={type:11},RIGHT_CURLY_BRACKET_TOKEN={type:12},SUBSTRING_MATCH_TOKEN={type:14},BAD_URL_TOKEN={type:23},BAD_STRING_TOKEN={type:1},CDO_TOKEN={type:25},CDC_TOKEN={type:24},COLON_TOKEN={type:26},SEMICOLON_TOKEN={type:27},LEFT_SQUARE_BRACKET_TOKEN={type:28},RIGHT_SQUARE_BRACKET_TOKEN={type:29},WHITESPACE_TOKEN={type:31},EOF_TOKEN={type:32},Tokenizer=function(){function s(){this._value=[]}return s.prototype.write=function(o){this._value=this._value.concat(toCodePoints$1(o))},s.prototype.read=function(){for(var o=[],h=this.consumeToken();h!==EOF_TOKEN;)o.push(h),h=this.consumeToken();return o},s.prototype.consumeToken=function(){var o=this.consumeCodePoint();switch(o){case QUOTATION_MARK:return this.consumeStringToken(QUOTATION_MARK);case NUMBER_SIGN:var h=this.peekCodePoint(0),d=this.peekCodePoint(1),g=this.peekCodePoint(2);if(isNameCodePoint(h)||isValidEscape(d,g)){var _=isIdentifierStart(h,d,g)?FLAG_ID:FLAG_UNRESTRICTED,b=this.consumeName();return{type:5,value:b,flags:_}}break;case DOLLAR_SIGN:if(this.peekCodePoint(0)===EQUALS_SIGN)return this.consumeCodePoint(),SUFFIX_MATCH_TOKEN;break;case APOSTROPHE:return this.consumeStringToken(APOSTROPHE);case LEFT_PARENTHESIS:return LEFT_PARENTHESIS_TOKEN;case RIGHT_PARENTHESIS:return RIGHT_PARENTHESIS_TOKEN;case ASTERISK:if(this.peekCodePoint(0)===EQUALS_SIGN)return this.consumeCodePoint(),SUBSTRING_MATCH_TOKEN;break;case PLUS_SIGN:if(isNumberStart(o,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(o),this.consumeNumericToken();break;case COMMA:return COMMA_TOKEN;case HYPHEN_MINUS:var j=o,et=this.peekCodePoint(0),tt=this.peekCodePoint(1);if(isNumberStart(j,et,tt))return this.reconsumeCodePoint(o),this.consumeNumericToken();if(isIdentifierStart(j,et,tt))return this.reconsumeCodePoint(o),this.consumeIdentLikeToken();if(et===HYPHEN_MINUS&&tt===GREATER_THAN_SIGN)return this.consumeCodePoint(),this.consumeCodePoint(),CDC_TOKEN;break;case FULL_STOP:if(isNumberStart(o,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(o),this.consumeNumericToken();break;case SOLIDUS:if(this.peekCodePoint(0)===ASTERISK)for(this.consumeCodePoint();;){var rt=this.consumeCodePoint();if(rt===ASTERISK&&(rt=this.consumeCodePoint(),rt===SOLIDUS))return this.consumeToken();if(rt===EOF)return this.consumeToken()}break;case COLON:return COLON_TOKEN;case SEMICOLON:return SEMICOLON_TOKEN;case LESS_THAN_SIGN:if(this.peekCodePoint(0)===EXCLAMATION_MARK&&this.peekCodePoint(1)===HYPHEN_MINUS&&this.peekCodePoint(2)===HYPHEN_MINUS)return this.consumeCodePoint(),this.consumeCodePoint(),CDO_TOKEN;break;case COMMERCIAL_AT:var at=this.peekCodePoint(0),st=this.peekCodePoint(1),At=this.peekCodePoint(2);if(isIdentifierStart(at,st,At)){var b=this.consumeName();return{type:7,value:b}}break;case LEFT_SQUARE_BRACKET:return LEFT_SQUARE_BRACKET_TOKEN;case REVERSE_SOLIDUS:if(isValidEscape(o,this.peekCodePoint(0)))return this.reconsumeCodePoint(o),this.consumeIdentLikeToken();break;case RIGHT_SQUARE_BRACKET:return RIGHT_SQUARE_BRACKET_TOKEN;case CIRCUMFLEX_ACCENT:if(this.peekCodePoint(0)===EQUALS_SIGN)return this.consumeCodePoint(),PREFIX_MATCH_TOKEN;break;case LEFT_CURLY_BRACKET:return LEFT_CURLY_BRACKET_TOKEN;case RIGHT_CURLY_BRACKET:return RIGHT_CURLY_BRACKET_TOKEN;case u:case U:var ht=this.peekCodePoint(0),ct=this.peekCodePoint(1);return ht===PLUS_SIGN&&(isHex(ct)||ct===QUESTION_MARK)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(o),this.consumeIdentLikeToken();case VERTICAL_LINE:if(this.peekCodePoint(0)===EQUALS_SIGN)return this.consumeCodePoint(),DASH_MATCH_TOKEN;if(this.peekCodePoint(0)===VERTICAL_LINE)return this.consumeCodePoint(),COLUMN_TOKEN;break;case TILDE:if(this.peekCodePoint(0)===EQUALS_SIGN)return this.consumeCodePoint(),INCLUDE_MATCH_TOKEN;break;case EOF:return EOF_TOKEN}return isWhiteSpace(o)?(this.consumeWhiteSpace(),WHITESPACE_TOKEN):isDigit(o)?(this.reconsumeCodePoint(o),this.consumeNumericToken()):isNameStartCodePoint(o)?(this.reconsumeCodePoint(o),this.consumeIdentLikeToken()):{type:6,value:fromCodePoint$1(o)}},s.prototype.consumeCodePoint=function(){var o=this._value.shift();return typeof o>"u"?-1:o},s.prototype.reconsumeCodePoint=function(o){this._value.unshift(o)},s.prototype.peekCodePoint=function(o){return o>=this._value.length?-1:this._value[o]},s.prototype.consumeUnicodeRangeToken=function(){for(var o=[],h=this.consumeCodePoint();isHex(h)&&o.length<6;)o.push(h),h=this.consumeCodePoint();for(var d=!1;h===QUESTION_MARK&&o.length<6;)o.push(h),h=this.consumeCodePoint(),d=!0;if(d){var g=parseInt(fromCodePoint$1.apply(void 0,o.map(function(et){return et===QUESTION_MARK?ZERO:et})),16),_=parseInt(fromCodePoint$1.apply(void 0,o.map(function(et){return et===QUESTION_MARK?F:et})),16);return{type:30,start:g,end:_}}var b=parseInt(fromCodePoint$1.apply(void 0,o),16);if(this.peekCodePoint(0)===HYPHEN_MINUS&&isHex(this.peekCodePoint(1))){this.consumeCodePoint(),h=this.consumeCodePoint();for(var j=[];isHex(h)&&j.length<6;)j.push(h),h=this.consumeCodePoint();var _=parseInt(fromCodePoint$1.apply(void 0,j),16);return{type:30,start:b,end:_}}else return{type:30,start:b,end:b}},s.prototype.consumeIdentLikeToken=function(){var o=this.consumeName();return o.toLowerCase()==="url"&&this.peekCodePoint(0)===LEFT_PARENTHESIS?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===LEFT_PARENTHESIS?(this.consumeCodePoint(),{type:19,value:o}):{type:20,value:o}},s.prototype.consumeUrlToken=function(){var o=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===EOF)return{type:22,value:""};var h=this.peekCodePoint(0);if(h===APOSTROPHE||h===QUOTATION_MARK){var d=this.consumeStringToken(this.consumeCodePoint());return d.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===EOF||this.peekCodePoint(0)===RIGHT_PARENTHESIS)?(this.consumeCodePoint(),{type:22,value:d.value}):(this.consumeBadUrlRemnants(),BAD_URL_TOKEN)}for(;;){var g=this.consumeCodePoint();if(g===EOF||g===RIGHT_PARENTHESIS)return{type:22,value:fromCodePoint$1.apply(void 0,o)};if(isWhiteSpace(g))return this.consumeWhiteSpace(),this.peekCodePoint(0)===EOF||this.peekCodePoint(0)===RIGHT_PARENTHESIS?(this.consumeCodePoint(),{type:22,value:fromCodePoint$1.apply(void 0,o)}):(this.consumeBadUrlRemnants(),BAD_URL_TOKEN);if(g===QUOTATION_MARK||g===APOSTROPHE||g===LEFT_PARENTHESIS||isNonPrintableCodePoint(g))return this.consumeBadUrlRemnants(),BAD_URL_TOKEN;if(g===REVERSE_SOLIDUS)if(isValidEscape(g,this.peekCodePoint(0)))o.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),BAD_URL_TOKEN;else o.push(g)}},s.prototype.consumeWhiteSpace=function(){for(;isWhiteSpace(this.peekCodePoint(0));)this.consumeCodePoint()},s.prototype.consumeBadUrlRemnants=function(){for(;;){var o=this.consumeCodePoint();if(o===RIGHT_PARENTHESIS||o===EOF)return;isValidEscape(o,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},s.prototype.consumeStringSlice=function(o){for(var h=5e4,d="";o>0;){var g=Math.min(h,o);d+=fromCodePoint$1.apply(void 0,this._value.splice(0,g)),o-=g}return this._value.shift(),d},s.prototype.consumeStringToken=function(o){var h="",d=0;do{var g=this._value[d];if(g===EOF||g===void 0||g===o)return h+=this.consumeStringSlice(d),{type:0,value:h};if(g===LINE_FEED)return this._value.splice(0,d),BAD_STRING_TOKEN;if(g===REVERSE_SOLIDUS){var _=this._value[d+1];_!==EOF&&_!==void 0&&(_===LINE_FEED?(h+=this.consumeStringSlice(d),d=-1,this._value.shift()):isValidEscape(g,_)&&(h+=this.consumeStringSlice(d),h+=fromCodePoint$1(this.consumeEscapedCodePoint()),d=-1))}d++}while(!0)},s.prototype.consumeNumber=function(){var o=[],h=FLAG_INTEGER,d=this.peekCodePoint(0);for((d===PLUS_SIGN||d===HYPHEN_MINUS)&&o.push(this.consumeCodePoint());isDigit(this.peekCodePoint(0));)o.push(this.consumeCodePoint());d=this.peekCodePoint(0);var g=this.peekCodePoint(1);if(d===FULL_STOP&&isDigit(g))for(o.push(this.consumeCodePoint(),this.consumeCodePoint()),h=FLAG_NUMBER;isDigit(this.peekCodePoint(0));)o.push(this.consumeCodePoint());d=this.peekCodePoint(0),g=this.peekCodePoint(1);var _=this.peekCodePoint(2);if((d===E||d===e)&&((g===PLUS_SIGN||g===HYPHEN_MINUS)&&isDigit(_)||isDigit(g)))for(o.push(this.consumeCodePoint(),this.consumeCodePoint()),h=FLAG_NUMBER;isDigit(this.peekCodePoint(0));)o.push(this.consumeCodePoint());return[stringToNumber(o),h]},s.prototype.consumeNumericToken=function(){var o=this.consumeNumber(),h=o[0],d=o[1],g=this.peekCodePoint(0),_=this.peekCodePoint(1),b=this.peekCodePoint(2);if(isIdentifierStart(g,_,b)){var j=this.consumeName();return{type:15,number:h,flags:d,unit:j}}return g===PERCENTAGE_SIGN?(this.consumeCodePoint(),{type:16,number:h,flags:d}):{type:17,number:h,flags:d}},s.prototype.consumeEscapedCodePoint=function(){var o=this.consumeCodePoint();if(isHex(o)){for(var h=fromCodePoint$1(o);isHex(this.peekCodePoint(0))&&h.length<6;)h+=fromCodePoint$1(this.consumeCodePoint());isWhiteSpace(this.peekCodePoint(0))&&this.consumeCodePoint();var d=parseInt(h,16);return d===0||isSurrogateCodePoint(d)||d>1114111?REPLACEMENT_CHARACTER:d}return o===EOF?REPLACEMENT_CHARACTER:o},s.prototype.consumeName=function(){for(var o="";;){var h=this.consumeCodePoint();if(isNameCodePoint(h))o+=fromCodePoint$1(h);else if(isValidEscape(h,this.peekCodePoint(0)))o+=fromCodePoint$1(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(h),o}},s}(),Parser=function(){function s(o){this._tokens=o}return s.create=function(o){var h=new Tokenizer;return h.write(o),new s(h.read())},s.parseValue=function(o){return s.create(o).parseComponentValue()},s.parseValues=function(o){return s.create(o).parseComponentValues()},s.prototype.parseComponentValue=function(){for(var o=this.consumeToken();o.type===31;)o=this.consumeToken();if(o.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(o);var h=this.consumeComponentValue();do o=this.consumeToken();while(o.type===31);if(o.type===32)return h;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},s.prototype.parseComponentValues=function(){for(var o=[];;){var h=this.consumeComponentValue();if(h.type===32)return o;o.push(h),o.push()}},s.prototype.consumeComponentValue=function(){var o=this.consumeToken();switch(o.type){case 11:case 28:case 2:return this.consumeSimpleBlock(o.type);case 19:return this.consumeFunction(o)}return o},s.prototype.consumeSimpleBlock=function(o){for(var h={type:o,values:[]},d=this.consumeToken();;){if(d.type===32||isEndingTokenFor(d,o))return h;this.reconsumeToken(d),h.values.push(this.consumeComponentValue()),d=this.consumeToken()}},s.prototype.consumeFunction=function(o){for(var h={name:o.value,values:[],type:18};;){var d=this.consumeToken();if(d.type===32||d.type===3)return h;this.reconsumeToken(d),h.values.push(this.consumeComponentValue())}},s.prototype.consumeToken=function(){var o=this._tokens.shift();return typeof o>"u"?EOF_TOKEN:o},s.prototype.reconsumeToken=function(o){this._tokens.unshift(o)},s}(),isDimensionToken=function(s){return s.type===15},isNumberToken=function(s){return s.type===17},isIdentToken=function(s){return s.type===20},isStringToken=function(s){return s.type===0},isIdentWithValue=function(s,o){return isIdentToken(s)&&s.value===o},nonWhiteSpace=function(s){return s.type!==31},nonFunctionArgSeparator=function(s){return s.type!==31&&s.type!==4},parseFunctionArgs=function(s){var o=[],h=[];return s.forEach(function(d){if(d.type===4){if(h.length===0)throw new Error("Error parsing function args, zero tokens for arg");o.push(h),h=[];return}d.type!==31&&h.push(d)}),h.length&&o.push(h),o},isEndingTokenFor=function(s,o){return o===11&&s.type===12||o===28&&s.type===29?!0:o===2&&s.type===3},isLength=function(s){return s.type===17||s.type===15},isLengthPercentage=function(s){return s.type===16||isLength(s)},parseLengthPercentageTuple=function(s){return s.length>1?[s[0],s[1]]:[s[0]]},ZERO_LENGTH={type:17,number:0,flags:FLAG_INTEGER},FIFTY_PERCENT={type:16,number:50,flags:FLAG_INTEGER},HUNDRED_PERCENT={type:16,number:100,flags:FLAG_INTEGER},getAbsoluteValueForTuple=function(s,o,h){var d=s[0],g=s[1];return[getAbsoluteValue(d,o),getAbsoluteValue(typeof g<"u"?g:d,h)]},getAbsoluteValue=function(s,o){if(s.type===16)return s.number/100*o;if(isDimensionToken(s))switch(s.unit){case"rem":case"em":return 16*s.number;case"px":default:return s.number}return s.number},DEG="deg",GRAD="grad",RAD="rad",TURN="turn",angle={name:"angle",parse:function(s,o){if(o.type===15)switch(o.unit){case DEG:return Math.PI*o.number/180;case GRAD:return Math.PI/200*o.number;case RAD:return o.number;case TURN:return Math.PI*2*o.number}throw new Error("Unsupported angle type")}},isAngle=function(s){return s.type===15&&(s.unit===DEG||s.unit===GRAD||s.unit===RAD||s.unit===TURN)},parseNamedSide=function(s){var o=s.filter(isIdentToken).map(function(h){return h.value}).join(" ");switch(o){case"to bottom right":case"to right bottom":case"left top":case"top left":return[ZERO_LENGTH,ZERO_LENGTH];case"to top":case"bottom":return deg(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[ZERO_LENGTH,HUNDRED_PERCENT];case"to right":case"left":return deg(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[HUNDRED_PERCENT,HUNDRED_PERCENT];case"to bottom":case"top":return deg(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[HUNDRED_PERCENT,ZERO_LENGTH];case"to left":case"right":return deg(270)}return 0},deg=function(s){return Math.PI*s/180},color$1={name:"color",parse:function(s,o){if(o.type===18){var h=SUPPORTED_COLOR_FUNCTIONS[o.name];if(typeof h>"u")throw new Error('Attempting to parse an unsupported color function "'+o.name+'"');return h(s,o.values)}if(o.type===5){if(o.value.length===3){var d=o.value.substring(0,1),g=o.value.substring(1,2),_=o.value.substring(2,3);return pack(parseInt(d+d,16),parseInt(g+g,16),parseInt(_+_,16),1)}if(o.value.length===4){var d=o.value.substring(0,1),g=o.value.substring(1,2),_=o.value.substring(2,3),b=o.value.substring(3,4);return pack(parseInt(d+d,16),parseInt(g+g,16),parseInt(_+_,16),parseInt(b+b,16)/255)}if(o.value.length===6){var d=o.value.substring(0,2),g=o.value.substring(2,4),_=o.value.substring(4,6);return pack(parseInt(d,16),parseInt(g,16),parseInt(_,16),1)}if(o.value.length===8){var d=o.value.substring(0,2),g=o.value.substring(2,4),_=o.value.substring(4,6),b=o.value.substring(6,8);return pack(parseInt(d,16),parseInt(g,16),parseInt(_,16),parseInt(b,16)/255)}}if(o.type===20){var j=COLORS[o.value.toUpperCase()];if(typeof j<"u")return j}return COLORS.TRANSPARENT}},isTransparent=function(s){return(255&s)===0},asString=function(s){var o=255&s,h=255&s>>8,d=255&s>>16,g=255&s>>24;return o<255?"rgba("+g+","+d+","+h+","+o/255+")":"rgb("+g+","+d+","+h+")"},pack=function(s,o,h,d){return(s<<24|o<<16|h<<8|Math.round(d*255)<<0)>>>0},getTokenColorValue=function(s,o){if(s.type===17)return s.number;if(s.type===16){var h=o===3?1:255;return o===3?s.number/100*h:Math.round(s.number/100*h)}return 0},rgb=function(s,o){var h=o.filter(nonFunctionArgSeparator);if(h.length===3){var d=h.map(getTokenColorValue),g=d[0],_=d[1],b=d[2];return pack(g,_,b,1)}if(h.length===4){var j=h.map(getTokenColorValue),g=j[0],_=j[1],b=j[2],et=j[3];return pack(g,_,b,et)}return 0};function hue2rgb(s,o,h){return h<0&&(h+=1),h>=1&&(h-=1),h<1/6?(o-s)*h*6+s:h<1/2?o:h<2/3?(o-s)*6*(2/3-h)+s:s}var hsl=function(s,o){var h=o.filter(nonFunctionArgSeparator),d=h[0],g=h[1],_=h[2],b=h[3],j=(d.type===17?deg(d.number):angle.parse(s,d))/(Math.PI*2),et=isLengthPercentage(g)?g.number/100:0,tt=isLengthPercentage(_)?_.number/100:0,rt=typeof b<"u"&&isLengthPercentage(b)?getAbsoluteValue(b,1):1;if(et===0)return pack(tt*255,tt*255,tt*255,1);var at=tt<=.5?tt*(et+1):tt+et-tt*et,st=tt*2-at,At=hue2rgb(st,at,j+1/3),ht=hue2rgb(st,at,j),ct=hue2rgb(st,at,j-1/3);return pack(At*255,ht*255,ct*255,rt)},SUPPORTED_COLOR_FUNCTIONS={hsl,hsla:hsl,rgb,rgba:rgb},parseColor=function(s,o){return color$1.parse(s,Parser.create(o).parseComponentValue())},COLORS={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},backgroundClip={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(s,o){return o.map(function(h){if(isIdentToken(h))switch(h.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},backgroundColor={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},parseColorStop=function(s,o){var h=color$1.parse(s,o[0]),d=o[1];return d&&isLengthPercentage(d)?{color:h,stop:d}:{color:h,stop:null}},processColorStops=function(s,o){var h=s[0],d=s[s.length-1];h.stop===null&&(h.stop=ZERO_LENGTH),d.stop===null&&(d.stop=HUNDRED_PERCENT);for(var g=[],_=0,b=0;b<s.length;b++){var j=s[b].stop;if(j!==null){var et=getAbsoluteValue(j,o);et>_?g.push(et):g.push(_),_=et}else g.push(null)}for(var tt=null,b=0;b<g.length;b++){var rt=g[b];if(rt===null)tt===null&&(tt=b);else if(tt!==null){for(var at=b-tt,st=g[tt-1],At=(rt-st)/(at+1),ht=1;ht<=at;ht++)g[tt+ht-1]=At*ht;tt=null}}return s.map(function(ct,_t){var gt=ct.color;return{color:gt,stop:Math.max(Math.min(1,g[_t]/o),0)}})},getAngleFromCorner=function(s,o,h){var d=o/2,g=h/2,_=getAbsoluteValue(s[0],o)-d,b=g-getAbsoluteValue(s[1],h);return(Math.atan2(b,_)+Math.PI*2)%(Math.PI*2)},calculateGradientDirection=function(s,o,h){var d=typeof s=="number"?s:getAngleFromCorner(s,o,h),g=Math.abs(o*Math.sin(d))+Math.abs(h*Math.cos(d)),_=o/2,b=h/2,j=g/2,et=Math.sin(d-Math.PI/2)*j,tt=Math.cos(d-Math.PI/2)*j;return[g,_-tt,_+tt,b-et,b+et]},distance=function(s,o){return Math.sqrt(s*s+o*o)},findCorner=function(s,o,h,d,g){var _=[[0,0],[0,o],[s,0],[s,o]];return _.reduce(function(b,j){var et=j[0],tt=j[1],rt=distance(h-et,d-tt);return(g?rt<b.optimumDistance:rt>b.optimumDistance)?{optimumCorner:j,optimumDistance:rt}:b},{optimumDistance:g?1/0:-1/0,optimumCorner:null}).optimumCorner},calculateRadius=function(s,o,h,d,g){var _=0,b=0;switch(s.size){case 0:s.shape===0?_=b=Math.min(Math.abs(o),Math.abs(o-d),Math.abs(h),Math.abs(h-g)):s.shape===1&&(_=Math.min(Math.abs(o),Math.abs(o-d)),b=Math.min(Math.abs(h),Math.abs(h-g)));break;case 2:if(s.shape===0)_=b=Math.min(distance(o,h),distance(o,h-g),distance(o-d,h),distance(o-d,h-g));else if(s.shape===1){var j=Math.min(Math.abs(h),Math.abs(h-g))/Math.min(Math.abs(o),Math.abs(o-d)),et=findCorner(d,g,o,h,!0),tt=et[0],rt=et[1];_=distance(tt-o,(rt-h)/j),b=j*_}break;case 1:s.shape===0?_=b=Math.max(Math.abs(o),Math.abs(o-d),Math.abs(h),Math.abs(h-g)):s.shape===1&&(_=Math.max(Math.abs(o),Math.abs(o-d)),b=Math.max(Math.abs(h),Math.abs(h-g)));break;case 3:if(s.shape===0)_=b=Math.max(distance(o,h),distance(o,h-g),distance(o-d,h),distance(o-d,h-g));else if(s.shape===1){var j=Math.max(Math.abs(h),Math.abs(h-g))/Math.max(Math.abs(o),Math.abs(o-d)),at=findCorner(d,g,o,h,!1),tt=at[0],rt=at[1];_=distance(tt-o,(rt-h)/j),b=j*_}break}return Array.isArray(s.size)&&(_=getAbsoluteValue(s.size[0],d),b=s.size.length===2?getAbsoluteValue(s.size[1],g):_),[_,b]},linearGradient=function(s,o){var h=deg(180),d=[];return parseFunctionArgs(o).forEach(function(g,_){if(_===0){var b=g[0];if(b.type===20&&b.value==="to"){h=parseNamedSide(g);return}else if(isAngle(b)){h=angle.parse(s,b);return}}var j=parseColorStop(s,g);d.push(j)}),{angle:h,stops:d,type:1}},prefixLinearGradient=function(s,o){var h=deg(180),d=[];return parseFunctionArgs(o).forEach(function(g,_){if(_===0){var b=g[0];if(b.type===20&&["top","left","right","bottom"].indexOf(b.value)!==-1){h=parseNamedSide(g);return}else if(isAngle(b)){h=(angle.parse(s,b)+deg(270))%deg(360);return}}var j=parseColorStop(s,g);d.push(j)}),{angle:h,stops:d,type:1}},webkitGradient=function(s,o){var h=deg(180),d=[],g=1,_=0,b=3,j=[];return parseFunctionArgs(o).forEach(function(et,tt){var rt=et[0];if(tt===0){if(isIdentToken(rt)&&rt.value==="linear"){g=1;return}else if(isIdentToken(rt)&&rt.value==="radial"){g=2;return}}if(rt.type===18){if(rt.name==="from"){var at=color$1.parse(s,rt.values[0]);d.push({stop:ZERO_LENGTH,color:at})}else if(rt.name==="to"){var at=color$1.parse(s,rt.values[0]);d.push({stop:HUNDRED_PERCENT,color:at})}else if(rt.name==="color-stop"){var st=rt.values.filter(nonFunctionArgSeparator);if(st.length===2){var at=color$1.parse(s,st[1]),At=st[0];isNumberToken(At)&&d.push({stop:{type:16,number:At.number*100,flags:At.flags},color:at})}}}}),g===1?{angle:(h+deg(180))%deg(360),stops:d,type:g}:{size:b,shape:_,stops:d,position:j,type:g}},CLOSEST_SIDE="closest-side",FARTHEST_SIDE="farthest-side",CLOSEST_CORNER="closest-corner",FARTHEST_CORNER="farthest-corner",CIRCLE="circle",ELLIPSE="ellipse",COVER="cover",CONTAIN="contain",radialGradient=function(s,o){var h=0,d=3,g=[],_=[];return parseFunctionArgs(o).forEach(function(b,j){var et=!0;if(j===0){var tt=!1;et=b.reduce(function(at,st){if(tt)if(isIdentToken(st))switch(st.value){case"center":return _.push(FIFTY_PERCENT),at;case"top":case"left":return _.push(ZERO_LENGTH),at;case"right":case"bottom":return _.push(HUNDRED_PERCENT),at}else(isLengthPercentage(st)||isLength(st))&&_.push(st);else if(isIdentToken(st))switch(st.value){case CIRCLE:return h=0,!1;case ELLIPSE:return h=1,!1;case"at":return tt=!0,!1;case CLOSEST_SIDE:return d=0,!1;case COVER:case FARTHEST_SIDE:return d=1,!1;case CONTAIN:case CLOSEST_CORNER:return d=2,!1;case FARTHEST_CORNER:return d=3,!1}else if(isLength(st)||isLengthPercentage(st))return Array.isArray(d)||(d=[]),d.push(st),!1;return at},et)}if(et){var rt=parseColorStop(s,b);g.push(rt)}}),{size:d,shape:h,stops:g,position:_,type:2}},prefixRadialGradient=function(s,o){var h=0,d=3,g=[],_=[];return parseFunctionArgs(o).forEach(function(b,j){var et=!0;if(j===0?et=b.reduce(function(rt,at){if(isIdentToken(at))switch(at.value){case"center":return _.push(FIFTY_PERCENT),!1;case"top":case"left":return _.push(ZERO_LENGTH),!1;case"right":case"bottom":return _.push(HUNDRED_PERCENT),!1}else if(isLengthPercentage(at)||isLength(at))return _.push(at),!1;return rt},et):j===1&&(et=b.reduce(function(rt,at){if(isIdentToken(at))switch(at.value){case CIRCLE:return h=0,!1;case ELLIPSE:return h=1,!1;case CONTAIN:case CLOSEST_SIDE:return d=0,!1;case FARTHEST_SIDE:return d=1,!1;case CLOSEST_CORNER:return d=2,!1;case COVER:case FARTHEST_CORNER:return d=3,!1}else if(isLength(at)||isLengthPercentage(at))return Array.isArray(d)||(d=[]),d.push(at),!1;return rt},et)),et){var tt=parseColorStop(s,b);g.push(tt)}}),{size:d,shape:h,stops:g,position:_,type:2}},isLinearGradient=function(s){return s.type===1},isRadialGradient=function(s){return s.type===2},image={name:"image",parse:function(s,o){if(o.type===22){var h={url:o.value,type:0};return s.cache.addImage(o.value),h}if(o.type===18){var d=SUPPORTED_IMAGE_FUNCTIONS[o.name];if(typeof d>"u")throw new Error('Attempting to parse an unsupported image function "'+o.name+'"');return d(s,o.values)}throw new Error("Unsupported image type "+o.type)}};function isSupportedImage(s){return!(s.type===20&&s.value==="none")&&(s.type!==18||!!SUPPORTED_IMAGE_FUNCTIONS[s.name])}var SUPPORTED_IMAGE_FUNCTIONS={"linear-gradient":linearGradient,"-moz-linear-gradient":prefixLinearGradient,"-ms-linear-gradient":prefixLinearGradient,"-o-linear-gradient":prefixLinearGradient,"-webkit-linear-gradient":prefixLinearGradient,"radial-gradient":radialGradient,"-moz-radial-gradient":prefixRadialGradient,"-ms-radial-gradient":prefixRadialGradient,"-o-radial-gradient":prefixRadialGradient,"-webkit-radial-gradient":prefixRadialGradient,"-webkit-gradient":webkitGradient},backgroundImage={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(s,o){if(o.length===0)return[];var h=o[0];return h.type===20&&h.value==="none"?[]:o.filter(function(d){return nonFunctionArgSeparator(d)&&isSupportedImage(d)}).map(function(d){return image.parse(s,d)})}},backgroundOrigin={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(s,o){return o.map(function(h){if(isIdentToken(h))switch(h.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},backgroundPosition={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(s,o){return parseFunctionArgs(o).map(function(h){return h.filter(isLengthPercentage)}).map(parseLengthPercentageTuple)}},backgroundRepeat={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(s,o){return parseFunctionArgs(o).map(function(h){return h.filter(isIdentToken).map(function(d){return d.value}).join(" ")}).map(parseBackgroundRepeat)}},parseBackgroundRepeat=function(s){switch(s){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},BACKGROUND_SIZE;(function(s){s.AUTO="auto",s.CONTAIN="contain",s.COVER="cover"})(BACKGROUND_SIZE||(BACKGROUND_SIZE={}));var backgroundSize={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(s,o){return parseFunctionArgs(o).map(function(h){return h.filter(isBackgroundSizeInfoToken)})}},isBackgroundSizeInfoToken=function(s){return isIdentToken(s)||isLengthPercentage(s)},borderColorForSide=function(s){return{name:"border-"+s+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},borderTopColor=borderColorForSide("top"),borderRightColor=borderColorForSide("right"),borderBottomColor=borderColorForSide("bottom"),borderLeftColor=borderColorForSide("left"),borderRadiusForSide=function(s){return{name:"border-radius-"+s,initialValue:"0 0",prefix:!1,type:1,parse:function(o,h){return parseLengthPercentageTuple(h.filter(isLengthPercentage))}}},borderTopLeftRadius=borderRadiusForSide("top-left"),borderTopRightRadius=borderRadiusForSide("top-right"),borderBottomRightRadius=borderRadiusForSide("bottom-right"),borderBottomLeftRadius=borderRadiusForSide("bottom-left"),borderStyleForSide=function(s){return{name:"border-"+s+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(o,h){switch(h){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},borderTopStyle=borderStyleForSide("top"),borderRightStyle=borderStyleForSide("right"),borderBottomStyle=borderStyleForSide("bottom"),borderLeftStyle=borderStyleForSide("left"),borderWidthForSide=function(s){return{name:"border-"+s+"-width",initialValue:"0",type:0,prefix:!1,parse:function(o,h){return isDimensionToken(h)?h.number:0}}},borderTopWidth=borderWidthForSide("top"),borderRightWidth=borderWidthForSide("right"),borderBottomWidth=borderWidthForSide("bottom"),borderLeftWidth=borderWidthForSide("left"),color={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},direction={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(s,o){switch(o){case"rtl":return 1;case"ltr":default:return 0}}},display={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(s,o){return o.filter(isIdentToken).reduce(function(h,d){return h|parseDisplayValue(d.value)},0)}},parseDisplayValue=function(s){switch(s){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},float={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(s,o){switch(o){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},letterSpacing={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(s,o){return o.type===20&&o.value==="normal"?0:o.type===17||o.type===15?o.number:0}},LINE_BREAK;(function(s){s.NORMAL="normal",s.STRICT="strict"})(LINE_BREAK||(LINE_BREAK={}));var lineBreak={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(s,o){switch(o){case"strict":return LINE_BREAK.STRICT;case"normal":default:return LINE_BREAK.NORMAL}}},lineHeight={name:"line-height",initialValue:"normal",prefix:!1,type:4},computeLineHeight=function(s,o){return isIdentToken(s)&&s.value==="normal"?1.2*o:s.type===17?o*s.number:isLengthPercentage(s)?getAbsoluteValue(s,o):o},listStyleImage={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(s,o){return o.type===20&&o.value==="none"?null:image.parse(s,o)}},listStylePosition={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(s,o){switch(o){case"inside":return 0;case"outside":default:return 1}}},listStyleType={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(s,o){switch(o){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},marginForSide=function(s){return{name:"margin-"+s,initialValue:"0",prefix:!1,type:4}},marginTop=marginForSide("top"),marginRight=marginForSide("right"),marginBottom=marginForSide("bottom"),marginLeft=marginForSide("left"),overflow={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(s,o){return o.filter(isIdentToken).map(function(h){switch(h.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},overflowWrap={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(s,o){switch(o){case"break-word":return"break-word";case"normal":default:return"normal"}}},paddingForSide=function(s){return{name:"padding-"+s,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},paddingTop=paddingForSide("top"),paddingRight=paddingForSide("right"),paddingBottom=paddingForSide("bottom"),paddingLeft=paddingForSide("left"),textAlign={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(s,o){switch(o){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},position={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(s,o){switch(o){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},textShadow={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(s,o){return o.length===1&&isIdentWithValue(o[0],"none")?[]:parseFunctionArgs(o).map(function(h){for(var d={color:COLORS.TRANSPARENT,offsetX:ZERO_LENGTH,offsetY:ZERO_LENGTH,blur:ZERO_LENGTH},g=0,_=0;_<h.length;_++){var b=h[_];isLength(b)?(g===0?d.offsetX=b:g===1?d.offsetY=b:d.blur=b,g++):d.color=color$1.parse(s,b)}return d})}},textTransform={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(s,o){switch(o){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},transform$1={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(s,o){if(o.type===20&&o.value==="none")return null;if(o.type===18){var h=SUPPORTED_TRANSFORM_FUNCTIONS[o.name];if(typeof h>"u")throw new Error('Attempting to parse an unsupported transform function "'+o.name+'"');return h(o.values)}return null}},matrix=function(s){var o=s.filter(function(h){return h.type===17}).map(function(h){return h.number});return o.length===6?o:null},matrix3d=function(s){var o=s.filter(function(et){return et.type===17}).map(function(et){return et.number}),h=o[0],d=o[1];o[2],o[3];var g=o[4],_=o[5];o[6],o[7],o[8],o[9],o[10],o[11];var b=o[12],j=o[13];return o[14],o[15],o.length===16?[h,d,g,_,b,j]:null},SUPPORTED_TRANSFORM_FUNCTIONS={matrix,matrix3d},DEFAULT_VALUE={type:16,number:50,flags:FLAG_INTEGER},DEFAULT=[DEFAULT_VALUE,DEFAULT_VALUE],transformOrigin={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(s,o){var h=o.filter(isLengthPercentage);return h.length!==2?DEFAULT:[h[0],h[1]]}},visibility={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(s,o){switch(o){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},WORD_BREAK;(function(s){s.NORMAL="normal",s.BREAK_ALL="break-all",s.KEEP_ALL="keep-all"})(WORD_BREAK||(WORD_BREAK={}));var wordBreak={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(s,o){switch(o){case"break-all":return WORD_BREAK.BREAK_ALL;case"keep-all":return WORD_BREAK.KEEP_ALL;case"normal":default:return WORD_BREAK.NORMAL}}},zIndex={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(s,o){if(o.type===20)return{auto:!0,order:0};if(isNumberToken(o))return{auto:!1,order:o.number};throw new Error("Invalid z-index number parsed")}},time={name:"time",parse:function(s,o){if(o.type===15)switch(o.unit.toLowerCase()){case"s":return 1e3*o.number;case"ms":return o.number}throw new Error("Unsupported time type")}},opacity={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(s,o){return isNumberToken(o)?o.number:1}},textDecorationColor={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},textDecorationLine={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(s,o){return o.filter(isIdentToken).map(function(h){switch(h.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(h){return h!==0})}},fontFamily={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(s,o){var h=[],d=[];return o.forEach(function(g){switch(g.type){case 20:case 0:h.push(g.value);break;case 17:h.push(g.number.toString());break;case 4:d.push(h.join(" ")),h.length=0;break}}),h.length&&d.push(h.join(" ")),d.map(function(g){return g.indexOf(" ")===-1?g:"'"+g+"'"})}},fontSize={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},fontWeight={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(s,o){if(isNumberToken(o))return o.number;if(isIdentToken(o))switch(o.value){case"bold":return 700;case"normal":default:return 400}return 400}},fontVariant={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(s,o){return o.filter(isIdentToken).map(function(h){return h.value})}},fontStyle={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(s,o){switch(o){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},contains=function(s,o){return(s&o)!==0},content={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(s,o){if(o.length===0)return[];var h=o[0];return h.type===20&&h.value==="none"?[]:o}},counterIncrement={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(s,o){if(o.length===0)return null;var h=o[0];if(h.type===20&&h.value==="none")return null;for(var d=[],g=o.filter(nonWhiteSpace),_=0;_<g.length;_++){var b=g[_],j=g[_+1];if(b.type===20){var et=j&&isNumberToken(j)?j.number:1;d.push({counter:b.value,increment:et})}}return d}},counterReset={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(s,o){if(o.length===0)return[];for(var h=[],d=o.filter(nonWhiteSpace),g=0;g<d.length;g++){var _=d[g],b=d[g+1];if(isIdentToken(_)&&_.value!=="none"){var j=b&&isNumberToken(b)?b.number:0;h.push({counter:_.value,reset:j})}}return h}},duration={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(s,o){return o.filter(isDimensionToken).map(function(h){return time.parse(s,h)})}},quotes={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(s,o){if(o.length===0)return null;var h=o[0];if(h.type===20&&h.value==="none")return null;var d=[],g=o.filter(isStringToken);if(g.length%2!==0)return null;for(var _=0;_<g.length;_+=2){var b=g[_].value,j=g[_+1].value;d.push({open:b,close:j})}return d}},getQuote=function(s,o,h){if(!s)return"";var d=s[Math.min(o,s.length-1)];return d?h?d.open:d.close:""},boxShadow={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(s,o){return o.length===1&&isIdentWithValue(o[0],"none")?[]:parseFunctionArgs(o).map(function(h){for(var d={color:255,offsetX:ZERO_LENGTH,offsetY:ZERO_LENGTH,blur:ZERO_LENGTH,spread:ZERO_LENGTH,inset:!1},g=0,_=0;_<h.length;_++){var b=h[_];isIdentWithValue(b,"inset")?d.inset=!0:isLength(b)?(g===0?d.offsetX=b:g===1?d.offsetY=b:g===2?d.blur=b:d.spread=b,g++):d.color=color$1.parse(s,b)}return d})}},paintOrder={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(s,o){var h=[0,1,2],d=[];return o.filter(isIdentToken).forEach(function(g){switch(g.value){case"stroke":d.push(1);break;case"fill":d.push(0);break;case"markers":d.push(2);break}}),h.forEach(function(g){d.indexOf(g)===-1&&d.push(g)}),d}},webkitTextStrokeColor={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},webkitTextStrokeWidth={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(s,o){return isDimensionToken(o)?o.number:0}},CSSParsedDeclaration=function(){function s(o,h){var d,g;this.animationDuration=parse(o,duration,h.animationDuration),this.backgroundClip=parse(o,backgroundClip,h.backgroundClip),this.backgroundColor=parse(o,backgroundColor,h.backgroundColor),this.backgroundImage=parse(o,backgroundImage,h.backgroundImage),this.backgroundOrigin=parse(o,backgroundOrigin,h.backgroundOrigin),this.backgroundPosition=parse(o,backgroundPosition,h.backgroundPosition),this.backgroundRepeat=parse(o,backgroundRepeat,h.backgroundRepeat),this.backgroundSize=parse(o,backgroundSize,h.backgroundSize),this.borderTopColor=parse(o,borderTopColor,h.borderTopColor),this.borderRightColor=parse(o,borderRightColor,h.borderRightColor),this.borderBottomColor=parse(o,borderBottomColor,h.borderBottomColor),this.borderLeftColor=parse(o,borderLeftColor,h.borderLeftColor),this.borderTopLeftRadius=parse(o,borderTopLeftRadius,h.borderTopLeftRadius),this.borderTopRightRadius=parse(o,borderTopRightRadius,h.borderTopRightRadius),this.borderBottomRightRadius=parse(o,borderBottomRightRadius,h.borderBottomRightRadius),this.borderBottomLeftRadius=parse(o,borderBottomLeftRadius,h.borderBottomLeftRadius),this.borderTopStyle=parse(o,borderTopStyle,h.borderTopStyle),this.borderRightStyle=parse(o,borderRightStyle,h.borderRightStyle),this.borderBottomStyle=parse(o,borderBottomStyle,h.borderBottomStyle),this.borderLeftStyle=parse(o,borderLeftStyle,h.borderLeftStyle),this.borderTopWidth=parse(o,borderTopWidth,h.borderTopWidth),this.borderRightWidth=parse(o,borderRightWidth,h.borderRightWidth),this.borderBottomWidth=parse(o,borderBottomWidth,h.borderBottomWidth),this.borderLeftWidth=parse(o,borderLeftWidth,h.borderLeftWidth),this.boxShadow=parse(o,boxShadow,h.boxShadow),this.color=parse(o,color,h.color),this.direction=parse(o,direction,h.direction),this.display=parse(o,display,h.display),this.float=parse(o,float,h.cssFloat),this.fontFamily=parse(o,fontFamily,h.fontFamily),this.fontSize=parse(o,fontSize,h.fontSize),this.fontStyle=parse(o,fontStyle,h.fontStyle),this.fontVariant=parse(o,fontVariant,h.fontVariant),this.fontWeight=parse(o,fontWeight,h.fontWeight),this.letterSpacing=parse(o,letterSpacing,h.letterSpacing),this.lineBreak=parse(o,lineBreak,h.lineBreak),this.lineHeight=parse(o,lineHeight,h.lineHeight),this.listStyleImage=parse(o,listStyleImage,h.listStyleImage),this.listStylePosition=parse(o,listStylePosition,h.listStylePosition),this.listStyleType=parse(o,listStyleType,h.listStyleType),this.marginTop=parse(o,marginTop,h.marginTop),this.marginRight=parse(o,marginRight,h.marginRight),this.marginBottom=parse(o,marginBottom,h.marginBottom),this.marginLeft=parse(o,marginLeft,h.marginLeft),this.opacity=parse(o,opacity,h.opacity);var _=parse(o,overflow,h.overflow);this.overflowX=_[0],this.overflowY=_[_.length>1?1:0],this.overflowWrap=parse(o,overflowWrap,h.overflowWrap),this.paddingTop=parse(o,paddingTop,h.paddingTop),this.paddingRight=parse(o,paddingRight,h.paddingRight),this.paddingBottom=parse(o,paddingBottom,h.paddingBottom),this.paddingLeft=parse(o,paddingLeft,h.paddingLeft),this.paintOrder=parse(o,paintOrder,h.paintOrder),this.position=parse(o,position,h.position),this.textAlign=parse(o,textAlign,h.textAlign),this.textDecorationColor=parse(o,textDecorationColor,(d=h.textDecorationColor)!==null&&d!==void 0?d:h.color),this.textDecorationLine=parse(o,textDecorationLine,(g=h.textDecorationLine)!==null&&g!==void 0?g:h.textDecoration),this.textShadow=parse(o,textShadow,h.textShadow),this.textTransform=parse(o,textTransform,h.textTransform),this.transform=parse(o,transform$1,h.transform),this.transformOrigin=parse(o,transformOrigin,h.transformOrigin),this.visibility=parse(o,visibility,h.visibility),this.webkitTextStrokeColor=parse(o,webkitTextStrokeColor,h.webkitTextStrokeColor),this.webkitTextStrokeWidth=parse(o,webkitTextStrokeWidth,h.webkitTextStrokeWidth),this.wordBreak=parse(o,wordBreak,h.wordBreak),this.zIndex=parse(o,zIndex,h.zIndex)}return s.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},s.prototype.isTransparent=function(){return isTransparent(this.backgroundColor)},s.prototype.isTransformed=function(){return this.transform!==null},s.prototype.isPositioned=function(){return this.position!==0},s.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},s.prototype.isFloating=function(){return this.float!==0},s.prototype.isInlineLevel=function(){return contains(this.display,4)||contains(this.display,33554432)||contains(this.display,268435456)||contains(this.display,536870912)||contains(this.display,67108864)||contains(this.display,134217728)},s}(),CSSParsedPseudoDeclaration=function(){function s(o,h){this.content=parse(o,content,h.content),this.quotes=parse(o,quotes,h.quotes)}return s}(),CSSParsedCounterDeclaration=function(){function s(o,h){this.counterIncrement=parse(o,counterIncrement,h.counterIncrement),this.counterReset=parse(o,counterReset,h.counterReset)}return s}(),parse=function(s,o,h){var d=new Tokenizer,g=h!==null&&typeof h<"u"?h.toString():o.initialValue;d.write(g);var _=new Parser(d.read());switch(o.type){case 2:var b=_.parseComponentValue();return o.parse(s,isIdentToken(b)?b.value:o.initialValue);case 0:return o.parse(s,_.parseComponentValue());case 1:return o.parse(s,_.parseComponentValues());case 4:return _.parseComponentValue();case 3:switch(o.format){case"angle":return angle.parse(s,_.parseComponentValue());case"color":return color$1.parse(s,_.parseComponentValue());case"image":return image.parse(s,_.parseComponentValue());case"length":var j=_.parseComponentValue();return isLength(j)?j:ZERO_LENGTH;case"length-percentage":var et=_.parseComponentValue();return isLengthPercentage(et)?et:ZERO_LENGTH;case"time":return time.parse(s,_.parseComponentValue())}break}},elementDebuggerAttribute="data-html2canvas-debug",getElementDebugType=function(s){var o=s.getAttribute(elementDebuggerAttribute);switch(o){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},isDebugging=function(s,o){var h=getElementDebugType(s);return h===1||o===h},ElementContainer=function(){function s(o,h){if(this.context=o,this.textNodes=[],this.elements=[],this.flags=0,isDebugging(h,3))debugger;this.styles=new CSSParsedDeclaration(o,window.getComputedStyle(h,null)),isHTMLElementNode(h)&&(this.styles.animationDuration.some(function(d){return d>0})&&(h.style.animationDuration="0s"),this.styles.transform!==null&&(h.style.transform="none")),this.bounds=parseBounds(this.context,h),isDebugging(h,4)&&(this.flags|=16)}return s}(),base64="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",chars$1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup$1=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var i$1=0;i$1<chars$1.length;i$1++)lookup$1[chars$1.charCodeAt(i$1)]=i$1;var decode=function(s){var o=s.length*.75,h=s.length,d,g=0,_,b,j,et;s[s.length-1]==="="&&(o--,s[s.length-2]==="="&&o--);var tt=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(o):new Array(o),rt=Array.isArray(tt)?tt:new Uint8Array(tt);for(d=0;d<h;d+=4)_=lookup$1[s.charCodeAt(d)],b=lookup$1[s.charCodeAt(d+1)],j=lookup$1[s.charCodeAt(d+2)],et=lookup$1[s.charCodeAt(d+3)],rt[g++]=_<<2|b>>4,rt[g++]=(b&15)<<4|j>>2,rt[g++]=(j&3)<<6|et&63;return tt},polyUint16Array=function(s){for(var o=s.length,h=[],d=0;d<o;d+=2)h.push(s[d+1]<<8|s[d]);return h},polyUint32Array=function(s){for(var o=s.length,h=[],d=0;d<o;d+=4)h.push(s[d+3]<<24|s[d+2]<<16|s[d+1]<<8|s[d]);return h},UTRIE2_SHIFT_2=5,UTRIE2_SHIFT_1=11,UTRIE2_INDEX_SHIFT=2,UTRIE2_SHIFT_1_2=UTRIE2_SHIFT_1-UTRIE2_SHIFT_2,UTRIE2_LSCP_INDEX_2_OFFSET=65536>>UTRIE2_SHIFT_2,UTRIE2_DATA_BLOCK_LENGTH=1<<UTRIE2_SHIFT_2,UTRIE2_DATA_MASK=UTRIE2_DATA_BLOCK_LENGTH-1,UTRIE2_LSCP_INDEX_2_LENGTH=1024>>UTRIE2_SHIFT_2,UTRIE2_INDEX_2_BMP_LENGTH=UTRIE2_LSCP_INDEX_2_OFFSET+UTRIE2_LSCP_INDEX_2_LENGTH,UTRIE2_UTF8_2B_INDEX_2_OFFSET=UTRIE2_INDEX_2_BMP_LENGTH,UTRIE2_UTF8_2B_INDEX_2_LENGTH=32,UTRIE2_INDEX_1_OFFSET=UTRIE2_UTF8_2B_INDEX_2_OFFSET+UTRIE2_UTF8_2B_INDEX_2_LENGTH,UTRIE2_OMITTED_BMP_INDEX_1_LENGTH=65536>>UTRIE2_SHIFT_1,UTRIE2_INDEX_2_BLOCK_LENGTH=1<<UTRIE2_SHIFT_1_2,UTRIE2_INDEX_2_MASK=UTRIE2_INDEX_2_BLOCK_LENGTH-1,slice16=function(s,o,h){return s.slice?s.slice(o,h):new Uint16Array(Array.prototype.slice.call(s,o,h))},slice32=function(s,o,h){return s.slice?s.slice(o,h):new Uint32Array(Array.prototype.slice.call(s,o,h))},createTrieFromBase64=function(s,o){var h=decode(s),d=Array.isArray(h)?polyUint32Array(h):new Uint32Array(h),g=Array.isArray(h)?polyUint16Array(h):new Uint16Array(h),_=24,b=slice16(g,_/2,d[4]/2),j=d[5]===2?slice16(g,(_+d[4])/2):slice32(d,Math.ceil((_+d[4])/4));return new Trie(d[0],d[1],d[2],d[3],b,j)},Trie=function(){function s(o,h,d,g,_,b){this.initialValue=o,this.errorValue=h,this.highStart=d,this.highValueIndex=g,this.index=_,this.data=b}return s.prototype.get=function(o){var h;if(o>=0){if(o<55296||o>56319&&o<=65535)return h=this.index[o>>UTRIE2_SHIFT_2],h=(h<<UTRIE2_INDEX_SHIFT)+(o&UTRIE2_DATA_MASK),this.data[h];if(o<=65535)return h=this.index[UTRIE2_LSCP_INDEX_2_OFFSET+(o-55296>>UTRIE2_SHIFT_2)],h=(h<<UTRIE2_INDEX_SHIFT)+(o&UTRIE2_DATA_MASK),this.data[h];if(o<this.highStart)return h=UTRIE2_INDEX_1_OFFSET-UTRIE2_OMITTED_BMP_INDEX_1_LENGTH+(o>>UTRIE2_SHIFT_1),h=this.index[h],h+=o>>UTRIE2_SHIFT_2&UTRIE2_INDEX_2_MASK,h=this.index[h],h=(h<<UTRIE2_INDEX_SHIFT)+(o&UTRIE2_DATA_MASK),this.data[h];if(o<=1114111)return this.data[this.highValueIndex]}return this.errorValue},s}(),chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var i=0;i<chars.length;i++)lookup[chars.charCodeAt(i)]=i;var Prepend=1,CR=2,LF=3,Control=4,Extend=5,SpacingMark=7,L$1=8,V=9,T=10,LV=11,LVT=12,ZWJ=13,Extended_Pictographic=14,RI=15,toCodePoints=function(s){for(var o=[],h=0,d=s.length;h<d;){var g=s.charCodeAt(h++);if(g>=55296&&g<=56319&&h<d){var _=s.charCodeAt(h++);(_&64512)===56320?o.push(((g&1023)<<10)+(_&1023)+65536):(o.push(g),h--)}else o.push(g)}return o},fromCodePoint=function(){for(var s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];if(String.fromCodePoint)return String.fromCodePoint.apply(String,s);var h=s.length;if(!h)return"";for(var d=[],g=-1,_="";++g<h;){var b=s[g];b<=65535?d.push(b):(b-=65536,d.push((b>>10)+55296,b%1024+56320)),(g+1===h||d.length>16384)&&(_+=String.fromCharCode.apply(String,d),d.length=0)}return _},UnicodeTrie=createTrieFromBase64(base64),BREAK_NOT_ALLOWED="×",BREAK_ALLOWED="÷",codePointToClass=function(s){return UnicodeTrie.get(s)},_graphemeBreakAtIndex=function(s,o,h){var d=h-2,g=o[d],_=o[h-1],b=o[h];if(_===CR&&b===LF)return BREAK_NOT_ALLOWED;if(_===CR||_===LF||_===Control||b===CR||b===LF||b===Control)return BREAK_ALLOWED;if(_===L$1&&[L$1,V,LV,LVT].indexOf(b)!==-1||(_===LV||_===V)&&(b===V||b===T)||(_===LVT||_===T)&&b===T||b===ZWJ||b===Extend||b===SpacingMark||_===Prepend)return BREAK_NOT_ALLOWED;if(_===ZWJ&&b===Extended_Pictographic){for(;g===Extend;)g=o[--d];if(g===Extended_Pictographic)return BREAK_NOT_ALLOWED}if(_===RI&&b===RI){for(var j=0;g===RI;)j++,g=o[--d];if(j%2===0)return BREAK_NOT_ALLOWED}return BREAK_ALLOWED},GraphemeBreaker=function(s){var o=toCodePoints(s),h=o.length,d=0,g=0,_=o.map(codePointToClass);return{next:function(){if(d>=h)return{done:!0,value:null};for(var b=BREAK_NOT_ALLOWED;d<h&&(b=_graphemeBreakAtIndex(o,_,++d))===BREAK_NOT_ALLOWED;);if(b!==BREAK_NOT_ALLOWED||d===h){var j=fromCodePoint.apply(null,o.slice(g,d));return g=d,{value:j,done:!1}}return{done:!0,value:null}}}},splitGraphemes=function(s){for(var o=GraphemeBreaker(s),h=[],d;!(d=o.next()).done;)d.value&&h.push(d.value.slice());return h},testRangeBounds=function(s){var o=123;if(s.createRange){var h=s.createRange();if(h.getBoundingClientRect){var d=s.createElement("boundtest");d.style.height=o+"px",d.style.display="block",s.body.appendChild(d),h.selectNode(d);var g=h.getBoundingClientRect(),_=Math.round(g.height);if(s.body.removeChild(d),_===o)return!0}}return!1},testIOSLineBreak=function(s){var o=s.createElement("boundtest");o.style.width="50px",o.style.display="block",o.style.fontSize="12px",o.style.letterSpacing="0px",o.style.wordSpacing="0px",s.body.appendChild(o);var h=s.createRange();o.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var d=o.firstChild,g=toCodePoints$1(d.data).map(function(et){return fromCodePoint$1(et)}),_=0,b={},j=g.every(function(et,tt){h.setStart(d,_),h.setEnd(d,_+et.length);var rt=h.getBoundingClientRect();_+=et.length;var at=rt.x>b.x||rt.y>b.y;return b=rt,tt===0?!0:at});return s.body.removeChild(o),j},testCORS=function(){return typeof new Image().crossOrigin<"u"},testResponseType=function(){return typeof new XMLHttpRequest().responseType=="string"},testSVG=function(s){var o=new Image,h=s.createElement("canvas"),d=h.getContext("2d");if(!d)return!1;o.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{d.drawImage(o,0,0),h.toDataURL()}catch{return!1}return!0},isGreenPixel=function(s){return s[0]===0&&s[1]===255&&s[2]===0&&s[3]===255},testForeignObject=function(s){var o=s.createElement("canvas"),h=100;o.width=h,o.height=h;var d=o.getContext("2d");if(!d)return Promise.reject(!1);d.fillStyle="rgb(0, 255, 0)",d.fillRect(0,0,h,h);var g=new Image,_=o.toDataURL();g.src=_;var b=createForeignObjectSVG(h,h,0,0,g);return d.fillStyle="red",d.fillRect(0,0,h,h),loadSerializedSVG$1(b).then(function(j){d.drawImage(j,0,0);var et=d.getImageData(0,0,h,h).data;d.fillStyle="red",d.fillRect(0,0,h,h);var tt=s.createElement("div");return tt.style.backgroundImage="url("+_+")",tt.style.height=h+"px",isGreenPixel(et)?loadSerializedSVG$1(createForeignObjectSVG(h,h,0,0,tt)):Promise.reject(!1)}).then(function(j){return d.drawImage(j,0,0),isGreenPixel(d.getImageData(0,0,h,h).data)}).catch(function(){return!1})},createForeignObjectSVG=function(s,o,h,d,g){var _="http://www.w3.org/2000/svg",b=document.createElementNS(_,"svg"),j=document.createElementNS(_,"foreignObject");return b.setAttributeNS(null,"width",s.toString()),b.setAttributeNS(null,"height",o.toString()),j.setAttributeNS(null,"width","100%"),j.setAttributeNS(null,"height","100%"),j.setAttributeNS(null,"x",h.toString()),j.setAttributeNS(null,"y",d.toString()),j.setAttributeNS(null,"externalResourcesRequired","true"),b.appendChild(j),j.appendChild(g),b},loadSerializedSVG$1=function(s){return new Promise(function(o,h){var d=new Image;d.onload=function(){return o(d)},d.onerror=h,d.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(s))})},FEATURES={get SUPPORT_RANGE_BOUNDS(){var s=testRangeBounds(document);return Object.defineProperty(FEATURES,"SUPPORT_RANGE_BOUNDS",{value:s}),s},get SUPPORT_WORD_BREAKING(){var s=FEATURES.SUPPORT_RANGE_BOUNDS&&testIOSLineBreak(document);return Object.defineProperty(FEATURES,"SUPPORT_WORD_BREAKING",{value:s}),s},get SUPPORT_SVG_DRAWING(){var s=testSVG(document);return Object.defineProperty(FEATURES,"SUPPORT_SVG_DRAWING",{value:s}),s},get SUPPORT_FOREIGNOBJECT_DRAWING(){var s=typeof Array.from=="function"&&typeof window.fetch=="function"?testForeignObject(document):Promise.resolve(!1);return Object.defineProperty(FEATURES,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:s}),s},get SUPPORT_CORS_IMAGES(){var s=testCORS();return Object.defineProperty(FEATURES,"SUPPORT_CORS_IMAGES",{value:s}),s},get SUPPORT_RESPONSE_TYPE(){var s=testResponseType();return Object.defineProperty(FEATURES,"SUPPORT_RESPONSE_TYPE",{value:s}),s},get SUPPORT_CORS_XHR(){var s="withCredentials"in new XMLHttpRequest;return Object.defineProperty(FEATURES,"SUPPORT_CORS_XHR",{value:s}),s},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var s=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(FEATURES,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:s}),s}},TextBounds=function(){function s(o,h){this.text=o,this.bounds=h}return s}(),parseTextBounds=function(s,o,h,d){var g=breakText(o,h),_=[],b=0;return g.forEach(function(j){if(h.textDecorationLine.length||j.trim().length>0)if(FEATURES.SUPPORT_RANGE_BOUNDS){var et=createRange(d,b,j.length).getClientRects();if(et.length>1){var tt=segmentGraphemes(j),rt=0;tt.forEach(function(st){_.push(new TextBounds(st,Bounds.fromDOMRectList(s,createRange(d,rt+b,st.length).getClientRects()))),rt+=st.length})}else _.push(new TextBounds(j,Bounds.fromDOMRectList(s,et)))}else{var at=d.splitText(j.length);_.push(new TextBounds(j,getWrapperBounds(s,d))),d=at}else FEATURES.SUPPORT_RANGE_BOUNDS||(d=d.splitText(j.length));b+=j.length}),_},getWrapperBounds=function(s,o){var h=o.ownerDocument;if(h){var d=h.createElement("html2canvaswrapper");d.appendChild(o.cloneNode(!0));var g=o.parentNode;if(g){g.replaceChild(d,o);var _=parseBounds(s,d);return d.firstChild&&g.replaceChild(d.firstChild,d),_}}return Bounds.EMPTY},createRange=function(s,o,h){var d=s.ownerDocument;if(!d)throw new Error("Node has no owner document");var g=d.createRange();return g.setStart(s,o),g.setEnd(s,o+h),g},segmentGraphemes=function(s){if(FEATURES.SUPPORT_NATIVE_TEXT_SEGMENTATION){var o=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(o.segment(s)).map(function(h){return h.segment})}return splitGraphemes(s)},segmentWords=function(s,o){if(FEATURES.SUPPORT_NATIVE_TEXT_SEGMENTATION){var h=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(h.segment(s)).map(function(d){return d.segment})}return breakWords(s,o)},breakText=function(s,o){return o.letterSpacing!==0?segmentGraphemes(s):segmentWords(s,o)},wordSeparators=[32,160,4961,65792,65793,4153,4241],breakWords=function(s,o){for(var h=LineBreaker(s,{lineBreak:o.lineBreak,wordBreak:o.overflowWrap==="break-word"?"break-word":o.wordBreak}),d=[],g,_=function(){if(g.value){var b=g.value.slice(),j=toCodePoints$1(b),et="";j.forEach(function(tt){wordSeparators.indexOf(tt)===-1?et+=fromCodePoint$1(tt):(et.length&&d.push(et),d.push(fromCodePoint$1(tt)),et="")}),et.length&&d.push(et)}};!(g=h.next()).done;)_();return d},TextContainer=function(){function s(o,h,d){this.text=transform(h.data,d.textTransform),this.textBounds=parseTextBounds(o,this.text,d,h)}return s}(),transform=function(s,o){switch(o){case 1:return s.toLowerCase();case 3:return s.replace(CAPITALIZE,capitalize);case 2:return s.toUpperCase();default:return s}},CAPITALIZE=/(^|\s|:|-|\(|\))([a-z])/g,capitalize=function(s,o,h){return s.length>0?o+h.toUpperCase():s},ImageElementContainer=function(s){__extends(o,s);function o(h,d){var g=s.call(this,h,d)||this;return g.src=d.currentSrc||d.src,g.intrinsicWidth=d.naturalWidth,g.intrinsicHeight=d.naturalHeight,g.context.cache.addImage(g.src),g}return o}(ElementContainer),CanvasElementContainer=function(s){__extends(o,s);function o(h,d){var g=s.call(this,h,d)||this;return g.canvas=d,g.intrinsicWidth=d.width,g.intrinsicHeight=d.height,g}return o}(ElementContainer),SVGElementContainer=function(s){__extends(o,s);function o(h,d){var g=s.call(this,h,d)||this,_=new XMLSerializer,b=parseBounds(h,d);return d.setAttribute("width",b.width+"px"),d.setAttribute("height",b.height+"px"),g.svg="data:image/svg+xml,"+encodeURIComponent(_.serializeToString(d)),g.intrinsicWidth=d.width.baseVal.value,g.intrinsicHeight=d.height.baseVal.value,g.context.cache.addImage(g.svg),g}return o}(ElementContainer),LIElementContainer=function(s){__extends(o,s);function o(h,d){var g=s.call(this,h,d)||this;return g.value=d.value,g}return o}(ElementContainer),OLElementContainer=function(s){__extends(o,s);function o(h,d){var g=s.call(this,h,d)||this;return g.start=d.start,g.reversed=typeof d.reversed=="boolean"&&d.reversed===!0,g}return o}(ElementContainer),CHECKBOX_BORDER_RADIUS=[{type:15,flags:0,unit:"px",number:3}],RADIO_BORDER_RADIUS=[{type:16,flags:0,number:50}],reformatInputBounds=function(s){return s.width>s.height?new Bounds(s.left+(s.width-s.height)/2,s.top,s.height,s.height):s.width<s.height?new Bounds(s.left,s.top+(s.height-s.width)/2,s.width,s.width):s},getInputValue=function(s){var o=s.type===PASSWORD?new Array(s.value.length+1).join("•"):s.value;return o.length===0?s.placeholder||"":o},CHECKBOX="checkbox",RADIO="radio",PASSWORD="password",INPUT_COLOR=707406591,InputElementContainer=function(s){__extends(o,s);function o(h,d){var g=s.call(this,h,d)||this;switch(g.type=d.type.toLowerCase(),g.checked=d.checked,g.value=getInputValue(d),(g.type===CHECKBOX||g.type===RADIO)&&(g.styles.backgroundColor=3739148031,g.styles.borderTopColor=g.styles.borderRightColor=g.styles.borderBottomColor=g.styles.borderLeftColor=2779096575,g.styles.borderTopWidth=g.styles.borderRightWidth=g.styles.borderBottomWidth=g.styles.borderLeftWidth=1,g.styles.borderTopStyle=g.styles.borderRightStyle=g.styles.borderBottomStyle=g.styles.borderLeftStyle=1,g.styles.backgroundClip=[0],g.styles.backgroundOrigin=[0],g.bounds=reformatInputBounds(g.bounds)),g.type){case CHECKBOX:g.styles.borderTopRightRadius=g.styles.borderTopLeftRadius=g.styles.borderBottomRightRadius=g.styles.borderBottomLeftRadius=CHECKBOX_BORDER_RADIUS;break;case RADIO:g.styles.borderTopRightRadius=g.styles.borderTopLeftRadius=g.styles.borderBottomRightRadius=g.styles.borderBottomLeftRadius=RADIO_BORDER_RADIUS;break}return g}return o}(ElementContainer),SelectElementContainer=function(s){__extends(o,s);function o(h,d){var g=s.call(this,h,d)||this,_=d.options[d.selectedIndex||0];return g.value=_&&_.text||"",g}return o}(ElementContainer),TextareaElementContainer=function(s){__extends(o,s);function o(h,d){var g=s.call(this,h,d)||this;return g.value=d.value,g}return o}(ElementContainer),IFrameElementContainer=function(s){__extends(o,s);function o(h,d){var g=s.call(this,h,d)||this;g.src=d.src,g.width=parseInt(d.width,10)||0,g.height=parseInt(d.height,10)||0,g.backgroundColor=g.styles.backgroundColor;try{if(d.contentWindow&&d.contentWindow.document&&d.contentWindow.document.documentElement){g.tree=parseTree(h,d.contentWindow.document.documentElement);var _=d.contentWindow.document.documentElement?parseColor(h,getComputedStyle(d.contentWindow.document.documentElement).backgroundColor):COLORS.TRANSPARENT,b=d.contentWindow.document.body?parseColor(h,getComputedStyle(d.contentWindow.document.body).backgroundColor):COLORS.TRANSPARENT;g.backgroundColor=isTransparent(_)?isTransparent(b)?g.styles.backgroundColor:b:_}}catch{}return g}return o}(ElementContainer),LIST_OWNERS=["OL","UL","MENU"],parseNodeTree=function(s,o,h,d){for(var g=o.firstChild,_=void 0;g;g=_)if(_=g.nextSibling,isTextNode(g)&&g.data.trim().length>0)h.textNodes.push(new TextContainer(s,g,h.styles));else if(isElementNode(g))if(isSlotElement(g)&&g.assignedNodes)g.assignedNodes().forEach(function(j){return parseNodeTree(s,j,h,d)});else{var b=createContainer(s,g);b.styles.isVisible()&&(createsRealStackingContext(g,b,d)?b.flags|=4:createsStackingContext(b.styles)&&(b.flags|=2),LIST_OWNERS.indexOf(g.tagName)!==-1&&(b.flags|=8),h.elements.push(b),g.slot,g.shadowRoot?parseNodeTree(s,g.shadowRoot,b,d):!isTextareaElement(g)&&!isSVGElement(g)&&!isSelectElement(g)&&parseNodeTree(s,g,b,d))}},createContainer=function(s,o){return isImageElement(o)?new ImageElementContainer(s,o):isCanvasElement(o)?new CanvasElementContainer(s,o):isSVGElement(o)?new SVGElementContainer(s,o):isLIElement(o)?new LIElementContainer(s,o):isOLElement(o)?new OLElementContainer(s,o):isInputElement(o)?new InputElementContainer(s,o):isSelectElement(o)?new SelectElementContainer(s,o):isTextareaElement(o)?new TextareaElementContainer(s,o):isIFrameElement(o)?new IFrameElementContainer(s,o):new ElementContainer(s,o)},parseTree=function(s,o){var h=createContainer(s,o);return h.flags|=4,parseNodeTree(s,o,h,h),h},createsRealStackingContext=function(s,o,h){return o.styles.isPositionedWithZIndex()||o.styles.opacity<1||o.styles.isTransformed()||isBodyElement(s)&&h.styles.isTransparent()},createsStackingContext=function(s){return s.isPositioned()||s.isFloating()},isTextNode=function(s){return s.nodeType===Node.TEXT_NODE},isElementNode=function(s){return s.nodeType===Node.ELEMENT_NODE},isHTMLElementNode=function(s){return isElementNode(s)&&typeof s.style<"u"&&!isSVGElementNode(s)},isSVGElementNode=function(s){return typeof s.className=="object"},isLIElement=function(s){return s.tagName==="LI"},isOLElement=function(s){return s.tagName==="OL"},isInputElement=function(s){return s.tagName==="INPUT"},isHTMLElement=function(s){return s.tagName==="HTML"},isSVGElement=function(s){return s.tagName==="svg"},isBodyElement=function(s){return s.tagName==="BODY"},isCanvasElement=function(s){return s.tagName==="CANVAS"},isVideoElement=function(s){return s.tagName==="VIDEO"},isImageElement=function(s){return s.tagName==="IMG"},isIFrameElement=function(s){return s.tagName==="IFRAME"},isStyleElement=function(s){return s.tagName==="STYLE"},isScriptElement=function(s){return s.tagName==="SCRIPT"},isTextareaElement=function(s){return s.tagName==="TEXTAREA"},isSelectElement=function(s){return s.tagName==="SELECT"},isSlotElement=function(s){return s.tagName==="SLOT"},isCustomElement=function(s){return s.tagName.indexOf("-")>0},CounterState=function(){function s(){this.counters={}}return s.prototype.getCounterValue=function(o){var h=this.counters[o];return h&&h.length?h[h.length-1]:1},s.prototype.getCounterValues=function(o){var h=this.counters[o];return h||[]},s.prototype.pop=function(o){var h=this;o.forEach(function(d){return h.counters[d].pop()})},s.prototype.parse=function(o){var h=this,d=o.counterIncrement,g=o.counterReset,_=!0;d!==null&&d.forEach(function(j){var et=h.counters[j.counter];et&&j.increment!==0&&(_=!1,et.length||et.push(1),et[Math.max(0,et.length-1)]+=j.increment)});var b=[];return _&&g.forEach(function(j){var et=h.counters[j.counter];b.push(j.counter),et||(et=h.counters[j.counter]=[]),et.push(j.reset)}),b},s}(),ROMAN_UPPER={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},ARMENIAN={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},HEBREW={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},GEORGIAN={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},createAdditiveCounter=function(s,o,h,d,g,_){return s<o||s>h?createCounterText(s,g,_.length>0):d.integers.reduce(function(b,j,et){for(;s>=j;)s-=j,b+=d.values[et];return b},"")+_},createCounterStyleWithSymbolResolver=function(s,o,h,d){var g="";do h||s--,g=d(s)+g,s/=o;while(s*o>=o);return g},createCounterStyleFromRange=function(s,o,h,d,g){var _=h-o+1;return(s<0?"-":"")+(createCounterStyleWithSymbolResolver(Math.abs(s),_,d,function(b){return fromCodePoint$1(Math.floor(b%_)+o)})+g)},createCounterStyleFromSymbols=function(s,o,h){h===void 0&&(h=". ");var d=o.length;return createCounterStyleWithSymbolResolver(Math.abs(s),d,!1,function(g){return o[Math.floor(g%d)]})+h},CJK_ZEROS=1,CJK_TEN_COEFFICIENTS=2,CJK_TEN_HIGH_COEFFICIENTS=4,CJK_HUNDRED_COEFFICIENTS=8,createCJKCounter=function(s,o,h,d,g,_){if(s<-9999||s>9999)return createCounterText(s,4,g.length>0);var b=Math.abs(s),j=g;if(b===0)return o[0]+j;for(var et=0;b>0&&et<=4;et++){var tt=b%10;tt===0&&contains(_,CJK_ZEROS)&&j!==""?j=o[tt]+j:tt>1||tt===1&&et===0||tt===1&&et===1&&contains(_,CJK_TEN_COEFFICIENTS)||tt===1&&et===1&&contains(_,CJK_TEN_HIGH_COEFFICIENTS)&&s>100||tt===1&&et>1&&contains(_,CJK_HUNDRED_COEFFICIENTS)?j=o[tt]+(et>0?h[et-1]:"")+j:tt===1&&et>0&&(j=h[et-1]+j),b=Math.floor(b/10)}return(s<0?d:"")+j},CHINESE_INFORMAL_MULTIPLIERS="十百千萬",CHINESE_FORMAL_MULTIPLIERS="拾佰仟萬",JAPANESE_NEGATIVE="マイナス",KOREAN_NEGATIVE="마이너스",createCounterText=function(s,o,h){var d=h?". ":"",g=h?"、":"",_=h?", ":"",b=h?" ":"";switch(o){case 0:return"•"+b;case 1:return"◦"+b;case 2:return"◾"+b;case 5:var j=createCounterStyleFromRange(s,48,57,!0,d);return j.length<4?"0"+j:j;case 4:return createCounterStyleFromSymbols(s,"〇一二三四五六七八九",g);case 6:return createAdditiveCounter(s,1,3999,ROMAN_UPPER,3,d).toLowerCase();case 7:return createAdditiveCounter(s,1,3999,ROMAN_UPPER,3,d);case 8:return createCounterStyleFromRange(s,945,969,!1,d);case 9:return createCounterStyleFromRange(s,97,122,!1,d);case 10:return createCounterStyleFromRange(s,65,90,!1,d);case 11:return createCounterStyleFromRange(s,1632,1641,!0,d);case 12:case 49:return createAdditiveCounter(s,1,9999,ARMENIAN,3,d);case 35:return createAdditiveCounter(s,1,9999,ARMENIAN,3,d).toLowerCase();case 13:return createCounterStyleFromRange(s,2534,2543,!0,d);case 14:case 30:return createCounterStyleFromRange(s,6112,6121,!0,d);case 15:return createCounterStyleFromSymbols(s,"子丑寅卯辰巳午未申酉戌亥",g);case 16:return createCounterStyleFromSymbols(s,"甲乙丙丁戊己庚辛壬癸",g);case 17:case 48:return createCJKCounter(s,"零一二三四五六七八九",CHINESE_INFORMAL_MULTIPLIERS,"負",g,CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS|CJK_HUNDRED_COEFFICIENTS);case 47:return createCJKCounter(s,"零壹貳參肆伍陸柒捌玖",CHINESE_FORMAL_MULTIPLIERS,"負",g,CJK_ZEROS|CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS|CJK_HUNDRED_COEFFICIENTS);case 42:return createCJKCounter(s,"零一二三四五六七八九",CHINESE_INFORMAL_MULTIPLIERS,"负",g,CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS|CJK_HUNDRED_COEFFICIENTS);case 41:return createCJKCounter(s,"零壹贰叁肆伍陆柒捌玖",CHINESE_FORMAL_MULTIPLIERS,"负",g,CJK_ZEROS|CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS|CJK_HUNDRED_COEFFICIENTS);case 26:return createCJKCounter(s,"〇一二三四五六七八九","十百千万",JAPANESE_NEGATIVE,g,0);case 25:return createCJKCounter(s,"零壱弐参四伍六七八九","拾百千万",JAPANESE_NEGATIVE,g,CJK_ZEROS|CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS);case 31:return createCJKCounter(s,"영일이삼사오육칠팔구","십백천만",KOREAN_NEGATIVE,_,CJK_ZEROS|CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS);case 33:return createCJKCounter(s,"零一二三四五六七八九","十百千萬",KOREAN_NEGATIVE,_,0);case 32:return createCJKCounter(s,"零壹貳參四五六七八九","拾百千",KOREAN_NEGATIVE,_,CJK_ZEROS|CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS);case 18:return createCounterStyleFromRange(s,2406,2415,!0,d);case 20:return createAdditiveCounter(s,1,19999,GEORGIAN,3,d);case 21:return createCounterStyleFromRange(s,2790,2799,!0,d);case 22:return createCounterStyleFromRange(s,2662,2671,!0,d);case 22:return createAdditiveCounter(s,1,10999,HEBREW,3,d);case 23:return createCounterStyleFromSymbols(s,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return createCounterStyleFromSymbols(s,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return createCounterStyleFromRange(s,3302,3311,!0,d);case 28:return createCounterStyleFromSymbols(s,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",g);case 29:return createCounterStyleFromSymbols(s,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",g);case 34:return createCounterStyleFromRange(s,3792,3801,!0,d);case 37:return createCounterStyleFromRange(s,6160,6169,!0,d);case 38:return createCounterStyleFromRange(s,4160,4169,!0,d);case 39:return createCounterStyleFromRange(s,2918,2927,!0,d);case 40:return createCounterStyleFromRange(s,1776,1785,!0,d);case 43:return createCounterStyleFromRange(s,3046,3055,!0,d);case 44:return createCounterStyleFromRange(s,3174,3183,!0,d);case 45:return createCounterStyleFromRange(s,3664,3673,!0,d);case 46:return createCounterStyleFromRange(s,3872,3881,!0,d);case 3:default:return createCounterStyleFromRange(s,48,57,!0,d)}},IGNORE_ATTRIBUTE="data-html2canvas-ignore",DocumentCloner=function(){function s(o,h,d){if(this.context=o,this.options=d,this.scrolledElements=[],this.referenceElement=h,this.counters=new CounterState,this.quoteDepth=0,!h.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(h.ownerDocument.documentElement,!1)}return s.prototype.toIFrame=function(o,h){var d=this,g=createIFrameContainer(o,h);if(!g.contentWindow)return Promise.reject("Unable to find iframe window");var _=o.defaultView.pageXOffset,b=o.defaultView.pageYOffset,j=g.contentWindow,et=j.document,tt=iframeLoader(g).then(function(){return __awaiter(d,void 0,void 0,function(){var rt,at;return __generator(this,function(st){switch(st.label){case 0:return this.scrolledElements.forEach(restoreNodeScroll),j&&(j.scrollTo(h.left,h.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(j.scrollY!==h.top||j.scrollX!==h.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(j.scrollX-h.left,j.scrollY-h.top,0,0))),rt=this.options.onclone,at=this.clonedReferenceElement,typeof at>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:et.fonts&&et.fonts.ready?[4,et.fonts.ready]:[3,2];case 1:st.sent(),st.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,imagesReady(et)]:[3,4];case 3:st.sent(),st.label=4;case 4:return typeof rt=="function"?[2,Promise.resolve().then(function(){return rt(et,at)}).then(function(){return g})]:[2,g]}})})});return et.open(),et.write(serializeDoctype(document.doctype)+"<html></html>"),restoreOwnerScroll(this.referenceElement.ownerDocument,_,b),et.replaceChild(et.adoptNode(this.documentElement),et.documentElement),et.close(),tt},s.prototype.createElementClone=function(o){if(isDebugging(o,2))debugger;if(isCanvasElement(o))return this.createCanvasClone(o);if(isVideoElement(o))return this.createVideoClone(o);if(isStyleElement(o))return this.createStyleClone(o);var h=o.cloneNode(!1);return isImageElement(h)&&(isImageElement(o)&&o.currentSrc&&o.currentSrc!==o.src&&(h.src=o.currentSrc,h.srcset=""),h.loading==="lazy"&&(h.loading="eager")),isCustomElement(h)?this.createCustomElementClone(h):h},s.prototype.createCustomElementClone=function(o){var h=document.createElement("html2canvascustomelement");return copyCSSStyles(o.style,h),h},s.prototype.createStyleClone=function(o){try{var h=o.sheet;if(h&&h.cssRules){var d=[].slice.call(h.cssRules,0).reduce(function(_,b){return b&&typeof b.cssText=="string"?_+b.cssText:_},""),g=o.cloneNode(!1);return g.textContent=d,g}}catch(_){if(this.context.logger.error("Unable to access cssRules property",_),_.name!=="SecurityError")throw _}return o.cloneNode(!1)},s.prototype.createCanvasClone=function(o){var h;if(this.options.inlineImages&&o.ownerDocument){var d=o.ownerDocument.createElement("img");try{return d.src=o.toDataURL(),d}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",o)}}var g=o.cloneNode(!1);try{g.width=o.width,g.height=o.height;var _=o.getContext("2d"),b=g.getContext("2d");if(b)if(!this.options.allowTaint&&_)b.putImageData(_.getImageData(0,0,o.width,o.height),0,0);else{var j=(h=o.getContext("webgl2"))!==null&&h!==void 0?h:o.getContext("webgl");if(j){var et=j.getContextAttributes();(et==null?void 0:et.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",o)}b.drawImage(o,0,0)}return g}catch{this.context.logger.info("Unable to clone canvas as it is tainted",o)}return g},s.prototype.createVideoClone=function(o){var h=o.ownerDocument.createElement("canvas");h.width=o.offsetWidth,h.height=o.offsetHeight;var d=h.getContext("2d");try{return d&&(d.drawImage(o,0,0,h.width,h.height),this.options.allowTaint||d.getImageData(0,0,h.width,h.height)),h}catch{this.context.logger.info("Unable to clone video as it is tainted",o)}var g=o.ownerDocument.createElement("canvas");return g.width=o.offsetWidth,g.height=o.offsetHeight,g},s.prototype.appendChildNode=function(o,h,d){(!isElementNode(h)||!isScriptElement(h)&&!h.hasAttribute(IGNORE_ATTRIBUTE)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(h)))&&(!this.options.copyStyles||!isElementNode(h)||!isStyleElement(h))&&o.appendChild(this.cloneNode(h,d))},s.prototype.cloneChildNodes=function(o,h,d){for(var g=this,_=o.shadowRoot?o.shadowRoot.firstChild:o.firstChild;_;_=_.nextSibling)if(isElementNode(_)&&isSlotElement(_)&&typeof _.assignedNodes=="function"){var b=_.assignedNodes();b.length&&b.forEach(function(j){return g.appendChildNode(h,j,d)})}else this.appendChildNode(h,_,d)},s.prototype.cloneNode=function(o,h){if(isTextNode(o))return document.createTextNode(o.data);if(!o.ownerDocument)return o.cloneNode(!1);var d=o.ownerDocument.defaultView;if(d&&isElementNode(o)&&(isHTMLElementNode(o)||isSVGElementNode(o))){var g=this.createElementClone(o);g.style.transitionProperty="none";var _=d.getComputedStyle(o),b=d.getComputedStyle(o,":before"),j=d.getComputedStyle(o,":after");this.referenceElement===o&&isHTMLElementNode(g)&&(this.clonedReferenceElement=g),isBodyElement(g)&&createPseudoHideStyles(g);var et=this.counters.parse(new CSSParsedCounterDeclaration(this.context,_)),tt=this.resolvePseudoContent(o,g,b,PseudoElementType.BEFORE);isCustomElement(o)&&(h=!0),isVideoElement(o)||this.cloneChildNodes(o,g,h),tt&&g.insertBefore(tt,g.firstChild);var rt=this.resolvePseudoContent(o,g,j,PseudoElementType.AFTER);return rt&&g.appendChild(rt),this.counters.pop(et),(_&&(this.options.copyStyles||isSVGElementNode(o))&&!isIFrameElement(o)||h)&&copyCSSStyles(_,g),(o.scrollTop!==0||o.scrollLeft!==0)&&this.scrolledElements.push([g,o.scrollLeft,o.scrollTop]),(isTextareaElement(o)||isSelectElement(o))&&(isTextareaElement(g)||isSelectElement(g))&&(g.value=o.value),g}return o.cloneNode(!1)},s.prototype.resolvePseudoContent=function(o,h,d,g){var _=this;if(d){var b=d.content,j=h.ownerDocument;if(!(!j||!b||b==="none"||b==="-moz-alt-content"||d.display==="none")){this.counters.parse(new CSSParsedCounterDeclaration(this.context,d));var et=new CSSParsedPseudoDeclaration(this.context,d),tt=j.createElement("html2canvaspseudoelement");copyCSSStyles(d,tt),et.content.forEach(function(at){if(at.type===0)tt.appendChild(j.createTextNode(at.value));else if(at.type===22){var st=j.createElement("img");st.src=at.value,st.style.opacity="1",tt.appendChild(st)}else if(at.type===18){if(at.name==="attr"){var At=at.values.filter(isIdentToken);At.length&&tt.appendChild(j.createTextNode(o.getAttribute(At[0].value)||""))}else if(at.name==="counter"){var ht=at.values.filter(nonFunctionArgSeparator),ct=ht[0],_t=ht[1];if(ct&&isIdentToken(ct)){var gt=_.counters.getCounterValue(ct.value),wt=_t&&isIdentToken(_t)?listStyleType.parse(_.context,_t.value):3;tt.appendChild(j.createTextNode(createCounterText(gt,wt,!1)))}}else if(at.name==="counters"){var ft=at.values.filter(nonFunctionArgSeparator),ct=ft[0],dt=ft[1],_t=ft[2];if(ct&&isIdentToken(ct)){var xt=_.counters.getCounterValues(ct.value),bt=_t&&isIdentToken(_t)?listStyleType.parse(_.context,_t.value):3,Ct=dt&&dt.type===0?dt.value:"",Ut=xt.map(function(Nt){return createCounterText(Nt,bt,!1)}).join(Ct);tt.appendChild(j.createTextNode(Ut))}}}else if(at.type===20)switch(at.value){case"open-quote":tt.appendChild(j.createTextNode(getQuote(et.quotes,_.quoteDepth++,!0)));break;case"close-quote":tt.appendChild(j.createTextNode(getQuote(et.quotes,--_.quoteDepth,!1)));break;default:tt.appendChild(j.createTextNode(at.value))}}),tt.className=PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+" "+PSEUDO_HIDE_ELEMENT_CLASS_AFTER;var rt=g===PseudoElementType.BEFORE?" "+PSEUDO_HIDE_ELEMENT_CLASS_BEFORE:" "+PSEUDO_HIDE_ELEMENT_CLASS_AFTER;return isSVGElementNode(h)?h.className.baseValue+=rt:h.className+=rt,tt}}},s.destroy=function(o){return o.parentNode?(o.parentNode.removeChild(o),!0):!1},s}(),PseudoElementType;(function(s){s[s.BEFORE=0]="BEFORE",s[s.AFTER=1]="AFTER"})(PseudoElementType||(PseudoElementType={}));var createIFrameContainer=function(s,o){var h=s.createElement("iframe");return h.className="html2canvas-container",h.style.visibility="hidden",h.style.position="fixed",h.style.left="-10000px",h.style.top="0px",h.style.border="0",h.width=o.width.toString(),h.height=o.height.toString(),h.scrolling="no",h.setAttribute(IGNORE_ATTRIBUTE,"true"),s.body.appendChild(h),h},imageReady=function(s){return new Promise(function(o){if(s.complete){o();return}if(!s.src){o();return}s.onload=o,s.onerror=o})},imagesReady=function(s){return Promise.all([].slice.call(s.images,0).map(imageReady))},iframeLoader=function(s){return new Promise(function(o,h){var d=s.contentWindow;if(!d)return h("No window assigned for iframe");var g=d.document;d.onload=s.onload=function(){d.onload=s.onload=null;var _=setInterval(function(){g.body.childNodes.length>0&&g.readyState==="complete"&&(clearInterval(_),o(s))},50)}})},ignoredStyleProperties=["all","d","content"],copyCSSStyles=function(s,o){for(var h=s.length-1;h>=0;h--){var d=s.item(h);ignoredStyleProperties.indexOf(d)===-1&&o.style.setProperty(d,s.getPropertyValue(d))}return o},serializeDoctype=function(s){var o="";return s&&(o+="<!DOCTYPE ",s.name&&(o+=s.name),s.internalSubset&&(o+=s.internalSubset),s.publicId&&(o+='"'+s.publicId+'"'),s.systemId&&(o+='"'+s.systemId+'"'),o+=">"),o},restoreOwnerScroll=function(s,o,h){s&&s.defaultView&&(o!==s.defaultView.pageXOffset||h!==s.defaultView.pageYOffset)&&s.defaultView.scrollTo(o,h)},restoreNodeScroll=function(s){var o=s[0],h=s[1],d=s[2];o.scrollLeft=h,o.scrollTop=d},PSEUDO_BEFORE=":before",PSEUDO_AFTER=":after",PSEUDO_HIDE_ELEMENT_CLASS_BEFORE="___html2canvas___pseudoelement_before",PSEUDO_HIDE_ELEMENT_CLASS_AFTER="___html2canvas___pseudoelement_after",PSEUDO_HIDE_ELEMENT_STYLE=`{
    content: "" !important;
    display: none !important;
}`,createPseudoHideStyles=function(s){createStyles(s,"."+PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+PSEUDO_BEFORE+PSEUDO_HIDE_ELEMENT_STYLE+`
         .`+PSEUDO_HIDE_ELEMENT_CLASS_AFTER+PSEUDO_AFTER+PSEUDO_HIDE_ELEMENT_STYLE)},createStyles=function(s,o){var h=s.ownerDocument;if(h){var d=h.createElement("style");d.textContent=o,s.appendChild(d)}},CacheStorage=function(){function s(){}return s.getOrigin=function(o){var h=s._link;return h?(h.href=o,h.href=h.href,h.protocol+h.hostname+h.port):"about:blank"},s.isSameOrigin=function(o){return s.getOrigin(o)===s._origin},s.setContext=function(o){s._link=o.document.createElement("a"),s._origin=s.getOrigin(o.location.href)},s._origin="about:blank",s}(),Cache=function(){function s(o,h){this.context=o,this._options=h,this._cache={}}return s.prototype.addImage=function(o){var h=Promise.resolve();return this.has(o)||(isBlobImage(o)||isRenderable(o))&&(this._cache[o]=this.loadImage(o)).catch(function(){}),h},s.prototype.match=function(o){return this._cache[o]},s.prototype.loadImage=function(o){return __awaiter(this,void 0,void 0,function(){var h,d,g,_,b=this;return __generator(this,function(j){switch(j.label){case 0:return h=CacheStorage.isSameOrigin(o),d=!isInlineImage(o)&&this._options.useCORS===!0&&FEATURES.SUPPORT_CORS_IMAGES&&!h,g=!isInlineImage(o)&&!h&&!isBlobImage(o)&&typeof this._options.proxy=="string"&&FEATURES.SUPPORT_CORS_XHR&&!d,!h&&this._options.allowTaint===!1&&!isInlineImage(o)&&!isBlobImage(o)&&!g&&!d?[2]:(_=o,g?[4,this.proxy(_)]:[3,2]);case 1:_=j.sent(),j.label=2;case 2:return this.context.logger.debug("Added image "+o.substring(0,256)),[4,new Promise(function(et,tt){var rt=new Image;rt.onload=function(){return et(rt)},rt.onerror=tt,(isInlineBase64Image(_)||d)&&(rt.crossOrigin="anonymous"),rt.src=_,rt.complete===!0&&setTimeout(function(){return et(rt)},500),b._options.imageTimeout>0&&setTimeout(function(){return tt("Timed out ("+b._options.imageTimeout+"ms) loading image")},b._options.imageTimeout)})];case 3:return[2,j.sent()]}})})},s.prototype.has=function(o){return typeof this._cache[o]<"u"},s.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},s.prototype.proxy=function(o){var h=this,d=this._options.proxy;if(!d)throw new Error("No proxy defined");var g=o.substring(0,256);return new Promise(function(_,b){var j=FEATURES.SUPPORT_RESPONSE_TYPE?"blob":"text",et=new XMLHttpRequest;et.onload=function(){if(et.status===200)if(j==="text")_(et.response);else{var at=new FileReader;at.addEventListener("load",function(){return _(at.result)},!1),at.addEventListener("error",function(st){return b(st)},!1),at.readAsDataURL(et.response)}else b("Failed to proxy resource "+g+" with status code "+et.status)},et.onerror=b;var tt=d.indexOf("?")>-1?"&":"?";if(et.open("GET",""+d+tt+"url="+encodeURIComponent(o)+"&responseType="+j),j!=="text"&&et instanceof XMLHttpRequest&&(et.responseType=j),h._options.imageTimeout){var rt=h._options.imageTimeout;et.timeout=rt,et.ontimeout=function(){return b("Timed out ("+rt+"ms) proxying "+g)}}et.send()})},s}(),INLINE_SVG=/^data:image\/svg\+xml/i,INLINE_BASE64=/^data:image\/.*;base64,/i,INLINE_IMG=/^data:image\/.*/i,isRenderable=function(s){return FEATURES.SUPPORT_SVG_DRAWING||!isSVG(s)},isInlineImage=function(s){return INLINE_IMG.test(s)},isInlineBase64Image=function(s){return INLINE_BASE64.test(s)},isBlobImage=function(s){return s.substr(0,4)==="blob"},isSVG=function(s){return s.substr(-3).toLowerCase()==="svg"||INLINE_SVG.test(s)},Vector=function(){function s(o,h){this.type=0,this.x=o,this.y=h}return s.prototype.add=function(o,h){return new s(this.x+o,this.y+h)},s}(),lerp=function(s,o,h){return new Vector(s.x+(o.x-s.x)*h,s.y+(o.y-s.y)*h)},BezierCurve=function(){function s(o,h,d,g){this.type=1,this.start=o,this.startControl=h,this.endControl=d,this.end=g}return s.prototype.subdivide=function(o,h){var d=lerp(this.start,this.startControl,o),g=lerp(this.startControl,this.endControl,o),_=lerp(this.endControl,this.end,o),b=lerp(d,g,o),j=lerp(g,_,o),et=lerp(b,j,o);return h?new s(this.start,d,b,et):new s(et,j,_,this.end)},s.prototype.add=function(o,h){return new s(this.start.add(o,h),this.startControl.add(o,h),this.endControl.add(o,h),this.end.add(o,h))},s.prototype.reverse=function(){return new s(this.end,this.endControl,this.startControl,this.start)},s}(),isBezierCurve=function(s){return s.type===1},BoundCurves=function(){function s(o){var h=o.styles,d=o.bounds,g=getAbsoluteValueForTuple(h.borderTopLeftRadius,d.width,d.height),_=g[0],b=g[1],j=getAbsoluteValueForTuple(h.borderTopRightRadius,d.width,d.height),et=j[0],tt=j[1],rt=getAbsoluteValueForTuple(h.borderBottomRightRadius,d.width,d.height),at=rt[0],st=rt[1],At=getAbsoluteValueForTuple(h.borderBottomLeftRadius,d.width,d.height),ht=At[0],ct=At[1],_t=[];_t.push((_+et)/d.width),_t.push((ht+at)/d.width),_t.push((b+ct)/d.height),_t.push((tt+st)/d.height);var gt=Math.max.apply(Math,_t);gt>1&&(_/=gt,b/=gt,et/=gt,tt/=gt,at/=gt,st/=gt,ht/=gt,ct/=gt);var wt=d.width-et,ft=d.height-st,dt=d.width-at,xt=d.height-ct,bt=h.borderTopWidth,Ct=h.borderRightWidth,Ut=h.borderBottomWidth,Qt=h.borderLeftWidth,kt=getAbsoluteValue(h.paddingTop,o.bounds.width),Nt=getAbsoluteValue(h.paddingRight,o.bounds.width),Wt=getAbsoluteValue(h.paddingBottom,o.bounds.width),Vt=getAbsoluteValue(h.paddingLeft,o.bounds.width);this.topLeftBorderDoubleOuterBox=_>0||b>0?getCurvePoints(d.left+Qt/3,d.top+bt/3,_-Qt/3,b-bt/3,CORNER.TOP_LEFT):new Vector(d.left+Qt/3,d.top+bt/3),this.topRightBorderDoubleOuterBox=_>0||b>0?getCurvePoints(d.left+wt,d.top+bt/3,et-Ct/3,tt-bt/3,CORNER.TOP_RIGHT):new Vector(d.left+d.width-Ct/3,d.top+bt/3),this.bottomRightBorderDoubleOuterBox=at>0||st>0?getCurvePoints(d.left+dt,d.top+ft,at-Ct/3,st-Ut/3,CORNER.BOTTOM_RIGHT):new Vector(d.left+d.width-Ct/3,d.top+d.height-Ut/3),this.bottomLeftBorderDoubleOuterBox=ht>0||ct>0?getCurvePoints(d.left+Qt/3,d.top+xt,ht-Qt/3,ct-Ut/3,CORNER.BOTTOM_LEFT):new Vector(d.left+Qt/3,d.top+d.height-Ut/3),this.topLeftBorderDoubleInnerBox=_>0||b>0?getCurvePoints(d.left+Qt*2/3,d.top+bt*2/3,_-Qt*2/3,b-bt*2/3,CORNER.TOP_LEFT):new Vector(d.left+Qt*2/3,d.top+bt*2/3),this.topRightBorderDoubleInnerBox=_>0||b>0?getCurvePoints(d.left+wt,d.top+bt*2/3,et-Ct*2/3,tt-bt*2/3,CORNER.TOP_RIGHT):new Vector(d.left+d.width-Ct*2/3,d.top+bt*2/3),this.bottomRightBorderDoubleInnerBox=at>0||st>0?getCurvePoints(d.left+dt,d.top+ft,at-Ct*2/3,st-Ut*2/3,CORNER.BOTTOM_RIGHT):new Vector(d.left+d.width-Ct*2/3,d.top+d.height-Ut*2/3),this.bottomLeftBorderDoubleInnerBox=ht>0||ct>0?getCurvePoints(d.left+Qt*2/3,d.top+xt,ht-Qt*2/3,ct-Ut*2/3,CORNER.BOTTOM_LEFT):new Vector(d.left+Qt*2/3,d.top+d.height-Ut*2/3),this.topLeftBorderStroke=_>0||b>0?getCurvePoints(d.left+Qt/2,d.top+bt/2,_-Qt/2,b-bt/2,CORNER.TOP_LEFT):new Vector(d.left+Qt/2,d.top+bt/2),this.topRightBorderStroke=_>0||b>0?getCurvePoints(d.left+wt,d.top+bt/2,et-Ct/2,tt-bt/2,CORNER.TOP_RIGHT):new Vector(d.left+d.width-Ct/2,d.top+bt/2),this.bottomRightBorderStroke=at>0||st>0?getCurvePoints(d.left+dt,d.top+ft,at-Ct/2,st-Ut/2,CORNER.BOTTOM_RIGHT):new Vector(d.left+d.width-Ct/2,d.top+d.height-Ut/2),this.bottomLeftBorderStroke=ht>0||ct>0?getCurvePoints(d.left+Qt/2,d.top+xt,ht-Qt/2,ct-Ut/2,CORNER.BOTTOM_LEFT):new Vector(d.left+Qt/2,d.top+d.height-Ut/2),this.topLeftBorderBox=_>0||b>0?getCurvePoints(d.left,d.top,_,b,CORNER.TOP_LEFT):new Vector(d.left,d.top),this.topRightBorderBox=et>0||tt>0?getCurvePoints(d.left+wt,d.top,et,tt,CORNER.TOP_RIGHT):new Vector(d.left+d.width,d.top),this.bottomRightBorderBox=at>0||st>0?getCurvePoints(d.left+dt,d.top+ft,at,st,CORNER.BOTTOM_RIGHT):new Vector(d.left+d.width,d.top+d.height),this.bottomLeftBorderBox=ht>0||ct>0?getCurvePoints(d.left,d.top+xt,ht,ct,CORNER.BOTTOM_LEFT):new Vector(d.left,d.top+d.height),this.topLeftPaddingBox=_>0||b>0?getCurvePoints(d.left+Qt,d.top+bt,Math.max(0,_-Qt),Math.max(0,b-bt),CORNER.TOP_LEFT):new Vector(d.left+Qt,d.top+bt),this.topRightPaddingBox=et>0||tt>0?getCurvePoints(d.left+Math.min(wt,d.width-Ct),d.top+bt,wt>d.width+Ct?0:Math.max(0,et-Ct),Math.max(0,tt-bt),CORNER.TOP_RIGHT):new Vector(d.left+d.width-Ct,d.top+bt),this.bottomRightPaddingBox=at>0||st>0?getCurvePoints(d.left+Math.min(dt,d.width-Qt),d.top+Math.min(ft,d.height-Ut),Math.max(0,at-Ct),Math.max(0,st-Ut),CORNER.BOTTOM_RIGHT):new Vector(d.left+d.width-Ct,d.top+d.height-Ut),this.bottomLeftPaddingBox=ht>0||ct>0?getCurvePoints(d.left+Qt,d.top+Math.min(xt,d.height-Ut),Math.max(0,ht-Qt),Math.max(0,ct-Ut),CORNER.BOTTOM_LEFT):new Vector(d.left+Qt,d.top+d.height-Ut),this.topLeftContentBox=_>0||b>0?getCurvePoints(d.left+Qt+Vt,d.top+bt+kt,Math.max(0,_-(Qt+Vt)),Math.max(0,b-(bt+kt)),CORNER.TOP_LEFT):new Vector(d.left+Qt+Vt,d.top+bt+kt),this.topRightContentBox=et>0||tt>0?getCurvePoints(d.left+Math.min(wt,d.width+Qt+Vt),d.top+bt+kt,wt>d.width+Qt+Vt?0:et-Qt+Vt,tt-(bt+kt),CORNER.TOP_RIGHT):new Vector(d.left+d.width-(Ct+Nt),d.top+bt+kt),this.bottomRightContentBox=at>0||st>0?getCurvePoints(d.left+Math.min(dt,d.width-(Qt+Vt)),d.top+Math.min(ft,d.height+bt+kt),Math.max(0,at-(Ct+Nt)),st-(Ut+Wt),CORNER.BOTTOM_RIGHT):new Vector(d.left+d.width-(Ct+Nt),d.top+d.height-(Ut+Wt)),this.bottomLeftContentBox=ht>0||ct>0?getCurvePoints(d.left+Qt+Vt,d.top+xt,Math.max(0,ht-(Qt+Vt)),ct-(Ut+Wt),CORNER.BOTTOM_LEFT):new Vector(d.left+Qt+Vt,d.top+d.height-(Ut+Wt))}return s}(),CORNER;(function(s){s[s.TOP_LEFT=0]="TOP_LEFT",s[s.TOP_RIGHT=1]="TOP_RIGHT",s[s.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",s[s.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(CORNER||(CORNER={}));var getCurvePoints=function(s,o,h,d,g){var _=4*((Math.sqrt(2)-1)/3),b=h*_,j=d*_,et=s+h,tt=o+d;switch(g){case CORNER.TOP_LEFT:return new BezierCurve(new Vector(s,tt),new Vector(s,tt-j),new Vector(et-b,o),new Vector(et,o));case CORNER.TOP_RIGHT:return new BezierCurve(new Vector(s,o),new Vector(s+b,o),new Vector(et,tt-j),new Vector(et,tt));case CORNER.BOTTOM_RIGHT:return new BezierCurve(new Vector(et,o),new Vector(et,o+j),new Vector(s+b,tt),new Vector(s,tt));case CORNER.BOTTOM_LEFT:default:return new BezierCurve(new Vector(et,tt),new Vector(et-b,tt),new Vector(s,o+j),new Vector(s,o))}},calculateBorderBoxPath=function(s){return[s.topLeftBorderBox,s.topRightBorderBox,s.bottomRightBorderBox,s.bottomLeftBorderBox]},calculateContentBoxPath=function(s){return[s.topLeftContentBox,s.topRightContentBox,s.bottomRightContentBox,s.bottomLeftContentBox]},calculatePaddingBoxPath=function(s){return[s.topLeftPaddingBox,s.topRightPaddingBox,s.bottomRightPaddingBox,s.bottomLeftPaddingBox]},TransformEffect=function(){function s(o,h,d){this.offsetX=o,this.offsetY=h,this.matrix=d,this.type=0,this.target=6}return s}(),ClipEffect=function(){function s(o,h){this.path=o,this.target=h,this.type=1}return s}(),OpacityEffect=function(){function s(o){this.opacity=o,this.type=2,this.target=6}return s}(),isTransformEffect=function(s){return s.type===0},isClipEffect=function(s){return s.type===1},isOpacityEffect=function(s){return s.type===2},equalPath=function(s,o){return s.length===o.length?s.some(function(h,d){return h===o[d]}):!1},transformPath=function(s,o,h,d,g){return s.map(function(_,b){switch(b){case 0:return _.add(o,h);case 1:return _.add(o+d,h);case 2:return _.add(o+d,h+g);case 3:return _.add(o,h+g)}return _})},StackingContext=function(){function s(o){this.element=o,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return s}(),ElementPaint=function(){function s(o,h){if(this.container=o,this.parent=h,this.effects=[],this.curves=new BoundCurves(this.container),this.container.styles.opacity<1&&this.effects.push(new OpacityEffect(this.container.styles.opacity)),this.container.styles.transform!==null){var d=this.container.bounds.left+this.container.styles.transformOrigin[0].number,g=this.container.bounds.top+this.container.styles.transformOrigin[1].number,_=this.container.styles.transform;this.effects.push(new TransformEffect(d,g,_))}if(this.container.styles.overflowX!==0){var b=calculateBorderBoxPath(this.curves),j=calculatePaddingBoxPath(this.curves);equalPath(b,j)?this.effects.push(new ClipEffect(b,6)):(this.effects.push(new ClipEffect(b,2)),this.effects.push(new ClipEffect(j,4)))}}return s.prototype.getEffects=function(o){for(var h=[2,3].indexOf(this.container.styles.position)===-1,d=this.parent,g=this.effects.slice(0);d;){var _=d.effects.filter(function(et){return!isClipEffect(et)});if(h||d.container.styles.position!==0||!d.parent){if(g.unshift.apply(g,_),h=[2,3].indexOf(d.container.styles.position)===-1,d.container.styles.overflowX!==0){var b=calculateBorderBoxPath(d.curves),j=calculatePaddingBoxPath(d.curves);equalPath(b,j)||g.unshift(new ClipEffect(j,6))}}else g.unshift.apply(g,_);d=d.parent}return g.filter(function(et){return contains(et.target,o)})},s}(),parseStackTree=function(s,o,h,d){s.container.elements.forEach(function(g){var _=contains(g.flags,4),b=contains(g.flags,2),j=new ElementPaint(g,s);contains(g.styles.display,2048)&&d.push(j);var et=contains(g.flags,8)?[]:d;if(_||b){var tt=_||g.styles.isPositioned()?h:o,rt=new StackingContext(j);if(g.styles.isPositioned()||g.styles.opacity<1||g.styles.isTransformed()){var at=g.styles.zIndex.order;if(at<0){var st=0;tt.negativeZIndex.some(function(ht,ct){return at>ht.element.container.styles.zIndex.order?(st=ct,!1):st>0}),tt.negativeZIndex.splice(st,0,rt)}else if(at>0){var At=0;tt.positiveZIndex.some(function(ht,ct){return at>=ht.element.container.styles.zIndex.order?(At=ct+1,!1):At>0}),tt.positiveZIndex.splice(At,0,rt)}else tt.zeroOrAutoZIndexOrTransformedOrOpacity.push(rt)}else g.styles.isFloating()?tt.nonPositionedFloats.push(rt):tt.nonPositionedInlineLevel.push(rt);parseStackTree(j,rt,_?rt:h,et)}else g.styles.isInlineLevel()?o.inlineLevel.push(j):o.nonInlineLevel.push(j),parseStackTree(j,o,h,et);contains(g.flags,8)&&processListItems(g,et)})},processListItems=function(s,o){for(var h=s instanceof OLElementContainer?s.start:1,d=s instanceof OLElementContainer?s.reversed:!1,g=0;g<o.length;g++){var _=o[g];_.container instanceof LIElementContainer&&typeof _.container.value=="number"&&_.container.value!==0&&(h=_.container.value),_.listValue=createCounterText(h,_.container.styles.listStyleType,!0),h+=d?-1:1}},parseStackingContexts=function(s){var o=new ElementPaint(s,null),h=new StackingContext(o),d=[];return parseStackTree(o,h,h,d),processListItems(o.container,d),h},parsePathForBorder=function(s,o){switch(o){case 0:return createPathFromCurves(s.topLeftBorderBox,s.topLeftPaddingBox,s.topRightBorderBox,s.topRightPaddingBox);case 1:return createPathFromCurves(s.topRightBorderBox,s.topRightPaddingBox,s.bottomRightBorderBox,s.bottomRightPaddingBox);case 2:return createPathFromCurves(s.bottomRightBorderBox,s.bottomRightPaddingBox,s.bottomLeftBorderBox,s.bottomLeftPaddingBox);case 3:default:return createPathFromCurves(s.bottomLeftBorderBox,s.bottomLeftPaddingBox,s.topLeftBorderBox,s.topLeftPaddingBox)}},parsePathForBorderDoubleOuter=function(s,o){switch(o){case 0:return createPathFromCurves(s.topLeftBorderBox,s.topLeftBorderDoubleOuterBox,s.topRightBorderBox,s.topRightBorderDoubleOuterBox);case 1:return createPathFromCurves(s.topRightBorderBox,s.topRightBorderDoubleOuterBox,s.bottomRightBorderBox,s.bottomRightBorderDoubleOuterBox);case 2:return createPathFromCurves(s.bottomRightBorderBox,s.bottomRightBorderDoubleOuterBox,s.bottomLeftBorderBox,s.bottomLeftBorderDoubleOuterBox);case 3:default:return createPathFromCurves(s.bottomLeftBorderBox,s.bottomLeftBorderDoubleOuterBox,s.topLeftBorderBox,s.topLeftBorderDoubleOuterBox)}},parsePathForBorderDoubleInner=function(s,o){switch(o){case 0:return createPathFromCurves(s.topLeftBorderDoubleInnerBox,s.topLeftPaddingBox,s.topRightBorderDoubleInnerBox,s.topRightPaddingBox);case 1:return createPathFromCurves(s.topRightBorderDoubleInnerBox,s.topRightPaddingBox,s.bottomRightBorderDoubleInnerBox,s.bottomRightPaddingBox);case 2:return createPathFromCurves(s.bottomRightBorderDoubleInnerBox,s.bottomRightPaddingBox,s.bottomLeftBorderDoubleInnerBox,s.bottomLeftPaddingBox);case 3:default:return createPathFromCurves(s.bottomLeftBorderDoubleInnerBox,s.bottomLeftPaddingBox,s.topLeftBorderDoubleInnerBox,s.topLeftPaddingBox)}},parsePathForBorderStroke=function(s,o){switch(o){case 0:return createStrokePathFromCurves(s.topLeftBorderStroke,s.topRightBorderStroke);case 1:return createStrokePathFromCurves(s.topRightBorderStroke,s.bottomRightBorderStroke);case 2:return createStrokePathFromCurves(s.bottomRightBorderStroke,s.bottomLeftBorderStroke);case 3:default:return createStrokePathFromCurves(s.bottomLeftBorderStroke,s.topLeftBorderStroke)}},createStrokePathFromCurves=function(s,o){var h=[];return isBezierCurve(s)?h.push(s.subdivide(.5,!1)):h.push(s),isBezierCurve(o)?h.push(o.subdivide(.5,!0)):h.push(o),h},createPathFromCurves=function(s,o,h,d){var g=[];return isBezierCurve(s)?g.push(s.subdivide(.5,!1)):g.push(s),isBezierCurve(h)?g.push(h.subdivide(.5,!0)):g.push(h),isBezierCurve(d)?g.push(d.subdivide(.5,!0).reverse()):g.push(d),isBezierCurve(o)?g.push(o.subdivide(.5,!1).reverse()):g.push(o),g},paddingBox=function(s){var o=s.bounds,h=s.styles;return o.add(h.borderLeftWidth,h.borderTopWidth,-(h.borderRightWidth+h.borderLeftWidth),-(h.borderTopWidth+h.borderBottomWidth))},contentBox=function(s){var o=s.styles,h=s.bounds,d=getAbsoluteValue(o.paddingLeft,h.width),g=getAbsoluteValue(o.paddingRight,h.width),_=getAbsoluteValue(o.paddingTop,h.width),b=getAbsoluteValue(o.paddingBottom,h.width);return h.add(d+o.borderLeftWidth,_+o.borderTopWidth,-(o.borderRightWidth+o.borderLeftWidth+d+g),-(o.borderTopWidth+o.borderBottomWidth+_+b))},calculateBackgroundPositioningArea=function(s,o){return s===0?o.bounds:s===2?contentBox(o):paddingBox(o)},calculateBackgroundPaintingArea=function(s,o){return s===0?o.bounds:s===2?contentBox(o):paddingBox(o)},calculateBackgroundRendering=function(s,o,h){var d=calculateBackgroundPositioningArea(getBackgroundValueForIndex(s.styles.backgroundOrigin,o),s),g=calculateBackgroundPaintingArea(getBackgroundValueForIndex(s.styles.backgroundClip,o),s),_=calculateBackgroundSize(getBackgroundValueForIndex(s.styles.backgroundSize,o),h,d),b=_[0],j=_[1],et=getAbsoluteValueForTuple(getBackgroundValueForIndex(s.styles.backgroundPosition,o),d.width-b,d.height-j),tt=calculateBackgroundRepeatPath(getBackgroundValueForIndex(s.styles.backgroundRepeat,o),et,_,d,g),rt=Math.round(d.left+et[0]),at=Math.round(d.top+et[1]);return[tt,rt,at,b,j]},isAuto=function(s){return isIdentToken(s)&&s.value===BACKGROUND_SIZE.AUTO},hasIntrinsicValue=function(s){return typeof s=="number"},calculateBackgroundSize=function(s,o,h){var d=o[0],g=o[1],_=o[2],b=s[0],j=s[1];if(!b)return[0,0];if(isLengthPercentage(b)&&j&&isLengthPercentage(j))return[getAbsoluteValue(b,h.width),getAbsoluteValue(j,h.height)];var et=hasIntrinsicValue(_);if(isIdentToken(b)&&(b.value===BACKGROUND_SIZE.CONTAIN||b.value===BACKGROUND_SIZE.COVER)){if(hasIntrinsicValue(_)){var tt=h.width/h.height;return tt<_!=(b.value===BACKGROUND_SIZE.COVER)?[h.width,h.width/_]:[h.height*_,h.height]}return[h.width,h.height]}var rt=hasIntrinsicValue(d),at=hasIntrinsicValue(g),st=rt||at;if(isAuto(b)&&(!j||isAuto(j))){if(rt&&at)return[d,g];if(!et&&!st)return[h.width,h.height];if(st&&et){var At=rt?d:g*_,ht=at?g:d/_;return[At,ht]}var ct=rt?d:h.width,_t=at?g:h.height;return[ct,_t]}if(et){var gt=0,wt=0;return isLengthPercentage(b)?gt=getAbsoluteValue(b,h.width):isLengthPercentage(j)&&(wt=getAbsoluteValue(j,h.height)),isAuto(b)?gt=wt*_:(!j||isAuto(j))&&(wt=gt/_),[gt,wt]}var ft=null,dt=null;if(isLengthPercentage(b)?ft=getAbsoluteValue(b,h.width):j&&isLengthPercentage(j)&&(dt=getAbsoluteValue(j,h.height)),ft!==null&&(!j||isAuto(j))&&(dt=rt&&at?ft/d*g:h.height),dt!==null&&isAuto(b)&&(ft=rt&&at?dt/g*d:h.width),ft!==null&&dt!==null)return[ft,dt];throw new Error("Unable to calculate background-size for element")},getBackgroundValueForIndex=function(s,o){var h=s[o];return typeof h>"u"?s[0]:h},calculateBackgroundRepeatPath=function(s,o,h,d,g){var _=o[0],b=o[1],j=h[0],et=h[1];switch(s){case 2:return[new Vector(Math.round(d.left),Math.round(d.top+b)),new Vector(Math.round(d.left+d.width),Math.round(d.top+b)),new Vector(Math.round(d.left+d.width),Math.round(et+d.top+b)),new Vector(Math.round(d.left),Math.round(et+d.top+b))];case 3:return[new Vector(Math.round(d.left+_),Math.round(d.top)),new Vector(Math.round(d.left+_+j),Math.round(d.top)),new Vector(Math.round(d.left+_+j),Math.round(d.height+d.top)),new Vector(Math.round(d.left+_),Math.round(d.height+d.top))];case 1:return[new Vector(Math.round(d.left+_),Math.round(d.top+b)),new Vector(Math.round(d.left+_+j),Math.round(d.top+b)),new Vector(Math.round(d.left+_+j),Math.round(d.top+b+et)),new Vector(Math.round(d.left+_),Math.round(d.top+b+et))];default:return[new Vector(Math.round(g.left),Math.round(g.top)),new Vector(Math.round(g.left+g.width),Math.round(g.top)),new Vector(Math.round(g.left+g.width),Math.round(g.height+g.top)),new Vector(Math.round(g.left),Math.round(g.height+g.top))]}},SMALL_IMAGE="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",SAMPLE_TEXT="Hidden Text",FontMetrics=function(){function s(o){this._data={},this._document=o}return s.prototype.parseMetrics=function(o,h){var d=this._document.createElement("div"),g=this._document.createElement("img"),_=this._document.createElement("span"),b=this._document.body;d.style.visibility="hidden",d.style.fontFamily=o,d.style.fontSize=h,d.style.margin="0",d.style.padding="0",d.style.whiteSpace="nowrap",b.appendChild(d),g.src=SMALL_IMAGE,g.width=1,g.height=1,g.style.margin="0",g.style.padding="0",g.style.verticalAlign="baseline",_.style.fontFamily=o,_.style.fontSize=h,_.style.margin="0",_.style.padding="0",_.appendChild(this._document.createTextNode(SAMPLE_TEXT)),d.appendChild(_),d.appendChild(g);var j=g.offsetTop-_.offsetTop+2;d.removeChild(_),d.appendChild(this._document.createTextNode(SAMPLE_TEXT)),d.style.lineHeight="normal",g.style.verticalAlign="super";var et=g.offsetTop-d.offsetTop+2;return b.removeChild(d),{baseline:j,middle:et}},s.prototype.getMetrics=function(o,h){var d=o+" "+h;return typeof this._data[d]>"u"&&(this._data[d]=this.parseMetrics(o,h)),this._data[d]},s}(),Renderer=function(){function s(o,h){this.context=o,this.options=h}return s}(),MASK_OFFSET=1e4,CanvasRenderer=function(s){__extends(o,s);function o(h,d){var g=s.call(this,h,d)||this;return g._activeEffects=[],g.canvas=d.canvas?d.canvas:document.createElement("canvas"),g.ctx=g.canvas.getContext("2d"),d.canvas||(g.canvas.width=Math.floor(d.width*d.scale),g.canvas.height=Math.floor(d.height*d.scale),g.canvas.style.width=d.width+"px",g.canvas.style.height=d.height+"px"),g.fontMetrics=new FontMetrics(document),g.ctx.scale(g.options.scale,g.options.scale),g.ctx.translate(-d.x,-d.y),g.ctx.textBaseline="bottom",g._activeEffects=[],g.context.logger.debug("Canvas renderer initialized ("+d.width+"x"+d.height+") with scale "+d.scale),g}return o.prototype.applyEffects=function(h){for(var d=this;this._activeEffects.length;)this.popEffect();h.forEach(function(g){return d.applyEffect(g)})},o.prototype.applyEffect=function(h){this.ctx.save(),isOpacityEffect(h)&&(this.ctx.globalAlpha=h.opacity),isTransformEffect(h)&&(this.ctx.translate(h.offsetX,h.offsetY),this.ctx.transform(h.matrix[0],h.matrix[1],h.matrix[2],h.matrix[3],h.matrix[4],h.matrix[5]),this.ctx.translate(-h.offsetX,-h.offsetY)),isClipEffect(h)&&(this.path(h.path),this.ctx.clip()),this._activeEffects.push(h)},o.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},o.prototype.renderStack=function(h){return __awaiter(this,void 0,void 0,function(){var d;return __generator(this,function(g){switch(g.label){case 0:return d=h.element.container.styles,d.isVisible()?[4,this.renderStackContent(h)]:[3,2];case 1:g.sent(),g.label=2;case 2:return[2]}})})},o.prototype.renderNode=function(h){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(d){switch(d.label){case 0:if(contains(h.container.flags,16))debugger;return h.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(h)]:[3,3];case 1:return d.sent(),[4,this.renderNodeContent(h)];case 2:d.sent(),d.label=3;case 3:return[2]}})})},o.prototype.renderTextWithLetterSpacing=function(h,d,g){var _=this;if(d===0)this.ctx.fillText(h.text,h.bounds.left,h.bounds.top+g);else{var b=segmentGraphemes(h.text);b.reduce(function(j,et){return _.ctx.fillText(et,j,h.bounds.top+g),j+_.ctx.measureText(et).width},h.bounds.left)}},o.prototype.createFontStyle=function(h){var d=h.fontVariant.filter(function(b){return b==="normal"||b==="small-caps"}).join(""),g=fixIOSSystemFonts(h.fontFamily).join(", "),_=isDimensionToken(h.fontSize)?""+h.fontSize.number+h.fontSize.unit:h.fontSize.number+"px";return[[h.fontStyle,d,h.fontWeight,_,g].join(" "),g,_]},o.prototype.renderTextNode=function(h,d){return __awaiter(this,void 0,void 0,function(){var g,_,b,j,et,tt,rt,at,st=this;return __generator(this,function(At){return g=this.createFontStyle(d),_=g[0],b=g[1],j=g[2],this.ctx.font=_,this.ctx.direction=d.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",et=this.fontMetrics.getMetrics(b,j),tt=et.baseline,rt=et.middle,at=d.paintOrder,h.textBounds.forEach(function(ht){at.forEach(function(ct){switch(ct){case 0:st.ctx.fillStyle=asString(d.color),st.renderTextWithLetterSpacing(ht,d.letterSpacing,tt);var _t=d.textShadow;_t.length&&ht.text.trim().length&&(_t.slice(0).reverse().forEach(function(gt){st.ctx.shadowColor=asString(gt.color),st.ctx.shadowOffsetX=gt.offsetX.number*st.options.scale,st.ctx.shadowOffsetY=gt.offsetY.number*st.options.scale,st.ctx.shadowBlur=gt.blur.number,st.renderTextWithLetterSpacing(ht,d.letterSpacing,tt)}),st.ctx.shadowColor="",st.ctx.shadowOffsetX=0,st.ctx.shadowOffsetY=0,st.ctx.shadowBlur=0),d.textDecorationLine.length&&(st.ctx.fillStyle=asString(d.textDecorationColor||d.color),d.textDecorationLine.forEach(function(gt){switch(gt){case 1:st.ctx.fillRect(ht.bounds.left,Math.round(ht.bounds.top+tt),ht.bounds.width,1);break;case 2:st.ctx.fillRect(ht.bounds.left,Math.round(ht.bounds.top),ht.bounds.width,1);break;case 3:st.ctx.fillRect(ht.bounds.left,Math.ceil(ht.bounds.top+rt),ht.bounds.width,1);break}}));break;case 1:d.webkitTextStrokeWidth&&ht.text.trim().length&&(st.ctx.strokeStyle=asString(d.webkitTextStrokeColor),st.ctx.lineWidth=d.webkitTextStrokeWidth,st.ctx.lineJoin=window.chrome?"miter":"round",st.ctx.strokeText(ht.text,ht.bounds.left,ht.bounds.top+tt)),st.ctx.strokeStyle="",st.ctx.lineWidth=0,st.ctx.lineJoin="miter";break}})}),[2]})})},o.prototype.renderReplacedElement=function(h,d,g){if(g&&h.intrinsicWidth>0&&h.intrinsicHeight>0){var _=contentBox(h),b=calculatePaddingBoxPath(d);this.path(b),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(g,0,0,h.intrinsicWidth,h.intrinsicHeight,_.left,_.top,_.width,_.height),this.ctx.restore()}},o.prototype.renderNodeContent=function(h){return __awaiter(this,void 0,void 0,function(){var d,g,_,b,j,et,wt,wt,tt,rt,at,st,dt,At,ht,xt,ct,_t,gt,wt,ft,dt,xt;return __generator(this,function(bt){switch(bt.label){case 0:this.applyEffects(h.getEffects(4)),d=h.container,g=h.curves,_=d.styles,b=0,j=d.textNodes,bt.label=1;case 1:return b<j.length?(et=j[b],[4,this.renderTextNode(et,_)]):[3,4];case 2:bt.sent(),bt.label=3;case 3:return b++,[3,1];case 4:if(!(d instanceof ImageElementContainer))return[3,8];bt.label=5;case 5:return bt.trys.push([5,7,,8]),[4,this.context.cache.match(d.src)];case 6:return wt=bt.sent(),this.renderReplacedElement(d,g,wt),[3,8];case 7:return bt.sent(),this.context.logger.error("Error loading image "+d.src),[3,8];case 8:if(d instanceof CanvasElementContainer&&this.renderReplacedElement(d,g,d.canvas),!(d instanceof SVGElementContainer))return[3,12];bt.label=9;case 9:return bt.trys.push([9,11,,12]),[4,this.context.cache.match(d.svg)];case 10:return wt=bt.sent(),this.renderReplacedElement(d,g,wt),[3,12];case 11:return bt.sent(),this.context.logger.error("Error loading svg "+d.svg.substring(0,255)),[3,12];case 12:return d instanceof IFrameElementContainer&&d.tree?(tt=new o(this.context,{scale:this.options.scale,backgroundColor:d.backgroundColor,x:0,y:0,width:d.width,height:d.height}),[4,tt.render(d.tree)]):[3,14];case 13:rt=bt.sent(),d.width&&d.height&&this.ctx.drawImage(rt,0,0,d.width,d.height,d.bounds.left,d.bounds.top,d.bounds.width,d.bounds.height),bt.label=14;case 14:if(d instanceof InputElementContainer&&(at=Math.min(d.bounds.width,d.bounds.height),d.type===CHECKBOX?d.checked&&(this.ctx.save(),this.path([new Vector(d.bounds.left+at*.39363,d.bounds.top+at*.79),new Vector(d.bounds.left+at*.16,d.bounds.top+at*.5549),new Vector(d.bounds.left+at*.27347,d.bounds.top+at*.44071),new Vector(d.bounds.left+at*.39694,d.bounds.top+at*.5649),new Vector(d.bounds.left+at*.72983,d.bounds.top+at*.23),new Vector(d.bounds.left+at*.84,d.bounds.top+at*.34085),new Vector(d.bounds.left+at*.39363,d.bounds.top+at*.79)]),this.ctx.fillStyle=asString(INPUT_COLOR),this.ctx.fill(),this.ctx.restore()):d.type===RADIO&&d.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(d.bounds.left+at/2,d.bounds.top+at/2,at/4,0,Math.PI*2,!0),this.ctx.fillStyle=asString(INPUT_COLOR),this.ctx.fill(),this.ctx.restore())),isTextInputElement(d)&&d.value.length){switch(st=this.createFontStyle(_),dt=st[0],At=st[1],ht=this.fontMetrics.getMetrics(dt,At).baseline,this.ctx.font=dt,this.ctx.fillStyle=asString(_.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=canvasTextAlign(d.styles.textAlign),xt=contentBox(d),ct=0,d.styles.textAlign){case 1:ct+=xt.width/2;break;case 2:ct+=xt.width;break}_t=xt.add(ct,0,0,-xt.height/2+1),this.ctx.save(),this.path([new Vector(xt.left,xt.top),new Vector(xt.left+xt.width,xt.top),new Vector(xt.left+xt.width,xt.top+xt.height),new Vector(xt.left,xt.top+xt.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new TextBounds(d.value,_t),_.letterSpacing,ht),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!contains(d.styles.display,2048))return[3,20];if(d.styles.listStyleImage===null)return[3,19];if(gt=d.styles.listStyleImage,gt.type!==0)return[3,18];wt=void 0,ft=gt.url,bt.label=15;case 15:return bt.trys.push([15,17,,18]),[4,this.context.cache.match(ft)];case 16:return wt=bt.sent(),this.ctx.drawImage(wt,d.bounds.left-(wt.width+10),d.bounds.top),[3,18];case 17:return bt.sent(),this.context.logger.error("Error loading list-style-image "+ft),[3,18];case 18:return[3,20];case 19:h.listValue&&d.styles.listStyleType!==-1&&(dt=this.createFontStyle(_)[0],this.ctx.font=dt,this.ctx.fillStyle=asString(_.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",xt=new Bounds(d.bounds.left,d.bounds.top+getAbsoluteValue(d.styles.paddingTop,d.bounds.width),d.bounds.width,computeLineHeight(_.lineHeight,_.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new TextBounds(h.listValue,xt),_.letterSpacing,computeLineHeight(_.lineHeight,_.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),bt.label=20;case 20:return[2]}})})},o.prototype.renderStackContent=function(h){return __awaiter(this,void 0,void 0,function(){var d,g,gt,_,b,gt,j,et,gt,tt,rt,gt,at,st,gt,At,ht,gt,ct,_t,gt;return __generator(this,function(wt){switch(wt.label){case 0:if(contains(h.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(h.element)];case 1:wt.sent(),d=0,g=h.negativeZIndex,wt.label=2;case 2:return d<g.length?(gt=g[d],[4,this.renderStack(gt)]):[3,5];case 3:wt.sent(),wt.label=4;case 4:return d++,[3,2];case 5:return[4,this.renderNodeContent(h.element)];case 6:wt.sent(),_=0,b=h.nonInlineLevel,wt.label=7;case 7:return _<b.length?(gt=b[_],[4,this.renderNode(gt)]):[3,10];case 8:wt.sent(),wt.label=9;case 9:return _++,[3,7];case 10:j=0,et=h.nonPositionedFloats,wt.label=11;case 11:return j<et.length?(gt=et[j],[4,this.renderStack(gt)]):[3,14];case 12:wt.sent(),wt.label=13;case 13:return j++,[3,11];case 14:tt=0,rt=h.nonPositionedInlineLevel,wt.label=15;case 15:return tt<rt.length?(gt=rt[tt],[4,this.renderStack(gt)]):[3,18];case 16:wt.sent(),wt.label=17;case 17:return tt++,[3,15];case 18:at=0,st=h.inlineLevel,wt.label=19;case 19:return at<st.length?(gt=st[at],[4,this.renderNode(gt)]):[3,22];case 20:wt.sent(),wt.label=21;case 21:return at++,[3,19];case 22:At=0,ht=h.zeroOrAutoZIndexOrTransformedOrOpacity,wt.label=23;case 23:return At<ht.length?(gt=ht[At],[4,this.renderStack(gt)]):[3,26];case 24:wt.sent(),wt.label=25;case 25:return At++,[3,23];case 26:ct=0,_t=h.positiveZIndex,wt.label=27;case 27:return ct<_t.length?(gt=_t[ct],[4,this.renderStack(gt)]):[3,30];case 28:wt.sent(),wt.label=29;case 29:return ct++,[3,27];case 30:return[2]}})})},o.prototype.mask=function(h){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(h.slice(0).reverse()),this.ctx.closePath()},o.prototype.path=function(h){this.ctx.beginPath(),this.formatPath(h),this.ctx.closePath()},o.prototype.formatPath=function(h){var d=this;h.forEach(function(g,_){var b=isBezierCurve(g)?g.start:g;_===0?d.ctx.moveTo(b.x,b.y):d.ctx.lineTo(b.x,b.y),isBezierCurve(g)&&d.ctx.bezierCurveTo(g.startControl.x,g.startControl.y,g.endControl.x,g.endControl.y,g.end.x,g.end.y)})},o.prototype.renderRepeat=function(h,d,g,_){this.path(h),this.ctx.fillStyle=d,this.ctx.translate(g,_),this.ctx.fill(),this.ctx.translate(-g,-_)},o.prototype.resizeImage=function(h,d,g){var _;if(h.width===d&&h.height===g)return h;var b=(_=this.canvas.ownerDocument)!==null&&_!==void 0?_:document,j=b.createElement("canvas");j.width=Math.max(1,d),j.height=Math.max(1,g);var et=j.getContext("2d");return et.drawImage(h,0,0,h.width,h.height,0,0,d,g),j},o.prototype.renderBackgroundImage=function(h){return __awaiter(this,void 0,void 0,function(){var d,g,_,b,j,et;return __generator(this,function(tt){switch(tt.label){case 0:d=h.styles.backgroundImage.length-1,g=function(rt){var at,st,At,kt,Jt,lr,Vt,qt,Ut,ht,kt,Jt,lr,Vt,qt,ct,_t,gt,wt,ft,dt,xt,bt,Ct,Ut,Qt,kt,Nt,Wt,Vt,qt,_e,Jt,lr,jt,ur,Ar,mr,dr,Nr,Ur,nr;return __generator(this,function(hr){switch(hr.label){case 0:if(rt.type!==0)return[3,5];at=void 0,st=rt.url,hr.label=1;case 1:return hr.trys.push([1,3,,4]),[4,_.context.cache.match(st)];case 2:return at=hr.sent(),[3,4];case 3:return hr.sent(),_.context.logger.error("Error loading background-image "+st),[3,4];case 4:return at&&(At=calculateBackgroundRendering(h,d,[at.width,at.height,at.width/at.height]),kt=At[0],Jt=At[1],lr=At[2],Vt=At[3],qt=At[4],Ut=_.ctx.createPattern(_.resizeImage(at,Vt,qt),"repeat"),_.renderRepeat(kt,Ut,Jt,lr)),[3,6];case 5:isLinearGradient(rt)?(ht=calculateBackgroundRendering(h,d,[null,null,null]),kt=ht[0],Jt=ht[1],lr=ht[2],Vt=ht[3],qt=ht[4],ct=calculateGradientDirection(rt.angle,Vt,qt),_t=ct[0],gt=ct[1],wt=ct[2],ft=ct[3],dt=ct[4],xt=document.createElement("canvas"),xt.width=Vt,xt.height=qt,bt=xt.getContext("2d"),Ct=bt.createLinearGradient(gt,ft,wt,dt),processColorStops(rt.stops,_t).forEach(function(Dr){return Ct.addColorStop(Dr.stop,asString(Dr.color))}),bt.fillStyle=Ct,bt.fillRect(0,0,Vt,qt),Vt>0&&qt>0&&(Ut=_.ctx.createPattern(xt,"repeat"),_.renderRepeat(kt,Ut,Jt,lr))):isRadialGradient(rt)&&(Qt=calculateBackgroundRendering(h,d,[null,null,null]),kt=Qt[0],Nt=Qt[1],Wt=Qt[2],Vt=Qt[3],qt=Qt[4],_e=rt.position.length===0?[FIFTY_PERCENT]:rt.position,Jt=getAbsoluteValue(_e[0],Vt),lr=getAbsoluteValue(_e[_e.length-1],qt),jt=calculateRadius(rt,Jt,lr,Vt,qt),ur=jt[0],Ar=jt[1],ur>0&&Ar>0&&(mr=_.ctx.createRadialGradient(Nt+Jt,Wt+lr,0,Nt+Jt,Wt+lr,ur),processColorStops(rt.stops,ur*2).forEach(function(Dr){return mr.addColorStop(Dr.stop,asString(Dr.color))}),_.path(kt),_.ctx.fillStyle=mr,ur!==Ar?(dr=h.bounds.left+.5*h.bounds.width,Nr=h.bounds.top+.5*h.bounds.height,Ur=Ar/ur,nr=1/Ur,_.ctx.save(),_.ctx.translate(dr,Nr),_.ctx.transform(1,0,0,Ur,0,0),_.ctx.translate(-dr,-Nr),_.ctx.fillRect(Nt,nr*(Wt-Nr)+Nr,Vt,qt*nr),_.ctx.restore()):_.ctx.fill())),hr.label=6;case 6:return d--,[2]}})},_=this,b=0,j=h.styles.backgroundImage.slice(0).reverse(),tt.label=1;case 1:return b<j.length?(et=j[b],[5,g(et)]):[3,4];case 2:tt.sent(),tt.label=3;case 3:return b++,[3,1];case 4:return[2]}})})},o.prototype.renderSolidBorder=function(h,d,g){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(_){return this.path(parsePathForBorder(g,d)),this.ctx.fillStyle=asString(h),this.ctx.fill(),[2]})})},o.prototype.renderDoubleBorder=function(h,d,g,_){return __awaiter(this,void 0,void 0,function(){var b,j;return __generator(this,function(et){switch(et.label){case 0:return d<3?[4,this.renderSolidBorder(h,g,_)]:[3,2];case 1:return et.sent(),[2];case 2:return b=parsePathForBorderDoubleOuter(_,g),this.path(b),this.ctx.fillStyle=asString(h),this.ctx.fill(),j=parsePathForBorderDoubleInner(_,g),this.path(j),this.ctx.fill(),[2]}})})},o.prototype.renderNodeBackgroundAndBorders=function(h){return __awaiter(this,void 0,void 0,function(){var d,g,_,b,j,et,tt,rt,at=this;return __generator(this,function(st){switch(st.label){case 0:return this.applyEffects(h.getEffects(2)),d=h.container.styles,g=!isTransparent(d.backgroundColor)||d.backgroundImage.length,_=[{style:d.borderTopStyle,color:d.borderTopColor,width:d.borderTopWidth},{style:d.borderRightStyle,color:d.borderRightColor,width:d.borderRightWidth},{style:d.borderBottomStyle,color:d.borderBottomColor,width:d.borderBottomWidth},{style:d.borderLeftStyle,color:d.borderLeftColor,width:d.borderLeftWidth}],b=calculateBackgroundCurvedPaintingArea(getBackgroundValueForIndex(d.backgroundClip,0),h.curves),g||d.boxShadow.length?(this.ctx.save(),this.path(b),this.ctx.clip(),isTransparent(d.backgroundColor)||(this.ctx.fillStyle=asString(d.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(h.container)]):[3,2];case 1:st.sent(),this.ctx.restore(),d.boxShadow.slice(0).reverse().forEach(function(At){at.ctx.save();var ht=calculateBorderBoxPath(h.curves),ct=At.inset?0:MASK_OFFSET,_t=transformPath(ht,-ct+(At.inset?1:-1)*At.spread.number,(At.inset?1:-1)*At.spread.number,At.spread.number*(At.inset?-2:2),At.spread.number*(At.inset?-2:2));At.inset?(at.path(ht),at.ctx.clip(),at.mask(_t)):(at.mask(ht),at.ctx.clip(),at.path(_t)),at.ctx.shadowOffsetX=At.offsetX.number+ct,at.ctx.shadowOffsetY=At.offsetY.number,at.ctx.shadowColor=asString(At.color),at.ctx.shadowBlur=At.blur.number,at.ctx.fillStyle=At.inset?asString(At.color):"rgba(0,0,0,1)",at.ctx.fill(),at.ctx.restore()}),st.label=2;case 2:j=0,et=0,tt=_,st.label=3;case 3:return et<tt.length?(rt=tt[et],rt.style!==0&&!isTransparent(rt.color)&&rt.width>0?rt.style!==2?[3,5]:[4,this.renderDashedDottedBorder(rt.color,rt.width,j,h.curves,2)]:[3,11]):[3,13];case 4:return st.sent(),[3,11];case 5:return rt.style!==3?[3,7]:[4,this.renderDashedDottedBorder(rt.color,rt.width,j,h.curves,3)];case 6:return st.sent(),[3,11];case 7:return rt.style!==4?[3,9]:[4,this.renderDoubleBorder(rt.color,rt.width,j,h.curves)];case 8:return st.sent(),[3,11];case 9:return[4,this.renderSolidBorder(rt.color,j,h.curves)];case 10:st.sent(),st.label=11;case 11:j++,st.label=12;case 12:return et++,[3,3];case 13:return[2]}})})},o.prototype.renderDashedDottedBorder=function(h,d,g,_,b){return __awaiter(this,void 0,void 0,function(){var j,et,tt,rt,at,st,At,ht,ct,_t,gt,wt,ft,dt,xt,bt,xt,bt;return __generator(this,function(Ct){return this.ctx.save(),j=parsePathForBorderStroke(_,g),et=parsePathForBorder(_,g),b===2&&(this.path(et),this.ctx.clip()),isBezierCurve(et[0])?(tt=et[0].start.x,rt=et[0].start.y):(tt=et[0].x,rt=et[0].y),isBezierCurve(et[1])?(at=et[1].end.x,st=et[1].end.y):(at=et[1].x,st=et[1].y),g===0||g===2?At=Math.abs(tt-at):At=Math.abs(rt-st),this.ctx.beginPath(),b===3?this.formatPath(j):this.formatPath(et.slice(0,2)),ht=d<3?d*3:d*2,ct=d<3?d*2:d,b===3&&(ht=d,ct=d),_t=!0,At<=ht*2?_t=!1:At<=ht*2+ct?(gt=At/(2*ht+ct),ht*=gt,ct*=gt):(wt=Math.floor((At+ct)/(ht+ct)),ft=(At-wt*ht)/(wt-1),dt=(At-(wt+1)*ht)/wt,ct=dt<=0||Math.abs(ct-ft)<Math.abs(ct-dt)?ft:dt),_t&&(b===3?this.ctx.setLineDash([0,ht+ct]):this.ctx.setLineDash([ht,ct])),b===3?(this.ctx.lineCap="round",this.ctx.lineWidth=d):this.ctx.lineWidth=d*2+1.1,this.ctx.strokeStyle=asString(h),this.ctx.stroke(),this.ctx.setLineDash([]),b===2&&(isBezierCurve(et[0])&&(xt=et[3],bt=et[0],this.ctx.beginPath(),this.formatPath([new Vector(xt.end.x,xt.end.y),new Vector(bt.start.x,bt.start.y)]),this.ctx.stroke()),isBezierCurve(et[1])&&(xt=et[1],bt=et[2],this.ctx.beginPath(),this.formatPath([new Vector(xt.end.x,xt.end.y),new Vector(bt.start.x,bt.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},o.prototype.render=function(h){return __awaiter(this,void 0,void 0,function(){var d;return __generator(this,function(g){switch(g.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=asString(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),d=parseStackingContexts(h),[4,this.renderStack(d)];case 1:return g.sent(),this.applyEffects([]),[2,this.canvas]}})})},o}(Renderer),isTextInputElement=function(s){return s instanceof TextareaElementContainer||s instanceof SelectElementContainer?!0:s instanceof InputElementContainer&&s.type!==RADIO&&s.type!==CHECKBOX},calculateBackgroundCurvedPaintingArea=function(s,o){switch(s){case 0:return calculateBorderBoxPath(o);case 2:return calculateContentBoxPath(o);case 1:default:return calculatePaddingBoxPath(o)}},canvasTextAlign=function(s){switch(s){case 1:return"center";case 2:return"right";case 0:default:return"left"}},iOSBrokenFonts=["-apple-system","system-ui"],fixIOSSystemFonts=function(s){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?s.filter(function(o){return iOSBrokenFonts.indexOf(o)===-1}):s},ForeignObjectRenderer=function(s){__extends(o,s);function o(h,d){var g=s.call(this,h,d)||this;return g.canvas=d.canvas?d.canvas:document.createElement("canvas"),g.ctx=g.canvas.getContext("2d"),g.options=d,g.canvas.width=Math.floor(d.width*d.scale),g.canvas.height=Math.floor(d.height*d.scale),g.canvas.style.width=d.width+"px",g.canvas.style.height=d.height+"px",g.ctx.scale(g.options.scale,g.options.scale),g.ctx.translate(-d.x,-d.y),g.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+d.width+"x"+d.height+" at "+d.x+","+d.y+") with scale "+d.scale),g}return o.prototype.render=function(h){return __awaiter(this,void 0,void 0,function(){var d,g;return __generator(this,function(_){switch(_.label){case 0:return d=createForeignObjectSVG(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,h),[4,loadSerializedSVG(d)];case 1:return g=_.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=asString(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(g,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},o}(Renderer),loadSerializedSVG=function(s){return new Promise(function(o,h){var d=new Image;d.onload=function(){o(d)},d.onerror=h,d.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(s))})},Logger=function(){function s(o){var h=o.id,d=o.enabled;this.id=h,this.enabled=d,this.start=Date.now()}return s.prototype.debug=function(){for(var o=[],h=0;h<arguments.length;h++)o[h]=arguments[h];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,__spreadArray([this.id,this.getTime()+"ms"],o)):this.info.apply(this,o))},s.prototype.getTime=function(){return Date.now()-this.start},s.prototype.info=function(){for(var o=[],h=0;h<arguments.length;h++)o[h]=arguments[h];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,__spreadArray([this.id,this.getTime()+"ms"],o))},s.prototype.warn=function(){for(var o=[],h=0;h<arguments.length;h++)o[h]=arguments[h];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,__spreadArray([this.id,this.getTime()+"ms"],o)):this.info.apply(this,o))},s.prototype.error=function(){for(var o=[],h=0;h<arguments.length;h++)o[h]=arguments[h];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,__spreadArray([this.id,this.getTime()+"ms"],o)):this.info.apply(this,o))},s.instances={},s}(),Context=function(){function s(o,h){var d;this.windowBounds=h,this.instanceName="#"+s.instanceCount++,this.logger=new Logger({id:this.instanceName,enabled:o.logging}),this.cache=(d=o.cache)!==null&&d!==void 0?d:new Cache(this,o)}return s.instanceCount=1,s}(),html2canvas=function(s,o){return o===void 0&&(o={}),renderElement(s,o)};typeof window<"u"&&CacheStorage.setContext(window);var renderElement=function(s,o){return __awaiter(void 0,void 0,void 0,function(){var h,d,g,_,b,j,et,tt,rt,at,st,At,ht,ct,_t,gt,wt,ft,dt,xt,Ct,bt,Ct,Ut,Qt,kt,Nt,Wt,Vt,qt,_e,Jt,lr,jt,ur,Ar,mr,dr,Nr,Ur;return __generator(this,function(nr){switch(nr.label){case 0:if(!s||typeof s!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(h=s.ownerDocument,!h)throw new Error("Element is not attached to a Document");if(d=h.defaultView,!d)throw new Error("Document is not attached to a Window");return g={allowTaint:(Ut=o.allowTaint)!==null&&Ut!==void 0?Ut:!1,imageTimeout:(Qt=o.imageTimeout)!==null&&Qt!==void 0?Qt:15e3,proxy:o.proxy,useCORS:(kt=o.useCORS)!==null&&kt!==void 0?kt:!1},_=__assign({logging:(Nt=o.logging)!==null&&Nt!==void 0?Nt:!0,cache:o.cache},g),b={windowWidth:(Wt=o.windowWidth)!==null&&Wt!==void 0?Wt:d.innerWidth,windowHeight:(Vt=o.windowHeight)!==null&&Vt!==void 0?Vt:d.innerHeight,scrollX:(qt=o.scrollX)!==null&&qt!==void 0?qt:d.pageXOffset,scrollY:(_e=o.scrollY)!==null&&_e!==void 0?_e:d.pageYOffset},j=new Bounds(b.scrollX,b.scrollY,b.windowWidth,b.windowHeight),et=new Context(_,j),tt=(Jt=o.foreignObjectRendering)!==null&&Jt!==void 0?Jt:!1,rt={allowTaint:(lr=o.allowTaint)!==null&&lr!==void 0?lr:!1,onclone:o.onclone,ignoreElements:o.ignoreElements,inlineImages:tt,copyStyles:tt},et.logger.debug("Starting document clone with size "+j.width+"x"+j.height+" scrolled to "+-j.left+","+-j.top),at=new DocumentCloner(et,s,rt),st=at.clonedReferenceElement,st?[4,at.toIFrame(h,j)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return At=nr.sent(),ht=isBodyElement(st)||isHTMLElement(st)?parseDocumentSize(st.ownerDocument):parseBounds(et,st),ct=ht.width,_t=ht.height,gt=ht.left,wt=ht.top,ft=parseBackgroundColor(et,st,o.backgroundColor),dt={canvas:o.canvas,backgroundColor:ft,scale:(ur=(jt=o.scale)!==null&&jt!==void 0?jt:d.devicePixelRatio)!==null&&ur!==void 0?ur:1,x:((Ar=o.x)!==null&&Ar!==void 0?Ar:0)+gt,y:((mr=o.y)!==null&&mr!==void 0?mr:0)+wt,width:(dr=o.width)!==null&&dr!==void 0?dr:Math.ceil(ct),height:(Nr=o.height)!==null&&Nr!==void 0?Nr:Math.ceil(_t)},tt?(et.logger.debug("Document cloned, using foreign object rendering"),Ct=new ForeignObjectRenderer(et,dt),[4,Ct.render(st)]):[3,3];case 2:return xt=nr.sent(),[3,5];case 3:return et.logger.debug("Document cloned, element located at "+gt+","+wt+" with size "+ct+"x"+_t+" using computed rendering"),et.logger.debug("Starting DOM parsing"),bt=parseTree(et,st),ft===bt.styles.backgroundColor&&(bt.styles.backgroundColor=COLORS.TRANSPARENT),et.logger.debug("Starting renderer for element at "+dt.x+","+dt.y+" with size "+dt.width+"x"+dt.height),Ct=new CanvasRenderer(et,dt),[4,Ct.render(bt)];case 4:xt=nr.sent(),nr.label=5;case 5:return(!((Ur=o.removeContainer)!==null&&Ur!==void 0)||Ur)&&(DocumentCloner.destroy(At)||et.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),et.logger.debug("Finished rendering"),[2,xt]}})})},parseBackgroundColor=function(s,o,h){var d=o.ownerDocument,g=d.documentElement?parseColor(s,getComputedStyle(d.documentElement).backgroundColor):COLORS.TRANSPARENT,_=d.body?parseColor(s,getComputedStyle(d.body).backgroundColor):COLORS.TRANSPARENT,b=typeof h=="string"?parseColor(s,h):h===null?COLORS.TRANSPARENT:4294967295;return o===d.documentElement?isTransparent(g)?isTransparent(_)?b:_:g:b};const GEMINI_API_KEY="AIzaSyCUspjopyRDqf8iR-ftL7UsPyaYfAt1p_M",OSRM_URL="https://router.project-osrm.org",blobUrl=(s,o="image/jpeg")=>URL.createObjectURL(new Blob([s],{type:o}));async function fetchGemini(s,o){const h="https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent?key="+GEMINI_API_KEY,d=[];if(o){const b=o.replace(/^data:image\/\w+;base64,/,"");d.push({inline_data:{mime_type:"image/jpeg",data:b}})}d.push({text:s});const g=await fetch(h,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:d}]})});if(!g.ok)throw new Error(`Gemini error ${g.status}: ${await g.text()}`);return(await g.json()).candidates[0].content.parts[0].text}function App(){const[s,o]=reactExports.useState(null),[h,d]=reactExports.useState(null),[g,_]=reactExports.useState(""),[b,j]=reactExports.useState(""),[et,tt]=reactExports.useState(null),[rt,at]=reactExports.useState(null),[st,At]=reactExports.useState(!1),[ht,ct]=reactExports.useState("Pronto!"),[_t,gt]=reactExports.useState([]),[wt,ft]=reactExports.useState(0),[dt,xt]=reactExports.useState(null),[bt,Ct]=reactExports.useState({lat:"",lng:""}),[Ut,Qt]=reactExports.useState(null),kt=reactExports.useRef(null),Nt=reactExports.useRef(null),Wt=reactExports.useRef(null),Vt=reactExports.useRef(null),qt=reactExports.useRef(null),_e=[{name:"Bar",lat:40.8367,lng:16.5931},{name:"Casa",lat:40.8362,lng:16.5925}],Jt=or=>gt(xr=>[...xr.slice(-19),`${new Date().toLocaleTimeString()}: ${or}`]);reactExports.useEffect(()=>{const or=xr=>{xr.absolute&&xr.alpha!=null&&ft(xr.alpha)};return window.addEventListener("deviceorientation",or),()=>window.removeEventListener("deviceorientation",or)},[]),reactExports.useEffect(()=>{const or=navigator.geolocation.watchPosition(xr=>xt({lat:xr.coords.latitude,lng:xr.coords.longitude}),()=>{},{enableHighAccuracy:!0});return()=>navigator.geolocation.clearWatch(or)},[]),reactExports.useEffect(()=>{!Wt.current||Vt.current||(Vt.current=L$2.map(Wt.current,{center:[40.8362,16.5936],zoom:15,zoomControl:!1,attributionControl:!1,preferCanvas:!0}),L$2.tileLayer("https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",{subdomains:"abcd",crossOrigin:!0,attribution:""}).addTo(Vt.current),Nt.current=L$2.layerGroup().addTo(Vt.current),_e.forEach(({lat:or,lng:xr,name:Wr})=>{L$2.marker([or,xr]).bindPopup(Wr).addTo(Nt.current)}))},[]),reactExports.useEffect(()=>{!Vt.current||!dt||(Vt.current.eachLayer(or=>{or instanceof L$2.CircleMarker&&Vt.current.removeLayer(or)}),kt.current&&(Vt.current.removeLayer(kt.current),kt.current=null),L$2.circleMarker([dt.lat,dt.lng],{radius:12,weight:3,color:"#C80000",fillColor:"#FFD600",fillOpacity:1}).addTo(Vt.current),Ut&&fetch(`${OSRM_URL}/route/v1/driving/${dt.lng},${dt.lat};${Ut.lng},${Ut.lat}?overview=full&geometries=geojson`).then(or=>or.json()).then(or=>{const xr=or.routes[0].geometry.coordinates.map(([Wr,$r])=>[$r,Wr]);kt.current=L$2.polyline(xr,{color:"#00C8FF",weight:10}).addTo(Vt.current)}).catch(or=>console.warn("OSRM error",or)))},[dt,Ut]);const lr=or=>new Promise(xr=>setTimeout(xr,or)),jt=async()=>{ct("Connessione in corso…"),Jt("▶ handleConnect");try{const or=new FrameMsg;await or.connect(),Jt("✔ connected"),or.attachPrintResponseHandler(Wr=>Jt("[Frame] "+Wr));const xr=await or.sendLua('print(frame.battery_level() .. " / " .. collectgarbage("count"))',{awaitPrint:!0});Jt(`⚙️ Batt/Mem: ${xr}`),await or.uploadStdLuaLibs([StdLua.DataMin,StdLua.PlainTextMin,StdLua.CameraMin,StdLua.SpriteMin]),Jt("✔ libs loaded"),await or.uploadFrameApp(markinoFrameApp),Jt("✔ Lua script uploaded"),await or.startFrameApp(),o(or),ct("Occhiali pronti!"),await or.sendMessage(10,new TxPlainText("BullVerge-Frame Connect",1,1,9).pack()),await lr(2e3),await or.sendMessage(10,new TxPlainText("",1,1,1).pack())}catch(or){Jt("✖ connect: "+or.message),ct("Errore connect: "+or.message)}},ur=async()=>{ct("Connessione in corso…"),Jt("▶ handleConnect");try{const or=new FrameMsg;await or.connect(),Jt("✔ connected"),or.attachPrintResponseHandler(Wr=>Jt("[Frame] "+Wr));const xr=await or.sendLua('print(frame.battery_level() .. " / " .. collectgarbage("count"))',{awaitPrint:!0});Jt(`⚙️ Batt/Mem: ${xr}`),await or.uploadStdLuaLibs([StdLua.DataMin,StdLua.PlainTextMin,StdLua.CameraMin,StdLua.SpriteMin,StdLua.TextSpriteBlockMin,StdLua.ImageSpriteBlockMin]),Jt("✔ libs loaded"),await or.uploadFrameApp(markinoFrameAppOPT),Jt("✔ Lua script uploaded"),await or.startFrameApp(),d(or),ct("Occhiali pronti!"),await or.sendMessage(10,new TxPlainText("BullVerge-Frame OPT",1,1,7).pack()),await lr(2e3),await or.sendMessage(10,new TxPlainText("",1,1,1).pack())}catch(or){Jt("✖ connect: "+or.message),ct("Errore connect: "+or.message)}},Ar=async()=>{if(!s||!Wt.current){ct("Errore: init mappa o frame");return}ct("📸 Snap mappa…"),Jt("▶ sendMapToFrame");try{const or=await html2canvas(Wt.current,{useCORS:!0,allowTaint:!1,backgroundColor:"#111827",scale:2}),Wr=await(await new Promise((Or,qr)=>or.toBlob(fr=>fr?Or(fr):qr("toBlob fallito"),"image/jpeg",.9))).arrayBuffer(),$r=await TxSprite.fromImageBytes(Wr,36e3);await s.sendMessage(32,$r.pack()),Jt("✔ mappa inviata"),ct("Mappa mostrata!")}catch(or){Jt("✖ map error: "+or),ct("Errore mappa")}},mr=()=>{qt.current||(qt.current=setInterval(Ar,5e3),Jt("▶ Auto‐update ON"))},dr=()=>{qt.current&&(clearInterval(qt.current),qt.current=null,Jt("■ Auto‐update OFF"))},Nr=()=>{const or=parseFloat(bt.lat),xr=parseFloat(bt.lng);!isNaN(or)&&!isNaN(xr)&&(Qt({lat:or,lng:xr}),Jt(`▶ destinazione settata: ${or.toFixed(5)},${xr.toFixed(5)}`)),Ct({lat:"",lng:""})},Ur=async()=>{if(!s)return ct("Connetti prima gli occhiali!");ct("Cattura foto…"),Jt("▶ handleCapture");try{const or=new RxPhoto({}),xr=await or.attach(s);await s.sendMessage(13,new TxCaptureSettings(720).pack());const Wr=await xr.get();or.detach(s);const $r=blobUrl(Wr);tt($r),at(null),At(!1),ct("Foto catturata (nascosta)")}catch(or){Jt("✖ capture: "+or.message),ct("Errore capture: "+or.message)}},nr=async()=>{var or;if(!s)return ct("Connetti prima gli occhiali!");ct("Generazione immagine…"),Jt("▶ handleGenerateImage");try{const xr=`https://image.pollinations.ai/prompt/${encodeURIComponent(g||"abstract art")}`,$r=await(await fetch(xr)).arrayBuffer(),Or=blobUrl($r);tt(Or),At(!0);const qr=await TxSprite.fromImageBytes($r,36e3),fr=(or=qr.toPngBytes)==null?void 0:or.call(qr);fr&&at(blobUrl(fr,"image/png")),await s.sendMessage(32,qr.pack()),Jt("✔ sprite inviato agli occhiali"),ct("Immagine Pollinations mostrata!")}catch(xr){Jt("✖ generateImage: "+xr.message),ct("Errore generazione immagine: "+xr.message)}},hr=async()=>{ct("Preparazione richiesta a Gemini…"),Jt("▶ handleSend");try{let or;if(et){const $r=await(await fetch(et)).blob();or=await new Promise(Or=>{const qr=new FileReader;qr.onloadend=()=>Or(qr.result),qr.readAsDataURL($r)})}const xr=await fetchGemini(g,or);j(xr),Jt("✔ Gemini reply"),s&&(await s.sendMessage(10,new TxPlainText(xr).pack()),ct("Risposta mostrata sugli occhiali!"))}catch(or){Jt("✖ handleSend: "+or.message),ct("Errore Gemini: "+or.message)}},Dr=async()=>{!s&&!h||(s&&(Jt("▶ clearFrame"),await s.sendMessage(10,new TxPlainText("").pack()),ct("Schermo pulito")),h&&(Jt("▶ clearFrameOPT"),await h.sendMessage(10,new TxPlainText("").pack()),ct("Schermo pulito")))},Qr=async()=>{if(!(!s&&!h))try{s&&(Jt("▶ disconnectFrame"),await s.stopFrameApp(),await s.disconnect(),o(null)),h&&(Jt("▶ disconnectFrameOPT"),await h.stopFrameApp(),await h.disconnect(),d(null)),ct("Disconnesso")}catch(or){ct("Errore disconnect: "+or.message)}},vr=async()=>{if(!s)return ct("Connetti prima");Jt("▶ showDashboard");const or=new Date,xr=or.toLocaleDateString(void 0,{weekday:"short",day:"2-digit",month:"short"}),Wr=or.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"});let $r="n/d";if(dt){$r=`Coord: ${`${dt.lat.toFixed(5)}, ${dt.lng.toFixed(5)}`},
`;try{const Kr=await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${dt.lat}&longitude=${dt.lng}&current_weather=true`),{current_weather:jr}=await Kr.json();$r+=`${jr.temperature}°C, vento ${jr.windspeed} km/h`}catch{}}let Or="–";if(Ut&&dt){const Kr=dt.lat*Math.PI/180,jr=Ut.lat*Math.PI/180,Xr=(Ut.lat-dt.lat)*Math.PI/180,Tr=(Ut.lng-dt.lng)*Math.PI/180,An=Math.sin(Xr/2)**2+Math.cos(Kr)*Math.cos(jr)*Math.sin(Tr/2)**2;Or=`${(6371e3*2*Math.atan2(Math.sqrt(An),Math.sqrt(1-An))/1e3).toFixed(1)} km`}const qr=`Mark-BullVerge: ${xr}|${Wr}|${$r}|${Or}`;await s.sendMessage(10,new TxPlainText(qr,1,1,3).pack()),ct("Dashboard inviata")},on=async()=>{if(!h)return ct("Connetti prima");Jt("▶ showDashboard");const or=new Date,xr=or.toLocaleDateString(void 0,{weekday:"short",day:"2-digit",month:"short"}),Wr=or.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"});let $r="n/d";if(dt){$r=`Coord: ${`${dt.lat.toFixed(5)}, ${dt.lng.toFixed(5)}`},
`;try{const jr=await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${dt.lat}&longitude=${dt.lng}&current_weather=true`),{current_weather:Xr}=await jr.json();$r+=`${Xr.temperature}°C, vento ${Xr.windspeed} km/h`}catch{}}let Or="–";if(Ut&&dt){const jr=dt.lat*Math.PI/180,Xr=Ut.lat*Math.PI/180,Tr=(Ut.lat-dt.lat)*Math.PI/180,An=(Ut.lng-dt.lng)*Math.PI/180,Gr=Math.sin(Tr/2)**2+Math.cos(jr)*Math.cos(Xr)*Math.sin(An/2)**2;Or=`${(6371e3*2*Math.atan2(Math.sqrt(Gr),Math.sqrt(1-Gr))/1e3).toFixed(1)} km`}const qr=["Mark - BullVerge: ",`${xr},`,`${Wr},`,`${$r},`,`${Or}`].join(`
`),fr=new TxTextSpriteBlock({width:500,fontSize:28,maxDisplayRows:5,text:qr});await h.sendMessage(34,fr.pack());for(const Kr of fr.sprites)await h.sendMessage(34,Kr.pack());ct("Dashboard inviata")},en=async()=>{if(!h)return ct("Connetti prima");Jt("▶ showDashboard");const or=new Date,xr=or.toLocaleDateString(void 0,{weekday:"short",day:"2-digit",month:"short"}),Wr=or.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"});let $r="n/d";if(dt){$r=`Coord: ${`${dt.lat.toFixed(5)}, ${dt.lng.toFixed(5)}`},
`;try{const jr=await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${dt.lat}&longitude=${dt.lng}&current_weather=true`),{current_weather:Xr}=await jr.json();$r+=`${Xr.temperature}°C, vento ${Xr.windspeed} km/h`}catch{}}let Or="–";if(Ut&&dt){const jr=dt.lat*Math.PI/180,Xr=Ut.lat*Math.PI/180,Tr=(Ut.lat-dt.lat)*Math.PI/180,An=(Ut.lng-dt.lng)*Math.PI/180,Gr=Math.sin(Tr/2)**2+Math.cos(jr)*Math.cos(Xr)*Math.sin(An/2)**2;Or=`${(6371e3*2*Math.atan2(Math.sqrt(Gr),Math.sqrt(1-Gr))/1e3).toFixed(1)} km`}const qr=`Mark - BullVerge: ${xr},${Wr},${$r},${Or}`,fr=new TxTextSpriteBlock({width:500,fontSize:28,maxDisplayRows:5,text:qr});await h.sendMessage(34,fr.pack());for(const Kr of fr.sprites)await h.sendMessage(34,Kr.pack());ct("Dashboard inviata")},zr=(or,xr=!1)=>({...or,...xr?styles.btnDisabled:{}});return jsxRuntimeExports.jsxs("div",{style:styles.container,children:[jsxRuntimeExports.jsx("h1",{style:styles.header,children:"Markino Solutions → Frame"}),jsxRuntimeExports.jsxs("div",{style:styles.controls,children:[jsxRuntimeExports.jsx("button",{onClick:jt,style:zr(styles.btnSecondary,!!s),children:"🔌Connetti & Carica"}),jsxRuntimeExports.jsx("button",{onClick:ur,style:zr(styles.btnSecondary,!!h),children:"🔌Connetti & Carica OPT"}),jsxRuntimeExports.jsx("button",{onClick:vr,disabled:!s,style:zr(styles.btnSecondary,!s),children:"📊 Dashboard"}),jsxRuntimeExports.jsx("button",{onClick:on,disabled:!h,style:zr(styles.btnSecondary,!h),children:"📊 Dashboard OPT"}),jsxRuntimeExports.jsx("button",{onClick:en,disabled:!h,style:zr(styles.btnSecondary,!h),children:"📊 Dashboard OPT2"}),jsxRuntimeExports.jsx("button",{onClick:Ur,disabled:!s&&!h,style:zr(styles.btnPrimary,!s&&!h),children:"📸 Cattura Foto"}),jsxRuntimeExports.jsx("button",{onClick:()=>At(or=>!or),disabled:!et,style:zr(styles.btnSecondary,!et),children:st?"Nascondi Media":"Mostra Media"}),jsxRuntimeExports.jsx("button",{onClick:Dr,disabled:!s&&!h,style:zr(styles.btnSecondary,!s&&!h),children:"🧹 Pulisci Schermo"}),jsxRuntimeExports.jsxs("div",{style:{marginBottom:8},children:[jsxRuntimeExports.jsx("button",{onClick:Ar,disabled:!s&&!h,children:"🗺️ Mostra Mappa"}),jsxRuntimeExports.jsx("button",{onClick:mr,children:"▶ Auto"}),jsxRuntimeExports.jsx("button",{onClick:dr,children:"■ Stop"})]}),jsxRuntimeExports.jsxs("div",{style:{marginBottom:16,textAlign:"center"},children:[jsxRuntimeExports.jsx("input",{style:styles.input,type:"text",placeholder:"lat",value:bt.lat,onChange:or=>Ct({...bt,lat:or.target.value})}),jsxRuntimeExports.jsx("input",{style:styles.input,type:"text",placeholder:"lng",value:bt.lng,onChange:or=>Ct({...bt,lng:or.target.value})}),jsxRuntimeExports.jsx("button",{onClick:Nr,style:zr(styles.btnPrimary,!s&&!h),disabled:!s&&!h,children:"📍 Avvia Navigazione"})]}),jsxRuntimeExports.jsx("button",{onClick:Qr,disabled:!s,style:zr(styles.btnSecondary,!s),children:"🔌Disconnetti"}),jsxRuntimeExports.jsx("button",{onClick:Qr,disabled:!h,style:zr(styles.btnSecondary,!h),children:"🔌Disconnetti OPT"}),jsxRuntimeExports.jsx("button",{onClick:nr,disabled:!s&&!h||!g,style:zr(styles.btnPrimary,!s&&!h||!g),children:"🎨 Genera Immagine"})]}),st&&et&&jsxRuntimeExports.jsxs("div",{style:styles.imageWrapper,children:[jsxRuntimeExports.jsx("h4",{children:"Originale Pollinations"}),jsxRuntimeExports.jsx("img",{src:et,alt:"original",style:styles.image})]}),st&&rt&&jsxRuntimeExports.jsxs("div",{style:styles.imageWrapper,children:[jsxRuntimeExports.jsx("h4",{children:"Sprite Quantizzato"}),jsxRuntimeExports.jsx("img",{src:rt,alt:"sprite",style:styles.image})]}),jsxRuntimeExports.jsx("textarea",{rows:3,value:g,onChange:or=>_(or.target.value),placeholder:"Prompt…",style:styles.textarea}),jsxRuntimeExports.jsx("button",{onClick:hr,disabled:!s&&!h&&!g,style:zr(styles.sendButton,!s&&!h&&!g),children:"Invia a Gemini & Frame"}),jsxRuntimeExports.jsxs("div",{style:styles.status,children:[jsxRuntimeExports.jsx("b",{children:"Stato:"})," ",ht]}),jsxRuntimeExports.jsx("pre",{style:styles.logs,children:_t.join(`
`)}),jsxRuntimeExports.jsxs("div",{style:styles.response,children:[jsxRuntimeExports.jsx("b",{children:"Risposta Gemini:"}),jsxRuntimeExports.jsx("pre",{style:styles.responsePre,children:b})]}),jsxRuntimeExports.jsx("div",{ref:Wt,style:{width:"100%",height:300,borderRadius:8,overflow:"hidden",marginBottom:16,boxShadow:"0 2px 6px rgba(0,0,0,.5)"}})]})}const styles={container:{maxWidth:650,margin:"0 auto",padding:16,backgroundColor:"#111827",color:"#f3f4f6",fontFamily:"'Helvetica Neue', Arial, sans-serif"},imageWrapper:{marginTop:12,textAlign:"center",width:"100%",maxWidth:300,maxHeight:300,overflow:"hidden"},image:{width:"100%",height:"auto",maxHeight:"100%",objectFit:"contain"},header:{textAlign:"center",fontSize:24,marginBottom:16,color:"#60a5fa"},controls:{display:"flex",flexWrap:"wrap",gap:8,justifyContent:"center",marginBottom:16},btnPrimary:{padding:"10px 14px",backgroundColor:"#2563eb",color:"#fff",border:"none",borderRadius:6,cursor:"pointer",flex:1,minWidth:120},btnSecondary:{padding:"10px 14px",backgroundColor:"#059669",color:"#fff",border:"none",borderRadius:6,cursor:"pointer",flex:1,minWidth:120},btnDisabled:{opacity:.5,cursor:"not-allowed"},status:{textAlign:"center",marginBottom:8,color:"#9ca3af"},logs:{backgroundColor:"#1f2937",padding:12,borderRadius:6,fontSize:14,color:"#d1d5db",maxHeight:120,overflowY:"auto",marginBottom:16},input:{width:100,marginRight:8,padding:6,borderRadius:4,border:"1px solid #374151",backgroundColor:"#1f2937",color:"#f3f4f6"}};client.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(React.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));
