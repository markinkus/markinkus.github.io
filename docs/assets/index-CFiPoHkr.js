(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const g of document.querySelectorAll('link[rel="modulepreload"]'))d(g);new MutationObserver(g=>{for(const _ of g)if(_.type==="childList")for(const b of _.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&d(b)}).observe(document,{childList:!0,subtree:!0});function h(g){const _={};return g.integrity&&(_.integrity=g.integrity),g.referrerPolicy&&(_.referrerPolicy=g.referrerPolicy),g.crossOrigin==="use-credentials"?_.credentials="include":g.crossOrigin==="anonymous"?_.credentials="omit":_.credentials="same-origin",_}function d(g){if(g.ep)return;g.ep=!0;const _=h(g);fetch(g.href,_)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};function getDefaultExportFromCjs$1(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$1=Symbol.for("react.element"),n$1=Symbol.for("react.portal"),p$3=Symbol.for("react.fragment"),q$1=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),t=Symbol.for("react.provider"),u$1=Symbol.for("react.context"),v$1=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),x$1=Symbol.for("react.memo"),y$1=Symbol.for("react.lazy"),z$2=Symbol.iterator;function A$2(s){return s===null||typeof s!="object"?null:(s=z$2&&s[z$2]||s["@@iterator"],typeof s=="function"?s:null)}var B$1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$1=Object.assign,D$1={};function E$2(s,o,h){this.props=s,this.context=o,this.refs=D$1,this.updater=h||B$1}E$2.prototype.isReactComponent={};E$2.prototype.setState=function(s,o){if(typeof s!="object"&&typeof s!="function"&&s!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,s,o,"setState")};E$2.prototype.forceUpdate=function(s){this.updater.enqueueForceUpdate(this,s,"forceUpdate")};function F$1(){}F$1.prototype=E$2.prototype;function G$1(s,o,h){this.props=s,this.context=o,this.refs=D$1,this.updater=h||B$1}var H$1=G$1.prototype=new F$1;H$1.constructor=G$1;C$1(H$1,E$2.prototype);H$1.isPureReactComponent=!0;var I$1=Array.isArray,J=Object.prototype.hasOwnProperty,K$1={current:null},L$4={key:!0,ref:!0,__self:!0,__source:!0};function M$1(s,o,h){var d,g={},_=null,b=null;if(o!=null)for(d in o.ref!==void 0&&(b=o.ref),o.key!==void 0&&(_=""+o.key),o)J.call(o,d)&&!L$4.hasOwnProperty(d)&&(g[d]=o[d]);var $=arguments.length-2;if($===1)g.children=h;else if(1<$){for(var et=Array($),tt=0;tt<$;tt++)et[tt]=arguments[tt+2];g.children=et}if(s&&s.defaultProps)for(d in $=s.defaultProps,$)g[d]===void 0&&(g[d]=$[d]);return{$$typeof:l$1,type:s,key:_,ref:b,props:g,_owner:K$1.current}}function N$1(s,o){return{$$typeof:l$1,type:s.type,key:o,ref:s.ref,props:s.props,_owner:s._owner}}function O$1(s){return typeof s=="object"&&s!==null&&s.$$typeof===l$1}function escape(s){var o={"=":"=0",":":"=2"};return"$"+s.replace(/[=:]/g,function(h){return o[h]})}var P$1=/\/+/g;function Q$1(s,o){return typeof s=="object"&&s!==null&&s.key!=null?escape(""+s.key):o.toString(36)}function R$2(s,o,h,d,g){var _=typeof s;(_==="undefined"||_==="boolean")&&(s=null);var b=!1;if(s===null)b=!0;else switch(_){case"string":case"number":b=!0;break;case"object":switch(s.$$typeof){case l$1:case n$1:b=!0}}if(b)return b=s,g=g(b),s=d===""?"."+Q$1(b,0):d,I$1(g)?(h="",s!=null&&(h=s.replace(P$1,"$&/")+"/"),R$2(g,o,h,"",function(tt){return tt})):g!=null&&(O$1(g)&&(g=N$1(g,h+(!g.key||b&&b.key===g.key?"":(""+g.key).replace(P$1,"$&/")+"/")+s)),o.push(g)),1;if(b=0,d=d===""?".":d+":",I$1(s))for(var $=0;$<s.length;$++){_=s[$];var et=d+Q$1(_,$);b+=R$2(_,o,h,et,g)}else if(et=A$2(s),typeof et=="function")for(s=et.call(s),$=0;!(_=s.next()).done;)_=_.value,et=d+Q$1(_,$++),b+=R$2(_,o,h,et,g);else if(_==="object")throw o=String(s),Error("Objects are not valid as a React child (found: "+(o==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":o)+"). If you meant to render a collection of children, use an array instead.");return b}function S$1(s,o,h){if(s==null)return s;var d=[],g=0;return R$2(s,d,"","",function(_){return o.call(h,_,g++)}),d}function T$2(s){if(s._status===-1){var o=s._result;o=o(),o.then(function(h){(s._status===0||s._status===-1)&&(s._status=1,s._result=h)},function(h){(s._status===0||s._status===-1)&&(s._status=2,s._result=h)}),s._status===-1&&(s._status=0,s._result=o)}if(s._status===1)return s._result.default;throw s._result}var U$2={current:null},V$2={transition:null},W$1={ReactCurrentDispatcher:U$2,ReactCurrentBatchConfig:V$2,ReactCurrentOwner:K$1};function X$1(){throw Error("act(...) is not supported in production builds of React.")}react_production_min.Children={map:S$1,forEach:function(s,o,h){S$1(s,function(){o.apply(this,arguments)},h)},count:function(s){var o=0;return S$1(s,function(){o++}),o},toArray:function(s){return S$1(s,function(o){return o})||[]},only:function(s){if(!O$1(s))throw Error("React.Children.only expected to receive a single React element child.");return s}};react_production_min.Component=E$2;react_production_min.Fragment=p$3;react_production_min.Profiler=r;react_production_min.PureComponent=G$1;react_production_min.StrictMode=q$1;react_production_min.Suspense=w;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$1;react_production_min.act=X$1;react_production_min.cloneElement=function(s,o,h){if(s==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+s+".");var d=C$1({},s.props),g=s.key,_=s.ref,b=s._owner;if(o!=null){if(o.ref!==void 0&&(_=o.ref,b=K$1.current),o.key!==void 0&&(g=""+o.key),s.type&&s.type.defaultProps)var $=s.type.defaultProps;for(et in o)J.call(o,et)&&!L$4.hasOwnProperty(et)&&(d[et]=o[et]===void 0&&$!==void 0?$[et]:o[et])}var et=arguments.length-2;if(et===1)d.children=h;else if(1<et){$=Array(et);for(var tt=0;tt<et;tt++)$[tt]=arguments[tt+2];d.children=$}return{$$typeof:l$1,type:s.type,key:g,ref:_,props:d,_owner:b}};react_production_min.createContext=function(s){return s={$$typeof:u$1,_currentValue:s,_currentValue2:s,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},s.Provider={$$typeof:t,_context:s},s.Consumer=s};react_production_min.createElement=M$1;react_production_min.createFactory=function(s){var o=M$1.bind(null,s);return o.type=s,o};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(s){return{$$typeof:v$1,render:s}};react_production_min.isValidElement=O$1;react_production_min.lazy=function(s){return{$$typeof:y$1,_payload:{_status:-1,_result:s},_init:T$2}};react_production_min.memo=function(s,o){return{$$typeof:x$1,type:s,compare:o===void 0?null:o}};react_production_min.startTransition=function(s){var o=V$2.transition;V$2.transition={};try{s()}finally{V$2.transition=o}};react_production_min.unstable_act=X$1;react_production_min.useCallback=function(s,o){return U$2.current.useCallback(s,o)};react_production_min.useContext=function(s){return U$2.current.useContext(s)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(s){return U$2.current.useDeferredValue(s)};react_production_min.useEffect=function(s,o){return U$2.current.useEffect(s,o)};react_production_min.useId=function(){return U$2.current.useId()};react_production_min.useImperativeHandle=function(s,o,h){return U$2.current.useImperativeHandle(s,o,h)};react_production_min.useInsertionEffect=function(s,o){return U$2.current.useInsertionEffect(s,o)};react_production_min.useLayoutEffect=function(s,o){return U$2.current.useLayoutEffect(s,o)};react_production_min.useMemo=function(s,o){return U$2.current.useMemo(s,o)};react_production_min.useReducer=function(s,o,h){return U$2.current.useReducer(s,o,h)};react_production_min.useRef=function(s){return U$2.current.useRef(s)};react_production_min.useState=function(s){return U$2.current.useState(s)};react_production_min.useSyncExternalStore=function(s,o,h){return U$2.current.useSyncExternalStore(s,o,h)};react_production_min.useTransition=function(){return U$2.current.useTransition()};react_production_min.version="18.3.1";react.exports=react_production_min;var reactExports=react.exports;const React=getDefaultExportFromCjs$1(reactExports);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$1=reactExports,k=Symbol.for("react.element"),l=Symbol.for("react.fragment"),m$2=Object.prototype.hasOwnProperty,n=f$1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$2={key:!0,ref:!0,__self:!0,__source:!0};function q(s,o,h){var d,g={},_=null,b=null;h!==void 0&&(_=""+h),o.key!==void 0&&(_=""+o.key),o.ref!==void 0&&(b=o.ref);for(d in o)m$2.call(o,d)&&!p$2.hasOwnProperty(d)&&(g[d]=o[d]);if(s&&s.defaultProps)for(d in o=s.defaultProps,o)g[d]===void 0&&(g[d]=o[d]);return{$$typeof:k,type:s,key:_,ref:b,props:g,_owner:n.current}}reactJsxRuntime_production_min.Fragment=l;reactJsxRuntime_production_min.jsx=q;reactJsxRuntime_production_min.jsxs=q;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(s){function o(Wt,pr){var dr=Wt.length;Wt.push(pr);t:for(;0<dr;){var yr=dr-1>>>1,Br=Wt[yr];if(0<g(Br,pr))Wt[yr]=pr,Wt[dr]=Br,dr=yr;else break t}}function h(Wt){return Wt.length===0?null:Wt[0]}function d(Wt){if(Wt.length===0)return null;var pr=Wt[0],dr=Wt.pop();if(dr!==pr){Wt[0]=dr;t:for(var yr=0,Br=Wt.length,Lr=Br>>>1;yr<Lr;){var Ur=2*(yr+1)-1,or=Wt[Ur],mr=Ur+1,Ir=Wt[mr];if(0>g(or,dr))mr<Br&&0>g(Ir,or)?(Wt[yr]=Ir,Wt[mr]=dr,yr=mr):(Wt[yr]=or,Wt[Ur]=dr,yr=Ur);else if(mr<Br&&0>g(Ir,dr))Wt[yr]=Ir,Wt[mr]=dr,yr=mr;else break t}}return pr}function g(Wt,pr){var dr=Wt.sortIndex-pr.sortIndex;return dr!==0?dr:Wt.id-pr.id}if(typeof performance=="object"&&typeof performance.now=="function"){var _=performance;s.unstable_now=function(){return _.now()}}else{var b=Date,$=b.now();s.unstable_now=function(){return b.now()-$}}var et=[],tt=[],rt=1,nt=null,At=3,at=!1,lt=!1,gt=!1,_t=typeof setTimeout=="function"?setTimeout:null,ct=typeof clearTimeout=="function"?clearTimeout:null,pt=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function dt(Wt){for(var pr=h(tt);pr!==null;){if(pr.callback===null)d(tt);else if(pr.startTime<=Wt)d(tt),pr.sortIndex=pr.expirationTime,o(et,pr);else break;pr=h(tt)}}function mt(Wt){if(gt=!1,dt(Wt),!lt)if(h(et)!==null)lt=!0,Ar(Qt);else{var pr=h(tt);pr!==null&&ar(mt,pr.startTime-Wt)}}function Qt(Wt,pr){lt=!1,gt&&(gt=!1,ct(kt),kt=-1),at=!0;var dr=At;try{for(dt(pr),nt=h(et);nt!==null&&(!(nt.expirationTime>pr)||Wt&&!Pt());){var yr=nt.callback;if(typeof yr=="function"){nt.callback=null,At=nt.priorityLevel;var Br=yr(nt.expirationTime<=pr);pr=s.unstable_now(),typeof Br=="function"?nt.callback=Br:nt===h(et)&&d(et),dt(pr)}else d(et);nt=h(et)}if(nt!==null)var Lr=!0;else{var Ur=h(tt);Ur!==null&&ar(mt,Ur.startTime-pr),Lr=!1}return Lr}finally{nt=null,At=dr,at=!1}}var xt=!1,bt=null,kt=-1,Lt=5,Ht=-1;function Pt(){return!(s.unstable_now()-Ht<Lt)}function jt(){if(bt!==null){var Wt=s.unstable_now();Ht=Wt;var pr=!0;try{pr=bt(!0,Wt)}finally{pr?Vt():(xt=!1,bt=null)}}else xt=!1}var Vt;if(typeof pt=="function")Vt=function(){pt(jt)};else if(typeof MessageChannel<"u"){var Xt=new MessageChannel,nr=Xt.port2;Xt.port1.onmessage=jt,Vt=function(){nr.postMessage(null)}}else Vt=function(){_t(jt,0)};function Ar(Wt){bt=Wt,xt||(xt=!0,Vt())}function ar(Wt,pr){kt=_t(function(){Wt(s.unstable_now())},pr)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(Wt){Wt.callback=null},s.unstable_continueExecution=function(){lt||at||(lt=!0,Ar(Qt))},s.unstable_forceFrameRate=function(Wt){0>Wt||125<Wt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Lt=0<Wt?Math.floor(1e3/Wt):5},s.unstable_getCurrentPriorityLevel=function(){return At},s.unstable_getFirstCallbackNode=function(){return h(et)},s.unstable_next=function(Wt){switch(At){case 1:case 2:case 3:var pr=3;break;default:pr=At}var dr=At;At=pr;try{return Wt()}finally{At=dr}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(Wt,pr){switch(Wt){case 1:case 2:case 3:case 4:case 5:break;default:Wt=3}var dr=At;At=Wt;try{return pr()}finally{At=dr}},s.unstable_scheduleCallback=function(Wt,pr,dr){var yr=s.unstable_now();switch(typeof dr=="object"&&dr!==null?(dr=dr.delay,dr=typeof dr=="number"&&0<dr?yr+dr:yr):dr=yr,Wt){case 1:var Br=-1;break;case 2:Br=250;break;case 5:Br=1073741823;break;case 4:Br=1e4;break;default:Br=5e3}return Br=dr+Br,Wt={id:rt++,callback:pr,priorityLevel:Wt,startTime:dr,expirationTime:Br,sortIndex:-1},dr>yr?(Wt.sortIndex=dr,o(tt,Wt),h(et)===null&&Wt===h(tt)&&(gt?(ct(kt),kt=-1):gt=!0,ar(mt,dr-yr))):(Wt.sortIndex=Br,o(et,Wt),lt||at||(lt=!0,Ar(Qt))),Wt},s.unstable_shouldYield=Pt,s.unstable_wrapCallback=function(Wt){var pr=At;return function(){var dr=At;At=pr;try{return Wt.apply(this,arguments)}finally{At=dr}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p$1(s){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+s,h=1;h<arguments.length;h++)o+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(s,o){ha(s,o),ha(s+"Capture",o)}function ha(s,o){for(ea[s]=o,s=0;s<o.length;s++)da.add(o[s])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(s){return ja.call(ma,s)?!0:ja.call(la,s)?!1:ka.test(s)?ma[s]=!0:(la[s]=!0,!1)}function pa(s,o,h,d){if(h!==null&&h.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return d?!1:h!==null?!h.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function qa(s,o,h,d){if(o===null||typeof o>"u"||pa(s,o,h,d))return!0;if(d)return!1;if(h!==null)switch(h.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function v(s,o,h,d,g,_,b){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=d,this.attributeNamespace=g,this.mustUseProperty=h,this.propertyName=s,this.type=o,this.sanitizeURL=_,this.removeEmptyString=b}var z$1={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){z$1[s]=new v(s,0,!1,s,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var o=s[0];z$1[o]=new v(o,1,!1,s[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(s){z$1[s]=new v(s,2,!1,s.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){z$1[s]=new v(s,2,!1,s,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){z$1[s]=new v(s,3,!1,s.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(s){z$1[s]=new v(s,3,!0,s,null,!1,!1)});["capture","download"].forEach(function(s){z$1[s]=new v(s,4,!1,s,null,!1,!1)});["cols","rows","size","span"].forEach(function(s){z$1[s]=new v(s,6,!1,s,null,!1,!1)});["rowSpan","start"].forEach(function(s){z$1[s]=new v(s,5,!1,s.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var o=s.replace(ra,sa);z$1[o]=new v(o,1,!1,s,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var o=s.replace(ra,sa);z$1[o]=new v(o,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(s){var o=s.replace(ra,sa);z$1[o]=new v(o,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(s){z$1[s]=new v(s,1,!1,s.toLowerCase(),null,!1,!1)});z$1.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(s){z$1[s]=new v(s,1,!1,s.toLowerCase(),null,!0,!0)});function ta(s,o,h,d){var g=z$1.hasOwnProperty(o)?z$1[o]:null;(g!==null?g.type!==0:d||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(qa(o,h,g,d)&&(h=null),d||g===null?oa(o)&&(h===null?s.removeAttribute(o):s.setAttribute(o,""+h)):g.mustUseProperty?s[g.propertyName]=h===null?g.type===3?!1:"":h:(o=g.attributeName,d=g.attributeNamespace,h===null?s.removeAttribute(o):(g=g.type,h=g===3||g===4&&h===!0?"":""+h,d?s.setAttributeNS(d,o,h):s.setAttribute(o,h))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(s){return s===null||typeof s!="object"?null:(s=Ja&&s[Ja]||s["@@iterator"],typeof s=="function"?s:null)}var A$1=Object.assign,La;function Ma(s){if(La===void 0)try{throw Error()}catch(h){var o=h.stack.trim().match(/\n( *(at )?)/);La=o&&o[1]||""}return`
`+La+s}var Na=!1;function Oa(s,o){if(!s||Na)return"";Na=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(tt){var d=tt}Reflect.construct(s,[],o)}else{try{o.call()}catch(tt){d=tt}s.call(o.prototype)}else{try{throw Error()}catch(tt){d=tt}s()}}catch(tt){if(tt&&d&&typeof tt.stack=="string"){for(var g=tt.stack.split(`
`),_=d.stack.split(`
`),b=g.length-1,$=_.length-1;1<=b&&0<=$&&g[b]!==_[$];)$--;for(;1<=b&&0<=$;b--,$--)if(g[b]!==_[$]){if(b!==1||$!==1)do if(b--,$--,0>$||g[b]!==_[$]){var et=`
`+g[b].replace(" at new "," at ");return s.displayName&&et.includes("<anonymous>")&&(et=et.replace("<anonymous>",s.displayName)),et}while(1<=b&&0<=$);break}}}finally{Na=!1,Error.prepareStackTrace=h}return(s=s?s.displayName||s.name:"")?Ma(s):""}function Pa(s){switch(s.tag){case 5:return Ma(s.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return s=Oa(s.type,!1),s;case 11:return s=Oa(s.type.render,!1),s;case 1:return s=Oa(s.type,!0),s;default:return""}}function Qa(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case Ca:return(s.displayName||"Context")+".Consumer";case Ba:return(s._context.displayName||"Context")+".Provider";case Da:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case Ga:return o=s.displayName||null,o!==null?o:Qa(s.type)||"Memo";case Ha:o=s._payload,s=s._init;try{return Qa(s(o))}catch{}}return null}function Ra(s){var o=s.type;switch(s.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=o.render,s=s.displayName||s.name||"",o.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(o);case 8:return o===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Sa(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Ta(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Ua(s){var o=Ta(s)?"checked":"value",h=Object.getOwnPropertyDescriptor(s.constructor.prototype,o),d=""+s[o];if(!s.hasOwnProperty(o)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var g=h.get,_=h.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return g.call(this)},set:function(b){d=""+b,_.call(this,b)}}),Object.defineProperty(s,o,{enumerable:h.enumerable}),{getValue:function(){return d},setValue:function(b){d=""+b},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function Va(s){s._valueTracker||(s._valueTracker=Ua(s))}function Wa(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var h=o.getValue(),d="";return s&&(d=Ta(s)?s.checked?"true":"false":s.value),s=d,s!==h?(o.setValue(s),!0):!1}function Xa(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function Ya(s,o){var h=o.checked;return A$1({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:h??s._wrapperState.initialChecked})}function Za(s,o){var h=o.defaultValue==null?"":o.defaultValue,d=o.checked!=null?o.checked:o.defaultChecked;h=Sa(o.value!=null?o.value:h),s._wrapperState={initialChecked:d,initialValue:h,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function ab(s,o){o=o.checked,o!=null&&ta(s,"checked",o,!1)}function bb(s,o){ab(s,o);var h=Sa(o.value),d=o.type;if(h!=null)d==="number"?(h===0&&s.value===""||s.value!=h)&&(s.value=""+h):s.value!==""+h&&(s.value=""+h);else if(d==="submit"||d==="reset"){s.removeAttribute("value");return}o.hasOwnProperty("value")?cb(s,o.type,h):o.hasOwnProperty("defaultValue")&&cb(s,o.type,Sa(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(s.defaultChecked=!!o.defaultChecked)}function db(s,o,h){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var d=o.type;if(!(d!=="submit"&&d!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+s._wrapperState.initialValue,h||o===s.value||(s.value=o),s.defaultValue=o}h=s.name,h!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,h!==""&&(s.name=h)}function cb(s,o,h){(o!=="number"||Xa(s.ownerDocument)!==s)&&(h==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+h&&(s.defaultValue=""+h))}var eb=Array.isArray;function fb(s,o,h,d){if(s=s.options,o){o={};for(var g=0;g<h.length;g++)o["$"+h[g]]=!0;for(h=0;h<s.length;h++)g=o.hasOwnProperty("$"+s[h].value),s[h].selected!==g&&(s[h].selected=g),g&&d&&(s[h].defaultSelected=!0)}else{for(h=""+Sa(h),o=null,g=0;g<s.length;g++){if(s[g].value===h){s[g].selected=!0,d&&(s[g].defaultSelected=!0);return}o!==null||s[g].disabled||(o=s[g])}o!==null&&(o.selected=!0)}}function gb(s,o){if(o.dangerouslySetInnerHTML!=null)throw Error(p$1(91));return A$1({},o,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function hb(s,o){var h=o.value;if(h==null){if(h=o.children,o=o.defaultValue,h!=null){if(o!=null)throw Error(p$1(92));if(eb(h)){if(1<h.length)throw Error(p$1(93));h=h[0]}o=h}o==null&&(o=""),h=o}s._wrapperState={initialValue:Sa(h)}}function ib(s,o){var h=Sa(o.value),d=Sa(o.defaultValue);h!=null&&(h=""+h,h!==s.value&&(s.value=h),o.defaultValue==null&&s.defaultValue!==h&&(s.defaultValue=h)),d!=null&&(s.defaultValue=""+d)}function jb(s){var o=s.textContent;o===s._wrapperState.initialValue&&o!==""&&o!==null&&(s.value=o)}function kb(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(s,o){return s==null||s==="http://www.w3.org/1999/xhtml"?kb(o):s==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var mb,nb=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,h,d,g){MSApp.execUnsafeLocalFunction(function(){return s(o,h,d,g)})}:s}(function(s,o){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=o;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=mb.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;o.firstChild;)s.appendChild(o.firstChild)}});function ob(s,o){if(o){var h=s.firstChild;if(h&&h===s.lastChild&&h.nodeType===3){h.nodeValue=o;return}}s.textContent=o}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(s){qb.forEach(function(o){o=o+s.charAt(0).toUpperCase()+s.substring(1),pb[o]=pb[s]})});function rb(s,o,h){return o==null||typeof o=="boolean"||o===""?"":h||typeof o!="number"||o===0||pb.hasOwnProperty(s)&&pb[s]?(""+o).trim():o+"px"}function sb(s,o){s=s.style;for(var h in o)if(o.hasOwnProperty(h)){var d=h.indexOf("--")===0,g=rb(h,o[h],d);h==="float"&&(h="cssFloat"),d?s.setProperty(h,g):s[h]=g}}var tb=A$1({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(s,o){if(o){if(tb[s]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(p$1(137,s));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(p$1(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(p$1(61))}if(o.style!=null&&typeof o.style!="object")throw Error(p$1(62))}}function vb(s,o){if(s.indexOf("-")===-1)return typeof o.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var yb=null,zb=null,Ab=null;function Bb(s){if(s=Cb(s)){if(typeof yb!="function")throw Error(p$1(280));var o=s.stateNode;o&&(o=Db(o),yb(s.stateNode,s.type,o))}}function Eb(s){zb?Ab?Ab.push(s):Ab=[s]:zb=s}function Fb(){if(zb){var s=zb,o=Ab;if(Ab=zb=null,Bb(s),o)for(s=0;s<o.length;s++)Bb(o[s])}}function Gb(s,o){return s(o)}function Hb(){}var Ib=!1;function Jb(s,o,h){if(Ib)return s(o,h);Ib=!0;try{return Gb(s,o,h)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(s,o){var h=s.stateNode;if(h===null)return null;var d=Db(h);if(d===null)return null;h=d[o];t:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(s=s.type,d=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!d;break t;default:s=!1}if(s)return null;if(h&&typeof h!="function")throw Error(p$1(231,o,typeof h));return h}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(s,o,h,d,g,_,b,$,et){var tt=Array.prototype.slice.call(arguments,3);try{o.apply(h,tt)}catch(rt){this.onError(rt)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(s){Ob=!0,Pb=s}};function Tb(s,o,h,d,g,_,b,$,et){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(s,o,h,d,g,_,b,$,et){if(Tb.apply(this,arguments),Ob){if(Ob){var tt=Pb;Ob=!1,Pb=null}else throw Error(p$1(198));Qb||(Qb=!0,Rb=tt)}}function Vb(s){var o=s,h=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,o.flags&4098&&(h=o.return),s=o.return;while(s)}return o.tag===3?h:null}function Wb(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function Xb(s){if(Vb(s)!==s)throw Error(p$1(188))}function Yb(s){var o=s.alternate;if(!o){if(o=Vb(s),o===null)throw Error(p$1(188));return o!==s?null:s}for(var h=s,d=o;;){var g=h.return;if(g===null)break;var _=g.alternate;if(_===null){if(d=g.return,d!==null){h=d;continue}break}if(g.child===_.child){for(_=g.child;_;){if(_===h)return Xb(g),s;if(_===d)return Xb(g),o;_=_.sibling}throw Error(p$1(188))}if(h.return!==d.return)h=g,d=_;else{for(var b=!1,$=g.child;$;){if($===h){b=!0,h=g,d=_;break}if($===d){b=!0,d=g,h=_;break}$=$.sibling}if(!b){for($=_.child;$;){if($===h){b=!0,h=_,d=g;break}if($===d){b=!0,d=_,h=g;break}$=$.sibling}if(!b)throw Error(p$1(189))}}if(h.alternate!==d)throw Error(p$1(190))}if(h.tag!==3)throw Error(p$1(188));return h.stateNode.current===h?s:o}function Zb(s){return s=Yb(s),s!==null?$b(s):null}function $b(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var o=$b(s);if(o!==null)return o;s=s.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(s){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,s,void 0,(s.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(s){return s>>>=0,s===0?32:31-(pc(s)/qc|0)|0}var rc=64,sc=4194304;function tc(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function uc(s,o){var h=s.pendingLanes;if(h===0)return 0;var d=0,g=s.suspendedLanes,_=s.pingedLanes,b=h&268435455;if(b!==0){var $=b&~g;$!==0?d=tc($):(_&=b,_!==0&&(d=tc(_)))}else b=h&~g,b!==0?d=tc(b):_!==0&&(d=tc(_));if(d===0)return 0;if(o!==0&&o!==d&&!(o&g)&&(g=d&-d,_=o&-o,g>=_||g===16&&(_&4194240)!==0))return o;if(d&4&&(d|=h&16),o=s.entangledLanes,o!==0)for(s=s.entanglements,o&=d;0<o;)h=31-oc(o),g=1<<h,d|=s[h],o&=~g;return d}function vc(s,o){switch(s){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(s,o){for(var h=s.suspendedLanes,d=s.pingedLanes,g=s.expirationTimes,_=s.pendingLanes;0<_;){var b=31-oc(_),$=1<<b,et=g[b];et===-1?(!($&h)||$&d)&&(g[b]=vc($,o)):et<=o&&(s.expiredLanes|=$),_&=~$}}function xc(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function yc(){var s=rc;return rc<<=1,!(rc&4194240)&&(rc=64),s}function zc(s){for(var o=[],h=0;31>h;h++)o.push(s);return o}function Ac(s,o,h){s.pendingLanes|=o,o!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,o=31-oc(o),s[o]=h}function Bc(s,o){var h=s.pendingLanes&~o;s.pendingLanes=o,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=o,s.mutableReadLanes&=o,s.entangledLanes&=o,o=s.entanglements;var d=s.eventTimes;for(s=s.expirationTimes;0<h;){var g=31-oc(h),_=1<<g;o[g]=0,d[g]=-1,s[g]=-1,h&=~_}}function Cc(s,o){var h=s.entangledLanes|=o;for(s=s.entanglements;h;){var d=31-oc(h),g=1<<d;g&o|s[d]&o&&(s[d]|=o),h&=~g}}var C=0;function Dc(s){return s&=-s,1<s?4<s?s&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(s,o){switch(s){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(o.pointerId)}}function Tc(s,o,h,d,g,_){return s===null||s.nativeEvent!==_?(s={blockedOn:o,domEventName:h,eventSystemFlags:d,nativeEvent:_,targetContainers:[g]},o!==null&&(o=Cb(o),o!==null&&Fc(o)),s):(s.eventSystemFlags|=d,o=s.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),s)}function Uc(s,o,h,d,g){switch(o){case"focusin":return Lc=Tc(Lc,s,o,h,d,g),!0;case"dragenter":return Mc=Tc(Mc,s,o,h,d,g),!0;case"mouseover":return Nc=Tc(Nc,s,o,h,d,g),!0;case"pointerover":var _=g.pointerId;return Oc.set(_,Tc(Oc.get(_)||null,s,o,h,d,g)),!0;case"gotpointercapture":return _=g.pointerId,Pc.set(_,Tc(Pc.get(_)||null,s,o,h,d,g)),!0}return!1}function Vc(s){var o=Wc(s.target);if(o!==null){var h=Vb(o);if(h!==null){if(o=h.tag,o===13){if(o=Wb(h),o!==null){s.blockedOn=o,Ic(s.priority,function(){Gc(h)});return}}else if(o===3&&h.stateNode.current.memoizedState.isDehydrated){s.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Xc(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var h=Yc(s.domEventName,s.eventSystemFlags,o[0],s.nativeEvent);if(h===null){h=s.nativeEvent;var d=new h.constructor(h.type,h);wb=d,h.target.dispatchEvent(d),wb=null}else return o=Cb(h),o!==null&&Fc(o),s.blockedOn=h,!1;o.shift()}return!0}function Zc(s,o,h){Xc(s)&&h.delete(o)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(s,o){s.blockedOn===o&&(s.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(s){function o(g){return ad(g,s)}if(0<Kc.length){ad(Kc[0],s);for(var h=1;h<Kc.length;h++){var d=Kc[h];d.blockedOn===s&&(d.blockedOn=null)}}for(Lc!==null&&ad(Lc,s),Mc!==null&&ad(Mc,s),Nc!==null&&ad(Nc,s),Oc.forEach(o),Pc.forEach(o),h=0;h<Qc.length;h++)d=Qc[h],d.blockedOn===s&&(d.blockedOn=null);for(;0<Qc.length&&(h=Qc[0],h.blockedOn===null);)Vc(h),h.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(s,o,h,d){var g=C,_=cd.transition;cd.transition=null;try{C=1,fd(s,o,h,d)}finally{C=g,cd.transition=_}}function gd(s,o,h,d){var g=C,_=cd.transition;cd.transition=null;try{C=4,fd(s,o,h,d)}finally{C=g,cd.transition=_}}function fd(s,o,h,d){if(dd){var g=Yc(s,o,h,d);if(g===null)hd(s,o,d,id,h),Sc(s,d);else if(Uc(g,s,o,h,d))d.stopPropagation();else if(Sc(s,d),o&4&&-1<Rc.indexOf(s)){for(;g!==null;){var _=Cb(g);if(_!==null&&Ec(_),_=Yc(s,o,h,d),_===null&&hd(s,o,d,id,h),_===g)break;g=_}g!==null&&d.stopPropagation()}else hd(s,o,d,null,h)}}var id=null;function Yc(s,o,h,d){if(id=null,s=xb(d),s=Wc(s),s!==null)if(o=Vb(s),o===null)s=null;else if(h=o.tag,h===13){if(s=Wb(o),s!==null)return s;s=null}else if(h===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null);return id=s,null}function jd(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var s,o=ld,h=o.length,d,g="value"in kd?kd.value:kd.textContent,_=g.length;for(s=0;s<h&&o[s]===g[s];s++);var b=h-s;for(d=1;d<=b&&o[h-d]===g[_-d];d++);return md=g.slice(s,1<d?1-d:void 0)}function od(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function pd(){return!0}function qd(){return!1}function rd(s){function o(h,d,g,_,b){this._reactName=h,this._targetInst=g,this.type=d,this.nativeEvent=_,this.target=b,this.currentTarget=null;for(var $ in s)s.hasOwnProperty($)&&(h=s[$],this[$]=h?h(_):_[$]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A$1(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),o}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A$1({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A$1({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==yd&&(yd&&s.type==="mousemove"?(wd=s.screenX-yd.screenX,xd=s.screenY-yd.screenY):xd=wd=0,yd=s),wd)},movementY:function(s){return"movementY"in s?s.movementY:xd}}),Bd=rd(Ad),Cd=A$1({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A$1({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A$1({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A$1({},sd,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A$1({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=Od[s])?!!o[s]:!1}function zd(){return Pd}var Qd=A$1({},ud,{key:function(s){if(s.key){var o=Md[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=od(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Nd[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(s){return s.type==="keypress"?od(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?od(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Rd=rd(Qd),Sd=A$1({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A$1({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A$1({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A$1({},Ad,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&"CompositionEvent"in window,be=null;ia&&"documentMode"in document&&(be=document.documentMode);var ce=ia&&"TextEvent"in window&&!be,de=ia&&(!ae||be&&8<be&&11>=be),ee=" ",fe=!1;function ge(s,o){switch(s){case"keyup":return $d.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var ie=!1;function je(s,o){switch(s){case"compositionend":return he(o);case"keypress":return o.which!==32?null:(fe=!0,ee);case"textInput":return s=o.data,s===ee&&fe?null:s;default:return null}}function ke(s,o){if(ie)return s==="compositionend"||!ae&&ge(s,o)?(s=nd(),md=ld=kd=null,ie=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return de&&o.locale!=="ko"?null:o.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!le[s.type]:o==="textarea"}function ne(s,o,h,d){Eb(d),o=oe(o,"onChange"),0<o.length&&(h=new td("onChange","change",null,h,d),s.push({event:h,listeners:o}))}var pe=null,qe=null;function re(s){se(s,0)}function te(s){var o=ue(s);if(Wa(o))return s}function ve(s,o){if(s==="change")return o}var we=!1;if(ia){var xe;if(ia){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be),qe=pe=null)}function Be(s){if(s.propertyName==="value"&&te(qe)){var o=[];ne(o,qe,s,xb(s)),Jb(re,o)}}function Ce(s,o,h){s==="focusin"?(Ae(),pe=o,qe=h,pe.attachEvent("onpropertychange",Be)):s==="focusout"&&Ae()}function De(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return te(qe)}function Ee(s,o){if(s==="click")return te(o)}function Fe(s,o){if(s==="input"||s==="change")return te(o)}function Ge(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var He=typeof Object.is=="function"?Object.is:Ge;function Ie(s,o){if(He(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var h=Object.keys(s),d=Object.keys(o);if(h.length!==d.length)return!1;for(d=0;d<h.length;d++){var g=h[d];if(!ja.call(o,g)||!He(s[g],o[g]))return!1}return!0}function Je(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Ke(s,o){var h=Je(s);s=0;for(var d;h;){if(h.nodeType===3){if(d=s+h.textContent.length,s<=o&&d>=o)return{node:h,offset:o-s};s=d}t:{for(;h;){if(h.nextSibling){h=h.nextSibling;break t}h=h.parentNode}h=void 0}h=Je(h)}}function Le(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?Le(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function Me(){for(var s=window,o=Xa();o instanceof s.HTMLIFrameElement;){try{var h=typeof o.contentWindow.location.href=="string"}catch{h=!1}if(h)s=o.contentWindow;else break;o=Xa(s.document)}return o}function Ne(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}function Oe(s){var o=Me(),h=s.focusedElem,d=s.selectionRange;if(o!==h&&h&&h.ownerDocument&&Le(h.ownerDocument.documentElement,h)){if(d!==null&&Ne(h)){if(o=d.start,s=d.end,s===void 0&&(s=o),"selectionStart"in h)h.selectionStart=o,h.selectionEnd=Math.min(s,h.value.length);else if(s=(o=h.ownerDocument||document)&&o.defaultView||window,s.getSelection){s=s.getSelection();var g=h.textContent.length,_=Math.min(d.start,g);d=d.end===void 0?_:Math.min(d.end,g),!s.extend&&_>d&&(g=d,d=_,_=g),g=Ke(h,_);var b=Ke(h,d);g&&b&&(s.rangeCount!==1||s.anchorNode!==g.node||s.anchorOffset!==g.offset||s.focusNode!==b.node||s.focusOffset!==b.offset)&&(o=o.createRange(),o.setStart(g.node,g.offset),s.removeAllRanges(),_>d?(s.addRange(o),s.extend(b.node,b.offset)):(o.setEnd(b.node,b.offset),s.addRange(o)))}}for(o=[],s=h;s=s.parentNode;)s.nodeType===1&&o.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<o.length;h++)s=o[h],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;function Ue(s,o,h){var d=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Te||Qe==null||Qe!==Xa(d)||(d=Qe,"selectionStart"in d&&Ne(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Se&&Ie(Se,d)||(Se=d,d=oe(Re,"onSelect"),0<d.length&&(o=new td("onSelect","select",null,o,h),s.push({event:o,listeners:d}),o.target=Qe)))}function Ve(s,o){var h={};return h[s.toLowerCase()]=o.toLowerCase(),h["Webkit"+s]="webkit"+o,h["Moz"+s]="moz"+o,h}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(s){if(Xe[s])return Xe[s];if(!We[s])return s;var o=We[s],h;for(h in o)if(o.hasOwnProperty(h)&&h in Ye)return Xe[s]=o[h];return s}var $e$1=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(s,o){df.set(s,o),fa(o,[s])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e$1,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(s,o,h){var d=s.type||"unknown-event";s.currentTarget=h,Ub(d,o,void 0,s),s.currentTarget=null}function se(s,o){o=(o&4)!==0;for(var h=0;h<s.length;h++){var d=s[h],g=d.event;d=d.listeners;t:{var _=void 0;if(o)for(var b=d.length-1;0<=b;b--){var $=d[b],et=$.instance,tt=$.currentTarget;if($=$.listener,et!==_&&g.isPropagationStopped())break t;nf(g,$,tt),_=et}else for(b=0;b<d.length;b++){if($=d[b],et=$.instance,tt=$.currentTarget,$=$.listener,et!==_&&g.isPropagationStopped())break t;nf(g,$,tt),_=et}}}if(Qb)throw s=Rb,Qb=!1,Rb=null,s}function D(s,o){var h=o[of];h===void 0&&(h=o[of]=new Set);var d=s+"__bubble";h.has(d)||(pf(o,s,2,!1),h.add(d))}function qf(s,o,h){var d=0;o&&(d|=4),pf(h,s,d,o)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(s){if(!s[rf]){s[rf]=!0,da.forEach(function(h){h!=="selectionchange"&&(mf.has(h)||qf(h,!1,s),qf(h,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[rf]||(o[rf]=!0,qf("selectionchange",!1,o))}}function pf(s,o,h,d){switch(jd(o)){case 1:var g=ed;break;case 4:g=gd;break;default:g=fd}h=g.bind(null,o,h,s),g=void 0,!Lb||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),d?g!==void 0?s.addEventListener(o,h,{capture:!0,passive:g}):s.addEventListener(o,h,!0):g!==void 0?s.addEventListener(o,h,{passive:g}):s.addEventListener(o,h,!1)}function hd(s,o,h,d,g){var _=d;if(!(o&1)&&!(o&2)&&d!==null)t:for(;;){if(d===null)return;var b=d.tag;if(b===3||b===4){var $=d.stateNode.containerInfo;if($===g||$.nodeType===8&&$.parentNode===g)break;if(b===4)for(b=d.return;b!==null;){var et=b.tag;if((et===3||et===4)&&(et=b.stateNode.containerInfo,et===g||et.nodeType===8&&et.parentNode===g))return;b=b.return}for(;$!==null;){if(b=Wc($),b===null)return;if(et=b.tag,et===5||et===6){d=_=b;continue t}$=$.parentNode}}d=d.return}Jb(function(){var tt=_,rt=xb(h),nt=[];t:{var At=df.get(s);if(At!==void 0){var at=td,lt=s;switch(s){case"keypress":if(od(h)===0)break t;case"keydown":case"keyup":at=Rd;break;case"focusin":lt="focus",at=Fd;break;case"focusout":lt="blur",at=Fd;break;case"beforeblur":case"afterblur":at=Fd;break;case"click":if(h.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":at=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":at=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":at=Vd;break;case $e$1:case af:case bf:at=Hd;break;case cf:at=Xd;break;case"scroll":at=vd;break;case"wheel":at=Zd;break;case"copy":case"cut":case"paste":at=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":at=Td}var gt=(o&4)!==0,_t=!gt&&s==="scroll",ct=gt?At!==null?At+"Capture":null:At;gt=[];for(var pt=tt,dt;pt!==null;){dt=pt;var mt=dt.stateNode;if(dt.tag===5&&mt!==null&&(dt=mt,ct!==null&&(mt=Kb(pt,ct),mt!=null&&gt.push(tf(pt,mt,dt)))),_t)break;pt=pt.return}0<gt.length&&(At=new at(At,lt,null,h,rt),nt.push({event:At,listeners:gt}))}}if(!(o&7)){t:{if(At=s==="mouseover"||s==="pointerover",at=s==="mouseout"||s==="pointerout",At&&h!==wb&&(lt=h.relatedTarget||h.fromElement)&&(Wc(lt)||lt[uf]))break t;if((at||At)&&(At=rt.window===rt?rt:(At=rt.ownerDocument)?At.defaultView||At.parentWindow:window,at?(lt=h.relatedTarget||h.toElement,at=tt,lt=lt?Wc(lt):null,lt!==null&&(_t=Vb(lt),lt!==_t||lt.tag!==5&&lt.tag!==6)&&(lt=null)):(at=null,lt=tt),at!==lt)){if(gt=Bd,mt="onMouseLeave",ct="onMouseEnter",pt="mouse",(s==="pointerout"||s==="pointerover")&&(gt=Td,mt="onPointerLeave",ct="onPointerEnter",pt="pointer"),_t=at==null?At:ue(at),dt=lt==null?At:ue(lt),At=new gt(mt,pt+"leave",at,h,rt),At.target=_t,At.relatedTarget=dt,mt=null,Wc(rt)===tt&&(gt=new gt(ct,pt+"enter",lt,h,rt),gt.target=dt,gt.relatedTarget=_t,mt=gt),_t=mt,at&&lt)e:{for(gt=at,ct=lt,pt=0,dt=gt;dt;dt=vf(dt))pt++;for(dt=0,mt=ct;mt;mt=vf(mt))dt++;for(;0<pt-dt;)gt=vf(gt),pt--;for(;0<dt-pt;)ct=vf(ct),dt--;for(;pt--;){if(gt===ct||ct!==null&&gt===ct.alternate)break e;gt=vf(gt),ct=vf(ct)}gt=null}else gt=null;at!==null&&wf(nt,At,at,gt,!1),lt!==null&&_t!==null&&wf(nt,_t,lt,gt,!0)}}t:{if(At=tt?ue(tt):window,at=At.nodeName&&At.nodeName.toLowerCase(),at==="select"||at==="input"&&At.type==="file")var Qt=ve;else if(me(At))if(we)Qt=Fe;else{Qt=De;var xt=Ce}else(at=At.nodeName)&&at.toLowerCase()==="input"&&(At.type==="checkbox"||At.type==="radio")&&(Qt=Ee);if(Qt&&(Qt=Qt(s,tt))){ne(nt,Qt,h,rt);break t}xt&&xt(s,At,tt),s==="focusout"&&(xt=At._wrapperState)&&xt.controlled&&At.type==="number"&&cb(At,"number",At.value)}switch(xt=tt?ue(tt):window,s){case"focusin":(me(xt)||xt.contentEditable==="true")&&(Qe=xt,Re=tt,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue(nt,h,rt);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(nt,h,rt)}var bt;if(ae)t:{switch(s){case"compositionstart":var kt="onCompositionStart";break t;case"compositionend":kt="onCompositionEnd";break t;case"compositionupdate":kt="onCompositionUpdate";break t}kt=void 0}else ie?ge(s,h)&&(kt="onCompositionEnd"):s==="keydown"&&h.keyCode===229&&(kt="onCompositionStart");kt&&(de&&h.locale!=="ko"&&(ie||kt!=="onCompositionStart"?kt==="onCompositionEnd"&&ie&&(bt=nd()):(kd=rt,ld="value"in kd?kd.value:kd.textContent,ie=!0)),xt=oe(tt,kt),0<xt.length&&(kt=new Ld(kt,s,null,h,rt),nt.push({event:kt,listeners:xt}),bt?kt.data=bt:(bt=he(h),bt!==null&&(kt.data=bt)))),(bt=ce?je(s,h):ke(s,h))&&(tt=oe(tt,"onBeforeInput"),0<tt.length&&(rt=new Ld("onBeforeInput","beforeinput",null,h,rt),nt.push({event:rt,listeners:tt}),rt.data=bt))}se(nt,o)})}function tf(s,o,h){return{instance:s,listener:o,currentTarget:h}}function oe(s,o){for(var h=o+"Capture",d=[];s!==null;){var g=s,_=g.stateNode;g.tag===5&&_!==null&&(g=_,_=Kb(s,h),_!=null&&d.unshift(tf(s,_,g)),_=Kb(s,o),_!=null&&d.push(tf(s,_,g))),s=s.return}return d}function vf(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function wf(s,o,h,d,g){for(var _=o._reactName,b=[];h!==null&&h!==d;){var $=h,et=$.alternate,tt=$.stateNode;if(et!==null&&et===d)break;$.tag===5&&tt!==null&&($=tt,g?(et=Kb(h,_),et!=null&&b.unshift(tf(h,et,$))):g||(et=Kb(h,_),et!=null&&b.push(tf(h,et,$)))),h=h.return}b.length!==0&&s.push({event:o,listeners:b})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(s){return(typeof s=="string"?s:""+s).replace(xf,`
`).replace(yf,"")}function Af(s,o,h){if(o=zf(o),zf(s)!==o&&h)throw Error(p$1(425))}function Bf(){}var Cf=null,Df=null;function Ef(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(s){return Hf.resolve(null).then(s).catch(If)}:Ff;function If(s){setTimeout(function(){throw s})}function Kf(s,o){var h=o,d=0;do{var g=h.nextSibling;if(s.removeChild(h),g&&g.nodeType===8)if(h=g.data,h==="/$"){if(d===0){s.removeChild(g),bd(o);return}d--}else h!=="$"&&h!=="$?"&&h!=="$!"||d++;h=g}while(h);bd(o)}function Lf(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return s}function Mf(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var h=s.data;if(h==="$"||h==="$!"||h==="$?"){if(o===0)return s;o--}else h==="/$"&&o++}s=s.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(s){var o=s[Of];if(o)return o;for(var h=s.parentNode;h;){if(o=h[uf]||h[Of]){if(h=o.alternate,o.child!==null||h!==null&&h.child!==null)for(s=Mf(s);s!==null;){if(h=s[Of])return h;s=Mf(s)}return o}s=h,h=s.parentNode}return null}function Cb(s){return s=s[Of]||s[uf],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function ue(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(p$1(33))}function Db(s){return s[Pf]||null}var Sf=[],Tf=-1;function Uf(s){return{current:s}}function E$1(s){0>Tf||(s.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G(s,o){Tf++,Sf[Tf]=s.current,s.current=o}var Vf={},H=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(s,o){var h=s.type.contextTypes;if(!h)return Vf;var d=s.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===o)return d.__reactInternalMemoizedMaskedChildContext;var g={},_;for(_ in h)g[_]=o[_];return d&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=o,s.__reactInternalMemoizedMaskedChildContext=g),g}function Zf(s){return s=s.childContextTypes,s!=null}function $f(){E$1(Wf),E$1(H)}function ag(s,o,h){if(H.current!==Vf)throw Error(p$1(168));G(H,o),G(Wf,h)}function bg(s,o,h){var d=s.stateNode;if(o=o.childContextTypes,typeof d.getChildContext!="function")return h;d=d.getChildContext();for(var g in d)if(!(g in o))throw Error(p$1(108,Ra(s)||"Unknown",g));return A$1({},h,d)}function cg(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||Vf,Xf=H.current,G(H,s),G(Wf,Wf.current),!0}function dg(s,o,h){var d=s.stateNode;if(!d)throw Error(p$1(169));h?(s=bg(s,o,Xf),d.__reactInternalMemoizedMergedChildContext=s,E$1(Wf),E$1(H),G(H,s)):E$1(Wf),G(Wf,h)}var eg=null,fg=!1,gg=!1;function hg(s){eg===null?eg=[s]:eg.push(s)}function ig(s){fg=!0,hg(s)}function jg(){if(!gg&&eg!==null){gg=!0;var s=0,o=C;try{var h=eg;for(C=1;s<h.length;s++){var d=h[s];do d=d(!0);while(d!==null)}eg=null,fg=!1}catch(g){throw eg!==null&&(eg=eg.slice(s+1)),ac(fc,jg),g}finally{C=o,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(s,o){kg[lg++]=ng,kg[lg++]=mg,mg=s,ng=o}function ug(s,o,h){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=s;var d=rg;s=sg;var g=32-oc(d)-1;d&=~(1<<g),h+=1;var _=32-oc(o)+g;if(30<_){var b=g-g%5;_=(d&(1<<b)-1).toString(32),d>>=b,g-=b,rg=1<<32-oc(o)+g|h<<g|d,sg=_+s}else rg=1<<_|h<<g|d,sg=s}function vg(s){s.return!==null&&(tg(s,1),ug(s,1,0))}function wg(s){for(;s===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;s===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I=!1,zg=null;function Ag(s,o){var h=Bg(5,null,null,0);h.elementType="DELETED",h.stateNode=o,h.return=s,o=s.deletions,o===null?(s.deletions=[h],s.flags|=16):o.push(h)}function Cg(s,o){switch(s.tag){case 5:var h=s.type;return o=o.nodeType!==1||h.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(s.stateNode=o,xg=s,yg=Lf(o.firstChild),!0):!1;case 6:return o=s.pendingProps===""||o.nodeType!==3?null:o,o!==null?(s.stateNode=o,xg=s,yg=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(h=qg!==null?{id:rg,overflow:sg}:null,s.memoizedState={dehydrated:o,treeContext:h,retryLane:1073741824},h=Bg(18,null,null,0),h.stateNode=o,h.return=s,s.child=h,xg=s,yg=null,!0):!1;default:return!1}}function Dg(s){return(s.mode&1)!==0&&(s.flags&128)===0}function Eg(s){if(I){var o=yg;if(o){var h=o;if(!Cg(s,o)){if(Dg(s))throw Error(p$1(418));o=Lf(h.nextSibling);var d=xg;o&&Cg(s,o)?Ag(d,h):(s.flags=s.flags&-4097|2,I=!1,xg=s)}}else{if(Dg(s))throw Error(p$1(418));s.flags=s.flags&-4097|2,I=!1,xg=s}}}function Fg(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;xg=s}function Gg(s){if(s!==xg)return!1;if(!I)return Fg(s),I=!0,!1;var o;if((o=s.tag!==3)&&!(o=s.tag!==5)&&(o=s.type,o=o!=="head"&&o!=="body"&&!Ef(s.type,s.memoizedProps)),o&&(o=yg)){if(Dg(s))throw Hg(),Error(p$1(418));for(;o;)Ag(s,o),o=Lf(o.nextSibling)}if(Fg(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(p$1(317));t:{for(s=s.nextSibling,o=0;s;){if(s.nodeType===8){var h=s.data;if(h==="/$"){if(o===0){yg=Lf(s.nextSibling);break t}o--}else h!=="$"&&h!=="$!"&&h!=="$?"||o++}s=s.nextSibling}yg=null}}else yg=xg?Lf(s.stateNode.nextSibling):null;return!0}function Hg(){for(var s=yg;s;)s=Lf(s.nextSibling)}function Ig(){yg=xg=null,I=!1}function Jg(s){zg===null?zg=[s]:zg.push(s)}var Kg=ua.ReactCurrentBatchConfig;function Lg(s,o,h){if(s=h.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(p$1(309));var d=h.stateNode}if(!d)throw Error(p$1(147,s));var g=d,_=""+s;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===_?o.ref:(o=function(b){var $=g.refs;b===null?delete $[_]:$[_]=b},o._stringRef=_,o)}if(typeof s!="string")throw Error(p$1(284));if(!h._owner)throw Error(p$1(290,s))}return s}function Mg(s,o){throw s=Object.prototype.toString.call(o),Error(p$1(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s))}function Ng(s){var o=s._init;return o(s._payload)}function Og(s){function o(ct,pt){if(s){var dt=ct.deletions;dt===null?(ct.deletions=[pt],ct.flags|=16):dt.push(pt)}}function h(ct,pt){if(!s)return null;for(;pt!==null;)o(ct,pt),pt=pt.sibling;return null}function d(ct,pt){for(ct=new Map;pt!==null;)pt.key!==null?ct.set(pt.key,pt):ct.set(pt.index,pt),pt=pt.sibling;return ct}function g(ct,pt){return ct=Pg(ct,pt),ct.index=0,ct.sibling=null,ct}function _(ct,pt,dt){return ct.index=dt,s?(dt=ct.alternate,dt!==null?(dt=dt.index,dt<pt?(ct.flags|=2,pt):dt):(ct.flags|=2,pt)):(ct.flags|=1048576,pt)}function b(ct){return s&&ct.alternate===null&&(ct.flags|=2),ct}function $(ct,pt,dt,mt){return pt===null||pt.tag!==6?(pt=Qg(dt,ct.mode,mt),pt.return=ct,pt):(pt=g(pt,dt),pt.return=ct,pt)}function et(ct,pt,dt,mt){var Qt=dt.type;return Qt===ya?rt(ct,pt,dt.props.children,mt,dt.key):pt!==null&&(pt.elementType===Qt||typeof Qt=="object"&&Qt!==null&&Qt.$$typeof===Ha&&Ng(Qt)===pt.type)?(mt=g(pt,dt.props),mt.ref=Lg(ct,pt,dt),mt.return=ct,mt):(mt=Rg(dt.type,dt.key,dt.props,null,ct.mode,mt),mt.ref=Lg(ct,pt,dt),mt.return=ct,mt)}function tt(ct,pt,dt,mt){return pt===null||pt.tag!==4||pt.stateNode.containerInfo!==dt.containerInfo||pt.stateNode.implementation!==dt.implementation?(pt=Sg(dt,ct.mode,mt),pt.return=ct,pt):(pt=g(pt,dt.children||[]),pt.return=ct,pt)}function rt(ct,pt,dt,mt,Qt){return pt===null||pt.tag!==7?(pt=Tg(dt,ct.mode,mt,Qt),pt.return=ct,pt):(pt=g(pt,dt),pt.return=ct,pt)}function nt(ct,pt,dt){if(typeof pt=="string"&&pt!==""||typeof pt=="number")return pt=Qg(""+pt,ct.mode,dt),pt.return=ct,pt;if(typeof pt=="object"&&pt!==null){switch(pt.$$typeof){case va:return dt=Rg(pt.type,pt.key,pt.props,null,ct.mode,dt),dt.ref=Lg(ct,null,pt),dt.return=ct,dt;case wa:return pt=Sg(pt,ct.mode,dt),pt.return=ct,pt;case Ha:var mt=pt._init;return nt(ct,mt(pt._payload),dt)}if(eb(pt)||Ka(pt))return pt=Tg(pt,ct.mode,dt,null),pt.return=ct,pt;Mg(ct,pt)}return null}function At(ct,pt,dt,mt){var Qt=pt!==null?pt.key:null;if(typeof dt=="string"&&dt!==""||typeof dt=="number")return Qt!==null?null:$(ct,pt,""+dt,mt);if(typeof dt=="object"&&dt!==null){switch(dt.$$typeof){case va:return dt.key===Qt?et(ct,pt,dt,mt):null;case wa:return dt.key===Qt?tt(ct,pt,dt,mt):null;case Ha:return Qt=dt._init,At(ct,pt,Qt(dt._payload),mt)}if(eb(dt)||Ka(dt))return Qt!==null?null:rt(ct,pt,dt,mt,null);Mg(ct,dt)}return null}function at(ct,pt,dt,mt,Qt){if(typeof mt=="string"&&mt!==""||typeof mt=="number")return ct=ct.get(dt)||null,$(pt,ct,""+mt,Qt);if(typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case va:return ct=ct.get(mt.key===null?dt:mt.key)||null,et(pt,ct,mt,Qt);case wa:return ct=ct.get(mt.key===null?dt:mt.key)||null,tt(pt,ct,mt,Qt);case Ha:var xt=mt._init;return at(ct,pt,dt,xt(mt._payload),Qt)}if(eb(mt)||Ka(mt))return ct=ct.get(dt)||null,rt(pt,ct,mt,Qt,null);Mg(pt,mt)}return null}function lt(ct,pt,dt,mt){for(var Qt=null,xt=null,bt=pt,kt=pt=0,Lt=null;bt!==null&&kt<dt.length;kt++){bt.index>kt?(Lt=bt,bt=null):Lt=bt.sibling;var Ht=At(ct,bt,dt[kt],mt);if(Ht===null){bt===null&&(bt=Lt);break}s&&bt&&Ht.alternate===null&&o(ct,bt),pt=_(Ht,pt,kt),xt===null?Qt=Ht:xt.sibling=Ht,xt=Ht,bt=Lt}if(kt===dt.length)return h(ct,bt),I&&tg(ct,kt),Qt;if(bt===null){for(;kt<dt.length;kt++)bt=nt(ct,dt[kt],mt),bt!==null&&(pt=_(bt,pt,kt),xt===null?Qt=bt:xt.sibling=bt,xt=bt);return I&&tg(ct,kt),Qt}for(bt=d(ct,bt);kt<dt.length;kt++)Lt=at(bt,ct,kt,dt[kt],mt),Lt!==null&&(s&&Lt.alternate!==null&&bt.delete(Lt.key===null?kt:Lt.key),pt=_(Lt,pt,kt),xt===null?Qt=Lt:xt.sibling=Lt,xt=Lt);return s&&bt.forEach(function(Pt){return o(ct,Pt)}),I&&tg(ct,kt),Qt}function gt(ct,pt,dt,mt){var Qt=Ka(dt);if(typeof Qt!="function")throw Error(p$1(150));if(dt=Qt.call(dt),dt==null)throw Error(p$1(151));for(var xt=Qt=null,bt=pt,kt=pt=0,Lt=null,Ht=dt.next();bt!==null&&!Ht.done;kt++,Ht=dt.next()){bt.index>kt?(Lt=bt,bt=null):Lt=bt.sibling;var Pt=At(ct,bt,Ht.value,mt);if(Pt===null){bt===null&&(bt=Lt);break}s&&bt&&Pt.alternate===null&&o(ct,bt),pt=_(Pt,pt,kt),xt===null?Qt=Pt:xt.sibling=Pt,xt=Pt,bt=Lt}if(Ht.done)return h(ct,bt),I&&tg(ct,kt),Qt;if(bt===null){for(;!Ht.done;kt++,Ht=dt.next())Ht=nt(ct,Ht.value,mt),Ht!==null&&(pt=_(Ht,pt,kt),xt===null?Qt=Ht:xt.sibling=Ht,xt=Ht);return I&&tg(ct,kt),Qt}for(bt=d(ct,bt);!Ht.done;kt++,Ht=dt.next())Ht=at(bt,ct,kt,Ht.value,mt),Ht!==null&&(s&&Ht.alternate!==null&&bt.delete(Ht.key===null?kt:Ht.key),pt=_(Ht,pt,kt),xt===null?Qt=Ht:xt.sibling=Ht,xt=Ht);return s&&bt.forEach(function(jt){return o(ct,jt)}),I&&tg(ct,kt),Qt}function _t(ct,pt,dt,mt){if(typeof dt=="object"&&dt!==null&&dt.type===ya&&dt.key===null&&(dt=dt.props.children),typeof dt=="object"&&dt!==null){switch(dt.$$typeof){case va:t:{for(var Qt=dt.key,xt=pt;xt!==null;){if(xt.key===Qt){if(Qt=dt.type,Qt===ya){if(xt.tag===7){h(ct,xt.sibling),pt=g(xt,dt.props.children),pt.return=ct,ct=pt;break t}}else if(xt.elementType===Qt||typeof Qt=="object"&&Qt!==null&&Qt.$$typeof===Ha&&Ng(Qt)===xt.type){h(ct,xt.sibling),pt=g(xt,dt.props),pt.ref=Lg(ct,xt,dt),pt.return=ct,ct=pt;break t}h(ct,xt);break}else o(ct,xt);xt=xt.sibling}dt.type===ya?(pt=Tg(dt.props.children,ct.mode,mt,dt.key),pt.return=ct,ct=pt):(mt=Rg(dt.type,dt.key,dt.props,null,ct.mode,mt),mt.ref=Lg(ct,pt,dt),mt.return=ct,ct=mt)}return b(ct);case wa:t:{for(xt=dt.key;pt!==null;){if(pt.key===xt)if(pt.tag===4&&pt.stateNode.containerInfo===dt.containerInfo&&pt.stateNode.implementation===dt.implementation){h(ct,pt.sibling),pt=g(pt,dt.children||[]),pt.return=ct,ct=pt;break t}else{h(ct,pt);break}else o(ct,pt);pt=pt.sibling}pt=Sg(dt,ct.mode,mt),pt.return=ct,ct=pt}return b(ct);case Ha:return xt=dt._init,_t(ct,pt,xt(dt._payload),mt)}if(eb(dt))return lt(ct,pt,dt,mt);if(Ka(dt))return gt(ct,pt,dt,mt);Mg(ct,dt)}return typeof dt=="string"&&dt!==""||typeof dt=="number"?(dt=""+dt,pt!==null&&pt.tag===6?(h(ct,pt.sibling),pt=g(pt,dt),pt.return=ct,ct=pt):(h(ct,pt),pt=Qg(dt,ct.mode,mt),pt.return=ct,ct=pt),b(ct)):h(ct,pt)}return _t}var Ug=Og(!0),Vg=Og(!1),Wg=Uf(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah(s){var o=Wg.current;E$1(Wg),s._currentValue=o}function bh(s,o,h){for(;s!==null;){var d=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,d!==null&&(d.childLanes|=o)):d!==null&&(d.childLanes&o)!==o&&(d.childLanes|=o),s===h)break;s=s.return}}function ch(s,o){Xg=s,Zg=Yg=null,s=s.dependencies,s!==null&&s.firstContext!==null&&(s.lanes&o&&(dh=!0),s.firstContext=null)}function eh(s){var o=s._currentValue;if(Zg!==s)if(s={context:s,memoizedValue:o,next:null},Yg===null){if(Xg===null)throw Error(p$1(308));Yg=s,Xg.dependencies={lanes:0,firstContext:s}}else Yg=Yg.next=s;return o}var fh=null;function gh(s){fh===null?fh=[s]:fh.push(s)}function hh(s,o,h,d){var g=o.interleaved;return g===null?(h.next=h,gh(o)):(h.next=g.next,g.next=h),o.interleaved=h,ih(s,d)}function ih(s,o){s.lanes|=o;var h=s.alternate;for(h!==null&&(h.lanes|=o),h=s,s=s.return;s!==null;)s.childLanes|=o,h=s.alternate,h!==null&&(h.childLanes|=o),h=s,s=s.return;return h.tag===3?h.stateNode:null}var jh=!1;function kh(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function mh(s,o){return{eventTime:s,lane:o,tag:0,payload:null,callback:null,next:null}}function nh(s,o,h){var d=s.updateQueue;if(d===null)return null;if(d=d.shared,K&2){var g=d.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),d.pending=o,ih(s,h)}return g=d.interleaved,g===null?(o.next=o,gh(d)):(o.next=g.next,g.next=o),d.interleaved=o,ih(s,h)}function oh(s,o,h){if(o=o.updateQueue,o!==null&&(o=o.shared,(h&4194240)!==0)){var d=o.lanes;d&=s.pendingLanes,h|=d,o.lanes=h,Cc(s,h)}}function ph(s,o){var h=s.updateQueue,d=s.alternate;if(d!==null&&(d=d.updateQueue,h===d)){var g=null,_=null;if(h=h.firstBaseUpdate,h!==null){do{var b={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};_===null?g=_=b:_=_.next=b,h=h.next}while(h!==null);_===null?g=_=o:_=_.next=o}else g=_=o;h={baseState:d.baseState,firstBaseUpdate:g,lastBaseUpdate:_,shared:d.shared,effects:d.effects},s.updateQueue=h;return}s=h.lastBaseUpdate,s===null?h.firstBaseUpdate=o:s.next=o,h.lastBaseUpdate=o}function qh(s,o,h,d){var g=s.updateQueue;jh=!1;var _=g.firstBaseUpdate,b=g.lastBaseUpdate,$=g.shared.pending;if($!==null){g.shared.pending=null;var et=$,tt=et.next;et.next=null,b===null?_=tt:b.next=tt,b=et;var rt=s.alternate;rt!==null&&(rt=rt.updateQueue,$=rt.lastBaseUpdate,$!==b&&($===null?rt.firstBaseUpdate=tt:$.next=tt,rt.lastBaseUpdate=et))}if(_!==null){var nt=g.baseState;b=0,rt=tt=et=null,$=_;do{var At=$.lane,at=$.eventTime;if((d&At)===At){rt!==null&&(rt=rt.next={eventTime:at,lane:0,tag:$.tag,payload:$.payload,callback:$.callback,next:null});t:{var lt=s,gt=$;switch(At=o,at=h,gt.tag){case 1:if(lt=gt.payload,typeof lt=="function"){nt=lt.call(at,nt,At);break t}nt=lt;break t;case 3:lt.flags=lt.flags&-65537|128;case 0:if(lt=gt.payload,At=typeof lt=="function"?lt.call(at,nt,At):lt,At==null)break t;nt=A$1({},nt,At);break t;case 2:jh=!0}}$.callback!==null&&$.lane!==0&&(s.flags|=64,At=g.effects,At===null?g.effects=[$]:At.push($))}else at={eventTime:at,lane:At,tag:$.tag,payload:$.payload,callback:$.callback,next:null},rt===null?(tt=rt=at,et=nt):rt=rt.next=at,b|=At;if($=$.next,$===null){if($=g.shared.pending,$===null)break;At=$,$=At.next,At.next=null,g.lastBaseUpdate=At,g.shared.pending=null}}while(!0);if(rt===null&&(et=nt),g.baseState=et,g.firstBaseUpdate=tt,g.lastBaseUpdate=rt,o=g.shared.interleaved,o!==null){g=o;do b|=g.lane,g=g.next;while(g!==o)}else _===null&&(g.shared.lanes=0);rh|=b,s.lanes=b,s.memoizedState=nt}}function sh(s,o,h){if(s=o.effects,o.effects=null,s!==null)for(o=0;o<s.length;o++){var d=s[o],g=d.callback;if(g!==null){if(d.callback=null,d=h,typeof g!="function")throw Error(p$1(191,g));g.call(d)}}}var th={},uh=Uf(th),vh=Uf(th),wh=Uf(th);function xh(s){if(s===th)throw Error(p$1(174));return s}function yh(s,o){switch(G(wh,o),G(vh,s),G(uh,th),s=o.nodeType,s){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:lb(null,"");break;default:s=s===8?o.parentNode:o,o=s.namespaceURI||null,s=s.tagName,o=lb(o,s)}E$1(uh),G(uh,o)}function zh(){E$1(uh),E$1(vh),E$1(wh)}function Ah(s){xh(wh.current);var o=xh(uh.current),h=lb(o,s.type);o!==h&&(G(vh,s),G(uh,h))}function Bh(s){vh.current===s&&(E$1(uh),E$1(vh))}var L$3=Uf(0);function Ch(s){for(var o=s;o!==null;){if(o.tag===13){var h=o.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||h.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if(o.flags&128)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Dh=[];function Eh(){for(var s=0;s<Dh.length;s++)Dh[s]._workInProgressVersionPrimary=null;Dh.length=0}var Fh=ua.ReactCurrentDispatcher,Gh=ua.ReactCurrentBatchConfig,Hh=0,M=null,N=null,O=null,Ih=!1,Jh=!1,Kh=0,Lh=0;function P(){throw Error(p$1(321))}function Mh(s,o){if(o===null)return!1;for(var h=0;h<o.length&&h<s.length;h++)if(!He(s[h],o[h]))return!1;return!0}function Nh(s,o,h,d,g,_){if(Hh=_,M=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Fh.current=s===null||s.memoizedState===null?Oh:Ph,s=h(d,g),Jh){_=0;do{if(Jh=!1,Kh=0,25<=_)throw Error(p$1(301));_+=1,O=N=null,o.updateQueue=null,Fh.current=Qh,s=h(d,g)}while(Jh)}if(Fh.current=Rh,o=N!==null&&N.next!==null,Hh=0,O=N=M=null,Ih=!1,o)throw Error(p$1(300));return s}function Sh(){var s=Kh!==0;return Kh=0,s}function Th(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return O===null?M.memoizedState=O=s:O=O.next=s,O}function Uh(){if(N===null){var s=M.alternate;s=s!==null?s.memoizedState:null}else s=N.next;var o=O===null?M.memoizedState:O.next;if(o!==null)O=o,N=s;else{if(s===null)throw Error(p$1(310));N=s,s={memoizedState:N.memoizedState,baseState:N.baseState,baseQueue:N.baseQueue,queue:N.queue,next:null},O===null?M.memoizedState=O=s:O=O.next=s}return O}function Vh(s,o){return typeof o=="function"?o(s):o}function Wh(s){var o=Uh(),h=o.queue;if(h===null)throw Error(p$1(311));h.lastRenderedReducer=s;var d=N,g=d.baseQueue,_=h.pending;if(_!==null){if(g!==null){var b=g.next;g.next=_.next,_.next=b}d.baseQueue=g=_,h.pending=null}if(g!==null){_=g.next,d=d.baseState;var $=b=null,et=null,tt=_;do{var rt=tt.lane;if((Hh&rt)===rt)et!==null&&(et=et.next={lane:0,action:tt.action,hasEagerState:tt.hasEagerState,eagerState:tt.eagerState,next:null}),d=tt.hasEagerState?tt.eagerState:s(d,tt.action);else{var nt={lane:rt,action:tt.action,hasEagerState:tt.hasEagerState,eagerState:tt.eagerState,next:null};et===null?($=et=nt,b=d):et=et.next=nt,M.lanes|=rt,rh|=rt}tt=tt.next}while(tt!==null&&tt!==_);et===null?b=d:et.next=$,He(d,o.memoizedState)||(dh=!0),o.memoizedState=d,o.baseState=b,o.baseQueue=et,h.lastRenderedState=d}if(s=h.interleaved,s!==null){g=s;do _=g.lane,M.lanes|=_,rh|=_,g=g.next;while(g!==s)}else g===null&&(h.lanes=0);return[o.memoizedState,h.dispatch]}function Xh(s){var o=Uh(),h=o.queue;if(h===null)throw Error(p$1(311));h.lastRenderedReducer=s;var d=h.dispatch,g=h.pending,_=o.memoizedState;if(g!==null){h.pending=null;var b=g=g.next;do _=s(_,b.action),b=b.next;while(b!==g);He(_,o.memoizedState)||(dh=!0),o.memoizedState=_,o.baseQueue===null&&(o.baseState=_),h.lastRenderedState=_}return[_,d]}function Yh(){}function Zh(s,o){var h=M,d=Uh(),g=o(),_=!He(d.memoizedState,g);if(_&&(d.memoizedState=g,dh=!0),d=d.queue,$h(ai.bind(null,h,d,s),[s]),d.getSnapshot!==o||_||O!==null&&O.memoizedState.tag&1){if(h.flags|=2048,bi(9,ci.bind(null,h,d,g,o),void 0,null),Q===null)throw Error(p$1(349));Hh&30||di(h,o,g)}return g}function di(s,o,h){s.flags|=16384,s={getSnapshot:o,value:h},o=M.updateQueue,o===null?(o={lastEffect:null,stores:null},M.updateQueue=o,o.stores=[s]):(h=o.stores,h===null?o.stores=[s]:h.push(s))}function ci(s,o,h,d){o.value=h,o.getSnapshot=d,ei(o)&&fi(s)}function ai(s,o,h){return h(function(){ei(o)&&fi(s)})}function ei(s){var o=s.getSnapshot;s=s.value;try{var h=o();return!He(s,h)}catch{return!0}}function fi(s){var o=ih(s,1);o!==null&&gi(o,s,1,-1)}function hi(s){var o=Th();return typeof s=="function"&&(s=s()),o.memoizedState=o.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:s},o.queue=s,s=s.dispatch=ii.bind(null,M,s),[o.memoizedState,s]}function bi(s,o,h,d){return s={tag:s,create:o,destroy:h,deps:d,next:null},o=M.updateQueue,o===null?(o={lastEffect:null,stores:null},M.updateQueue=o,o.lastEffect=s.next=s):(h=o.lastEffect,h===null?o.lastEffect=s.next=s:(d=h.next,h.next=s,s.next=d,o.lastEffect=s)),s}function ji(){return Uh().memoizedState}function ki(s,o,h,d){var g=Th();M.flags|=s,g.memoizedState=bi(1|o,h,void 0,d===void 0?null:d)}function li$1(s,o,h,d){var g=Uh();d=d===void 0?null:d;var _=void 0;if(N!==null){var b=N.memoizedState;if(_=b.destroy,d!==null&&Mh(d,b.deps)){g.memoizedState=bi(o,h,_,d);return}}M.flags|=s,g.memoizedState=bi(1|o,h,_,d)}function mi(s,o){return ki(8390656,8,s,o)}function $h(s,o){return li$1(2048,8,s,o)}function ni(s,o){return li$1(4,2,s,o)}function oi(s,o){return li$1(4,4,s,o)}function pi(s,o){if(typeof o=="function")return s=s(),o(s),function(){o(null)};if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function qi(s,o,h){return h=h!=null?h.concat([s]):null,li$1(4,4,pi.bind(null,o,s),h)}function ri(){}function si(s,o){var h=Uh();o=o===void 0?null:o;var d=h.memoizedState;return d!==null&&o!==null&&Mh(o,d[1])?d[0]:(h.memoizedState=[s,o],s)}function ti(s,o){var h=Uh();o=o===void 0?null:o;var d=h.memoizedState;return d!==null&&o!==null&&Mh(o,d[1])?d[0]:(s=s(),h.memoizedState=[s,o],s)}function ui(s,o,h){return Hh&21?(He(h,o)||(h=yc(),M.lanes|=h,rh|=h,s.baseState=!0),o):(s.baseState&&(s.baseState=!1,dh=!0),s.memoizedState=h)}function vi(s,o){var h=C;C=h!==0&&4>h?h:4,s(!0);var d=Gh.transition;Gh.transition={};try{s(!1),o()}finally{C=h,Gh.transition=d}}function wi(){return Uh().memoizedState}function xi(s,o,h){var d=yi(s);if(h={lane:d,action:h,hasEagerState:!1,eagerState:null,next:null},zi(s))Ai(o,h);else if(h=hh(s,o,h,d),h!==null){var g=R$1();gi(h,s,d,g),Bi(h,o,d)}}function ii(s,o,h){var d=yi(s),g={lane:d,action:h,hasEagerState:!1,eagerState:null,next:null};if(zi(s))Ai(o,g);else{var _=s.alternate;if(s.lanes===0&&(_===null||_.lanes===0)&&(_=o.lastRenderedReducer,_!==null))try{var b=o.lastRenderedState,$=_(b,h);if(g.hasEagerState=!0,g.eagerState=$,He($,b)){var et=o.interleaved;et===null?(g.next=g,gh(o)):(g.next=et.next,et.next=g),o.interleaved=g;return}}catch{}finally{}h=hh(s,o,g,d),h!==null&&(g=R$1(),gi(h,s,d,g),Bi(h,o,d))}}function zi(s){var o=s.alternate;return s===M||o!==null&&o===M}function Ai(s,o){Jh=Ih=!0;var h=s.pending;h===null?o.next=o:(o.next=h.next,h.next=o),s.pending=o}function Bi(s,o,h){if(h&4194240){var d=o.lanes;d&=s.pendingLanes,h|=d,o.lanes=h,Cc(s,h)}}var Rh={readContext:eh,useCallback:P,useContext:P,useEffect:P,useImperativeHandle:P,useInsertionEffect:P,useLayoutEffect:P,useMemo:P,useReducer:P,useRef:P,useState:P,useDebugValue:P,useDeferredValue:P,useTransition:P,useMutableSource:P,useSyncExternalStore:P,useId:P,unstable_isNewReconciler:!1},Oh={readContext:eh,useCallback:function(s,o){return Th().memoizedState=[s,o===void 0?null:o],s},useContext:eh,useEffect:mi,useImperativeHandle:function(s,o,h){return h=h!=null?h.concat([s]):null,ki(4194308,4,pi.bind(null,o,s),h)},useLayoutEffect:function(s,o){return ki(4194308,4,s,o)},useInsertionEffect:function(s,o){return ki(4,2,s,o)},useMemo:function(s,o){var h=Th();return o=o===void 0?null:o,s=s(),h.memoizedState=[s,o],s},useReducer:function(s,o,h){var d=Th();return o=h!==void 0?h(o):o,d.memoizedState=d.baseState=o,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:o},d.queue=s,s=s.dispatch=xi.bind(null,M,s),[d.memoizedState,s]},useRef:function(s){var o=Th();return s={current:s},o.memoizedState=s},useState:hi,useDebugValue:ri,useDeferredValue:function(s){return Th().memoizedState=s},useTransition:function(){var s=hi(!1),o=s[0];return s=vi.bind(null,s[1]),Th().memoizedState=s,[o,s]},useMutableSource:function(){},useSyncExternalStore:function(s,o,h){var d=M,g=Th();if(I){if(h===void 0)throw Error(p$1(407));h=h()}else{if(h=o(),Q===null)throw Error(p$1(349));Hh&30||di(d,o,h)}g.memoizedState=h;var _={value:h,getSnapshot:o};return g.queue=_,mi(ai.bind(null,d,_,s),[s]),d.flags|=2048,bi(9,ci.bind(null,d,_,h,o),void 0,null),h},useId:function(){var s=Th(),o=Q.identifierPrefix;if(I){var h=sg,d=rg;h=(d&~(1<<32-oc(d)-1)).toString(32)+h,o=":"+o+"R"+h,h=Kh++,0<h&&(o+="H"+h.toString(32)),o+=":"}else h=Lh++,o=":"+o+"r"+h.toString(32)+":";return s.memoizedState=o},unstable_isNewReconciler:!1},Ph={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Wh,useRef:ji,useState:function(){return Wh(Vh)},useDebugValue:ri,useDeferredValue:function(s){var o=Uh();return ui(o,N.memoizedState,s)},useTransition:function(){var s=Wh(Vh)[0],o=Uh().memoizedState;return[s,o]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1},Qh={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Xh,useRef:ji,useState:function(){return Xh(Vh)},useDebugValue:ri,useDeferredValue:function(s){var o=Uh();return N===null?o.memoizedState=s:ui(o,N.memoizedState,s)},useTransition:function(){var s=Xh(Vh)[0],o=Uh().memoizedState;return[s,o]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1};function Ci(s,o){if(s&&s.defaultProps){o=A$1({},o),s=s.defaultProps;for(var h in s)o[h]===void 0&&(o[h]=s[h]);return o}return o}function Di(s,o,h,d){o=s.memoizedState,h=h(d,o),h=h==null?o:A$1({},o,h),s.memoizedState=h,s.lanes===0&&(s.updateQueue.baseState=h)}var Ei={isMounted:function(s){return(s=s._reactInternals)?Vb(s)===s:!1},enqueueSetState:function(s,o,h){s=s._reactInternals;var d=R$1(),g=yi(s),_=mh(d,g);_.payload=o,h!=null&&(_.callback=h),o=nh(s,_,g),o!==null&&(gi(o,s,g,d),oh(o,s,g))},enqueueReplaceState:function(s,o,h){s=s._reactInternals;var d=R$1(),g=yi(s),_=mh(d,g);_.tag=1,_.payload=o,h!=null&&(_.callback=h),o=nh(s,_,g),o!==null&&(gi(o,s,g,d),oh(o,s,g))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var h=R$1(),d=yi(s),g=mh(h,d);g.tag=2,o!=null&&(g.callback=o),o=nh(s,g,d),o!==null&&(gi(o,s,d,h),oh(o,s,d))}};function Fi(s,o,h,d,g,_,b){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(d,_,b):o.prototype&&o.prototype.isPureReactComponent?!Ie(h,d)||!Ie(g,_):!0}function Gi(s,o,h){var d=!1,g=Vf,_=o.contextType;return typeof _=="object"&&_!==null?_=eh(_):(g=Zf(o)?Xf:H.current,d=o.contextTypes,_=(d=d!=null)?Yf(s,g):Vf),o=new o(h,_),s.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Ei,s.stateNode=o,o._reactInternals=s,d&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=g,s.__reactInternalMemoizedMaskedChildContext=_),o}function Hi(s,o,h,d){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(h,d),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(h,d),o.state!==s&&Ei.enqueueReplaceState(o,o.state,null)}function Ii(s,o,h,d){var g=s.stateNode;g.props=h,g.state=s.memoizedState,g.refs={},kh(s);var _=o.contextType;typeof _=="object"&&_!==null?g.context=eh(_):(_=Zf(o)?Xf:H.current,g.context=Yf(s,_)),g.state=s.memoizedState,_=o.getDerivedStateFromProps,typeof _=="function"&&(Di(s,o,_,h),g.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(o=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),o!==g.state&&Ei.enqueueReplaceState(g,g.state,null),qh(s,h,g,d),g.state=s.memoizedState),typeof g.componentDidMount=="function"&&(s.flags|=4194308)}function Ji(s,o){try{var h="",d=o;do h+=Pa(d),d=d.return;while(d);var g=h}catch(_){g=`
Error generating stack: `+_.message+`
`+_.stack}return{value:s,source:o,stack:g,digest:null}}function Ki(s,o,h){return{value:s,source:null,stack:h??null,digest:o??null}}function Li(s,o){try{console.error(o.value)}catch(h){setTimeout(function(){throw h})}}var Mi=typeof WeakMap=="function"?WeakMap:Map;function Ni(s,o,h){h=mh(-1,h),h.tag=3,h.payload={element:null};var d=o.value;return h.callback=function(){Oi||(Oi=!0,Pi=d),Li(s,o)},h}function Qi(s,o,h){h=mh(-1,h),h.tag=3;var d=s.type.getDerivedStateFromError;if(typeof d=="function"){var g=o.value;h.payload=function(){return d(g)},h.callback=function(){Li(s,o)}}var _=s.stateNode;return _!==null&&typeof _.componentDidCatch=="function"&&(h.callback=function(){Li(s,o),typeof d!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var b=o.stack;this.componentDidCatch(o.value,{componentStack:b!==null?b:""})}),h}function Si(s,o,h){var d=s.pingCache;if(d===null){d=s.pingCache=new Mi;var g=new Set;d.set(o,g)}else g=d.get(o),g===void 0&&(g=new Set,d.set(o,g));g.has(h)||(g.add(h),s=Ti.bind(null,s,o,h),o.then(s,s))}function Ui(s){do{var o;if((o=s.tag===13)&&(o=s.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return s;s=s.return}while(s!==null);return null}function Vi(s,o,h,d,g){return s.mode&1?(s.flags|=65536,s.lanes=g,s):(s===o?s.flags|=65536:(s.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(o=mh(-1,1),o.tag=2,nh(h,o,1))),h.lanes|=1),s)}var Wi=ua.ReactCurrentOwner,dh=!1;function Xi(s,o,h,d){o.child=s===null?Vg(o,null,h,d):Ug(o,s.child,h,d)}function Yi(s,o,h,d,g){h=h.render;var _=o.ref;return ch(o,g),d=Nh(s,o,h,d,_,g),h=Sh(),s!==null&&!dh?(o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~g,Zi(s,o,g)):(I&&h&&vg(o),o.flags|=1,Xi(s,o,d,g),o.child)}function $i(s,o,h,d,g){if(s===null){var _=h.type;return typeof _=="function"&&!aj(_)&&_.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(o.tag=15,o.type=_,bj(s,o,_,d,g)):(s=Rg(h.type,null,d,o,o.mode,g),s.ref=o.ref,s.return=o,o.child=s)}if(_=s.child,!(s.lanes&g)){var b=_.memoizedProps;if(h=h.compare,h=h!==null?h:Ie,h(b,d)&&s.ref===o.ref)return Zi(s,o,g)}return o.flags|=1,s=Pg(_,d),s.ref=o.ref,s.return=o,o.child=s}function bj(s,o,h,d,g){if(s!==null){var _=s.memoizedProps;if(Ie(_,d)&&s.ref===o.ref)if(dh=!1,o.pendingProps=d=_,(s.lanes&g)!==0)s.flags&131072&&(dh=!0);else return o.lanes=s.lanes,Zi(s,o,g)}return cj(s,o,h,d,g)}function dj(s,o,h){var d=o.pendingProps,g=d.children,_=s!==null?s.memoizedState:null;if(d.mode==="hidden")if(!(o.mode&1))o.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(ej,fj),fj|=h;else{if(!(h&1073741824))return s=_!==null?_.baseLanes|h:h,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:s,cachePool:null,transitions:null},o.updateQueue=null,G(ej,fj),fj|=s,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=_!==null?_.baseLanes:h,G(ej,fj),fj|=d}else _!==null?(d=_.baseLanes|h,o.memoizedState=null):d=h,G(ej,fj),fj|=d;return Xi(s,o,g,h),o.child}function gj(s,o){var h=o.ref;(s===null&&h!==null||s!==null&&s.ref!==h)&&(o.flags|=512,o.flags|=2097152)}function cj(s,o,h,d,g){var _=Zf(h)?Xf:H.current;return _=Yf(o,_),ch(o,g),h=Nh(s,o,h,d,_,g),d=Sh(),s!==null&&!dh?(o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~g,Zi(s,o,g)):(I&&d&&vg(o),o.flags|=1,Xi(s,o,h,g),o.child)}function hj(s,o,h,d,g){if(Zf(h)){var _=!0;cg(o)}else _=!1;if(ch(o,g),o.stateNode===null)ij(s,o),Gi(o,h,d),Ii(o,h,d,g),d=!0;else if(s===null){var b=o.stateNode,$=o.memoizedProps;b.props=$;var et=b.context,tt=h.contextType;typeof tt=="object"&&tt!==null?tt=eh(tt):(tt=Zf(h)?Xf:H.current,tt=Yf(o,tt));var rt=h.getDerivedStateFromProps,nt=typeof rt=="function"||typeof b.getSnapshotBeforeUpdate=="function";nt||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||($!==d||et!==tt)&&Hi(o,b,d,tt),jh=!1;var At=o.memoizedState;b.state=At,qh(o,d,b,g),et=o.memoizedState,$!==d||At!==et||Wf.current||jh?(typeof rt=="function"&&(Di(o,h,rt,d),et=o.memoizedState),($=jh||Fi(o,h,$,d,At,et,tt))?(nt||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(o.flags|=4194308)):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=d,o.memoizedState=et),b.props=d,b.state=et,b.context=tt,d=$):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),d=!1)}else{b=o.stateNode,lh(s,o),$=o.memoizedProps,tt=o.type===o.elementType?$:Ci(o.type,$),b.props=tt,nt=o.pendingProps,At=b.context,et=h.contextType,typeof et=="object"&&et!==null?et=eh(et):(et=Zf(h)?Xf:H.current,et=Yf(o,et));var at=h.getDerivedStateFromProps;(rt=typeof at=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||($!==nt||At!==et)&&Hi(o,b,d,et),jh=!1,At=o.memoizedState,b.state=At,qh(o,d,b,g);var lt=o.memoizedState;$!==nt||At!==lt||Wf.current||jh?(typeof at=="function"&&(Di(o,h,at,d),lt=o.memoizedState),(tt=jh||Fi(o,h,tt,d,At,lt,et)||!1)?(rt||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(d,lt,et),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(d,lt,et)),typeof b.componentDidUpdate=="function"&&(o.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof b.componentDidUpdate!="function"||$===s.memoizedProps&&At===s.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||$===s.memoizedProps&&At===s.memoizedState||(o.flags|=1024),o.memoizedProps=d,o.memoizedState=lt),b.props=d,b.state=lt,b.context=et,d=tt):(typeof b.componentDidUpdate!="function"||$===s.memoizedProps&&At===s.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||$===s.memoizedProps&&At===s.memoizedState||(o.flags|=1024),d=!1)}return jj(s,o,h,d,_,g)}function jj(s,o,h,d,g,_){gj(s,o);var b=(o.flags&128)!==0;if(!d&&!b)return g&&dg(o,h,!1),Zi(s,o,_);d=o.stateNode,Wi.current=o;var $=b&&typeof h.getDerivedStateFromError!="function"?null:d.render();return o.flags|=1,s!==null&&b?(o.child=Ug(o,s.child,null,_),o.child=Ug(o,null,$,_)):Xi(s,o,$,_),o.memoizedState=d.state,g&&dg(o,h,!0),o.child}function kj(s){var o=s.stateNode;o.pendingContext?ag(s,o.pendingContext,o.pendingContext!==o.context):o.context&&ag(s,o.context,!1),yh(s,o.containerInfo)}function lj(s,o,h,d,g){return Ig(),Jg(g),o.flags|=256,Xi(s,o,h,d),o.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(s){return{baseLanes:s,cachePool:null,transitions:null}}function oj(s,o,h){var d=o.pendingProps,g=L$3.current,_=!1,b=(o.flags&128)!==0,$;if(($=b)||($=s!==null&&s.memoizedState===null?!1:(g&2)!==0),$?(_=!0,o.flags&=-129):(s===null||s.memoizedState!==null)&&(g|=1),G(L$3,g&1),s===null)return Eg(o),s=o.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?(o.mode&1?s.data==="$!"?o.lanes=8:o.lanes=1073741824:o.lanes=1,null):(b=d.children,s=d.fallback,_?(d=o.mode,_=o.child,b={mode:"hidden",children:b},!(d&1)&&_!==null?(_.childLanes=0,_.pendingProps=b):_=pj(b,d,0,null),s=Tg(s,d,h,null),_.return=o,s.return=o,_.sibling=s,o.child=_,o.child.memoizedState=nj(h),o.memoizedState=mj,s):qj(o,b));if(g=s.memoizedState,g!==null&&($=g.dehydrated,$!==null))return rj(s,o,b,d,$,g,h);if(_){_=d.fallback,b=o.mode,g=s.child,$=g.sibling;var et={mode:"hidden",children:d.children};return!(b&1)&&o.child!==g?(d=o.child,d.childLanes=0,d.pendingProps=et,o.deletions=null):(d=Pg(g,et),d.subtreeFlags=g.subtreeFlags&14680064),$!==null?_=Pg($,_):(_=Tg(_,b,h,null),_.flags|=2),_.return=o,d.return=o,d.sibling=_,o.child=d,d=_,_=o.child,b=s.child.memoizedState,b=b===null?nj(h):{baseLanes:b.baseLanes|h,cachePool:null,transitions:b.transitions},_.memoizedState=b,_.childLanes=s.childLanes&~h,o.memoizedState=mj,d}return _=s.child,s=_.sibling,d=Pg(_,{mode:"visible",children:d.children}),!(o.mode&1)&&(d.lanes=h),d.return=o,d.sibling=null,s!==null&&(h=o.deletions,h===null?(o.deletions=[s],o.flags|=16):h.push(s)),o.child=d,o.memoizedState=null,d}function qj(s,o){return o=pj({mode:"visible",children:o},s.mode,0,null),o.return=s,s.child=o}function sj(s,o,h,d){return d!==null&&Jg(d),Ug(o,s.child,null,h),s=qj(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function rj(s,o,h,d,g,_,b){if(h)return o.flags&256?(o.flags&=-257,d=Ki(Error(p$1(422))),sj(s,o,b,d)):o.memoizedState!==null?(o.child=s.child,o.flags|=128,null):(_=d.fallback,g=o.mode,d=pj({mode:"visible",children:d.children},g,0,null),_=Tg(_,g,b,null),_.flags|=2,d.return=o,_.return=o,d.sibling=_,o.child=d,o.mode&1&&Ug(o,s.child,null,b),o.child.memoizedState=nj(b),o.memoizedState=mj,_);if(!(o.mode&1))return sj(s,o,b,null);if(g.data==="$!"){if(d=g.nextSibling&&g.nextSibling.dataset,d)var $=d.dgst;return d=$,_=Error(p$1(419)),d=Ki(_,d,void 0),sj(s,o,b,d)}if($=(b&s.childLanes)!==0,dh||$){if(d=Q,d!==null){switch(b&-b){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=g&(d.suspendedLanes|b)?0:g,g!==0&&g!==_.retryLane&&(_.retryLane=g,ih(s,g),gi(d,s,g,-1))}return tj(),d=Ki(Error(p$1(421))),sj(s,o,b,d)}return g.data==="$?"?(o.flags|=128,o.child=s.child,o=uj.bind(null,s),g._reactRetry=o,null):(s=_.treeContext,yg=Lf(g.nextSibling),xg=o,I=!0,zg=null,s!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=s.id,sg=s.overflow,qg=o),o=qj(o,d.children),o.flags|=4096,o)}function vj(s,o,h){s.lanes|=o;var d=s.alternate;d!==null&&(d.lanes|=o),bh(s.return,o,h)}function wj(s,o,h,d,g){var _=s.memoizedState;_===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:d,tail:h,tailMode:g}:(_.isBackwards=o,_.rendering=null,_.renderingStartTime=0,_.last=d,_.tail=h,_.tailMode=g)}function xj(s,o,h){var d=o.pendingProps,g=d.revealOrder,_=d.tail;if(Xi(s,o,d.children,h),d=L$3.current,d&2)d=d&1|2,o.flags|=128;else{if(s!==null&&s.flags&128)t:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&vj(s,h,o);else if(s.tag===19)vj(s,h,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break t;for(;s.sibling===null;){if(s.return===null||s.return===o)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}d&=1}if(G(L$3,d),!(o.mode&1))o.memoizedState=null;else switch(g){case"forwards":for(h=o.child,g=null;h!==null;)s=h.alternate,s!==null&&Ch(s)===null&&(g=h),h=h.sibling;h=g,h===null?(g=o.child,o.child=null):(g=h.sibling,h.sibling=null),wj(o,!1,g,h,_);break;case"backwards":for(h=null,g=o.child,o.child=null;g!==null;){if(s=g.alternate,s!==null&&Ch(s)===null){o.child=g;break}s=g.sibling,g.sibling=h,h=g,g=s}wj(o,!0,h,null,_);break;case"together":wj(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function ij(s,o){!(o.mode&1)&&s!==null&&(s.alternate=null,o.alternate=null,o.flags|=2)}function Zi(s,o,h){if(s!==null&&(o.dependencies=s.dependencies),rh|=o.lanes,!(h&o.childLanes))return null;if(s!==null&&o.child!==s.child)throw Error(p$1(153));if(o.child!==null){for(s=o.child,h=Pg(s,s.pendingProps),o.child=h,h.return=o;s.sibling!==null;)s=s.sibling,h=h.sibling=Pg(s,s.pendingProps),h.return=o;h.sibling=null}return o.child}function yj(s,o,h){switch(o.tag){case 3:kj(o),Ig();break;case 5:Ah(o);break;case 1:Zf(o.type)&&cg(o);break;case 4:yh(o,o.stateNode.containerInfo);break;case 10:var d=o.type._context,g=o.memoizedProps.value;G(Wg,d._currentValue),d._currentValue=g;break;case 13:if(d=o.memoizedState,d!==null)return d.dehydrated!==null?(G(L$3,L$3.current&1),o.flags|=128,null):h&o.child.childLanes?oj(s,o,h):(G(L$3,L$3.current&1),s=Zi(s,o,h),s!==null?s.sibling:null);G(L$3,L$3.current&1);break;case 19:if(d=(h&o.childLanes)!==0,s.flags&128){if(d)return xj(s,o,h);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),G(L$3,L$3.current),d)break;return null;case 22:case 23:return o.lanes=0,dj(s,o,h)}return Zi(s,o,h)}var zj,Aj,Bj,Cj;zj=function(s,o){for(var h=o.child;h!==null;){if(h.tag===5||h.tag===6)s.appendChild(h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===o)break;for(;h.sibling===null;){if(h.return===null||h.return===o)return;h=h.return}h.sibling.return=h.return,h=h.sibling}};Aj=function(){};Bj=function(s,o,h,d){var g=s.memoizedProps;if(g!==d){s=o.stateNode,xh(uh.current);var _=null;switch(h){case"input":g=Ya(s,g),d=Ya(s,d),_=[];break;case"select":g=A$1({},g,{value:void 0}),d=A$1({},d,{value:void 0}),_=[];break;case"textarea":g=gb(s,g),d=gb(s,d),_=[];break;default:typeof g.onClick!="function"&&typeof d.onClick=="function"&&(s.onclick=Bf)}ub(h,d);var b;h=null;for(tt in g)if(!d.hasOwnProperty(tt)&&g.hasOwnProperty(tt)&&g[tt]!=null)if(tt==="style"){var $=g[tt];for(b in $)$.hasOwnProperty(b)&&(h||(h={}),h[b]="")}else tt!=="dangerouslySetInnerHTML"&&tt!=="children"&&tt!=="suppressContentEditableWarning"&&tt!=="suppressHydrationWarning"&&tt!=="autoFocus"&&(ea.hasOwnProperty(tt)?_||(_=[]):(_=_||[]).push(tt,null));for(tt in d){var et=d[tt];if($=g!=null?g[tt]:void 0,d.hasOwnProperty(tt)&&et!==$&&(et!=null||$!=null))if(tt==="style")if($){for(b in $)!$.hasOwnProperty(b)||et&&et.hasOwnProperty(b)||(h||(h={}),h[b]="");for(b in et)et.hasOwnProperty(b)&&$[b]!==et[b]&&(h||(h={}),h[b]=et[b])}else h||(_||(_=[]),_.push(tt,h)),h=et;else tt==="dangerouslySetInnerHTML"?(et=et?et.__html:void 0,$=$?$.__html:void 0,et!=null&&$!==et&&(_=_||[]).push(tt,et)):tt==="children"?typeof et!="string"&&typeof et!="number"||(_=_||[]).push(tt,""+et):tt!=="suppressContentEditableWarning"&&tt!=="suppressHydrationWarning"&&(ea.hasOwnProperty(tt)?(et!=null&&tt==="onScroll"&&D("scroll",s),_||$===et||(_=[])):(_=_||[]).push(tt,et))}h&&(_=_||[]).push("style",h);var tt=_;(o.updateQueue=tt)&&(o.flags|=4)}};Cj=function(s,o,h,d){h!==d&&(o.flags|=4)};function Dj(s,o){if(!I)switch(s.tailMode){case"hidden":o=s.tail;for(var h=null;o!==null;)o.alternate!==null&&(h=o),o=o.sibling;h===null?s.tail=null:h.sibling=null;break;case"collapsed":h=s.tail;for(var d=null;h!==null;)h.alternate!==null&&(d=h),h=h.sibling;d===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:d.sibling=null}}function S(s){var o=s.alternate!==null&&s.alternate.child===s.child,h=0,d=0;if(o)for(var g=s.child;g!==null;)h|=g.lanes|g.childLanes,d|=g.subtreeFlags&14680064,d|=g.flags&14680064,g.return=s,g=g.sibling;else for(g=s.child;g!==null;)h|=g.lanes|g.childLanes,d|=g.subtreeFlags,d|=g.flags,g.return=s,g=g.sibling;return s.subtreeFlags|=d,s.childLanes=h,o}function Ej(s,o,h){var d=o.pendingProps;switch(wg(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S(o),null;case 1:return Zf(o.type)&&$f(),S(o),null;case 3:return d=o.stateNode,zh(),E$1(Wf),E$1(H),Eh(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(s===null||s.child===null)&&(Gg(o)?o.flags|=4:s===null||s.memoizedState.isDehydrated&&!(o.flags&256)||(o.flags|=1024,zg!==null&&(Fj(zg),zg=null))),Aj(s,o),S(o),null;case 5:Bh(o);var g=xh(wh.current);if(h=o.type,s!==null&&o.stateNode!=null)Bj(s,o,h,d,g),s.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!d){if(o.stateNode===null)throw Error(p$1(166));return S(o),null}if(s=xh(uh.current),Gg(o)){d=o.stateNode,h=o.type;var _=o.memoizedProps;switch(d[Of]=o,d[Pf]=_,s=(o.mode&1)!==0,h){case"dialog":D("cancel",d),D("close",d);break;case"iframe":case"object":case"embed":D("load",d);break;case"video":case"audio":for(g=0;g<lf.length;g++)D(lf[g],d);break;case"source":D("error",d);break;case"img":case"image":case"link":D("error",d),D("load",d);break;case"details":D("toggle",d);break;case"input":Za(d,_),D("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!_.multiple},D("invalid",d);break;case"textarea":hb(d,_),D("invalid",d)}ub(h,_),g=null;for(var b in _)if(_.hasOwnProperty(b)){var $=_[b];b==="children"?typeof $=="string"?d.textContent!==$&&(_.suppressHydrationWarning!==!0&&Af(d.textContent,$,s),g=["children",$]):typeof $=="number"&&d.textContent!==""+$&&(_.suppressHydrationWarning!==!0&&Af(d.textContent,$,s),g=["children",""+$]):ea.hasOwnProperty(b)&&$!=null&&b==="onScroll"&&D("scroll",d)}switch(h){case"input":Va(d),db(d,_,!0);break;case"textarea":Va(d),jb(d);break;case"select":case"option":break;default:typeof _.onClick=="function"&&(d.onclick=Bf)}d=g,o.updateQueue=d,d!==null&&(o.flags|=4)}else{b=g.nodeType===9?g:g.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=kb(h)),s==="http://www.w3.org/1999/xhtml"?h==="script"?(s=b.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof d.is=="string"?s=b.createElement(h,{is:d.is}):(s=b.createElement(h),h==="select"&&(b=s,d.multiple?b.multiple=!0:d.size&&(b.size=d.size))):s=b.createElementNS(s,h),s[Of]=o,s[Pf]=d,zj(s,o,!1,!1),o.stateNode=s;t:{switch(b=vb(h,d),h){case"dialog":D("cancel",s),D("close",s),g=d;break;case"iframe":case"object":case"embed":D("load",s),g=d;break;case"video":case"audio":for(g=0;g<lf.length;g++)D(lf[g],s);g=d;break;case"source":D("error",s),g=d;break;case"img":case"image":case"link":D("error",s),D("load",s),g=d;break;case"details":D("toggle",s),g=d;break;case"input":Za(s,d),g=Ya(s,d),D("invalid",s);break;case"option":g=d;break;case"select":s._wrapperState={wasMultiple:!!d.multiple},g=A$1({},d,{value:void 0}),D("invalid",s);break;case"textarea":hb(s,d),g=gb(s,d),D("invalid",s);break;default:g=d}ub(h,g),$=g;for(_ in $)if($.hasOwnProperty(_)){var et=$[_];_==="style"?sb(s,et):_==="dangerouslySetInnerHTML"?(et=et?et.__html:void 0,et!=null&&nb(s,et)):_==="children"?typeof et=="string"?(h!=="textarea"||et!=="")&&ob(s,et):typeof et=="number"&&ob(s,""+et):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(ea.hasOwnProperty(_)?et!=null&&_==="onScroll"&&D("scroll",s):et!=null&&ta(s,_,et,b))}switch(h){case"input":Va(s),db(s,d,!1);break;case"textarea":Va(s),jb(s);break;case"option":d.value!=null&&s.setAttribute("value",""+Sa(d.value));break;case"select":s.multiple=!!d.multiple,_=d.value,_!=null?fb(s,!!d.multiple,_,!1):d.defaultValue!=null&&fb(s,!!d.multiple,d.defaultValue,!0);break;default:typeof g.onClick=="function"&&(s.onclick=Bf)}switch(h){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break t;case"img":d=!0;break t;default:d=!1}}d&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return S(o),null;case 6:if(s&&o.stateNode!=null)Cj(s,o,s.memoizedProps,d);else{if(typeof d!="string"&&o.stateNode===null)throw Error(p$1(166));if(h=xh(wh.current),xh(uh.current),Gg(o)){if(d=o.stateNode,h=o.memoizedProps,d[Of]=o,(_=d.nodeValue!==h)&&(s=xg,s!==null))switch(s.tag){case 3:Af(d.nodeValue,h,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&Af(d.nodeValue,h,(s.mode&1)!==0)}_&&(o.flags|=4)}else d=(h.nodeType===9?h:h.ownerDocument).createTextNode(d),d[Of]=o,o.stateNode=d}return S(o),null;case 13:if(E$1(L$3),d=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(I&&yg!==null&&o.mode&1&&!(o.flags&128))Hg(),Ig(),o.flags|=98560,_=!1;else if(_=Gg(o),d!==null&&d.dehydrated!==null){if(s===null){if(!_)throw Error(p$1(318));if(_=o.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(p$1(317));_[Of]=o}else Ig(),!(o.flags&128)&&(o.memoizedState=null),o.flags|=4;S(o),_=!1}else zg!==null&&(Fj(zg),zg=null),_=!0;if(!_)return o.flags&65536?o:null}return o.flags&128?(o.lanes=h,o):(d=d!==null,d!==(s!==null&&s.memoizedState!==null)&&d&&(o.child.flags|=8192,o.mode&1&&(s===null||L$3.current&1?T$1===0&&(T$1=3):tj())),o.updateQueue!==null&&(o.flags|=4),S(o),null);case 4:return zh(),Aj(s,o),s===null&&sf(o.stateNode.containerInfo),S(o),null;case 10:return ah(o.type._context),S(o),null;case 17:return Zf(o.type)&&$f(),S(o),null;case 19:if(E$1(L$3),_=o.memoizedState,_===null)return S(o),null;if(d=(o.flags&128)!==0,b=_.rendering,b===null)if(d)Dj(_,!1);else{if(T$1!==0||s!==null&&s.flags&128)for(s=o.child;s!==null;){if(b=Ch(s),b!==null){for(o.flags|=128,Dj(_,!1),d=b.updateQueue,d!==null&&(o.updateQueue=d,o.flags|=4),o.subtreeFlags=0,d=h,h=o.child;h!==null;)_=h,s=d,_.flags&=14680066,b=_.alternate,b===null?(_.childLanes=0,_.lanes=s,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=b.childLanes,_.lanes=b.lanes,_.child=b.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=b.memoizedProps,_.memoizedState=b.memoizedState,_.updateQueue=b.updateQueue,_.type=b.type,s=b.dependencies,_.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),h=h.sibling;return G(L$3,L$3.current&1|2),o.child}s=s.sibling}_.tail!==null&&B()>Gj&&(o.flags|=128,d=!0,Dj(_,!1),o.lanes=4194304)}else{if(!d)if(s=Ch(b),s!==null){if(o.flags|=128,d=!0,h=s.updateQueue,h!==null&&(o.updateQueue=h,o.flags|=4),Dj(_,!0),_.tail===null&&_.tailMode==="hidden"&&!b.alternate&&!I)return S(o),null}else 2*B()-_.renderingStartTime>Gj&&h!==1073741824&&(o.flags|=128,d=!0,Dj(_,!1),o.lanes=4194304);_.isBackwards?(b.sibling=o.child,o.child=b):(h=_.last,h!==null?h.sibling=b:o.child=b,_.last=b)}return _.tail!==null?(o=_.tail,_.rendering=o,_.tail=o.sibling,_.renderingStartTime=B(),o.sibling=null,h=L$3.current,G(L$3,d?h&1|2:h&1),o):(S(o),null);case 22:case 23:return Hj(),d=o.memoizedState!==null,s!==null&&s.memoizedState!==null!==d&&(o.flags|=8192),d&&o.mode&1?fj&1073741824&&(S(o),o.subtreeFlags&6&&(o.flags|=8192)):S(o),null;case 24:return null;case 25:return null}throw Error(p$1(156,o.tag))}function Ij(s,o){switch(wg(o),o.tag){case 1:return Zf(o.type)&&$f(),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return zh(),E$1(Wf),E$1(H),Eh(),s=o.flags,s&65536&&!(s&128)?(o.flags=s&-65537|128,o):null;case 5:return Bh(o),null;case 13:if(E$1(L$3),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(p$1(340));Ig()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return E$1(L$3),null;case 4:return zh(),null;case 10:return ah(o.type._context),null;case 22:case 23:return Hj(),null;case 24:return null;default:return null}}var Jj=!1,U$1=!1,Kj=typeof WeakSet=="function"?WeakSet:Set,V$1=null;function Lj(s,o){var h=s.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(d){W(s,o,d)}else h.current=null}function Mj(s,o,h){try{h()}catch(d){W(s,o,d)}}var Nj=!1;function Oj(s,o){if(Cf=dd,s=Me(),Ne(s)){if("selectionStart"in s)var h={start:s.selectionStart,end:s.selectionEnd};else t:{h=(h=s.ownerDocument)&&h.defaultView||window;var d=h.getSelection&&h.getSelection();if(d&&d.rangeCount!==0){h=d.anchorNode;var g=d.anchorOffset,_=d.focusNode;d=d.focusOffset;try{h.nodeType,_.nodeType}catch{h=null;break t}var b=0,$=-1,et=-1,tt=0,rt=0,nt=s,At=null;e:for(;;){for(var at;nt!==h||g!==0&&nt.nodeType!==3||($=b+g),nt!==_||d!==0&&nt.nodeType!==3||(et=b+d),nt.nodeType===3&&(b+=nt.nodeValue.length),(at=nt.firstChild)!==null;)At=nt,nt=at;for(;;){if(nt===s)break e;if(At===h&&++tt===g&&($=b),At===_&&++rt===d&&(et=b),(at=nt.nextSibling)!==null)break;nt=At,At=nt.parentNode}nt=at}h=$===-1||et===-1?null:{start:$,end:et}}else h=null}h=h||{start:0,end:0}}else h=null;for(Df={focusedElem:s,selectionRange:h},dd=!1,V$1=o;V$1!==null;)if(o=V$1,s=o.child,(o.subtreeFlags&1028)!==0&&s!==null)s.return=o,V$1=s;else for(;V$1!==null;){o=V$1;try{var lt=o.alternate;if(o.flags&1024)switch(o.tag){case 0:case 11:case 15:break;case 1:if(lt!==null){var gt=lt.memoizedProps,_t=lt.memoizedState,ct=o.stateNode,pt=ct.getSnapshotBeforeUpdate(o.elementType===o.type?gt:Ci(o.type,gt),_t);ct.__reactInternalSnapshotBeforeUpdate=pt}break;case 3:var dt=o.stateNode.containerInfo;dt.nodeType===1?dt.textContent="":dt.nodeType===9&&dt.documentElement&&dt.removeChild(dt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$1(163))}}catch(mt){W(o,o.return,mt)}if(s=o.sibling,s!==null){s.return=o.return,V$1=s;break}V$1=o.return}return lt=Nj,Nj=!1,lt}function Pj(s,o,h){var d=o.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var g=d=d.next;do{if((g.tag&s)===s){var _=g.destroy;g.destroy=void 0,_!==void 0&&Mj(o,h,_)}g=g.next}while(g!==d)}}function Qj(s,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var h=o=o.next;do{if((h.tag&s)===s){var d=h.create;h.destroy=d()}h=h.next}while(h!==o)}}function Rj(s){var o=s.ref;if(o!==null){var h=s.stateNode;switch(s.tag){case 5:s=h;break;default:s=h}typeof o=="function"?o(s):o.current=s}}function Sj(s){var o=s.alternate;o!==null&&(s.alternate=null,Sj(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&(delete o[Of],delete o[Pf],delete o[of],delete o[Qf],delete o[Rf])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function Tj(s){return s.tag===5||s.tag===3||s.tag===4}function Uj(s){t:for(;;){for(;s.sibling===null;){if(s.return===null||Tj(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue t;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Vj(s,o,h){var d=s.tag;if(d===5||d===6)s=s.stateNode,o?h.nodeType===8?h.parentNode.insertBefore(s,o):h.insertBefore(s,o):(h.nodeType===8?(o=h.parentNode,o.insertBefore(s,h)):(o=h,o.appendChild(s)),h=h._reactRootContainer,h!=null||o.onclick!==null||(o.onclick=Bf));else if(d!==4&&(s=s.child,s!==null))for(Vj(s,o,h),s=s.sibling;s!==null;)Vj(s,o,h),s=s.sibling}function Wj(s,o,h){var d=s.tag;if(d===5||d===6)s=s.stateNode,o?h.insertBefore(s,o):h.appendChild(s);else if(d!==4&&(s=s.child,s!==null))for(Wj(s,o,h),s=s.sibling;s!==null;)Wj(s,o,h),s=s.sibling}var X=null,Xj=!1;function Yj(s,o,h){for(h=h.child;h!==null;)Zj(s,o,h),h=h.sibling}function Zj(s,o,h){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,h)}catch{}switch(h.tag){case 5:U$1||Lj(h,o);case 6:var d=X,g=Xj;X=null,Yj(s,o,h),X=d,Xj=g,X!==null&&(Xj?(s=X,h=h.stateNode,s.nodeType===8?s.parentNode.removeChild(h):s.removeChild(h)):X.removeChild(h.stateNode));break;case 18:X!==null&&(Xj?(s=X,h=h.stateNode,s.nodeType===8?Kf(s.parentNode,h):s.nodeType===1&&Kf(s,h),bd(s)):Kf(X,h.stateNode));break;case 4:d=X,g=Xj,X=h.stateNode.containerInfo,Xj=!0,Yj(s,o,h),X=d,Xj=g;break;case 0:case 11:case 14:case 15:if(!U$1&&(d=h.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){g=d=d.next;do{var _=g,b=_.destroy;_=_.tag,b!==void 0&&(_&2||_&4)&&Mj(h,o,b),g=g.next}while(g!==d)}Yj(s,o,h);break;case 1:if(!U$1&&(Lj(h,o),d=h.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=h.memoizedProps,d.state=h.memoizedState,d.componentWillUnmount()}catch($){W(h,o,$)}Yj(s,o,h);break;case 21:Yj(s,o,h);break;case 22:h.mode&1?(U$1=(d=U$1)||h.memoizedState!==null,Yj(s,o,h),U$1=d):Yj(s,o,h);break;default:Yj(s,o,h)}}function ak(s){var o=s.updateQueue;if(o!==null){s.updateQueue=null;var h=s.stateNode;h===null&&(h=s.stateNode=new Kj),o.forEach(function(d){var g=bk.bind(null,s,d);h.has(d)||(h.add(d),d.then(g,g))})}}function ck(s,o){var h=o.deletions;if(h!==null)for(var d=0;d<h.length;d++){var g=h[d];try{var _=s,b=o,$=b;t:for(;$!==null;){switch($.tag){case 5:X=$.stateNode,Xj=!1;break t;case 3:X=$.stateNode.containerInfo,Xj=!0;break t;case 4:X=$.stateNode.containerInfo,Xj=!0;break t}$=$.return}if(X===null)throw Error(p$1(160));Zj(_,b,g),X=null,Xj=!1;var et=g.alternate;et!==null&&(et.return=null),g.return=null}catch(tt){W(g,o,tt)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)dk(o,s),o=o.sibling}function dk(s,o){var h=s.alternate,d=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(ck(o,s),ek(s),d&4){try{Pj(3,s,s.return),Qj(3,s)}catch(gt){W(s,s.return,gt)}try{Pj(5,s,s.return)}catch(gt){W(s,s.return,gt)}}break;case 1:ck(o,s),ek(s),d&512&&h!==null&&Lj(h,h.return);break;case 5:if(ck(o,s),ek(s),d&512&&h!==null&&Lj(h,h.return),s.flags&32){var g=s.stateNode;try{ob(g,"")}catch(gt){W(s,s.return,gt)}}if(d&4&&(g=s.stateNode,g!=null)){var _=s.memoizedProps,b=h!==null?h.memoizedProps:_,$=s.type,et=s.updateQueue;if(s.updateQueue=null,et!==null)try{$==="input"&&_.type==="radio"&&_.name!=null&&ab(g,_),vb($,b);var tt=vb($,_);for(b=0;b<et.length;b+=2){var rt=et[b],nt=et[b+1];rt==="style"?sb(g,nt):rt==="dangerouslySetInnerHTML"?nb(g,nt):rt==="children"?ob(g,nt):ta(g,rt,nt,tt)}switch($){case"input":bb(g,_);break;case"textarea":ib(g,_);break;case"select":var At=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!_.multiple;var at=_.value;at!=null?fb(g,!!_.multiple,at,!1):At!==!!_.multiple&&(_.defaultValue!=null?fb(g,!!_.multiple,_.defaultValue,!0):fb(g,!!_.multiple,_.multiple?[]:"",!1))}g[Pf]=_}catch(gt){W(s,s.return,gt)}}break;case 6:if(ck(o,s),ek(s),d&4){if(s.stateNode===null)throw Error(p$1(162));g=s.stateNode,_=s.memoizedProps;try{g.nodeValue=_}catch(gt){W(s,s.return,gt)}}break;case 3:if(ck(o,s),ek(s),d&4&&h!==null&&h.memoizedState.isDehydrated)try{bd(o.containerInfo)}catch(gt){W(s,s.return,gt)}break;case 4:ck(o,s),ek(s);break;case 13:ck(o,s),ek(s),g=s.child,g.flags&8192&&(_=g.memoizedState!==null,g.stateNode.isHidden=_,!_||g.alternate!==null&&g.alternate.memoizedState!==null||(fk=B())),d&4&&ak(s);break;case 22:if(rt=h!==null&&h.memoizedState!==null,s.mode&1?(U$1=(tt=U$1)||rt,ck(o,s),U$1=tt):ck(o,s),ek(s),d&8192){if(tt=s.memoizedState!==null,(s.stateNode.isHidden=tt)&&!rt&&s.mode&1)for(V$1=s,rt=s.child;rt!==null;){for(nt=V$1=rt;V$1!==null;){switch(At=V$1,at=At.child,At.tag){case 0:case 11:case 14:case 15:Pj(4,At,At.return);break;case 1:Lj(At,At.return);var lt=At.stateNode;if(typeof lt.componentWillUnmount=="function"){d=At,h=At.return;try{o=d,lt.props=o.memoizedProps,lt.state=o.memoizedState,lt.componentWillUnmount()}catch(gt){W(d,h,gt)}}break;case 5:Lj(At,At.return);break;case 22:if(At.memoizedState!==null){gk(nt);continue}}at!==null?(at.return=At,V$1=at):gk(nt)}rt=rt.sibling}t:for(rt=null,nt=s;;){if(nt.tag===5){if(rt===null){rt=nt;try{g=nt.stateNode,tt?(_=g.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none"):($=nt.stateNode,et=nt.memoizedProps.style,b=et!=null&&et.hasOwnProperty("display")?et.display:null,$.style.display=rb("display",b))}catch(gt){W(s,s.return,gt)}}}else if(nt.tag===6){if(rt===null)try{nt.stateNode.nodeValue=tt?"":nt.memoizedProps}catch(gt){W(s,s.return,gt)}}else if((nt.tag!==22&&nt.tag!==23||nt.memoizedState===null||nt===s)&&nt.child!==null){nt.child.return=nt,nt=nt.child;continue}if(nt===s)break t;for(;nt.sibling===null;){if(nt.return===null||nt.return===s)break t;rt===nt&&(rt=null),nt=nt.return}rt===nt&&(rt=null),nt.sibling.return=nt.return,nt=nt.sibling}}break;case 19:ck(o,s),ek(s),d&4&&ak(s);break;case 21:break;default:ck(o,s),ek(s)}}function ek(s){var o=s.flags;if(o&2){try{t:{for(var h=s.return;h!==null;){if(Tj(h)){var d=h;break t}h=h.return}throw Error(p$1(160))}switch(d.tag){case 5:var g=d.stateNode;d.flags&32&&(ob(g,""),d.flags&=-33);var _=Uj(s);Wj(s,_,g);break;case 3:case 4:var b=d.stateNode.containerInfo,$=Uj(s);Vj(s,$,b);break;default:throw Error(p$1(161))}}catch(et){W(s,s.return,et)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function hk(s,o,h){V$1=s,ik(s)}function ik(s,o,h){for(var d=(s.mode&1)!==0;V$1!==null;){var g=V$1,_=g.child;if(g.tag===22&&d){var b=g.memoizedState!==null||Jj;if(!b){var $=g.alternate,et=$!==null&&$.memoizedState!==null||U$1;$=Jj;var tt=U$1;if(Jj=b,(U$1=et)&&!tt)for(V$1=g;V$1!==null;)b=V$1,et=b.child,b.tag===22&&b.memoizedState!==null?jk(g):et!==null?(et.return=b,V$1=et):jk(g);for(;_!==null;)V$1=_,ik(_),_=_.sibling;V$1=g,Jj=$,U$1=tt}kk(s)}else g.subtreeFlags&8772&&_!==null?(_.return=g,V$1=_):kk(s)}}function kk(s){for(;V$1!==null;){var o=V$1;if(o.flags&8772){var h=o.alternate;try{if(o.flags&8772)switch(o.tag){case 0:case 11:case 15:U$1||Qj(5,o);break;case 1:var d=o.stateNode;if(o.flags&4&&!U$1)if(h===null)d.componentDidMount();else{var g=o.elementType===o.type?h.memoizedProps:Ci(o.type,h.memoizedProps);d.componentDidUpdate(g,h.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var _=o.updateQueue;_!==null&&sh(o,_,d);break;case 3:var b=o.updateQueue;if(b!==null){if(h=null,o.child!==null)switch(o.child.tag){case 5:h=o.child.stateNode;break;case 1:h=o.child.stateNode}sh(o,b,h)}break;case 5:var $=o.stateNode;if(h===null&&o.flags&4){h=$;var et=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":et.autoFocus&&h.focus();break;case"img":et.src&&(h.src=et.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var tt=o.alternate;if(tt!==null){var rt=tt.memoizedState;if(rt!==null){var nt=rt.dehydrated;nt!==null&&bd(nt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$1(163))}U$1||o.flags&512&&Rj(o)}catch(At){W(o,o.return,At)}}if(o===s){V$1=null;break}if(h=o.sibling,h!==null){h.return=o.return,V$1=h;break}V$1=o.return}}function gk(s){for(;V$1!==null;){var o=V$1;if(o===s){V$1=null;break}var h=o.sibling;if(h!==null){h.return=o.return,V$1=h;break}V$1=o.return}}function jk(s){for(;V$1!==null;){var o=V$1;try{switch(o.tag){case 0:case 11:case 15:var h=o.return;try{Qj(4,o)}catch(et){W(o,h,et)}break;case 1:var d=o.stateNode;if(typeof d.componentDidMount=="function"){var g=o.return;try{d.componentDidMount()}catch(et){W(o,g,et)}}var _=o.return;try{Rj(o)}catch(et){W(o,_,et)}break;case 5:var b=o.return;try{Rj(o)}catch(et){W(o,b,et)}}}catch(et){W(o,o.return,et)}if(o===s){V$1=null;break}var $=o.sibling;if($!==null){$.return=o.return,V$1=$;break}V$1=o.return}}var lk=Math.ceil,mk=ua.ReactCurrentDispatcher,nk=ua.ReactCurrentOwner,ok=ua.ReactCurrentBatchConfig,K=0,Q=null,Y$1=null,Z$1=0,fj=0,ej=Uf(0),T$1=0,pk=null,rh=0,qk=0,rk=0,sk=null,tk=null,fk=0,Gj=1/0,uk=null,Oi=!1,Pi=null,Ri=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R$1(){return K&6?B():Ak!==-1?Ak:Ak=B()}function yi(s){return s.mode&1?K&2&&Z$1!==0?Z$1&-Z$1:Kg.transition!==null?(Bk===0&&(Bk=yc()),Bk):(s=C,s!==0||(s=window.event,s=s===void 0?16:jd(s.type)),s):1}function gi(s,o,h,d){if(50<yk)throw yk=0,zk=null,Error(p$1(185));Ac(s,h,d),(!(K&2)||s!==Q)&&(s===Q&&(!(K&2)&&(qk|=h),T$1===4&&Ck(s,Z$1)),Dk(s,d),h===1&&K===0&&!(o.mode&1)&&(Gj=B()+500,fg&&jg()))}function Dk(s,o){var h=s.callbackNode;wc(s,o);var d=uc(s,s===Q?Z$1:0);if(d===0)h!==null&&bc(h),s.callbackNode=null,s.callbackPriority=0;else if(o=d&-d,s.callbackPriority!==o){if(h!=null&&bc(h),o===1)s.tag===0?ig(Ek.bind(null,s)):hg(Ek.bind(null,s)),Jf(function(){!(K&6)&&jg()}),h=null;else{switch(Dc(d)){case 1:h=fc;break;case 4:h=gc;break;case 16:h=hc;break;case 536870912:h=jc;break;default:h=hc}h=Fk(h,Gk.bind(null,s))}s.callbackPriority=o,s.callbackNode=h}}function Gk(s,o){if(Ak=-1,Bk=0,K&6)throw Error(p$1(327));var h=s.callbackNode;if(Hk()&&s.callbackNode!==h)return null;var d=uc(s,s===Q?Z$1:0);if(d===0)return null;if(d&30||d&s.expiredLanes||o)o=Ik(s,d);else{o=d;var g=K;K|=2;var _=Jk();(Q!==s||Z$1!==o)&&(uk=null,Gj=B()+500,Kk(s,o));do try{Lk();break}catch($){Mk(s,$)}while(!0);$g(),mk.current=_,K=g,Y$1!==null?o=0:(Q=null,Z$1=0,o=T$1)}if(o!==0){if(o===2&&(g=xc(s),g!==0&&(d=g,o=Nk(s,g))),o===1)throw h=pk,Kk(s,0),Ck(s,d),Dk(s,B()),h;if(o===6)Ck(s,d);else{if(g=s.current.alternate,!(d&30)&&!Ok(g)&&(o=Ik(s,d),o===2&&(_=xc(s),_!==0&&(d=_,o=Nk(s,_))),o===1))throw h=pk,Kk(s,0),Ck(s,d),Dk(s,B()),h;switch(s.finishedWork=g,s.finishedLanes=d,o){case 0:case 1:throw Error(p$1(345));case 2:Pk(s,tk,uk);break;case 3:if(Ck(s,d),(d&130023424)===d&&(o=fk+500-B(),10<o)){if(uc(s,0)!==0)break;if(g=s.suspendedLanes,(g&d)!==d){R$1(),s.pingedLanes|=s.suspendedLanes&g;break}s.timeoutHandle=Ff(Pk.bind(null,s,tk,uk),o);break}Pk(s,tk,uk);break;case 4:if(Ck(s,d),(d&4194240)===d)break;for(o=s.eventTimes,g=-1;0<d;){var b=31-oc(d);_=1<<b,b=o[b],b>g&&(g=b),d&=~_}if(d=g,d=B()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*lk(d/1960))-d,10<d){s.timeoutHandle=Ff(Pk.bind(null,s,tk,uk),d);break}Pk(s,tk,uk);break;case 5:Pk(s,tk,uk);break;default:throw Error(p$1(329))}}}return Dk(s,B()),s.callbackNode===h?Gk.bind(null,s):null}function Nk(s,o){var h=sk;return s.current.memoizedState.isDehydrated&&(Kk(s,o).flags|=256),s=Ik(s,o),s!==2&&(o=tk,tk=h,o!==null&&Fj(o)),s}function Fj(s){tk===null?tk=s:tk.push.apply(tk,s)}function Ok(s){for(var o=s;;){if(o.flags&16384){var h=o.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var d=0;d<h.length;d++){var g=h[d],_=g.getSnapshot;g=g.value;try{if(!He(_(),g))return!1}catch{return!1}}}if(h=o.child,o.subtreeFlags&16384&&h!==null)h.return=o,o=h;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Ck(s,o){for(o&=~rk,o&=~qk,s.suspendedLanes|=o,s.pingedLanes&=~o,s=s.expirationTimes;0<o;){var h=31-oc(o),d=1<<h;s[h]=-1,o&=~d}}function Ek(s){if(K&6)throw Error(p$1(327));Hk();var o=uc(s,0);if(!(o&1))return Dk(s,B()),null;var h=Ik(s,o);if(s.tag!==0&&h===2){var d=xc(s);d!==0&&(o=d,h=Nk(s,d))}if(h===1)throw h=pk,Kk(s,0),Ck(s,o),Dk(s,B()),h;if(h===6)throw Error(p$1(345));return s.finishedWork=s.current.alternate,s.finishedLanes=o,Pk(s,tk,uk),Dk(s,B()),null}function Qk(s,o){var h=K;K|=1;try{return s(o)}finally{K=h,K===0&&(Gj=B()+500,fg&&jg())}}function Rk(s){wk!==null&&wk.tag===0&&!(K&6)&&Hk();var o=K;K|=1;var h=ok.transition,d=C;try{if(ok.transition=null,C=1,s)return s()}finally{C=d,ok.transition=h,K=o,!(K&6)&&jg()}}function Hj(){fj=ej.current,E$1(ej)}function Kk(s,o){s.finishedWork=null,s.finishedLanes=0;var h=s.timeoutHandle;if(h!==-1&&(s.timeoutHandle=-1,Gf(h)),Y$1!==null)for(h=Y$1.return;h!==null;){var d=h;switch(wg(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&$f();break;case 3:zh(),E$1(Wf),E$1(H),Eh();break;case 5:Bh(d);break;case 4:zh();break;case 13:E$1(L$3);break;case 19:E$1(L$3);break;case 10:ah(d.type._context);break;case 22:case 23:Hj()}h=h.return}if(Q=s,Y$1=s=Pg(s.current,null),Z$1=fj=o,T$1=0,pk=null,rk=qk=rh=0,tk=sk=null,fh!==null){for(o=0;o<fh.length;o++)if(h=fh[o],d=h.interleaved,d!==null){h.interleaved=null;var g=d.next,_=h.pending;if(_!==null){var b=_.next;_.next=g,d.next=b}h.pending=d}fh=null}return s}function Mk(s,o){do{var h=Y$1;try{if($g(),Fh.current=Rh,Ih){for(var d=M.memoizedState;d!==null;){var g=d.queue;g!==null&&(g.pending=null),d=d.next}Ih=!1}if(Hh=0,O=N=M=null,Jh=!1,Kh=0,nk.current=null,h===null||h.return===null){T$1=1,pk=o,Y$1=null;break}t:{var _=s,b=h.return,$=h,et=o;if(o=Z$1,$.flags|=32768,et!==null&&typeof et=="object"&&typeof et.then=="function"){var tt=et,rt=$,nt=rt.tag;if(!(rt.mode&1)&&(nt===0||nt===11||nt===15)){var At=rt.alternate;At?(rt.updateQueue=At.updateQueue,rt.memoizedState=At.memoizedState,rt.lanes=At.lanes):(rt.updateQueue=null,rt.memoizedState=null)}var at=Ui(b);if(at!==null){at.flags&=-257,Vi(at,b,$,_,o),at.mode&1&&Si(_,tt,o),o=at,et=tt;var lt=o.updateQueue;if(lt===null){var gt=new Set;gt.add(et),o.updateQueue=gt}else lt.add(et);break t}else{if(!(o&1)){Si(_,tt,o),tj();break t}et=Error(p$1(426))}}else if(I&&$.mode&1){var _t=Ui(b);if(_t!==null){!(_t.flags&65536)&&(_t.flags|=256),Vi(_t,b,$,_,o),Jg(Ji(et,$));break t}}_=et=Ji(et,$),T$1!==4&&(T$1=2),sk===null?sk=[_]:sk.push(_),_=b;do{switch(_.tag){case 3:_.flags|=65536,o&=-o,_.lanes|=o;var ct=Ni(_,et,o);ph(_,ct);break t;case 1:$=et;var pt=_.type,dt=_.stateNode;if(!(_.flags&128)&&(typeof pt.getDerivedStateFromError=="function"||dt!==null&&typeof dt.componentDidCatch=="function"&&(Ri===null||!Ri.has(dt)))){_.flags|=65536,o&=-o,_.lanes|=o;var mt=Qi(_,$,o);ph(_,mt);break t}}_=_.return}while(_!==null)}Sk(h)}catch(Qt){o=Qt,Y$1===h&&h!==null&&(Y$1=h=h.return);continue}break}while(!0)}function Jk(){var s=mk.current;return mk.current=Rh,s===null?Rh:s}function tj(){(T$1===0||T$1===3||T$1===2)&&(T$1=4),Q===null||!(rh&268435455)&&!(qk&268435455)||Ck(Q,Z$1)}function Ik(s,o){var h=K;K|=2;var d=Jk();(Q!==s||Z$1!==o)&&(uk=null,Kk(s,o));do try{Tk();break}catch(g){Mk(s,g)}while(!0);if($g(),K=h,mk.current=d,Y$1!==null)throw Error(p$1(261));return Q=null,Z$1=0,T$1}function Tk(){for(;Y$1!==null;)Uk(Y$1)}function Lk(){for(;Y$1!==null&&!cc();)Uk(Y$1)}function Uk(s){var o=Vk(s.alternate,s,fj);s.memoizedProps=s.pendingProps,o===null?Sk(s):Y$1=o,nk.current=null}function Sk(s){var o=s;do{var h=o.alternate;if(s=o.return,o.flags&32768){if(h=Ij(h,o),h!==null){h.flags&=32767,Y$1=h;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{T$1=6,Y$1=null;return}}else if(h=Ej(h,o,fj),h!==null){Y$1=h;return}if(o=o.sibling,o!==null){Y$1=o;return}Y$1=o=s}while(o!==null);T$1===0&&(T$1=5)}function Pk(s,o,h){var d=C,g=ok.transition;try{ok.transition=null,C=1,Wk(s,o,h,d)}finally{ok.transition=g,C=d}return null}function Wk(s,o,h,d){do Hk();while(wk!==null);if(K&6)throw Error(p$1(327));h=s.finishedWork;var g=s.finishedLanes;if(h===null)return null;if(s.finishedWork=null,s.finishedLanes=0,h===s.current)throw Error(p$1(177));s.callbackNode=null,s.callbackPriority=0;var _=h.lanes|h.childLanes;if(Bc(s,_),s===Q&&(Y$1=Q=null,Z$1=0),!(h.subtreeFlags&2064)&&!(h.flags&2064)||vk||(vk=!0,Fk(hc,function(){return Hk(),null})),_=(h.flags&15990)!==0,h.subtreeFlags&15990||_){_=ok.transition,ok.transition=null;var b=C;C=1;var $=K;K|=4,nk.current=null,Oj(s,h),dk(h,s),Oe(Df),dd=!!Cf,Df=Cf=null,s.current=h,hk(h),dc(),K=$,C=b,ok.transition=_}else s.current=h;if(vk&&(vk=!1,wk=s,xk=g),_=s.pendingLanes,_===0&&(Ri=null),mc(h.stateNode),Dk(s,B()),o!==null)for(d=s.onRecoverableError,h=0;h<o.length;h++)g=o[h],d(g.value,{componentStack:g.stack,digest:g.digest});if(Oi)throw Oi=!1,s=Pi,Pi=null,s;return xk&1&&s.tag!==0&&Hk(),_=s.pendingLanes,_&1?s===zk?yk++:(yk=0,zk=s):yk=0,jg(),null}function Hk(){if(wk!==null){var s=Dc(xk),o=ok.transition,h=C;try{if(ok.transition=null,C=16>s?16:s,wk===null)var d=!1;else{if(s=wk,wk=null,xk=0,K&6)throw Error(p$1(331));var g=K;for(K|=4,V$1=s.current;V$1!==null;){var _=V$1,b=_.child;if(V$1.flags&16){var $=_.deletions;if($!==null){for(var et=0;et<$.length;et++){var tt=$[et];for(V$1=tt;V$1!==null;){var rt=V$1;switch(rt.tag){case 0:case 11:case 15:Pj(8,rt,_)}var nt=rt.child;if(nt!==null)nt.return=rt,V$1=nt;else for(;V$1!==null;){rt=V$1;var At=rt.sibling,at=rt.return;if(Sj(rt),rt===tt){V$1=null;break}if(At!==null){At.return=at,V$1=At;break}V$1=at}}}var lt=_.alternate;if(lt!==null){var gt=lt.child;if(gt!==null){lt.child=null;do{var _t=gt.sibling;gt.sibling=null,gt=_t}while(gt!==null)}}V$1=_}}if(_.subtreeFlags&2064&&b!==null)b.return=_,V$1=b;else t:for(;V$1!==null;){if(_=V$1,_.flags&2048)switch(_.tag){case 0:case 11:case 15:Pj(9,_,_.return)}var ct=_.sibling;if(ct!==null){ct.return=_.return,V$1=ct;break t}V$1=_.return}}var pt=s.current;for(V$1=pt;V$1!==null;){b=V$1;var dt=b.child;if(b.subtreeFlags&2064&&dt!==null)dt.return=b,V$1=dt;else t:for(b=pt;V$1!==null;){if($=V$1,$.flags&2048)try{switch($.tag){case 0:case 11:case 15:Qj(9,$)}}catch(Qt){W($,$.return,Qt)}if($===b){V$1=null;break t}var mt=$.sibling;if(mt!==null){mt.return=$.return,V$1=mt;break t}V$1=$.return}}if(K=g,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,s)}catch{}d=!0}return d}finally{C=h,ok.transition=o}}return!1}function Xk(s,o,h){o=Ji(h,o),o=Ni(s,o,1),s=nh(s,o,1),o=R$1(),s!==null&&(Ac(s,1,o),Dk(s,o))}function W(s,o,h){if(s.tag===3)Xk(s,s,h);else for(;o!==null;){if(o.tag===3){Xk(o,s,h);break}else if(o.tag===1){var d=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Ri===null||!Ri.has(d))){s=Ji(h,s),s=Qi(o,s,1),o=nh(o,s,1),s=R$1(),o!==null&&(Ac(o,1,s),Dk(o,s));break}}o=o.return}}function Ti(s,o,h){var d=s.pingCache;d!==null&&d.delete(o),o=R$1(),s.pingedLanes|=s.suspendedLanes&h,Q===s&&(Z$1&h)===h&&(T$1===4||T$1===3&&(Z$1&130023424)===Z$1&&500>B()-fk?Kk(s,0):rk|=h),Dk(s,o)}function Yk(s,o){o===0&&(s.mode&1?(o=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):o=1);var h=R$1();s=ih(s,o),s!==null&&(Ac(s,o,h),Dk(s,h))}function uj(s){var o=s.memoizedState,h=0;o!==null&&(h=o.retryLane),Yk(s,h)}function bk(s,o){var h=0;switch(s.tag){case 13:var d=s.stateNode,g=s.memoizedState;g!==null&&(h=g.retryLane);break;case 19:d=s.stateNode;break;default:throw Error(p$1(314))}d!==null&&d.delete(o),Yk(s,h)}var Vk;Vk=function(s,o,h){if(s!==null)if(s.memoizedProps!==o.pendingProps||Wf.current)dh=!0;else{if(!(s.lanes&h)&&!(o.flags&128))return dh=!1,yj(s,o,h);dh=!!(s.flags&131072)}else dh=!1,I&&o.flags&1048576&&ug(o,ng,o.index);switch(o.lanes=0,o.tag){case 2:var d=o.type;ij(s,o),s=o.pendingProps;var g=Yf(o,H.current);ch(o,h),g=Nh(null,o,d,s,g,h);var _=Sh();return o.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,Zf(d)?(_=!0,cg(o)):_=!1,o.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,kh(o),g.updater=Ei,o.stateNode=g,g._reactInternals=o,Ii(o,d,s,h),o=jj(null,o,d,!0,_,h)):(o.tag=0,I&&_&&vg(o),Xi(null,o,g,h),o=o.child),o;case 16:d=o.elementType;t:{switch(ij(s,o),s=o.pendingProps,g=d._init,d=g(d._payload),o.type=d,g=o.tag=Zk(d),s=Ci(d,s),g){case 0:o=cj(null,o,d,s,h);break t;case 1:o=hj(null,o,d,s,h);break t;case 11:o=Yi(null,o,d,s,h);break t;case 14:o=$i(null,o,d,Ci(d.type,s),h);break t}throw Error(p$1(306,d,""))}return o;case 0:return d=o.type,g=o.pendingProps,g=o.elementType===d?g:Ci(d,g),cj(s,o,d,g,h);case 1:return d=o.type,g=o.pendingProps,g=o.elementType===d?g:Ci(d,g),hj(s,o,d,g,h);case 3:t:{if(kj(o),s===null)throw Error(p$1(387));d=o.pendingProps,_=o.memoizedState,g=_.element,lh(s,o),qh(o,d,null,h);var b=o.memoizedState;if(d=b.element,_.isDehydrated)if(_={element:d,isDehydrated:!1,cache:b.cache,pendingSuspenseBoundaries:b.pendingSuspenseBoundaries,transitions:b.transitions},o.updateQueue.baseState=_,o.memoizedState=_,o.flags&256){g=Ji(Error(p$1(423)),o),o=lj(s,o,d,h,g);break t}else if(d!==g){g=Ji(Error(p$1(424)),o),o=lj(s,o,d,h,g);break t}else for(yg=Lf(o.stateNode.containerInfo.firstChild),xg=o,I=!0,zg=null,h=Vg(o,null,d,h),o.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(Ig(),d===g){o=Zi(s,o,h);break t}Xi(s,o,d,h)}o=o.child}return o;case 5:return Ah(o),s===null&&Eg(o),d=o.type,g=o.pendingProps,_=s!==null?s.memoizedProps:null,b=g.children,Ef(d,g)?b=null:_!==null&&Ef(d,_)&&(o.flags|=32),gj(s,o),Xi(s,o,b,h),o.child;case 6:return s===null&&Eg(o),null;case 13:return oj(s,o,h);case 4:return yh(o,o.stateNode.containerInfo),d=o.pendingProps,s===null?o.child=Ug(o,null,d,h):Xi(s,o,d,h),o.child;case 11:return d=o.type,g=o.pendingProps,g=o.elementType===d?g:Ci(d,g),Yi(s,o,d,g,h);case 7:return Xi(s,o,o.pendingProps,h),o.child;case 8:return Xi(s,o,o.pendingProps.children,h),o.child;case 12:return Xi(s,o,o.pendingProps.children,h),o.child;case 10:t:{if(d=o.type._context,g=o.pendingProps,_=o.memoizedProps,b=g.value,G(Wg,d._currentValue),d._currentValue=b,_!==null)if(He(_.value,b)){if(_.children===g.children&&!Wf.current){o=Zi(s,o,h);break t}}else for(_=o.child,_!==null&&(_.return=o);_!==null;){var $=_.dependencies;if($!==null){b=_.child;for(var et=$.firstContext;et!==null;){if(et.context===d){if(_.tag===1){et=mh(-1,h&-h),et.tag=2;var tt=_.updateQueue;if(tt!==null){tt=tt.shared;var rt=tt.pending;rt===null?et.next=et:(et.next=rt.next,rt.next=et),tt.pending=et}}_.lanes|=h,et=_.alternate,et!==null&&(et.lanes|=h),bh(_.return,h,o),$.lanes|=h;break}et=et.next}}else if(_.tag===10)b=_.type===o.type?null:_.child;else if(_.tag===18){if(b=_.return,b===null)throw Error(p$1(341));b.lanes|=h,$=b.alternate,$!==null&&($.lanes|=h),bh(b,h,o),b=_.sibling}else b=_.child;if(b!==null)b.return=_;else for(b=_;b!==null;){if(b===o){b=null;break}if(_=b.sibling,_!==null){_.return=b.return,b=_;break}b=b.return}_=b}Xi(s,o,g.children,h),o=o.child}return o;case 9:return g=o.type,d=o.pendingProps.children,ch(o,h),g=eh(g),d=d(g),o.flags|=1,Xi(s,o,d,h),o.child;case 14:return d=o.type,g=Ci(d,o.pendingProps),g=Ci(d.type,g),$i(s,o,d,g,h);case 15:return bj(s,o,o.type,o.pendingProps,h);case 17:return d=o.type,g=o.pendingProps,g=o.elementType===d?g:Ci(d,g),ij(s,o),o.tag=1,Zf(d)?(s=!0,cg(o)):s=!1,ch(o,h),Gi(o,d,g),Ii(o,d,g,h),jj(null,o,d,!0,s,h);case 19:return xj(s,o,h);case 22:return dj(s,o,h)}throw Error(p$1(156,o.tag))};function Fk(s,o){return ac(s,o)}function $k(s,o,h,d){this.tag=s,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(s,o,h,d){return new $k(s,o,h,d)}function aj(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Zk(s){if(typeof s=="function")return aj(s)?1:0;if(s!=null){if(s=s.$$typeof,s===Da)return 11;if(s===Ga)return 14}return 2}function Pg(s,o){var h=s.alternate;return h===null?(h=Bg(s.tag,o,s.key,s.mode),h.elementType=s.elementType,h.type=s.type,h.stateNode=s.stateNode,h.alternate=s,s.alternate=h):(h.pendingProps=o,h.type=s.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=s.flags&14680064,h.childLanes=s.childLanes,h.lanes=s.lanes,h.child=s.child,h.memoizedProps=s.memoizedProps,h.memoizedState=s.memoizedState,h.updateQueue=s.updateQueue,o=s.dependencies,h.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},h.sibling=s.sibling,h.index=s.index,h.ref=s.ref,h}function Rg(s,o,h,d,g,_){var b=2;if(d=s,typeof s=="function")aj(s)&&(b=1);else if(typeof s=="string")b=5;else t:switch(s){case ya:return Tg(h.children,g,_,o);case za:b=8,g|=8;break;case Aa:return s=Bg(12,h,o,g|2),s.elementType=Aa,s.lanes=_,s;case Ea:return s=Bg(13,h,o,g),s.elementType=Ea,s.lanes=_,s;case Fa:return s=Bg(19,h,o,g),s.elementType=Fa,s.lanes=_,s;case Ia:return pj(h,g,_,o);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case Ba:b=10;break t;case Ca:b=9;break t;case Da:b=11;break t;case Ga:b=14;break t;case Ha:b=16,d=null;break t}throw Error(p$1(130,s==null?s:typeof s,""))}return o=Bg(b,h,o,g),o.elementType=s,o.type=d,o.lanes=_,o}function Tg(s,o,h,d){return s=Bg(7,s,d,o),s.lanes=h,s}function pj(s,o,h,d){return s=Bg(22,s,d,o),s.elementType=Ia,s.lanes=h,s.stateNode={isHidden:!1},s}function Qg(s,o,h){return s=Bg(6,s,null,o),s.lanes=h,s}function Sg(s,o,h){return o=Bg(4,s.children!==null?s.children:[],s.key,o),o.lanes=h,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}function al(s,o,h,d,g){this.tag=o,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=d,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function bl(s,o,h,d,g,_,b,$,et){return s=new al(s,o,h,$,et),o===1?(o=1,_===!0&&(o|=8)):o=0,_=Bg(3,null,null,o),s.current=_,_.stateNode=s,_.memoizedState={element:d,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh(_),s}function cl(s,o,h){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:d==null?null:""+d,children:s,containerInfo:o,implementation:h}}function dl(s){if(!s)return Vf;s=s._reactInternals;t:{if(Vb(s)!==s||s.tag!==1)throw Error(p$1(170));var o=s;do{switch(o.tag){case 3:o=o.stateNode.context;break t;case 1:if(Zf(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break t}}o=o.return}while(o!==null);throw Error(p$1(171))}if(s.tag===1){var h=s.type;if(Zf(h))return bg(s,h,o)}return o}function el(s,o,h,d,g,_,b,$,et){return s=bl(h,d,!0,s,g,_,b,$,et),s.context=dl(null),h=s.current,d=R$1(),g=yi(h),_=mh(d,g),_.callback=o??null,nh(h,_,g),s.current.lanes=g,Ac(s,g,d),Dk(s,d),s}function fl(s,o,h,d){var g=o.current,_=R$1(),b=yi(g);return h=dl(h),o.context===null?o.context=h:o.pendingContext=h,o=mh(_,b),o.payload={element:s},d=d===void 0?null:d,d!==null&&(o.callback=d),s=nh(g,o,b),s!==null&&(gi(s,g,b,_),oh(s,g,b)),b}function gl(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function hl(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var h=s.retryLane;s.retryLane=h!==0&&h<o?h:o}}function il(s,o){hl(s,o),(s=s.alternate)&&hl(s,o)}function jl(){return null}var kl=typeof reportError=="function"?reportError:function(s){console.error(s)};function ll(s){this._internalRoot=s}ml.prototype.render=ll.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(p$1(409));fl(s,o,null,null)};ml.prototype.unmount=ll.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;Rk(function(){fl(null,s,null,null)}),o[uf]=null}};function ml(s){this._internalRoot=s}ml.prototype.unstable_scheduleHydration=function(s){if(s){var o=Hc();s={blockedOn:null,target:s,priority:o};for(var h=0;h<Qc.length&&o!==0&&o<Qc[h].priority;h++);Qc.splice(h,0,s),h===0&&Vc(s)}};function nl(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function ol(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function pl(){}function ql(s,o,h,d,g){if(g){if(typeof d=="function"){var _=d;d=function(){var tt=gl(b);_.call(tt)}}var b=el(o,d,s,0,null,!1,!1,"",pl);return s._reactRootContainer=b,s[uf]=b.current,sf(s.nodeType===8?s.parentNode:s),Rk(),b}for(;g=s.lastChild;)s.removeChild(g);if(typeof d=="function"){var $=d;d=function(){var tt=gl(et);$.call(tt)}}var et=bl(s,0,!1,null,null,!1,!1,"",pl);return s._reactRootContainer=et,s[uf]=et.current,sf(s.nodeType===8?s.parentNode:s),Rk(function(){fl(o,et,h,d)}),et}function rl(s,o,h,d,g){var _=h._reactRootContainer;if(_){var b=_;if(typeof g=="function"){var $=g;g=function(){var et=gl(b);$.call(et)}}fl(o,b,s,g)}else b=ql(h,o,s,g,d);return gl(b)}Ec=function(s){switch(s.tag){case 3:var o=s.stateNode;if(o.current.memoizedState.isDehydrated){var h=tc(o.pendingLanes);h!==0&&(Cc(o,h|1),Dk(o,B()),!(K&6)&&(Gj=B()+500,jg()))}break;case 13:Rk(function(){var d=ih(s,1);if(d!==null){var g=R$1();gi(d,s,1,g)}}),il(s,1)}};Fc=function(s){if(s.tag===13){var o=ih(s,134217728);if(o!==null){var h=R$1();gi(o,s,134217728,h)}il(s,134217728)}};Gc=function(s){if(s.tag===13){var o=yi(s),h=ih(s,o);if(h!==null){var d=R$1();gi(h,s,o,d)}il(s,o)}};Hc=function(){return C};Ic=function(s,o){var h=C;try{return C=s,o()}finally{C=h}};yb=function(s,o,h){switch(o){case"input":if(bb(s,h),o=h.name,h.type==="radio"&&o!=null){for(h=s;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<h.length;o++){var d=h[o];if(d!==s&&d.form===s.form){var g=Db(d);if(!g)throw Error(p$1(90));Wa(d),bb(d,g)}}}break;case"textarea":ib(s,h);break;case"select":o=h.value,o!=null&&fb(s,!!h.multiple,o,!1)}};Gb=Qk;Hb=Rk;var sl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Qk]},tl={findFiberByHostInstance:Wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ul={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=Zb(s),s===null?null:s.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||jl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{kc=vl.inject(ul),lc=vl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl;reactDom_production_min.createPortal=function(s,o){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nl(o))throw Error(p$1(200));return cl(s,o,null,h)};reactDom_production_min.createRoot=function(s,o){if(!nl(s))throw Error(p$1(299));var h=!1,d="",g=kl;return o!=null&&(o.unstable_strictMode===!0&&(h=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onRecoverableError!==void 0&&(g=o.onRecoverableError)),o=bl(s,1,!1,null,null,h,!1,d,g),s[uf]=o.current,sf(s.nodeType===8?s.parentNode:s),new ll(o)};reactDom_production_min.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(p$1(188)):(s=Object.keys(s).join(","),Error(p$1(268,s)));return s=Zb(o),s=s===null?null:s.stateNode,s};reactDom_production_min.flushSync=function(s){return Rk(s)};reactDom_production_min.hydrate=function(s,o,h){if(!ol(o))throw Error(p$1(200));return rl(null,s,o,!0,h)};reactDom_production_min.hydrateRoot=function(s,o,h){if(!nl(s))throw Error(p$1(405));var d=h!=null&&h.hydratedSources||null,g=!1,_="",b=kl;if(h!=null&&(h.unstable_strictMode===!0&&(g=!0),h.identifierPrefix!==void 0&&(_=h.identifierPrefix),h.onRecoverableError!==void 0&&(b=h.onRecoverableError)),o=el(o,null,s,1,h??null,g,!1,_,b),s[uf]=o.current,sf(s),d)for(s=0;s<d.length;s++)h=d[s],g=h._getVersion,g=g(h._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[h,g]:o.mutableSourceEagerHydrationData.push(h,g);return new ml(o)};reactDom_production_min.render=function(s,o,h){if(!ol(o))throw Error(p$1(200));return rl(null,s,o,!1,h)};reactDom_production_min.unmountComponentAtNode=function(s){if(!ol(s))throw Error(p$1(40));return s._reactRootContainer?(Rk(function(){rl(null,null,s,!1,function(){s._reactRootContainer=null,s[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Qk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(s,o,h,d){if(!ol(h))throw Error(p$1(200));if(s==null||s._reactInternals===void 0)throw Error(p$1(38));return rl(s,o,h,!1,d)};reactDom_production_min.version="18.3.1-next-f1338f8080-20240426";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(s){console.error(s)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports,m$1=reactDomExports;client.createRoot=m$1.createRoot,client.hydrateRoot=m$1.hydrateRoot;function commonjsRequire$1(s){throw new Error('Could not dynamically require "'+s+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var UPNG$1={exports:{}},common$3={},hasRequiredCommon$1;function requireCommon$1(){return hasRequiredCommon$1||(hasRequiredCommon$1=1,function(s){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function h(_,b){return Object.prototype.hasOwnProperty.call(_,b)}s.assign=function(_){for(var b=Array.prototype.slice.call(arguments,1);b.length;){var $=b.shift();if($){if(typeof $!="object")throw new TypeError($+"must be non-object");for(var et in $)h($,et)&&(_[et]=$[et])}}return _},s.shrinkBuf=function(_,b){return _.length===b?_:_.subarray?_.subarray(0,b):(_.length=b,_)};var d={arraySet:function(_,b,$,et,tt){if(b.subarray&&_.subarray){_.set(b.subarray($,$+et),tt);return}for(var rt=0;rt<et;rt++)_[tt+rt]=b[$+rt]},flattenChunks:function(_){var b,$,et,tt,rt,nt;for(et=0,b=0,$=_.length;b<$;b++)et+=_[b].length;for(nt=new Uint8Array(et),tt=0,b=0,$=_.length;b<$;b++)rt=_[b],nt.set(rt,tt),tt+=rt.length;return nt}},g={arraySet:function(_,b,$,et,tt){for(var rt=0;rt<et;rt++)_[tt+rt]=b[$+rt]},flattenChunks:function(_){return[].concat.apply([],_)}};s.setTyped=function(_){_?(s.Buf8=Uint8Array,s.Buf16=Uint16Array,s.Buf32=Int32Array,s.assign(s,d)):(s.Buf8=Array,s.Buf16=Array,s.Buf32=Array,s.assign(s,g))},s.setTyped(o)}(common$3)),common$3}var deflate$5={},deflate$4={},trees$2={},hasRequiredTrees$1;function requireTrees$1(){if(hasRequiredTrees$1)return trees$2;hasRequiredTrees$1=1;var s=requireCommon$1(),o=4,h=0,d=1,g=2;function _(Ft){for(var sr=Ft.length;--sr>=0;)Ft[sr]=0}var b=0,$=1,et=2,tt=3,rt=258,nt=29,At=256,at=At+1+nt,lt=30,gt=19,_t=2*at+1,ct=15,pt=16,dt=7,mt=256,Qt=16,xt=17,bt=18,kt=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Lt=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Ht=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Pt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],jt=512,Vt=new Array((at+2)*2);_(Vt);var Xt=new Array(lt*2);_(Xt);var nr=new Array(jt);_(nr);var Ar=new Array(rt-tt+1);_(Ar);var ar=new Array(nt);_(ar);var Wt=new Array(lt);_(Wt);function pr(Ft,sr,hr,br,Gt){this.static_tree=Ft,this.extra_bits=sr,this.extra_base=hr,this.elems=br,this.max_length=Gt,this.has_stree=Ft&&Ft.length}var dr,yr,Br;function Lr(Ft,sr){this.dyn_tree=Ft,this.max_code=0,this.stat_desc=sr}function Ur(Ft){return Ft<256?nr[Ft]:nr[256+(Ft>>>7)]}function or(Ft,sr){Ft.pending_buf[Ft.pending++]=sr&255,Ft.pending_buf[Ft.pending++]=sr>>>8&255}function mr(Ft,sr,hr){Ft.bi_valid>pt-hr?(Ft.bi_buf|=sr<<Ft.bi_valid&65535,or(Ft,Ft.bi_buf),Ft.bi_buf=sr>>pt-Ft.bi_valid,Ft.bi_valid+=hr-pt):(Ft.bi_buf|=sr<<Ft.bi_valid&65535,Ft.bi_valid+=hr)}function Ir(Ft,sr,hr){mr(Ft,hr[sr*2],hr[sr*2+1])}function ur(Ft,sr){var hr=0;do hr|=Ft&1,Ft>>>=1,hr<<=1;while(--sr>0);return hr>>>1}function lr(Ft){Ft.bi_valid===16?(or(Ft,Ft.bi_buf),Ft.bi_buf=0,Ft.bi_valid=0):Ft.bi_valid>=8&&(Ft.pending_buf[Ft.pending++]=Ft.bi_buf&255,Ft.bi_buf>>=8,Ft.bi_valid-=8)}function Xr(Ft,sr){var hr=sr.dyn_tree,br=sr.max_code,Gt=sr.stat_desc.static_tree,ir=sr.stat_desc.has_stree,yt=sr.stat_desc.extra_bits,gr=sr.stat_desc.extra_base,Hr=sr.stat_desc.max_length,ut,tr,rr,Ct,Nt,Jt,Rr=0;for(Ct=0;Ct<=ct;Ct++)Ft.bl_count[Ct]=0;for(hr[Ft.heap[Ft.heap_max]*2+1]=0,ut=Ft.heap_max+1;ut<_t;ut++)tr=Ft.heap[ut],Ct=hr[hr[tr*2+1]*2+1]+1,Ct>Hr&&(Ct=Hr,Rr++),hr[tr*2+1]=Ct,!(tr>br)&&(Ft.bl_count[Ct]++,Nt=0,tr>=gr&&(Nt=yt[tr-gr]),Jt=hr[tr*2],Ft.opt_len+=Jt*(Ct+Nt),ir&&(Ft.static_len+=Jt*(Gt[tr*2+1]+Nt)));if(Rr!==0){do{for(Ct=Hr-1;Ft.bl_count[Ct]===0;)Ct--;Ft.bl_count[Ct]--,Ft.bl_count[Ct+1]+=2,Ft.bl_count[Hr]--,Rr-=2}while(Rr>0);for(Ct=Hr;Ct!==0;Ct--)for(tr=Ft.bl_count[Ct];tr!==0;)rr=Ft.heap[--ut],!(rr>br)&&(hr[rr*2+1]!==Ct&&(Ft.opt_len+=(Ct-hr[rr*2+1])*hr[rr*2],hr[rr*2+1]=Ct),tr--)}}function zr(Ft,sr,hr){var br=new Array(ct+1),Gt=0,ir,yt;for(ir=1;ir<=ct;ir++)br[ir]=Gt=Gt+hr[ir-1]<<1;for(yt=0;yt<=sr;yt++){var gr=Ft[yt*2+1];gr!==0&&(Ft[yt*2]=ur(br[gr]++,gr))}}function kr(){var Ft,sr,hr,br,Gt,ir=new Array(ct+1);for(hr=0,br=0;br<nt-1;br++)for(ar[br]=hr,Ft=0;Ft<1<<kt[br];Ft++)Ar[hr++]=br;for(Ar[hr-1]=br,Gt=0,br=0;br<16;br++)for(Wt[br]=Gt,Ft=0;Ft<1<<Lt[br];Ft++)nr[Gt++]=br;for(Gt>>=7;br<lt;br++)for(Wt[br]=Gt<<7,Ft=0;Ft<1<<Lt[br]-7;Ft++)nr[256+Gt++]=br;for(sr=0;sr<=ct;sr++)ir[sr]=0;for(Ft=0;Ft<=143;)Vt[Ft*2+1]=8,Ft++,ir[8]++;for(;Ft<=255;)Vt[Ft*2+1]=9,Ft++,ir[9]++;for(;Ft<=279;)Vt[Ft*2+1]=7,Ft++,ir[7]++;for(;Ft<=287;)Vt[Ft*2+1]=8,Ft++,ir[8]++;for(zr(Vt,at+1,ir),Ft=0;Ft<lt;Ft++)Xt[Ft*2+1]=5,Xt[Ft*2]=ur(Ft,5);dr=new pr(Vt,kt,At+1,at,ct),yr=new pr(Xt,Lt,0,lt,ct),Br=new pr(new Array(0),Ht,0,gt,dt)}function Tr(Ft){var sr;for(sr=0;sr<at;sr++)Ft.dyn_ltree[sr*2]=0;for(sr=0;sr<lt;sr++)Ft.dyn_dtree[sr*2]=0;for(sr=0;sr<gt;sr++)Ft.bl_tree[sr*2]=0;Ft.dyn_ltree[mt*2]=1,Ft.opt_len=Ft.static_len=0,Ft.last_lit=Ft.matches=0}function Mr(Ft){Ft.bi_valid>8?or(Ft,Ft.bi_buf):Ft.bi_valid>0&&(Ft.pending_buf[Ft.pending++]=Ft.bi_buf),Ft.bi_buf=0,Ft.bi_valid=0}function nn(Ft,sr,hr,br){Mr(Ft),or(Ft,hr),or(Ft,~hr),s.arraySet(Ft.pending_buf,Ft.window,sr,hr,Ft.pending),Ft.pending+=hr}function jr(Ft,sr,hr,br){var Gt=sr*2,ir=hr*2;return Ft[Gt]<Ft[ir]||Ft[Gt]===Ft[ir]&&br[sr]<=br[hr]}function Pr(Ft,sr,hr){for(var br=Ft.heap[hr],Gt=hr<<1;Gt<=Ft.heap_len&&(Gt<Ft.heap_len&&jr(sr,Ft.heap[Gt+1],Ft.heap[Gt],Ft.depth)&&Gt++,!jr(sr,br,Ft.heap[Gt],Ft.depth));)Ft.heap[hr]=Ft.heap[Gt],hr=Gt,Gt<<=1;Ft.heap[hr]=br}function $r(Ft,sr,hr){var br,Gt,ir=0,yt,gr;if(Ft.last_lit!==0)do br=Ft.pending_buf[Ft.d_buf+ir*2]<<8|Ft.pending_buf[Ft.d_buf+ir*2+1],Gt=Ft.pending_buf[Ft.l_buf+ir],ir++,br===0?Ir(Ft,Gt,sr):(yt=Ar[Gt],Ir(Ft,yt+At+1,sr),gr=kt[yt],gr!==0&&(Gt-=ar[yt],mr(Ft,Gt,gr)),br--,yt=Ur(br),Ir(Ft,yt,hr),gr=Lt[yt],gr!==0&&(br-=Wt[yt],mr(Ft,br,gr)));while(ir<Ft.last_lit);Ir(Ft,mt,sr)}function Cr(Ft,sr){var hr=sr.dyn_tree,br=sr.stat_desc.static_tree,Gt=sr.stat_desc.has_stree,ir=sr.stat_desc.elems,yt,gr,Hr=-1,ut;for(Ft.heap_len=0,Ft.heap_max=_t,yt=0;yt<ir;yt++)hr[yt*2]!==0?(Ft.heap[++Ft.heap_len]=Hr=yt,Ft.depth[yt]=0):hr[yt*2+1]=0;for(;Ft.heap_len<2;)ut=Ft.heap[++Ft.heap_len]=Hr<2?++Hr:0,hr[ut*2]=1,Ft.depth[ut]=0,Ft.opt_len--,Gt&&(Ft.static_len-=br[ut*2+1]);for(sr.max_code=Hr,yt=Ft.heap_len>>1;yt>=1;yt--)Pr(Ft,hr,yt);ut=ir;do yt=Ft.heap[1],Ft.heap[1]=Ft.heap[Ft.heap_len--],Pr(Ft,hr,1),gr=Ft.heap[1],Ft.heap[--Ft.heap_max]=yt,Ft.heap[--Ft.heap_max]=gr,hr[ut*2]=hr[yt*2]+hr[gr*2],Ft.depth[ut]=(Ft.depth[yt]>=Ft.depth[gr]?Ft.depth[yt]:Ft.depth[gr])+1,hr[yt*2+1]=hr[gr*2+1]=ut,Ft.heap[1]=ut++,Pr(Ft,hr,1);while(Ft.heap_len>=2);Ft.heap[--Ft.heap_max]=Ft.heap[1],Xr(Ft,sr),zr(hr,Hr,Ft.bl_count)}function tn(Ft,sr,hr){var br,Gt=-1,ir,yt=sr[0*2+1],gr=0,Hr=7,ut=4;for(yt===0&&(Hr=138,ut=3),sr[(hr+1)*2+1]=65535,br=0;br<=hr;br++)ir=yt,yt=sr[(br+1)*2+1],!(++gr<Hr&&ir===yt)&&(gr<ut?Ft.bl_tree[ir*2]+=gr:ir!==0?(ir!==Gt&&Ft.bl_tree[ir*2]++,Ft.bl_tree[Qt*2]++):gr<=10?Ft.bl_tree[xt*2]++:Ft.bl_tree[bt*2]++,gr=0,Gt=ir,yt===0?(Hr=138,ut=3):ir===yt?(Hr=6,ut=3):(Hr=7,ut=4))}function An(Ft,sr,hr){var br,Gt=-1,ir,yt=sr[0*2+1],gr=0,Hr=7,ut=4;for(yt===0&&(Hr=138,ut=3),br=0;br<=hr;br++)if(ir=yt,yt=sr[(br+1)*2+1],!(++gr<Hr&&ir===yt)){if(gr<ut)do Ir(Ft,ir,Ft.bl_tree);while(--gr!==0);else ir!==0?(ir!==Gt&&(Ir(Ft,ir,Ft.bl_tree),gr--),Ir(Ft,Qt,Ft.bl_tree),mr(Ft,gr-3,2)):gr<=10?(Ir(Ft,xt,Ft.bl_tree),mr(Ft,gr-3,3)):(Ir(Ft,bt,Ft.bl_tree),mr(Ft,gr-11,7));gr=0,Gt=ir,yt===0?(Hr=138,ut=3):ir===yt?(Hr=6,ut=3):(Hr=7,ut=4)}}function Jr(Ft){var sr;for(tn(Ft,Ft.dyn_ltree,Ft.l_desc.max_code),tn(Ft,Ft.dyn_dtree,Ft.d_desc.max_code),Cr(Ft,Ft.bl_desc),sr=gt-1;sr>=3&&Ft.bl_tree[Pt[sr]*2+1]===0;sr--);return Ft.opt_len+=3*(sr+1)+5+5+4,sr}function Dr(Ft,sr,hr,br){var Gt;for(mr(Ft,sr-257,5),mr(Ft,hr-1,5),mr(Ft,br-4,4),Gt=0;Gt<br;Gt++)mr(Ft,Ft.bl_tree[Pt[Gt]*2+1],3);An(Ft,Ft.dyn_ltree,sr-1),An(Ft,Ft.dyn_dtree,hr-1)}function on(Ft){var sr=4093624447,hr;for(hr=0;hr<=31;hr++,sr>>>=1)if(sr&1&&Ft.dyn_ltree[hr*2]!==0)return h;if(Ft.dyn_ltree[9*2]!==0||Ft.dyn_ltree[10*2]!==0||Ft.dyn_ltree[13*2]!==0)return d;for(hr=32;hr<At;hr++)if(Ft.dyn_ltree[hr*2]!==0)return d;return h}var qr=!1;function Yr(Ft){qr||(kr(),qr=!0),Ft.l_desc=new Lr(Ft.dyn_ltree,dr),Ft.d_desc=new Lr(Ft.dyn_dtree,yr),Ft.bl_desc=new Lr(Ft.bl_tree,Br),Ft.bi_buf=0,Ft.bi_valid=0,Tr(Ft)}function Wr(Ft,sr,hr,br){mr(Ft,(b<<1)+(br?1:0),3),nn(Ft,sr,hr)}function rn(Ft){mr(Ft,$<<1,3),Ir(Ft,mt,Vt),lr(Ft)}function Nr(Ft,sr,hr,br){var Gt,ir,yt=0;Ft.level>0?(Ft.strm.data_type===g&&(Ft.strm.data_type=on(Ft)),Cr(Ft,Ft.l_desc),Cr(Ft,Ft.d_desc),yt=Jr(Ft),Gt=Ft.opt_len+3+7>>>3,ir=Ft.static_len+3+7>>>3,ir<=Gt&&(Gt=ir)):Gt=ir=hr+5,hr+4<=Gt&&sr!==-1?Wr(Ft,sr,hr,br):Ft.strategy===o||ir===Gt?(mr(Ft,($<<1)+(br?1:0),3),$r(Ft,Vt,Xt)):(mr(Ft,(et<<1)+(br?1:0),3),Dr(Ft,Ft.l_desc.max_code+1,Ft.d_desc.max_code+1,yt+1),$r(Ft,Ft.dyn_ltree,Ft.dyn_dtree)),Tr(Ft),br&&Mr(Ft)}function en(Ft,sr,hr){return Ft.pending_buf[Ft.d_buf+Ft.last_lit*2]=sr>>>8&255,Ft.pending_buf[Ft.d_buf+Ft.last_lit*2+1]=sr&255,Ft.pending_buf[Ft.l_buf+Ft.last_lit]=hr&255,Ft.last_lit++,sr===0?Ft.dyn_ltree[hr*2]++:(Ft.matches++,sr--,Ft.dyn_ltree[(Ar[hr]+At+1)*2]++,Ft.dyn_dtree[Ur(sr)*2]++),Ft.last_lit===Ft.lit_bufsize-1}return trees$2._tr_init=Yr,trees$2._tr_stored_block=Wr,trees$2._tr_flush_block=Nr,trees$2._tr_tally=en,trees$2._tr_align=rn,trees$2}var adler32_1$3,hasRequiredAdler32$1;function requireAdler32$1(){if(hasRequiredAdler32$1)return adler32_1$3;hasRequiredAdler32$1=1;function s(o,h,d,g){for(var _=o&65535|0,b=o>>>16&65535|0,$=0;d!==0;){$=d>2e3?2e3:d,d-=$;do _=_+h[g++]|0,b=b+_|0;while(--$);_%=65521,b%=65521}return _|b<<16|0}return adler32_1$3=s,adler32_1$3}var crc32_1$3,hasRequiredCrc32$1;function requireCrc32$1(){if(hasRequiredCrc32$1)return crc32_1$3;hasRequiredCrc32$1=1;function s(){for(var d,g=[],_=0;_<256;_++){d=_;for(var b=0;b<8;b++)d=d&1?3988292384^d>>>1:d>>>1;g[_]=d}return g}var o=s();function h(d,g,_,b){var $=o,et=b+_;d^=-1;for(var tt=b;tt<et;tt++)d=d>>>8^$[(d^g[tt])&255];return d^-1}return crc32_1$3=h,crc32_1$3}var messages$3,hasRequiredMessages$1;function requireMessages$1(){return hasRequiredMessages$1||(hasRequiredMessages$1=1,messages$3={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}),messages$3}var hasRequiredDeflate$3;function requireDeflate$3(){if(hasRequiredDeflate$3)return deflate$4;hasRequiredDeflate$3=1;var s=requireCommon$1(),o=requireTrees$1(),h=requireAdler32$1(),d=requireCrc32$1(),g=requireMessages$1(),_=0,b=1,$=3,et=4,tt=5,rt=0,nt=1,At=-2,at=-3,lt=-5,gt=-1,_t=1,ct=2,pt=3,dt=4,mt=0,Qt=2,xt=8,bt=9,kt=15,Lt=8,Ht=29,Pt=256,jt=Pt+1+Ht,Vt=30,Xt=19,nr=2*jt+1,Ar=15,ar=3,Wt=258,pr=Wt+ar+1,dr=32,yr=42,Br=69,Lr=73,Ur=91,or=103,mr=113,Ir=666,ur=1,lr=2,Xr=3,zr=4,kr=3;function Tr(ut,tr){return ut.msg=g[tr],tr}function Mr(ut){return(ut<<1)-(ut>4?9:0)}function nn(ut){for(var tr=ut.length;--tr>=0;)ut[tr]=0}function jr(ut){var tr=ut.state,rr=tr.pending;rr>ut.avail_out&&(rr=ut.avail_out),rr!==0&&(s.arraySet(ut.output,tr.pending_buf,tr.pending_out,rr,ut.next_out),ut.next_out+=rr,tr.pending_out+=rr,ut.total_out+=rr,ut.avail_out-=rr,tr.pending-=rr,tr.pending===0&&(tr.pending_out=0))}function Pr(ut,tr){o._tr_flush_block(ut,ut.block_start>=0?ut.block_start:-1,ut.strstart-ut.block_start,tr),ut.block_start=ut.strstart,jr(ut.strm)}function $r(ut,tr){ut.pending_buf[ut.pending++]=tr}function Cr(ut,tr){ut.pending_buf[ut.pending++]=tr>>>8&255,ut.pending_buf[ut.pending++]=tr&255}function tn(ut,tr,rr,Ct){var Nt=ut.avail_in;return Nt>Ct&&(Nt=Ct),Nt===0?0:(ut.avail_in-=Nt,s.arraySet(tr,ut.input,ut.next_in,Nt,rr),ut.state.wrap===1?ut.adler=h(ut.adler,tr,Nt,rr):ut.state.wrap===2&&(ut.adler=d(ut.adler,tr,Nt,rr)),ut.next_in+=Nt,ut.total_in+=Nt,Nt)}function An(ut,tr){var rr=ut.max_chain_length,Ct=ut.strstart,Nt,Jt,Rr=ut.prev_length,wt=ut.nice_match,ot=ut.strstart>ut.w_size-pr?ut.strstart-(ut.w_size-pr):0,st=ut.window,ht=ut.w_mask,vt=ut.prev,Ut=ut.strstart+Wt,Ot=st[Ct+Rr-1],zt=st[Ct+Rr];ut.prev_length>=ut.good_match&&(rr>>=2),wt>ut.lookahead&&(wt=ut.lookahead);do if(Nt=tr,!(st[Nt+Rr]!==zt||st[Nt+Rr-1]!==Ot||st[Nt]!==st[Ct]||st[++Nt]!==st[Ct+1])){Ct+=2,Nt++;do;while(st[++Ct]===st[++Nt]&&st[++Ct]===st[++Nt]&&st[++Ct]===st[++Nt]&&st[++Ct]===st[++Nt]&&st[++Ct]===st[++Nt]&&st[++Ct]===st[++Nt]&&st[++Ct]===st[++Nt]&&st[++Ct]===st[++Nt]&&Ct<Ut);if(Jt=Wt-(Ut-Ct),Ct=Ut-Wt,Jt>Rr){if(ut.match_start=tr,Rr=Jt,Jt>=wt)break;Ot=st[Ct+Rr-1],zt=st[Ct+Rr]}}while((tr=vt[tr&ht])>ot&&--rr!==0);return Rr<=ut.lookahead?Rr:ut.lookahead}function Jr(ut){var tr=ut.w_size,rr,Ct,Nt,Jt,Rr;do{if(Jt=ut.window_size-ut.lookahead-ut.strstart,ut.strstart>=tr+(tr-pr)){s.arraySet(ut.window,ut.window,tr,tr,0),ut.match_start-=tr,ut.strstart-=tr,ut.block_start-=tr,Ct=ut.hash_size,rr=Ct;do Nt=ut.head[--rr],ut.head[rr]=Nt>=tr?Nt-tr:0;while(--Ct);Ct=tr,rr=Ct;do Nt=ut.prev[--rr],ut.prev[rr]=Nt>=tr?Nt-tr:0;while(--Ct);Jt+=tr}if(ut.strm.avail_in===0)break;if(Ct=tn(ut.strm,ut.window,ut.strstart+ut.lookahead,Jt),ut.lookahead+=Ct,ut.lookahead+ut.insert>=ar)for(Rr=ut.strstart-ut.insert,ut.ins_h=ut.window[Rr],ut.ins_h=(ut.ins_h<<ut.hash_shift^ut.window[Rr+1])&ut.hash_mask;ut.insert&&(ut.ins_h=(ut.ins_h<<ut.hash_shift^ut.window[Rr+ar-1])&ut.hash_mask,ut.prev[Rr&ut.w_mask]=ut.head[ut.ins_h],ut.head[ut.ins_h]=Rr,Rr++,ut.insert--,!(ut.lookahead+ut.insert<ar)););}while(ut.lookahead<pr&&ut.strm.avail_in!==0)}function Dr(ut,tr){var rr=65535;for(rr>ut.pending_buf_size-5&&(rr=ut.pending_buf_size-5);;){if(ut.lookahead<=1){if(Jr(ut),ut.lookahead===0&&tr===_)return ur;if(ut.lookahead===0)break}ut.strstart+=ut.lookahead,ut.lookahead=0;var Ct=ut.block_start+rr;if((ut.strstart===0||ut.strstart>=Ct)&&(ut.lookahead=ut.strstart-Ct,ut.strstart=Ct,Pr(ut,!1),ut.strm.avail_out===0)||ut.strstart-ut.block_start>=ut.w_size-pr&&(Pr(ut,!1),ut.strm.avail_out===0))return ur}return ut.insert=0,tr===et?(Pr(ut,!0),ut.strm.avail_out===0?Xr:zr):(ut.strstart>ut.block_start&&(Pr(ut,!1),ut.strm.avail_out===0),ur)}function on(ut,tr){for(var rr,Ct;;){if(ut.lookahead<pr){if(Jr(ut),ut.lookahead<pr&&tr===_)return ur;if(ut.lookahead===0)break}if(rr=0,ut.lookahead>=ar&&(ut.ins_h=(ut.ins_h<<ut.hash_shift^ut.window[ut.strstart+ar-1])&ut.hash_mask,rr=ut.prev[ut.strstart&ut.w_mask]=ut.head[ut.ins_h],ut.head[ut.ins_h]=ut.strstart),rr!==0&&ut.strstart-rr<=ut.w_size-pr&&(ut.match_length=An(ut,rr)),ut.match_length>=ar)if(Ct=o._tr_tally(ut,ut.strstart-ut.match_start,ut.match_length-ar),ut.lookahead-=ut.match_length,ut.match_length<=ut.max_lazy_match&&ut.lookahead>=ar){ut.match_length--;do ut.strstart++,ut.ins_h=(ut.ins_h<<ut.hash_shift^ut.window[ut.strstart+ar-1])&ut.hash_mask,rr=ut.prev[ut.strstart&ut.w_mask]=ut.head[ut.ins_h],ut.head[ut.ins_h]=ut.strstart;while(--ut.match_length!==0);ut.strstart++}else ut.strstart+=ut.match_length,ut.match_length=0,ut.ins_h=ut.window[ut.strstart],ut.ins_h=(ut.ins_h<<ut.hash_shift^ut.window[ut.strstart+1])&ut.hash_mask;else Ct=o._tr_tally(ut,0,ut.window[ut.strstart]),ut.lookahead--,ut.strstart++;if(Ct&&(Pr(ut,!1),ut.strm.avail_out===0))return ur}return ut.insert=ut.strstart<ar-1?ut.strstart:ar-1,tr===et?(Pr(ut,!0),ut.strm.avail_out===0?Xr:zr):ut.last_lit&&(Pr(ut,!1),ut.strm.avail_out===0)?ur:lr}function qr(ut,tr){for(var rr,Ct,Nt;;){if(ut.lookahead<pr){if(Jr(ut),ut.lookahead<pr&&tr===_)return ur;if(ut.lookahead===0)break}if(rr=0,ut.lookahead>=ar&&(ut.ins_h=(ut.ins_h<<ut.hash_shift^ut.window[ut.strstart+ar-1])&ut.hash_mask,rr=ut.prev[ut.strstart&ut.w_mask]=ut.head[ut.ins_h],ut.head[ut.ins_h]=ut.strstart),ut.prev_length=ut.match_length,ut.prev_match=ut.match_start,ut.match_length=ar-1,rr!==0&&ut.prev_length<ut.max_lazy_match&&ut.strstart-rr<=ut.w_size-pr&&(ut.match_length=An(ut,rr),ut.match_length<=5&&(ut.strategy===_t||ut.match_length===ar&&ut.strstart-ut.match_start>4096)&&(ut.match_length=ar-1)),ut.prev_length>=ar&&ut.match_length<=ut.prev_length){Nt=ut.strstart+ut.lookahead-ar,Ct=o._tr_tally(ut,ut.strstart-1-ut.prev_match,ut.prev_length-ar),ut.lookahead-=ut.prev_length-1,ut.prev_length-=2;do++ut.strstart<=Nt&&(ut.ins_h=(ut.ins_h<<ut.hash_shift^ut.window[ut.strstart+ar-1])&ut.hash_mask,rr=ut.prev[ut.strstart&ut.w_mask]=ut.head[ut.ins_h],ut.head[ut.ins_h]=ut.strstart);while(--ut.prev_length!==0);if(ut.match_available=0,ut.match_length=ar-1,ut.strstart++,Ct&&(Pr(ut,!1),ut.strm.avail_out===0))return ur}else if(ut.match_available){if(Ct=o._tr_tally(ut,0,ut.window[ut.strstart-1]),Ct&&Pr(ut,!1),ut.strstart++,ut.lookahead--,ut.strm.avail_out===0)return ur}else ut.match_available=1,ut.strstart++,ut.lookahead--}return ut.match_available&&(Ct=o._tr_tally(ut,0,ut.window[ut.strstart-1]),ut.match_available=0),ut.insert=ut.strstart<ar-1?ut.strstart:ar-1,tr===et?(Pr(ut,!0),ut.strm.avail_out===0?Xr:zr):ut.last_lit&&(Pr(ut,!1),ut.strm.avail_out===0)?ur:lr}function Yr(ut,tr){for(var rr,Ct,Nt,Jt,Rr=ut.window;;){if(ut.lookahead<=Wt){if(Jr(ut),ut.lookahead<=Wt&&tr===_)return ur;if(ut.lookahead===0)break}if(ut.match_length=0,ut.lookahead>=ar&&ut.strstart>0&&(Nt=ut.strstart-1,Ct=Rr[Nt],Ct===Rr[++Nt]&&Ct===Rr[++Nt]&&Ct===Rr[++Nt])){Jt=ut.strstart+Wt;do;while(Ct===Rr[++Nt]&&Ct===Rr[++Nt]&&Ct===Rr[++Nt]&&Ct===Rr[++Nt]&&Ct===Rr[++Nt]&&Ct===Rr[++Nt]&&Ct===Rr[++Nt]&&Ct===Rr[++Nt]&&Nt<Jt);ut.match_length=Wt-(Jt-Nt),ut.match_length>ut.lookahead&&(ut.match_length=ut.lookahead)}if(ut.match_length>=ar?(rr=o._tr_tally(ut,1,ut.match_length-ar),ut.lookahead-=ut.match_length,ut.strstart+=ut.match_length,ut.match_length=0):(rr=o._tr_tally(ut,0,ut.window[ut.strstart]),ut.lookahead--,ut.strstart++),rr&&(Pr(ut,!1),ut.strm.avail_out===0))return ur}return ut.insert=0,tr===et?(Pr(ut,!0),ut.strm.avail_out===0?Xr:zr):ut.last_lit&&(Pr(ut,!1),ut.strm.avail_out===0)?ur:lr}function Wr(ut,tr){for(var rr;;){if(ut.lookahead===0&&(Jr(ut),ut.lookahead===0)){if(tr===_)return ur;break}if(ut.match_length=0,rr=o._tr_tally(ut,0,ut.window[ut.strstart]),ut.lookahead--,ut.strstart++,rr&&(Pr(ut,!1),ut.strm.avail_out===0))return ur}return ut.insert=0,tr===et?(Pr(ut,!0),ut.strm.avail_out===0?Xr:zr):ut.last_lit&&(Pr(ut,!1),ut.strm.avail_out===0)?ur:lr}function rn(ut,tr,rr,Ct,Nt){this.good_length=ut,this.max_lazy=tr,this.nice_length=rr,this.max_chain=Ct,this.func=Nt}var Nr;Nr=[new rn(0,0,0,0,Dr),new rn(4,4,8,4,on),new rn(4,5,16,8,on),new rn(4,6,32,32,on),new rn(4,4,16,16,qr),new rn(8,16,32,32,qr),new rn(8,16,128,128,qr),new rn(8,32,128,256,qr),new rn(32,128,258,1024,qr),new rn(32,258,258,4096,qr)];function en(ut){ut.window_size=2*ut.w_size,nn(ut.head),ut.max_lazy_match=Nr[ut.level].max_lazy,ut.good_match=Nr[ut.level].good_length,ut.nice_match=Nr[ut.level].nice_length,ut.max_chain_length=Nr[ut.level].max_chain,ut.strstart=0,ut.block_start=0,ut.lookahead=0,ut.insert=0,ut.match_length=ut.prev_length=ar-1,ut.match_available=0,ut.ins_h=0}function Ft(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=xt,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new s.Buf16(nr*2),this.dyn_dtree=new s.Buf16((2*Vt+1)*2),this.bl_tree=new s.Buf16((2*Xt+1)*2),nn(this.dyn_ltree),nn(this.dyn_dtree),nn(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new s.Buf16(Ar+1),this.heap=new s.Buf16(2*jt+1),nn(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new s.Buf16(2*jt+1),nn(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function sr(ut){var tr;return!ut||!ut.state?Tr(ut,At):(ut.total_in=ut.total_out=0,ut.data_type=Qt,tr=ut.state,tr.pending=0,tr.pending_out=0,tr.wrap<0&&(tr.wrap=-tr.wrap),tr.status=tr.wrap?yr:mr,ut.adler=tr.wrap===2?0:1,tr.last_flush=_,o._tr_init(tr),rt)}function hr(ut){var tr=sr(ut);return tr===rt&&en(ut.state),tr}function br(ut,tr){return!ut||!ut.state||ut.state.wrap!==2?At:(ut.state.gzhead=tr,rt)}function Gt(ut,tr,rr,Ct,Nt,Jt){if(!ut)return At;var Rr=1;if(tr===gt&&(tr=6),Ct<0?(Rr=0,Ct=-Ct):Ct>15&&(Rr=2,Ct-=16),Nt<1||Nt>bt||rr!==xt||Ct<8||Ct>15||tr<0||tr>9||Jt<0||Jt>dt)return Tr(ut,At);Ct===8&&(Ct=9);var wt=new Ft;return ut.state=wt,wt.strm=ut,wt.wrap=Rr,wt.gzhead=null,wt.w_bits=Ct,wt.w_size=1<<wt.w_bits,wt.w_mask=wt.w_size-1,wt.hash_bits=Nt+7,wt.hash_size=1<<wt.hash_bits,wt.hash_mask=wt.hash_size-1,wt.hash_shift=~~((wt.hash_bits+ar-1)/ar),wt.window=new s.Buf8(wt.w_size*2),wt.head=new s.Buf16(wt.hash_size),wt.prev=new s.Buf16(wt.w_size),wt.lit_bufsize=1<<Nt+6,wt.pending_buf_size=wt.lit_bufsize*4,wt.pending_buf=new s.Buf8(wt.pending_buf_size),wt.d_buf=1*wt.lit_bufsize,wt.l_buf=3*wt.lit_bufsize,wt.level=tr,wt.strategy=Jt,wt.method=rr,hr(ut)}function ir(ut,tr){return Gt(ut,tr,xt,kt,Lt,mt)}function yt(ut,tr){var rr,Ct,Nt,Jt;if(!ut||!ut.state||tr>tt||tr<0)return ut?Tr(ut,At):At;if(Ct=ut.state,!ut.output||!ut.input&&ut.avail_in!==0||Ct.status===Ir&&tr!==et)return Tr(ut,ut.avail_out===0?lt:At);if(Ct.strm=ut,rr=Ct.last_flush,Ct.last_flush=tr,Ct.status===yr)if(Ct.wrap===2)ut.adler=0,$r(Ct,31),$r(Ct,139),$r(Ct,8),Ct.gzhead?($r(Ct,(Ct.gzhead.text?1:0)+(Ct.gzhead.hcrc?2:0)+(Ct.gzhead.extra?4:0)+(Ct.gzhead.name?8:0)+(Ct.gzhead.comment?16:0)),$r(Ct,Ct.gzhead.time&255),$r(Ct,Ct.gzhead.time>>8&255),$r(Ct,Ct.gzhead.time>>16&255),$r(Ct,Ct.gzhead.time>>24&255),$r(Ct,Ct.level===9?2:Ct.strategy>=ct||Ct.level<2?4:0),$r(Ct,Ct.gzhead.os&255),Ct.gzhead.extra&&Ct.gzhead.extra.length&&($r(Ct,Ct.gzhead.extra.length&255),$r(Ct,Ct.gzhead.extra.length>>8&255)),Ct.gzhead.hcrc&&(ut.adler=d(ut.adler,Ct.pending_buf,Ct.pending,0)),Ct.gzindex=0,Ct.status=Br):($r(Ct,0),$r(Ct,0),$r(Ct,0),$r(Ct,0),$r(Ct,0),$r(Ct,Ct.level===9?2:Ct.strategy>=ct||Ct.level<2?4:0),$r(Ct,kr),Ct.status=mr);else{var Rr=xt+(Ct.w_bits-8<<4)<<8,wt=-1;Ct.strategy>=ct||Ct.level<2?wt=0:Ct.level<6?wt=1:Ct.level===6?wt=2:wt=3,Rr|=wt<<6,Ct.strstart!==0&&(Rr|=dr),Rr+=31-Rr%31,Ct.status=mr,Cr(Ct,Rr),Ct.strstart!==0&&(Cr(Ct,ut.adler>>>16),Cr(Ct,ut.adler&65535)),ut.adler=1}if(Ct.status===Br)if(Ct.gzhead.extra){for(Nt=Ct.pending;Ct.gzindex<(Ct.gzhead.extra.length&65535)&&!(Ct.pending===Ct.pending_buf_size&&(Ct.gzhead.hcrc&&Ct.pending>Nt&&(ut.adler=d(ut.adler,Ct.pending_buf,Ct.pending-Nt,Nt)),jr(ut),Nt=Ct.pending,Ct.pending===Ct.pending_buf_size));)$r(Ct,Ct.gzhead.extra[Ct.gzindex]&255),Ct.gzindex++;Ct.gzhead.hcrc&&Ct.pending>Nt&&(ut.adler=d(ut.adler,Ct.pending_buf,Ct.pending-Nt,Nt)),Ct.gzindex===Ct.gzhead.extra.length&&(Ct.gzindex=0,Ct.status=Lr)}else Ct.status=Lr;if(Ct.status===Lr)if(Ct.gzhead.name){Nt=Ct.pending;do{if(Ct.pending===Ct.pending_buf_size&&(Ct.gzhead.hcrc&&Ct.pending>Nt&&(ut.adler=d(ut.adler,Ct.pending_buf,Ct.pending-Nt,Nt)),jr(ut),Nt=Ct.pending,Ct.pending===Ct.pending_buf_size)){Jt=1;break}Ct.gzindex<Ct.gzhead.name.length?Jt=Ct.gzhead.name.charCodeAt(Ct.gzindex++)&255:Jt=0,$r(Ct,Jt)}while(Jt!==0);Ct.gzhead.hcrc&&Ct.pending>Nt&&(ut.adler=d(ut.adler,Ct.pending_buf,Ct.pending-Nt,Nt)),Jt===0&&(Ct.gzindex=0,Ct.status=Ur)}else Ct.status=Ur;if(Ct.status===Ur)if(Ct.gzhead.comment){Nt=Ct.pending;do{if(Ct.pending===Ct.pending_buf_size&&(Ct.gzhead.hcrc&&Ct.pending>Nt&&(ut.adler=d(ut.adler,Ct.pending_buf,Ct.pending-Nt,Nt)),jr(ut),Nt=Ct.pending,Ct.pending===Ct.pending_buf_size)){Jt=1;break}Ct.gzindex<Ct.gzhead.comment.length?Jt=Ct.gzhead.comment.charCodeAt(Ct.gzindex++)&255:Jt=0,$r(Ct,Jt)}while(Jt!==0);Ct.gzhead.hcrc&&Ct.pending>Nt&&(ut.adler=d(ut.adler,Ct.pending_buf,Ct.pending-Nt,Nt)),Jt===0&&(Ct.status=or)}else Ct.status=or;if(Ct.status===or&&(Ct.gzhead.hcrc?(Ct.pending+2>Ct.pending_buf_size&&jr(ut),Ct.pending+2<=Ct.pending_buf_size&&($r(Ct,ut.adler&255),$r(Ct,ut.adler>>8&255),ut.adler=0,Ct.status=mr)):Ct.status=mr),Ct.pending!==0){if(jr(ut),ut.avail_out===0)return Ct.last_flush=-1,rt}else if(ut.avail_in===0&&Mr(tr)<=Mr(rr)&&tr!==et)return Tr(ut,lt);if(Ct.status===Ir&&ut.avail_in!==0)return Tr(ut,lt);if(ut.avail_in!==0||Ct.lookahead!==0||tr!==_&&Ct.status!==Ir){var ot=Ct.strategy===ct?Wr(Ct,tr):Ct.strategy===pt?Yr(Ct,tr):Nr[Ct.level].func(Ct,tr);if((ot===Xr||ot===zr)&&(Ct.status=Ir),ot===ur||ot===Xr)return ut.avail_out===0&&(Ct.last_flush=-1),rt;if(ot===lr&&(tr===b?o._tr_align(Ct):tr!==tt&&(o._tr_stored_block(Ct,0,0,!1),tr===$&&(nn(Ct.head),Ct.lookahead===0&&(Ct.strstart=0,Ct.block_start=0,Ct.insert=0))),jr(ut),ut.avail_out===0))return Ct.last_flush=-1,rt}return tr!==et?rt:Ct.wrap<=0?nt:(Ct.wrap===2?($r(Ct,ut.adler&255),$r(Ct,ut.adler>>8&255),$r(Ct,ut.adler>>16&255),$r(Ct,ut.adler>>24&255),$r(Ct,ut.total_in&255),$r(Ct,ut.total_in>>8&255),$r(Ct,ut.total_in>>16&255),$r(Ct,ut.total_in>>24&255)):(Cr(Ct,ut.adler>>>16),Cr(Ct,ut.adler&65535)),jr(ut),Ct.wrap>0&&(Ct.wrap=-Ct.wrap),Ct.pending!==0?rt:nt)}function gr(ut){var tr;return!ut||!ut.state?At:(tr=ut.state.status,tr!==yr&&tr!==Br&&tr!==Lr&&tr!==Ur&&tr!==or&&tr!==mr&&tr!==Ir?Tr(ut,At):(ut.state=null,tr===mr?Tr(ut,at):rt))}function Hr(ut,tr){var rr=tr.length,Ct,Nt,Jt,Rr,wt,ot,st,ht;if(!ut||!ut.state||(Ct=ut.state,Rr=Ct.wrap,Rr===2||Rr===1&&Ct.status!==yr||Ct.lookahead))return At;for(Rr===1&&(ut.adler=h(ut.adler,tr,rr,0)),Ct.wrap=0,rr>=Ct.w_size&&(Rr===0&&(nn(Ct.head),Ct.strstart=0,Ct.block_start=0,Ct.insert=0),ht=new s.Buf8(Ct.w_size),s.arraySet(ht,tr,rr-Ct.w_size,Ct.w_size,0),tr=ht,rr=Ct.w_size),wt=ut.avail_in,ot=ut.next_in,st=ut.input,ut.avail_in=rr,ut.next_in=0,ut.input=tr,Jr(Ct);Ct.lookahead>=ar;){Nt=Ct.strstart,Jt=Ct.lookahead-(ar-1);do Ct.ins_h=(Ct.ins_h<<Ct.hash_shift^Ct.window[Nt+ar-1])&Ct.hash_mask,Ct.prev[Nt&Ct.w_mask]=Ct.head[Ct.ins_h],Ct.head[Ct.ins_h]=Nt,Nt++;while(--Jt);Ct.strstart=Nt,Ct.lookahead=ar-1,Jr(Ct)}return Ct.strstart+=Ct.lookahead,Ct.block_start=Ct.strstart,Ct.insert=Ct.lookahead,Ct.lookahead=0,Ct.match_length=Ct.prev_length=ar-1,Ct.match_available=0,ut.next_in=ot,ut.input=st,ut.avail_in=wt,Ct.wrap=Rr,rt}return deflate$4.deflateInit=ir,deflate$4.deflateInit2=Gt,deflate$4.deflateReset=hr,deflate$4.deflateResetKeep=sr,deflate$4.deflateSetHeader=br,deflate$4.deflate=yt,deflate$4.deflateEnd=gr,deflate$4.deflateSetDictionary=Hr,deflate$4.deflateInfo="pako deflate (from Nodeca project)",deflate$4}var strings$3={},hasRequiredStrings$1;function requireStrings$1(){if(hasRequiredStrings$1)return strings$3;hasRequiredStrings$1=1;var s=requireCommon$1(),o=!0,h=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{h=!1}for(var d=new s.Buf8(256),g=0;g<256;g++)d[g]=g>=252?6:g>=248?5:g>=240?4:g>=224?3:g>=192?2:1;d[254]=d[254]=1,strings$3.string2buf=function(b){var $,et,tt,rt,nt,At=b.length,at=0;for(rt=0;rt<At;rt++)et=b.charCodeAt(rt),(et&64512)===55296&&rt+1<At&&(tt=b.charCodeAt(rt+1),(tt&64512)===56320&&(et=65536+(et-55296<<10)+(tt-56320),rt++)),at+=et<128?1:et<2048?2:et<65536?3:4;for($=new s.Buf8(at),nt=0,rt=0;nt<at;rt++)et=b.charCodeAt(rt),(et&64512)===55296&&rt+1<At&&(tt=b.charCodeAt(rt+1),(tt&64512)===56320&&(et=65536+(et-55296<<10)+(tt-56320),rt++)),et<128?$[nt++]=et:et<2048?($[nt++]=192|et>>>6,$[nt++]=128|et&63):et<65536?($[nt++]=224|et>>>12,$[nt++]=128|et>>>6&63,$[nt++]=128|et&63):($[nt++]=240|et>>>18,$[nt++]=128|et>>>12&63,$[nt++]=128|et>>>6&63,$[nt++]=128|et&63);return $};function _(b,$){if($<65534&&(b.subarray&&h||!b.subarray&&o))return String.fromCharCode.apply(null,s.shrinkBuf(b,$));for(var et="",tt=0;tt<$;tt++)et+=String.fromCharCode(b[tt]);return et}return strings$3.buf2binstring=function(b){return _(b,b.length)},strings$3.binstring2buf=function(b){for(var $=new s.Buf8(b.length),et=0,tt=$.length;et<tt;et++)$[et]=b.charCodeAt(et);return $},strings$3.buf2string=function(b,$){var et,tt,rt,nt,At=$||b.length,at=new Array(At*2);for(tt=0,et=0;et<At;){if(rt=b[et++],rt<128){at[tt++]=rt;continue}if(nt=d[rt],nt>4){at[tt++]=65533,et+=nt-1;continue}for(rt&=nt===2?31:nt===3?15:7;nt>1&&et<At;)rt=rt<<6|b[et++]&63,nt--;if(nt>1){at[tt++]=65533;continue}rt<65536?at[tt++]=rt:(rt-=65536,at[tt++]=55296|rt>>10&1023,at[tt++]=56320|rt&1023)}return _(at,tt)},strings$3.utf8border=function(b,$){var et;for($=$||b.length,$>b.length&&($=b.length),et=$-1;et>=0&&(b[et]&192)===128;)et--;return et<0||et===0?$:et+d[b[et]]>$?et:$},strings$3}var zstream$3,hasRequiredZstream$1;function requireZstream$1(){if(hasRequiredZstream$1)return zstream$3;hasRequiredZstream$1=1;function s(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}return zstream$3=s,zstream$3}var hasRequiredDeflate$2;function requireDeflate$2(){if(hasRequiredDeflate$2)return deflate$5;hasRequiredDeflate$2=1;var s=requireDeflate$3(),o=requireCommon$1(),h=requireStrings$1(),d=requireMessages$1(),g=requireZstream$1(),_=Object.prototype.toString,b=0,$=4,et=0,tt=1,rt=2,nt=-1,At=0,at=8;function lt(pt){if(!(this instanceof lt))return new lt(pt);this.options=o.assign({level:nt,method:at,chunkSize:16384,windowBits:15,memLevel:8,strategy:At,to:""},pt||{});var dt=this.options;dt.raw&&dt.windowBits>0?dt.windowBits=-dt.windowBits:dt.gzip&&dt.windowBits>0&&dt.windowBits<16&&(dt.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new g,this.strm.avail_out=0;var mt=s.deflateInit2(this.strm,dt.level,dt.method,dt.windowBits,dt.memLevel,dt.strategy);if(mt!==et)throw new Error(d[mt]);if(dt.header&&s.deflateSetHeader(this.strm,dt.header),dt.dictionary){var Qt;if(typeof dt.dictionary=="string"?Qt=h.string2buf(dt.dictionary):_.call(dt.dictionary)==="[object ArrayBuffer]"?Qt=new Uint8Array(dt.dictionary):Qt=dt.dictionary,mt=s.deflateSetDictionary(this.strm,Qt),mt!==et)throw new Error(d[mt]);this._dict_set=!0}}lt.prototype.push=function(pt,dt){var mt=this.strm,Qt=this.options.chunkSize,xt,bt;if(this.ended)return!1;bt=dt===~~dt?dt:dt===!0?$:b,typeof pt=="string"?mt.input=h.string2buf(pt):_.call(pt)==="[object ArrayBuffer]"?mt.input=new Uint8Array(pt):mt.input=pt,mt.next_in=0,mt.avail_in=mt.input.length;do{if(mt.avail_out===0&&(mt.output=new o.Buf8(Qt),mt.next_out=0,mt.avail_out=Qt),xt=s.deflate(mt,bt),xt!==tt&&xt!==et)return this.onEnd(xt),this.ended=!0,!1;(mt.avail_out===0||mt.avail_in===0&&(bt===$||bt===rt))&&(this.options.to==="string"?this.onData(h.buf2binstring(o.shrinkBuf(mt.output,mt.next_out))):this.onData(o.shrinkBuf(mt.output,mt.next_out)))}while((mt.avail_in>0||mt.avail_out===0)&&xt!==tt);return bt===$?(xt=s.deflateEnd(this.strm),this.onEnd(xt),this.ended=!0,xt===et):(bt===rt&&(this.onEnd(et),mt.avail_out=0),!0)},lt.prototype.onData=function(pt){this.chunks.push(pt)},lt.prototype.onEnd=function(pt){pt===et&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=pt,this.msg=this.strm.msg};function gt(pt,dt){var mt=new lt(dt);if(mt.push(pt,!0),mt.err)throw mt.msg||d[mt.err];return mt.result}function _t(pt,dt){return dt=dt||{},dt.raw=!0,gt(pt,dt)}function ct(pt,dt){return dt=dt||{},dt.gzip=!0,gt(pt,dt)}return deflate$5.Deflate=lt,deflate$5.deflate=gt,deflate$5.deflateRaw=_t,deflate$5.gzip=ct,deflate$5}var inflate$6={},inflate$5={},inffast$3,hasRequiredInffast$1;function requireInffast$1(){if(hasRequiredInffast$1)return inffast$3;hasRequiredInffast$1=1;var s=30,o=12;return inffast$3=function(d,g){var _,b,$,et,tt,rt,nt,At,at,lt,gt,_t,ct,pt,dt,mt,Qt,xt,bt,kt,Lt,Ht,Pt,jt,Vt;_=d.state,b=d.next_in,jt=d.input,$=b+(d.avail_in-5),et=d.next_out,Vt=d.output,tt=et-(g-d.avail_out),rt=et+(d.avail_out-257),nt=_.dmax,At=_.wsize,at=_.whave,lt=_.wnext,gt=_.window,_t=_.hold,ct=_.bits,pt=_.lencode,dt=_.distcode,mt=(1<<_.lenbits)-1,Qt=(1<<_.distbits)-1;t:do{ct<15&&(_t+=jt[b++]<<ct,ct+=8,_t+=jt[b++]<<ct,ct+=8),xt=pt[_t&mt];e:for(;;){if(bt=xt>>>24,_t>>>=bt,ct-=bt,bt=xt>>>16&255,bt===0)Vt[et++]=xt&65535;else if(bt&16){kt=xt&65535,bt&=15,bt&&(ct<bt&&(_t+=jt[b++]<<ct,ct+=8),kt+=_t&(1<<bt)-1,_t>>>=bt,ct-=bt),ct<15&&(_t+=jt[b++]<<ct,ct+=8,_t+=jt[b++]<<ct,ct+=8),xt=dt[_t&Qt];r:for(;;){if(bt=xt>>>24,_t>>>=bt,ct-=bt,bt=xt>>>16&255,bt&16){if(Lt=xt&65535,bt&=15,ct<bt&&(_t+=jt[b++]<<ct,ct+=8,ct<bt&&(_t+=jt[b++]<<ct,ct+=8)),Lt+=_t&(1<<bt)-1,Lt>nt){d.msg="invalid distance too far back",_.mode=s;break t}if(_t>>>=bt,ct-=bt,bt=et-tt,Lt>bt){if(bt=Lt-bt,bt>at&&_.sane){d.msg="invalid distance too far back",_.mode=s;break t}if(Ht=0,Pt=gt,lt===0){if(Ht+=At-bt,bt<kt){kt-=bt;do Vt[et++]=gt[Ht++];while(--bt);Ht=et-Lt,Pt=Vt}}else if(lt<bt){if(Ht+=At+lt-bt,bt-=lt,bt<kt){kt-=bt;do Vt[et++]=gt[Ht++];while(--bt);if(Ht=0,lt<kt){bt=lt,kt-=bt;do Vt[et++]=gt[Ht++];while(--bt);Ht=et-Lt,Pt=Vt}}}else if(Ht+=lt-bt,bt<kt){kt-=bt;do Vt[et++]=gt[Ht++];while(--bt);Ht=et-Lt,Pt=Vt}for(;kt>2;)Vt[et++]=Pt[Ht++],Vt[et++]=Pt[Ht++],Vt[et++]=Pt[Ht++],kt-=3;kt&&(Vt[et++]=Pt[Ht++],kt>1&&(Vt[et++]=Pt[Ht++]))}else{Ht=et-Lt;do Vt[et++]=Vt[Ht++],Vt[et++]=Vt[Ht++],Vt[et++]=Vt[Ht++],kt-=3;while(kt>2);kt&&(Vt[et++]=Vt[Ht++],kt>1&&(Vt[et++]=Vt[Ht++]))}}else if(bt&64){d.msg="invalid distance code",_.mode=s;break t}else{xt=dt[(xt&65535)+(_t&(1<<bt)-1)];continue r}break}}else if(bt&64)if(bt&32){_.mode=o;break t}else{d.msg="invalid literal/length code",_.mode=s;break t}else{xt=pt[(xt&65535)+(_t&(1<<bt)-1)];continue e}break}}while(b<$&&et<rt);kt=ct>>3,b-=kt,ct-=kt<<3,_t&=(1<<ct)-1,d.next_in=b,d.next_out=et,d.avail_in=b<$?5+($-b):5-(b-$),d.avail_out=et<rt?257+(rt-et):257-(et-rt),_.hold=_t,_.bits=ct},inffast$3}var inftrees$3,hasRequiredInftrees$1;function requireInftrees$1(){if(hasRequiredInftrees$1)return inftrees$3;hasRequiredInftrees$1=1;var s=requireCommon$1(),o=15,h=852,d=592,g=0,_=1,b=2,$=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],et=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],tt=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],rt=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];return inftrees$3=function(At,at,lt,gt,_t,ct,pt,dt){var mt=dt.bits,Qt=0,xt=0,bt=0,kt=0,Lt=0,Ht=0,Pt=0,jt=0,Vt=0,Xt=0,nr,Ar,ar,Wt,pr,dr=null,yr=0,Br,Lr=new s.Buf16(o+1),Ur=new s.Buf16(o+1),or=null,mr=0,Ir,ur,lr;for(Qt=0;Qt<=o;Qt++)Lr[Qt]=0;for(xt=0;xt<gt;xt++)Lr[at[lt+xt]]++;for(Lt=mt,kt=o;kt>=1&&Lr[kt]===0;kt--);if(Lt>kt&&(Lt=kt),kt===0)return _t[ct++]=1<<24|64<<16|0,_t[ct++]=1<<24|64<<16|0,dt.bits=1,0;for(bt=1;bt<kt&&Lr[bt]===0;bt++);for(Lt<bt&&(Lt=bt),jt=1,Qt=1;Qt<=o;Qt++)if(jt<<=1,jt-=Lr[Qt],jt<0)return-1;if(jt>0&&(At===g||kt!==1))return-1;for(Ur[1]=0,Qt=1;Qt<o;Qt++)Ur[Qt+1]=Ur[Qt]+Lr[Qt];for(xt=0;xt<gt;xt++)at[lt+xt]!==0&&(pt[Ur[at[lt+xt]]++]=xt);if(At===g?(dr=or=pt,Br=19):At===_?(dr=$,yr-=257,or=et,mr-=257,Br=256):(dr=tt,or=rt,Br=-1),Xt=0,xt=0,Qt=bt,pr=ct,Ht=Lt,Pt=0,ar=-1,Vt=1<<Lt,Wt=Vt-1,At===_&&Vt>h||At===b&&Vt>d)return 1;for(;;){Ir=Qt-Pt,pt[xt]<Br?(ur=0,lr=pt[xt]):pt[xt]>Br?(ur=or[mr+pt[xt]],lr=dr[yr+pt[xt]]):(ur=96,lr=0),nr=1<<Qt-Pt,Ar=1<<Ht,bt=Ar;do Ar-=nr,_t[pr+(Xt>>Pt)+Ar]=Ir<<24|ur<<16|lr|0;while(Ar!==0);for(nr=1<<Qt-1;Xt&nr;)nr>>=1;if(nr!==0?(Xt&=nr-1,Xt+=nr):Xt=0,xt++,--Lr[Qt]===0){if(Qt===kt)break;Qt=at[lt+pt[xt]]}if(Qt>Lt&&(Xt&Wt)!==ar){for(Pt===0&&(Pt=Lt),pr+=bt,Ht=Qt-Pt,jt=1<<Ht;Ht+Pt<kt&&(jt-=Lr[Ht+Pt],!(jt<=0));)Ht++,jt<<=1;if(Vt+=1<<Ht,At===_&&Vt>h||At===b&&Vt>d)return 1;ar=Xt&Wt,_t[ar]=Lt<<24|Ht<<16|pr-ct|0}}return Xt!==0&&(_t[pr+Xt]=Qt-Pt<<24|64<<16|0),dt.bits=Lt,0},inftrees$3}var hasRequiredInflate$3;function requireInflate$3(){if(hasRequiredInflate$3)return inflate$5;hasRequiredInflate$3=1;var s=requireCommon$1(),o=requireAdler32$1(),h=requireCrc32$1(),d=requireInffast$1(),g=requireInftrees$1(),_=0,b=1,$=2,et=4,tt=5,rt=6,nt=0,At=1,at=2,lt=-2,gt=-3,_t=-4,ct=-5,pt=8,dt=1,mt=2,Qt=3,xt=4,bt=5,kt=6,Lt=7,Ht=8,Pt=9,jt=10,Vt=11,Xt=12,nr=13,Ar=14,ar=15,Wt=16,pr=17,dr=18,yr=19,Br=20,Lr=21,Ur=22,or=23,mr=24,Ir=25,ur=26,lr=27,Xr=28,zr=29,kr=30,Tr=31,Mr=32,nn=852,jr=592,Pr=15,$r=Pr;function Cr(Gt){return(Gt>>>24&255)+(Gt>>>8&65280)+((Gt&65280)<<8)+((Gt&255)<<24)}function tn(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function An(Gt){var ir;return!Gt||!Gt.state?lt:(ir=Gt.state,Gt.total_in=Gt.total_out=ir.total=0,Gt.msg="",ir.wrap&&(Gt.adler=ir.wrap&1),ir.mode=dt,ir.last=0,ir.havedict=0,ir.dmax=32768,ir.head=null,ir.hold=0,ir.bits=0,ir.lencode=ir.lendyn=new s.Buf32(nn),ir.distcode=ir.distdyn=new s.Buf32(jr),ir.sane=1,ir.back=-1,nt)}function Jr(Gt){var ir;return!Gt||!Gt.state?lt:(ir=Gt.state,ir.wsize=0,ir.whave=0,ir.wnext=0,An(Gt))}function Dr(Gt,ir){var yt,gr;return!Gt||!Gt.state||(gr=Gt.state,ir<0?(yt=0,ir=-ir):(yt=(ir>>4)+1,ir<48&&(ir&=15)),ir&&(ir<8||ir>15))?lt:(gr.window!==null&&gr.wbits!==ir&&(gr.window=null),gr.wrap=yt,gr.wbits=ir,Jr(Gt))}function on(Gt,ir){var yt,gr;return Gt?(gr=new tn,Gt.state=gr,gr.window=null,yt=Dr(Gt,ir),yt!==nt&&(Gt.state=null),yt):lt}function qr(Gt){return on(Gt,$r)}var Yr=!0,Wr,rn;function Nr(Gt){if(Yr){var ir;for(Wr=new s.Buf32(512),rn=new s.Buf32(32),ir=0;ir<144;)Gt.lens[ir++]=8;for(;ir<256;)Gt.lens[ir++]=9;for(;ir<280;)Gt.lens[ir++]=7;for(;ir<288;)Gt.lens[ir++]=8;for(g(b,Gt.lens,0,288,Wr,0,Gt.work,{bits:9}),ir=0;ir<32;)Gt.lens[ir++]=5;g($,Gt.lens,0,32,rn,0,Gt.work,{bits:5}),Yr=!1}Gt.lencode=Wr,Gt.lenbits=9,Gt.distcode=rn,Gt.distbits=5}function en(Gt,ir,yt,gr){var Hr,ut=Gt.state;return ut.window===null&&(ut.wsize=1<<ut.wbits,ut.wnext=0,ut.whave=0,ut.window=new s.Buf8(ut.wsize)),gr>=ut.wsize?(s.arraySet(ut.window,ir,yt-ut.wsize,ut.wsize,0),ut.wnext=0,ut.whave=ut.wsize):(Hr=ut.wsize-ut.wnext,Hr>gr&&(Hr=gr),s.arraySet(ut.window,ir,yt-gr,Hr,ut.wnext),gr-=Hr,gr?(s.arraySet(ut.window,ir,yt-gr,gr,0),ut.wnext=gr,ut.whave=ut.wsize):(ut.wnext+=Hr,ut.wnext===ut.wsize&&(ut.wnext=0),ut.whave<ut.wsize&&(ut.whave+=Hr))),0}function Ft(Gt,ir){var yt,gr,Hr,ut,tr,rr,Ct,Nt,Jt,Rr,wt,ot,st,ht,vt=0,Ut,Ot,zt,Kt,_e,_r,er,Er,Fr=new s.Buf8(4),vr,xr,Zr=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!Gt||!Gt.state||!Gt.output||!Gt.input&&Gt.avail_in!==0)return lt;yt=Gt.state,yt.mode===Xt&&(yt.mode=nr),tr=Gt.next_out,Hr=Gt.output,Ct=Gt.avail_out,ut=Gt.next_in,gr=Gt.input,rr=Gt.avail_in,Nt=yt.hold,Jt=yt.bits,Rr=rr,wt=Ct,Er=nt;t:for(;;)switch(yt.mode){case dt:if(yt.wrap===0){yt.mode=nr;break}for(;Jt<16;){if(rr===0)break t;rr--,Nt+=gr[ut++]<<Jt,Jt+=8}if(yt.wrap&2&&Nt===35615){yt.check=0,Fr[0]=Nt&255,Fr[1]=Nt>>>8&255,yt.check=h(yt.check,Fr,2,0),Nt=0,Jt=0,yt.mode=mt;break}if(yt.flags=0,yt.head&&(yt.head.done=!1),!(yt.wrap&1)||(((Nt&255)<<8)+(Nt>>8))%31){Gt.msg="incorrect header check",yt.mode=kr;break}if((Nt&15)!==pt){Gt.msg="unknown compression method",yt.mode=kr;break}if(Nt>>>=4,Jt-=4,er=(Nt&15)+8,yt.wbits===0)yt.wbits=er;else if(er>yt.wbits){Gt.msg="invalid window size",yt.mode=kr;break}yt.dmax=1<<er,Gt.adler=yt.check=1,yt.mode=Nt&512?jt:Xt,Nt=0,Jt=0;break;case mt:for(;Jt<16;){if(rr===0)break t;rr--,Nt+=gr[ut++]<<Jt,Jt+=8}if(yt.flags=Nt,(yt.flags&255)!==pt){Gt.msg="unknown compression method",yt.mode=kr;break}if(yt.flags&57344){Gt.msg="unknown header flags set",yt.mode=kr;break}yt.head&&(yt.head.text=Nt>>8&1),yt.flags&512&&(Fr[0]=Nt&255,Fr[1]=Nt>>>8&255,yt.check=h(yt.check,Fr,2,0)),Nt=0,Jt=0,yt.mode=Qt;case Qt:for(;Jt<32;){if(rr===0)break t;rr--,Nt+=gr[ut++]<<Jt,Jt+=8}yt.head&&(yt.head.time=Nt),yt.flags&512&&(Fr[0]=Nt&255,Fr[1]=Nt>>>8&255,Fr[2]=Nt>>>16&255,Fr[3]=Nt>>>24&255,yt.check=h(yt.check,Fr,4,0)),Nt=0,Jt=0,yt.mode=xt;case xt:for(;Jt<16;){if(rr===0)break t;rr--,Nt+=gr[ut++]<<Jt,Jt+=8}yt.head&&(yt.head.xflags=Nt&255,yt.head.os=Nt>>8),yt.flags&512&&(Fr[0]=Nt&255,Fr[1]=Nt>>>8&255,yt.check=h(yt.check,Fr,2,0)),Nt=0,Jt=0,yt.mode=bt;case bt:if(yt.flags&1024){for(;Jt<16;){if(rr===0)break t;rr--,Nt+=gr[ut++]<<Jt,Jt+=8}yt.length=Nt,yt.head&&(yt.head.extra_len=Nt),yt.flags&512&&(Fr[0]=Nt&255,Fr[1]=Nt>>>8&255,yt.check=h(yt.check,Fr,2,0)),Nt=0,Jt=0}else yt.head&&(yt.head.extra=null);yt.mode=kt;case kt:if(yt.flags&1024&&(ot=yt.length,ot>rr&&(ot=rr),ot&&(yt.head&&(er=yt.head.extra_len-yt.length,yt.head.extra||(yt.head.extra=new Array(yt.head.extra_len)),s.arraySet(yt.head.extra,gr,ut,ot,er)),yt.flags&512&&(yt.check=h(yt.check,gr,ot,ut)),rr-=ot,ut+=ot,yt.length-=ot),yt.length))break t;yt.length=0,yt.mode=Lt;case Lt:if(yt.flags&2048){if(rr===0)break t;ot=0;do er=gr[ut+ot++],yt.head&&er&&yt.length<65536&&(yt.head.name+=String.fromCharCode(er));while(er&&ot<rr);if(yt.flags&512&&(yt.check=h(yt.check,gr,ot,ut)),rr-=ot,ut+=ot,er)break t}else yt.head&&(yt.head.name=null);yt.length=0,yt.mode=Ht;case Ht:if(yt.flags&4096){if(rr===0)break t;ot=0;do er=gr[ut+ot++],yt.head&&er&&yt.length<65536&&(yt.head.comment+=String.fromCharCode(er));while(er&&ot<rr);if(yt.flags&512&&(yt.check=h(yt.check,gr,ot,ut)),rr-=ot,ut+=ot,er)break t}else yt.head&&(yt.head.comment=null);yt.mode=Pt;case Pt:if(yt.flags&512){for(;Jt<16;){if(rr===0)break t;rr--,Nt+=gr[ut++]<<Jt,Jt+=8}if(Nt!==(yt.check&65535)){Gt.msg="header crc mismatch",yt.mode=kr;break}Nt=0,Jt=0}yt.head&&(yt.head.hcrc=yt.flags>>9&1,yt.head.done=!0),Gt.adler=yt.check=0,yt.mode=Xt;break;case jt:for(;Jt<32;){if(rr===0)break t;rr--,Nt+=gr[ut++]<<Jt,Jt+=8}Gt.adler=yt.check=Cr(Nt),Nt=0,Jt=0,yt.mode=Vt;case Vt:if(yt.havedict===0)return Gt.next_out=tr,Gt.avail_out=Ct,Gt.next_in=ut,Gt.avail_in=rr,yt.hold=Nt,yt.bits=Jt,at;Gt.adler=yt.check=1,yt.mode=Xt;case Xt:if(ir===tt||ir===rt)break t;case nr:if(yt.last){Nt>>>=Jt&7,Jt-=Jt&7,yt.mode=lr;break}for(;Jt<3;){if(rr===0)break t;rr--,Nt+=gr[ut++]<<Jt,Jt+=8}switch(yt.last=Nt&1,Nt>>>=1,Jt-=1,Nt&3){case 0:yt.mode=Ar;break;case 1:if(Nr(yt),yt.mode=Br,ir===rt){Nt>>>=2,Jt-=2;break t}break;case 2:yt.mode=pr;break;case 3:Gt.msg="invalid block type",yt.mode=kr}Nt>>>=2,Jt-=2;break;case Ar:for(Nt>>>=Jt&7,Jt-=Jt&7;Jt<32;){if(rr===0)break t;rr--,Nt+=gr[ut++]<<Jt,Jt+=8}if((Nt&65535)!==(Nt>>>16^65535)){Gt.msg="invalid stored block lengths",yt.mode=kr;break}if(yt.length=Nt&65535,Nt=0,Jt=0,yt.mode=ar,ir===rt)break t;case ar:yt.mode=Wt;case Wt:if(ot=yt.length,ot){if(ot>rr&&(ot=rr),ot>Ct&&(ot=Ct),ot===0)break t;s.arraySet(Hr,gr,ut,ot,tr),rr-=ot,ut+=ot,Ct-=ot,tr+=ot,yt.length-=ot;break}yt.mode=Xt;break;case pr:for(;Jt<14;){if(rr===0)break t;rr--,Nt+=gr[ut++]<<Jt,Jt+=8}if(yt.nlen=(Nt&31)+257,Nt>>>=5,Jt-=5,yt.ndist=(Nt&31)+1,Nt>>>=5,Jt-=5,yt.ncode=(Nt&15)+4,Nt>>>=4,Jt-=4,yt.nlen>286||yt.ndist>30){Gt.msg="too many length or distance symbols",yt.mode=kr;break}yt.have=0,yt.mode=dr;case dr:for(;yt.have<yt.ncode;){for(;Jt<3;){if(rr===0)break t;rr--,Nt+=gr[ut++]<<Jt,Jt+=8}yt.lens[Zr[yt.have++]]=Nt&7,Nt>>>=3,Jt-=3}for(;yt.have<19;)yt.lens[Zr[yt.have++]]=0;if(yt.lencode=yt.lendyn,yt.lenbits=7,vr={bits:yt.lenbits},Er=g(_,yt.lens,0,19,yt.lencode,0,yt.work,vr),yt.lenbits=vr.bits,Er){Gt.msg="invalid code lengths set",yt.mode=kr;break}yt.have=0,yt.mode=yr;case yr:for(;yt.have<yt.nlen+yt.ndist;){for(;vt=yt.lencode[Nt&(1<<yt.lenbits)-1],Ut=vt>>>24,Ot=vt>>>16&255,zt=vt&65535,!(Ut<=Jt);){if(rr===0)break t;rr--,Nt+=gr[ut++]<<Jt,Jt+=8}if(zt<16)Nt>>>=Ut,Jt-=Ut,yt.lens[yt.have++]=zt;else{if(zt===16){for(xr=Ut+2;Jt<xr;){if(rr===0)break t;rr--,Nt+=gr[ut++]<<Jt,Jt+=8}if(Nt>>>=Ut,Jt-=Ut,yt.have===0){Gt.msg="invalid bit length repeat",yt.mode=kr;break}er=yt.lens[yt.have-1],ot=3+(Nt&3),Nt>>>=2,Jt-=2}else if(zt===17){for(xr=Ut+3;Jt<xr;){if(rr===0)break t;rr--,Nt+=gr[ut++]<<Jt,Jt+=8}Nt>>>=Ut,Jt-=Ut,er=0,ot=3+(Nt&7),Nt>>>=3,Jt-=3}else{for(xr=Ut+7;Jt<xr;){if(rr===0)break t;rr--,Nt+=gr[ut++]<<Jt,Jt+=8}Nt>>>=Ut,Jt-=Ut,er=0,ot=11+(Nt&127),Nt>>>=7,Jt-=7}if(yt.have+ot>yt.nlen+yt.ndist){Gt.msg="invalid bit length repeat",yt.mode=kr;break}for(;ot--;)yt.lens[yt.have++]=er}}if(yt.mode===kr)break;if(yt.lens[256]===0){Gt.msg="invalid code -- missing end-of-block",yt.mode=kr;break}if(yt.lenbits=9,vr={bits:yt.lenbits},Er=g(b,yt.lens,0,yt.nlen,yt.lencode,0,yt.work,vr),yt.lenbits=vr.bits,Er){Gt.msg="invalid literal/lengths set",yt.mode=kr;break}if(yt.distbits=6,yt.distcode=yt.distdyn,vr={bits:yt.distbits},Er=g($,yt.lens,yt.nlen,yt.ndist,yt.distcode,0,yt.work,vr),yt.distbits=vr.bits,Er){Gt.msg="invalid distances set",yt.mode=kr;break}if(yt.mode=Br,ir===rt)break t;case Br:yt.mode=Lr;case Lr:if(rr>=6&&Ct>=258){Gt.next_out=tr,Gt.avail_out=Ct,Gt.next_in=ut,Gt.avail_in=rr,yt.hold=Nt,yt.bits=Jt,d(Gt,wt),tr=Gt.next_out,Hr=Gt.output,Ct=Gt.avail_out,ut=Gt.next_in,gr=Gt.input,rr=Gt.avail_in,Nt=yt.hold,Jt=yt.bits,yt.mode===Xt&&(yt.back=-1);break}for(yt.back=0;vt=yt.lencode[Nt&(1<<yt.lenbits)-1],Ut=vt>>>24,Ot=vt>>>16&255,zt=vt&65535,!(Ut<=Jt);){if(rr===0)break t;rr--,Nt+=gr[ut++]<<Jt,Jt+=8}if(Ot&&!(Ot&240)){for(Kt=Ut,_e=Ot,_r=zt;vt=yt.lencode[_r+((Nt&(1<<Kt+_e)-1)>>Kt)],Ut=vt>>>24,Ot=vt>>>16&255,zt=vt&65535,!(Kt+Ut<=Jt);){if(rr===0)break t;rr--,Nt+=gr[ut++]<<Jt,Jt+=8}Nt>>>=Kt,Jt-=Kt,yt.back+=Kt}if(Nt>>>=Ut,Jt-=Ut,yt.back+=Ut,yt.length=zt,Ot===0){yt.mode=ur;break}if(Ot&32){yt.back=-1,yt.mode=Xt;break}if(Ot&64){Gt.msg="invalid literal/length code",yt.mode=kr;break}yt.extra=Ot&15,yt.mode=Ur;case Ur:if(yt.extra){for(xr=yt.extra;Jt<xr;){if(rr===0)break t;rr--,Nt+=gr[ut++]<<Jt,Jt+=8}yt.length+=Nt&(1<<yt.extra)-1,Nt>>>=yt.extra,Jt-=yt.extra,yt.back+=yt.extra}yt.was=yt.length,yt.mode=or;case or:for(;vt=yt.distcode[Nt&(1<<yt.distbits)-1],Ut=vt>>>24,Ot=vt>>>16&255,zt=vt&65535,!(Ut<=Jt);){if(rr===0)break t;rr--,Nt+=gr[ut++]<<Jt,Jt+=8}if(!(Ot&240)){for(Kt=Ut,_e=Ot,_r=zt;vt=yt.distcode[_r+((Nt&(1<<Kt+_e)-1)>>Kt)],Ut=vt>>>24,Ot=vt>>>16&255,zt=vt&65535,!(Kt+Ut<=Jt);){if(rr===0)break t;rr--,Nt+=gr[ut++]<<Jt,Jt+=8}Nt>>>=Kt,Jt-=Kt,yt.back+=Kt}if(Nt>>>=Ut,Jt-=Ut,yt.back+=Ut,Ot&64){Gt.msg="invalid distance code",yt.mode=kr;break}yt.offset=zt,yt.extra=Ot&15,yt.mode=mr;case mr:if(yt.extra){for(xr=yt.extra;Jt<xr;){if(rr===0)break t;rr--,Nt+=gr[ut++]<<Jt,Jt+=8}yt.offset+=Nt&(1<<yt.extra)-1,Nt>>>=yt.extra,Jt-=yt.extra,yt.back+=yt.extra}if(yt.offset>yt.dmax){Gt.msg="invalid distance too far back",yt.mode=kr;break}yt.mode=Ir;case Ir:if(Ct===0)break t;if(ot=wt-Ct,yt.offset>ot){if(ot=yt.offset-ot,ot>yt.whave&&yt.sane){Gt.msg="invalid distance too far back",yt.mode=kr;break}ot>yt.wnext?(ot-=yt.wnext,st=yt.wsize-ot):st=yt.wnext-ot,ot>yt.length&&(ot=yt.length),ht=yt.window}else ht=Hr,st=tr-yt.offset,ot=yt.length;ot>Ct&&(ot=Ct),Ct-=ot,yt.length-=ot;do Hr[tr++]=ht[st++];while(--ot);yt.length===0&&(yt.mode=Lr);break;case ur:if(Ct===0)break t;Hr[tr++]=yt.length,Ct--,yt.mode=Lr;break;case lr:if(yt.wrap){for(;Jt<32;){if(rr===0)break t;rr--,Nt|=gr[ut++]<<Jt,Jt+=8}if(wt-=Ct,Gt.total_out+=wt,yt.total+=wt,wt&&(Gt.adler=yt.check=yt.flags?h(yt.check,Hr,wt,tr-wt):o(yt.check,Hr,wt,tr-wt)),wt=Ct,(yt.flags?Nt:Cr(Nt))!==yt.check){Gt.msg="incorrect data check",yt.mode=kr;break}Nt=0,Jt=0}yt.mode=Xr;case Xr:if(yt.wrap&&yt.flags){for(;Jt<32;){if(rr===0)break t;rr--,Nt+=gr[ut++]<<Jt,Jt+=8}if(Nt!==(yt.total&4294967295)){Gt.msg="incorrect length check",yt.mode=kr;break}Nt=0,Jt=0}yt.mode=zr;case zr:Er=At;break t;case kr:Er=gt;break t;case Tr:return _t;case Mr:default:return lt}return Gt.next_out=tr,Gt.avail_out=Ct,Gt.next_in=ut,Gt.avail_in=rr,yt.hold=Nt,yt.bits=Jt,(yt.wsize||wt!==Gt.avail_out&&yt.mode<kr&&(yt.mode<lr||ir!==et))&&en(Gt,Gt.output,Gt.next_out,wt-Gt.avail_out),Rr-=Gt.avail_in,wt-=Gt.avail_out,Gt.total_in+=Rr,Gt.total_out+=wt,yt.total+=wt,yt.wrap&&wt&&(Gt.adler=yt.check=yt.flags?h(yt.check,Hr,wt,Gt.next_out-wt):o(yt.check,Hr,wt,Gt.next_out-wt)),Gt.data_type=yt.bits+(yt.last?64:0)+(yt.mode===Xt?128:0)+(yt.mode===Br||yt.mode===ar?256:0),(Rr===0&&wt===0||ir===et)&&Er===nt&&(Er=ct),Er}function sr(Gt){if(!Gt||!Gt.state)return lt;var ir=Gt.state;return ir.window&&(ir.window=null),Gt.state=null,nt}function hr(Gt,ir){var yt;return!Gt||!Gt.state||(yt=Gt.state,!(yt.wrap&2))?lt:(yt.head=ir,ir.done=!1,nt)}function br(Gt,ir){var yt=ir.length,gr,Hr,ut;return!Gt||!Gt.state||(gr=Gt.state,gr.wrap!==0&&gr.mode!==Vt)?lt:gr.mode===Vt&&(Hr=1,Hr=o(Hr,ir,yt,0),Hr!==gr.check)?gt:(ut=en(Gt,ir,yt,yt),ut?(gr.mode=Tr,_t):(gr.havedict=1,nt))}return inflate$5.inflateReset=Jr,inflate$5.inflateReset2=Dr,inflate$5.inflateResetKeep=An,inflate$5.inflateInit=qr,inflate$5.inflateInit2=on,inflate$5.inflate=Ft,inflate$5.inflateEnd=sr,inflate$5.inflateGetHeader=hr,inflate$5.inflateSetDictionary=br,inflate$5.inflateInfo="pako inflate (from Nodeca project)",inflate$5}var constants$3,hasRequiredConstants$2;function requireConstants$2(){return hasRequiredConstants$2||(hasRequiredConstants$2=1,constants$3={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}),constants$3}var gzheader$3,hasRequiredGzheader$1;function requireGzheader$1(){if(hasRequiredGzheader$1)return gzheader$3;hasRequiredGzheader$1=1;function s(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}return gzheader$3=s,gzheader$3}var hasRequiredInflate$2;function requireInflate$2(){if(hasRequiredInflate$2)return inflate$6;hasRequiredInflate$2=1;var s=requireInflate$3(),o=requireCommon$1(),h=requireStrings$1(),d=requireConstants$2(),g=requireMessages$1(),_=requireZstream$1(),b=requireGzheader$1(),$=Object.prototype.toString;function et(nt){if(!(this instanceof et))return new et(nt);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},nt||{});var At=this.options;At.raw&&At.windowBits>=0&&At.windowBits<16&&(At.windowBits=-At.windowBits,At.windowBits===0&&(At.windowBits=-15)),At.windowBits>=0&&At.windowBits<16&&!(nt&&nt.windowBits)&&(At.windowBits+=32),At.windowBits>15&&At.windowBits<48&&(At.windowBits&15||(At.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new _,this.strm.avail_out=0;var at=s.inflateInit2(this.strm,At.windowBits);if(at!==d.Z_OK)throw new Error(g[at]);if(this.header=new b,s.inflateGetHeader(this.strm,this.header),At.dictionary&&(typeof At.dictionary=="string"?At.dictionary=h.string2buf(At.dictionary):$.call(At.dictionary)==="[object ArrayBuffer]"&&(At.dictionary=new Uint8Array(At.dictionary)),At.raw&&(at=s.inflateSetDictionary(this.strm,At.dictionary),at!==d.Z_OK)))throw new Error(g[at])}et.prototype.push=function(nt,At){var at=this.strm,lt=this.options.chunkSize,gt=this.options.dictionary,_t,ct,pt,dt,mt,Qt=!1;if(this.ended)return!1;ct=At===~~At?At:At===!0?d.Z_FINISH:d.Z_NO_FLUSH,typeof nt=="string"?at.input=h.binstring2buf(nt):$.call(nt)==="[object ArrayBuffer]"?at.input=new Uint8Array(nt):at.input=nt,at.next_in=0,at.avail_in=at.input.length;do{if(at.avail_out===0&&(at.output=new o.Buf8(lt),at.next_out=0,at.avail_out=lt),_t=s.inflate(at,d.Z_NO_FLUSH),_t===d.Z_NEED_DICT&&gt&&(_t=s.inflateSetDictionary(this.strm,gt)),_t===d.Z_BUF_ERROR&&Qt===!0&&(_t=d.Z_OK,Qt=!1),_t!==d.Z_STREAM_END&&_t!==d.Z_OK)return this.onEnd(_t),this.ended=!0,!1;at.next_out&&(at.avail_out===0||_t===d.Z_STREAM_END||at.avail_in===0&&(ct===d.Z_FINISH||ct===d.Z_SYNC_FLUSH))&&(this.options.to==="string"?(pt=h.utf8border(at.output,at.next_out),dt=at.next_out-pt,mt=h.buf2string(at.output,pt),at.next_out=dt,at.avail_out=lt-dt,dt&&o.arraySet(at.output,at.output,pt,dt,0),this.onData(mt)):this.onData(o.shrinkBuf(at.output,at.next_out))),at.avail_in===0&&at.avail_out===0&&(Qt=!0)}while((at.avail_in>0||at.avail_out===0)&&_t!==d.Z_STREAM_END);return _t===d.Z_STREAM_END&&(ct=d.Z_FINISH),ct===d.Z_FINISH?(_t=s.inflateEnd(this.strm),this.onEnd(_t),this.ended=!0,_t===d.Z_OK):(ct===d.Z_SYNC_FLUSH&&(this.onEnd(d.Z_OK),at.avail_out=0),!0)},et.prototype.onData=function(nt){this.chunks.push(nt)},et.prototype.onEnd=function(nt){nt===d.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=nt,this.msg=this.strm.msg};function tt(nt,At){var at=new et(At);if(at.push(nt,!0),at.err)throw at.msg||g[at.err];return at.result}function rt(nt,At){return At=At||{},At.raw=!0,tt(nt,At)}return inflate$6.Inflate=et,inflate$6.inflate=tt,inflate$6.inflateRaw=rt,inflate$6.ungzip=tt,inflate$6}var pako_1$1,hasRequiredPako$1;function requirePako$1(){if(hasRequiredPako$1)return pako_1$1;hasRequiredPako$1=1;var s=requireCommon$1().assign,o=requireDeflate$2(),h=requireInflate$2(),d=requireConstants$2(),g={};return s(g,o,h,d),pako_1$1=g,pako_1$1}(function(s){(function(){var o={},h;s.exports=o,typeof commonjsRequire$1=="function"?h=requirePako$1():h=window.pako,function(d,g){d.toRGBA8=function(_){var b=_.width,$=_.height;if(_.tabs.acTL==null)return[d.toRGBA8.decodeImage(_.data,b,$,_).buffer];var et=[];_.frames[0].data==null&&(_.frames[0].data=_.data);for(var tt,rt=new Uint8Array(b*$*4),nt=0;nt<_.frames.length;nt++){var At=_.frames[nt],at=At.rect.x,lt=At.rect.y,gt=At.rect.width,_t=At.rect.height,ct=d.toRGBA8.decodeImage(At.data,gt,_t,_);if(nt==0?tt=ct:At.blend==0?d._copyTile(ct,gt,_t,tt,b,$,at,lt,0):At.blend==1&&d._copyTile(ct,gt,_t,tt,b,$,at,lt,1),et.push(tt.buffer),tt=tt.slice(0),At.dispose!=0){if(At.dispose==1)d._copyTile(rt,gt,_t,tt,b,$,at,lt,0);else if(At.dispose==2){for(var pt=nt-1;_.frames[pt].dispose==2;)pt--;tt=new Uint8Array(et[pt]).slice(0)}}}return et},d.toRGBA8.decodeImage=function(_,b,$,et){var tt=b*$,rt=d.decode._getBPP(et),nt=Math.ceil(b*rt/8),At=new Uint8Array(tt*4),at=new Uint32Array(At.buffer),lt=et.ctype,gt=et.depth,_t=d._bin.readUshort;if(lt==6){var ct=tt<<2;if(gt==8)for(var pt=0;pt<ct;pt++)At[pt]=_[pt];if(gt==16)for(var pt=0;pt<ct;pt++)At[pt]=_[pt<<1]}else if(lt==2){var dt=et.tabs.tRNS,mt=-1,Qt=-1,xt=-1;if(dt&&(mt=dt[0],Qt=dt[1],xt=dt[2]),gt==8)for(var pt=0;pt<tt;pt++){var bt=pt<<2,kt=pt*3;At[bt]=_[kt],At[bt+1]=_[kt+1],At[bt+2]=_[kt+2],At[bt+3]=255,mt!=-1&&_[kt]==mt&&_[kt+1]==Qt&&_[kt+2]==xt&&(At[bt+3]=0)}if(gt==16)for(var pt=0;pt<tt;pt++){var bt=pt<<2,kt=pt*6;At[bt]=_[kt],At[bt+1]=_[kt+2],At[bt+2]=_[kt+4],At[bt+3]=255,mt!=-1&&_t(_,kt)==mt&&_t(_,kt+2)==Qt&&_t(_,kt+4)==xt&&(At[bt+3]=0)}}else if(lt==3){var Lt=et.tabs.PLTE,Ht=et.tabs.tRNS,Pt=Ht?Ht.length:0;if(gt==1)for(var jt=0;jt<$;jt++)for(var Vt=jt*nt,Xt=jt*b,pt=0;pt<b;pt++){var bt=Xt+pt<<2,nr=_[Vt+(pt>>3)]>>7-((pt&7)<<0)&1,Ar=3*nr;At[bt]=Lt[Ar],At[bt+1]=Lt[Ar+1],At[bt+2]=Lt[Ar+2],At[bt+3]=nr<Pt?Ht[nr]:255}if(gt==2)for(var jt=0;jt<$;jt++)for(var Vt=jt*nt,Xt=jt*b,pt=0;pt<b;pt++){var bt=Xt+pt<<2,nr=_[Vt+(pt>>2)]>>6-((pt&3)<<1)&3,Ar=3*nr;At[bt]=Lt[Ar],At[bt+1]=Lt[Ar+1],At[bt+2]=Lt[Ar+2],At[bt+3]=nr<Pt?Ht[nr]:255}if(gt==4)for(var jt=0;jt<$;jt++)for(var Vt=jt*nt,Xt=jt*b,pt=0;pt<b;pt++){var bt=Xt+pt<<2,nr=_[Vt+(pt>>1)]>>4-((pt&1)<<2)&15,Ar=3*nr;At[bt]=Lt[Ar],At[bt+1]=Lt[Ar+1],At[bt+2]=Lt[Ar+2],At[bt+3]=nr<Pt?Ht[nr]:255}if(gt==8)for(var pt=0;pt<tt;pt++){var bt=pt<<2,nr=_[pt],Ar=3*nr;At[bt]=Lt[Ar],At[bt+1]=Lt[Ar+1],At[bt+2]=Lt[Ar+2],At[bt+3]=nr<Pt?Ht[nr]:255}}else if(lt==4){if(gt==8)for(var pt=0;pt<tt;pt++){var bt=pt<<2,ar=pt<<1,Wt=_[ar];At[bt]=Wt,At[bt+1]=Wt,At[bt+2]=Wt,At[bt+3]=_[ar+1]}if(gt==16)for(var pt=0;pt<tt;pt++){var bt=pt<<2,ar=pt<<2,Wt=_[ar];At[bt]=Wt,At[bt+1]=Wt,At[bt+2]=Wt,At[bt+3]=_[ar+2]}}else if(lt==0){var mt=et.tabs.tRNS?et.tabs.tRNS:-1;if(gt==1)for(var pt=0;pt<tt;pt++){var Wt=255*(_[pt>>3]>>7-(pt&7)&1),pr=Wt==mt*255?0:255;at[pt]=pr<<24|Wt<<16|Wt<<8|Wt}if(gt==2)for(var pt=0;pt<tt;pt++){var Wt=85*(_[pt>>2]>>6-((pt&3)<<1)&3),pr=Wt==mt*85?0:255;at[pt]=pr<<24|Wt<<16|Wt<<8|Wt}if(gt==4)for(var pt=0;pt<tt;pt++){var Wt=17*(_[pt>>1]>>4-((pt&1)<<2)&15),pr=Wt==mt*17?0:255;at[pt]=pr<<24|Wt<<16|Wt<<8|Wt}if(gt==8)for(var pt=0;pt<tt;pt++){var Wt=_[pt],pr=Wt==mt?0:255;at[pt]=pr<<24|Wt<<16|Wt<<8|Wt}if(gt==16)for(var pt=0;pt<tt;pt++){var Wt=_[pt<<1],pr=_t(_,pt<<1)==mt?0:255;at[pt]=pr<<24|Wt<<16|Wt<<8|Wt}}return At},d.decode=function(_){for(var b=new Uint8Array(_),$=8,et=d._bin,tt=et.readUshort,rt=et.readUint,nt={tabs:{},frames:[]},At=new Uint8Array(b.length),at=0,lt,gt=0,_t=[137,80,78,71,13,10,26,10],ct=0;ct<8;ct++)if(b[ct]!=_t[ct])throw"The input is not a PNG file!";for(;$<b.length;){var pt=et.readUint(b,$);$+=4;var dt=et.readASCII(b,$,4);if($+=4,dt=="IHDR")d.decode._IHDR(b,$,nt);else if(dt=="IDAT"){for(var ct=0;ct<pt;ct++)At[at+ct]=b[$+ct];at+=pt}else if(dt=="acTL")nt.tabs[dt]={num_frames:rt(b,$),num_plays:rt(b,$+4)},lt=new Uint8Array(b.length);else if(dt=="fcTL"){if(gt!=0){var mt=nt.frames[nt.frames.length-1];mt.data=d.decode._decompress(nt,lt.slice(0,gt),mt.rect.width,mt.rect.height),gt=0}var Qt={x:rt(b,$+12),y:rt(b,$+16),width:rt(b,$+4),height:rt(b,$+8)},xt=tt(b,$+22);xt=tt(b,$+20)/(xt==0?100:xt);var bt={rect:Qt,delay:Math.round(xt*1e3),dispose:b[$+24],blend:b[$+25]};nt.frames.push(bt)}else if(dt=="fdAT"){for(var ct=0;ct<pt-4;ct++)lt[gt+ct]=b[$+ct+4];gt+=pt-4}else if(dt=="pHYs")nt.tabs[dt]=[et.readUint(b,$),et.readUint(b,$+4),b[$+8]];else if(dt=="cHRM"){nt.tabs[dt]=[];for(var ct=0;ct<8;ct++)nt.tabs[dt].push(et.readUint(b,$+ct*4))}else if(dt=="tEXt"){nt.tabs[dt]==null&&(nt.tabs[dt]={});var kt=et.nextZero(b,$),Lt=et.readASCII(b,$,kt-$),Ht=et.readASCII(b,kt+1,$+pt-kt-1);nt.tabs[dt][Lt]=Ht}else if(dt=="iTXt"){nt.tabs[dt]==null&&(nt.tabs[dt]={});var kt=0,Pt=$;kt=et.nextZero(b,Pt);var Lt=et.readASCII(b,Pt,kt-Pt);Pt=kt+1,b[Pt],b[Pt+1],Pt+=2,kt=et.nextZero(b,Pt),et.readASCII(b,Pt,kt-Pt),Pt=kt+1,kt=et.nextZero(b,Pt),et.readUTF8(b,Pt,kt-Pt),Pt=kt+1;var Ht=et.readUTF8(b,Pt,pt-(Pt-$));nt.tabs[dt][Lt]=Ht}else if(dt=="PLTE")nt.tabs[dt]=et.readBytes(b,$,pt);else if(dt=="hIST"){var jt=nt.tabs.PLTE.length/3;nt.tabs[dt]=[];for(var ct=0;ct<jt;ct++)nt.tabs[dt].push(tt(b,$+ct*2))}else if(dt=="tRNS")nt.ctype==3?nt.tabs[dt]=et.readBytes(b,$,pt):nt.ctype==0?nt.tabs[dt]=tt(b,$):nt.ctype==2&&(nt.tabs[dt]=[tt(b,$),tt(b,$+2),tt(b,$+4)]);else if(dt=="gAMA")nt.tabs[dt]=et.readUint(b,$)/1e5;else if(dt=="sRGB")nt.tabs[dt]=b[$];else if(dt=="bKGD")nt.ctype==0||nt.ctype==4?nt.tabs[dt]=[tt(b,$)]:nt.ctype==2||nt.ctype==6?nt.tabs[dt]=[tt(b,$),tt(b,$+2),tt(b,$+4)]:nt.ctype==3&&(nt.tabs[dt]=b[$]);else if(dt=="IEND"){if(gt!=0){var mt=nt.frames[nt.frames.length-1];mt.data=d.decode._decompress(nt,lt.slice(0,gt),mt.rect.width,mt.rect.height),gt=0}nt.data=d.decode._decompress(nt,At,nt.width,nt.height);break}$+=pt,et.readUint(b,$),$+=4}return delete nt.compress,delete nt.interlace,delete nt.filter,nt},d.decode._decompress=function(_,b,$,et){return _.compress==0&&(b=d.decode._inflate(b)),_.interlace==0?b=d.decode._filterZero(b,_,0,$,et):_.interlace==1&&(b=d.decode._readInterlace(b,_)),b},d.decode._inflate=function(_){return g.inflate(_)},d.decode._readInterlace=function(_,b){for(var $=b.width,et=b.height,tt=d.decode._getBPP(b),rt=tt>>3,nt=Math.ceil($*tt/8),At=new Uint8Array(et*nt),at=0,lt=[0,0,4,0,2,0,1],gt=[0,4,0,2,0,1,0],_t=[8,8,8,4,4,2,2],ct=[8,8,4,4,2,2,1],pt=0;pt<7;){for(var dt=_t[pt],mt=ct[pt],Qt=0,xt=0,bt=lt[pt];bt<et;)bt+=dt,xt++;for(var kt=gt[pt];kt<$;)kt+=mt,Qt++;var Lt=Math.ceil(Qt*tt/8);d.decode._filterZero(_,b,at,Qt,xt);for(var Ht=0,Pt=lt[pt];Pt<et;){for(var jt=gt[pt],Vt=at+Ht*Lt<<3;jt<$;){if(tt==1){var Xt=_[Vt>>3];Xt=Xt>>7-(Vt&7)&1,At[Pt*nt+(jt>>3)]|=Xt<<7-((jt&3)<<0)}if(tt==2){var Xt=_[Vt>>3];Xt=Xt>>6-(Vt&7)&3,At[Pt*nt+(jt>>2)]|=Xt<<6-((jt&3)<<1)}if(tt==4){var Xt=_[Vt>>3];Xt=Xt>>4-(Vt&7)&15,At[Pt*nt+(jt>>1)]|=Xt<<4-((jt&1)<<2)}if(tt>=8)for(var nr=Pt*nt+jt*rt,Ar=0;Ar<rt;Ar++)At[nr+Ar]=_[(Vt>>3)+Ar];Vt+=tt,jt+=mt}Ht++,Pt+=dt}Qt*xt!=0&&(at+=xt*(1+Lt)),pt=pt+1}return At},d.decode._getBPP=function(_){var b=[1,null,3,1,2,null,4][_.ctype];return b*_.depth},d.decode._filterZero=function(_,b,$,et,tt){var rt=d.decode._getBPP(b),nt=Math.ceil(et*rt/8),At=d.decode._paeth;rt=Math.ceil(rt/8);for(var at=0;at<tt;at++){var lt=$+at*nt,gt=lt+at+1,_t=_[gt-1];if(_t==0)for(var ct=0;ct<nt;ct++)_[lt+ct]=_[gt+ct];else if(_t==1){for(var ct=0;ct<rt;ct++)_[lt+ct]=_[gt+ct];for(var ct=rt;ct<nt;ct++)_[lt+ct]=_[gt+ct]+_[lt+ct-rt]&255}else if(at==0){for(var ct=0;ct<rt;ct++)_[lt+ct]=_[gt+ct];if(_t==2)for(var ct=rt;ct<nt;ct++)_[lt+ct]=_[gt+ct]&255;if(_t==3)for(var ct=rt;ct<nt;ct++)_[lt+ct]=_[gt+ct]+(_[lt+ct-rt]>>1)&255;if(_t==4)for(var ct=rt;ct<nt;ct++)_[lt+ct]=_[gt+ct]+At(_[lt+ct-rt],0,0)&255}else{if(_t==2)for(var ct=0;ct<nt;ct++)_[lt+ct]=_[gt+ct]+_[lt+ct-nt]&255;if(_t==3){for(var ct=0;ct<rt;ct++)_[lt+ct]=_[gt+ct]+(_[lt+ct-nt]>>1)&255;for(var ct=rt;ct<nt;ct++)_[lt+ct]=_[gt+ct]+(_[lt+ct-nt]+_[lt+ct-rt]>>1)&255}if(_t==4){for(var ct=0;ct<rt;ct++)_[lt+ct]=_[gt+ct]+At(0,_[lt+ct-nt],0)&255;for(var ct=rt;ct<nt;ct++)_[lt+ct]=_[gt+ct]+At(_[lt+ct-rt],_[lt+ct-nt],_[lt+ct-rt-nt])&255}}}return _},d.decode._paeth=function(_,b,$){var et=_+b-$,tt=Math.abs(et-_),rt=Math.abs(et-b),nt=Math.abs(et-$);return tt<=rt&&tt<=nt?_:rt<=nt?b:$},d.decode._IHDR=function(_,b,$){var et=d._bin;$.width=et.readUint(_,b),b+=4,$.height=et.readUint(_,b),b+=4,$.depth=_[b],b++,$.ctype=_[b],b++,$.compress=_[b],b++,$.filter=_[b],b++,$.interlace=_[b],b++},d._bin={nextZero:function(_,b){for(;_[b]!=0;)b++;return b},readUshort:function(_,b){return _[b]<<8|_[b+1]},writeUshort:function(_,b,$){_[b]=$>>8&255,_[b+1]=$&255},readUint:function(_,b){return _[b]*(256*256*256)+(_[b+1]<<16|_[b+2]<<8|_[b+3])},writeUint:function(_,b,$){_[b]=$>>24&255,_[b+1]=$>>16&255,_[b+2]=$>>8&255,_[b+3]=$&255},readASCII:function(_,b,$){for(var et="",tt=0;tt<$;tt++)et+=String.fromCharCode(_[b+tt]);return et},writeASCII:function(_,b,$){for(var et=0;et<$.length;et++)_[b+et]=$.charCodeAt(et)},readBytes:function(_,b,$){for(var et=[],tt=0;tt<$;tt++)et.push(_[b+tt]);return et},pad:function(_){return _.length<2?"0"+_:_},readUTF8:function(_,b,$){for(var et="",tt,rt=0;rt<$;rt++)et+="%"+d._bin.pad(_[b+rt].toString(16));try{tt=decodeURIComponent(et)}catch{return d._bin.readASCII(_,b,$)}return tt}},d._copyTile=function(_,b,$,et,tt,rt,nt,At,at){for(var lt=Math.min(b,tt),gt=Math.min($,rt),_t=0,ct=0,pt=0;pt<gt;pt++)for(var dt=0;dt<lt;dt++)if(nt>=0&&At>=0?(_t=pt*b+dt<<2,ct=(At+pt)*tt+nt+dt<<2):(_t=(-At+pt)*b-nt+dt<<2,ct=pt*tt+dt<<2),at==0)et[ct]=_[_t],et[ct+1]=_[_t+1],et[ct+2]=_[_t+2],et[ct+3]=_[_t+3];else if(at==1){var mt=_[_t+3]*.00392156862745098,Qt=_[_t]*mt,xt=_[_t+1]*mt,bt=_[_t+2]*mt,kt=et[ct+3]*(1/255),Lt=et[ct]*kt,Ht=et[ct+1]*kt,Pt=et[ct+2]*kt,jt=1-mt,Vt=mt+kt*jt,Xt=Vt==0?0:1/Vt;et[ct+3]=255*Vt,et[ct+0]=(Qt+Lt*jt)*Xt,et[ct+1]=(xt+Ht*jt)*Xt,et[ct+2]=(bt+Pt*jt)*Xt}else if(at==2){var mt=_[_t+3],Qt=_[_t],xt=_[_t+1],bt=_[_t+2],kt=et[ct+3],Lt=et[ct],Ht=et[ct+1],Pt=et[ct+2];mt==kt&&Qt==Lt&&xt==Ht&&bt==Pt?(et[ct]=0,et[ct+1]=0,et[ct+2]=0,et[ct+3]=0):(et[ct]=Qt,et[ct+1]=xt,et[ct+2]=bt,et[ct+3]=mt)}else if(at==3){var mt=_[_t+3],Qt=_[_t],xt=_[_t+1],bt=_[_t+2],kt=et[ct+3],Lt=et[ct],Ht=et[ct+1],Pt=et[ct+2];if(mt==kt&&Qt==Lt&&xt==Ht&&bt==Pt)continue;if(mt<220&&kt>20)return!1}return!0},d.encode=function(_,b,$,et,tt,rt){et==null&&(et=0),rt==null&&(rt=!1);for(var nt=new Uint8Array(_[0].byteLength*_.length+100),At=[137,80,78,71,13,10,26,10],at=0;at<8;at++)nt[at]=At[at];var lt=8,gt=d._bin,_t=d.crc.crc,ct=gt.writeUint,pt=gt.writeUshort,dt=gt.writeASCII,mt=d.encode.compressPNG(_,b,$,et,rt);ct(nt,lt,13),lt+=4,dt(nt,lt,"IHDR"),lt+=4,ct(nt,lt,b),lt+=4,ct(nt,lt,$),lt+=4,nt[lt]=mt.depth,lt++,nt[lt]=mt.ctype,lt++,nt[lt]=0,lt++,nt[lt]=0,lt++,nt[lt]=0,lt++,ct(nt,lt,_t(nt,lt-17,17)),lt+=4,ct(nt,lt,1),lt+=4,dt(nt,lt,"sRGB"),lt+=4,nt[lt]=1,lt++,ct(nt,lt,_t(nt,lt-5,5)),lt+=4;var Qt=_.length>1;if(Qt&&(ct(nt,lt,8),lt+=4,dt(nt,lt,"acTL"),lt+=4,ct(nt,lt,_.length),lt+=4,ct(nt,lt,0),lt+=4,ct(nt,lt,_t(nt,lt-12,12)),lt+=4),mt.ctype==3){var xt=mt.plte.length;ct(nt,lt,xt*3),lt+=4,dt(nt,lt,"PLTE"),lt+=4;for(var at=0;at<xt;at++){var bt=at*3,kt=mt.plte[at],Lt=kt&255,Ht=kt>>8&255,Pt=kt>>16&255;nt[lt+bt+0]=Lt,nt[lt+bt+1]=Ht,nt[lt+bt+2]=Pt}if(lt+=xt*3,ct(nt,lt,_t(nt,lt-xt*3-4,xt*3+4)),lt+=4,mt.gotAlpha){ct(nt,lt,xt),lt+=4,dt(nt,lt,"tRNS"),lt+=4;for(var at=0;at<xt;at++)nt[lt+at]=mt.plte[at]>>24&255;lt+=xt,ct(nt,lt,_t(nt,lt-xt-4,xt+4)),lt+=4}}for(var jt=0,Vt=0;Vt<mt.frames.length;Vt++){var Xt=mt.frames[Vt];Qt&&(ct(nt,lt,26),lt+=4,dt(nt,lt,"fcTL"),lt+=4,ct(nt,lt,jt++),lt+=4,ct(nt,lt,Xt.rect.width),lt+=4,ct(nt,lt,Xt.rect.height),lt+=4,ct(nt,lt,Xt.rect.x),lt+=4,ct(nt,lt,Xt.rect.y),lt+=4,pt(nt,lt,tt[Vt]),lt+=2,pt(nt,lt,1e3),lt+=2,nt[lt]=Xt.dispose,lt++,nt[lt]=Xt.blend,lt++,ct(nt,lt,_t(nt,lt-30,30)),lt+=4);var nr=Xt.cimg,xt=nr.length;ct(nt,lt,xt+(Vt==0?0:4)),lt+=4;var Ar=lt;dt(nt,lt,Vt==0?"IDAT":"fdAT"),lt+=4,Vt!=0&&(ct(nt,lt,jt++),lt+=4);for(var at=0;at<xt;at++)nt[lt+at]=nr[at];lt+=xt,ct(nt,lt,_t(nt,Ar,lt-Ar)),lt+=4}return ct(nt,lt,0),lt+=4,dt(nt,lt,"IEND"),lt+=4,ct(nt,lt,_t(nt,lt-4,4)),lt+=4,nt.buffer.slice(0,lt)},d.encode.compressPNG=function(_,b,$,et,tt){for(var rt=d.encode.compress(_,b,$,et,!1,tt),nt=0;nt<_.length;nt++){var At=rt.frames[nt];At.rect.width;var at=At.rect.height,lt=At.bpl,gt=At.bpp,_t=new Uint8Array(at*lt+at);At.cimg=d.encode._filterZero(At.img,at,gt,lt,_t)}return rt},d.encode.compress=function(_,b,$,et,tt,rt){rt==null&&(rt=!1);for(var nt=6,At=8,at=4,lt=255,gt=0;gt<_.length;gt++)for(var _t=new Uint8Array(_[gt]),ct=_t.length,pt=0;pt<ct;pt+=4)lt&=_t[pt+3];var dt=lt!=255,mt={},Qt=[];if(_.length!=0&&(mt[0]=0,Qt.push(0),et!=0&&et--),et!=0){var xt=d.quantize(_,et,tt);_=xt.bufs;for(var pt=0;pt<xt.plte.length;pt++){var bt=xt.plte[pt].est.rgba;mt[bt]==null&&(mt[bt]=Qt.length,Qt.push(bt))}}else for(var gt=0;gt<_.length;gt++)for(var kt=new Uint32Array(_[gt]),ct=kt.length,pt=0;pt<ct;pt++){var bt=kt[pt];if((pt<b||bt!=kt[pt-1]&&bt!=kt[pt-b])&&mt[bt]==null&&(mt[bt]=Qt.length,Qt.push(bt),Qt.length>=300))break}var Lt=dt?tt:!1,Ht=Qt.length;Ht<=256&&rt==!1&&(Ht<=2?At=1:Ht<=4?At=2:Ht<=16?At=4:At=8,tt&&(At=8),dt=!0);for(var Pt=[],gt=0;gt<_.length;gt++){var jt=new Uint8Array(_[gt]),Vt=new Uint32Array(jt.buffer),Xt=0,nr=0,Ar=b,ar=$,Wt=0;if(gt!=0&&!Lt){for(var pr=tt||gt==1||Pt[Pt.length-2].dispose==2?1:2,dr=0,yr=1e9,Br=0;Br<pr;Br++){for(var zr=new Uint8Array(_[gt-1-Br]),Lr=new Uint32Array(_[gt-1-Br]),Ur=b,or=$,mr=-1,Ir=-1,ur=0;ur<$;ur++)for(var lr=0;lr<b;lr++){var pt=ur*b+lr;Vt[pt]!=Lr[pt]&&(lr<Ur&&(Ur=lr),lr>mr&&(mr=lr),ur<or&&(or=ur),ur>Ir&&(Ir=ur))}var Xr=mr==-1?1:(mr-Ur+1)*(Ir-or+1);Xr<yr&&(yr=Xr,dr=Br,mr==-1?(Xt=nr=0,Ar=ar=1):(Xt=Ur,nr=or,Ar=mr-Ur+1,ar=Ir-or+1))}var zr=new Uint8Array(_[gt-1-dr]);dr==1&&(Pt[Pt.length-1].dispose=2);var kr=new Uint8Array(Ar*ar*4);new Uint32Array(kr.buffer),d._copyTile(zr,b,$,kr,Ar,ar,-Xt,-nr,0),d._copyTile(jt,b,$,kr,Ar,ar,-Xt,-nr,3)?(d._copyTile(jt,b,$,kr,Ar,ar,-Xt,-nr,2),Wt=1):(d._copyTile(jt,b,$,kr,Ar,ar,-Xt,-nr,0),Wt=0),jt=kr,Vt=new Uint32Array(jt.buffer)}var Tr=4*Ar;if(Ht<=256&&rt==!1){Tr=Math.ceil(At*Ar/8);for(var kr=new Uint8Array(Tr*ar),ur=0;ur<ar;ur++){var pt=ur*Tr,Mr=ur*Ar;if(At==8)for(var lr=0;lr<Ar;lr++)kr[pt+lr]=mt[Vt[Mr+lr]];else if(At==4)for(var lr=0;lr<Ar;lr++)kr[pt+(lr>>1)]|=mt[Vt[Mr+lr]]<<4-(lr&1)*4;else if(At==2)for(var lr=0;lr<Ar;lr++)kr[pt+(lr>>2)]|=mt[Vt[Mr+lr]]<<6-(lr&3)*2;else if(At==1)for(var lr=0;lr<Ar;lr++)kr[pt+(lr>>3)]|=mt[Vt[Mr+lr]]<<7-(lr&7)*1}jt=kr,nt=3,at=1}else if(dt==!1&&_.length==1){for(var kr=new Uint8Array(Ar*ar*3),nn=Ar*ar,pt=0;pt<nn;pt++){var jr=pt*3,Pr=pt*4;kr[jr]=jt[Pr],kr[jr+1]=jt[Pr+1],kr[jr+2]=jt[Pr+2]}jt=kr,nt=2,at=3,Tr=3*Ar}Pt.push({rect:{x:Xt,y:nr,width:Ar,height:ar},img:jt,bpl:Tr,bpp:at,blend:Wt,dispose:Lt?1:0})}return{ctype:nt,depth:At,plte:Qt,gotAlpha:dt,frames:Pt}},d.encode._filterZero=function(_,b,$,et,tt){for(var rt=[],nt=0;nt<5;nt++)if(!(b*et>5e5&&(nt==2||nt==3||nt==4))){for(var At=0;At<b;At++)d.encode._filterLine(tt,_,At,et,$,nt);if(rt.push(g.deflate(tt)),$==1)break}for(var at,lt=1e9,gt=0;gt<rt.length;gt++)rt[gt].length<lt&&(at=gt,lt=rt[gt].length);return rt[at]},d.encode._filterLine=function(_,b,$,et,tt,rt){var nt=$*et,At=nt+$,at=d.decode._paeth;if(_[At]=rt,At++,rt==0)for(var lt=0;lt<et;lt++)_[At+lt]=b[nt+lt];else if(rt==1){for(var lt=0;lt<tt;lt++)_[At+lt]=b[nt+lt];for(var lt=tt;lt<et;lt++)_[At+lt]=b[nt+lt]-b[nt+lt-tt]+256&255}else if($==0){for(var lt=0;lt<tt;lt++)_[At+lt]=b[nt+lt];if(rt==2)for(var lt=tt;lt<et;lt++)_[At+lt]=b[nt+lt];if(rt==3)for(var lt=tt;lt<et;lt++)_[At+lt]=b[nt+lt]-(b[nt+lt-tt]>>1)+256&255;if(rt==4)for(var lt=tt;lt<et;lt++)_[At+lt]=b[nt+lt]-at(b[nt+lt-tt],0,0)+256&255}else{if(rt==2)for(var lt=0;lt<et;lt++)_[At+lt]=b[nt+lt]+256-b[nt+lt-et]&255;if(rt==3){for(var lt=0;lt<tt;lt++)_[At+lt]=b[nt+lt]+256-(b[nt+lt-et]>>1)&255;for(var lt=tt;lt<et;lt++)_[At+lt]=b[nt+lt]+256-(b[nt+lt-et]+b[nt+lt-tt]>>1)&255}if(rt==4){for(var lt=0;lt<tt;lt++)_[At+lt]=b[nt+lt]+256-at(0,b[nt+lt-et],0)&255;for(var lt=tt;lt<et;lt++)_[At+lt]=b[nt+lt]+256-at(b[nt+lt-tt],b[nt+lt-et],b[nt+lt-tt-et])&255}}},d.crc={table:function(){for(var _=new Uint32Array(256),b=0;b<256;b++){for(var $=b,et=0;et<8;et++)$&1?$=3988292384^$>>>1:$=$>>>1;_[b]=$}return _}(),update:function(_,b,$,et){for(var tt=0;tt<et;tt++)_=d.crc.table[(_^b[$+tt])&255]^_>>>8;return _},crc:function(_,b,$){return d.crc.update(4294967295,_,b,$)^4294967295}},d.quantize=function(_,b,$){for(var et=[],tt=0,rt=0;rt<_.length;rt++)et.push(d.encode.alphaMul(new Uint8Array(_[rt]),$)),tt+=_[rt].byteLength;for(var nt=new Uint8Array(tt),At=new Uint32Array(nt.buffer),at=0,rt=0;rt<et.length;rt++){for(var lt=et[rt],gt=lt.length,_t=0;_t<gt;_t++)nt[at+_t]=lt[_t];at+=gt}var ct={i0:0,i1:nt.length,bst:null,est:null,tdst:0,left:null,right:null};ct.bst=d.quantize.stats(nt,ct.i0,ct.i1),ct.est=d.quantize.estats(ct.bst);for(var pt=[ct];pt.length<b;){for(var dt=0,mt=0,rt=0;rt<pt.length;rt++)pt[rt].est.L>dt&&(dt=pt[rt].est.L,mt=rt);if(dt<.001)break;var Qt=pt[mt],xt=d.quantize.splitPixels(nt,At,Qt.i0,Qt.i1,Qt.est.e,Qt.est.eMq255),bt={i0:Qt.i0,i1:xt,bst:null,est:null,tdst:0,left:null,right:null};bt.bst=d.quantize.stats(nt,bt.i0,bt.i1),bt.est=d.quantize.estats(bt.bst);var kt={i0:xt,i1:Qt.i1,bst:null,est:null,tdst:0,left:null,right:null};kt.bst={R:[],m:[],N:Qt.bst.N-bt.bst.N};for(var rt=0;rt<16;rt++)kt.bst.R[rt]=Qt.bst.R[rt]-bt.bst.R[rt];for(var rt=0;rt<4;rt++)kt.bst.m[rt]=Qt.bst.m[rt]-bt.bst.m[rt];kt.est=d.quantize.estats(kt.bst),Qt.left=bt,Qt.right=kt,pt[mt]=bt,pt.push(kt)}pt.sort(function(pr,dr){return dr.bst.N-pr.bst.N});for(var Lt=0;Lt<et.length;Lt++){for(var Ht=d.quantize.planeDst,Pt=new Uint8Array(et[Lt].buffer),jt=new Uint32Array(et[Lt].buffer),Vt=Pt.length,rt=0;rt<Vt;rt+=4){for(var Xt=Pt[rt]*.00392156862745098,nr=Pt[rt+1]*(1/255),Ar=Pt[rt+2]*(1/255),ar=Pt[rt+3]*(1/255),Wt=ct;Wt.left;)Wt=Ht(Wt.est,Xt,nr,Ar,ar)<=0?Wt.left:Wt.right;jt[rt>>2]=Wt.est.rgba}et[Lt]=jt.buffer}return{bufs:et,plte:pt}},d.quantize.getNearest=function(_,b,$,et,tt){if(_.left==null)return _.tdst=d.quantize.dist(_.est.q,b,$,et,tt),_;var rt=d.quantize.planeDst(_.est,b,$,et,tt),nt=_.left,At=_.right;rt>0&&(nt=_.right,At=_.left);var at=d.quantize.getNearest(nt,b,$,et,tt);if(at.tdst<=rt*rt)return at;var lt=d.quantize.getNearest(At,b,$,et,tt);return lt.tdst<at.tdst?lt:at},d.quantize.planeDst=function(_,b,$,et,tt){var rt=_.e;return rt[0]*b+rt[1]*$+rt[2]*et+rt[3]*tt-_.eMq},d.quantize.dist=function(_,b,$,et,tt){var rt=b-_[0],nt=$-_[1],At=et-_[2],at=tt-_[3];return rt*rt+nt*nt+At*At+at*at},d.quantize.splitPixels=function(_,b,$,et,tt,rt){var nt=d.quantize.vecDot;for(et-=4;$<et;){for(;nt(_,$,tt)<=rt;)$+=4;for(;nt(_,et,tt)>rt;)et-=4;if($>=et)break;var At=b[$>>2];b[$>>2]=b[et>>2],b[et>>2]=At,$+=4,et-=4}for(;nt(_,$,tt)>rt;)$-=4;return $+4},d.quantize.vecDot=function(_,b,$){return _[b]*$[0]+_[b+1]*$[1]+_[b+2]*$[2]+_[b+3]*$[3]},d.quantize.stats=function(_,b,$){for(var et=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],tt=[0,0,0,0],rt=$-b>>2,nt=b;nt<$;nt+=4){var At=_[nt]*.00392156862745098,at=_[nt+1]*(1/255),lt=_[nt+2]*(1/255),gt=_[nt+3]*(1/255);tt[0]+=At,tt[1]+=at,tt[2]+=lt,tt[3]+=gt,et[0]+=At*At,et[1]+=At*at,et[2]+=At*lt,et[3]+=At*gt,et[5]+=at*at,et[6]+=at*lt,et[7]+=at*gt,et[10]+=lt*lt,et[11]+=lt*gt,et[15]+=gt*gt}return et[4]=et[1],et[8]=et[2],et[12]=et[3],et[9]=et[6],et[13]=et[7],et[14]=et[11],{R:et,m:tt,N:rt}},d.quantize.estats=function(_){var b=_.R,$=_.m,et=_.N,tt=$[0],rt=$[1],nt=$[2],At=$[3],at=et==0?0:1/et,lt=[b[0]-tt*tt*at,b[1]-tt*rt*at,b[2]-tt*nt*at,b[3]-tt*At*at,b[4]-rt*tt*at,b[5]-rt*rt*at,b[6]-rt*nt*at,b[7]-rt*At*at,b[8]-nt*tt*at,b[9]-nt*rt*at,b[10]-nt*nt*at,b[11]-nt*At*at,b[12]-At*tt*at,b[13]-At*rt*at,b[14]-At*nt*at,b[15]-At*At*at],gt=lt,_t=d.M4,ct=[.5,.5,.5,.5],pt=0,dt=0;if(et!=0)for(var mt=0;mt<10&&(ct=_t.multVec(gt,ct),dt=Math.sqrt(_t.dot(ct,ct)),ct=_t.sml(1/dt,ct),!(Math.abs(dt-pt)<1e-9));mt++)pt=dt;var Qt=[tt*at,rt*at,nt*at,At*at],xt=_t.dot(_t.sml(255,Qt),ct),bt=Qt[3]<.001?0:1/Qt[3];return{Cov:lt,q:Qt,e:ct,L:pt,eMq255:xt,eMq:_t.dot(ct,Qt),rgba:(Math.round(255*Qt[3])<<24|Math.round(255*Qt[2]*bt)<<16|Math.round(255*Qt[1]*bt)<<8|Math.round(255*Qt[0]*bt)<<0)>>>0}},d.M4={multVec:function(_,b){return[_[0]*b[0]+_[1]*b[1]+_[2]*b[2]+_[3]*b[3],_[4]*b[0]+_[5]*b[1]+_[6]*b[2]+_[7]*b[3],_[8]*b[0]+_[9]*b[1]+_[10]*b[2]+_[11]*b[3],_[12]*b[0]+_[13]*b[1]+_[14]*b[2]+_[15]*b[3]]},dot:function(_,b){return _[0]*b[0]+_[1]*b[1]+_[2]*b[2]+_[3]*b[3]},sml:function(_,b){return[_*b[0],_*b[1],_*b[2],_*b[3]]}},d.encode.alphaMul=function(_,b){for(var $=new Uint8Array(_.length),et=_.length>>2,tt=0;tt<et;tt++){var rt=tt<<2,nt=_[rt+3];b&&(nt=nt<128?0:255);var At=nt*(1/255);$[rt+0]=_[rt+0]*At,$[rt+1]=_[rt+1]*At,$[rt+2]=_[rt+2]*At,$[rt+3]=nt}return $}}(o,h)})()})(UPNG$1);var UPNGExports=UPNG$1.exports,Yt=Object.defineProperty,Bt=s=>{throw TypeError(s)},Zt=(s,o,h)=>o in s?Yt(s,o,{enumerable:!0,configurable:!0,writable:!0,value:h}):s[o]=h,$e=(s,o,h)=>Zt(s,typeof o!="symbol"?o+"":o,h),Tt=(s,o,h)=>o.has(s)||Bt("Cannot "+h),St=(s,o,h)=>(Tt(s,o,"read from private field"),h?h.call(s):o.get(s)),It=(s,o,h)=>o.has(s)?Bt("Cannot add the same private member more than once"):o instanceof WeakSet?o.add(s):o.set(s,h),Dt=(s,o,h,d)=>(Tt(s,o,"write to private field"),o.set(s,h),h),$t=(s,o,h)=>(Tt(s,o,"access private method"),h),m=Object.defineProperty,p=(s,o,h)=>o in s?m(s,o,{enumerable:!0,configurable:!0,writable:!0,value:h}):s[o]=h,c=(s,o,h)=>p(s,typeof o!="symbol"?o+"":o,h);class R{constructor(){c(this,"device"),c(this,"server"),c(this,"txCharacteristic"),c(this,"rxCharacteristic"),c(this,"SERVICE_UUID","7a230001-5475-a6a4-654c-8431f6ad49c4"),c(this,"TX_CHARACTERISTIC_UUID","7a230002-5475-a6a4-654c-8431f6ad49c4"),c(this,"RX_CHARACTERISTIC_UUID","7a230003-5475-a6a4-654c-8431f6ad49c4"),c(this,"maxPayload",60),c(this,"awaitingPrintResponse",!1),c(this,"awaitingDataResponse",!1),c(this,"printTimeoutId"),c(this,"printResponsePromise"),c(this,"printResolve"),c(this,"dataResponsePromise"),c(this,"dataResolve"),c(this,"onDataResponse"),c(this,"onPrintResponse"),c(this,"onDisconnectHandler"),c(this,"handleDisconnect",()=>{this.device=void 0,this.server=void 0,this.txCharacteristic=void 0,this.rxCharacteristic=void 0,this.onDisconnectHandler&&this.onDisconnectHandler()}),c(this,"notificationHandler",o=>{const h=o.target.value;if(!(!h||h.buffer.byteLength===0))if(h.byteLength>0&&h.getUint8(0)===1){const d=new Uint8Array(h.buffer,h.byteOffset+1,h.byteLength-1);if(this.awaitingDataResponse&&this.dataResolve&&(this.awaitingDataResponse=!1,this.dataResolve(d)),this.onDataResponse){const g=this.onDataResponse(d);g instanceof Promise&&g.catch(console.error)}}else{const d=new TextDecoder().decode(h);if(this.awaitingPrintResponse&&this.printResolve&&(this.awaitingPrintResponse=!1,this.printResolve(d)),this.onPrintResponse){const g=this.onPrintResponse(d);g instanceof Promise&&g.catch(console.error)}}})}setDataResponseHandler(o){this.onDataResponse=o}setPrintResponseHandler(o){this.onPrintResponse=o}setDisconnectHandler(o){this.onDisconnectHandler=o}async _attemptConnection(){var o,h,d,g;if(!this.device||!this.device.gatt)throw new Error("Bluetooth device or GATT interface not available for connection attempt.");this.txCharacteristic=void 0,this.rxCharacteristic=void 0,this.server=void 0;try{console.log(`Attempting to connect to GATT server on device: ${this.device.name||this.device.id}...`),this.server=await this.device.gatt.connect(),console.log("GATT server connected."),console.log("Getting primary service...");const _=await this.server.getPrimaryService(this.SERVICE_UUID);console.log("Primary service obtained."),console.log("Getting TX characteristic..."),this.txCharacteristic=await _.getCharacteristic(this.TX_CHARACTERISTIC_UUID),console.log("TX characteristic obtained."),console.log("Getting RX characteristic..."),this.rxCharacteristic=await _.getCharacteristic(this.RX_CHARACTERISTIC_UUID),console.log("RX characteristic obtained."),console.log("Starting notifications on RX characteristic..."),await this.rxCharacteristic.startNotifications(),this.rxCharacteristic.addEventListener("characteristicvaluechanged",this.notificationHandler),console.log("Notifications started."),await this.sendBreakSignal(!1),console.log("Fetching MTU size (max_length) from device...");const b=await this.sendLua("print(frame.bluetooth.max_length())",{awaitPrint:!0});if(b==null)throw new Error("Failed to get MTU size from device: no response.");const $=parseInt(b);if(isNaN($)||$<=0)throw new Error(`Invalid MTU size received: '${b}'`);this.maxPayload=$,console.log(`MTU size set to: ${this.maxPayload}`)}catch(_){if(console.error("Error during connection attempt:",_),this.rxCharacteristic){try{(h=(o=this.device)==null?void 0:o.gatt)!=null&&h.connected&&await this.rxCharacteristic.stopNotifications()}catch{}this.rxCharacteristic.removeEventListener("characteristicvaluechanged",this.notificationHandler),this.rxCharacteristic=void 0}throw this.txCharacteristic=void 0,(g=(d=this.device)==null?void 0:d.gatt)!=null&&g.connected&&this.device.gatt.disconnect(),this.server=void 0,_}}async connect(o={}){var h;const{name:d,namePrefix:g,numAttempts:_=5,retryDelayMs:b=1e3}=o;if(!navigator.bluetooth)throw new Error("Web Bluetooth API not available.");if(!this.device){const tt={filters:[d?{services:[this.SERVICE_UUID],name:d}:g?{services:[this.SERVICE_UUID],namePrefix:g}:{services:[this.SERVICE_UUID]}],optionalServices:[this.SERVICE_UUID]};try{if(console.log("Requesting Bluetooth device from user..."),this.device=await navigator.bluetooth.requestDevice(tt),!this.device)throw new Error("No device selected by the user.");console.log(`Device selected: ${this.device.name||this.device.id}`)}catch(rt){throw console.error("Bluetooth device request failed:",rt),this.device=void 0,rt}}if(!this.device)throw new Error("Device not available after selection phase.");const $=this.device;$.removeEventListener("gattserverdisconnected",this.handleDisconnect),$.addEventListener("gattserverdisconnected",this.handleDisconnect);let et;for(let tt=1;tt<=_;tt++){if(!this.device){console.warn(`Device (id: ${$.id}) was disconnected externally during connection attempts.`),et=et||new Error(`Device disconnected externally during connection attempt ${tt}.`);break}try{return console.log(`Connection attempt ${tt} of ${_} to device '${$.name||$.id}'...`),await this._attemptConnection(),console.log(`Successfully connected to ${$.name||$.id} on attempt ${tt}.`),$.id||$.name||"Unknown Device"}catch(rt){if(et=rt,console.error(`Attempt ${tt} to connect to '${$.name||$.id}' failed:`,rt),rt instanceof Error&&rt.name==="NetworkError"&&(rt.message.includes("Connection attempt failed.")||rt.message.includes("GATT operation failed for unknown reason.")||rt.message.includes("GATT Server is disconnected.")||rt.message.includes("Bluetooth device is already connected."))&&tt<_)console.log(`Retryable error encountered. Retrying in ${b/1e3}s...`),await new Promise(nt=>setTimeout(nt,b));else{console.log("Non-retryable error or max attempts reached. Aborting connection process.");break}}}throw console.error(`Failed to connect to device '${$.name||$.id}' after ${_} attempts or due to external disconnection.`),$.removeEventListener("gattserverdisconnected",this.handleDisconnect),(h=$.gatt)!=null&&h.connected&&$.gatt.disconnect(),this.server=void 0,this.txCharacteristic=void 0,this.rxCharacteristic=void 0,this.device=void 0,et||new Error(`Failed to connect to ${$.name||$.id} after ${_} attempts. No specific error recorded, or device disconnected externally.`)}async disconnect(){var o;this.device&&(o=this.device.gatt)!=null&&o.connected?this.device.gatt.disconnect():this.handleDisconnect()}isConnected(){return!!(this.device&&this.device.gatt&&this.device.gatt.connected)}getMaxPayload(o){return o?this.maxPayload:this.maxPayload-1}async transmit(o,h=!1){if(!this.txCharacteristic)throw new Error("Not connected or TX characteristic not available.");if(o.byteLength>this.maxPayload)throw new Error(`Payload length: ${o.byteLength} exceeds maximum BLE packet size: ${this.maxPayload}`);h&&console.log("Transmitting (hex):",Array.from(o).map(d=>d.toString(16).padStart(2,"0")).join(" ")),await this.txCharacteristic.writeValueWithResponse(o)}async sendLua(o,h={}){const{showMe:d=!1,awaitPrint:g=!1,timeout:_=5e3}=h,b=new TextEncoder().encode(o);if(b.byteLength>this.getMaxPayload(!0))throw new Error(`Lua string payload (${b.byteLength} bytes) is too large for max Lua payload (${this.getMaxPayload(!0)} bytes).`);if(g&&(this.printTimeoutId&&clearTimeout(this.printTimeoutId),this.awaitingPrintResponse=!0,this.printResponsePromise=new Promise(($,et)=>{this.printResolve=$,this.printTimeoutId=setTimeout(()=>{this.awaitingPrintResponse&&(this.awaitingPrintResponse=!1,this.printResolve=void 0,et(new Error(`Device didn't respond with a print within ${_}ms.`)))},_)}).finally(()=>{this.printTimeoutId&&(clearTimeout(this.printTimeoutId),this.printTimeoutId=void 0)})),await this.transmit(b,d),g)return this.printResponsePromise}async sendData(o,h={}){const{showMe:d=!1,awaitData:g=!1,timeout:_=5e3}=h;if(!this.txCharacteristic)throw new Error("Not connected or TX characteristic not available.");if(o.byteLength>this.getMaxPayload(!1))throw new Error(`Data payload (${o.byteLength} bytes) is too large for max data payload (${this.getMaxPayload(!1)} bytes).`);const b=new Uint8Array([1]),$=new Uint8Array(b.length+o.byteLength);$.set(b,0),$.set(o,b.length);let et;if(g&&(this.awaitingDataResponse=!0,this.dataResponsePromise=new Promise((tt,rt)=>{this.dataResolve=tt,et=setTimeout(()=>{this.awaitingDataResponse&&(this.awaitingDataResponse=!1,this.dataResolve=void 0,rt(new Error(`Device didn't respond with data within ${_}ms.`)))},_)}).finally(()=>{et&&clearTimeout(et)})),await this.transmit($,d),g)return this.dataResponsePromise}async sendResetSignal(o=!1){const h=new Uint8Array([4]);await this.transmit(h,o),await new Promise(d=>setTimeout(d,200))}async sendBreakSignal(o=!1){const h=new Uint8Array([3]);await this.transmit(h,o),await new Promise(d=>setTimeout(d,200))}async uploadFileFromString(o,h="main.lua"){let d=o.replace(/\r/g,"").replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/'/g,"\\'").replace(/"/g,'\\"');const g=await this.sendLua(`f=frame.file.open('${h}','w');print(1)`,{awaitPrint:!0});if(g!=="1")throw new Error(`Failed to open file ${h} on device. Response: ${g}`);const _=this.getMaxPayload(!0)-20;if(_<=0)throw new Error("Max payload size too small for file upload operations.");let b=0;for(;b<d.length;){let $=Math.min(_,d.length-b),et=d.substring(b,b+$);for(;et.endsWith("\\");){let rt=0;for(let nt=et.length-1;nt>=0&&et[nt]==="\\";nt--)rt++;if(rt%2!==0)if($>1)$--,et=d.substring(b,b+$);else throw await this.sendLua("f:close();print(nil)",{awaitPrint:!0}),new Error("Cannot safely chunk content due to isolated escape character at chunk boundary.");else break}const tt=await this.sendLua(`f:write("${et}");print(1)`,{awaitPrint:!0});if(tt!=="1")throw await this.sendLua("f:close();print(nil)",{awaitPrint:!0}),new Error(`Failed to write chunk to ${h}. Response: ${tt}`);b+=$}await this.sendLua("f:close();print(nil)",{awaitPrint:!0})}async uploadFile(o,h="main.lua"){await this.uploadFileFromString(o,h)}async sendMessage(o,h,d=!1){if(o<0||o>255)throw new Error(`Message code must be 0-255, got ${o}`);const g=h.byteLength;if(g>65535)throw new Error(`Payload size ${g} exceeds maximum 65535 bytes`);const _=this.getMaxPayload(!1),b=_-1-2,$=_-1;if(b<=0||$<=0)throw new Error("Max payload size too small for message sending protocol.");let et=0;const tt=Math.min(b,g),rt=new Uint8Array(3+tt);for(rt[0]=o,rt[1]=g>>8,rt[2]=g&255,rt.set(h.subarray(0,tt),3),await this.sendData(rt,{showMe:d,awaitData:!0}),et+=tt;et<g;){const nt=g-et,At=Math.min($,nt),at=new Uint8Array(1+At);at[0]=o,at.set(h.subarray(et,et+At),1),await this.sendData(at,{showMe:d,awaitData:!0}),et+=At}}}const stdDataMinLua="local a={}local b={}a.app_data_accum=b;local c={}a.app_data_block=c;local d={}a.app_data=d;local e={}a.parsers=e;function a.update_app_data_accum(f)rc,err=pcall(function()local g=string.byte(f,1)local h=a.app_data_accum[g]if h==nil or next(h)==nil then h={chunk_table={},num_chunks=0,size=0,recv_bytes=0}a.app_data_accum[g]=h end;if h.num_chunks==0 then h.size=string.byte(f,2)<<8|string.byte(f,3)h.chunk_table[1]=string.sub(f,4)h.num_chunks=1;h.recv_bytes=string.len(f)-3;if h.recv_bytes==h.size then a.app_data_block[g]=h.chunk_table[1]h.size=0;h.recv_bytes=0;h.num_chunks=0;h.chunk_table[1]=nil;b[g]=h end else h.chunk_table[h.num_chunks+1]=string.sub(f,2)h.num_chunks=h.num_chunks+1;h.recv_bytes=h.recv_bytes+string.len(f)-1;if h.recv_bytes==h.size then collectgarbage('collect')a.app_data_block[g]=table.concat(h.chunk_table)for i,j in pairs(h.chunk_table)do h.chunk_table[i]=nil end;collectgarbage('collect')h.size=0;h.recv_bytes=0;h.num_chunks=0;a.app_data_accum[g]=h end end;while true do if pcall(frame.bluetooth.send,'\\x00')then break end;frame.sleep(0.0025)end end)if rc==false then print('Error in data accumulator: '..err)while true do if pcall(frame.bluetooth.send,'\\x01')then break end;frame.sleep(0.0025)end;error(err)end end;frame.bluetooth.receive_callback(a.update_app_data_accum)function a.process_raw_items()local k=0;rc,err=pcall(function()collectgarbage('collect')for l,m in pairs(a.app_data_block)do if a.parsers[l]==nil then print('Error: No parser for flag: '..tostring(l))else a.app_data[l]=a.parsers[l](m,a.app_data[l])a.app_data_block[l]=nil;k=k+1 end end end)if rc==false then print('Error processing raw items: '..err)error(err)end;return k end;return a",stdAudioMinLua="local a={}local b=0x06;local c=0x05;local d=frame.bluetooth.max_length()if d%2==1 then d=d-1 end;function a.start(e)local f=e and e.sample_rate or 8000;local g=e and e.bit_depth or 8;pcall(frame.microphone.start,{sample_rate=f,bit_depth=g})end;function a.stop()pcall(frame.microphone.stop)end;function a.read_and_send_audio()audio_data=frame.microphone.read(d)if audio_data==nil then while true do if pcall(frame.bluetooth.send,string.char(b))then break end end;return nil elseif audio_data~=''then while true do if pcall(frame.bluetooth.send,string.char(c)..audio_data)then break end end;return string.len(audio_data)end;return 0 end;return a",stdCameraMinLua=`local a={}local b=0x07;local c=0x08;local d=0x11;local e=0x12;local f={'VERY_LOW','LOW','MEDIUM','HIGH','VERY_HIGH'}local g={'SPOT','CENTER_WEIGHTED','AVERAGE'}local h={metering='CENTER_WEIGHTED',exposure=0.1,exposure_speed=0.45,shutter_limit=16383,analog_gain_limit=16.0,white_balance_speed=0.5,rgb_gain_limit=287}local i={shutter=4096,analog_gain=1,red_gain=121,green_gain=64,blue_gain=140}a.is_auto_exp=true;function update_if_present(j,k)for l,m in pairs(k)do if m~=nil then j[l]=m end end end;function a.set_auto_exp_settings(n)update_if_present(h,n)a.is_auto_exp=true end;function a.set_manual_exp_settings(n)a.is_auto_exp=false;update_if_present(i,n)frame.camera.set_shutter(i.shutter)frame.camera.set_gain(i.analog_gain)frame.camera.set_white_balance(i.red_gain,i.green_gain,i.blue_gain)end;function a.parse_auto_exp_settings(o)local j={}j.metering=g[string.byte(o,1)+1]j.exposure=string.byte(o,2)/255.0;j.exposure_speed=string.byte(o,3)/255.0;j.shutter_limit=string.byte(o,4)<<8|(string.byte(o,5)&0x3FFF)j.analog_gain_limit=string.byte(o,6)&0xFF;j.white_balance_speed=string.byte(o,7)/255.0;j.rgb_gain_limit=string.byte(o,8)<<8|(string.byte(o,9)&0x3FF)return j end;function a.parse_manual_exp_settings(o)local j={}j.shutter=string.byte(o,1)<<8|(string.byte(o,2)&0x3FFF)j.analog_gain=string.byte(o,3)&0xFF;j.red_gain=string.byte(o,4)<<8|(string.byte(o,5)&0x3FF)j.green_gain=string.byte(o,6)<<8|(string.byte(o,7)&0x3FF)j.blue_gain=string.byte(o,8)<<8|(string.byte(o,9)&0x3FF)return j end;function a.parse_capture_settings(o)local j={}j.quality=f[string.byte(o,1)+1]local p=string.byte(o,2)<<8|string.byte(o,3)j.resolution=p*2;local q=string.byte(o,4)<<8|string.byte(o,5)j.pan=q-140;j.raw=string.byte(o,6)>0;return j end;function send_data(o)local r=false;local s=frame.time.utc()+2;while frame.time.utc()<s do if pcall(frame.bluetooth.send,o)then r=true;break end end;if not r then error('Error sending photo data')end end;function a.run_auto_exposure()return frame.camera.auto(h)end;function a.send_autoexp_result(t)local o=string.pack("<Bffffffffffffffff",d,t['error'],t['shutter'],t['analog_gain'],t['red_gain'],t['green_gain'],t['blue_gain'],t['brightness']['center_weighted_average'],t['brightness']['scene'],t['brightness']['matrix']['r'],t['brightness']['matrix']['g'],t['brightness']['matrix']['b'],t['brightness']['matrix']['average'],t['brightness']['spot']['r'],t['brightness']['spot']['g'],t['brightness']['spot']['b'],t['brightness']['spot']['average'])send_data(o)end;function a.send_metering_data()send_data(string.char(e)..frame.fpga_read(0x25,6))end;function a.capture_and_send(n)frame.camera.capture{resolution=n.resolution,quality=n.quality,pan=n.pan}while not frame.camera.image_ready()do frame.sleep(0.005)end;local o=''local u=n.raw;while true do if u then o=frame.camera.read_raw(frame.bluetooth.max_length()-1)else o=frame.camera.read(frame.bluetooth.max_length()-1)end;if o~=nil then send_data(string.char(b)..o)else send_data(string.char(c))break end end end;return a`,stdCodeMinLua="local _M={}function _M.parse_code(a)local b={}b.value=string.byte(a,1)return b end;return _M",stdIMUMinLua='local _M={}local a=0x0A;function _M.send_imu_data(b)local c=b or a;local d=frame.imu.raw()local e=string.pack("<Bxhhhhhh",c,d.compass.x,d.compass.y,d.compass.z,d.accelerometer.x,d.accelerometer.y,d.accelerometer.z)pcall(frame.bluetooth.send,e)end;return _M',stdImageSpriteBlockMinLua="local a={}function a.parse_image_sprite_block(b,c)if string.byte(b,1)==0xFF then if c~=nil then for d,e in pairs(c.sprites)do c.sprites[d]=nil end;c=nil;collectgarbage('collect')end;local f={}f.width=string.byte(b,2)<<8|string.byte(b,3)f.height=string.byte(b,4)<<8|string.byte(b,5)f.sprite_line_height=string.byte(b,6)<<8|string.byte(b,7)f.progressive_render=string.byte(b,8)==1;f.updatable=string.byte(b,9)==1;f.sprites={}local g=f.height+f.sprite_line_height-1;f.total_sprites=g//f.sprite_line_height;f.active_sprites=0;f.current_sprite_index=0;return f else if c==nil then return nil end;c.current_sprite_index=c.current_sprite_index+1;if c.current_sprite_index>c.total_sprites then if c.updatable then c.current_sprite_index=1 else return c end end;if c.active_sprites<c.total_sprites then c.active_sprites=c.active_sprites+1 end;local h={}h.width=string.byte(b,1)<<8|string.byte(b,2)h.height=string.byte(b,3)<<8|string.byte(b,4)h.compressed=string.byte(b,5)>0;h.bpp=string.byte(b,6)h.num_colors=string.byte(b,7)h.palette_data=string.sub(b,8,8+h.num_colors*3-1)h.pixel_data=string.sub(b,8+h.num_colors*3)c.sprites[c.current_sprite_index]=h;return c end end;function a.set_palette(i,j)local k={'VOID','WHITE','GREY','RED','PINK','DARKBROWN','BROWN','ORANGE','YELLOW','DARKGREEN','GREEN','LIGHTGREEN','NIGHTBLUE','SEABLUE','SKYBLUE','CLOUDBLUE'}for l=1,i do local m=(l-1)*3;frame.display.assign_color(k[l],string.byte(j,m+1),string.byte(j,m+2),string.byte(j,m+3))end end;return a",stdPlainTextMinLua="local _M={}local a={'VOID','WHITE','GREY','RED','PINK','DARKBROWN','BROWN','ORANGE','YELLOW','DARKGREEN','GREEN','LIGHTGREEN','NIGHTBLUE','SEABLUE','SKYBLUE','CLOUDBLUE'}function _M.parse_plain_text(b)local c={}c.x=string.byte(b,1)<<8|string.byte(b,2)c.y=string.byte(b,3)<<8|string.byte(b,4)c.palette_offset=string.byte(b,5)c.color=a[c.palette_offset%16+1]c.spacing=string.byte(b,6)c.string=string.sub(b,7)return c end;return _M",stdSpriteMinLua="local a={}function a.parse_sprite(b)local c={}c.width=string.byte(b,1)<<8|string.byte(b,2)c.height=string.byte(b,3)<<8|string.byte(b,4)c.compressed=string.byte(b,5)>0;c.bpp=string.byte(b,6)c.num_colors=string.byte(b,7)c.palette_data=string.sub(b,8,8+c.num_colors*3-1)c.pixel_data=string.sub(b,8+c.num_colors*3)return c end;function a.set_palette(d,e)local f={'VOID','WHITE','GREY','RED','PINK','DARKBROWN','BROWN','ORANGE','YELLOW','DARKGREEN','GREEN','LIGHTGREEN','NIGHTBLUE','SEABLUE','SKYBLUE','CLOUDBLUE'}for g=1,d do local h=(g-1)*3;frame.display.assign_color(f[g],string.byte(e,h+1),string.byte(e,h+2),string.byte(e,h+3))end end;return a",stdSpriteCoordsMinLua="local a={}function a.parse_sprite_coords(b)local c={}c.code=string.byte(b,1)c.x=string.byte(b,2)<<8|string.byte(b,3)c.y=string.byte(b,4)<<8|string.byte(b,5)c.offset=string.byte(b,6)return c end;return a",stdTapMinLua="local a={}local b=0x09;function a.send_tap()rc,err=pcall(frame.bluetooth.send,string.char(b))if rc==false then print(err)end end;return a",stdTextSpriteBlockMinLua="local a={}function a.parse_text_sprite_block(b,c)if string.byte(b,1)==0xFF then local d={}d.width=string.byte(b,2)<<8|string.byte(b,3)d.max_display_rows=string.byte(b,4)d.lines=string.byte(b,5)local e={}for f=0,d.lines-1 do local g={}g.x=string.byte(b,5+4*f+1)<<8|string.byte(b,5+4*f+2)g.y=string.byte(b,5+4*f+3)<<8|string.byte(b,5+4*f+4)table.insert(e,g)end;d.offsets=e;d.sprites={}d.last_sprite_index=0;d.first_sprite_index=0;return d else if c==nil then return nil end;c.last_sprite_index=c.last_sprite_index+1;if c.first_sprite_index==0 then c.first_sprite_index=1 end;if c.last_sprite_index-c.first_sprite_index+1>c.max_display_rows then c.sprites[c.first_sprite_index]=nil;c.first_sprite_index=c.first_sprite_index+1 end;local h={}h.width=string.byte(b,1)<<8|string.byte(b,2)h.height=string.byte(b,3)<<8|string.byte(b,4)h.compressed=string.byte(b,5)>0;h.bpp=string.byte(b,6)h.num_colors=string.byte(b,7)h.palette_data=string.sub(b,8,8+h.num_colors*3-1)h.pixel_data=string.sub(b,8+h.num_colors*3)c.sprites[c.last_sprite_index]=h;return c end end;return a";var StdLua=(s=>(s.DataMin="stdDataMin",s.AudioMin="stdAudioMin",s.CameraMin="stdCameraMin",s.CodeMin="stdCodeMin",s.IMUMin="stdIMUMin",s.ImageSpriteBlockMin="stdImageSpriteBlockMin",s.PlainTextMin="stdPlainTextMin",s.SpriteMin="stdSpriteMin",s.SpriteCoordsMin="stdSpriteCoordsMin",s.TapMin="stdTapMin",s.TextSpriteBlockMin="stdTextSpriteBlockMin",s))(StdLua||{});const standardLuaLibrarySources={stdDataMin:{content:stdDataMinLua,targetFileName:"data.min.lua"},stdAudioMin:{content:stdAudioMinLua,targetFileName:"audio.min.lua"},stdCameraMin:{content:stdCameraMinLua,targetFileName:"camera.min.lua"},stdCodeMin:{content:stdCodeMinLua,targetFileName:"code.min.lua"},stdIMUMin:{content:stdIMUMinLua,targetFileName:"imu.min.lua"},stdImageSpriteBlockMin:{content:stdImageSpriteBlockMinLua,targetFileName:"image_sprite_block.min.lua"},stdPlainTextMin:{content:stdPlainTextMinLua,targetFileName:"plain_text.min.lua"},stdSpriteMin:{content:stdSpriteMinLua,targetFileName:"sprite.min.lua"},stdSpriteCoordsMin:{content:stdSpriteCoordsMinLua,targetFileName:"sprite_coords.min.lua"},stdTapMin:{content:stdTapMinLua,targetFileName:"tap.min.lua"},stdTextSpriteBlockMin:{content:stdTextSpriteBlockMinLua,targetFileName:"text_sprite_block.min.lua"}};class FrameMsg{constructor(){$e(this,"ble"),$e(this,"dataResponseHandlers"),this.ble=new R,this.dataResponseHandlers=new Map,this.ble.setDataResponseHandler(this._handleDataResponse.bind(this))}async connect(o=!0,h={}){try{const d={name:h.name,namePrefix:h.namePrefix},g=await this.ble.connect(d);return o&&(await this.ble.sendBreakSignal(),await this.ble.sendResetSignal(),await this.ble.sendBreakSignal()),g}catch(d){throw this.ble.isConnected()&&await this.ble.disconnect(),d}}async disconnect(){this.ble.isConnected()&&await this.ble.disconnect()}isConnected(){return this.ble.isConnected()}async printShortText(o=""){const h=o.replace(/'/g,"\\'").replace(/\n/g,"");return this.ble.sendLua(`frame.display.text('${h}',1,1);frame.display.show();print(0)`,{awaitPrint:!0})}async uploadStdLuaLibs(o){for(const h of o){const d=standardLuaLibrarySources[h];d?await this.ble.uploadFileFromString(d.content,d.targetFileName):console.warn(`Standard Lua library key "${h}" not found. Skipping.`)}}async uploadFrameApp(o,h="frame_app.lua"){await this.ble.uploadFile(o,h)}async startFrameApp(o="frame_app",h=!0){return this.ble.sendLua(`require('${o}')`,{awaitPrint:h})}async stopFrameApp(o=!0){await this.ble.sendBreakSignal(),o&&await this.ble.sendResetSignal()}attachPrintResponseHandler(o=console.log){this.ble.setPrintResponseHandler(o)}detachPrintResponseHandler(){this.ble.setPrintResponseHandler(void 0)}async sendMessage(o,h,d=!1){await this.ble.sendMessage(o,h,d)}registerDataResponseHandler(o,h,d){for(const g of h){this.dataResponseHandlers.has(g)||this.dataResponseHandlers.set(g,[]);const _=this.dataResponseHandlers.get(g);_.find(b=>b.subscriber===o&&b.handler===d)||_.push({subscriber:o,handler:d})}}unregisterDataResponseHandler(o){this.dataResponseHandlers.forEach((h,d)=>{const g=h.filter(_=>_.subscriber!==o);g.length===0?this.dataResponseHandlers.delete(d):this.dataResponseHandlers.set(d,g)})}_handleDataResponse(o){if(o&&o.byteLength>0){const h=o[0];this.dataResponseHandlers.has(h)&&this.dataResponseHandlers.get(h).forEach(d=>{try{d.handler(o)}catch(g){console.error("Error in FrameMsg data response handler for msgCode",h,":",g)}})}}async sendLua(o,h={}){return this.ble.sendLua(o,h)}async sendData(o,h={}){return this.ble.sendData(o,h)}async sendResetSignal(o=!1){return this.ble.sendResetSignal(o)}async sendBreakSignal(o=!1){return this.ble.sendBreakSignal(o)}getMaxPayload(o){return this.ble?this.ble.getMaxPayload(o):(console.warn("FrameBle instance not initialized or not connected for getMaxPayload."),60)}}class AsyncQueue{constructor(){$e(this,"promises"),$e(this,"resolvers"),this.promises=[],this.resolvers=[]}add(){this.promises.push(new Promise(o=>{this.resolvers.push(o)}))}put(o){this.resolvers.length||this.add();const h=this.resolvers.shift();h&&h(o)}async get(){return this.promises.length||this.add(),this.promises.shift()||new Promise(h=>{this.resolvers.push(h),this.promises.push(this.get())})}isEmpty(){return this.promises.length===0}size(){return this.promises.length}clear(){this.resolvers.forEach(o=>{}),this.promises=[],this.resolvers=[]}}class TxPlainText{constructor(o,h=1,d=1,g=1,_=4){this.text=o,this.x=h,this.y=d,this.paletteOffset=g,this.spacing=_}pack(){const o=new TextEncoder().encode(this.text),h=new Uint8Array(6),d=new DataView(h.buffer);d.setUint16(0,this.x,!1),d.setUint16(2,this.y,!1),d.setUint8(4,this.paletteOffset&15),d.setUint8(5,this.spacing&255);const g=new Uint8Array(h.length+o.length);return g.set(h),g.set(o,h.length),g}}class TxCaptureSettings{constructor(o=512,h=4,d=0,g=!1){$e(this,"resolution"),$e(this,"qualityIndex"),$e(this,"pan"),$e(this,"raw"),this.resolution=o,this.qualityIndex=h,this.pan=d,this.raw=g}pack(){const o=new ArrayBuffer(6),h=new DataView(o),d=this.resolution/2,g=this.pan+140;return h.setUint8(0,this.qualityIndex&255),h.setUint16(1,d&65535,!1),h.setUint16(3,g&65535,!1),h.setUint8(5,this.raw?1:0),new Uint8Array(o)}}const bitMethods={getBit(s){return this.data[getSlot(s)]&1<<getShift(s)?1:0},setBit(s){this.data[getSlot(s)]|=1<<getShift(s)},clearBit(s){this.data[getSlot(s)]&=~(1<<getShift(s))},toggleBit(s){this.data[getSlot(s)]^=1<<getShift(s)},getBitXY(s,o){return s>=this.width||o>=this.height?0:this.getBit(o*this.width+s)},setBitXY(s,o){this.setBit(o*this.width+s)},clearBitXY(s,o){this.clearBit(o*this.width+s)},toggleBitXY(s,o){this.toggleBit(o*this.width+s)}};function getSlot(s){return s>>3}function getShift(s){return 7-(s&7)}function setBitMethods(s){for(const o in bitMethods)s.prototype[o]=bitMethods[o]}function checkProcessable(s,o={}){let{bitDepth:h,alpha:d,colorModel:g,components:_,channels:b}=o;if(typeof s!="string"||s.length===0)throw new TypeError("processName must be a string");if(h&&(Array.isArray(h)||(h=[h]),!h.includes(this.bitDepth)))throw new TypeError(`The process: ${s} can only be applied if bit depth is in: ${h}`);if(d&&(Array.isArray(d)||(d=[d]),!d.includes(this.alpha)))throw new TypeError(`The process: ${s} can only be applied if alpha is in: ${d}`);if(g&&(Array.isArray(g)||(g=[g]),!g.includes(this.colorModel)))throw new TypeError(`The process: ${s} can only be applied if color model is in: ${g}`);if(_&&(Array.isArray(_)||(_=[_]),!_.includes(this.components))){let $=`The process: ${s} can only be applied if the number of components is in: ${_}`;throw _.length===1&&_[0]===1?new TypeError(`${$}.\rYou should transform your image using "image.grey()" before applying the algorithm.`):new TypeError($)}if(b&&(Array.isArray(b)||(b=[b]),!b.includes(this.channels)))throw new TypeError(`The process: ${s} can only be applied if the number of channels is in: ${b}`)}function createBlob(s,o){s=s||[],o=o||{},typeof o=="string"&&(o={type:o});try{return new Blob(s,o)}catch(_){if(_.name!=="TypeError")throw _;for(var h=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,d=new h,g=0;g<s.length;g+=1)d.append(s[g]);return d.getBlob(o.type)}}function dataURLToBlob(s){var o=s.match(/data:([^;]+)/)[1],h=s.replace(/^[^,]+,/,""),d=binaryStringToArrayBuffer(atob(h));return createBlob([d],{type:o})}function canvasToBlob(s,o,h){return typeof s.toBlob=="function"?new Promise(function(d){s.toBlob(d,o,h)}):Promise.resolve(dataURLToBlob(s.toDataURL(o,h)))}function binaryStringToArrayBuffer(s){for(var o=s.length,h=new ArrayBuffer(o),d=new Uint8Array(h),g=-1;++g<o;)d[g]=s.charCodeAt(g);return h}function getDefaultExportFromCjs(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}function getAugmentedNamespace(s){if(Object.prototype.hasOwnProperty.call(s,"__esModule"))return s;var o=s.default;if(typeof o=="function"){var h=function d(){return this instanceof d?Reflect.construct(o,arguments,this.constructor):o.apply(this,arguments)};h.prototype=o.prototype}else h={};return Object.defineProperty(h,"__esModule",{value:!0}),Object.keys(s).forEach(function(d){var g=Object.getOwnPropertyDescriptor(s,d);Object.defineProperty(h,d,g.get?g:{enumerable:!0,get:function(){return s[d]}})}),h}var src$5={};function decode$2(s,o="utf8"){return new TextDecoder(o).decode(s)}const encoder$1=new TextEncoder;function encode$1(s){return encoder$1.encode(s)}const defaultByteLength=1024*8,hostBigEndian=(()=>{const s=new Uint8Array(4),o=new Uint32Array(s.buffer);return!((o[0]=1)&s[0])})(),typedArrays={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class IOBuffer{constructor(o=defaultByteLength,h={}){$e(this,"buffer"),$e(this,"byteLength"),$e(this,"byteOffset"),$e(this,"length"),$e(this,"offset"),$e(this,"lastWrittenByte"),$e(this,"littleEndian"),$e(this,"_data"),$e(this,"_mark"),$e(this,"_marks");let d=!1;typeof o=="number"?o=new ArrayBuffer(o):(d=!0,this.lastWrittenByte=o.byteLength);const g=h.offset?h.offset>>>0:0,_=o.byteLength-g;let b=g;(ArrayBuffer.isView(o)||o instanceof IOBuffer)&&(o.byteLength!==o.buffer.byteLength&&(b=o.byteOffset+g),o=o.buffer),d?this.lastWrittenByte=_:this.lastWrittenByte=0,this.buffer=o,this.length=_,this.byteLength=_,this.byteOffset=b,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,b,_),this._mark=0,this._marks=[]}available(o=1){return this.offset+o<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(o=1){return this.offset+=o,this}back(o=1){return this.offset-=o,this}seek(o){return this.offset=o,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const o=this._marks.pop();if(o===void 0)throw new Error("Mark stack empty");return this.seek(o),this}rewind(){return this.offset=0,this}ensureAvailable(o=1){if(!this.available(o)){const h=(this.offset+o)*2,d=new Uint8Array(h);d.set(new Uint8Array(this.buffer)),this.buffer=d.buffer,this.length=h,this.byteLength=h,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(o=1){return this.readArray(o,"uint8")}readArray(o,h){const d=typedArrays[h].BYTES_PER_ELEMENT*o,g=this.byteOffset+this.offset,_=this.buffer.slice(g,g+d);if(this.littleEndian===hostBigEndian&&h!=="uint8"&&h!=="int8"){const $=new Uint8Array(this.buffer.slice(g,g+d));$.reverse();const et=new typedArrays[h]($.buffer);return this.offset+=d,et.reverse(),et}const b=new typedArrays[h](_);return this.offset+=d,b}readInt16(){const o=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,o}readUint16(){const o=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,o}readInt32(){const o=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,o}readUint32(){const o=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,o}readFloat32(){const o=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,o}readFloat64(){const o=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,o}readBigInt64(){const o=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,o}readBigUint64(){const o=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,o}readChar(){return String.fromCharCode(this.readInt8())}readChars(o=1){let h="";for(let d=0;d<o;d++)h+=this.readChar();return h}readUtf8(o=1){return decode$2(this.readBytes(o))}decodeText(o=1,h="utf8"){return decode$2(this.readBytes(o),h)}writeBoolean(o){return this.writeUint8(o?255:0),this}writeInt8(o){return this.ensureAvailable(1),this._data.setInt8(this.offset++,o),this._updateLastWrittenByte(),this}writeUint8(o){return this.ensureAvailable(1),this._data.setUint8(this.offset++,o),this._updateLastWrittenByte(),this}writeByte(o){return this.writeUint8(o)}writeBytes(o){this.ensureAvailable(o.length);for(let h=0;h<o.length;h++)this._data.setUint8(this.offset++,o[h]);return this._updateLastWrittenByte(),this}writeInt16(o){return this.ensureAvailable(2),this._data.setInt16(this.offset,o,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(o){return this.ensureAvailable(2),this._data.setUint16(this.offset,o,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(o){return this.ensureAvailable(4),this._data.setInt32(this.offset,o,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(o){return this.ensureAvailable(4),this._data.setUint32(this.offset,o,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(o){return this.ensureAvailable(4),this._data.setFloat32(this.offset,o,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(o){return this.ensureAvailable(8),this._data.setFloat64(this.offset,o,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(o){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,o,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(o){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,o,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(o){return this.writeUint8(o.charCodeAt(0))}writeChars(o){for(let h=0;h<o.length;h++)this.writeUint8(o.charCodeAt(h));return this}writeUtf8(o){return this.writeBytes(encode$1(o))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}const IOBuffer$1=Object.freeze(Object.defineProperty({__proto__:null,IOBuffer},Symbol.toStringTag,{value:"Module"})),require$$0$3=getAugmentedNamespace(IOBuffer$1);var constants$1,hasRequiredConstants$1;function requireConstants$1(){return hasRequiredConstants$1||(hasRequiredConstants$1=1,constants$1={BITMAPV5HEADER:{LogicalColorSpace:{LCS_CALIBRATED_RGB:0,LCS_sRGB:1934772034,LCS_WINDOWS_COLOR_SPACE:1466527264},Compression:{BI_RGB:0,BI_RLE8:1,BI_RLE4:2,BI_BITFIELDS:3,BI_JPEG:4,BI_PNG:5,BI_CMYK:11,BI_CMYKRLE8:12,BI_CMYKRLE4:13},GamutMappingIntent:{LCS_GM_ABS_COLORIMETRIC:8,LCS_GM_BUSINESS:1,LCS_GM_GRAPHICS:2,LCS_GM_IMAGES:4}}}),constants$1}var BMPEncoder_1,hasRequiredBMPEncoder;function requireBMPEncoder(){if(hasRequiredBMPEncoder)return BMPEncoder_1;hasRequiredBMPEncoder=1;const{IOBuffer:s}=require$$0$3,o=requireConstants$1(),h=[];for(let g=0;g<=8;g++)h.push(255<<g);class d extends s{constructor(_){if(_.bitDepth!==1)throw new Error("Only bitDepth of 1 is supported");if(!_.height||!_.width)throw new Error("ImageData width and height are required");super(_.data),this.width=_.width,this.height=_.height,this.bitDepth=_.bitDepth,this.channels=_.channels,this.components=_.components}encode(){this.encoded=new s,this.encoded.skip(14),this.writeBitmapV5Header(),this.writeColorTable();const _=this.encoded.offset;return this.writePixelArray(),this.encoded.rewind(),this.writeBitmapFileHeader(_),this.encoded.toArray()}writePixelArray(){let _=this.encoded;const b=Math.floor((this.bitDepth*this.width+31)/32)*4,$=Math.ceil(this.bitDepth*this.width/8),et=b-$,tt=this.bitDepth*this.width%8,rt=tt===0?0:8-tt,nt=b*this.height;let At,at,lt=0,gt=0,_t=8;_.mark(),at=this.readUint8();for(let ct=this.height-1;ct>=0;ct--){const pt=ct===0;_.reset(),_.skip(ct*b);for(let dt=0;dt<$;dt++){const mt=dt===$-1;gt<=rt&&mt?(_.writeByte(at<<gt),(rt===0||rt===gt)&&!pt&&(At=at,at=this.readByte())):gt===0?(At=at,at=this.readUint8(),_.writeByte(At)):(At=at,at=this.readUint8(),_.writeByte(At<<gt&h[gt]|at>>_t)),mt&&(lt+=tt||0,_.skip(et),gt=lt%8,_t=8-gt)}}b>$&&(_.reset(),_.skip(nt-1),_.writeUint8(0))}writeColorTable(){this.encoded.writeUint32(0).writeUint32(16777215)}writeBitmapFileHeader(_){this.encoded.writeChars("BM").writeInt32(this.encoded.lastWrittenByte).writeUint16(0).writeUint16(0).writeUint32(_)}writeBitmapV5Header(){const _=Math.floor((this.bitDepth*this.width+31)/32)*4*this.height;this.encoded.writeUint32(124).writeInt32(this.width).writeInt32(this.height).writeUint16(1).writeUint16(this.bitDepth).writeUint32(o.BITMAPV5HEADER.Compression.BI_RGB).writeUint32(_).writeInt32(0).writeInt32(0).writeUint32(Math.pow(2,this.bitDepth)).writeUint32(Math.pow(2,this.bitDepth)).writeUint32(4278190080).writeUint32(16711680).writeUint32(65280).writeUint32(255).writeUint32(o.BITMAPV5HEADER.LogicalColorSpace.LCS_sRGB).skip(36).skip(12).writeUint32(o.BITMAPV5HEADER.GamutMappingIntent.LCS_GM_IMAGES).skip(12)}}return BMPEncoder_1=d,BMPEncoder_1}var hasRequiredSrc$5;function requireSrc$5(){if(hasRequiredSrc$5)return src$5;hasRequiredSrc$5=1;const s=requireBMPEncoder();return src$5.encode=function(o){return new s(o).encode()},src$5}var srcExports$3=requireSrc$5();/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const Z_FIXED$1=4,Z_BINARY=0,Z_TEXT=1,Z_UNKNOWN$1=2;function zero$1$1(s){let o=s.length;for(;--o>=0;)s[o]=0}const STORED_BLOCK=0,STATIC_TREES=1,DYN_TREES=2,MIN_MATCH$1$1=3,MAX_MATCH$1$1=258,LENGTH_CODES$1$1=29,LITERALS$1$1=256,L_CODES$1$1=LITERALS$1$1+1+LENGTH_CODES$1$1,D_CODES$1$1=30,BL_CODES$1=19,HEAP_SIZE$1=2*L_CODES$1$1+1,MAX_BITS$1=15,Buf_size=16,MAX_BL_BITS=7,END_BLOCK=256,REP_3_6=16,REPZ_3_10=17,REPZ_11_138=18,extra_lbits=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),extra_dbits=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),extra_blbits=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),bl_order=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),DIST_CODE_LEN$1=512,static_ltree$1=new Array((L_CODES$1$1+2)*2);zero$1$1(static_ltree$1);const static_dtree$1=new Array(D_CODES$1$1*2);zero$1$1(static_dtree$1);const _dist_code$1=new Array(DIST_CODE_LEN$1);zero$1$1(_dist_code$1);const _length_code$1=new Array(MAX_MATCH$1$1-MIN_MATCH$1$1+1);zero$1$1(_length_code$1);const base_length$1=new Array(LENGTH_CODES$1$1);zero$1$1(base_length$1);const base_dist$1=new Array(D_CODES$1$1);zero$1$1(base_dist$1);function StaticTreeDesc(s,o,h,d,g){this.static_tree=s,this.extra_bits=o,this.extra_base=h,this.elems=d,this.max_length=g,this.has_stree=s&&s.length}let static_l_desc,static_d_desc,static_bl_desc;function TreeDesc(s,o){this.dyn_tree=s,this.max_code=0,this.stat_desc=o}const d_code=s=>s<256?_dist_code$1[s]:_dist_code$1[256+(s>>>7)],put_short=(s,o)=>{s.pending_buf[s.pending++]=o&255,s.pending_buf[s.pending++]=o>>>8&255},send_bits=(s,o,h)=>{s.bi_valid>Buf_size-h?(s.bi_buf|=o<<s.bi_valid&65535,put_short(s,s.bi_buf),s.bi_buf=o>>Buf_size-s.bi_valid,s.bi_valid+=h-Buf_size):(s.bi_buf|=o<<s.bi_valid&65535,s.bi_valid+=h)},send_code=(s,o,h)=>{send_bits(s,h[o*2],h[o*2+1])},bi_reverse=(s,o)=>{let h=0;do h|=s&1,s>>>=1,h<<=1;while(--o>0);return h>>>1},bi_flush=s=>{s.bi_valid===16?(put_short(s,s.bi_buf),s.bi_buf=0,s.bi_valid=0):s.bi_valid>=8&&(s.pending_buf[s.pending++]=s.bi_buf&255,s.bi_buf>>=8,s.bi_valid-=8)},gen_bitlen=(s,o)=>{const h=o.dyn_tree,d=o.max_code,g=o.stat_desc.static_tree,_=o.stat_desc.has_stree,b=o.stat_desc.extra_bits,$=o.stat_desc.extra_base,et=o.stat_desc.max_length;let tt,rt,nt,At,at,lt,gt=0;for(At=0;At<=MAX_BITS$1;At++)s.bl_count[At]=0;for(h[s.heap[s.heap_max]*2+1]=0,tt=s.heap_max+1;tt<HEAP_SIZE$1;tt++)rt=s.heap[tt],At=h[h[rt*2+1]*2+1]+1,At>et&&(At=et,gt++),h[rt*2+1]=At,!(rt>d)&&(s.bl_count[At]++,at=0,rt>=$&&(at=b[rt-$]),lt=h[rt*2],s.opt_len+=lt*(At+at),_&&(s.static_len+=lt*(g[rt*2+1]+at)));if(gt!==0){do{for(At=et-1;s.bl_count[At]===0;)At--;s.bl_count[At]--,s.bl_count[At+1]+=2,s.bl_count[et]--,gt-=2}while(gt>0);for(At=et;At!==0;At--)for(rt=s.bl_count[At];rt!==0;)nt=s.heap[--tt],!(nt>d)&&(h[nt*2+1]!==At&&(s.opt_len+=(At-h[nt*2+1])*h[nt*2],h[nt*2+1]=At),rt--)}},gen_codes=(s,o,h)=>{const d=new Array(MAX_BITS$1+1);let g=0,_,b;for(_=1;_<=MAX_BITS$1;_++)g=g+h[_-1]<<1,d[_]=g;for(b=0;b<=o;b++){let $=s[b*2+1];$!==0&&(s[b*2]=bi_reverse(d[$]++,$))}},tr_static_init=()=>{let s,o,h,d,g;const _=new Array(MAX_BITS$1+1);for(h=0,d=0;d<LENGTH_CODES$1$1-1;d++)for(base_length$1[d]=h,s=0;s<1<<extra_lbits[d];s++)_length_code$1[h++]=d;for(_length_code$1[h-1]=d,g=0,d=0;d<16;d++)for(base_dist$1[d]=g,s=0;s<1<<extra_dbits[d];s++)_dist_code$1[g++]=d;for(g>>=7;d<D_CODES$1$1;d++)for(base_dist$1[d]=g<<7,s=0;s<1<<extra_dbits[d]-7;s++)_dist_code$1[256+g++]=d;for(o=0;o<=MAX_BITS$1;o++)_[o]=0;for(s=0;s<=143;)static_ltree$1[s*2+1]=8,s++,_[8]++;for(;s<=255;)static_ltree$1[s*2+1]=9,s++,_[9]++;for(;s<=279;)static_ltree$1[s*2+1]=7,s++,_[7]++;for(;s<=287;)static_ltree$1[s*2+1]=8,s++,_[8]++;for(gen_codes(static_ltree$1,L_CODES$1$1+1,_),s=0;s<D_CODES$1$1;s++)static_dtree$1[s*2+1]=5,static_dtree$1[s*2]=bi_reverse(s,5);static_l_desc=new StaticTreeDesc(static_ltree$1,extra_lbits,LITERALS$1$1+1,L_CODES$1$1,MAX_BITS$1),static_d_desc=new StaticTreeDesc(static_dtree$1,extra_dbits,0,D_CODES$1$1,MAX_BITS$1),static_bl_desc=new StaticTreeDesc(new Array(0),extra_blbits,0,BL_CODES$1,MAX_BL_BITS)},init_block=s=>{let o;for(o=0;o<L_CODES$1$1;o++)s.dyn_ltree[o*2]=0;for(o=0;o<D_CODES$1$1;o++)s.dyn_dtree[o*2]=0;for(o=0;o<BL_CODES$1;o++)s.bl_tree[o*2]=0;s.dyn_ltree[END_BLOCK*2]=1,s.opt_len=s.static_len=0,s.sym_next=s.matches=0},bi_windup=s=>{s.bi_valid>8?put_short(s,s.bi_buf):s.bi_valid>0&&(s.pending_buf[s.pending++]=s.bi_buf),s.bi_buf=0,s.bi_valid=0},smaller=(s,o,h,d)=>{const g=o*2,_=h*2;return s[g]<s[_]||s[g]===s[_]&&d[o]<=d[h]},pqdownheap=(s,o,h)=>{const d=s.heap[h];let g=h<<1;for(;g<=s.heap_len&&(g<s.heap_len&&smaller(o,s.heap[g+1],s.heap[g],s.depth)&&g++,!smaller(o,d,s.heap[g],s.depth));)s.heap[h]=s.heap[g],h=g,g<<=1;s.heap[h]=d},compress_block=(s,o,h)=>{let d,g,_=0,b,$;if(s.sym_next!==0)do d=s.pending_buf[s.sym_buf+_++]&255,d+=(s.pending_buf[s.sym_buf+_++]&255)<<8,g=s.pending_buf[s.sym_buf+_++],d===0?send_code(s,g,o):(b=_length_code$1[g],send_code(s,b+LITERALS$1$1+1,o),$=extra_lbits[b],$!==0&&(g-=base_length$1[b],send_bits(s,g,$)),d--,b=d_code(d),send_code(s,b,h),$=extra_dbits[b],$!==0&&(d-=base_dist$1[b],send_bits(s,d,$)));while(_<s.sym_next);send_code(s,END_BLOCK,o)},build_tree=(s,o)=>{const h=o.dyn_tree,d=o.stat_desc.static_tree,g=o.stat_desc.has_stree,_=o.stat_desc.elems;let b,$,et=-1,tt;for(s.heap_len=0,s.heap_max=HEAP_SIZE$1,b=0;b<_;b++)h[b*2]!==0?(s.heap[++s.heap_len]=et=b,s.depth[b]=0):h[b*2+1]=0;for(;s.heap_len<2;)tt=s.heap[++s.heap_len]=et<2?++et:0,h[tt*2]=1,s.depth[tt]=0,s.opt_len--,g&&(s.static_len-=d[tt*2+1]);for(o.max_code=et,b=s.heap_len>>1;b>=1;b--)pqdownheap(s,h,b);tt=_;do b=s.heap[1],s.heap[1]=s.heap[s.heap_len--],pqdownheap(s,h,1),$=s.heap[1],s.heap[--s.heap_max]=b,s.heap[--s.heap_max]=$,h[tt*2]=h[b*2]+h[$*2],s.depth[tt]=(s.depth[b]>=s.depth[$]?s.depth[b]:s.depth[$])+1,h[b*2+1]=h[$*2+1]=tt,s.heap[1]=tt++,pqdownheap(s,h,1);while(s.heap_len>=2);s.heap[--s.heap_max]=s.heap[1],gen_bitlen(s,o),gen_codes(h,et,s.bl_count)},scan_tree=(s,o,h)=>{let d,g=-1,_,b=o[0*2+1],$=0,et=7,tt=4;for(b===0&&(et=138,tt=3),o[(h+1)*2+1]=65535,d=0;d<=h;d++)_=b,b=o[(d+1)*2+1],!(++$<et&&_===b)&&($<tt?s.bl_tree[_*2]+=$:_!==0?(_!==g&&s.bl_tree[_*2]++,s.bl_tree[REP_3_6*2]++):$<=10?s.bl_tree[REPZ_3_10*2]++:s.bl_tree[REPZ_11_138*2]++,$=0,g=_,b===0?(et=138,tt=3):_===b?(et=6,tt=3):(et=7,tt=4))},send_tree=(s,o,h)=>{let d,g=-1,_,b=o[0*2+1],$=0,et=7,tt=4;for(b===0&&(et=138,tt=3),d=0;d<=h;d++)if(_=b,b=o[(d+1)*2+1],!(++$<et&&_===b)){if($<tt)do send_code(s,_,s.bl_tree);while(--$!==0);else _!==0?(_!==g&&(send_code(s,_,s.bl_tree),$--),send_code(s,REP_3_6,s.bl_tree),send_bits(s,$-3,2)):$<=10?(send_code(s,REPZ_3_10,s.bl_tree),send_bits(s,$-3,3)):(send_code(s,REPZ_11_138,s.bl_tree),send_bits(s,$-11,7));$=0,g=_,b===0?(et=138,tt=3):_===b?(et=6,tt=3):(et=7,tt=4)}},build_bl_tree=s=>{let o;for(scan_tree(s,s.dyn_ltree,s.l_desc.max_code),scan_tree(s,s.dyn_dtree,s.d_desc.max_code),build_tree(s,s.bl_desc),o=BL_CODES$1-1;o>=3&&s.bl_tree[bl_order[o]*2+1]===0;o--);return s.opt_len+=3*(o+1)+5+5+4,o},send_all_trees=(s,o,h,d)=>{let g;for(send_bits(s,o-257,5),send_bits(s,h-1,5),send_bits(s,d-4,4),g=0;g<d;g++)send_bits(s,s.bl_tree[bl_order[g]*2+1],3);send_tree(s,s.dyn_ltree,o-1),send_tree(s,s.dyn_dtree,h-1)},detect_data_type=s=>{let o=4093624447,h;for(h=0;h<=31;h++,o>>>=1)if(o&1&&s.dyn_ltree[h*2]!==0)return Z_BINARY;if(s.dyn_ltree[9*2]!==0||s.dyn_ltree[10*2]!==0||s.dyn_ltree[13*2]!==0)return Z_TEXT;for(h=32;h<LITERALS$1$1;h++)if(s.dyn_ltree[h*2]!==0)return Z_TEXT;return Z_BINARY};let static_init_done=!1;const _tr_init$1=s=>{static_init_done||(tr_static_init(),static_init_done=!0),s.l_desc=new TreeDesc(s.dyn_ltree,static_l_desc),s.d_desc=new TreeDesc(s.dyn_dtree,static_d_desc),s.bl_desc=new TreeDesc(s.bl_tree,static_bl_desc),s.bi_buf=0,s.bi_valid=0,init_block(s)},_tr_stored_block$1=(s,o,h,d)=>{send_bits(s,(STORED_BLOCK<<1)+(d?1:0),3),bi_windup(s),put_short(s,h),put_short(s,~h),h&&s.pending_buf.set(s.window.subarray(o,o+h),s.pending),s.pending+=h},_tr_align$1=s=>{send_bits(s,STATIC_TREES<<1,3),send_code(s,END_BLOCK,static_ltree$1),bi_flush(s)},_tr_flush_block$1=(s,o,h,d)=>{let g,_,b=0;s.level>0?(s.strm.data_type===Z_UNKNOWN$1&&(s.strm.data_type=detect_data_type(s)),build_tree(s,s.l_desc),build_tree(s,s.d_desc),b=build_bl_tree(s),g=s.opt_len+3+7>>>3,_=s.static_len+3+7>>>3,_<=g&&(g=_)):g=_=h+5,h+4<=g&&o!==-1?_tr_stored_block$1(s,o,h,d):s.strategy===Z_FIXED$1||_===g?(send_bits(s,(STATIC_TREES<<1)+(d?1:0),3),compress_block(s,static_ltree$1,static_dtree$1)):(send_bits(s,(DYN_TREES<<1)+(d?1:0),3),send_all_trees(s,s.l_desc.max_code+1,s.d_desc.max_code+1,b+1),compress_block(s,s.dyn_ltree,s.dyn_dtree)),init_block(s),d&&bi_windup(s)},_tr_tally$1=(s,o,h)=>(s.pending_buf[s.sym_buf+s.sym_next++]=o,s.pending_buf[s.sym_buf+s.sym_next++]=o>>8,s.pending_buf[s.sym_buf+s.sym_next++]=h,o===0?s.dyn_ltree[h*2]++:(s.matches++,o--,s.dyn_ltree[(_length_code$1[h]+LITERALS$1$1+1)*2]++,s.dyn_dtree[d_code(o)*2]++),s.sym_next===s.sym_end);var _tr_init_1=_tr_init$1,_tr_stored_block_1=_tr_stored_block$1,_tr_flush_block_1=_tr_flush_block$1,_tr_tally_1=_tr_tally$1,_tr_align_1=_tr_align$1,trees$1={_tr_init:_tr_init_1,_tr_stored_block:_tr_stored_block_1,_tr_flush_block:_tr_flush_block_1,_tr_tally:_tr_tally_1,_tr_align:_tr_align_1};const adler32$1=(s,o,h,d)=>{let g=s&65535|0,_=s>>>16&65535|0,b=0;for(;h!==0;){b=h>2e3?2e3:h,h-=b;do g=g+o[d++]|0,_=_+g|0;while(--b);g%=65521,_%=65521}return g|_<<16|0};var adler32_1$2=adler32$1;const makeTable$1=()=>{let s,o=[];for(var h=0;h<256;h++){s=h;for(var d=0;d<8;d++)s=s&1?3988292384^s>>>1:s>>>1;o[h]=s}return o},crcTable$2=new Uint32Array(makeTable$1()),crc32$1=(s,o,h,d)=>{const g=crcTable$2,_=d+h;s^=-1;for(let b=d;b<_;b++)s=s>>>8^g[(s^o[b])&255];return s^-1};var crc32_1$2=crc32$1,messages$2={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},constants$2$1={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init,_tr_stored_block,_tr_flush_block,_tr_tally,_tr_align}=trees$1,{Z_NO_FLUSH:Z_NO_FLUSH$2,Z_PARTIAL_FLUSH,Z_FULL_FLUSH:Z_FULL_FLUSH$1,Z_FINISH:Z_FINISH$3,Z_BLOCK:Z_BLOCK$1,Z_OK:Z_OK$3,Z_STREAM_END:Z_STREAM_END$3,Z_STREAM_ERROR:Z_STREAM_ERROR$2,Z_DATA_ERROR:Z_DATA_ERROR$2,Z_BUF_ERROR:Z_BUF_ERROR$1,Z_DEFAULT_COMPRESSION:Z_DEFAULT_COMPRESSION$1,Z_FILTERED,Z_HUFFMAN_ONLY,Z_RLE,Z_FIXED,Z_DEFAULT_STRATEGY:Z_DEFAULT_STRATEGY$1,Z_UNKNOWN,Z_DEFLATED:Z_DEFLATED$2}=constants$2$1,MAX_MEM_LEVEL=9,MAX_WBITS$1=15,DEF_MEM_LEVEL=8,LENGTH_CODES=29,LITERALS=256,L_CODES=LITERALS+1+LENGTH_CODES,D_CODES=30,BL_CODES=19,HEAP_SIZE=2*L_CODES+1,MAX_BITS=15,MIN_MATCH=3,MAX_MATCH=258,MIN_LOOKAHEAD=MAX_MATCH+MIN_MATCH+1,PRESET_DICT=32,INIT_STATE=42,GZIP_STATE=57,EXTRA_STATE=69,NAME_STATE=73,COMMENT_STATE=91,HCRC_STATE=103,BUSY_STATE=113,FINISH_STATE=666,BS_NEED_MORE=1,BS_BLOCK_DONE=2,BS_FINISH_STARTED=3,BS_FINISH_DONE=4,OS_CODE=3,err=(s,o)=>(s.msg=messages$2[o],o),rank=s=>s*2-(s>4?9:0),zero=s=>{let o=s.length;for(;--o>=0;)s[o]=0},slide_hash=s=>{let o,h,d,g=s.w_size;o=s.hash_size,d=o;do h=s.head[--d],s.head[d]=h>=g?h-g:0;while(--o);o=g,d=o;do h=s.prev[--d],s.prev[d]=h>=g?h-g:0;while(--o)};let HASH_ZLIB=(s,o,h)=>(o<<s.hash_shift^h)&s.hash_mask,HASH=HASH_ZLIB;const flush_pending=s=>{const o=s.state;let h=o.pending;h>s.avail_out&&(h=s.avail_out),h!==0&&(s.output.set(o.pending_buf.subarray(o.pending_out,o.pending_out+h),s.next_out),s.next_out+=h,o.pending_out+=h,s.total_out+=h,s.avail_out-=h,o.pending-=h,o.pending===0&&(o.pending_out=0))},flush_block_only=(s,o)=>{_tr_flush_block(s,s.block_start>=0?s.block_start:-1,s.strstart-s.block_start,o),s.block_start=s.strstart,flush_pending(s.strm)},put_byte=(s,o)=>{s.pending_buf[s.pending++]=o},putShortMSB=(s,o)=>{s.pending_buf[s.pending++]=o>>>8&255,s.pending_buf[s.pending++]=o&255},read_buf=(s,o,h,d)=>{let g=s.avail_in;return g>d&&(g=d),g===0?0:(s.avail_in-=g,o.set(s.input.subarray(s.next_in,s.next_in+g),h),s.state.wrap===1?s.adler=adler32_1$2(s.adler,o,g,h):s.state.wrap===2&&(s.adler=crc32_1$2(s.adler,o,g,h)),s.next_in+=g,s.total_in+=g,g)},longest_match=(s,o)=>{let h=s.max_chain_length,d=s.strstart,g,_,b=s.prev_length,$=s.nice_match;const et=s.strstart>s.w_size-MIN_LOOKAHEAD?s.strstart-(s.w_size-MIN_LOOKAHEAD):0,tt=s.window,rt=s.w_mask,nt=s.prev,At=s.strstart+MAX_MATCH;let at=tt[d+b-1],lt=tt[d+b];s.prev_length>=s.good_match&&(h>>=2),$>s.lookahead&&($=s.lookahead);do if(g=o,!(tt[g+b]!==lt||tt[g+b-1]!==at||tt[g]!==tt[d]||tt[++g]!==tt[d+1])){d+=2,g++;do;while(tt[++d]===tt[++g]&&tt[++d]===tt[++g]&&tt[++d]===tt[++g]&&tt[++d]===tt[++g]&&tt[++d]===tt[++g]&&tt[++d]===tt[++g]&&tt[++d]===tt[++g]&&tt[++d]===tt[++g]&&d<At);if(_=MAX_MATCH-(At-d),d=At-MAX_MATCH,_>b){if(s.match_start=o,b=_,_>=$)break;at=tt[d+b-1],lt=tt[d+b]}}while((o=nt[o&rt])>et&&--h!==0);return b<=s.lookahead?b:s.lookahead},fill_window=s=>{const o=s.w_size;let h,d,g;do{if(d=s.window_size-s.lookahead-s.strstart,s.strstart>=o+(o-MIN_LOOKAHEAD)&&(s.window.set(s.window.subarray(o,o+o-d),0),s.match_start-=o,s.strstart-=o,s.block_start-=o,s.insert>s.strstart&&(s.insert=s.strstart),slide_hash(s),d+=o),s.strm.avail_in===0)break;if(h=read_buf(s.strm,s.window,s.strstart+s.lookahead,d),s.lookahead+=h,s.lookahead+s.insert>=MIN_MATCH)for(g=s.strstart-s.insert,s.ins_h=s.window[g],s.ins_h=HASH(s,s.ins_h,s.window[g+1]);s.insert&&(s.ins_h=HASH(s,s.ins_h,s.window[g+MIN_MATCH-1]),s.prev[g&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=g,g++,s.insert--,!(s.lookahead+s.insert<MIN_MATCH)););}while(s.lookahead<MIN_LOOKAHEAD&&s.strm.avail_in!==0)},deflate_stored=(s,o)=>{let h=s.pending_buf_size-5>s.w_size?s.w_size:s.pending_buf_size-5,d,g,_,b=0,$=s.strm.avail_in;do{if(d=65535,_=s.bi_valid+42>>3,s.strm.avail_out<_||(_=s.strm.avail_out-_,g=s.strstart-s.block_start,d>g+s.strm.avail_in&&(d=g+s.strm.avail_in),d>_&&(d=_),d<h&&(d===0&&o!==Z_FINISH$3||o===Z_NO_FLUSH$2||d!==g+s.strm.avail_in)))break;b=o===Z_FINISH$3&&d===g+s.strm.avail_in?1:0,_tr_stored_block(s,0,0,b),s.pending_buf[s.pending-4]=d,s.pending_buf[s.pending-3]=d>>8,s.pending_buf[s.pending-2]=~d,s.pending_buf[s.pending-1]=~d>>8,flush_pending(s.strm),g&&(g>d&&(g=d),s.strm.output.set(s.window.subarray(s.block_start,s.block_start+g),s.strm.next_out),s.strm.next_out+=g,s.strm.avail_out-=g,s.strm.total_out+=g,s.block_start+=g,d-=g),d&&(read_buf(s.strm,s.strm.output,s.strm.next_out,d),s.strm.next_out+=d,s.strm.avail_out-=d,s.strm.total_out+=d)}while(b===0);return $-=s.strm.avail_in,$&&($>=s.w_size?(s.matches=2,s.window.set(s.strm.input.subarray(s.strm.next_in-s.w_size,s.strm.next_in),0),s.strstart=s.w_size,s.insert=s.strstart):(s.window_size-s.strstart<=$&&(s.strstart-=s.w_size,s.window.set(s.window.subarray(s.w_size,s.w_size+s.strstart),0),s.matches<2&&s.matches++,s.insert>s.strstart&&(s.insert=s.strstart)),s.window.set(s.strm.input.subarray(s.strm.next_in-$,s.strm.next_in),s.strstart),s.strstart+=$,s.insert+=$>s.w_size-s.insert?s.w_size-s.insert:$),s.block_start=s.strstart),s.high_water<s.strstart&&(s.high_water=s.strstart),b?BS_FINISH_DONE:o!==Z_NO_FLUSH$2&&o!==Z_FINISH$3&&s.strm.avail_in===0&&s.strstart===s.block_start?BS_BLOCK_DONE:(_=s.window_size-s.strstart,s.strm.avail_in>_&&s.block_start>=s.w_size&&(s.block_start-=s.w_size,s.strstart-=s.w_size,s.window.set(s.window.subarray(s.w_size,s.w_size+s.strstart),0),s.matches<2&&s.matches++,_+=s.w_size,s.insert>s.strstart&&(s.insert=s.strstart)),_>s.strm.avail_in&&(_=s.strm.avail_in),_&&(read_buf(s.strm,s.window,s.strstart,_),s.strstart+=_,s.insert+=_>s.w_size-s.insert?s.w_size-s.insert:_),s.high_water<s.strstart&&(s.high_water=s.strstart),_=s.bi_valid+42>>3,_=s.pending_buf_size-_>65535?65535:s.pending_buf_size-_,h=_>s.w_size?s.w_size:_,g=s.strstart-s.block_start,(g>=h||(g||o===Z_FINISH$3)&&o!==Z_NO_FLUSH$2&&s.strm.avail_in===0&&g<=_)&&(d=g>_?_:g,b=o===Z_FINISH$3&&s.strm.avail_in===0&&d===g?1:0,_tr_stored_block(s,s.block_start,d,b),s.block_start+=d,flush_pending(s.strm)),b?BS_FINISH_STARTED:BS_NEED_MORE)},deflate_fast=(s,o)=>{let h,d;for(;;){if(s.lookahead<MIN_LOOKAHEAD){if(fill_window(s),s.lookahead<MIN_LOOKAHEAD&&o===Z_NO_FLUSH$2)return BS_NEED_MORE;if(s.lookahead===0)break}if(h=0,s.lookahead>=MIN_MATCH&&(s.ins_h=HASH(s,s.ins_h,s.window[s.strstart+MIN_MATCH-1]),h=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=s.strstart),h!==0&&s.strstart-h<=s.w_size-MIN_LOOKAHEAD&&(s.match_length=longest_match(s,h)),s.match_length>=MIN_MATCH)if(d=_tr_tally(s,s.strstart-s.match_start,s.match_length-MIN_MATCH),s.lookahead-=s.match_length,s.match_length<=s.max_lazy_match&&s.lookahead>=MIN_MATCH){s.match_length--;do s.strstart++,s.ins_h=HASH(s,s.ins_h,s.window[s.strstart+MIN_MATCH-1]),h=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=s.strstart;while(--s.match_length!==0);s.strstart++}else s.strstart+=s.match_length,s.match_length=0,s.ins_h=s.window[s.strstart],s.ins_h=HASH(s,s.ins_h,s.window[s.strstart+1]);else d=_tr_tally(s,0,s.window[s.strstart]),s.lookahead--,s.strstart++;if(d&&(flush_block_only(s,!1),s.strm.avail_out===0))return BS_NEED_MORE}return s.insert=s.strstart<MIN_MATCH-1?s.strstart:MIN_MATCH-1,o===Z_FINISH$3?(flush_block_only(s,!0),s.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):s.sym_next&&(flush_block_only(s,!1),s.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_slow=(s,o)=>{let h,d,g;for(;;){if(s.lookahead<MIN_LOOKAHEAD){if(fill_window(s),s.lookahead<MIN_LOOKAHEAD&&o===Z_NO_FLUSH$2)return BS_NEED_MORE;if(s.lookahead===0)break}if(h=0,s.lookahead>=MIN_MATCH&&(s.ins_h=HASH(s,s.ins_h,s.window[s.strstart+MIN_MATCH-1]),h=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=s.strstart),s.prev_length=s.match_length,s.prev_match=s.match_start,s.match_length=MIN_MATCH-1,h!==0&&s.prev_length<s.max_lazy_match&&s.strstart-h<=s.w_size-MIN_LOOKAHEAD&&(s.match_length=longest_match(s,h),s.match_length<=5&&(s.strategy===Z_FILTERED||s.match_length===MIN_MATCH&&s.strstart-s.match_start>4096)&&(s.match_length=MIN_MATCH-1)),s.prev_length>=MIN_MATCH&&s.match_length<=s.prev_length){g=s.strstart+s.lookahead-MIN_MATCH,d=_tr_tally(s,s.strstart-1-s.prev_match,s.prev_length-MIN_MATCH),s.lookahead-=s.prev_length-1,s.prev_length-=2;do++s.strstart<=g&&(s.ins_h=HASH(s,s.ins_h,s.window[s.strstart+MIN_MATCH-1]),h=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=s.strstart);while(--s.prev_length!==0);if(s.match_available=0,s.match_length=MIN_MATCH-1,s.strstart++,d&&(flush_block_only(s,!1),s.strm.avail_out===0))return BS_NEED_MORE}else if(s.match_available){if(d=_tr_tally(s,0,s.window[s.strstart-1]),d&&flush_block_only(s,!1),s.strstart++,s.lookahead--,s.strm.avail_out===0)return BS_NEED_MORE}else s.match_available=1,s.strstart++,s.lookahead--}return s.match_available&&(d=_tr_tally(s,0,s.window[s.strstart-1]),s.match_available=0),s.insert=s.strstart<MIN_MATCH-1?s.strstart:MIN_MATCH-1,o===Z_FINISH$3?(flush_block_only(s,!0),s.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):s.sym_next&&(flush_block_only(s,!1),s.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_rle=(s,o)=>{let h,d,g,_;const b=s.window;for(;;){if(s.lookahead<=MAX_MATCH){if(fill_window(s),s.lookahead<=MAX_MATCH&&o===Z_NO_FLUSH$2)return BS_NEED_MORE;if(s.lookahead===0)break}if(s.match_length=0,s.lookahead>=MIN_MATCH&&s.strstart>0&&(g=s.strstart-1,d=b[g],d===b[++g]&&d===b[++g]&&d===b[++g])){_=s.strstart+MAX_MATCH;do;while(d===b[++g]&&d===b[++g]&&d===b[++g]&&d===b[++g]&&d===b[++g]&&d===b[++g]&&d===b[++g]&&d===b[++g]&&g<_);s.match_length=MAX_MATCH-(_-g),s.match_length>s.lookahead&&(s.match_length=s.lookahead)}if(s.match_length>=MIN_MATCH?(h=_tr_tally(s,1,s.match_length-MIN_MATCH),s.lookahead-=s.match_length,s.strstart+=s.match_length,s.match_length=0):(h=_tr_tally(s,0,s.window[s.strstart]),s.lookahead--,s.strstart++),h&&(flush_block_only(s,!1),s.strm.avail_out===0))return BS_NEED_MORE}return s.insert=0,o===Z_FINISH$3?(flush_block_only(s,!0),s.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):s.sym_next&&(flush_block_only(s,!1),s.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_huff=(s,o)=>{let h;for(;;){if(s.lookahead===0&&(fill_window(s),s.lookahead===0)){if(o===Z_NO_FLUSH$2)return BS_NEED_MORE;break}if(s.match_length=0,h=_tr_tally(s,0,s.window[s.strstart]),s.lookahead--,s.strstart++,h&&(flush_block_only(s,!1),s.strm.avail_out===0))return BS_NEED_MORE}return s.insert=0,o===Z_FINISH$3?(flush_block_only(s,!0),s.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):s.sym_next&&(flush_block_only(s,!1),s.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE};function Config(s,o,h,d,g){this.good_length=s,this.max_lazy=o,this.nice_length=h,this.max_chain=d,this.func=g}const configuration_table=[new Config(0,0,0,0,deflate_stored),new Config(4,4,8,4,deflate_fast),new Config(4,5,16,8,deflate_fast),new Config(4,6,32,32,deflate_fast),new Config(4,4,16,16,deflate_slow),new Config(8,16,32,32,deflate_slow),new Config(8,16,128,128,deflate_slow),new Config(8,32,128,256,deflate_slow),new Config(32,128,258,1024,deflate_slow),new Config(32,258,258,4096,deflate_slow)],lm_init=s=>{s.window_size=2*s.w_size,zero(s.head),s.max_lazy_match=configuration_table[s.level].max_lazy,s.good_match=configuration_table[s.level].good_length,s.nice_match=configuration_table[s.level].nice_length,s.max_chain_length=configuration_table[s.level].max_chain,s.strstart=0,s.block_start=0,s.lookahead=0,s.insert=0,s.match_length=s.prev_length=MIN_MATCH-1,s.match_available=0,s.ins_h=0};function DeflateState(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Z_DEFLATED$2,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(HEAP_SIZE*2),this.dyn_dtree=new Uint16Array((2*D_CODES+1)*2),this.bl_tree=new Uint16Array((2*BL_CODES+1)*2),zero(this.dyn_ltree),zero(this.dyn_dtree),zero(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(MAX_BITS+1),this.heap=new Uint16Array(2*L_CODES+1),zero(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*L_CODES+1),zero(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const deflateStateCheck=s=>{if(!s)return 1;const o=s.state;return!o||o.strm!==s||o.status!==INIT_STATE&&o.status!==GZIP_STATE&&o.status!==EXTRA_STATE&&o.status!==NAME_STATE&&o.status!==COMMENT_STATE&&o.status!==HCRC_STATE&&o.status!==BUSY_STATE&&o.status!==FINISH_STATE?1:0},deflateResetKeep=s=>{if(deflateStateCheck(s))return err(s,Z_STREAM_ERROR$2);s.total_in=s.total_out=0,s.data_type=Z_UNKNOWN;const o=s.state;return o.pending=0,o.pending_out=0,o.wrap<0&&(o.wrap=-o.wrap),o.status=o.wrap===2?GZIP_STATE:o.wrap?INIT_STATE:BUSY_STATE,s.adler=o.wrap===2?0:1,o.last_flush=-2,_tr_init(o),Z_OK$3},deflateReset=s=>{const o=deflateResetKeep(s);return o===Z_OK$3&&lm_init(s.state),o},deflateSetHeader=(s,o)=>deflateStateCheck(s)||s.state.wrap!==2?Z_STREAM_ERROR$2:(s.state.gzhead=o,Z_OK$3),deflateInit2=(s,o,h,d,g,_)=>{if(!s)return Z_STREAM_ERROR$2;let b=1;if(o===Z_DEFAULT_COMPRESSION$1&&(o=6),d<0?(b=0,d=-d):d>15&&(b=2,d-=16),g<1||g>MAX_MEM_LEVEL||h!==Z_DEFLATED$2||d<8||d>15||o<0||o>9||_<0||_>Z_FIXED||d===8&&b!==1)return err(s,Z_STREAM_ERROR$2);d===8&&(d=9);const $=new DeflateState;return s.state=$,$.strm=s,$.status=INIT_STATE,$.wrap=b,$.gzhead=null,$.w_bits=d,$.w_size=1<<$.w_bits,$.w_mask=$.w_size-1,$.hash_bits=g+7,$.hash_size=1<<$.hash_bits,$.hash_mask=$.hash_size-1,$.hash_shift=~~(($.hash_bits+MIN_MATCH-1)/MIN_MATCH),$.window=new Uint8Array($.w_size*2),$.head=new Uint16Array($.hash_size),$.prev=new Uint16Array($.w_size),$.lit_bufsize=1<<g+6,$.pending_buf_size=$.lit_bufsize*4,$.pending_buf=new Uint8Array($.pending_buf_size),$.sym_buf=$.lit_bufsize,$.sym_end=($.lit_bufsize-1)*3,$.level=o,$.strategy=_,$.method=h,deflateReset(s)},deflateInit=(s,o)=>deflateInit2(s,o,Z_DEFLATED$2,MAX_WBITS$1,DEF_MEM_LEVEL,Z_DEFAULT_STRATEGY$1),deflate$2=(s,o)=>{if(deflateStateCheck(s)||o>Z_BLOCK$1||o<0)return s?err(s,Z_STREAM_ERROR$2):Z_STREAM_ERROR$2;const h=s.state;if(!s.output||s.avail_in!==0&&!s.input||h.status===FINISH_STATE&&o!==Z_FINISH$3)return err(s,s.avail_out===0?Z_BUF_ERROR$1:Z_STREAM_ERROR$2);const d=h.last_flush;if(h.last_flush=o,h.pending!==0){if(flush_pending(s),s.avail_out===0)return h.last_flush=-1,Z_OK$3}else if(s.avail_in===0&&rank(o)<=rank(d)&&o!==Z_FINISH$3)return err(s,Z_BUF_ERROR$1);if(h.status===FINISH_STATE&&s.avail_in!==0)return err(s,Z_BUF_ERROR$1);if(h.status===INIT_STATE&&h.wrap===0&&(h.status=BUSY_STATE),h.status===INIT_STATE){let g=Z_DEFLATED$2+(h.w_bits-8<<4)<<8,_=-1;if(h.strategy>=Z_HUFFMAN_ONLY||h.level<2?_=0:h.level<6?_=1:h.level===6?_=2:_=3,g|=_<<6,h.strstart!==0&&(g|=PRESET_DICT),g+=31-g%31,putShortMSB(h,g),h.strstart!==0&&(putShortMSB(h,s.adler>>>16),putShortMSB(h,s.adler&65535)),s.adler=1,h.status=BUSY_STATE,flush_pending(s),h.pending!==0)return h.last_flush=-1,Z_OK$3}if(h.status===GZIP_STATE){if(s.adler=0,put_byte(h,31),put_byte(h,139),put_byte(h,8),h.gzhead)put_byte(h,(h.gzhead.text?1:0)+(h.gzhead.hcrc?2:0)+(h.gzhead.extra?4:0)+(h.gzhead.name?8:0)+(h.gzhead.comment?16:0)),put_byte(h,h.gzhead.time&255),put_byte(h,h.gzhead.time>>8&255),put_byte(h,h.gzhead.time>>16&255),put_byte(h,h.gzhead.time>>24&255),put_byte(h,h.level===9?2:h.strategy>=Z_HUFFMAN_ONLY||h.level<2?4:0),put_byte(h,h.gzhead.os&255),h.gzhead.extra&&h.gzhead.extra.length&&(put_byte(h,h.gzhead.extra.length&255),put_byte(h,h.gzhead.extra.length>>8&255)),h.gzhead.hcrc&&(s.adler=crc32_1$2(s.adler,h.pending_buf,h.pending,0)),h.gzindex=0,h.status=EXTRA_STATE;else if(put_byte(h,0),put_byte(h,0),put_byte(h,0),put_byte(h,0),put_byte(h,0),put_byte(h,h.level===9?2:h.strategy>=Z_HUFFMAN_ONLY||h.level<2?4:0),put_byte(h,OS_CODE),h.status=BUSY_STATE,flush_pending(s),h.pending!==0)return h.last_flush=-1,Z_OK$3}if(h.status===EXTRA_STATE){if(h.gzhead.extra){let g=h.pending,_=(h.gzhead.extra.length&65535)-h.gzindex;for(;h.pending+_>h.pending_buf_size;){let $=h.pending_buf_size-h.pending;if(h.pending_buf.set(h.gzhead.extra.subarray(h.gzindex,h.gzindex+$),h.pending),h.pending=h.pending_buf_size,h.gzhead.hcrc&&h.pending>g&&(s.adler=crc32_1$2(s.adler,h.pending_buf,h.pending-g,g)),h.gzindex+=$,flush_pending(s),h.pending!==0)return h.last_flush=-1,Z_OK$3;g=0,_-=$}let b=new Uint8Array(h.gzhead.extra);h.pending_buf.set(b.subarray(h.gzindex,h.gzindex+_),h.pending),h.pending+=_,h.gzhead.hcrc&&h.pending>g&&(s.adler=crc32_1$2(s.adler,h.pending_buf,h.pending-g,g)),h.gzindex=0}h.status=NAME_STATE}if(h.status===NAME_STATE){if(h.gzhead.name){let g=h.pending,_;do{if(h.pending===h.pending_buf_size){if(h.gzhead.hcrc&&h.pending>g&&(s.adler=crc32_1$2(s.adler,h.pending_buf,h.pending-g,g)),flush_pending(s),h.pending!==0)return h.last_flush=-1,Z_OK$3;g=0}h.gzindex<h.gzhead.name.length?_=h.gzhead.name.charCodeAt(h.gzindex++)&255:_=0,put_byte(h,_)}while(_!==0);h.gzhead.hcrc&&h.pending>g&&(s.adler=crc32_1$2(s.adler,h.pending_buf,h.pending-g,g)),h.gzindex=0}h.status=COMMENT_STATE}if(h.status===COMMENT_STATE){if(h.gzhead.comment){let g=h.pending,_;do{if(h.pending===h.pending_buf_size){if(h.gzhead.hcrc&&h.pending>g&&(s.adler=crc32_1$2(s.adler,h.pending_buf,h.pending-g,g)),flush_pending(s),h.pending!==0)return h.last_flush=-1,Z_OK$3;g=0}h.gzindex<h.gzhead.comment.length?_=h.gzhead.comment.charCodeAt(h.gzindex++)&255:_=0,put_byte(h,_)}while(_!==0);h.gzhead.hcrc&&h.pending>g&&(s.adler=crc32_1$2(s.adler,h.pending_buf,h.pending-g,g))}h.status=HCRC_STATE}if(h.status===HCRC_STATE){if(h.gzhead.hcrc){if(h.pending+2>h.pending_buf_size&&(flush_pending(s),h.pending!==0))return h.last_flush=-1,Z_OK$3;put_byte(h,s.adler&255),put_byte(h,s.adler>>8&255),s.adler=0}if(h.status=BUSY_STATE,flush_pending(s),h.pending!==0)return h.last_flush=-1,Z_OK$3}if(s.avail_in!==0||h.lookahead!==0||o!==Z_NO_FLUSH$2&&h.status!==FINISH_STATE){let g=h.level===0?deflate_stored(h,o):h.strategy===Z_HUFFMAN_ONLY?deflate_huff(h,o):h.strategy===Z_RLE?deflate_rle(h,o):configuration_table[h.level].func(h,o);if((g===BS_FINISH_STARTED||g===BS_FINISH_DONE)&&(h.status=FINISH_STATE),g===BS_NEED_MORE||g===BS_FINISH_STARTED)return s.avail_out===0&&(h.last_flush=-1),Z_OK$3;if(g===BS_BLOCK_DONE&&(o===Z_PARTIAL_FLUSH?_tr_align(h):o!==Z_BLOCK$1&&(_tr_stored_block(h,0,0,!1),o===Z_FULL_FLUSH$1&&(zero(h.head),h.lookahead===0&&(h.strstart=0,h.block_start=0,h.insert=0))),flush_pending(s),s.avail_out===0))return h.last_flush=-1,Z_OK$3}return o!==Z_FINISH$3?Z_OK$3:h.wrap<=0?Z_STREAM_END$3:(h.wrap===2?(put_byte(h,s.adler&255),put_byte(h,s.adler>>8&255),put_byte(h,s.adler>>16&255),put_byte(h,s.adler>>24&255),put_byte(h,s.total_in&255),put_byte(h,s.total_in>>8&255),put_byte(h,s.total_in>>16&255),put_byte(h,s.total_in>>24&255)):(putShortMSB(h,s.adler>>>16),putShortMSB(h,s.adler&65535)),flush_pending(s),h.wrap>0&&(h.wrap=-h.wrap),h.pending!==0?Z_OK$3:Z_STREAM_END$3)},deflateEnd=s=>{if(deflateStateCheck(s))return Z_STREAM_ERROR$2;const o=s.state.status;return s.state=null,o===BUSY_STATE?err(s,Z_DATA_ERROR$2):Z_OK$3},deflateSetDictionary=(s,o)=>{let h=o.length;if(deflateStateCheck(s))return Z_STREAM_ERROR$2;const d=s.state,g=d.wrap;if(g===2||g===1&&d.status!==INIT_STATE||d.lookahead)return Z_STREAM_ERROR$2;if(g===1&&(s.adler=adler32_1$2(s.adler,o,h,0)),d.wrap=0,h>=d.w_size){g===0&&(zero(d.head),d.strstart=0,d.block_start=0,d.insert=0);let et=new Uint8Array(d.w_size);et.set(o.subarray(h-d.w_size,h),0),o=et,h=d.w_size}const _=s.avail_in,b=s.next_in,$=s.input;for(s.avail_in=h,s.next_in=0,s.input=o,fill_window(d);d.lookahead>=MIN_MATCH;){let et=d.strstart,tt=d.lookahead-(MIN_MATCH-1);do d.ins_h=HASH(d,d.ins_h,d.window[et+MIN_MATCH-1]),d.prev[et&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=et,et++;while(--tt);d.strstart=et,d.lookahead=MIN_MATCH-1,fill_window(d)}return d.strstart+=d.lookahead,d.block_start=d.strstart,d.insert=d.lookahead,d.lookahead=0,d.match_length=d.prev_length=MIN_MATCH-1,d.match_available=0,s.next_in=b,s.input=$,s.avail_in=_,d.wrap=g,Z_OK$3};var deflateInit_1=deflateInit,deflateInit2_1=deflateInit2,deflateReset_1=deflateReset,deflateResetKeep_1=deflateResetKeep,deflateSetHeader_1=deflateSetHeader,deflate_2$1=deflate$2,deflateEnd_1=deflateEnd,deflateSetDictionary_1=deflateSetDictionary,deflateInfo="pako deflate (from Nodeca project)",deflate_1$2={deflateInit:deflateInit_1,deflateInit2:deflateInit2_1,deflateReset:deflateReset_1,deflateResetKeep:deflateResetKeep_1,deflateSetHeader:deflateSetHeader_1,deflate:deflate_2$1,deflateEnd:deflateEnd_1,deflateSetDictionary:deflateSetDictionary_1,deflateInfo};const _has$1=(s,o)=>Object.prototype.hasOwnProperty.call(s,o);var assign$1=function(s){const o=Array.prototype.slice.call(arguments,1);for(;o.length;){const h=o.shift();if(h){if(typeof h!="object")throw new TypeError(h+"must be non-object");for(const d in h)_has$1(h,d)&&(s[d]=h[d])}}return s},flattenChunks$1=s=>{let o=0;for(let d=0,g=s.length;d<g;d++)o+=s[d].length;const h=new Uint8Array(o);for(let d=0,g=0,_=s.length;d<_;d++){let b=s[d];h.set(b,g),g+=b.length}return h},common$2={assign:assign$1,flattenChunks:flattenChunks$1};let STR_APPLY_UIA_OK$1=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{STR_APPLY_UIA_OK$1=!1}const _utf8len$1=new Uint8Array(256);for(let s=0;s<256;s++)_utf8len$1[s]=s>=252?6:s>=248?5:s>=240?4:s>=224?3:s>=192?2:1;_utf8len$1[254]=_utf8len$1[254]=1;var string2buf$1=s=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(s);let o,h,d,g,_,b=s.length,$=0;for(g=0;g<b;g++)h=s.charCodeAt(g),(h&64512)===55296&&g+1<b&&(d=s.charCodeAt(g+1),(d&64512)===56320&&(h=65536+(h-55296<<10)+(d-56320),g++)),$+=h<128?1:h<2048?2:h<65536?3:4;for(o=new Uint8Array($),_=0,g=0;_<$;g++)h=s.charCodeAt(g),(h&64512)===55296&&g+1<b&&(d=s.charCodeAt(g+1),(d&64512)===56320&&(h=65536+(h-55296<<10)+(d-56320),g++)),h<128?o[_++]=h:h<2048?(o[_++]=192|h>>>6,o[_++]=128|h&63):h<65536?(o[_++]=224|h>>>12,o[_++]=128|h>>>6&63,o[_++]=128|h&63):(o[_++]=240|h>>>18,o[_++]=128|h>>>12&63,o[_++]=128|h>>>6&63,o[_++]=128|h&63);return o};const buf2binstring$1=(s,o)=>{if(o<65534&&s.subarray&&STR_APPLY_UIA_OK$1)return String.fromCharCode.apply(null,s.length===o?s:s.subarray(0,o));let h="";for(let d=0;d<o;d++)h+=String.fromCharCode(s[d]);return h};var buf2string$1=(s,o)=>{const h=o||s.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(s.subarray(0,o));let d,g;const _=new Array(h*2);for(g=0,d=0;d<h;){let b=s[d++];if(b<128){_[g++]=b;continue}let $=_utf8len$1[b];if($>4){_[g++]=65533,d+=$-1;continue}for(b&=$===2?31:$===3?15:7;$>1&&d<h;)b=b<<6|s[d++]&63,$--;if($>1){_[g++]=65533;continue}b<65536?_[g++]=b:(b-=65536,_[g++]=55296|b>>10&1023,_[g++]=56320|b&1023)}return buf2binstring$1(_,g)},utf8border$1=(s,o)=>{o=o||s.length,o>s.length&&(o=s.length);let h=o-1;for(;h>=0&&(s[h]&192)===128;)h--;return h<0||h===0?o:h+_utf8len$1[s[h]]>o?h:o},strings$2={string2buf:string2buf$1,buf2string:buf2string$1,utf8border:utf8border$1};function ZStream$1(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var zstream$2=ZStream$1;const toString$1$1=Object.prototype.toString,{Z_NO_FLUSH:Z_NO_FLUSH$1,Z_SYNC_FLUSH,Z_FULL_FLUSH,Z_FINISH:Z_FINISH$2,Z_OK:Z_OK$2,Z_STREAM_END:Z_STREAM_END$2,Z_DEFAULT_COMPRESSION,Z_DEFAULT_STRATEGY,Z_DEFLATED:Z_DEFLATED$1}=constants$2$1;function Deflate$1(s){this.options=common$2.assign({level:Z_DEFAULT_COMPRESSION,method:Z_DEFLATED$1,chunkSize:16384,windowBits:15,memLevel:8,strategy:Z_DEFAULT_STRATEGY},s||{});let o=this.options;o.raw&&o.windowBits>0?o.windowBits=-o.windowBits:o.gzip&&o.windowBits>0&&o.windowBits<16&&(o.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zstream$2,this.strm.avail_out=0;let h=deflate_1$2.deflateInit2(this.strm,o.level,o.method,o.windowBits,o.memLevel,o.strategy);if(h!==Z_OK$2)throw new Error(messages$2[h]);if(o.header&&deflate_1$2.deflateSetHeader(this.strm,o.header),o.dictionary){let d;if(typeof o.dictionary=="string"?d=strings$2.string2buf(o.dictionary):toString$1$1.call(o.dictionary)==="[object ArrayBuffer]"?d=new Uint8Array(o.dictionary):d=o.dictionary,h=deflate_1$2.deflateSetDictionary(this.strm,d),h!==Z_OK$2)throw new Error(messages$2[h]);this._dict_set=!0}}Deflate$1.prototype.push=function(s,o){const h=this.strm,d=this.options.chunkSize;let g,_;if(this.ended)return!1;for(o===~~o?_=o:_=o===!0?Z_FINISH$2:Z_NO_FLUSH$1,typeof s=="string"?h.input=strings$2.string2buf(s):toString$1$1.call(s)==="[object ArrayBuffer]"?h.input=new Uint8Array(s):h.input=s,h.next_in=0,h.avail_in=h.input.length;;){if(h.avail_out===0&&(h.output=new Uint8Array(d),h.next_out=0,h.avail_out=d),(_===Z_SYNC_FLUSH||_===Z_FULL_FLUSH)&&h.avail_out<=6){this.onData(h.output.subarray(0,h.next_out)),h.avail_out=0;continue}if(g=deflate_1$2.deflate(h,_),g===Z_STREAM_END$2)return h.next_out>0&&this.onData(h.output.subarray(0,h.next_out)),g=deflate_1$2.deflateEnd(this.strm),this.onEnd(g),this.ended=!0,g===Z_OK$2;if(h.avail_out===0){this.onData(h.output);continue}if(_>0&&h.next_out>0){this.onData(h.output.subarray(0,h.next_out)),h.avail_out=0;continue}if(h.avail_in===0)break}return!0};Deflate$1.prototype.onData=function(s){this.chunks.push(s)};Deflate$1.prototype.onEnd=function(s){s===Z_OK$2&&(this.result=common$2.flattenChunks(this.chunks)),this.chunks=[],this.err=s,this.msg=this.strm.msg};function deflate$1$1(s,o){const h=new Deflate$1(o);if(h.push(s,!0),h.err)throw h.msg||messages$2[h.err];return h.result}var deflate_2=deflate$1$1,deflate_1$1={deflate:deflate_2};const BAD$1$1=16209,TYPE$1$1=16191;var inffast$2=function(s,o){let h,d,g,_,b,$,et,tt,rt,nt,At,at,lt,gt,_t,ct,pt,dt,mt,Qt,xt,bt,kt,Lt;const Ht=s.state;h=s.next_in,kt=s.input,d=h+(s.avail_in-5),g=s.next_out,Lt=s.output,_=g-(o-s.avail_out),b=g+(s.avail_out-257),$=Ht.dmax,et=Ht.wsize,tt=Ht.whave,rt=Ht.wnext,nt=Ht.window,At=Ht.hold,at=Ht.bits,lt=Ht.lencode,gt=Ht.distcode,_t=(1<<Ht.lenbits)-1,ct=(1<<Ht.distbits)-1;t:do{at<15&&(At+=kt[h++]<<at,at+=8,At+=kt[h++]<<at,at+=8),pt=lt[At&_t];e:for(;;){if(dt=pt>>>24,At>>>=dt,at-=dt,dt=pt>>>16&255,dt===0)Lt[g++]=pt&65535;else if(dt&16){mt=pt&65535,dt&=15,dt&&(at<dt&&(At+=kt[h++]<<at,at+=8),mt+=At&(1<<dt)-1,At>>>=dt,at-=dt),at<15&&(At+=kt[h++]<<at,at+=8,At+=kt[h++]<<at,at+=8),pt=gt[At&ct];r:for(;;){if(dt=pt>>>24,At>>>=dt,at-=dt,dt=pt>>>16&255,dt&16){if(Qt=pt&65535,dt&=15,at<dt&&(At+=kt[h++]<<at,at+=8,at<dt&&(At+=kt[h++]<<at,at+=8)),Qt+=At&(1<<dt)-1,Qt>$){s.msg="invalid distance too far back",Ht.mode=BAD$1$1;break t}if(At>>>=dt,at-=dt,dt=g-_,Qt>dt){if(dt=Qt-dt,dt>tt&&Ht.sane){s.msg="invalid distance too far back",Ht.mode=BAD$1$1;break t}if(xt=0,bt=nt,rt===0){if(xt+=et-dt,dt<mt){mt-=dt;do Lt[g++]=nt[xt++];while(--dt);xt=g-Qt,bt=Lt}}else if(rt<dt){if(xt+=et+rt-dt,dt-=rt,dt<mt){mt-=dt;do Lt[g++]=nt[xt++];while(--dt);if(xt=0,rt<mt){dt=rt,mt-=dt;do Lt[g++]=nt[xt++];while(--dt);xt=g-Qt,bt=Lt}}}else if(xt+=rt-dt,dt<mt){mt-=dt;do Lt[g++]=nt[xt++];while(--dt);xt=g-Qt,bt=Lt}for(;mt>2;)Lt[g++]=bt[xt++],Lt[g++]=bt[xt++],Lt[g++]=bt[xt++],mt-=3;mt&&(Lt[g++]=bt[xt++],mt>1&&(Lt[g++]=bt[xt++]))}else{xt=g-Qt;do Lt[g++]=Lt[xt++],Lt[g++]=Lt[xt++],Lt[g++]=Lt[xt++],mt-=3;while(mt>2);mt&&(Lt[g++]=Lt[xt++],mt>1&&(Lt[g++]=Lt[xt++]))}}else if(dt&64){s.msg="invalid distance code",Ht.mode=BAD$1$1;break t}else{pt=gt[(pt&65535)+(At&(1<<dt)-1)];continue r}break}}else if(dt&64)if(dt&32){Ht.mode=TYPE$1$1;break t}else{s.msg="invalid literal/length code",Ht.mode=BAD$1$1;break t}else{pt=lt[(pt&65535)+(At&(1<<dt)-1)];continue e}break}}while(h<d&&g<b);mt=at>>3,h-=mt,at-=mt<<3,At&=(1<<at)-1,s.next_in=h,s.next_out=g,s.avail_in=h<d?5+(d-h):5-(h-d),s.avail_out=g<b?257+(b-g):257-(g-b),Ht.hold=At,Ht.bits=at};const MAXBITS$1=15,ENOUGH_LENS$1$1=852,ENOUGH_DISTS$1$1=592,CODES$1$1=0,LENS$1$1=1,DISTS$1$1=2,lbase$1=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),lext$1=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),dbase$1=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),dext$1=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),inflate_table$1=(s,o,h,d,g,_,b,$)=>{const et=$.bits;let tt=0,rt=0,nt=0,At=0,at=0,lt=0,gt=0,_t=0,ct=0,pt=0,dt,mt,Qt,xt,bt,kt=null,Lt;const Ht=new Uint16Array(MAXBITS$1+1),Pt=new Uint16Array(MAXBITS$1+1);let jt=null,Vt,Xt,nr;for(tt=0;tt<=MAXBITS$1;tt++)Ht[tt]=0;for(rt=0;rt<d;rt++)Ht[o[h+rt]]++;for(at=et,At=MAXBITS$1;At>=1&&Ht[At]===0;At--);if(at>At&&(at=At),At===0)return g[_++]=1<<24|64<<16|0,g[_++]=1<<24|64<<16|0,$.bits=1,0;for(nt=1;nt<At&&Ht[nt]===0;nt++);for(at<nt&&(at=nt),_t=1,tt=1;tt<=MAXBITS$1;tt++)if(_t<<=1,_t-=Ht[tt],_t<0)return-1;if(_t>0&&(s===CODES$1$1||At!==1))return-1;for(Pt[1]=0,tt=1;tt<MAXBITS$1;tt++)Pt[tt+1]=Pt[tt]+Ht[tt];for(rt=0;rt<d;rt++)o[h+rt]!==0&&(b[Pt[o[h+rt]]++]=rt);if(s===CODES$1$1?(kt=jt=b,Lt=20):s===LENS$1$1?(kt=lbase$1,jt=lext$1,Lt=257):(kt=dbase$1,jt=dext$1,Lt=0),pt=0,rt=0,tt=nt,bt=_,lt=at,gt=0,Qt=-1,ct=1<<at,xt=ct-1,s===LENS$1$1&&ct>ENOUGH_LENS$1$1||s===DISTS$1$1&&ct>ENOUGH_DISTS$1$1)return 1;for(;;){Vt=tt-gt,b[rt]+1<Lt?(Xt=0,nr=b[rt]):b[rt]>=Lt?(Xt=jt[b[rt]-Lt],nr=kt[b[rt]-Lt]):(Xt=96,nr=0),dt=1<<tt-gt,mt=1<<lt,nt=mt;do mt-=dt,g[bt+(pt>>gt)+mt]=Vt<<24|Xt<<16|nr|0;while(mt!==0);for(dt=1<<tt-1;pt&dt;)dt>>=1;if(dt!==0?(pt&=dt-1,pt+=dt):pt=0,rt++,--Ht[tt]===0){if(tt===At)break;tt=o[h+b[rt]]}if(tt>at&&(pt&xt)!==Qt){for(gt===0&&(gt=at),bt+=nt,lt=tt-gt,_t=1<<lt;lt+gt<At&&(_t-=Ht[lt+gt],!(_t<=0));)lt++,_t<<=1;if(ct+=1<<lt,s===LENS$1$1&&ct>ENOUGH_LENS$1$1||s===DISTS$1$1&&ct>ENOUGH_DISTS$1$1)return 1;Qt=pt&xt,g[Qt]=at<<24|lt<<16|bt-_|0}}return pt!==0&&(g[bt+pt]=tt-gt<<24|64<<16|0),$.bits=at,0};var inftrees$2=inflate_table$1;const CODES$2=0,LENS$2=1,DISTS$2=2,{Z_FINISH:Z_FINISH$1$1,Z_BLOCK:Z_BLOCK$2,Z_TREES:Z_TREES$1,Z_OK:Z_OK$1$1,Z_STREAM_END:Z_STREAM_END$1$1,Z_NEED_DICT:Z_NEED_DICT$1$1,Z_STREAM_ERROR:Z_STREAM_ERROR$1$1,Z_DATA_ERROR:Z_DATA_ERROR$1$1,Z_MEM_ERROR:Z_MEM_ERROR$1$1,Z_BUF_ERROR:Z_BUF_ERROR$2,Z_DEFLATED:Z_DEFLATED$3}=constants$2$1,HEAD$1=16180,FLAGS$1=16181,TIME$1=16182,OS$1=16183,EXLEN$1=16184,EXTRA$1=16185,NAME$1=16186,COMMENT$1=16187,HCRC$1=16188,DICTID$1=16189,DICT$1=16190,TYPE$2=16191,TYPEDO$1=16192,STORED$1=16193,COPY_$1=16194,COPY$1=16195,TABLE$1=16196,LENLENS$1=16197,CODELENS$1=16198,LEN_$1=16199,LEN$1=16200,LENEXT$1=16201,DIST$1=16202,DISTEXT$1=16203,MATCH$1=16204,LIT$1=16205,CHECK$1=16206,LENGTH$1=16207,DONE$1=16208,BAD$2=16209,MEM$1=16210,SYNC$1=16211,ENOUGH_LENS$2=852,ENOUGH_DISTS$2=592,MAX_WBITS$2=15,DEF_WBITS$1=MAX_WBITS$2,zswap32$1=s=>(s>>>24&255)+(s>>>8&65280)+((s&65280)<<8)+((s&255)<<24);function InflateState$1(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const inflateStateCheck$1=s=>{if(!s)return 1;const o=s.state;return!o||o.strm!==s||o.mode<HEAD$1||o.mode>SYNC$1?1:0},inflateResetKeep$1=s=>{if(inflateStateCheck$1(s))return Z_STREAM_ERROR$1$1;const o=s.state;return s.total_in=s.total_out=o.total=0,s.msg="",o.wrap&&(s.adler=o.wrap&1),o.mode=HEAD$1,o.last=0,o.havedict=0,o.flags=-1,o.dmax=32768,o.head=null,o.hold=0,o.bits=0,o.lencode=o.lendyn=new Int32Array(ENOUGH_LENS$2),o.distcode=o.distdyn=new Int32Array(ENOUGH_DISTS$2),o.sane=1,o.back=-1,Z_OK$1$1},inflateReset$1=s=>{if(inflateStateCheck$1(s))return Z_STREAM_ERROR$1$1;const o=s.state;return o.wsize=0,o.whave=0,o.wnext=0,inflateResetKeep$1(s)},inflateReset2$1=(s,o)=>{let h;if(inflateStateCheck$1(s))return Z_STREAM_ERROR$1$1;const d=s.state;return o<0?(h=0,o=-o):(h=(o>>4)+5,o<48&&(o&=15)),o&&(o<8||o>15)?Z_STREAM_ERROR$1$1:(d.window!==null&&d.wbits!==o&&(d.window=null),d.wrap=h,d.wbits=o,inflateReset$1(s))},inflateInit2$1=(s,o)=>{if(!s)return Z_STREAM_ERROR$1$1;const h=new InflateState$1;s.state=h,h.strm=s,h.window=null,h.mode=HEAD$1;const d=inflateReset2$1(s,o);return d!==Z_OK$1$1&&(s.state=null),d},inflateInit$1=s=>inflateInit2$1(s,DEF_WBITS$1);let virgin$1=!0,lenfix$1,distfix$1;const fixedtables$1=s=>{if(virgin$1){lenfix$1=new Int32Array(512),distfix$1=new Int32Array(32);let o=0;for(;o<144;)s.lens[o++]=8;for(;o<256;)s.lens[o++]=9;for(;o<280;)s.lens[o++]=7;for(;o<288;)s.lens[o++]=8;for(inftrees$2(LENS$2,s.lens,0,288,lenfix$1,0,s.work,{bits:9}),o=0;o<32;)s.lens[o++]=5;inftrees$2(DISTS$2,s.lens,0,32,distfix$1,0,s.work,{bits:5}),virgin$1=!1}s.lencode=lenfix$1,s.lenbits=9,s.distcode=distfix$1,s.distbits=5},updatewindow$1=(s,o,h,d)=>{let g;const _=s.state;return _.window===null&&(_.wsize=1<<_.wbits,_.wnext=0,_.whave=0,_.window=new Uint8Array(_.wsize)),d>=_.wsize?(_.window.set(o.subarray(h-_.wsize,h),0),_.wnext=0,_.whave=_.wsize):(g=_.wsize-_.wnext,g>d&&(g=d),_.window.set(o.subarray(h-d,h-d+g),_.wnext),d-=g,d?(_.window.set(o.subarray(h-d,h),0),_.wnext=d,_.whave=_.wsize):(_.wnext+=g,_.wnext===_.wsize&&(_.wnext=0),_.whave<_.wsize&&(_.whave+=g))),0},inflate$2$1=(s,o)=>{let h,d,g,_,b,$,et,tt,rt,nt,At,at,lt,gt,_t=0,ct,pt,dt,mt,Qt,xt,bt,kt;const Lt=new Uint8Array(4);let Ht,Pt;const jt=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(inflateStateCheck$1(s)||!s.output||!s.input&&s.avail_in!==0)return Z_STREAM_ERROR$1$1;h=s.state,h.mode===TYPE$2&&(h.mode=TYPEDO$1),b=s.next_out,g=s.output,et=s.avail_out,_=s.next_in,d=s.input,$=s.avail_in,tt=h.hold,rt=h.bits,nt=$,At=et,kt=Z_OK$1$1;t:for(;;)switch(h.mode){case HEAD$1:if(h.wrap===0){h.mode=TYPEDO$1;break}for(;rt<16;){if($===0)break t;$--,tt+=d[_++]<<rt,rt+=8}if(h.wrap&2&&tt===35615){h.wbits===0&&(h.wbits=15),h.check=0,Lt[0]=tt&255,Lt[1]=tt>>>8&255,h.check=crc32_1$2(h.check,Lt,2,0),tt=0,rt=0,h.mode=FLAGS$1;break}if(h.head&&(h.head.done=!1),!(h.wrap&1)||(((tt&255)<<8)+(tt>>8))%31){s.msg="incorrect header check",h.mode=BAD$2;break}if((tt&15)!==Z_DEFLATED$3){s.msg="unknown compression method",h.mode=BAD$2;break}if(tt>>>=4,rt-=4,bt=(tt&15)+8,h.wbits===0&&(h.wbits=bt),bt>15||bt>h.wbits){s.msg="invalid window size",h.mode=BAD$2;break}h.dmax=1<<h.wbits,h.flags=0,s.adler=h.check=1,h.mode=tt&512?DICTID$1:TYPE$2,tt=0,rt=0;break;case FLAGS$1:for(;rt<16;){if($===0)break t;$--,tt+=d[_++]<<rt,rt+=8}if(h.flags=tt,(h.flags&255)!==Z_DEFLATED$3){s.msg="unknown compression method",h.mode=BAD$2;break}if(h.flags&57344){s.msg="unknown header flags set",h.mode=BAD$2;break}h.head&&(h.head.text=tt>>8&1),h.flags&512&&h.wrap&4&&(Lt[0]=tt&255,Lt[1]=tt>>>8&255,h.check=crc32_1$2(h.check,Lt,2,0)),tt=0,rt=0,h.mode=TIME$1;case TIME$1:for(;rt<32;){if($===0)break t;$--,tt+=d[_++]<<rt,rt+=8}h.head&&(h.head.time=tt),h.flags&512&&h.wrap&4&&(Lt[0]=tt&255,Lt[1]=tt>>>8&255,Lt[2]=tt>>>16&255,Lt[3]=tt>>>24&255,h.check=crc32_1$2(h.check,Lt,4,0)),tt=0,rt=0,h.mode=OS$1;case OS$1:for(;rt<16;){if($===0)break t;$--,tt+=d[_++]<<rt,rt+=8}h.head&&(h.head.xflags=tt&255,h.head.os=tt>>8),h.flags&512&&h.wrap&4&&(Lt[0]=tt&255,Lt[1]=tt>>>8&255,h.check=crc32_1$2(h.check,Lt,2,0)),tt=0,rt=0,h.mode=EXLEN$1;case EXLEN$1:if(h.flags&1024){for(;rt<16;){if($===0)break t;$--,tt+=d[_++]<<rt,rt+=8}h.length=tt,h.head&&(h.head.extra_len=tt),h.flags&512&&h.wrap&4&&(Lt[0]=tt&255,Lt[1]=tt>>>8&255,h.check=crc32_1$2(h.check,Lt,2,0)),tt=0,rt=0}else h.head&&(h.head.extra=null);h.mode=EXTRA$1;case EXTRA$1:if(h.flags&1024&&(at=h.length,at>$&&(at=$),at&&(h.head&&(bt=h.head.extra_len-h.length,h.head.extra||(h.head.extra=new Uint8Array(h.head.extra_len)),h.head.extra.set(d.subarray(_,_+at),bt)),h.flags&512&&h.wrap&4&&(h.check=crc32_1$2(h.check,d,at,_)),$-=at,_+=at,h.length-=at),h.length))break t;h.length=0,h.mode=NAME$1;case NAME$1:if(h.flags&2048){if($===0)break t;at=0;do bt=d[_+at++],h.head&&bt&&h.length<65536&&(h.head.name+=String.fromCharCode(bt));while(bt&&at<$);if(h.flags&512&&h.wrap&4&&(h.check=crc32_1$2(h.check,d,at,_)),$-=at,_+=at,bt)break t}else h.head&&(h.head.name=null);h.length=0,h.mode=COMMENT$1;case COMMENT$1:if(h.flags&4096){if($===0)break t;at=0;do bt=d[_+at++],h.head&&bt&&h.length<65536&&(h.head.comment+=String.fromCharCode(bt));while(bt&&at<$);if(h.flags&512&&h.wrap&4&&(h.check=crc32_1$2(h.check,d,at,_)),$-=at,_+=at,bt)break t}else h.head&&(h.head.comment=null);h.mode=HCRC$1;case HCRC$1:if(h.flags&512){for(;rt<16;){if($===0)break t;$--,tt+=d[_++]<<rt,rt+=8}if(h.wrap&4&&tt!==(h.check&65535)){s.msg="header crc mismatch",h.mode=BAD$2;break}tt=0,rt=0}h.head&&(h.head.hcrc=h.flags>>9&1,h.head.done=!0),s.adler=h.check=0,h.mode=TYPE$2;break;case DICTID$1:for(;rt<32;){if($===0)break t;$--,tt+=d[_++]<<rt,rt+=8}s.adler=h.check=zswap32$1(tt),tt=0,rt=0,h.mode=DICT$1;case DICT$1:if(h.havedict===0)return s.next_out=b,s.avail_out=et,s.next_in=_,s.avail_in=$,h.hold=tt,h.bits=rt,Z_NEED_DICT$1$1;s.adler=h.check=1,h.mode=TYPE$2;case TYPE$2:if(o===Z_BLOCK$2||o===Z_TREES$1)break t;case TYPEDO$1:if(h.last){tt>>>=rt&7,rt-=rt&7,h.mode=CHECK$1;break}for(;rt<3;){if($===0)break t;$--,tt+=d[_++]<<rt,rt+=8}switch(h.last=tt&1,tt>>>=1,rt-=1,tt&3){case 0:h.mode=STORED$1;break;case 1:if(fixedtables$1(h),h.mode=LEN_$1,o===Z_TREES$1){tt>>>=2,rt-=2;break t}break;case 2:h.mode=TABLE$1;break;case 3:s.msg="invalid block type",h.mode=BAD$2}tt>>>=2,rt-=2;break;case STORED$1:for(tt>>>=rt&7,rt-=rt&7;rt<32;){if($===0)break t;$--,tt+=d[_++]<<rt,rt+=8}if((tt&65535)!==(tt>>>16^65535)){s.msg="invalid stored block lengths",h.mode=BAD$2;break}if(h.length=tt&65535,tt=0,rt=0,h.mode=COPY_$1,o===Z_TREES$1)break t;case COPY_$1:h.mode=COPY$1;case COPY$1:if(at=h.length,at){if(at>$&&(at=$),at>et&&(at=et),at===0)break t;g.set(d.subarray(_,_+at),b),$-=at,_+=at,et-=at,b+=at,h.length-=at;break}h.mode=TYPE$2;break;case TABLE$1:for(;rt<14;){if($===0)break t;$--,tt+=d[_++]<<rt,rt+=8}if(h.nlen=(tt&31)+257,tt>>>=5,rt-=5,h.ndist=(tt&31)+1,tt>>>=5,rt-=5,h.ncode=(tt&15)+4,tt>>>=4,rt-=4,h.nlen>286||h.ndist>30){s.msg="too many length or distance symbols",h.mode=BAD$2;break}h.have=0,h.mode=LENLENS$1;case LENLENS$1:for(;h.have<h.ncode;){for(;rt<3;){if($===0)break t;$--,tt+=d[_++]<<rt,rt+=8}h.lens[jt[h.have++]]=tt&7,tt>>>=3,rt-=3}for(;h.have<19;)h.lens[jt[h.have++]]=0;if(h.lencode=h.lendyn,h.lenbits=7,Ht={bits:h.lenbits},kt=inftrees$2(CODES$2,h.lens,0,19,h.lencode,0,h.work,Ht),h.lenbits=Ht.bits,kt){s.msg="invalid code lengths set",h.mode=BAD$2;break}h.have=0,h.mode=CODELENS$1;case CODELENS$1:for(;h.have<h.nlen+h.ndist;){for(;_t=h.lencode[tt&(1<<h.lenbits)-1],ct=_t>>>24,pt=_t>>>16&255,dt=_t&65535,!(ct<=rt);){if($===0)break t;$--,tt+=d[_++]<<rt,rt+=8}if(dt<16)tt>>>=ct,rt-=ct,h.lens[h.have++]=dt;else{if(dt===16){for(Pt=ct+2;rt<Pt;){if($===0)break t;$--,tt+=d[_++]<<rt,rt+=8}if(tt>>>=ct,rt-=ct,h.have===0){s.msg="invalid bit length repeat",h.mode=BAD$2;break}bt=h.lens[h.have-1],at=3+(tt&3),tt>>>=2,rt-=2}else if(dt===17){for(Pt=ct+3;rt<Pt;){if($===0)break t;$--,tt+=d[_++]<<rt,rt+=8}tt>>>=ct,rt-=ct,bt=0,at=3+(tt&7),tt>>>=3,rt-=3}else{for(Pt=ct+7;rt<Pt;){if($===0)break t;$--,tt+=d[_++]<<rt,rt+=8}tt>>>=ct,rt-=ct,bt=0,at=11+(tt&127),tt>>>=7,rt-=7}if(h.have+at>h.nlen+h.ndist){s.msg="invalid bit length repeat",h.mode=BAD$2;break}for(;at--;)h.lens[h.have++]=bt}}if(h.mode===BAD$2)break;if(h.lens[256]===0){s.msg="invalid code -- missing end-of-block",h.mode=BAD$2;break}if(h.lenbits=9,Ht={bits:h.lenbits},kt=inftrees$2(LENS$2,h.lens,0,h.nlen,h.lencode,0,h.work,Ht),h.lenbits=Ht.bits,kt){s.msg="invalid literal/lengths set",h.mode=BAD$2;break}if(h.distbits=6,h.distcode=h.distdyn,Ht={bits:h.distbits},kt=inftrees$2(DISTS$2,h.lens,h.nlen,h.ndist,h.distcode,0,h.work,Ht),h.distbits=Ht.bits,kt){s.msg="invalid distances set",h.mode=BAD$2;break}if(h.mode=LEN_$1,o===Z_TREES$1)break t;case LEN_$1:h.mode=LEN$1;case LEN$1:if($>=6&&et>=258){s.next_out=b,s.avail_out=et,s.next_in=_,s.avail_in=$,h.hold=tt,h.bits=rt,inffast$2(s,At),b=s.next_out,g=s.output,et=s.avail_out,_=s.next_in,d=s.input,$=s.avail_in,tt=h.hold,rt=h.bits,h.mode===TYPE$2&&(h.back=-1);break}for(h.back=0;_t=h.lencode[tt&(1<<h.lenbits)-1],ct=_t>>>24,pt=_t>>>16&255,dt=_t&65535,!(ct<=rt);){if($===0)break t;$--,tt+=d[_++]<<rt,rt+=8}if(pt&&!(pt&240)){for(mt=ct,Qt=pt,xt=dt;_t=h.lencode[xt+((tt&(1<<mt+Qt)-1)>>mt)],ct=_t>>>24,pt=_t>>>16&255,dt=_t&65535,!(mt+ct<=rt);){if($===0)break t;$--,tt+=d[_++]<<rt,rt+=8}tt>>>=mt,rt-=mt,h.back+=mt}if(tt>>>=ct,rt-=ct,h.back+=ct,h.length=dt,pt===0){h.mode=LIT$1;break}if(pt&32){h.back=-1,h.mode=TYPE$2;break}if(pt&64){s.msg="invalid literal/length code",h.mode=BAD$2;break}h.extra=pt&15,h.mode=LENEXT$1;case LENEXT$1:if(h.extra){for(Pt=h.extra;rt<Pt;){if($===0)break t;$--,tt+=d[_++]<<rt,rt+=8}h.length+=tt&(1<<h.extra)-1,tt>>>=h.extra,rt-=h.extra,h.back+=h.extra}h.was=h.length,h.mode=DIST$1;case DIST$1:for(;_t=h.distcode[tt&(1<<h.distbits)-1],ct=_t>>>24,pt=_t>>>16&255,dt=_t&65535,!(ct<=rt);){if($===0)break t;$--,tt+=d[_++]<<rt,rt+=8}if(!(pt&240)){for(mt=ct,Qt=pt,xt=dt;_t=h.distcode[xt+((tt&(1<<mt+Qt)-1)>>mt)],ct=_t>>>24,pt=_t>>>16&255,dt=_t&65535,!(mt+ct<=rt);){if($===0)break t;$--,tt+=d[_++]<<rt,rt+=8}tt>>>=mt,rt-=mt,h.back+=mt}if(tt>>>=ct,rt-=ct,h.back+=ct,pt&64){s.msg="invalid distance code",h.mode=BAD$2;break}h.offset=dt,h.extra=pt&15,h.mode=DISTEXT$1;case DISTEXT$1:if(h.extra){for(Pt=h.extra;rt<Pt;){if($===0)break t;$--,tt+=d[_++]<<rt,rt+=8}h.offset+=tt&(1<<h.extra)-1,tt>>>=h.extra,rt-=h.extra,h.back+=h.extra}if(h.offset>h.dmax){s.msg="invalid distance too far back",h.mode=BAD$2;break}h.mode=MATCH$1;case MATCH$1:if(et===0)break t;if(at=At-et,h.offset>at){if(at=h.offset-at,at>h.whave&&h.sane){s.msg="invalid distance too far back",h.mode=BAD$2;break}at>h.wnext?(at-=h.wnext,lt=h.wsize-at):lt=h.wnext-at,at>h.length&&(at=h.length),gt=h.window}else gt=g,lt=b-h.offset,at=h.length;at>et&&(at=et),et-=at,h.length-=at;do g[b++]=gt[lt++];while(--at);h.length===0&&(h.mode=LEN$1);break;case LIT$1:if(et===0)break t;g[b++]=h.length,et--,h.mode=LEN$1;break;case CHECK$1:if(h.wrap){for(;rt<32;){if($===0)break t;$--,tt|=d[_++]<<rt,rt+=8}if(At-=et,s.total_out+=At,h.total+=At,h.wrap&4&&At&&(s.adler=h.check=h.flags?crc32_1$2(h.check,g,At,b-At):adler32_1$2(h.check,g,At,b-At)),At=et,h.wrap&4&&(h.flags?tt:zswap32$1(tt))!==h.check){s.msg="incorrect data check",h.mode=BAD$2;break}tt=0,rt=0}h.mode=LENGTH$1;case LENGTH$1:if(h.wrap&&h.flags){for(;rt<32;){if($===0)break t;$--,tt+=d[_++]<<rt,rt+=8}if(h.wrap&4&&tt!==(h.total&4294967295)){s.msg="incorrect length check",h.mode=BAD$2;break}tt=0,rt=0}h.mode=DONE$1;case DONE$1:kt=Z_STREAM_END$1$1;break t;case BAD$2:kt=Z_DATA_ERROR$1$1;break t;case MEM$1:return Z_MEM_ERROR$1$1;case SYNC$1:default:return Z_STREAM_ERROR$1$1}return s.next_out=b,s.avail_out=et,s.next_in=_,s.avail_in=$,h.hold=tt,h.bits=rt,(h.wsize||At!==s.avail_out&&h.mode<BAD$2&&(h.mode<CHECK$1||o!==Z_FINISH$1$1))&&updatewindow$1(s,s.output,s.next_out,At-s.avail_out),nt-=s.avail_in,At-=s.avail_out,s.total_in+=nt,s.total_out+=At,h.total+=At,h.wrap&4&&At&&(s.adler=h.check=h.flags?crc32_1$2(h.check,g,At,s.next_out-At):adler32_1$2(h.check,g,At,s.next_out-At)),s.data_type=h.bits+(h.last?64:0)+(h.mode===TYPE$2?128:0)+(h.mode===LEN_$1||h.mode===COPY_$1?256:0),(nt===0&&At===0||o===Z_FINISH$1$1)&&kt===Z_OK$1$1&&(kt=Z_BUF_ERROR$2),kt},inflateEnd$1=s=>{if(inflateStateCheck$1(s))return Z_STREAM_ERROR$1$1;let o=s.state;return o.window&&(o.window=null),s.state=null,Z_OK$1$1},inflateGetHeader$1=(s,o)=>{if(inflateStateCheck$1(s))return Z_STREAM_ERROR$1$1;const h=s.state;return h.wrap&2?(h.head=o,o.done=!1,Z_OK$1$1):Z_STREAM_ERROR$1$1},inflateSetDictionary$1=(s,o)=>{const h=o.length;let d,g,_;return inflateStateCheck$1(s)||(d=s.state,d.wrap!==0&&d.mode!==DICT$1)?Z_STREAM_ERROR$1$1:d.mode===DICT$1&&(g=1,g=adler32_1$2(g,o,h,0),g!==d.check)?Z_DATA_ERROR$1$1:(_=updatewindow$1(s,o,h,h),_?(d.mode=MEM$1,Z_MEM_ERROR$1$1):(d.havedict=1,Z_OK$1$1))};var inflateReset_1$1=inflateReset$1,inflateReset2_1$1=inflateReset2$1,inflateResetKeep_1$1=inflateResetKeep$1,inflateInit_1$1=inflateInit$1,inflateInit2_1$1=inflateInit2$1,inflate_2$1$1=inflate$2$1,inflateEnd_1$1=inflateEnd$1,inflateGetHeader_1$1=inflateGetHeader$1,inflateSetDictionary_1$1=inflateSetDictionary$1,inflateInfo$1="pako inflate (from Nodeca project)",inflate_1$2$1={inflateReset:inflateReset_1$1,inflateReset2:inflateReset2_1$1,inflateResetKeep:inflateResetKeep_1$1,inflateInit:inflateInit_1$1,inflateInit2:inflateInit2_1$1,inflate:inflate_2$1$1,inflateEnd:inflateEnd_1$1,inflateGetHeader:inflateGetHeader_1$1,inflateSetDictionary:inflateSetDictionary_1$1,inflateInfo:inflateInfo$1};function GZheader$1(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var gzheader$2=GZheader$1;const toString$2=Object.prototype.toString,{Z_NO_FLUSH:Z_NO_FLUSH$3,Z_FINISH:Z_FINISH$4,Z_OK:Z_OK$4,Z_STREAM_END:Z_STREAM_END$4,Z_NEED_DICT:Z_NEED_DICT$2,Z_STREAM_ERROR:Z_STREAM_ERROR$3,Z_DATA_ERROR:Z_DATA_ERROR$3,Z_MEM_ERROR:Z_MEM_ERROR$2}=constants$2$1;function Inflate$1$1(s){this.options=common$2.assign({chunkSize:1024*64,windowBits:15,to:""},s||{});const o=this.options;o.raw&&o.windowBits>=0&&o.windowBits<16&&(o.windowBits=-o.windowBits,o.windowBits===0&&(o.windowBits=-15)),o.windowBits>=0&&o.windowBits<16&&!(s&&s.windowBits)&&(o.windowBits+=32),o.windowBits>15&&o.windowBits<48&&!(o.windowBits&15)&&(o.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zstream$2,this.strm.avail_out=0;let h=inflate_1$2$1.inflateInit2(this.strm,o.windowBits);if(h!==Z_OK$4)throw new Error(messages$2[h]);if(this.header=new gzheader$2,inflate_1$2$1.inflateGetHeader(this.strm,this.header),o.dictionary&&(typeof o.dictionary=="string"?o.dictionary=strings$2.string2buf(o.dictionary):toString$2.call(o.dictionary)==="[object ArrayBuffer]"&&(o.dictionary=new Uint8Array(o.dictionary)),o.raw&&(h=inflate_1$2$1.inflateSetDictionary(this.strm,o.dictionary),h!==Z_OK$4)))throw new Error(messages$2[h])}Inflate$1$1.prototype.push=function(s,o){const h=this.strm,d=this.options.chunkSize,g=this.options.dictionary;let _,b,$;if(this.ended)return!1;for(o===~~o?b=o:b=o===!0?Z_FINISH$4:Z_NO_FLUSH$3,toString$2.call(s)==="[object ArrayBuffer]"?h.input=new Uint8Array(s):h.input=s,h.next_in=0,h.avail_in=h.input.length;;){for(h.avail_out===0&&(h.output=new Uint8Array(d),h.next_out=0,h.avail_out=d),_=inflate_1$2$1.inflate(h,b),_===Z_NEED_DICT$2&&g&&(_=inflate_1$2$1.inflateSetDictionary(h,g),_===Z_OK$4?_=inflate_1$2$1.inflate(h,b):_===Z_DATA_ERROR$3&&(_=Z_NEED_DICT$2));h.avail_in>0&&_===Z_STREAM_END$4&&h.state.wrap>0&&s[h.next_in]!==0;)inflate_1$2$1.inflateReset(h),_=inflate_1$2$1.inflate(h,b);switch(_){case Z_STREAM_ERROR$3:case Z_DATA_ERROR$3:case Z_NEED_DICT$2:case Z_MEM_ERROR$2:return this.onEnd(_),this.ended=!0,!1}if($=h.avail_out,h.next_out&&(h.avail_out===0||_===Z_STREAM_END$4))if(this.options.to==="string"){let et=strings$2.utf8border(h.output,h.next_out),tt=h.next_out-et,rt=strings$2.buf2string(h.output,et);h.next_out=tt,h.avail_out=d-tt,tt&&h.output.set(h.output.subarray(et,et+tt),0),this.onData(rt)}else this.onData(h.output.length===h.next_out?h.output:h.output.subarray(0,h.next_out));if(!(_===Z_OK$4&&$===0)){if(_===Z_STREAM_END$4)return _=inflate_1$2$1.inflateEnd(this.strm),this.onEnd(_),this.ended=!0,!0;if(h.avail_in===0)break}}return!0};Inflate$1$1.prototype.onData=function(s){this.chunks.push(s)};Inflate$1$1.prototype.onEnd=function(s){s===Z_OK$4&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=common$2.flattenChunks(this.chunks)),this.chunks=[],this.err=s,this.msg=this.strm.msg};function inflate$1$2(s,o){const h=new Inflate$1$1(o);if(h.push(s),h.err)throw h.msg||messages$2[h.err];return h.result}var Inflate_1$1=Inflate$1$1,inflate_2$2=inflate$1$2,inflate_1$1$1={Inflate:Inflate_1$1,inflate:inflate_2$2};const{deflate:deflate$3}=deflate_1$1,{Inflate,inflate:inflate$4}=inflate_1$1$1;var deflate_1=deflate$3,Inflate_1=Inflate,inflate_1$3=inflate$4;const crcTable$1=[];for(let s=0;s<256;s++){let o=s;for(let h=0;h<8;h++)o&1?o=3988292384^o>>>1:o=o>>>1;crcTable$1[s]=o}const initialCrc=4294967295;function updateCrc(s,o,h){let d=s;for(let g=0;g<h;g++)d=crcTable$1[(d^o[g])&255]^d>>>8;return d}function crc(s,o){return(updateCrc(initialCrc,s,o)^initialCrc)>>>0}function checkCrc(s,o,h){const d=s.readUint32(),g=crc(new Uint8Array(s.buffer,s.byteOffset+s.offset-o-4,o),o);if(g!==d)throw new Error(`CRC mismatch for chunk ${h}. Expected ${d}, found ${g}`)}function writeCrc(s,o){s.writeUint32(crc(new Uint8Array(s.buffer,s.byteOffset+s.offset-o,o),o))}function unfilterNone(s,o,h){for(let d=0;d<h;d++)o[d]=s[d]}function unfilterSub(s,o,h,d){let g=0;for(;g<d;g++)o[g]=s[g];for(;g<h;g++)o[g]=s[g]+o[g-d]&255}function unfilterUp(s,o,h,d){let g=0;if(h.length===0)for(;g<d;g++)o[g]=s[g];else for(;g<d;g++)o[g]=s[g]+h[g]&255}function unfilterAverage(s,o,h,d,g){let _=0;if(h.length===0){for(;_<g;_++)o[_]=s[_];for(;_<d;_++)o[_]=s[_]+(o[_-g]>>1)&255}else{for(;_<g;_++)o[_]=s[_]+(h[_]>>1)&255;for(;_<d;_++)o[_]=s[_]+(o[_-g]+h[_]>>1)&255}}function unfilterPaeth(s,o,h,d,g){let _=0;if(h.length===0){for(;_<g;_++)o[_]=s[_];for(;_<d;_++)o[_]=s[_]+o[_-g]&255}else{for(;_<g;_++)o[_]=s[_]+h[_]&255;for(;_<d;_++)o[_]=s[_]+paethPredictor(o[_-g],h[_],h[_-g])&255}}function paethPredictor(s,o,h){const d=s+o-h,g=Math.abs(d-s),_=Math.abs(d-o),b=Math.abs(d-h);return g<=_&&g<=b?s:_<=b?o:h}const uint16=new Uint16Array([255]),uint8=new Uint8Array(uint16.buffer),osIsLittleEndian=uint8[0]===255,empty=new Uint8Array(0);function decodeInterlaceNull(s){const{data:o,width:h,height:d,channels:g,depth:_}=s,b=g*_/8,$=h*b,et=new Uint8Array(d*$);let tt=empty,rt=0,nt,At;for(let at=0;at<d;at++){switch(nt=o.subarray(rt+1,rt+1+$),At=et.subarray(at*$,(at+1)*$),o[rt]){case 0:unfilterNone(nt,At,$);break;case 1:unfilterSub(nt,At,$,b);break;case 2:unfilterUp(nt,At,tt,$);break;case 3:unfilterAverage(nt,At,tt,$,b);break;case 4:unfilterPaeth(nt,At,tt,$,b);break;default:throw new Error(`Unsupported filter: ${o[rt]}`)}tt=At,rt+=$+1}if(_===16){const at=new Uint16Array(et.buffer);if(osIsLittleEndian)for(let lt=0;lt<at.length;lt++)at[lt]=swap16(at[lt]);return at}else return et}function swap16(s){return(s&255)<<8|s>>8&255}const pngSignature=Uint8Array.of(137,80,78,71,13,10,26,10);function writeSignature(s){s.writeBytes(pngSignature)}function checkSignature(s){if(!hasPngSignature(s.readBytes(pngSignature.length)))throw new Error("wrong PNG signature")}function hasPngSignature(s){if(s.length<pngSignature.length)return!1;for(let o=0;o<pngSignature.length;o++)if(s[o]!==pngSignature[o])return!1;return!0}const textChunkName="tEXt",NULL$1=0,latin1Decoder=new TextDecoder("latin1");function validateKeyword(s){if(validateLatin1(s),s.length===0||s.length>79)throw new Error("keyword length must be between 1 and 79")}const latin1Regex=/^[\u0000-\u00FF]*$/;function validateLatin1(s){if(!latin1Regex.test(s))throw new Error("invalid latin1 text")}function decodetEXt(s,o,h){const d=readKeyword(o);s[d]=readLatin1(o,h-d.length-1)}function encodetEXt(s,o,h){validateKeyword(o),validateLatin1(h);const d=o.length+1+h.length;s.writeUint32(d),s.writeChars(textChunkName),s.writeChars(o),s.writeByte(NULL$1),s.writeChars(h),writeCrc(s,d+4)}function readKeyword(s){for(s.mark();s.readByte()!==NULL$1;);const o=s.offset;s.reset();const h=latin1Decoder.decode(s.readBytes(o-s.offset-1));return s.skip(1),validateKeyword(h),h}function readLatin1(s,o){return latin1Decoder.decode(s.readBytes(o))}const ColorType={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},CompressionMethod={UNKNOWN:-1,DEFLATE:0},FilterMethod={UNKNOWN:-1,ADAPTIVE:0},InterlaceMethod={UNKNOWN:-1,NO_INTERLACE:0};class PngDecoder extends IOBuffer{constructor(o,h={}){super(o),$e(this,"_checkCrc"),$e(this,"_inflator"),$e(this,"_png"),$e(this,"_end"),$e(this,"_hasPalette"),$e(this,"_palette"),$e(this,"_hasTransparency"),$e(this,"_transparency"),$e(this,"_compressionMethod"),$e(this,"_filterMethod"),$e(this,"_interlaceMethod"),$e(this,"_colorType");const{checkCrc:d=!1}=h;this._checkCrc=d,this._inflator=new Inflate_1,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=CompressionMethod.UNKNOWN,this._filterMethod=FilterMethod.UNKNOWN,this._interlaceMethod=InterlaceMethod.UNKNOWN,this._colorType=ColorType.UNKNOWN,this.setBigEndian()}decode(){for(checkSignature(this);!this._end;)this.decodeChunk();return this.decodeImage(),this._png}decodeChunk(){const o=this.readUint32(),h=this.readChars(4),d=this.offset;switch(h){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(o);break;case"IDAT":this.decodeIDAT(o);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(o);break;case"iCCP":this.decodeiCCP(o);break;case textChunkName:decodetEXt(this._png.text,this,o);break;case"pHYs":this.decodepHYs();break;default:this.skip(o);break}if(this.offset-d!==o)throw new Error(`Length mismatch while decoding chunk ${h}`);this._checkCrc?checkCrc(this,o+4,h):this.skip(4)}decodeIHDR(){const o=this._png;o.width=this.readUint32(),o.height=this.readUint32(),o.depth=checkBitDepth(this.readUint8());const h=this.readUint8();this._colorType=h;let d;switch(h){case ColorType.GREYSCALE:d=1;break;case ColorType.TRUECOLOUR:d=3;break;case ColorType.INDEXED_COLOUR:d=1;break;case ColorType.GREYSCALE_ALPHA:d=2;break;case ColorType.TRUECOLOUR_ALPHA:d=4;break;case ColorType.UNKNOWN:default:throw new Error(`Unknown color type: ${h}`)}if(this._png.channels=d,this._compressionMethod=this.readUint8(),this._compressionMethod!==CompressionMethod.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodePLTE(o){if(o%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${o}`);const h=o/3;this._hasPalette=!0;const d=[];this._palette=d;for(let g=0;g<h;g++)d.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(o){this._inflator.push(new Uint8Array(this.buffer,this.offset+this.byteOffset,o)),this.skip(o)}decodetRNS(o){switch(this._colorType){case ColorType.GREYSCALE:case ColorType.TRUECOLOUR:{if(o%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${o}`);if(o/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${o/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(o/2);for(let h=0;h<o/2;h++)this._transparency[h]=this.readUint16();break}case ColorType.INDEXED_COLOUR:{if(o>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${o} vs ${this._palette.length})`);let h=0;for(;h<o;h++){const d=this.readByte();this._palette[h].push(d)}for(;h<this._palette.length;h++)this._palette[h].push(255);break}case ColorType.UNKNOWN:case ColorType.GREYSCALE_ALPHA:case ColorType.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(o){const h=readKeyword(this),d=this.readUint8();if(d!==CompressionMethod.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${d}`);const g=this.readBytes(o-h.length-2);this._png.iccEmbeddedProfile={name:h,profile:inflate_1$3(g)}}decodepHYs(){const o=this.readUint32(),h=this.readUint32(),d=this.readByte();this._png.resolution={x:o,y:h,unit:d}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const o=this._inflator.result;if(this._filterMethod!==FilterMethod.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===InterlaceMethod.NO_INTERLACE)this._png.data=decodeInterlaceNull({data:o,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}}function checkBitDepth(s){if(s!==1&&s!==2&&s!==4&&s!==8&&s!==16)throw new Error(`invalid bit depth: ${s}`);return s}const defaultZlibOptions={level:3};class PngEncoder extends IOBuffer{constructor(o,h={}){super(),$e(this,"_png"),$e(this,"_zlibOptions"),$e(this,"_colorType"),this._colorType=ColorType.UNKNOWN,this._zlibOptions={...defaultZlibOptions,...h.zlib},this._png=this._checkData(o),this.setBigEndian()}encode(){if(writeSignature(this),this.encodeIHDR(),this.encodeData(),this._png.text)for(const[o,h]of Object.entries(this._png.text))encodetEXt(this,o,h);return this.encodeIEND(),this.toArray()}encodeIHDR(){this.writeUint32(13),this.writeChars("IHDR"),this.writeUint32(this._png.width),this.writeUint32(this._png.height),this.writeByte(this._png.depth),this.writeByte(this._colorType),this.writeByte(CompressionMethod.DEFLATE),this.writeByte(FilterMethod.ADAPTIVE),this.writeByte(InterlaceMethod.NO_INTERLACE),writeCrc(this,17)}encodeIEND(){this.writeUint32(0),this.writeChars("IEND"),writeCrc(this,4)}encodeIDAT(o){this.writeUint32(o.length),this.writeChars("IDAT"),this.writeBytes(o),writeCrc(this,o.length+4)}encodeData(){const{width:o,height:h,channels:d,depth:g,data:_}=this._png,b=d*o,$=new IOBuffer().setBigEndian();let et=0;for(let nt=0;nt<h;nt++)if($.writeByte(0),g===8)et=writeDataBytes(_,$,b,et);else if(g===16)et=writeDataUint16(_,$,b,et);else throw new Error("unreachable");const tt=$.toArray(),rt=deflate_1(tt,this._zlibOptions);this.encodeIDAT(rt)}_checkData(o){const{colorType:h,channels:d,depth:g}=getColorType(o),_={width:checkInteger(o.width,"width"),height:checkInteger(o.height,"height"),channels:d,data:o.data,depth:g,text:o.text};this._colorType=h;const b=_.width*_.height*d;if(_.data.length!==b)throw new RangeError(`wrong data size. Found ${_.data.length}, expected ${b}`);return _}}function checkInteger(s,o){if(Number.isInteger(s)&&s>0)return s;throw new TypeError(`${o} must be a positive integer`)}function getColorType(s){const{channels:o=4,depth:h=8}=s;if(o!==4&&o!==3&&o!==2&&o!==1)throw new RangeError(`unsupported number of channels: ${o}`);if(h!==8&&h!==16)throw new RangeError(`unsupported bit depth: ${h}`);const d={channels:o,depth:h,colorType:ColorType.UNKNOWN};switch(o){case 4:d.colorType=ColorType.TRUECOLOUR_ALPHA;break;case 3:d.colorType=ColorType.TRUECOLOUR;break;case 1:d.colorType=ColorType.GREYSCALE;break;case 2:d.colorType=ColorType.GREYSCALE_ALPHA;break;default:throw new Error("unsupported number of channels")}return d}function writeDataBytes(s,o,h,d){for(let g=0;g<h;g++)o.writeByte(s[d++]);return d}function writeDataUint16(s,o,h,d){for(let g=0;g<h;g++)o.writeUint16(s[d++]);return d}var ResolutionUnitSpecifier;(function(s){s[s.UNKNOWN=0]="UNKNOWN",s[s.METRE=1]="METRE"})(ResolutionUnitSpecifier||(ResolutionUnitSpecifier={}));function decodePng(s,o){return new PngDecoder(s,o).decode()}function encodePng$1(s,o){return new PngEncoder(s,o).encode()}var encoder={exports:{}},hasRequiredEncoder;function requireEncoder(){return hasRequiredEncoder||(hasRequiredEncoder=1,function(s){function o(d){var g=Math.floor,_=new Array(64),b=new Array(64),$=new Array(64),et=new Array(64),tt,rt,nt,At,at=new Array(65535),lt=new Array(65535),gt=new Array(64),_t=new Array(64),ct=[],pt=0,dt=7,mt=new Array(64),Qt=new Array(64),xt=new Array(64),bt=new Array(256),kt=new Array(2048),Lt,Ht=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],Pt=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],jt=[0,1,2,3,4,5,6,7,8,9,10,11],Vt=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],Xt=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],nr=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Ar=[0,1,2,3,4,5,6,7,8,9,10,11],ar=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Wt=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function pr(Cr){for(var tn=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],An=0;An<64;An++){var Jr=g((tn[An]*Cr+50)/100);Jr<1?Jr=1:Jr>255&&(Jr=255),_[Ht[An]]=Jr}for(var Dr=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],on=0;on<64;on++){var qr=g((Dr[on]*Cr+50)/100);qr<1?qr=1:qr>255&&(qr=255),b[Ht[on]]=qr}for(var Yr=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Wr=0,rn=0;rn<8;rn++)for(var Nr=0;Nr<8;Nr++)$[Wr]=1/(_[Ht[Wr]]*Yr[rn]*Yr[Nr]*8),et[Wr]=1/(b[Ht[Wr]]*Yr[rn]*Yr[Nr]*8),Wr++}function dr(Cr,tn){for(var An=0,Jr=0,Dr=new Array,on=1;on<=16;on++){for(var qr=1;qr<=Cr[on];qr++)Dr[tn[Jr]]=[],Dr[tn[Jr]][0]=An,Dr[tn[Jr]][1]=on,Jr++,An++;An*=2}return Dr}function yr(){tt=dr(Pt,jt),rt=dr(nr,Ar),nt=dr(Vt,Xt),At=dr(ar,Wt)}function Br(){for(var Cr=1,tn=2,An=1;An<=15;An++){for(var Jr=Cr;Jr<tn;Jr++)lt[32767+Jr]=An,at[32767+Jr]=[],at[32767+Jr][1]=An,at[32767+Jr][0]=Jr;for(var Dr=-(tn-1);Dr<=-Cr;Dr++)lt[32767+Dr]=An,at[32767+Dr]=[],at[32767+Dr][1]=An,at[32767+Dr][0]=tn-1+Dr;Cr<<=1,tn<<=1}}function Lr(){for(var Cr=0;Cr<256;Cr++)kt[Cr]=19595*Cr,kt[Cr+256>>0]=38470*Cr,kt[Cr+512>>0]=7471*Cr+32768,kt[Cr+768>>0]=-11059*Cr,kt[Cr+1024>>0]=-21709*Cr,kt[Cr+1280>>0]=32768*Cr+8421375,kt[Cr+1536>>0]=-27439*Cr,kt[Cr+1792>>0]=-5329*Cr}function Ur(Cr){for(var tn=Cr[0],An=Cr[1]-1;An>=0;)tn&1<<An&&(pt|=1<<dt),An--,dt--,dt<0&&(pt==255?(or(255),or(0)):or(pt),dt=7,pt=0)}function or(Cr){ct.push(Cr)}function mr(Cr){or(Cr>>8&255),or(Cr&255)}function Ir(Cr,tn){var An,Jr,Dr,on,qr,Yr,Wr,rn,Nr=0,en,Ft=8,sr=64;for(en=0;en<Ft;++en){An=Cr[Nr],Jr=Cr[Nr+1],Dr=Cr[Nr+2],on=Cr[Nr+3],qr=Cr[Nr+4],Yr=Cr[Nr+5],Wr=Cr[Nr+6],rn=Cr[Nr+7];var hr=An+rn,br=An-rn,Gt=Jr+Wr,ir=Jr-Wr,yt=Dr+Yr,gr=Dr-Yr,Hr=on+qr,ut=on-qr,tr=hr+Hr,rr=hr-Hr,Ct=Gt+yt,Nt=Gt-yt;Cr[Nr]=tr+Ct,Cr[Nr+4]=tr-Ct;var Jt=(Nt+rr)*.707106781;Cr[Nr+2]=rr+Jt,Cr[Nr+6]=rr-Jt,tr=ut+gr,Ct=gr+ir,Nt=ir+br;var Rr=(tr-Nt)*.382683433,wt=.5411961*tr+Rr,ot=1.306562965*Nt+Rr,st=Ct*.707106781,ht=br+st,vt=br-st;Cr[Nr+5]=vt+wt,Cr[Nr+3]=vt-wt,Cr[Nr+1]=ht+ot,Cr[Nr+7]=ht-ot,Nr+=8}for(Nr=0,en=0;en<Ft;++en){An=Cr[Nr],Jr=Cr[Nr+8],Dr=Cr[Nr+16],on=Cr[Nr+24],qr=Cr[Nr+32],Yr=Cr[Nr+40],Wr=Cr[Nr+48],rn=Cr[Nr+56];var Ut=An+rn,Ot=An-rn,zt=Jr+Wr,Kt=Jr-Wr,_e=Dr+Yr,_r=Dr-Yr,er=on+qr,Er=on-qr,Fr=Ut+er,vr=Ut-er,xr=zt+_e,Zr=zt-_e;Cr[Nr]=Fr+xr,Cr[Nr+32]=Fr-xr;var fr=(Zr+vr)*.707106781;Cr[Nr+16]=vr+fr,Cr[Nr+48]=vr-fr,Fr=Er+_r,xr=_r+Kt,Zr=Kt+Ot;var Gr=(Fr-Zr)*.382683433,an=.5411961*Fr+Gr,fn=1.306562965*Zr+Gr,dn=xr*.707106781,xn=Ot+dn,un=Ot-dn;Cr[Nr+40]=un+an,Cr[Nr+24]=un-an,Cr[Nr+8]=xn+fn,Cr[Nr+56]=xn-fn,Nr++}var hn;for(en=0;en<sr;++en)hn=Cr[en]*tn[en],gt[en]=hn>0?hn+.5|0:hn-.5|0;return gt}function ur(){mr(65504),mr(16),or(74),or(70),or(73),or(70),or(0),or(1),or(1),or(0),mr(1),mr(1),or(0),or(0)}function lr(Cr){if(Cr){mr(65505),Cr[0]===69&&Cr[1]===120&&Cr[2]===105&&Cr[3]===102?mr(Cr.length+2):(mr(Cr.length+5+2),or(69),or(120),or(105),or(102),or(0));for(var tn=0;tn<Cr.length;tn++)or(Cr[tn])}}function Xr(Cr,tn){mr(65472),mr(17),or(8),mr(tn),mr(Cr),or(3),or(1),or(17),or(0),or(2),or(17),or(1),or(3),or(17),or(1)}function zr(){mr(65499),mr(132),or(0);for(var Cr=0;Cr<64;Cr++)or(_[Cr]);or(1);for(var tn=0;tn<64;tn++)or(b[tn])}function kr(){mr(65476),mr(418),or(0);for(var Cr=0;Cr<16;Cr++)or(Pt[Cr+1]);for(var tn=0;tn<=11;tn++)or(jt[tn]);or(16);for(var An=0;An<16;An++)or(Vt[An+1]);for(var Jr=0;Jr<=161;Jr++)or(Xt[Jr]);or(1);for(var Dr=0;Dr<16;Dr++)or(nr[Dr+1]);for(var on=0;on<=11;on++)or(Ar[on]);or(17);for(var qr=0;qr<16;qr++)or(ar[qr+1]);for(var Yr=0;Yr<=161;Yr++)or(Wt[Yr])}function Tr(Cr){typeof Cr>"u"||Cr.constructor!==Array||Cr.forEach(tn=>{if(typeof tn=="string"){mr(65534);var An=tn.length;mr(An+2);var Jr;for(Jr=0;Jr<An;Jr++)or(tn.charCodeAt(Jr))}})}function Mr(){mr(65498),mr(12),or(3),or(1),or(0),or(2),or(17),or(3),or(17),or(0),or(63),or(0)}function nn(Cr,tn,An,Jr,Dr){for(var on=Dr[0],qr=Dr[240],Yr,Wr=16,rn=63,Nr=64,en=Ir(Cr,tn),Ft=0;Ft<Nr;++Ft)_t[Ht[Ft]]=en[Ft];var sr=_t[0]-An;An=_t[0],sr==0?Ur(Jr[0]):(Yr=32767+sr,Ur(Jr[lt[Yr]]),Ur(at[Yr]));for(var hr=63;hr>0&&_t[hr]==0;hr--);if(hr==0)return Ur(on),An;for(var br=1,Gt;br<=hr;){for(var ir=br;_t[br]==0&&br<=hr;++br);var yt=br-ir;if(yt>=Wr){Gt=yt>>4;for(var gr=1;gr<=Gt;++gr)Ur(qr);yt=yt&15}Yr=32767+_t[br],Ur(Dr[(yt<<4)+lt[Yr]]),Ur(at[Yr]),br++}return hr!=rn&&Ur(on),An}function jr(){for(var Cr=String.fromCharCode,tn=0;tn<256;tn++)bt[tn]=Cr(tn)}this.encode=function(Cr,tn){new Date().getTime(),tn&&Pr(tn),ct=new Array,pt=0,dt=7,mr(65496),ur(),Tr(Cr.comments),lr(Cr.exifBuffer),zr(),Xr(Cr.width,Cr.height),kr(),Mr();var An=0,Jr=0,Dr=0;pt=0,dt=7,this.encode.displayName="_encode_";for(var on=Cr.data,qr=Cr.width,Yr=Cr.height,Wr=qr*4,rn,Nr=0,en,Ft,sr,hr,br,Gt,ir,yt;Nr<Yr;){for(rn=0;rn<Wr;){for(hr=Wr*Nr+rn,br=hr,Gt=-1,ir=0,yt=0;yt<64;yt++)ir=yt>>3,Gt=(yt&7)*4,br=hr+ir*Wr+Gt,Nr+ir>=Yr&&(br-=Wr*(Nr+1+ir-Yr)),rn+Gt>=Wr&&(br-=rn+Gt-Wr+4),en=on[br++],Ft=on[br++],sr=on[br++],mt[yt]=(kt[en]+kt[Ft+256>>0]+kt[sr+512>>0]>>16)-128,Qt[yt]=(kt[en+768>>0]+kt[Ft+1024>>0]+kt[sr+1280>>0]>>16)-128,xt[yt]=(kt[en+1280>>0]+kt[Ft+1536>>0]+kt[sr+1792>>0]>>16)-128;An=nn(mt,$,An,tt,nt),Jr=nn(Qt,et,Jr,rt,At),Dr=nn(xt,et,Dr,rt,At),rn+=32}Nr+=8}if(dt>=0){var gr=[];gr[1]=dt+1,gr[0]=(1<<dt+1)-1,Ur(gr)}return mr(65497),Buffer.from(ct)};function Pr(Cr){if(Cr<=0&&(Cr=1),Cr>100&&(Cr=100),Lt!=Cr){var tn=0;Cr<50?tn=Math.floor(5e3/Cr):tn=Math.floor(200-Cr*2),pr(tn),Lt=Cr}}function $r(){var Cr=new Date().getTime();d||(d=50),jr(),yr(),Br(),Lr(),Pr(d),new Date().getTime()-Cr}$r()}s.exports=h;function h(d,g){typeof g>"u"&&(g=50);var _=new o(g),b=_.encode(d,g);return{data:b,width:d.width,height:d.height}}}(encoder)),encoder.exports}var decoder={exports:{}},hasRequiredDecoder;function requireDecoder(){return hasRequiredDecoder||(hasRequiredDecoder=1,function(s){var o=function(){var d=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),g=4017,_=799,b=3406,$=2276,et=1567,tt=3784,rt=5793,nt=2896;function At(){}function at(mt,Qt){for(var xt=0,bt=[],kt,Lt,Ht=16;Ht>0&&!mt[Ht-1];)Ht--;bt.push({children:[],index:0});var Pt=bt[0],jt;for(kt=0;kt<Ht;kt++){for(Lt=0;Lt<mt[kt];Lt++){for(Pt=bt.pop(),Pt.children[Pt.index]=Qt[xt];Pt.index>0;){if(bt.length===0)throw new Error("Could not recreate Huffman Table");Pt=bt.pop()}for(Pt.index++,bt.push(Pt);bt.length<=kt;)bt.push(jt={children:[],index:0}),Pt.children[Pt.index]=jt.children,Pt=jt;xt++}kt+1<Ht&&(bt.push(jt={children:[],index:0}),Pt.children[Pt.index]=jt.children,Pt=jt)}return bt[0].children}function lt(mt,Qt,xt,bt,kt,Lt,Ht,Pt,jt,Vt){xt.precision,xt.samplesPerLine,xt.scanLines;var Xt=xt.mcusPerLine,nr=xt.progressive;xt.maxH,xt.maxV;var Ar=Qt,ar=0,Wt=0;function pr(){if(Wt>0)return Wt--,ar>>Wt&1;if(ar=mt[Qt++],ar==255){var qr=mt[Qt++];if(qr)throw new Error("unexpected marker: "+(ar<<8|qr).toString(16))}return Wt=7,ar>>>7}function dr(qr){for(var Yr=qr,Wr;(Wr=pr())!==null;){if(Yr=Yr[Wr],typeof Yr=="number")return Yr;if(typeof Yr!="object")throw new Error("invalid huffman sequence")}return null}function yr(qr){for(var Yr=0;qr>0;){var Wr=pr();if(Wr===null)return;Yr=Yr<<1|Wr,qr--}return Yr}function Br(qr){var Yr=yr(qr);return Yr>=1<<qr-1?Yr:Yr+(-1<<qr)+1}function Lr(qr,Yr){var Wr=dr(qr.huffmanTableDC),rn=Wr===0?0:Br(Wr);Yr[0]=qr.pred+=rn;for(var Nr=1;Nr<64;){var en=dr(qr.huffmanTableAC),Ft=en&15,sr=en>>4;if(Ft===0){if(sr<15)break;Nr+=16;continue}Nr+=sr;var hr=d[Nr];Yr[hr]=Br(Ft),Nr++}}function Ur(qr,Yr){var Wr=dr(qr.huffmanTableDC),rn=Wr===0?0:Br(Wr)<<jt;Yr[0]=qr.pred+=rn}function or(qr,Yr){Yr[0]|=pr()<<jt}var mr=0;function Ir(qr,Yr){if(mr>0){mr--;return}for(var Wr=Lt,rn=Ht;Wr<=rn;){var Nr=dr(qr.huffmanTableAC),en=Nr&15,Ft=Nr>>4;if(en===0){if(Ft<15){mr=yr(Ft)+(1<<Ft)-1;break}Wr+=16;continue}Wr+=Ft;var sr=d[Wr];Yr[sr]=Br(en)*(1<<jt),Wr++}}var ur=0,lr;function Xr(qr,Yr){for(var Wr=Lt,rn=Ht,Nr=0;Wr<=rn;){var en=d[Wr],Ft=Yr[en]<0?-1:1;switch(ur){case 0:var sr=dr(qr.huffmanTableAC),hr=sr&15,Nr=sr>>4;if(hr===0)Nr<15?(mr=yr(Nr)+(1<<Nr),ur=4):(Nr=16,ur=1);else{if(hr!==1)throw new Error("invalid ACn encoding");lr=Br(hr),ur=Nr?2:3}continue;case 1:case 2:Yr[en]?Yr[en]+=(pr()<<jt)*Ft:(Nr--,Nr===0&&(ur=ur==2?3:0));break;case 3:Yr[en]?Yr[en]+=(pr()<<jt)*Ft:(Yr[en]=lr<<jt,ur=0);break;case 4:Yr[en]&&(Yr[en]+=(pr()<<jt)*Ft);break}Wr++}ur===4&&(mr--,mr===0&&(ur=0))}function zr(qr,Yr,Wr,rn,Nr){var en=Wr/Xt|0,Ft=Wr%Xt,sr=en*qr.v+rn,hr=Ft*qr.h+Nr;qr.blocks[sr]===void 0&&Vt.tolerantDecoding||Yr(qr,qr.blocks[sr][hr])}function kr(qr,Yr,Wr){var rn=Wr/qr.blocksPerLine|0,Nr=Wr%qr.blocksPerLine;qr.blocks[rn]===void 0&&Vt.tolerantDecoding||Yr(qr,qr.blocks[rn][Nr])}var Tr=bt.length,Mr,nn,jr,Pr,$r,Cr;nr?Lt===0?Cr=Pt===0?Ur:or:Cr=Pt===0?Ir:Xr:Cr=Lr;var tn=0,An,Jr;Tr==1?Jr=bt[0].blocksPerLine*bt[0].blocksPerColumn:Jr=Xt*xt.mcusPerColumn,kt||(kt=Jr);for(var Dr,on;tn<Jr;){for(nn=0;nn<Tr;nn++)bt[nn].pred=0;if(mr=0,Tr==1)for(Mr=bt[0],$r=0;$r<kt;$r++)kr(Mr,Cr,tn),tn++;else for($r=0;$r<kt;$r++){for(nn=0;nn<Tr;nn++)for(Mr=bt[nn],Dr=Mr.h,on=Mr.v,jr=0;jr<on;jr++)for(Pr=0;Pr<Dr;Pr++)zr(Mr,Cr,tn,jr,Pr);if(tn++,tn===Jr)break}if(tn===Jr)do{if(mt[Qt]===255&&mt[Qt+1]!==0)break;Qt+=1}while(Qt<mt.length-2);if(Wt=0,An=mt[Qt]<<8|mt[Qt+1],An<65280)throw new Error("marker was not found");if(An>=65488&&An<=65495)Qt+=2;else break}return Qt-Ar}function gt(mt,Qt){var xt=[],bt=Qt.blocksPerLine,kt=Qt.blocksPerColumn,Lt=bt<<3,Ht=new Int32Array(64),Pt=new Uint8Array(64);function jt(yr,Br,Lr){var Ur=Qt.quantizationTable,or,mr,Ir,ur,lr,Xr,zr,kr,Tr,Mr=Lr,nn;for(nn=0;nn<64;nn++)Mr[nn]=yr[nn]*Ur[nn];for(nn=0;nn<8;++nn){var jr=8*nn;if(Mr[1+jr]==0&&Mr[2+jr]==0&&Mr[3+jr]==0&&Mr[4+jr]==0&&Mr[5+jr]==0&&Mr[6+jr]==0&&Mr[7+jr]==0){Tr=rt*Mr[0+jr]+512>>10,Mr[0+jr]=Tr,Mr[1+jr]=Tr,Mr[2+jr]=Tr,Mr[3+jr]=Tr,Mr[4+jr]=Tr,Mr[5+jr]=Tr,Mr[6+jr]=Tr,Mr[7+jr]=Tr;continue}or=rt*Mr[0+jr]+128>>8,mr=rt*Mr[4+jr]+128>>8,Ir=Mr[2+jr],ur=Mr[6+jr],lr=nt*(Mr[1+jr]-Mr[7+jr])+128>>8,kr=nt*(Mr[1+jr]+Mr[7+jr])+128>>8,Xr=Mr[3+jr]<<4,zr=Mr[5+jr]<<4,Tr=or-mr+1>>1,or=or+mr+1>>1,mr=Tr,Tr=Ir*tt+ur*et+128>>8,Ir=Ir*et-ur*tt+128>>8,ur=Tr,Tr=lr-zr+1>>1,lr=lr+zr+1>>1,zr=Tr,Tr=kr+Xr+1>>1,Xr=kr-Xr+1>>1,kr=Tr,Tr=or-ur+1>>1,or=or+ur+1>>1,ur=Tr,Tr=mr-Ir+1>>1,mr=mr+Ir+1>>1,Ir=Tr,Tr=lr*$+kr*b+2048>>12,lr=lr*b-kr*$+2048>>12,kr=Tr,Tr=Xr*_+zr*g+2048>>12,Xr=Xr*g-zr*_+2048>>12,zr=Tr,Mr[0+jr]=or+kr,Mr[7+jr]=or-kr,Mr[1+jr]=mr+zr,Mr[6+jr]=mr-zr,Mr[2+jr]=Ir+Xr,Mr[5+jr]=Ir-Xr,Mr[3+jr]=ur+lr,Mr[4+jr]=ur-lr}for(nn=0;nn<8;++nn){var Pr=nn;if(Mr[8+Pr]==0&&Mr[16+Pr]==0&&Mr[24+Pr]==0&&Mr[32+Pr]==0&&Mr[40+Pr]==0&&Mr[48+Pr]==0&&Mr[56+Pr]==0){Tr=rt*Lr[nn+0]+8192>>14,Mr[0+Pr]=Tr,Mr[8+Pr]=Tr,Mr[16+Pr]=Tr,Mr[24+Pr]=Tr,Mr[32+Pr]=Tr,Mr[40+Pr]=Tr,Mr[48+Pr]=Tr,Mr[56+Pr]=Tr;continue}or=rt*Mr[0+Pr]+2048>>12,mr=rt*Mr[32+Pr]+2048>>12,Ir=Mr[16+Pr],ur=Mr[48+Pr],lr=nt*(Mr[8+Pr]-Mr[56+Pr])+2048>>12,kr=nt*(Mr[8+Pr]+Mr[56+Pr])+2048>>12,Xr=Mr[24+Pr],zr=Mr[40+Pr],Tr=or-mr+1>>1,or=or+mr+1>>1,mr=Tr,Tr=Ir*tt+ur*et+2048>>12,Ir=Ir*et-ur*tt+2048>>12,ur=Tr,Tr=lr-zr+1>>1,lr=lr+zr+1>>1,zr=Tr,Tr=kr+Xr+1>>1,Xr=kr-Xr+1>>1,kr=Tr,Tr=or-ur+1>>1,or=or+ur+1>>1,ur=Tr,Tr=mr-Ir+1>>1,mr=mr+Ir+1>>1,Ir=Tr,Tr=lr*$+kr*b+2048>>12,lr=lr*b-kr*$+2048>>12,kr=Tr,Tr=Xr*_+zr*g+2048>>12,Xr=Xr*g-zr*_+2048>>12,zr=Tr,Mr[0+Pr]=or+kr,Mr[56+Pr]=or-kr,Mr[8+Pr]=mr+zr,Mr[48+Pr]=mr-zr,Mr[16+Pr]=Ir+Xr,Mr[40+Pr]=Ir-Xr,Mr[24+Pr]=ur+lr,Mr[32+Pr]=ur-lr}for(nn=0;nn<64;++nn){var $r=128+(Mr[nn]+8>>4);Br[nn]=$r<0?0:$r>255?255:$r}}dt(Lt*kt*8);for(var Vt,Xt,nr=0;nr<kt;nr++){var Ar=nr<<3;for(Vt=0;Vt<8;Vt++)xt.push(new Uint8Array(Lt));for(var ar=0;ar<bt;ar++){jt(Qt.blocks[nr][ar],Pt,Ht);var Wt=0,pr=ar<<3;for(Xt=0;Xt<8;Xt++){var dr=xt[Ar+Xt];for(Vt=0;Vt<8;Vt++)dr[pr+Vt]=Pt[Wt++]}}}return xt}function _t(mt){return mt<0?0:mt>255?255:mt}At.prototype={load:function(mt){var Qt=new XMLHttpRequest;Qt.open("GET",mt,!0),Qt.responseType="arraybuffer",Qt.onload=(function(){var xt=new Uint8Array(Qt.response||Qt.mozResponseArrayBuffer);this.parse(xt),this.onload&&this.onload()}).bind(this),Qt.send(null)},parse:function(mt){var Qt=this.opts.maxResolutionInMP*1e3*1e3,xt=0;mt.length;function bt(){var en=mt[xt]<<8|mt[xt+1];return xt+=2,en}function kt(){var en=bt(),Ft=mt.subarray(xt,xt+en-2);return xt+=Ft.length,Ft}function Lt(en){var Ft=1,sr=1,hr,br;for(br in en.components)en.components.hasOwnProperty(br)&&(hr=en.components[br],Ft<hr.h&&(Ft=hr.h),sr<hr.v&&(sr=hr.v));var Gt=Math.ceil(en.samplesPerLine/8/Ft),ir=Math.ceil(en.scanLines/8/sr);for(br in en.components)if(en.components.hasOwnProperty(br)){hr=en.components[br];var yt=Math.ceil(Math.ceil(en.samplesPerLine/8)*hr.h/Ft),gr=Math.ceil(Math.ceil(en.scanLines/8)*hr.v/sr),Hr=Gt*hr.h,ut=ir*hr.v,tr=ut*Hr,rr=[];dt(tr*256);for(var Ct=0;Ct<ut;Ct++){for(var Nt=[],Jt=0;Jt<Hr;Jt++)Nt.push(new Int32Array(64));rr.push(Nt)}hr.blocksPerLine=yt,hr.blocksPerColumn=gr,hr.blocks=rr}en.maxH=Ft,en.maxV=sr,en.mcusPerLine=Gt,en.mcusPerColumn=ir}var Ht=null,Pt=null,jt,Vt,Xt=[],nr=[],Ar=[],ar=[],Wt=bt(),pr=-1;if(this.comments=[],Wt!=65496)throw new Error("SOI not found");for(Wt=bt();Wt!=65497;){var dr,yr;switch(Wt){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var Br=kt();if(Wt===65534){var Lr=String.fromCharCode.apply(null,Br);this.comments.push(Lr)}Wt===65504&&Br[0]===74&&Br[1]===70&&Br[2]===73&&Br[3]===70&&Br[4]===0&&(Ht={version:{major:Br[5],minor:Br[6]},densityUnits:Br[7],xDensity:Br[8]<<8|Br[9],yDensity:Br[10]<<8|Br[11],thumbWidth:Br[12],thumbHeight:Br[13],thumbData:Br.subarray(14,14+3*Br[12]*Br[13])}),Wt===65505&&Br[0]===69&&Br[1]===120&&Br[2]===105&&Br[3]===102&&Br[4]===0&&(this.exifBuffer=Br.subarray(5,Br.length)),Wt===65518&&Br[0]===65&&Br[1]===100&&Br[2]===111&&Br[3]===98&&Br[4]===101&&Br[5]===0&&(Pt={version:Br[6],flags0:Br[7]<<8|Br[8],flags1:Br[9]<<8|Br[10],transformCode:Br[11]});break;case 65499:for(var Ur=bt(),or=Ur+xt-2;xt<or;){var mr=mt[xt++];dt(256);var Ir=new Int32Array(64);if(mr>>4)if(mr>>4===1)for(yr=0;yr<64;yr++){var ur=d[yr];Ir[ur]=bt()}else throw new Error("DQT: invalid table spec");else for(yr=0;yr<64;yr++){var ur=d[yr];Ir[ur]=mt[xt++]}Xt[mr&15]=Ir}break;case 65472:case 65473:case 65474:bt(),jt={},jt.extended=Wt===65473,jt.progressive=Wt===65474,jt.precision=mt[xt++],jt.scanLines=bt(),jt.samplesPerLine=bt(),jt.components={},jt.componentsOrder=[];var lr=jt.scanLines*jt.samplesPerLine;if(lr>Qt){var Xr=Math.ceil((lr-Qt)/1e6);throw new Error(`maxResolutionInMP limit exceeded by ${Xr}MP`)}var zr=mt[xt++],kr;for(dr=0;dr<zr;dr++){kr=mt[xt];var Tr=mt[xt+1]>>4,Mr=mt[xt+1]&15,nn=mt[xt+2];if(Tr<=0||Mr<=0)throw new Error("Invalid sampling factor, expected values above 0");jt.componentsOrder.push(kr),jt.components[kr]={h:Tr,v:Mr,quantizationIdx:nn},xt+=3}Lt(jt),nr.push(jt);break;case 65476:var jr=bt();for(dr=2;dr<jr;){var Pr=mt[xt++],$r=new Uint8Array(16),Cr=0;for(yr=0;yr<16;yr++,xt++)Cr+=$r[yr]=mt[xt];dt(16+Cr);var tn=new Uint8Array(Cr);for(yr=0;yr<Cr;yr++,xt++)tn[yr]=mt[xt];dr+=17+Cr,(Pr>>4?Ar:ar)[Pr&15]=at($r,tn)}break;case 65501:bt(),Vt=bt();break;case 65500:bt(),bt();break;case 65498:bt();var An=mt[xt++],Jr=[],Dr;for(dr=0;dr<An;dr++){Dr=jt.components[mt[xt++]];var on=mt[xt++];Dr.huffmanTableDC=ar[on>>4],Dr.huffmanTableAC=Ar[on&15],Jr.push(Dr)}var qr=mt[xt++],Yr=mt[xt++],Wr=mt[xt++],rn=lt(mt,xt,jt,Jr,Vt,qr,Yr,Wr>>4,Wr&15,this.opts);xt+=rn;break;case 65535:mt[xt]!==255&&xt--;break;default:if(mt[xt-3]==255&&mt[xt-2]>=192&&mt[xt-2]<=254){xt-=3;break}else if(Wt===224||Wt==225){if(pr!==-1)throw new Error(`first unknown JPEG marker at offset ${pr.toString(16)}, second unknown JPEG marker ${Wt.toString(16)} at offset ${(xt-1).toString(16)}`);pr=xt-1;const en=bt();if(mt[xt+en-2]===255){xt+=en-2;break}}throw new Error("unknown JPEG marker "+Wt.toString(16))}Wt=bt()}if(nr.length!=1)throw new Error("only single frame JPEGs supported");for(var dr=0;dr<nr.length;dr++){var Nr=nr[dr].components;for(var yr in Nr)Nr[yr].quantizationTable=Xt[Nr[yr].quantizationIdx],delete Nr[yr].quantizationIdx}this.width=jt.samplesPerLine,this.height=jt.scanLines,this.jfif=Ht,this.adobe=Pt,this.components=[];for(var dr=0;dr<jt.componentsOrder.length;dr++){var Dr=jt.components[jt.componentsOrder[dr]];this.components.push({lines:gt(jt,Dr),scaleX:Dr.h/jt.maxH,scaleY:Dr.v/jt.maxV})}},getData:function(mt,Qt){var xt=this.width/mt,bt=this.height/Qt,kt,Lt,Ht,Pt,jt,Vt,Xt,nr,Ar,ar,Wt=0,pr,dr,yr,Br,Lr,Ur,or,mr,Ir,ur,lr,Xr=mt*Qt*this.components.length;dt(Xr);var zr=new Uint8Array(Xr);switch(this.components.length){case 1:for(kt=this.components[0],ar=0;ar<Qt;ar++)for(jt=kt.lines[0|ar*kt.scaleY*bt],Ar=0;Ar<mt;Ar++)pr=jt[0|Ar*kt.scaleX*xt],zr[Wt++]=pr;break;case 2:for(kt=this.components[0],Lt=this.components[1],ar=0;ar<Qt;ar++)for(jt=kt.lines[0|ar*kt.scaleY*bt],Vt=Lt.lines[0|ar*Lt.scaleY*bt],Ar=0;Ar<mt;Ar++)pr=jt[0|Ar*kt.scaleX*xt],zr[Wt++]=pr,pr=Vt[0|Ar*Lt.scaleX*xt],zr[Wt++]=pr;break;case 3:for(lr=!0,this.adobe&&this.adobe.transformCode?lr=!0:typeof this.opts.colorTransform<"u"&&(lr=!!this.opts.colorTransform),kt=this.components[0],Lt=this.components[1],Ht=this.components[2],ar=0;ar<Qt;ar++)for(jt=kt.lines[0|ar*kt.scaleY*bt],Vt=Lt.lines[0|ar*Lt.scaleY*bt],Xt=Ht.lines[0|ar*Ht.scaleY*bt],Ar=0;Ar<mt;Ar++)lr?(pr=jt[0|Ar*kt.scaleX*xt],dr=Vt[0|Ar*Lt.scaleX*xt],yr=Xt[0|Ar*Ht.scaleX*xt],mr=_t(pr+1.402*(yr-128)),Ir=_t(pr-.3441363*(dr-128)-.71413636*(yr-128)),ur=_t(pr+1.772*(dr-128))):(mr=jt[0|Ar*kt.scaleX*xt],Ir=Vt[0|Ar*Lt.scaleX*xt],ur=Xt[0|Ar*Ht.scaleX*xt]),zr[Wt++]=mr,zr[Wt++]=Ir,zr[Wt++]=ur;break;case 4:if(!this.adobe)throw new Error("Unsupported color mode (4 components)");for(lr=!1,this.adobe&&this.adobe.transformCode?lr=!0:typeof this.opts.colorTransform<"u"&&(lr=!!this.opts.colorTransform),kt=this.components[0],Lt=this.components[1],Ht=this.components[2],Pt=this.components[3],ar=0;ar<Qt;ar++)for(jt=kt.lines[0|ar*kt.scaleY*bt],Vt=Lt.lines[0|ar*Lt.scaleY*bt],Xt=Ht.lines[0|ar*Ht.scaleY*bt],nr=Pt.lines[0|ar*Pt.scaleY*bt],Ar=0;Ar<mt;Ar++)lr?(pr=jt[0|Ar*kt.scaleX*xt],dr=Vt[0|Ar*Lt.scaleX*xt],yr=Xt[0|Ar*Ht.scaleX*xt],Br=nr[0|Ar*Pt.scaleX*xt],Lr=255-_t(pr+1.402*(yr-128)),Ur=255-_t(pr-.3441363*(dr-128)-.71413636*(yr-128)),or=255-_t(pr+1.772*(dr-128))):(Lr=jt[0|Ar*kt.scaleX*xt],Ur=Vt[0|Ar*Lt.scaleX*xt],or=Xt[0|Ar*Ht.scaleX*xt],Br=nr[0|Ar*Pt.scaleX*xt]),zr[Wt++]=255-Lr,zr[Wt++]=255-Ur,zr[Wt++]=255-or,zr[Wt++]=255-Br;break;default:throw new Error("Unsupported color mode")}return zr},copyToImageData:function(mt,Qt){var xt=mt.width,bt=mt.height,kt=mt.data,Lt=this.getData(xt,bt),Ht=0,Pt=0,jt,Vt,Xt,nr,Ar,ar,Wt,pr,dr;switch(this.components.length){case 1:for(Vt=0;Vt<bt;Vt++)for(jt=0;jt<xt;jt++)Xt=Lt[Ht++],kt[Pt++]=Xt,kt[Pt++]=Xt,kt[Pt++]=Xt,Qt&&(kt[Pt++]=255);break;case 3:for(Vt=0;Vt<bt;Vt++)for(jt=0;jt<xt;jt++)Wt=Lt[Ht++],pr=Lt[Ht++],dr=Lt[Ht++],kt[Pt++]=Wt,kt[Pt++]=pr,kt[Pt++]=dr,Qt&&(kt[Pt++]=255);break;case 4:for(Vt=0;Vt<bt;Vt++)for(jt=0;jt<xt;jt++)Ar=Lt[Ht++],ar=Lt[Ht++],Xt=Lt[Ht++],nr=Lt[Ht++],Wt=255-_t(Ar*(1-nr/255)+nr),pr=255-_t(ar*(1-nr/255)+nr),dr=255-_t(Xt*(1-nr/255)+nr),kt[Pt++]=Wt,kt[Pt++]=pr,kt[Pt++]=dr,Qt&&(kt[Pt++]=255);break;default:throw new Error("Unsupported color mode")}}};var ct=0,pt=0;function dt(mt=0){var Qt=ct+mt;if(Qt>pt){var xt=Math.ceil((Qt-pt)/1024/1024);throw new Error(`maxMemoryUsageInMB limit exceeded by at least ${xt}MB`)}ct=Qt}return At.resetMaxMemoryUsage=function(mt){ct=0,pt=mt},At.getBytesAllocated=function(){return ct},At.requestMemoryAllocation=dt,At}();s.exports=h;function h(d,g={}){var _={colorTransform:void 0,useTArray:!1,formatAsRGBA:!0,tolerantDecoding:!0,maxResolutionInMP:100,maxMemoryUsageInMB:512},b={..._,...g},$=new Uint8Array(d),et=new o;et.opts=b,o.resetMaxMemoryUsage(b.maxMemoryUsageInMB*1024*1024),et.parse($);var tt=b.formatAsRGBA?4:3,rt=et.width*et.height*tt;try{o.requestMemoryAllocation(rt);var nt={width:et.width,height:et.height,exifBuffer:et.exifBuffer,data:b.useTArray?new Uint8Array(rt):Buffer.alloc(rt)};et.comments.length>0&&(nt.comments=et.comments)}catch(At){throw At instanceof RangeError?new Error("Could not allocate enough memory for the image. Required: "+rt):At instanceof ReferenceError&&At.message==="Buffer is not defined"?new Error("Buffer is not globally defined in this environment. Consider setting useTArray to true"):At}return et.copyToImageData(nt,b.formatAsRGBA),nt}}(decoder)),decoder.exports}var jpegJs,hasRequiredJpegJs;function requireJpegJs(){if(hasRequiredJpegJs)return jpegJs;hasRequiredJpegJs=1;var s=requireEncoder(),o=requireDecoder();return jpegJs={encode:s,decode:o},jpegJs}var jpegJsExports=requireJpegJs();const jpeg=getDefaultExportFromCjs(jpegJsExports);let chars$4="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup$4=new Uint8Array(256);for(let s=0;s<chars$4.length;s++)lookup$4[chars$4.charCodeAt(s)]=s;function encode(s){let o,h=s.length,d="";for(o=0;o<h;o+=3)d+=chars$4[s[o]>>2],d+=chars$4[(s[o]&3)<<4|s[o+1]>>4],d+=chars$4[(s[o+1]&15)<<2|s[o+2]>>6],d+=chars$4[s[o+2]&63];return h%3===2?d=`${d.substring(0,d.length-1)}=`:h%3===1&&(d=`${d.substring(0,d.length-2)}==`),d}function decode$1$1(s){let o=s.length*.75,h=s.length,d=0,g,_,b,$;s[s.length-1]==="="&&(o--,s[s.length-2]==="="&&o--);const et=new Uint8Array(o);for(let tt=0;tt<h;tt+=4)g=lookup$4[s.charCodeAt(tt)],_=lookup$4[s.charCodeAt(tt+1)],b=lookup$4[s.charCodeAt(tt+2)],$=lookup$4[s.charCodeAt(tt+3)],et[d++]=g<<2|_>>4,et[d++]=(_&15)<<4|b>>2,et[d++]=(b&3)<<6|$&63;return et}function toBase64URL(s,o){const h=encode(s);return`data:${o};base64,${h}`}const ImageData$1=self.ImageData,DOMImage=self.Image;function createCanvas(s,o){let h=self.document.createElement("canvas");return h.width=s,h.height=o,h}function fetchBinary(s,{withCredentials:o=!1}={}){return new Promise(function(h,d){let g=new self.XMLHttpRequest;g.open("GET",s,!0),g.responseType="arraybuffer",g.withCredentials=o,g.onload=function(_){this.status!==200?d(_):h(this.response)},g.onerror=d,g.send()})}function createWriteStream(){throw new Error("createWriteStream does not exist in the browser")}function writeFile(){throw new Error("writeFile does not exist in the browser")}function getType(s){return s.includes("/")||(s=`image/${s}`),s}function encodeJpeg(s,o={}){const h={width:s.width,height:s.height,data:s.getRGBAData()};return jpegJsExports.encode(h,o.quality).data}function encodePng(s,o){const h={width:s.width,height:s.height,channels:s.channels,depth:s.bitDepth,data:s.data};return(h.depth===1||h.depth===32)&&(h.depth=8,h.channels=4,h.data=s.getRGBAData()),encodePng$1(h,o)}const exportMethods={save(s,o={}){const{useCanvas:h=!1,encoder:d=void 0}=o;let{format:g}=o;if(!g){const _=/\.(?<format>[a-zA-Z]+)$/.exec(s);_&&(g=_.groups.format.toLowerCase())}if(!g)throw new Error("file format not provided");return new Promise((_,b)=>{let $,et;switch(g.toLowerCase()){case"png":{h?$=this.getCanvas().pngStream():et=encodePng(this,d);break}case"jpg":case"jpeg":h?$=this.getCanvas().jpegStream():et=encodeJpeg(this,d);break;case"bmp":et=srcExports$3.encode(this,d);break;default:throw new RangeError(`invalid output format: ${g}`)}if($){let tt=createWriteStream();tt.on("finish",_),tt.on("error",b),$.pipe(tt)}else et&&writeFile()})},toDataURL(s="image/png",o={}){typeof s=="object"&&(o=s,s="image/png");const{useCanvas:h=!1,encoder:d=void 0}=o;s=getType(s);function g(_,b){const $=_(b,d);return toBase64URL($,s)}return s==="image/bmp"?g(srcExports$3.encode,this):s==="image/png"&&!h?g(encodePng,this):s==="image/jpeg"&&!h?g(encodeJpeg,this):this.getCanvas().toDataURL(s)},toBuffer(s={}){const{format:o="png",encoder:h=void 0}=s;switch(o.toLowerCase()){case"png":return encodePng(this,h);case"jpeg":case"jpg":return encodeJpeg(this,h);case"bmp":return srcExports$3.encode(this,h);default:throw new RangeError(`invalid output format: ${o}`)}},toBase64(s="image/png",o={}){if(o.async)return this.toDataURL(s,o).then(function(h){return h.substring(h.indexOf(",")+1)});{const h=this.toDataURL(s,o);return h.substring(h.indexOf(",")+1)}},toBlob(s="image/png",o=.8){return canvasToBlob(this.getCanvas(),s,o)},getCanvas(){const s=new ImageData$1(this.getRGBAData({clamped:!0}),this.width,this.height);let o=createCanvas(this.width,this.height);return o.getContext("2d").putImageData(s,0,0),o}};function setExportMethods(s){for(const o in exportMethods)s.prototype[o]=exportMethods[o]}var hasOwn$1={exports:{}};const version="1.0.1",require$$0$2={version};var hasRequiredHasOwn;function requireHasOwn(){return hasRequiredHasOwn||(hasRequiredHasOwn=1,function(s,o){var h=Object.prototype.hasOwnProperty;s.exports=o=function(d,g){return h.call(g,d)},o.version=require$$0$2.version}(hasOwn$1,hasOwn$1.exports)),hasOwn$1.exports}var hasOwnExports=requireHasOwn();const hasOwn=getDefaultExportFromCjs(hasOwnExports);let computedPropertyDescriptor$1={configurable:!0,enumerable:!1,get:void 0};function extendMethod(s,o,h={}){let{inPlace:d=!1,returnThis:g=!0,partialArgs:_=[]}=h;return d?Image$1.prototype[s]=function(...b){this.computed=null;let $=o.apply(this,[..._,...b]);return g?this:$}:Image$1.prototype[s]=function(...b){return o.apply(this,[..._,...b])},Image$1}function extendProperty(s,o,h={}){let{partialArgs:d=[]}=h;return computedPropertyDescriptor$1.get=function(){if(this.computed===null)this.computed={};else if(hasOwn(s,this.computed))return this.computed[s];let g=o.apply(this,d);return this.computed[s]=g,g},Object.defineProperty(Image$1.prototype,s,computedPropertyDescriptor$1),Image$1}const GREY$1="GREY",RGB$1="RGB",HSL="HSL",HSV="HSV",CMYK$1="CMYK",ColorModel=Object.freeze(Object.defineProperty({__proto__:null,CMYK:CMYK$1,GREY:GREY$1,HSL,HSV,RGB:RGB$1},Symbol.toStringTag,{value:"Module"}));function getRGBAData(s={}){const{clamped:o}=s;this.checkProcessable("getRGBAData",{components:[1,3],bitDepth:[1,8,16,32]});const h=this.width*this.height*4;let d=o?new Uint8ClampedArray(h):new Uint8Array(h);return this.bitDepth===1?fillDataFromBinary(this,d):this.bitDepth===32?(this.checkProcessable("getRGBAData",{alpha:0}),this.components===1?fillDataFromGrey32(this,d):this.components===3&&(this.checkProcessable("getRGBAData",{colorModel:[RGB$1]}),fillDataFromRGB32(this,d))):this.components===1?fillDataFromGrey(this,d):this.components===3&&(this.checkProcessable("getRGBAData",{colorModel:[RGB$1]}),fillDataFromRGB(this,d)),this.alpha===1?(this.checkProcessable("getRGBAData",{bitDepth:[8,16]}),copyAlpha(this,d)):fillAlpha(this,d),d}function fillDataFromBinary(s,o){for(let h=0;h<s.size;h++){const d=s.getBit(h);o[h*4]=d*255,o[h*4+1]=d*255,o[h*4+2]=d*255}}function fillDataFromGrey32(s,o){const h=s.min[0],d=s.max[0]-h;for(let g=0;g<s.size;g++){const _=Math.floor(255*(s.data[g]-h)/d);o[g*4]=_,o[g*4+1]=_,o[g*4+2]=_}}function fillDataFromRGB32(s,o){const h=Math.min(...s.min),d=Math.max(...s.max)-h;for(let g=0;g<s.size;g++){const _=Math.floor(255*(s.data[g*3]-h)/d),b=Math.floor(255*(s.data[g*3+1]-h)/d),$=Math.floor(255*(s.data[g*3+2]-h)/d);o[g*4]=_,o[g*4+1]=b,o[g*4+2]=$}}function fillDataFromGrey(s,o){for(let h=0;h<s.size;h++)o[h*4]=s.data[h*s.channels]>>>s.bitDepth-8,o[h*4+1]=s.data[h*s.channels]>>>s.bitDepth-8,o[h*4+2]=s.data[h*s.channels]>>>s.bitDepth-8}function fillDataFromRGB(s,o){for(let h=0;h<s.size;h++)o[h*4]=s.data[h*s.channels]>>>s.bitDepth-8,o[h*4+1]=s.data[h*s.channels+1]>>>s.bitDepth-8,o[h*4+2]=s.data[h*s.channels+2]>>>s.bitDepth-8}function copyAlpha(s,o){for(let h=0;h<s.size;h++)o[h*4+3]=s.data[h*s.channels+s.components]>>s.bitDepth-8}function fillAlpha(s,o){for(let h=0;h<s.size;h++)o[h*4+3]=255}const BINARY="BINARY",GREY="GREY",GREYA="GREYA",RGB="RGB",RGBA="RGBA",CMYK="CMYK",CMYKA="CMYKA",kinds={};kinds[BINARY]={components:1,alpha:0,bitDepth:1,colorModel:GREY$1};kinds[GREYA]={components:1,alpha:1,bitDepth:8,colorModel:GREY$1};kinds[GREY]={components:1,alpha:0,bitDepth:8,colorModel:GREY$1};kinds[RGBA]={components:3,alpha:1,bitDepth:8,colorModel:RGB$1};kinds[RGB]={components:3,alpha:0,bitDepth:8,colorModel:RGB$1};kinds[CMYK]={components:4,alpha:0,bitDepth:8,colorModel:CMYK$1};kinds[CMYKA]={components:4,alpha:1,bitDepth:8,colorModel:CMYK$1};function getKind(s){const o=kinds[s];if(!o)throw new RangeError(`invalid image kind: ${s}`);return o}const validBitDepth=[1,8,16,32];function verifyKindDefinition(s){const{components:o,alpha:h,bitDepth:d,colorModel:g}=s;if(!Number.isInteger(o)||o<=0)throw new RangeError(`invalid components: ${o}. Must be a positive integer`);if(h!==0&&h!==1&&typeof h!="boolean")throw new TypeError(`invalid alpha: ${h}: must be a boolean, 0 or 1`);if(!validBitDepth.includes(d))throw new RangeError(`invalid bitDepth: ${d}. Must be one of ${validBitDepth.join(", ")}`);if(!ColorModel[g])throw new RangeError(`invalid colorModel: ${g}. Must be one of ${Object.keys(ColorModel).join(", ")}`)}function getTheoreticalPixelArraySize(s,o,h){let d=o*s;return h===1&&(d=Math.ceil(d/8)),d}function createPixelArray(s,o,h,d,g,_){const b=d*s;let $;switch(g){case 1:$=new Uint8Array(Math.ceil(b/8));break;case 8:$=new Uint8Array(b);break;case 16:$=new Uint16Array(b);break;case 32:$=new Float32Array(b);break;default:throw new Error(`Cannot create pixel array for bit depth ${g}`)}if(h)for(let et=o;et<$.length;et+=d)$[et]=_;return $}var src$4={},IOBuffer_1,hasRequiredIOBuffer;function requireIOBuffer(){if(hasRequiredIOBuffer)return IOBuffer_1;hasRequiredIOBuffer=1;const s=1024*8,o=[];class h{constructor(g,_){_=_||{},g===void 0&&(g=s),typeof g=="number"&&(g=new ArrayBuffer(g));let b=g.byteLength;const $=_.offset?_.offset>>>0:0;g.buffer&&(b=g.byteLength-$,g.byteLength!==g.buffer.byteLength?g=g.buffer.slice(g.byteOffset+$,g.byteOffset+g.byteLength):$?g=g.buffer.slice($):g=g.buffer),this.buffer=g,this.length=b,this.byteLength=b,this.byteOffset=0,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer),this._increment=b||s,this._mark=0}available(g){return g===void 0&&(g=1),this.offset+g<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){this.littleEndian=!0}isBigEndian(){return!this.littleEndian}setBigEndian(){this.littleEndian=!1}skip(g){g===void 0&&(g=1),this.offset+=g}seek(g){this.offset=g}mark(){this._mark=this.offset}reset(){this.offset=this._mark}rewind(){this.offset=0}ensureAvailable(g){if(g===void 0&&(g=1),!this.available(g)){const _=this._increment+this._increment;this._increment=_;const b=this.length+_,$=new Uint8Array(b);$.set(new Uint8Array(this.buffer)),this.buffer=$.buffer,this.length=b,this._data=new DataView(this.buffer)}}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(g){g===void 0&&(g=1);for(var _=new Uint8Array(g),b=0;b<g;b++)_[b]=this.readByte();return _}readInt16(){var g=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,g}readUint16(){var g=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,g}readInt32(){var g=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,g}readUint32(){var g=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,g}readFloat32(){var g=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,g}readFloat64(){var g=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,g}readChar(){return String.fromCharCode(this.readInt8())}readChars(g){g===void 0&&(g=1),o.length=g;for(var _=0;_<g;_++)o[_]=this.readChar();return o.join("")}writeBoolean(g){this.writeUint8(g?255:0)}writeInt8(g){this.ensureAvailable(1),this._data.setInt8(this.offset++,g)}writeUint8(g){this.ensureAvailable(1),this._data.setUint8(this.offset++,g)}writeByte(g){this.writeUint8(g)}writeBytes(g){this.ensureAvailable(g.length);for(var _=0;_<g.length;_++)this._data.setUint8(this.offset++,g[_])}writeInt16(g){this.ensureAvailable(2),this._data.setInt16(this.offset,g,this.littleEndian),this.offset+=2}writeUint16(g){this.ensureAvailable(2),this._data.setUint16(this.offset,g,this.littleEndian),this.offset+=2}writeInt32(g){this.ensureAvailable(4),this._data.setInt32(this.offset,g,this.littleEndian),this.offset+=4}writeUint32(g){this.ensureAvailable(4),this._data.setUint32(this.offset,g,this.littleEndian),this.offset+=4}writeFloat32(g){this.ensureAvailable(4),this._data.setFloat32(this.offset,g,this.littleEndian),this.offset+=4}writeFloat64(g){this.ensureAvailable(8),this._data.setFloat64(this.offset,g,this.littleEndian),this.offset+=8}writeChar(g){this.writeUint8(g.charCodeAt(0))}writeChars(g){for(var _=0;_<g.length;_++)this.writeUint8(g.charCodeAt(_))}toArray(){return new Uint8Array(this.buffer,0,this.offset)}}return IOBuffer_1=h,IOBuffer_1}var src$3={},standard$1,hasRequiredStandard;function requireStandard(){if(hasRequiredStandard)return standard$1;hasRequiredStandard=1;const s={254:"NewSubfileType",255:"SubfileType",256:"ImageWidth",257:"ImageLength",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",263:"Threshholding",264:"CellWidth",265:"CellLength",266:"FillOrder",270:"ImageDescription",271:"Make",272:"Model",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",280:"MinSampleValue",281:"MaxSampleValue",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",288:"FreeOffsets",289:"FreeByteCounts",290:"GrayResponseUnit",291:"GrayResponseCurve",296:"ResolutionUnit",305:"Software",306:"DateTime",315:"Artist",316:"HostComputer",320:"ColorMap",338:"ExtraSamples",33432:"Copyright",269:"DocumentName",285:"PageName",286:"XPosition",287:"YPosition",292:"T4Options",293:"T6Options",297:"PageNumber",301:"TransferFunction",317:"Predictor",318:"WhitePoint",319:"PrimaryChromaticities",321:"HalftoneHints",322:"TileWidth",323:"TileLength",324:"TileOffsets",325:"TileByteCounts",326:"BadFaxLines",327:"CleanFaxData",328:"ConsecutiveBadFaxLines",330:"SubIFDs",332:"InkSet",333:"InkNames",334:"NumberOfInks",336:"DotRange",337:"TargetPrinter",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",342:"TransferRange",343:"ClipPath",344:"XClipPathUnits",345:"YClipPathUnits",346:"Indexed",347:"JPEGTables",351:"OPIProxy",400:"GlobalParametersIFD",401:"ProfileType",402:"FaxProfile",403:"CodingMethods",404:"VersionYear",405:"ModeNumber",433:"Decode",434:"DefaultImageColor",512:"JPEGProc",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",515:"JPEGRestartInterval",517:"JPEGLosslessPredictors",518:"JPEGPointTransforms",519:"JPEGQTables",520:"JPEGDCTables",521:"JPEGACTables",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite",559:"StripRowCounts",700:"XMP",32781:"ImageID",34732:"ImageLayer",32932:"WangAnnotatio",33445:"MDFileTag",33446:"MDScalePixel",33447:"MDColorTable",33448:"MDLabName",33449:"MDSampleInfo",33450:"MDPrepDate",33451:"MDPrepTime",33452:"MDFileUnits",33550:"ModelPixelScaleTag",33723:"IPTC",33918:"INGRPacketDataTag",33919:"INGRFlagRegisters",33920:"IrasBTransformationMatrix",33922:"ModelTiepointTag",34264:"ModelTransformationTag",34377:"Photoshop",34665:"ExifIFD",34675:"ICCProfile",34735:"GeoKeyDirectoryTag",34736:"GeoDoubleParamsTag",34737:"GeoAsciiParamsTag",34853:"GPSIFD",34908:"HylaFAXFaxRecvParams",34909:"HylaFAXFaxSubAddress",34910:"HylaFAXFaxRecvTime",37724:"ImageSourceData",40965:"InteroperabilityIFD",42112:"GDAL_METADATA",42113:"GDAL_NODATA",50215:"OceScanjobDescription",50216:"OceApplicationSelector",50217:"OceIdentificationNumber",50218:"OceImageLogicCharacteristics",50706:"DNGVersion",50707:"DNGBackwardVersion",50708:"UniqueCameraModel",50709:"LocalizedCameraModel",50710:"CFAPlaneColor",50711:"CFALayout",50712:"LinearizationTable",50713:"BlackLevelRepeatDim",50714:"BlackLevel",50715:"BlackLevelDeltaH",50716:"BlackLevelDeltaV",50717:"WhiteLevel",50718:"DefaultScale",50719:"DefaultCropOrigin",50720:"DefaultCropSize",50721:"ColorMatrix1",50722:"ColorMatrix2",50723:"CameraCalibration1",50724:"CameraCalibration2",50725:"ReductionMatrix1",50726:"ReductionMatrix2",50727:"AnalogBalance",50728:"AsShotNeutral",50729:"AsShotWhiteXY",50730:"BaselineExposure",50731:"BaselineNoise",50732:"BaselineSharpness",50733:"BayerGreenSplit",50734:"LinearResponseLimit",50735:"CameraSerialNumber",50736:"LensInfo",50737:"ChromaBlurRadius",50738:"AntiAliasStrength",50740:"DNGPrivateData",50741:"MakerNoteSafety",50778:"CalibrationIlluminant1",50779:"CalibrationIlluminant2",50780:"BestQualityScale",50784:"AliasLayerMetadata"},o={};for(var h in s)o[s[h]]=h;return standard$1={tagsById:s,tagsByName:o},standard$1}var exif$1,hasRequiredExif;function requireExif(){if(hasRequiredExif)return exif$1;hasRequiredExif=1;const s={33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",36864:"ExifVersion",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBiasValue",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37386:"FocalLength",37396:"SubjectArea",37500:"MakerNote",37510:"UserComment",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",40964:"RelatedSoundFile",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",42240:"Gamma"},o={};for(var h in s)o[s[h]]=h;return exif$1={tagsById:s,tagsByName:o},exif$1}var gps$1,hasRequiredGps;function requireGps(){if(hasRequiredGps)return gps$1;hasRequiredGps=1;const s={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},o={};for(var h in s)o[s[h]]=h;return gps$1={tagsById:s,tagsByName:o},gps$1}var ifd,hasRequiredIfd;function requireIfd(){if(hasRequiredIfd)return ifd;hasRequiredIfd=1;const s={standard:requireStandard(),exif:requireExif(),gps:requireGps()};class o{constructor(d){if(!d)throw new Error("missing kind");this.data=null,this.fields=new Map,this.kind=d,this._map=null}get(d){if(typeof d=="number")return this.fields.get(d);if(typeof d=="string")return this.fields.get(s[this.kind].tagsByName[d]);throw new Error("expected a number or string")}get map(){if(!this._map){this._map={};const g=s[this.kind].tagsById;for(var d of this.fields.keys())g[d]&&(this._map[g[d]]=this.fields.get(d))}return this._map}}return ifd=o,ifd}var tiffIfd,hasRequiredTiffIfd;function requireTiffIfd(){if(hasRequiredTiffIfd)return tiffIfd;hasRequiredTiffIfd=1;const s=requireIfd(),o=/^(\d{4}):(\d{2}):(\d{2}) (\d{2}):(\d{2}):(\d{2})$/;class h extends s{constructor(){super("standard")}get size(){return this.width*this.height}get width(){return this.imageWidth}get height(){return this.imageLength}get components(){return this.samplesPerPixel}get date(){var _=new Date,b=o.exec(this.dateTime);return _.setFullYear(b[1],b[2]-1,b[3]),_.setHours(b[4],b[5],b[6]),_}get newSubfileType(){return this.get(254)}get imageWidth(){return this.get(256)}get imageLength(){return this.get(257)}get bitsPerSample(){return this.get(258)}get compression(){return this.get(259)||1}get type(){return this.get(262)}get fillOrder(){return this.get(266)||1}get documentName(){return this.get(269)}get imageDescription(){return this.get(270)}get stripOffsets(){return d(this.get(273))}get orientation(){return this.get(274)}get samplesPerPixel(){return this.get(277)}get rowsPerStrip(){return this.get(278)}get stripByteCounts(){return d(this.get(279))}get minSampleValue(){return this.get(280)||0}get maxSampleValue(){return this.get(281)||Math.pow(2,this.bitsPerSample)-1}get xResolution(){return this.get(282)}get yResolution(){return this.get(283)}get planarConfiguration(){return this.get(284)||1}get resolutionUnit(){return this.get(296)||2}get dateTime(){return this.get(306)}get predictor(){return this.get(317)||1}get sampleFormat(){return this.get(339)||1}get sMinSampleValue(){return this.get(340)||this.minSampleValue}get sMaxSampleValue(){return this.get(341)||this.maxSampleValue}}function d(g){return typeof g=="number"?[g]:g}return tiffIfd=h,tiffIfd}var ifdValue={},hasRequiredIfdValue;function requireIfdValue(){if(hasRequiredIfdValue)return ifdValue;hasRequiredIfdValue=1;var s=new Map([[1,[1,o]],[2,[1,h]],[3,[2,d]],[4,[4,g]],[5,[8,_]],[6,[1,b]],[7,[1,o]],[8,[2,$]],[9,[4,et]],[10,[8,tt]],[11,[4,rt]],[12,[8,nt]]]);ifdValue.getByteLength=function(At,at){return s.get(At)[0]*at},ifdValue.readData=function(At,at,lt){return s.get(at)[1](At,lt)};function o(At,at){if(at===1)return At.readUint8();for(var lt=new Uint8Array(at),gt=0;gt<at;gt++)lt[gt]=At.readUint8();return lt}function h(At,at){for(var lt=[],gt="",_t=0;_t<at;_t++){var ct=String.fromCharCode(At.readUint8());ct==="\0"?(lt.push(gt),gt=""):gt+=ct}return lt.length===1?lt[0]:lt}function d(At,at){if(at===1)return At.readUint16();for(var lt=new Uint16Array(at),gt=0;gt<at;gt++)lt[gt]=At.readUint16();return lt}function g(At,at){if(at===1)return At.readUint32();for(var lt=new Uint32Array(at),gt=0;gt<at;gt++)lt[gt]=At.readUint32();return lt}function _(At,at){if(at===1)return At.readUint32()/At.readUint32();for(var lt=new Array(at),gt=0;gt<at;gt++)lt[gt]=At.readUint32()/At.readUint32();return lt}function b(At,at){if(at===1)return At.readInt8();for(var lt=new Int8Array(at),gt=0;gt<at;gt++)lt[gt]=At.readInt8();return lt}function $(At,at){if(at===1)return At.readInt16();for(var lt=new Int16Array(at),gt=0;gt<at;gt++)lt[gt]=At.readInt16();return lt}function et(At,at){if(at===1)return At.readInt32();for(var lt=new Int32Array(at),gt=0;gt<at;gt++)lt[gt]=At.readInt32();return lt}function tt(At,at){if(at===1)return At.readInt32()/At.readInt32();for(var lt=new Array(at),gt=0;gt<at;gt++)lt[gt]=At.readInt32()/At.readInt32();return lt}function rt(At,at){if(at===1)return At.readFloat32();for(var lt=new Float32Array(at),gt=0;gt<at;gt++)lt[gt]=At.readFloat32();return lt}function nt(At,at){if(at===1)return At.readFloat64();for(var lt=new Float64Array(at),gt=0;gt<at;gt++)lt[gt]=At.readFloat64();return lt}return ifdValue}var tiffDecoder,hasRequiredTiffDecoder;function requireTiffDecoder(){if(hasRequiredTiffDecoder)return tiffDecoder;hasRequiredTiffDecoder=1;const s=requireIOBuffer(),o=requireIfd(),h=requireTiffIfd(),d=requireIfdValue(),g={ignoreImageData:!1,onlyFirst:!1};class _ extends s{constructor(at,lt){super(at,lt),this._nextIFD=0}decode(at){at=Object.assign({},g,at);const lt=[];for(this.decodeHeader();this._nextIFD;)if(lt.push(this.decodeIFD(at)),at.onlyFirst)return lt[0];return lt}decodeHeader(){let at=this.readUint16();if(at===18761)this.setLittleEndian();else if(at===19789)this.setBigEndian();else throw new Error("invalid byte order: 0x"+at.toString(16));if(at=this.readUint16(),at!==42)throw new Error("not a TIFF file");this._nextIFD=this.readUint32()}decodeIFD(at){this.seek(this._nextIFD);var lt;at.kind?lt=new o(at.kind):lt=new h;const gt=this.readUint16();for(var _t=0;_t<gt;_t++)this.decodeIFDEntry(lt);return at.ignoreImageData||this.decodeImageData(lt),this._nextIFD=this.readUint32(),lt}decodeIFDEntry(at){const lt=this.offset,gt=this.readUint16(),_t=this.readUint16(),ct=this.readUint32();if(_t<1||_t>12){this.skip(4);return}d.getByteLength(_t,ct)>4&&this.seek(this.readUint32());const pt=d.readData(this,_t,ct);if(at.fields.set(gt,pt),gt===34665||gt===34853){let dt=this.offset,mt;gt===34665?mt="exif":gt===34853&&(mt="gps"),this._nextIFD=pt,at[mt]=this.decodeIFD({kind:mt,ignoreImageData:!0}),this.offset=dt}this.seek(lt),this.skip(12)}decodeImageData(at){const lt=at.orientation;switch(lt&&lt!==1&&rt("orientation",lt),at.type){case 1:case 2:this.readStripData(at);break;default:rt("image type",at.type);break}}readStripData(at){const lt=at.width,gt=at.height,_t=nt(at.bitsPerSample),ct=at.sampleFormat;let pt=lt*gt;const dt=b(pt,1,_t,ct),mt=at.compression,Qt=at.rowsPerStrip*lt,xt=at.stripOffsets,bt=at.stripByteCounts;for(var kt=0,Lt=0;Lt<xt.length;Lt++){var Ht=this.getStripData(mt,xt[Lt],bt[Lt]),Pt=pt>Qt?Qt:pt;pt-=Pt,_t===8?kt=$(dt,Ht,kt,Pt):_t===16?kt=et(dt,Ht,kt,Pt,this.isLittleEndian()):_t===32&&ct===3?kt=tt(dt,Ht,kt,Pt,this.isLittleEndian()):rt("bitDepth",_t)}at.data=dt}getStripData(at,lt,gt){switch(at){case 1:return new DataView(this.buffer,lt,gt);case 2:case 32773:return rt("Compression",at);default:throw new Error("invalid compression: "+at)}}}tiffDecoder=_;function b(At,at,lt,gt){return lt===8?new Uint8Array(At*at):lt===16?new Uint16Array(At*at):lt===32&&gt===3?new Float32Array(At*at):rt("bit depth / sample format",lt+" / "+gt)}function $(At,at,lt,gt){for(var _t=0;_t<gt;_t++)At[lt++]=at.getUint8(_t);return lt}function et(At,at,lt,gt,_t){for(var ct=0;ct<gt*2;ct+=2)At[lt++]=at.getUint16(ct,_t);return lt}function tt(At,at,lt,gt,_t){for(var ct=0;ct<gt*4;ct+=4)At[lt++]=at.getFloat32(ct,_t);return lt}function rt(At,at){throw new Error("Unsupported "+At+": "+at)}function nt(At){if(At.length){const lt=At;At=lt[0];for(var at=0;at<lt.length;at++)lt[at]!==At&&rt("bit depth",lt)}return At}return tiffDecoder}var decode$3,hasRequiredDecode$1;function requireDecode$1(){if(hasRequiredDecode$1)return decode$3;hasRequiredDecode$1=1;const s=requireTiffDecoder();return decode$3=function(o,h){return new s(o,h).decode(h)},decode$3}var hasRequiredSrc$4;function requireSrc$4(){return hasRequiredSrc$4||(hasRequiredSrc$4=1,src$3.decode=requireDecode$1()),src$3}var decode_1,hasRequiredDecode;function requireDecode(){if(hasRequiredDecode)return decode_1;hasRequiredDecode=1;const s=requireIOBuffer(),o=requireSrc$4();function h(d){const g=new s(d),_={};if(g.setBigEndian(),g.readUint16()!==65496)throw new Error("SOI marker not found. Not a valid JPEG file");if(g.readUint16()===65505){g.readUint16();const b=g.readBytes(6);if(b[0]===69&&b[1]===120&&b[2]===105&&b[3]===102&&b[4]===0&&b[5]===0){const $=o.decode(g,{onlyFirst:!0,ignoreImageData:!0,offset:g.offset});_.exif=$}}return _}return decode_1=h,decode_1}var hasRequiredSrc$3;function requireSrc$3(){return hasRequiredSrc$3||(hasRequiredSrc$3=1,src$4.decode=requireDecode()),src$4}var srcExports$2=requireSrc$3(),imageType$1={exports:{}},fileType={exports:{}},hasRequiredFileType;function requireFileType(){return hasRequiredFileType||(hasRequiredFileType=1,function(module){const toBytes=s=>[...s].map(o=>o.charCodeAt(0)),xpiZipFilename=toBytes("META-INF/mozilla.rsa"),oxmlContentTypes=toBytes("[Content_Types].xml"),oxmlRels=toBytes("_rels/.rels");function readUInt64LE(s,o=0){let h=s[o],d=1,g=0;for(;++g<8;)d*=256,h+=s[o+g]*d;return h}const fileType=s=>{if(!(s instanceof Uint8Array||s instanceof ArrayBuffer||Buffer.isBuffer(s)))throw new TypeError(`Expected the \`input\` argument to be of type \`Uint8Array\` or \`Buffer\` or \`ArrayBuffer\`, got \`${typeof s}\``);const o=s instanceof Uint8Array?s:new Uint8Array(s);if(!(o&&o.length>1))return null;const h=(g,_)=>{_=Object.assign({offset:0},_);for(let b=0;b<g.length;b++)if(_.mask){if(g[b]!==(_.mask[b]&o[b+_.offset]))return!1}else if(g[b]!==o[b+_.offset])return!1;return!0},d=(g,_)=>h(toBytes(g),_);if(h([255,216,255]))return{ext:"jpg",mime:"image/jpeg"};if(h([137,80,78,71,13,10,26,10]))return{ext:"png",mime:"image/png"};if(h([71,73,70]))return{ext:"gif",mime:"image/gif"};if(h([87,69,66,80],{offset:8}))return{ext:"webp",mime:"image/webp"};if(h([70,76,73,70]))return{ext:"flif",mime:"image/flif"};if((h([73,73,42,0])||h([77,77,0,42]))&&h([67,82],{offset:8}))return{ext:"cr2",mime:"image/x-canon-cr2"};if(h([73,73,42,0])||h([77,77,0,42]))return{ext:"tif",mime:"image/tiff"};if(h([66,77]))return{ext:"bmp",mime:"image/bmp"};if(h([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(h([56,66,80,83]))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(h([80,75,3,4])){if(h([109,105,109,101,116,121,112,101,97,112,112,108,105,99,97,116,105,111,110,47,101,112,117,98,43,122,105,112],{offset:30}))return{ext:"epub",mime:"application/epub+zip"};if(h(xpiZipFilename,{offset:30}))return{ext:"xpi",mime:"application/x-xpinstall"};if(d("mimetypeapplication/vnd.oasis.opendocument.text",{offset:30}))return{ext:"odt",mime:"application/vnd.oasis.opendocument.text"};if(d("mimetypeapplication/vnd.oasis.opendocument.spreadsheet",{offset:30}))return{ext:"ods",mime:"application/vnd.oasis.opendocument.spreadsheet"};if(d("mimetypeapplication/vnd.oasis.opendocument.presentation",{offset:30}))return{ext:"odp",mime:"application/vnd.oasis.opendocument.presentation"};const g=(et,tt=0)=>et.findIndex((rt,nt,At)=>nt>=tt&&At[nt]===80&&At[nt+1]===75&&At[nt+2]===3&&At[nt+3]===4);let _=0,b=!1,$=null;do{const et=_+30;if(b||(b=h(oxmlContentTypes,{offset:et})||h(oxmlRels,{offset:et})),$||(d("word/",{offset:et})?$={ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"}:d("ppt/",{offset:et})?$={ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"}:d("xl/",{offset:et})&&($={ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"})),b&&$)return $;_=g(o,et)}while(_>=0);if($)return $}if(h([80,75])&&(o[2]===3||o[2]===5||o[2]===7)&&(o[3]===4||o[3]===6||o[3]===8))return{ext:"zip",mime:"application/zip"};if(h([117,115,116,97,114],{offset:257}))return{ext:"tar",mime:"application/x-tar"};if(h([82,97,114,33,26,7])&&(o[6]===0||o[6]===1))return{ext:"rar",mime:"application/x-rar-compressed"};if(h([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(h([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(h([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(h([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(h([51,103,112,53])||h([0,0,0])&&h([102,116,121,112],{offset:4})&&(h([109,112,52,49],{offset:8})||h([109,112,52,50],{offset:8})||h([105,115,111,109],{offset:8})||h([105,115,111,50],{offset:8})||h([109,109,112,52],{offset:8})||h([77,52,86],{offset:8})||h([100,97,115,104],{offset:8})))return{ext:"mp4",mime:"video/mp4"};if(h([77,84,104,100]))return{ext:"mid",mime:"audio/midi"};if(h([26,69,223,163])){const g=o.subarray(4,4100),_=g.findIndex((b,$,et)=>et[$]===66&&et[$+1]===130);if(_!==-1){const b=_+3,$=et=>[...et].every((tt,rt)=>g[b+rt]===tt.charCodeAt(0));if($("matroska"))return{ext:"mkv",mime:"video/x-matroska"};if($("webm"))return{ext:"webm",mime:"video/webm"}}}if(h([0,0,0,20,102,116,121,112,113,116,32,32])||h([102,114,101,101],{offset:4})||h([102,116,121,112,113,116,32,32],{offset:4})||h([109,100,97,116],{offset:4})||h([109,111,111,118],{offset:4})||h([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(h([82,73,70,70])){if(h([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(h([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/vnd.wave"};if(h([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(h([48,38,178,117,142,102,207,17,166,217])){let g=30;do{const _=readUInt64LE(o,g+16);if(h([145,7,220,183,183,169,207,17,142,230,0,192,12,32,83,101],{offset:g})){if(h([64,158,105,248,77,91,207,17,168,253,0,128,95,92,68,43],{offset:g+24}))return{ext:"wma",mime:"audio/x-ms-wma"};if(h([192,239,25,188,77,91,207,17,168,253,0,128,95,92,68,43],{offset:g+24}))return{ext:"wmv",mime:"video/x-ms-asf"};break}g+=_}while(g+24<=o.length);return{ext:"asf",mime:"application/vnd.ms-asf"}}if(h([0,0,1,186])||h([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(h([102,116,121,112,51,103],{offset:4}))return{ext:"3gp",mime:"video/3gpp"};for(let g=0;g<2&&g<o.length-16;g++){if(h([73,68,51],{offset:g})||h([255,226],{offset:g,mask:[255,226]}))return{ext:"mp3",mime:"audio/mpeg"};if(h([255,228],{offset:g,mask:[255,228]}))return{ext:"mp2",mime:"audio/mpeg"};if(h([255,248],{offset:g,mask:[255,252]}))return{ext:"mp2",mime:"audio/mpeg"};if(h([255,240],{offset:g,mask:[255,252]}))return{ext:"mp4",mime:"audio/mpeg"}}if(h([102,116,121,112,77,52,65],{offset:4}))return{ext:"m4a",mime:"audio/mp4"};if(h([79,112,117,115,72,101,97,100],{offset:28}))return{ext:"opus",mime:"audio/opus"};if(h([79,103,103,83]))return h([128,116,104,101,111,114,97],{offset:28})?{ext:"ogv",mime:"video/ogg"}:h([1,118,105,100,101,111,0],{offset:28})?{ext:"ogm",mime:"video/ogg"}:h([127,70,76,65,67],{offset:28})?{ext:"oga",mime:"audio/ogg"}:h([83,112,101,101,120,32,32],{offset:28})?{ext:"spx",mime:"audio/ogg"}:h([1,118,111,114,98,105,115],{offset:28})?{ext:"ogg",mime:"audio/ogg"}:{ext:"ogx",mime:"application/ogg"};if(h([102,76,97,67]))return{ext:"flac",mime:"audio/x-flac"};if(h([77,65,67,32]))return{ext:"ape",mime:"audio/ape"};if(h([119,118,112,107]))return{ext:"wv",mime:"audio/wavpack"};if(h([35,33,65,77,82,10]))return{ext:"amr",mime:"audio/amr"};if(h([37,80,68,70]))return{ext:"pdf",mime:"application/pdf"};if(h([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if((o[0]===67||o[0]===70)&&h([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(h([123,92,114,116,102]))return{ext:"rtf",mime:"application/rtf"};if(h([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(h([119,79,70,70])&&(h([0,1,0,0],{offset:4})||h([79,84,84,79],{offset:4})))return{ext:"woff",mime:"font/woff"};if(h([119,79,70,50])&&(h([0,1,0,0],{offset:4})||h([79,84,84,79],{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(h([76,80],{offset:34})&&(h([0,0,1],{offset:8})||h([1,0,2],{offset:8})||h([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(h([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(h([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(h([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(h([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(h([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(h([37,33]))return{ext:"ps",mime:"application/postscript"};if(h([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(h([83,81,76,105]))return{ext:"sqlite",mime:"application/x-sqlite3"};if(h([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(h([67,114,50,52]))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(h([77,83,67,70])||h([73,83,99,40]))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(h([33,60,97,114,99,104,62,10,100,101,98,105,97,110,45,98,105,110,97,114,121]))return{ext:"deb",mime:"application/x-deb"};if(h([33,60,97,114,99,104,62]))return{ext:"ar",mime:"application/x-unix-archive"};if(h([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(h([31,160])||h([31,157]))return{ext:"Z",mime:"application/x-compress"};if(h([76,90,73,80]))return{ext:"lz",mime:"application/x-lzip"};if(h([208,207,17,224,161,177,26,225]))return{ext:"msi",mime:"application/x-msi"};if(h([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(h([71],{offset:4})&&(h([71],{offset:192})||h([71],{offset:196})))return{ext:"mts",mime:"video/mp2t"};if(h([66,76,69,78,68,69,82]))return{ext:"blend",mime:"application/x-blender"};if(h([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(h([0,0,0,12,106,80,32,32,13,10,135,10])){if(h([106,112,50,32],{offset:20}))return{ext:"jp2",mime:"image/jp2"};if(h([106,112,120,32],{offset:20}))return{ext:"jpx",mime:"image/jpx"};if(h([106,112,109,32],{offset:20}))return{ext:"jpm",mime:"image/jpm"};if(h([109,106,112,50],{offset:20}))return{ext:"mj2",mime:"image/mj2"}}if(h([70,79,82,77]))return{ext:"aif",mime:"audio/aiff"};if(d("<?xml "))return{ext:"xml",mime:"application/xml"};if(h([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(h([102,116,121,112],{offset:4})){if(h([109,105,102,49],{offset:8}))return{ext:"heic",mime:"image/heif"};if(h([109,115,102,49],{offset:8}))return{ext:"heic",mime:"image/heif-sequence"};if(h([104,101,105,99],{offset:8})||h([104,101,105,120],{offset:8}))return{ext:"heic",mime:"image/heic"};if(h([104,101,118,99],{offset:8})||h([104,101,118,120],{offset:8}))return{ext:"heic",mime:"image/heic-sequence"}}return h([171,75,84,88,32,49,49,187,13,10,26,10])?{ext:"ktx",mime:"image/ktx"}:h([68,73,67,77],{offset:128})?{ext:"dcm",mime:"application/dicom"}:h([77,80,43])?{ext:"mpc",mime:"audio/x-musepack"}:h([77,80,67,75])?{ext:"mpc",mime:"audio/x-musepack"}:h([66,69,71,73,78,58])?{ext:"ics",mime:"text/calendar"}:h([103,108,84,70,2,0,0,0])?{ext:"glb",mime:"model/gltf-binary"}:h([212,195,178,161])||h([161,178,195,212])?{ext:"pcap",mime:"application/vnd.tcpdump.pcap"}:null};module.exports=fileType,module.exports.default=fileType,Object.defineProperty(fileType,"minimumBytes",{value:4100}),module.exports.stream=readableStream=>new Promise((resolve,reject)=>{const stream=eval("require")("stream");readableStream.once("readable",()=>{const s=new stream.PassThrough,o=readableStream.read(module.exports.minimumBytes)||readableStream.read();try{s.fileType=fileType(o)}catch(h){reject(h)}readableStream.unshift(o),stream.pipeline?resolve(stream.pipeline(readableStream,s,()=>{})):resolve(readableStream.pipe(s))})})}(fileType)),fileType.exports}var hasRequiredImageType;function requireImageType(){if(hasRequiredImageType)return imageType$1.exports;hasRequiredImageType=1;const s=requireFileType(),o=new Set(["jpg","png","gif","webp","flif","cr2","tif","bmp","jxr","psd","ico","bpg","jp2","jpm","jpx","heic","cur","dcm"]),h=d=>{const g=s(d);return o.has(g&&g.ext)?g:null};return imageType$1.exports=h,imageType$1.exports.default=h,Object.defineProperty(h,"minimumBytes",{value:s.minimumBytes}),imageType$1.exports}var imageTypeExports=requireImageType();const imageType=getDefaultExportFromCjs(imageTypeExports);function guessStripByteCounts(s){if(s.compression!==1)throw new Error("missing mandatory StripByteCounts field in compressed image");const o=s.rowsPerStrip*s.width*s.samplesPerPixel*(s.bitsPerSample/8);return new Array(s.stripOffsets.length).fill(o)}function applyHorizontalDifferencing8Bit(s,o,h){let d=0;for(;d<s.length;){for(let g=h;g<o*h;g+=h)for(let _=0;_<h;_++)s[d+g+_]=s[d+g+_]+s[d+g-(h-_)]&255;d+=o*h}}function applyHorizontalDifferencing16Bit(s,o,h){let d=0;for(;d<s.length;){for(let g=h;g<o*h;g+=h)for(let _=0;_<h;_++)s[d+g+_]=s[d+g+_]+s[d+g-(h-_)]&65535;d+=o*h}}const tagsById$2={33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",36864:"ExifVersion",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBiasValue",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37386:"FocalLength",37396:"SubjectArea",37500:"MakerNote",37510:"UserComment",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",40964:"RelatedSoundFile",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",42240:"Gamma"},tagsByName$2={};for(let s in tagsById$2)tagsByName$2[tagsById$2[s]]=Number(s);const exif=Object.freeze(Object.defineProperty({__proto__:null,tagsById:tagsById$2,tagsByName:tagsByName$2},Symbol.toStringTag,{value:"Module"})),tagsById$1={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},tagsByName$1={};for(let s in tagsById$1)tagsByName$1[tagsById$1[s]]=Number(s);const gps=Object.freeze(Object.defineProperty({__proto__:null,tagsById:tagsById$1,tagsByName:tagsByName$1},Symbol.toStringTag,{value:"Module"})),tagsById={254:"NewSubfileType",255:"SubfileType",256:"ImageWidth",257:"ImageLength",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",263:"Threshholding",264:"CellWidth",265:"CellLength",266:"FillOrder",270:"ImageDescription",271:"Make",272:"Model",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",280:"MinSampleValue",281:"MaxSampleValue",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",288:"FreeOffsets",289:"FreeByteCounts",290:"GrayResponseUnit",291:"GrayResponseCurve",296:"ResolutionUnit",305:"Software",306:"DateTime",315:"Artist",316:"HostComputer",320:"ColorMap",338:"ExtraSamples",33432:"Copyright",269:"DocumentName",285:"PageName",286:"XPosition",287:"YPosition",292:"T4Options",293:"T6Options",297:"PageNumber",301:"TransferFunction",317:"Predictor",318:"WhitePoint",319:"PrimaryChromaticities",321:"HalftoneHints",322:"TileWidth",323:"TileLength",324:"TileOffsets",325:"TileByteCounts",326:"BadFaxLines",327:"CleanFaxData",328:"ConsecutiveBadFaxLines",330:"SubIFDs",332:"InkSet",333:"InkNames",334:"NumberOfInks",336:"DotRange",337:"TargetPrinter",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",342:"TransferRange",343:"ClipPath",344:"XClipPathUnits",345:"YClipPathUnits",346:"Indexed",347:"JPEGTables",351:"OPIProxy",400:"GlobalParametersIFD",401:"ProfileType",402:"FaxProfile",403:"CodingMethods",404:"VersionYear",405:"ModeNumber",433:"Decode",434:"DefaultImageColor",512:"JPEGProc",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",515:"JPEGRestartInterval",517:"JPEGLosslessPredictors",518:"JPEGPointTransforms",519:"JPEGQTables",520:"JPEGDCTables",521:"JPEGACTables",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite",559:"StripRowCounts",700:"XMP",32781:"ImageID",34732:"ImageLayer",32932:"WangAnnotatio",33445:"MDFileTag",33446:"MDScalePixel",33447:"MDColorTable",33448:"MDLabName",33449:"MDSampleInfo",33450:"MDPrepDate",33451:"MDPrepTime",33452:"MDFileUnits",33550:"ModelPixelScaleTag",33723:"IPTC",33918:"INGRPacketDataTag",33919:"INGRFlagRegisters",33920:"IrasBTransformationMatrix",33922:"ModelTiepointTag",34264:"ModelTransformationTag",34377:"Photoshop",34665:"ExifIFD",34675:"ICCProfile",34735:"GeoKeyDirectoryTag",34736:"GeoDoubleParamsTag",34737:"GeoAsciiParamsTag",34853:"GPSIFD",34908:"HylaFAXFaxRecvParams",34909:"HylaFAXFaxSubAddress",34910:"HylaFAXFaxRecvTime",37724:"ImageSourceData",40965:"InteroperabilityIFD",42112:"GDAL_METADATA",42113:"GDAL_NODATA",50215:"OceScanjobDescription",50216:"OceApplicationSelector",50217:"OceIdentificationNumber",50218:"OceImageLogicCharacteristics",50706:"DNGVersion",50707:"DNGBackwardVersion",50708:"UniqueCameraModel",50709:"LocalizedCameraModel",50710:"CFAPlaneColor",50711:"CFALayout",50712:"LinearizationTable",50713:"BlackLevelRepeatDim",50714:"BlackLevel",50715:"BlackLevelDeltaH",50716:"BlackLevelDeltaV",50717:"WhiteLevel",50718:"DefaultScale",50719:"DefaultCropOrigin",50720:"DefaultCropSize",50721:"ColorMatrix1",50722:"ColorMatrix2",50723:"CameraCalibration1",50724:"CameraCalibration2",50725:"ReductionMatrix1",50726:"ReductionMatrix2",50727:"AnalogBalance",50728:"AsShotNeutral",50729:"AsShotWhiteXY",50730:"BaselineExposure",50731:"BaselineNoise",50732:"BaselineSharpness",50733:"BayerGreenSplit",50734:"LinearResponseLimit",50735:"CameraSerialNumber",50736:"LensInfo",50737:"ChromaBlurRadius",50738:"AntiAliasStrength",50740:"DNGPrivateData",50741:"MakerNoteSafety",50778:"CalibrationIlluminant1",50779:"CalibrationIlluminant2",50780:"BestQualityScale",50784:"AliasLayerMetadata"},tagsByName={};for(let s in tagsById)tagsByName[tagsById[s]]=Number(s);const standard=Object.freeze(Object.defineProperty({__proto__:null,tagsById,tagsByName},Symbol.toStringTag,{value:"Module"})),tags={standard,exif,gps};class IFD{constructor(o){if(!o)throw new Error("missing kind");this.data=new Uint8Array,this.fields=new Map,this.kind=o,this._hasMap=!1,this._map={}}get(o){if(typeof o=="number")return this.fields.get(o);if(typeof o=="string")return this.fields.get(tags[this.kind].tagsByName[o]);throw new Error("expected a number or string")}get map(){if(!this._hasMap){const o=tags[this.kind].tagsById;for(let h of this.fields.keys())o[h]&&(this._map[o[h]]=this.fields.get(h));this._hasMap=!0}return this._map}}let types=new Map([[1,[1,readByte]],[2,[1,readASCII]],[3,[2,readShort]],[4,[4,readLong]],[5,[8,readRational]],[6,[1,readSByte]],[7,[1,readByte]],[8,[2,readSShort]],[9,[4,readSLong]],[10,[8,readSRational]],[11,[4,readFloat]],[12,[8,readDouble]]]);function getByteLength(s,o){const h=types.get(s);if(!h)throw new Error(`type not found: ${s}`);return h[0]*o}function readData(s,o,h){const d=types.get(o);if(!d)throw new Error(`type not found: ${o}`);return d[1](s,h)}function readByte(s,o){if(o===1)return s.readUint8();let h=new Uint8Array(o);for(let d=0;d<o;d++)h[d]=s.readUint8();return h}function readASCII(s,o){let h=[],d="";for(let g=0;g<o;g++){let _=String.fromCharCode(s.readUint8());_==="\0"?(h.push(d),d=""):d+=_}return h.length===1?h[0]:h}function readShort(s,o){if(o===1)return s.readUint16();let h=new Uint16Array(o);for(let d=0;d<o;d++)h[d]=s.readUint16();return h}function readLong(s,o){if(o===1)return s.readUint32();let h=new Uint32Array(o);for(let d=0;d<o;d++)h[d]=s.readUint32();return h}function readRational(s,o){if(o===1)return s.readUint32()/s.readUint32();let h=new Array(o);for(let d=0;d<o;d++)h[d]=s.readUint32()/s.readUint32();return h}function readSByte(s,o){if(o===1)return s.readInt8();let h=new Int8Array(o);for(let d=0;d<o;d++)h[d]=s.readInt8();return h}function readSShort(s,o){if(o===1)return s.readInt16();let h=new Int16Array(o);for(let d=0;d<o;d++)h[d]=s.readInt16();return h}function readSLong(s,o){if(o===1)return s.readInt32();let h=new Int32Array(o);for(let d=0;d<o;d++)h[d]=s.readInt32();return h}function readSRational(s,o){if(o===1)return s.readInt32()/s.readInt32();let h=new Array(o);for(let d=0;d<o;d++)h[d]=s.readInt32()/s.readInt32();return h}function readFloat(s,o){if(o===1)return s.readFloat32();let h=new Float32Array(o);for(let d=0;d<o;d++)h[d]=s.readFloat32();return h}function readDouble(s,o){if(o===1)return s.readFloat64();let h=new Float64Array(o);for(let d=0;d<o;d++)h[d]=s.readFloat64();return h}const CLEAR_CODE=256,EOI_CODE=257,TABLE_START=258,MIN_BIT_LENGTH=9;let stringTable=[];function initializeStringTable(){if(stringTable.length===0){for(let o=0;o<256;o++)stringTable.push([o]);const s=[];for(let o=256;o<4096;o++)stringTable.push(s)}}const andTable=[511,1023,2047,4095],bitJumps=[0,0,0,0,0,0,0,0,0,511,1023,2047,4095];class LzwDecoder{constructor(o){this.nextData=0,this.nextBits=0,this.bytePointer=0,this.tableLength=TABLE_START,this.currentBitLength=MIN_BIT_LENGTH,this.stripArray=new Uint8Array(o.buffer,o.byteOffset,o.byteLength),this.outData=new IOBuffer(o.byteLength),this.initializeTable()}decode(){let o=0,h=0;for(;(o=this.getNextCode())!==EOI_CODE;)if(o===CLEAR_CODE){if(this.initializeTable(),o=this.getNextCode(),o===EOI_CODE)break;this.writeString(this.stringFromCode(o)),h=o}else if(this.isInTable(o))this.writeString(this.stringFromCode(o)),this.addStringToTable(this.stringFromCode(h).concat(this.stringFromCode(o)[0])),h=o;else{const g=this.stringFromCode(h).concat(this.stringFromCode(h)[0]);this.writeString(g),this.addStringToTable(g),h=o}const d=this.outData.toArray();return new DataView(d.buffer,d.byteOffset,d.byteLength)}initializeTable(){initializeStringTable(),this.tableLength=TABLE_START,this.currentBitLength=MIN_BIT_LENGTH}writeString(o){this.outData.writeBytes(o)}stringFromCode(o){return stringTable[o]}isInTable(o){return o<this.tableLength}addStringToTable(o){if(stringTable[this.tableLength++]=o,stringTable.length>4096)throw stringTable=[],new Error("LZW decoding error. Please open an issue at https://github.com/image-js/tiff/issues/new/choose (include a test image).");this.tableLength===bitJumps[this.currentBitLength]&&this.currentBitLength++}getNextCode(){this.nextData=this.nextData<<8|this.stripArray[this.bytePointer++]&255,this.nextBits+=8,this.nextBits<this.currentBitLength&&(this.nextData=this.nextData<<8|this.stripArray[this.bytePointer++]&255,this.nextBits+=8);const o=this.nextData>>this.nextBits-this.currentBitLength&andTable[this.currentBitLength-9];return this.nextBits-=this.currentBitLength,this.bytePointer>this.stripArray.length?257:o}}function decompressLzw(s){return new LzwDecoder(s).decode()}const dateTimeRegex=/^(\d{4}):(\d{2}):(\d{2}) (\d{2}):(\d{2}):(\d{2})$/;class TiffIfd extends IFD{constructor(){super("standard")}get size(){return this.width*this.height}get width(){return this.imageWidth}get height(){return this.imageLength}get components(){return this.samplesPerPixel}get date(){let o=new Date,h=dateTimeRegex.exec(this.dateTime);if(h===null)throw new Error(`invalid dateTime: ${this.dateTime}`);return o.setFullYear(Number(h[1]),Number(h[2])-1,Number(h[3])),o.setHours(Number(h[4]),Number(h[5]),Number(h[6])),o}get newSubfileType(){return this.get("NewSubfileType")}get imageWidth(){return this.get("ImageWidth")}get imageLength(){return this.get("ImageLength")}get bitsPerSample(){const o=this.get("BitsPerSample");return o&&typeof o!="number"?o[0]:o}get alpha(){const o=this.extraSamples;return o?o[0]!==0:!1}get associatedAlpha(){const o=this.extraSamples;return o?o[0]===1:!1}get extraSamples(){return alwaysArray(this.get("ExtraSamples"))}get compression(){return this.get("Compression")||1}get type(){return this.get("PhotometricInterpretation")}get fillOrder(){return this.get("FillOrder")||1}get documentName(){return this.get("DocumentName")}get imageDescription(){return this.get("ImageDescription")}get stripOffsets(){return alwaysArray(this.get("StripOffsets"))}get orientation(){return this.get("Orientation")}get samplesPerPixel(){return this.get("SamplesPerPixel")||1}get rowsPerStrip(){return this.get("RowsPerStrip")}get stripByteCounts(){return alwaysArray(this.get("StripByteCounts"))}get minSampleValue(){return this.get("MinSampleValue")||0}get maxSampleValue(){return this.get("MaxSampleValue")||Math.pow(2,this.bitsPerSample)-1}get xResolution(){return this.get("XResolution")}get yResolution(){return this.get("YResolution")}get planarConfiguration(){return this.get("PlanarConfiguration")||1}get resolutionUnit(){return this.get("ResolutionUnit")||2}get dateTime(){return this.get("DateTime")}get predictor(){return this.get("Predictor")||1}get sampleFormat(){return this.get("SampleFormat")||1}get sMinSampleValue(){return this.get("SMinSampleValue")||this.minSampleValue}get sMaxSampleValue(){return this.get("SMaxSampleValue")||this.maxSampleValue}get palette(){const o=2**this.bitsPerSample,h=this.get("ColorMap");if(!h)return;if(h.length!==3*o)throw new Error(`ColorMap size must be ${o}`);const d=[];for(let g=0;g<o;g++)d.push([h[g],h[g+o],h[g+2*o]]);return d}}function alwaysArray(s){return typeof s=="number"?[s]:s}function zero$1(s){let o=s.length;for(;--o>=0;)s[o]=0}const MIN_MATCH$1=3,MAX_MATCH$1=258,LENGTH_CODES$1=29,LITERALS$1=256,L_CODES$1=LITERALS$1+1+LENGTH_CODES$1,D_CODES$1=30,DIST_CODE_LEN=512,static_ltree=new Array((L_CODES$1+2)*2);zero$1(static_ltree);const static_dtree=new Array(D_CODES$1*2);zero$1(static_dtree);const _dist_code=new Array(DIST_CODE_LEN);zero$1(_dist_code);const _length_code=new Array(MAX_MATCH$1-MIN_MATCH$1+1);zero$1(_length_code);const base_length=new Array(LENGTH_CODES$1);zero$1(base_length);const base_dist=new Array(D_CODES$1);zero$1(base_dist);const adler32=(s,o,h,d)=>{let g=s&65535|0,_=s>>>16&65535|0,b=0;for(;h!==0;){b=h>2e3?2e3:h,h-=b;do g=g+o[d++]|0,_=_+g|0;while(--b);g%=65521,_%=65521}return g|_<<16|0};var adler32_1$1=adler32;const makeTable=()=>{let s,o=[];for(var h=0;h<256;h++){s=h;for(var d=0;d<8;d++)s=s&1?3988292384^s>>>1:s>>>1;o[h]=s}return o},crcTable=new Uint32Array(makeTable()),crc32=(s,o,h,d)=>{const g=crcTable,_=d+h;s^=-1;for(let b=d;b<_;b++)s=s>>>8^g[(s^o[b])&255];return s^-1};var crc32_1$1=crc32,messages$1={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},constants$2={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const _has=(s,o)=>Object.prototype.hasOwnProperty.call(s,o);var assign=function(s){const o=Array.prototype.slice.call(arguments,1);for(;o.length;){const h=o.shift();if(h){if(typeof h!="object")throw new TypeError(h+"must be non-object");for(const d in h)_has(h,d)&&(s[d]=h[d])}}return s},flattenChunks=s=>{let o=0;for(let d=0,g=s.length;d<g;d++)o+=s[d].length;const h=new Uint8Array(o);for(let d=0,g=0,_=s.length;d<_;d++){let b=s[d];h.set(b,g),g+=b.length}return h},common$1={assign,flattenChunks};let STR_APPLY_UIA_OK=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(s){STR_APPLY_UIA_OK=!1}const _utf8len=new Uint8Array(256);for(let s=0;s<256;s++)_utf8len[s]=s>=252?6:s>=248?5:s>=240?4:s>=224?3:s>=192?2:1;_utf8len[254]=_utf8len[254]=1;var string2buf=s=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(s);let o,h,d,g,_,b=s.length,$=0;for(g=0;g<b;g++)h=s.charCodeAt(g),(h&64512)===55296&&g+1<b&&(d=s.charCodeAt(g+1),(d&64512)===56320&&(h=65536+(h-55296<<10)+(d-56320),g++)),$+=h<128?1:h<2048?2:h<65536?3:4;for(o=new Uint8Array($),_=0,g=0;_<$;g++)h=s.charCodeAt(g),(h&64512)===55296&&g+1<b&&(d=s.charCodeAt(g+1),(d&64512)===56320&&(h=65536+(h-55296<<10)+(d-56320),g++)),h<128?o[_++]=h:h<2048?(o[_++]=192|h>>>6,o[_++]=128|h&63):h<65536?(o[_++]=224|h>>>12,o[_++]=128|h>>>6&63,o[_++]=128|h&63):(o[_++]=240|h>>>18,o[_++]=128|h>>>12&63,o[_++]=128|h>>>6&63,o[_++]=128|h&63);return o};const buf2binstring=(s,o)=>{if(o<65534&&s.subarray&&STR_APPLY_UIA_OK)return String.fromCharCode.apply(null,s.length===o?s:s.subarray(0,o));let h="";for(let d=0;d<o;d++)h+=String.fromCharCode(s[d]);return h};var buf2string=(s,o)=>{const h=o||s.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(s.subarray(0,o));let d,g;const _=new Array(h*2);for(g=0,d=0;d<h;){let b=s[d++];if(b<128){_[g++]=b;continue}let $=_utf8len[b];if($>4){_[g++]=65533,d+=$-1;continue}for(b&=$===2?31:$===3?15:7;$>1&&d<h;)b=b<<6|s[d++]&63,$--;if($>1){_[g++]=65533;continue}b<65536?_[g++]=b:(b-=65536,_[g++]=55296|b>>10&1023,_[g++]=56320|b&1023)}return buf2binstring(_,g)},utf8border=(s,o)=>{o=o||s.length,o>s.length&&(o=s.length);let h=o-1;for(;h>=0&&(s[h]&192)===128;)h--;return h<0||h===0?o:h+_utf8len[s[h]]>o?h:o},strings$1={string2buf,buf2string,utf8border};function ZStream(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var zstream$1=ZStream;const BAD$1=16209,TYPE$1=16191;var inffast$1=function s(o,h){let d,g,_,b,$,et,tt,rt,nt,At,at,lt,gt,_t,ct,pt,dt,mt,Qt,xt,bt,kt,Lt,Ht;const Pt=o.state;d=o.next_in,Lt=o.input,g=d+(o.avail_in-5),_=o.next_out,Ht=o.output,b=_-(h-o.avail_out),$=_+(o.avail_out-257),et=Pt.dmax,tt=Pt.wsize,rt=Pt.whave,nt=Pt.wnext,At=Pt.window,at=Pt.hold,lt=Pt.bits,gt=Pt.lencode,_t=Pt.distcode,ct=(1<<Pt.lenbits)-1,pt=(1<<Pt.distbits)-1;t:do{lt<15&&(at+=Lt[d++]<<lt,lt+=8,at+=Lt[d++]<<lt,lt+=8),dt=gt[at&ct];e:for(;;){if(mt=dt>>>24,at>>>=mt,lt-=mt,mt=dt>>>16&255,mt===0)Ht[_++]=dt&65535;else if(mt&16){Qt=dt&65535,mt&=15,mt&&(lt<mt&&(at+=Lt[d++]<<lt,lt+=8),Qt+=at&(1<<mt)-1,at>>>=mt,lt-=mt),lt<15&&(at+=Lt[d++]<<lt,lt+=8,at+=Lt[d++]<<lt,lt+=8),dt=_t[at&pt];r:for(;;){if(mt=dt>>>24,at>>>=mt,lt-=mt,mt=dt>>>16&255,mt&16){if(xt=dt&65535,mt&=15,lt<mt&&(at+=Lt[d++]<<lt,lt+=8,lt<mt&&(at+=Lt[d++]<<lt,lt+=8)),xt+=at&(1<<mt)-1,xt>et){o.msg="invalid distance too far back",Pt.mode=BAD$1;break t}if(at>>>=mt,lt-=mt,mt=_-b,xt>mt){if(mt=xt-mt,mt>rt&&Pt.sane){o.msg="invalid distance too far back",Pt.mode=BAD$1;break t}if(bt=0,kt=At,nt===0){if(bt+=tt-mt,mt<Qt){Qt-=mt;do Ht[_++]=At[bt++];while(--mt);bt=_-xt,kt=Ht}}else if(nt<mt){if(bt+=tt+nt-mt,mt-=nt,mt<Qt){Qt-=mt;do Ht[_++]=At[bt++];while(--mt);if(bt=0,nt<Qt){mt=nt,Qt-=mt;do Ht[_++]=At[bt++];while(--mt);bt=_-xt,kt=Ht}}}else if(bt+=nt-mt,mt<Qt){Qt-=mt;do Ht[_++]=At[bt++];while(--mt);bt=_-xt,kt=Ht}for(;Qt>2;)Ht[_++]=kt[bt++],Ht[_++]=kt[bt++],Ht[_++]=kt[bt++],Qt-=3;Qt&&(Ht[_++]=kt[bt++],Qt>1&&(Ht[_++]=kt[bt++]))}else{bt=_-xt;do Ht[_++]=Ht[bt++],Ht[_++]=Ht[bt++],Ht[_++]=Ht[bt++],Qt-=3;while(Qt>2);Qt&&(Ht[_++]=Ht[bt++],Qt>1&&(Ht[_++]=Ht[bt++]))}}else if(mt&64){o.msg="invalid distance code",Pt.mode=BAD$1;break t}else{dt=_t[(dt&65535)+(at&(1<<mt)-1)];continue r}break}}else if(mt&64)if(mt&32){Pt.mode=TYPE$1;break t}else{o.msg="invalid literal/length code",Pt.mode=BAD$1;break t}else{dt=gt[(dt&65535)+(at&(1<<mt)-1)];continue e}break}}while(d<g&&_<$);Qt=lt>>3,d-=Qt,lt-=Qt<<3,at&=(1<<lt)-1,o.next_in=d,o.next_out=_,o.avail_in=d<g?5+(g-d):5-(d-g),o.avail_out=_<$?257+($-_):257-(_-$),Pt.hold=at,Pt.bits=lt};const MAXBITS=15,ENOUGH_LENS$1=852,ENOUGH_DISTS$1=592,CODES$1=0,LENS$1=1,DISTS$1=2,lbase=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),lext=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),dbase=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),dext=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),inflate_table=(s,o,h,d,g,_,b,$)=>{const et=$.bits;let tt=0,rt=0,nt=0,At=0,at=0,lt=0,gt=0,_t=0,ct=0,pt=0,dt,mt,Qt,xt,bt,kt=null,Lt;const Ht=new Uint16Array(MAXBITS+1),Pt=new Uint16Array(MAXBITS+1);let jt=null,Vt,Xt,nr;for(tt=0;tt<=MAXBITS;tt++)Ht[tt]=0;for(rt=0;rt<d;rt++)Ht[o[h+rt]]++;for(at=et,At=MAXBITS;At>=1&&Ht[At]===0;At--);if(at>At&&(at=At),At===0)return g[_++]=1<<24|64<<16|0,g[_++]=1<<24|64<<16|0,$.bits=1,0;for(nt=1;nt<At&&Ht[nt]===0;nt++);for(at<nt&&(at=nt),_t=1,tt=1;tt<=MAXBITS;tt++)if(_t<<=1,_t-=Ht[tt],_t<0)return-1;if(_t>0&&(s===CODES$1||At!==1))return-1;for(Pt[1]=0,tt=1;tt<MAXBITS;tt++)Pt[tt+1]=Pt[tt]+Ht[tt];for(rt=0;rt<d;rt++)o[h+rt]!==0&&(b[Pt[o[h+rt]]++]=rt);if(s===CODES$1?(kt=jt=b,Lt=20):s===LENS$1?(kt=lbase,jt=lext,Lt=257):(kt=dbase,jt=dext,Lt=0),pt=0,rt=0,tt=nt,bt=_,lt=at,gt=0,Qt=-1,ct=1<<at,xt=ct-1,s===LENS$1&&ct>ENOUGH_LENS$1||s===DISTS$1&&ct>ENOUGH_DISTS$1)return 1;for(;;){Vt=tt-gt,b[rt]+1<Lt?(Xt=0,nr=b[rt]):b[rt]>=Lt?(Xt=jt[b[rt]-Lt],nr=kt[b[rt]-Lt]):(Xt=96,nr=0),dt=1<<tt-gt,mt=1<<lt,nt=mt;do mt-=dt,g[bt+(pt>>gt)+mt]=Vt<<24|Xt<<16|nr|0;while(mt!==0);for(dt=1<<tt-1;pt&dt;)dt>>=1;if(dt!==0?(pt&=dt-1,pt+=dt):pt=0,rt++,--Ht[tt]===0){if(tt===At)break;tt=o[h+b[rt]]}if(tt>at&&(pt&xt)!==Qt){for(gt===0&&(gt=at),bt+=nt,lt=tt-gt,_t=1<<lt;lt+gt<At&&(_t-=Ht[lt+gt],!(_t<=0));)lt++,_t<<=1;if(ct+=1<<lt,s===LENS$1&&ct>ENOUGH_LENS$1||s===DISTS$1&&ct>ENOUGH_DISTS$1)return 1;Qt=pt&xt,g[Qt]=at<<24|lt<<16|bt-_|0}}return pt!==0&&(g[bt+pt]=tt-gt<<24|64<<16|0),$.bits=at,0};var inftrees$1=inflate_table;const CODES=0,LENS=1,DISTS=2,{Z_FINISH:Z_FINISH$1,Z_BLOCK,Z_TREES,Z_OK:Z_OK$1,Z_STREAM_END:Z_STREAM_END$1,Z_NEED_DICT:Z_NEED_DICT$1,Z_STREAM_ERROR:Z_STREAM_ERROR$1,Z_DATA_ERROR:Z_DATA_ERROR$1,Z_MEM_ERROR:Z_MEM_ERROR$1,Z_BUF_ERROR,Z_DEFLATED}=constants$2,HEAD=16180,FLAGS=16181,TIME=16182,OS=16183,EXLEN=16184,EXTRA=16185,NAME=16186,COMMENT=16187,HCRC=16188,DICTID=16189,DICT=16190,TYPE=16191,TYPEDO=16192,STORED=16193,COPY_=16194,COPY=16195,TABLE=16196,LENLENS=16197,CODELENS=16198,LEN_=16199,LEN=16200,LENEXT=16201,DIST=16202,DISTEXT=16203,MATCH=16204,LIT=16205,CHECK=16206,LENGTH=16207,DONE=16208,BAD=16209,MEM=16210,SYNC=16211,ENOUGH_LENS=852,ENOUGH_DISTS=592,MAX_WBITS=15,DEF_WBITS=MAX_WBITS,zswap32=s=>(s>>>24&255)+(s>>>8&65280)+((s&65280)<<8)+((s&255)<<24);function InflateState(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const inflateStateCheck=s=>{if(!s)return 1;const o=s.state;return!o||o.strm!==s||o.mode<HEAD||o.mode>SYNC?1:0},inflateResetKeep=s=>{if(inflateStateCheck(s))return Z_STREAM_ERROR$1;const o=s.state;return s.total_in=s.total_out=o.total=0,s.msg="",o.wrap&&(s.adler=o.wrap&1),o.mode=HEAD,o.last=0,o.havedict=0,o.flags=-1,o.dmax=32768,o.head=null,o.hold=0,o.bits=0,o.lencode=o.lendyn=new Int32Array(ENOUGH_LENS),o.distcode=o.distdyn=new Int32Array(ENOUGH_DISTS),o.sane=1,o.back=-1,Z_OK$1},inflateReset=s=>{if(inflateStateCheck(s))return Z_STREAM_ERROR$1;const o=s.state;return o.wsize=0,o.whave=0,o.wnext=0,inflateResetKeep(s)},inflateReset2=(s,o)=>{let h;if(inflateStateCheck(s))return Z_STREAM_ERROR$1;const d=s.state;return o<0?(h=0,o=-o):(h=(o>>4)+5,o<48&&(o&=15)),o&&(o<8||o>15)?Z_STREAM_ERROR$1:(d.window!==null&&d.wbits!==o&&(d.window=null),d.wrap=h,d.wbits=o,inflateReset(s))},inflateInit2=(s,o)=>{if(!s)return Z_STREAM_ERROR$1;const h=new InflateState;s.state=h,h.strm=s,h.window=null,h.mode=HEAD;const d=inflateReset2(s,o);return d!==Z_OK$1&&(s.state=null),d},inflateInit=s=>inflateInit2(s,DEF_WBITS);let virgin=!0,lenfix,distfix;const fixedtables=s=>{if(virgin){lenfix=new Int32Array(512),distfix=new Int32Array(32);let o=0;for(;o<144;)s.lens[o++]=8;for(;o<256;)s.lens[o++]=9;for(;o<280;)s.lens[o++]=7;for(;o<288;)s.lens[o++]=8;for(inftrees$1(LENS,s.lens,0,288,lenfix,0,s.work,{bits:9}),o=0;o<32;)s.lens[o++]=5;inftrees$1(DISTS,s.lens,0,32,distfix,0,s.work,{bits:5}),virgin=!1}s.lencode=lenfix,s.lenbits=9,s.distcode=distfix,s.distbits=5},updatewindow=(s,o,h,d)=>{let g;const _=s.state;return _.window===null&&(_.wsize=1<<_.wbits,_.wnext=0,_.whave=0,_.window=new Uint8Array(_.wsize)),d>=_.wsize?(_.window.set(o.subarray(h-_.wsize,h),0),_.wnext=0,_.whave=_.wsize):(g=_.wsize-_.wnext,g>d&&(g=d),_.window.set(o.subarray(h-d,h-d+g),_.wnext),d-=g,d?(_.window.set(o.subarray(h-d,h),0),_.wnext=d,_.whave=_.wsize):(_.wnext+=g,_.wnext===_.wsize&&(_.wnext=0),_.whave<_.wsize&&(_.whave+=g))),0},inflate$2=(s,o)=>{let h,d,g,_,b,$,et,tt,rt,nt,At,at,lt,gt,_t=0,ct,pt,dt,mt,Qt,xt,bt,kt;const Lt=new Uint8Array(4);let Ht,Pt;const jt=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(inflateStateCheck(s)||!s.output||!s.input&&s.avail_in!==0)return Z_STREAM_ERROR$1;h=s.state,h.mode===TYPE&&(h.mode=TYPEDO),b=s.next_out,g=s.output,et=s.avail_out,_=s.next_in,d=s.input,$=s.avail_in,tt=h.hold,rt=h.bits,nt=$,At=et,kt=Z_OK$1;t:for(;;)switch(h.mode){case HEAD:if(h.wrap===0){h.mode=TYPEDO;break}for(;rt<16;){if($===0)break t;$--,tt+=d[_++]<<rt,rt+=8}if(h.wrap&2&&tt===35615){h.wbits===0&&(h.wbits=15),h.check=0,Lt[0]=tt&255,Lt[1]=tt>>>8&255,h.check=crc32_1$1(h.check,Lt,2,0),tt=0,rt=0,h.mode=FLAGS;break}if(h.head&&(h.head.done=!1),!(h.wrap&1)||(((tt&255)<<8)+(tt>>8))%31){s.msg="incorrect header check",h.mode=BAD;break}if((tt&15)!==Z_DEFLATED){s.msg="unknown compression method",h.mode=BAD;break}if(tt>>>=4,rt-=4,bt=(tt&15)+8,h.wbits===0&&(h.wbits=bt),bt>15||bt>h.wbits){s.msg="invalid window size",h.mode=BAD;break}h.dmax=1<<h.wbits,h.flags=0,s.adler=h.check=1,h.mode=tt&512?DICTID:TYPE,tt=0,rt=0;break;case FLAGS:for(;rt<16;){if($===0)break t;$--,tt+=d[_++]<<rt,rt+=8}if(h.flags=tt,(h.flags&255)!==Z_DEFLATED){s.msg="unknown compression method",h.mode=BAD;break}if(h.flags&57344){s.msg="unknown header flags set",h.mode=BAD;break}h.head&&(h.head.text=tt>>8&1),h.flags&512&&h.wrap&4&&(Lt[0]=tt&255,Lt[1]=tt>>>8&255,h.check=crc32_1$1(h.check,Lt,2,0)),tt=0,rt=0,h.mode=TIME;case TIME:for(;rt<32;){if($===0)break t;$--,tt+=d[_++]<<rt,rt+=8}h.head&&(h.head.time=tt),h.flags&512&&h.wrap&4&&(Lt[0]=tt&255,Lt[1]=tt>>>8&255,Lt[2]=tt>>>16&255,Lt[3]=tt>>>24&255,h.check=crc32_1$1(h.check,Lt,4,0)),tt=0,rt=0,h.mode=OS;case OS:for(;rt<16;){if($===0)break t;$--,tt+=d[_++]<<rt,rt+=8}h.head&&(h.head.xflags=tt&255,h.head.os=tt>>8),h.flags&512&&h.wrap&4&&(Lt[0]=tt&255,Lt[1]=tt>>>8&255,h.check=crc32_1$1(h.check,Lt,2,0)),tt=0,rt=0,h.mode=EXLEN;case EXLEN:if(h.flags&1024){for(;rt<16;){if($===0)break t;$--,tt+=d[_++]<<rt,rt+=8}h.length=tt,h.head&&(h.head.extra_len=tt),h.flags&512&&h.wrap&4&&(Lt[0]=tt&255,Lt[1]=tt>>>8&255,h.check=crc32_1$1(h.check,Lt,2,0)),tt=0,rt=0}else h.head&&(h.head.extra=null);h.mode=EXTRA;case EXTRA:if(h.flags&1024&&(at=h.length,at>$&&(at=$),at&&(h.head&&(bt=h.head.extra_len-h.length,h.head.extra||(h.head.extra=new Uint8Array(h.head.extra_len)),h.head.extra.set(d.subarray(_,_+at),bt)),h.flags&512&&h.wrap&4&&(h.check=crc32_1$1(h.check,d,at,_)),$-=at,_+=at,h.length-=at),h.length))break t;h.length=0,h.mode=NAME;case NAME:if(h.flags&2048){if($===0)break t;at=0;do bt=d[_+at++],h.head&&bt&&h.length<65536&&(h.head.name+=String.fromCharCode(bt));while(bt&&at<$);if(h.flags&512&&h.wrap&4&&(h.check=crc32_1$1(h.check,d,at,_)),$-=at,_+=at,bt)break t}else h.head&&(h.head.name=null);h.length=0,h.mode=COMMENT;case COMMENT:if(h.flags&4096){if($===0)break t;at=0;do bt=d[_+at++],h.head&&bt&&h.length<65536&&(h.head.comment+=String.fromCharCode(bt));while(bt&&at<$);if(h.flags&512&&h.wrap&4&&(h.check=crc32_1$1(h.check,d,at,_)),$-=at,_+=at,bt)break t}else h.head&&(h.head.comment=null);h.mode=HCRC;case HCRC:if(h.flags&512){for(;rt<16;){if($===0)break t;$--,tt+=d[_++]<<rt,rt+=8}if(h.wrap&4&&tt!==(h.check&65535)){s.msg="header crc mismatch",h.mode=BAD;break}tt=0,rt=0}h.head&&(h.head.hcrc=h.flags>>9&1,h.head.done=!0),s.adler=h.check=0,h.mode=TYPE;break;case DICTID:for(;rt<32;){if($===0)break t;$--,tt+=d[_++]<<rt,rt+=8}s.adler=h.check=zswap32(tt),tt=0,rt=0,h.mode=DICT;case DICT:if(h.havedict===0)return s.next_out=b,s.avail_out=et,s.next_in=_,s.avail_in=$,h.hold=tt,h.bits=rt,Z_NEED_DICT$1;s.adler=h.check=1,h.mode=TYPE;case TYPE:if(o===Z_BLOCK||o===Z_TREES)break t;case TYPEDO:if(h.last){tt>>>=rt&7,rt-=rt&7,h.mode=CHECK;break}for(;rt<3;){if($===0)break t;$--,tt+=d[_++]<<rt,rt+=8}switch(h.last=tt&1,tt>>>=1,rt-=1,tt&3){case 0:h.mode=STORED;break;case 1:if(fixedtables(h),h.mode=LEN_,o===Z_TREES){tt>>>=2,rt-=2;break t}break;case 2:h.mode=TABLE;break;case 3:s.msg="invalid block type",h.mode=BAD}tt>>>=2,rt-=2;break;case STORED:for(tt>>>=rt&7,rt-=rt&7;rt<32;){if($===0)break t;$--,tt+=d[_++]<<rt,rt+=8}if((tt&65535)!==(tt>>>16^65535)){s.msg="invalid stored block lengths",h.mode=BAD;break}if(h.length=tt&65535,tt=0,rt=0,h.mode=COPY_,o===Z_TREES)break t;case COPY_:h.mode=COPY;case COPY:if(at=h.length,at){if(at>$&&(at=$),at>et&&(at=et),at===0)break t;g.set(d.subarray(_,_+at),b),$-=at,_+=at,et-=at,b+=at,h.length-=at;break}h.mode=TYPE;break;case TABLE:for(;rt<14;){if($===0)break t;$--,tt+=d[_++]<<rt,rt+=8}if(h.nlen=(tt&31)+257,tt>>>=5,rt-=5,h.ndist=(tt&31)+1,tt>>>=5,rt-=5,h.ncode=(tt&15)+4,tt>>>=4,rt-=4,h.nlen>286||h.ndist>30){s.msg="too many length or distance symbols",h.mode=BAD;break}h.have=0,h.mode=LENLENS;case LENLENS:for(;h.have<h.ncode;){for(;rt<3;){if($===0)break t;$--,tt+=d[_++]<<rt,rt+=8}h.lens[jt[h.have++]]=tt&7,tt>>>=3,rt-=3}for(;h.have<19;)h.lens[jt[h.have++]]=0;if(h.lencode=h.lendyn,h.lenbits=7,Ht={bits:h.lenbits},kt=inftrees$1(CODES,h.lens,0,19,h.lencode,0,h.work,Ht),h.lenbits=Ht.bits,kt){s.msg="invalid code lengths set",h.mode=BAD;break}h.have=0,h.mode=CODELENS;case CODELENS:for(;h.have<h.nlen+h.ndist;){for(;_t=h.lencode[tt&(1<<h.lenbits)-1],ct=_t>>>24,pt=_t>>>16&255,dt=_t&65535,!(ct<=rt);){if($===0)break t;$--,tt+=d[_++]<<rt,rt+=8}if(dt<16)tt>>>=ct,rt-=ct,h.lens[h.have++]=dt;else{if(dt===16){for(Pt=ct+2;rt<Pt;){if($===0)break t;$--,tt+=d[_++]<<rt,rt+=8}if(tt>>>=ct,rt-=ct,h.have===0){s.msg="invalid bit length repeat",h.mode=BAD;break}bt=h.lens[h.have-1],at=3+(tt&3),tt>>>=2,rt-=2}else if(dt===17){for(Pt=ct+3;rt<Pt;){if($===0)break t;$--,tt+=d[_++]<<rt,rt+=8}tt>>>=ct,rt-=ct,bt=0,at=3+(tt&7),tt>>>=3,rt-=3}else{for(Pt=ct+7;rt<Pt;){if($===0)break t;$--,tt+=d[_++]<<rt,rt+=8}tt>>>=ct,rt-=ct,bt=0,at=11+(tt&127),tt>>>=7,rt-=7}if(h.have+at>h.nlen+h.ndist){s.msg="invalid bit length repeat",h.mode=BAD;break}for(;at--;)h.lens[h.have++]=bt}}if(h.mode===BAD)break;if(h.lens[256]===0){s.msg="invalid code -- missing end-of-block",h.mode=BAD;break}if(h.lenbits=9,Ht={bits:h.lenbits},kt=inftrees$1(LENS,h.lens,0,h.nlen,h.lencode,0,h.work,Ht),h.lenbits=Ht.bits,kt){s.msg="invalid literal/lengths set",h.mode=BAD;break}if(h.distbits=6,h.distcode=h.distdyn,Ht={bits:h.distbits},kt=inftrees$1(DISTS,h.lens,h.nlen,h.ndist,h.distcode,0,h.work,Ht),h.distbits=Ht.bits,kt){s.msg="invalid distances set",h.mode=BAD;break}if(h.mode=LEN_,o===Z_TREES)break t;case LEN_:h.mode=LEN;case LEN:if($>=6&&et>=258){s.next_out=b,s.avail_out=et,s.next_in=_,s.avail_in=$,h.hold=tt,h.bits=rt,inffast$1(s,At),b=s.next_out,g=s.output,et=s.avail_out,_=s.next_in,d=s.input,$=s.avail_in,tt=h.hold,rt=h.bits,h.mode===TYPE&&(h.back=-1);break}for(h.back=0;_t=h.lencode[tt&(1<<h.lenbits)-1],ct=_t>>>24,pt=_t>>>16&255,dt=_t&65535,!(ct<=rt);){if($===0)break t;$--,tt+=d[_++]<<rt,rt+=8}if(pt&&!(pt&240)){for(mt=ct,Qt=pt,xt=dt;_t=h.lencode[xt+((tt&(1<<mt+Qt)-1)>>mt)],ct=_t>>>24,pt=_t>>>16&255,dt=_t&65535,!(mt+ct<=rt);){if($===0)break t;$--,tt+=d[_++]<<rt,rt+=8}tt>>>=mt,rt-=mt,h.back+=mt}if(tt>>>=ct,rt-=ct,h.back+=ct,h.length=dt,pt===0){h.mode=LIT;break}if(pt&32){h.back=-1,h.mode=TYPE;break}if(pt&64){s.msg="invalid literal/length code",h.mode=BAD;break}h.extra=pt&15,h.mode=LENEXT;case LENEXT:if(h.extra){for(Pt=h.extra;rt<Pt;){if($===0)break t;$--,tt+=d[_++]<<rt,rt+=8}h.length+=tt&(1<<h.extra)-1,tt>>>=h.extra,rt-=h.extra,h.back+=h.extra}h.was=h.length,h.mode=DIST;case DIST:for(;_t=h.distcode[tt&(1<<h.distbits)-1],ct=_t>>>24,pt=_t>>>16&255,dt=_t&65535,!(ct<=rt);){if($===0)break t;$--,tt+=d[_++]<<rt,rt+=8}if(!(pt&240)){for(mt=ct,Qt=pt,xt=dt;_t=h.distcode[xt+((tt&(1<<mt+Qt)-1)>>mt)],ct=_t>>>24,pt=_t>>>16&255,dt=_t&65535,!(mt+ct<=rt);){if($===0)break t;$--,tt+=d[_++]<<rt,rt+=8}tt>>>=mt,rt-=mt,h.back+=mt}if(tt>>>=ct,rt-=ct,h.back+=ct,pt&64){s.msg="invalid distance code",h.mode=BAD;break}h.offset=dt,h.extra=pt&15,h.mode=DISTEXT;case DISTEXT:if(h.extra){for(Pt=h.extra;rt<Pt;){if($===0)break t;$--,tt+=d[_++]<<rt,rt+=8}h.offset+=tt&(1<<h.extra)-1,tt>>>=h.extra,rt-=h.extra,h.back+=h.extra}if(h.offset>h.dmax){s.msg="invalid distance too far back",h.mode=BAD;break}h.mode=MATCH;case MATCH:if(et===0)break t;if(at=At-et,h.offset>at){if(at=h.offset-at,at>h.whave&&h.sane){s.msg="invalid distance too far back",h.mode=BAD;break}at>h.wnext?(at-=h.wnext,lt=h.wsize-at):lt=h.wnext-at,at>h.length&&(at=h.length),gt=h.window}else gt=g,lt=b-h.offset,at=h.length;at>et&&(at=et),et-=at,h.length-=at;do g[b++]=gt[lt++];while(--at);h.length===0&&(h.mode=LEN);break;case LIT:if(et===0)break t;g[b++]=h.length,et--,h.mode=LEN;break;case CHECK:if(h.wrap){for(;rt<32;){if($===0)break t;$--,tt|=d[_++]<<rt,rt+=8}if(At-=et,s.total_out+=At,h.total+=At,h.wrap&4&&At&&(s.adler=h.check=h.flags?crc32_1$1(h.check,g,At,b-At):adler32_1$1(h.check,g,At,b-At)),At=et,h.wrap&4&&(h.flags?tt:zswap32(tt))!==h.check){s.msg="incorrect data check",h.mode=BAD;break}tt=0,rt=0}h.mode=LENGTH;case LENGTH:if(h.wrap&&h.flags){for(;rt<32;){if($===0)break t;$--,tt+=d[_++]<<rt,rt+=8}if(h.wrap&4&&tt!==(h.total&4294967295)){s.msg="incorrect length check",h.mode=BAD;break}tt=0,rt=0}h.mode=DONE;case DONE:kt=Z_STREAM_END$1;break t;case BAD:kt=Z_DATA_ERROR$1;break t;case MEM:return Z_MEM_ERROR$1;case SYNC:default:return Z_STREAM_ERROR$1}return s.next_out=b,s.avail_out=et,s.next_in=_,s.avail_in=$,h.hold=tt,h.bits=rt,(h.wsize||At!==s.avail_out&&h.mode<BAD&&(h.mode<CHECK||o!==Z_FINISH$1))&&updatewindow(s,s.output,s.next_out,At-s.avail_out),nt-=s.avail_in,At-=s.avail_out,s.total_in+=nt,s.total_out+=At,h.total+=At,h.wrap&4&&At&&(s.adler=h.check=h.flags?crc32_1$1(h.check,g,At,s.next_out-At):adler32_1$1(h.check,g,At,s.next_out-At)),s.data_type=h.bits+(h.last?64:0)+(h.mode===TYPE?128:0)+(h.mode===LEN_||h.mode===COPY_?256:0),(nt===0&&At===0||o===Z_FINISH$1)&&kt===Z_OK$1&&(kt=Z_BUF_ERROR),kt},inflateEnd=s=>{if(inflateStateCheck(s))return Z_STREAM_ERROR$1;let o=s.state;return o.window&&(o.window=null),s.state=null,Z_OK$1},inflateGetHeader=(s,o)=>{if(inflateStateCheck(s))return Z_STREAM_ERROR$1;const h=s.state;return h.wrap&2?(h.head=o,o.done=!1,Z_OK$1):Z_STREAM_ERROR$1},inflateSetDictionary=(s,o)=>{const h=o.length;let d,g,_;return inflateStateCheck(s)||(d=s.state,d.wrap!==0&&d.mode!==DICT)?Z_STREAM_ERROR$1:d.mode===DICT&&(g=1,g=adler32_1$1(g,o,h,0),g!==d.check)?Z_DATA_ERROR$1:(_=updatewindow(s,o,h,h),_?(d.mode=MEM,Z_MEM_ERROR$1):(d.havedict=1,Z_OK$1))};var inflateReset_1=inflateReset,inflateReset2_1=inflateReset2,inflateResetKeep_1=inflateResetKeep,inflateInit_1=inflateInit,inflateInit2_1=inflateInit2,inflate_2$1=inflate$2,inflateEnd_1=inflateEnd,inflateGetHeader_1=inflateGetHeader,inflateSetDictionary_1=inflateSetDictionary,inflateInfo="pako inflate (from Nodeca project)",inflate_1$2={inflateReset:inflateReset_1,inflateReset2:inflateReset2_1,inflateResetKeep:inflateResetKeep_1,inflateInit:inflateInit_1,inflateInit2:inflateInit2_1,inflate:inflate_2$1,inflateEnd:inflateEnd_1,inflateGetHeader:inflateGetHeader_1,inflateSetDictionary:inflateSetDictionary_1,inflateInfo};function GZheader(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var gzheader$1=GZheader;const toString$1=Object.prototype.toString,{Z_NO_FLUSH,Z_FINISH,Z_OK,Z_STREAM_END,Z_NEED_DICT,Z_STREAM_ERROR,Z_DATA_ERROR,Z_MEM_ERROR}=constants$2;function Inflate$1(s){this.options=common$1.assign({chunkSize:1024*64,windowBits:15,to:""},s||{});const o=this.options;o.raw&&o.windowBits>=0&&o.windowBits<16&&(o.windowBits=-o.windowBits,o.windowBits===0&&(o.windowBits=-15)),o.windowBits>=0&&o.windowBits<16&&!(s&&s.windowBits)&&(o.windowBits+=32),o.windowBits>15&&o.windowBits<48&&!(o.windowBits&15)&&(o.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zstream$1,this.strm.avail_out=0;let h=inflate_1$2.inflateInit2(this.strm,o.windowBits);if(h!==Z_OK)throw new Error(messages$1[h]);if(this.header=new gzheader$1,inflate_1$2.inflateGetHeader(this.strm,this.header),o.dictionary&&(typeof o.dictionary=="string"?o.dictionary=strings$1.string2buf(o.dictionary):toString$1.call(o.dictionary)==="[object ArrayBuffer]"&&(o.dictionary=new Uint8Array(o.dictionary)),o.raw&&(h=inflate_1$2.inflateSetDictionary(this.strm,o.dictionary),h!==Z_OK)))throw new Error(messages$1[h])}Inflate$1.prototype.push=function(s,o){const h=this.strm,d=this.options.chunkSize,g=this.options.dictionary;let _,b,$;if(this.ended)return!1;for(o===~~o?b=o:b=o===!0?Z_FINISH:Z_NO_FLUSH,toString$1.call(s)==="[object ArrayBuffer]"?h.input=new Uint8Array(s):h.input=s,h.next_in=0,h.avail_in=h.input.length;;){for(h.avail_out===0&&(h.output=new Uint8Array(d),h.next_out=0,h.avail_out=d),_=inflate_1$2.inflate(h,b),_===Z_NEED_DICT&&g&&(_=inflate_1$2.inflateSetDictionary(h,g),_===Z_OK?_=inflate_1$2.inflate(h,b):_===Z_DATA_ERROR&&(_=Z_NEED_DICT));h.avail_in>0&&_===Z_STREAM_END&&h.state.wrap>0&&s[h.next_in]!==0;)inflate_1$2.inflateReset(h),_=inflate_1$2.inflate(h,b);switch(_){case Z_STREAM_ERROR:case Z_DATA_ERROR:case Z_NEED_DICT:case Z_MEM_ERROR:return this.onEnd(_),this.ended=!0,!1}if($=h.avail_out,h.next_out&&(h.avail_out===0||_===Z_STREAM_END))if(this.options.to==="string"){let et=strings$1.utf8border(h.output,h.next_out),tt=h.next_out-et,rt=strings$1.buf2string(h.output,et);h.next_out=tt,h.avail_out=d-tt,tt&&h.output.set(h.output.subarray(et,et+tt),0),this.onData(rt)}else this.onData(h.output.length===h.next_out?h.output:h.output.subarray(0,h.next_out));if(!(_===Z_OK&&$===0)){if(_===Z_STREAM_END)return _=inflate_1$2.inflateEnd(this.strm),this.onEnd(_),this.ended=!0,!0;if(h.avail_in===0)break}}return!0};Inflate$1.prototype.onData=function(s){this.chunks.push(s)};Inflate$1.prototype.onEnd=function(s){s===Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=common$1.flattenChunks(this.chunks)),this.chunks=[],this.err=s,this.msg=this.strm.msg};function inflate$1$1(s,o){const h=new Inflate$1(o);if(h.push(s),h.err)throw h.msg||messages$1[h.err];return h.result}var inflate_2=inflate$1$1,inflate_1$1={inflate:inflate_2};const{inflate:inflate$3}=inflate_1$1;var inflate_1=inflate$3;function decompressZlib(s){const o=new Uint8Array(s.buffer,s.byteOffset,s.byteLength),h=inflate_1(o);return new DataView(h.buffer,h.byteOffset,h.byteLength)}const defaultOptions$3={ignoreImageData:!1,onlyFirst:!1};class TIFFDecoder extends IOBuffer{constructor(o){super(o),this._nextIFD=0}get isMultiPage(){let o=0;for(this.decodeHeader();this._nextIFD;)if(o++,this.decodeIFD({ignoreImageData:!0},!0),o===2)return!0;if(o===1)return!1;throw unsupported("ifdCount",o)}get pageCount(){let o=0;for(this.decodeHeader();this._nextIFD;)o++,this.decodeIFD({ignoreImageData:!0},!0);if(o>0)return o;throw unsupported("ifdCount",o)}decode(o={}){o=Object.assign({},defaultOptions$3,o);const h=[];for(this.decodeHeader();this._nextIFD;)if(h.push(this.decodeIFD(o,!0)),o.onlyFirst)return[h[0]];return h}decodeHeader(){const o=this.readUint16();if(o===18761)this.setLittleEndian();else if(o===19789)this.setBigEndian();else throw new Error(`invalid byte order: 0x${o.toString(16)}`);if(this.readUint16()!==42)throw new Error("not a TIFF file");this._nextIFD=this.readUint32()}decodeIFD(o,h){this.seek(this._nextIFD);let d;if(h)d=new TiffIfd;else{if(!o.kind)throw new Error("kind is missing");d=new IFD(o.kind)}const g=this.readUint16();for(let _=0;_<g;_++)this.decodeIFDEntry(d);if(!o.ignoreImageData){if(!(d instanceof TiffIfd))throw new Error("must be a tiff ifd");this.decodeImageData(d)}return this._nextIFD=this.readUint32(),d}decodeIFDEntry(o){const h=this.offset,d=this.readUint16(),g=this.readUint16(),_=this.readUint32();if(g<1||g>12){this.skip(4);return}getByteLength(g,_)>4&&this.seek(this.readUint32());const b=readData(this,g,_);if(o.fields.set(d,b),d===34665||d===34853){let $=this.offset,et="exif";d===34665?et="exif":d===34853&&(et="gps"),this._nextIFD=b,o[et]=this.decodeIFD({kind:et,ignoreImageData:!0},!1),this.offset=$}this.seek(h),this.skip(12)}decodeImageData(o){const h=o.orientation;if(h&&h!==1)throw unsupported("orientation",h);switch(o.type){case 0:case 1:case 2:case 3:this.readStripData(o);break;default:throw unsupported("image type",o.type)}if(this.applyPredictor(o),this.convertAlpha(o),o.type===0){const d=o.bitsPerSample,g=Math.pow(2,d)-1;for(let _=0;_<o.data.length;_++)o.data[_]=g-o.data[_]}}readStripData(o){const h=o.width,d=o.height,g=o.bitsPerSample,_=o.sampleFormat,b=h*d*o.samplesPerPixel,$=getDataArray(b,g,_),et=o.rowsPerStrip*h*o.samplesPerPixel,tt=o.stripOffsets,rt=o.stripByteCounts||guessStripByteCounts(o);let nt=b,At=0;for(let at=0;at<tt.length;at++){let lt=new DataView(this.buffer,this.byteOffset+tt[at],rt[at]),gt=nt>et?et:nt;nt-=gt;let _t=lt;switch(o.compression){case 1:break;case 5:{_t=decompressLzw(lt);break}case 8:{_t=decompressZlib(lt);break}case 2:throw unsupported("Compression","CCITT Group 3");case 32773:throw unsupported("Compression","PackBits");default:throw unsupported("Compression",o.compression)}At=this.fillUncompressed(g,_,$,_t,At,gt)}o.data=$}fillUncompressed(o,h,d,g,_,b){if(o===8)return fill8bit(d,g,_,b);if(o===16)return fill16bit(d,g,_,b,this.isLittleEndian());if(o===32&&h===3)return fillFloat32(d,g,_,b,this.isLittleEndian());throw unsupported("bitDepth",o)}applyPredictor(o){const h=o.bitsPerSample;switch(o.predictor){case 1:break;case 2:{if(h===8)applyHorizontalDifferencing8Bit(o.data,o.width,o.components);else if(h===16)applyHorizontalDifferencing16Bit(o.data,o.width,o.components);else throw new Error(`Horizontal differencing is only supported for images with a bit depth of ${h}`);break}default:throw new Error(`invalid predictor: ${o.predictor}`)}}convertAlpha(o){if(o.alpha&&o.associatedAlpha){const{data:h,components:d,maxSampleValue:g}=o;for(let _=0;_<h.length;_+=d){const b=h[_+d-1];for(let $=0;$<d-1;$++)h[_+$]=Math.round(h[_+$]*g/b)}}}}function getDataArray(s,o,h){if(o===8)return new Uint8Array(s);if(o===16)return new Uint16Array(s);if(o===32&&h===3)return new Float32Array(s);throw unsupported("bit depth / sample format",`${o} / ${h}`)}function fill8bit(s,o,h,d){for(let g=0;g<d;g++)s[h++]=o.getUint8(g);return h}function fill16bit(s,o,h,d,g){for(let _=0;_<d*2;_+=2)s[h++]=o.getUint16(_,g);return h}function fillFloat32(s,o,h,d,g){for(let _=0;_<d*4;_+=4)s[h++]=o.getFloat32(_,g);return h}function unsupported(s,o){return new Error(`Unsupported ${s}: ${o}`)}function decodeTIFF(s,o){return new TIFFDecoder(s).decode(o)}function matchAndCrop(s={}){let{algorithm:o="matchToPrevious",ignoreBorder:h=[0,0]}=s;this.checkProcessable("matchAndCrop",{bitDepth:[8,16]});let d=o==="matchToPrevious",g=this[0],_=[];_[0]={position:[0,0],image:this[0]};let b=[0,0];for(let At=1;At<this.length;At++){let at=g.getBestMatch(this[At],{border:h});_[At]={position:[at[0]+b[0],at[1]+b[1]],image:this[At]},d&&(b[0]+=at[0],b[1]+=at[1],g=this[At])}let $=0,et=0,tt=0,rt=0;for(let At=0;At<_.length;At++){let at=_[At];at.position[0]>$&&($=at.position[0]),at.position[0]<et&&(et=at.position[0]),at.position[1]>tt&&(tt=at.position[1]),at.position[1]<rt&&(rt=at.position[1])}et=0-et,rt=0-rt;for(let At=0;At<_.length;At++){let at=_[At];at.crop=at.image.crop({x:$-at.position[0],y:tt-at.position[1],width:g.width-et-$,height:g.height-rt-tt})}let nt=[];for(let At=0;At<_.length;At++)nt[At]=_[At].crop;return new Stack(nt)}function min$2(){this.checkProcessable("min",{bitDepth:[8,16]});let s=this[0].min;for(let o=1;o<this.length;o++)for(let h=0;h<s.length;h++)s[h]=Math.min(s[h],this[o].min[h]);return s}function max$2(){this.checkProcessable("min",{bitDepth:[8,16]});let s=this[0].max;for(let o=1;o<this.length;o++)for(let h=0;h<s.length;h++)s[h]=Math.max(s[h],this[o].max[h]);return s}function median$2(s){let o=s.reduce((b,$)=>b+$);if(o===0)throw new Error("unreachable");let h=0,d=0,g=o/2,_;for(;;){if(s[h]>0){if(_!==void 0)return(_+h)/2;if(d+=s[h],d>g)return h;d===g&&(_=h)}h++}}function mean$2(s){let o=0,h=0;for(let d=0;d<s.length;d++)o+=s[d],h+=s[d]*d;return o===0?0:h/o}function median$1(){this.checkProcessable("median",{bitDepth:[8,16]});let s=this.getHistograms({maxSlots:this[0].maxValue+1}),o=new Array(s.length);for(let h=0;h<s.length;h++){let d=s[h];o[h]=median$2(d)}return o}function histogram(s){this.checkProcessable("min",{bitDepth:[8,16]});let o=this[0].getHistogram(s);for(let h=1;h<this.length;h++){let d=this[h].getHistogram(s);for(let g=0;g<o.length;g++)o[g]+=d[g]}return o}function histograms(s){this.checkProcessable("min",{bitDepth:[8,16]});let o=this[0].getHistograms(s),h=o[0].length;for(let d=1;d<this.length;d++){let g=this[d].getHistograms(s);for(let _=0;_<o.length;_++)for(let b=0;b<h;b++)o[_][b]+=g[_][b]}return o}function averageImage(){this.checkProcessable("averageImage",{bitDepth:[8,16]});let s=new Uint32Array(this[0].data.length);for(let d=0;d<this.length;d++){let g=this[d];for(let _=0;_<this[0].data.length;_++)s[_]+=g.data[_]}let o=Image$1.createFrom(this[0]),h=o.data;for(let d=0;d<this[0].data.length;d++)h[d]=s[d]/this.length;return o}function maxImage(){this.checkProcessable("max",{bitDepth:[8,16]});let s=Image$1.createFrom(this[0]);s.data.fill(0);for(const o of this)for(let h=0;h<s.data.length;h++)s.data[h]=Math.max(o.data[h],s.data[h]);return s}function minImage(){this.checkProcessable("max",{bitDepth:[8,16]});let s=Image$1.createFrom(this[0]);s.data.fill(s.maxValue);for(const o of this)for(let h=0;h<s.data.length;h++)s.data[h]=Math.min(o.data[h],s.data[h]);return s}function extend$2(s){s.extendMethod("matchAndCrop",matchAndCrop),s.extendMethod("getMin",min$2),s.extendMethod("getMax",max$2),s.extendMethod("getMedian",median$1),s.extendMethod("getHistogram",histogram),s.extendMethod("getHistograms",histograms),s.extendMethod("getAverage",averageImage),s.extendMethod("getAverageImage",averageImage),s.extendMethod("getMaxImage",maxImage),s.extendMethod("getMinImage",minImage)}let computedPropertyDescriptor={configurable:!0,enumerable:!1,get:void 0};class Stack extends Array{constructor(o){if(Array.isArray(o)){super(o.length);for(let h=0;h<o.length;h++)this[h]=o[h]}else typeof o=="number"?super(o):super();this.computed=null}static load(o){return Promise.all(o.map(Image$1.load)).then(h=>new Stack(h))}static extendMethod(o,h,d={}){let{inPlace:g=!1,returnThis:_=!0,partialArgs:b=[]}=d;return g?Stack.prototype[o]=function(...$){this.computed=null;let et=h.apply(this,[...b,...$]);return _?this:et}:Stack.prototype[o]=function(...$){return h.apply(this,[...b,...$])},Stack}static extendProperty(o,h,d={}){let{partialArgs:g=[]}=d;return computedPropertyDescriptor.get=function(){if(this.computed===null)this.computed={};else if(hasOwn(o,this.computed))return this.computed[o];let _=h.apply(this,g);return this.computed[o]=_,_},Object.defineProperty(Stack.prototype,o,computedPropertyDescriptor),Stack}checkProcessable(o,h={}){if(typeof o!="string")throw new TypeError("checkProcessable requires as first parameter the processName (a string)");if(this.size===0)throw new TypeError(`The process: ${o} can not be applied on an empty stack`);this[0].checkProcessable(o,h);for(let d=1;d<this.length;d++){if((h.sameSize===void 0||h.sameSize)&&this[0].width!==this[d].width)throw new TypeError(`The process: ${o} can not be applied if width is not identical in all images`);if((h.sameSize===void 0||h.sameSize)&&this[0].height!==this[d].height)throw new TypeError(`The process: ${o} can not be applied if height is not identical in all images`);if((h.sameAlpha===void 0||h.sameAlpha)&&this[0].alpha!==this[d].alpha)throw new TypeError(`The process: ${o} can not be applied if alpha is not identical in all images`);if((h.sameBitDepth===void 0||h.sameBitDepth)&&this[0].bitDepth!==this[d].bitDepth)throw new TypeError(`The process: ${o} can not be applied if bitDepth is not identical in all images`);if((h.sameColorModel===void 0||h.sameColorModel)&&this[0].colorModel!==this[d].colorModel)throw new TypeError(`The process: ${o} can not be applied if colorModel is not identical in all images`);if((h.sameNumberChannels===void 0||h.sameNumberChannels)&&this[0].channels!==this[d].channels)throw new TypeError(`The process: ${o} can not be applied if channels is not identical in all images`)}}}Array[Symbol.species]||(Stack.prototype.map=function(s,o){if(typeof s!="function")throw new TypeError(`${s} is not a function`);let h=new Stack(this.length);for(let d=0;d<this.length;d++)h[d]=s.call(o,this[d],d,this);return h});extend$2(Stack);const isDataURL=/^data:[a-z]+\/(?:[a-z]+);base64,/;function load(s,o){if(typeof s=="string")return loadURL(s,o);if(s instanceof ArrayBuffer)return Promise.resolve(loadBinary(new Uint8Array(s),void 0,o&&o.ignorePalette));if(s.buffer)return Promise.resolve(loadBinary(s,void 0,o&&o.ignorePalette));throw new Error('argument to "load" must be a string or buffer.')}function loadBinary(s,o,h){const d=imageType(s);if(d)switch(d.mime){case"image/png":return loadPNG(s);case"image/jpeg":return loadJPEG(s);case"image/tiff":return loadTIFF(s,h);default:return loadGeneric(g(d.mime))}return loadGeneric(g("application/octet-stream"));function g(_){return o||toBase64URL(s,_)}}function loadURL(s,o){const h=s.slice(0,64).match(isDataURL);let d;return h!==null?d=Promise.resolve(decode$1$1(s.slice(h[0].length))):d=fetchBinary(s,o),d.then(g=>{const _=new Uint8Array(g);return loadBinary(_,h?s:void 0,o&&o.ignorePalette)})}function loadPNG(s){const o=decodePng(s);let h=o.channels,d,g=0;return h===2||h===4?(d=h-1,g=1):d=h,o.palette?loadPNGFromPalette(o):new Image$1(o.width,o.height,o.data,{components:d,alpha:g,bitDepth:o.depth,meta:{text:o.text}})}function loadPNGFromPalette(s){const o=s.width*s.height,h=s.palette[0].length,d=new Uint8Array(o*h),g=8/s.depth,_=s.depth<8?g:1,b=parseInt("1".repeat(s.depth),2),$=h===4;let et=0;for(let tt=0;tt<o;tt++){const rt=Math.floor(tt/_);let nt=s.data[rt];s.depth<8&&(nt=nt>>>s.depth*(g-1-tt%g)&b);const At=s.palette[nt];d[et++]=At[0],d[et++]=At[1],d[et++]=At[2],$&&(d[et++]=At[3])}return new Image$1(s.width,s.height,d,{components:3,alpha:$,bitDepth:8})}function loadJPEG(s){const o=srcExports$2.decode(s);let h;o.exif&&(h=getMetadata(o.exif));const d=jpegJsExports.decode(s,{useTArray:!0,maxMemoryUsageInMB:1024});let g=new Image$1(d.width,d.height,d.data,{meta:h});if(h&&h.tiff.tags.Orientation){const _=h.tiff.tags.Orientation;_>2&&(g=g.rotate({3:180,4:180,5:90,6:90,7:270,8:270}[_])),[2,4,5,7].includes(_)&&(g=g.flipX())}return g}function loadTIFF(s,o){let h=decodeTIFF(s);return h.length===1?getImageFromIFD(h[0],o):new Stack(h.map(function(d){return getImageFromIFD(d,o)}))}function getMetadata(s){const o={tiff:{fields:s.fields,tags:s.map}};return s.exif&&(o.exif=s.exif),s.gps&&(o.gps=s.gps),o}function getImageFromIFD(s,o){if(!o&&s.type===3){const h=new Uint16Array(3*s.width*s.height),d=s.palette;let g=0;for(let _=0;_<s.data.length;_++){const b=s.data[_],$=d[b];h[g++]=$[0],h[g++]=$[1],h[g++]=$[2]}return new Image$1(s.width,s.height,h,{components:3,alpha:s.alpha,colorModel:RGB$1,bitDepth:16,meta:getMetadata(s)})}else return new Image$1(s.width,s.height,s.data,{components:s.type===2?3:1,alpha:s.alpha,colorModel:s.type===2?RGB$1:GREY$1,bitDepth:s.bitsPerSample.length?s.bitsPerSample[0]:s.bitsPerSample,meta:getMetadata(s)})}function loadGeneric(s,o){return o=o||{},new Promise(function(h,d){let g=new DOMImage;g.onload=function(){let _=g.width,b=g.height,$=createCanvas(_,b).getContext("2d");$.drawImage(g,0,0,_,b);let et=$.getImageData(0,0,_,b).data;h(new Image$1(_,b,et,o))},g.onerror=function(){d(new Error(`Could not load ${s}`))},g.src=s})}const valueMethods={getValueXY(s,o,h){return this.data[(o*this.width+s)*this.channels+h]},setValueXY(s,o,h,d){return this.data[(o*this.width+s)*this.channels+h]=d,this.computed=null,this},getValue(s,o){return this.data[s*this.channels+o]},setValue(s,o,h){return this.data[s*this.channels+o]=h,this.computed=null,this},getPixelXY(s,o){return this.getPixel(o*this.width+s)},setPixelXY(s,o,h){return this.setPixel(o*this.width+s,h)},getPixel(s){const o=new Array(this.channels),h=s*this.channels;for(let d=0;d<this.channels;d++)o[d]=this.data[h+d];return o},setPixel(s,o){const h=s*this.channels;for(let d=0;d<o.length;d++)this.data[h+d]=o[d];return this.computed=null,this}};function setValueMethods(s){for(const o in valueMethods)s.prototype[o]=valueMethods[o]}function getImageParameters(s){return{width:s.width,height:s.height,components:s.components,alpha:s.alpha,colorModel:s.colorModel,bitDepth:s.bitDepth}}function getOutputImage(s,o,h,d={}){const{out:g}=o;if(g===void 0)return d.copy?s.clone():Image$1.createFrom(s,h);{if(!Image$1.isImage(g))throw new TypeError("out must be an Image object");const _=Object.assign(getImageParameters(s),h);for(const b in _)if(g[b]!==_[b])throw new RangeError(`cannot use out. Its ${b} must be "${_[b]}" (found "${g[b]}")`);return g}}function getOutputImageOrInPlace(s,o,h){if(o.inPlace!==void 0&&typeof o.inPlace!="boolean")throw new TypeError("inPlace option must be a boolean");if(o.inPlace){if(o.out!==void 0)throw new TypeError("out option must not be set if inPlace option is true");return s}return getOutputImage(s,o,null,h)}function abs(s={}){this.checkProcessable("abs",{bitDepth:[32]});const o=getOutputImageOrInPlace(this,s);return absolute(this,o),o}function absolute(s,o){for(let h=0;h<s.data.length;h++)o.data[h]=Math.abs(s.data[h])}function copyAlphaChannel(s,o){if(s.alpha===1&&o.alpha===1)for(let h=0;h<s.size;h++)o.data[h*o.channels+o.components]=s.data[h*s.channels+s.components]}function invert(s={}){this.checkProcessable("invert",{bitDepth:[1,8,16]});const o=getOutputImageOrInPlace(this,s);return this.bitDepth===1?invertBinary(this,o):(invertColor(this,o),this!==o&&copyAlphaChannel(this,o)),o}function invertBinary(s,o){for(let h=0;h<s.data.length;h++)o.data[h]=~s.data[h]}function invertColor(s,o){for(let h=0;h<s.data.length;h+=s.channels)for(let d=0;d<s.components;d++)o.data[h+d]=s.maxValue-s.data[h+d]}function flipX(){this.checkProcessable("flipX",{bitDepth:[8,16]});for(let s=0;s<this.height;s++){let o=s*this.width*this.channels;for(let h=0;h<Math.floor(this.width/2);h++){let d=h*this.channels+o,g=(this.width-h-1)*this.channels+o;for(let _=0;_<this.channels;_++){let b=this.data[d+_];this.data[d+_]=this.data[g+_],this.data[g+_]=b}}}return this}function flipY(){this.checkProcessable("flipY",{bitDepth:[8,16]});for(let s=0;s<Math.floor(this.height/2);s++)for(let o=0;o<this.width;o++){let h=o*this.channels+s*this.width*this.channels,d=o*this.channels+(this.height-1-s)*this.channels*this.width;for(let g=0;g<this.channels;g++){let _=this.data[h+g];this.data[h+g]=this.data[d+g],this.data[d+g]=_}}return this}function blurFilter(s={}){const{radius:o=1}=s;if(o<1)throw new Error("radius must be greater than 1");const h=2*o+1,d=new Array(h);for(let g=0;g<h;g++){d[g]=new Array(h);for(let _=0;_<h;_++)d[g][_]=1/(h*h)}return this.convolution(d)}var medianQuickselect_min={exports:{}},hasRequiredMedianQuickselect_min;function requireMedianQuickselect_min(){return hasRequiredMedianQuickselect_min||(hasRequiredMedianQuickselect_min=1,function(s){(function(){function o(g){for(var _=0,b=g.length-1,$=void 0,et=void 0,tt=void 0,rt=d(_,b);;){if(b<=_)return g[rt];if(b==_+1)return g[_]>g[b]&&h(g,_,b),g[rt];for($=d(_,b),g[$]>g[b]&&h(g,$,b),g[_]>g[b]&&h(g,_,b),g[$]>g[_]&&h(g,$,_),h(g,$,_+1),et=_+1,tt=b;;){do et++;while(g[_]>g[et]);do tt--;while(g[tt]>g[_]);if(tt<et)break;h(g,et,tt)}h(g,_,tt),tt<=rt&&(_=et),tt>=rt&&(b=tt-1)}}var h=function(g,_,b){var $;return $=[g[b],g[_]],g[_]=$[0],g[b]=$[1],$},d=function(g,_){return~~((g+_)/2)};s.exports?s.exports=o:window.median=o})()}(medianQuickselect_min)),medianQuickselect_min.exports}var medianQuickselect_minExports=requireMedianQuickselect_min();const quickSelectMedian=getDefaultExportFromCjs(medianQuickselect_minExports);function validateArrayOfChannels(s,o={}){let{channels:h,allowAlpha:d,defaultAlpha:g}=o;return typeof d!="boolean"&&(d=!0),typeof h>"u"?allChannels(s,g):validateChannels(s,h,d)}function allChannels(s,o){let h=o?s.channels:s.components,d=new Array(h);for(let g=0;g<h;g++)d[g]=g;return d}function validateChannels(s,o,h){Array.isArray(o)||(o=[o]);for(let d=0;d<o.length;d++)o[d]=validateChannel(s,o[d],h);return o}function validateChannel(s,o,h=!0){if(o===void 0)throw new RangeError(`validateChannel : the channel has to be >=0 and <${s.channels}`);if(typeof o=="string"){switch(s.colorModel){case GREY$1:break;case RGB$1:if("rgb".includes(o))switch(o){case"r":o=0;break;case"g":o=1;break;case"b":o=2;break}break;case HSL:if("hsl".includes(o))switch(o){case"h":o=0;break;case"s":o=1;break;case"l":o=2;break}break;case HSV:if("hsv".includes(o))switch(o){case"h":o=0;break;case"s":o=1;break;case"v":o=2;break}break;case CMYK$1:if("cmyk".includes(o))switch(o){case"c":o=0;break;case"m":o=1;break;case"y":o=2;break;case"k":o=3;break}break;default:throw new Error(`Unexpected color model: ${s.colorModel}`)}if(o==="a"){if(!s.alpha)throw new Error("validateChannel : the image does not contain alpha channel");o=s.components}if(typeof o=="string")throw new Error(`validateChannel : undefined channel: ${o}`)}if(o>=s.channels)throw new RangeError(`validateChannel : the channel has to be >=0 and <${s.channels}`);if(!h&&o>=s.components)throw new RangeError("validateChannel : alpha channel may not be selected");return o}function medianFilter(s={}){let{radius:o=1,border:h="copy",channels:d}=s;if(this.checkProcessable("medianFilter",{bitDepth:[8,16]}),o<1)throw new Error("radius must be greater than 0");d=validateArrayOfChannels(this,d);let g=o,_=o,b=Image$1.createFrom(this),$=(g*2+1)*(_*2+1),et=new Array($);for(let tt=0;tt<d.length;tt++){let rt=d[tt];for(let nt=_;nt<this.height-_;nt++)for(let At=g;At<this.width-g;At++){let at=0;for(let gt=-_;gt<=_;gt++)for(let _t=-g;_t<=g;_t++){let ct=((nt+gt)*this.width+At+_t)*this.channels+rt;et[at++]=this.data[ct]}let lt=(nt*this.width+At)*this.channels+rt;b.data[lt]=quickSelectMedian(et)}}if(this.alpha&&!d.includes(this.channels))for(let tt=this.components;tt<this.data.length;tt=tt+this.channels)b.data[tt]=this.data[tt];return b.setBorder({size:[g,_],algorithm:h}),b}function gaussianFilter(s={}){let{radius:o=1,sigma:h,channels:d,border:g="copy"}=s;this.checkProcessable("gaussian",{bitDepth:[8,16]});const _=getKernel(o,h);return this.convolution([_,_],{border:g,channels:d,algorithm:"separable"})}function getKernel(s,o){const h=s*2+1,d=new Array(h),g=o||((h-1)*.5-1)*.3+.8,_=-.5/(g*g);let b=0;for(let $=0;$<h;$++){const et=$-s,tt=Math.exp(_*et*et);d[$]=tt,b+=tt}for(let $=0;$<h;$++)d[$]/=b;return d}const SOBEL_X=[[-1,0,1],[-2,0,2],[-1,0,1]],SOBEL_Y=[[-1,-2,-1],[0,0,0],[1,2,1]],SCHARR_X=[[3,0,-3],[10,0,-10],[3,0,-3]],SCHARR_Y=[[3,10,3],[0,0,0],[-3,-10,-3]];var src$2={},fftlib={},hasRequiredFftlib;function requireFftlib(){return hasRequiredFftlib||(hasRequiredFftlib=1,function(s){(function(){var o;o=s;var h={release:"0.3.0",date:"2013-03"};o.toString=function(){return"version "+h.release+", released "+h.date};for(var d=0,g=null,_=null,b={init:function(tt){if(tt!==0&&!(tt&tt-1))d=tt,b._initArray(),b._makeBitReversalTable(),b._makeCosSinTable();else throw new Error("init: radix-2 required")},fft1d:function(tt,rt){b.fft(tt,rt,1)},ifft1d:function(tt,rt){var nt=1/d;b.fft(tt,rt,-1);for(var At=0;At<d;At++)tt[At]*=nt,rt[At]*=nt},bt1d:function(tt,rt){b.fft(tt,rt,-1)},fft2d:function(tt,rt){for(var nt=[],At=[],at=0,lt=0;lt<d;lt++){at=lt*d;for(var gt=0;gt<d;gt++)nt[gt]=tt[gt+at],At[gt]=rt[gt+at];b.fft1d(nt,At);for(var _t=0;_t<d;_t++)tt[_t+at]=nt[_t],rt[_t+at]=At[_t]}for(var ct=0;ct<d;ct++){for(var pt=0;pt<d;pt++)at=ct+pt*d,nt[pt]=tt[at],At[pt]=rt[at];b.fft1d(nt,At);for(var dt=0;dt<d;dt++)at=ct+dt*d,tt[at]=nt[dt],rt[at]=At[dt]}},ifft2d:function(tt,rt){for(var nt=[],At=[],at=0,lt=0;lt<d;lt++){at=lt*d;for(var gt=0;gt<d;gt++)nt[gt]=tt[gt+at],At[gt]=rt[gt+at];b.ifft1d(nt,At);for(var _t=0;_t<d;_t++)tt[_t+at]=nt[_t],rt[_t+at]=At[_t]}for(var ct=0;ct<d;ct++){for(var pt=0;pt<d;pt++)at=ct+pt*d,nt[pt]=tt[at],At[pt]=rt[at];b.ifft1d(nt,At);for(var dt=0;dt<d;dt++)at=ct+dt*d,tt[at]=nt[dt],rt[at]=At[dt]}},fft:function(tt,rt,nt){for(var At,at,lt,gt,_t,ct,pt,dt,mt,Qt=d>>2,xt=0;xt<d;xt++)gt=g[xt],xt<gt&&(_t=tt[xt],tt[xt]=tt[gt],tt[gt]=_t,_t=rt[xt],rt[xt]=rt[gt],rt[gt]=_t);for(var bt=1;bt<d;bt<<=1){at=0,At=d/(bt<<1);for(var kt=0;kt<bt;kt++){ct=_[at+Qt],pt=nt*_[at];for(var Lt=kt;Lt<d;Lt+=bt<<1)lt=Lt+bt,dt=ct*tt[lt]+pt*rt[lt],mt=ct*rt[lt]-pt*tt[lt],tt[lt]=tt[Lt]-dt,tt[Lt]+=dt,rt[lt]=rt[Lt]-mt,rt[Lt]+=mt;at+=At}}},_initArray:function(){typeof Uint32Array<"u"?g=new Uint32Array(d):g=[],typeof Float64Array<"u"?_=new Float64Array(d*1.25):_=[]},_paddingZero:function(){},_makeBitReversalTable:function(){var tt=0,rt=0,nt=0;for(g[0]=0;++tt<d;){for(nt=d>>1;nt<=rt;)rt-=nt,nt>>=1;rt+=nt,g[tt]=rt}},_makeCosSinTable:function(){var tt=d>>1,rt=d>>2,nt=d>>3,At=tt+rt,at=Math.sin(Math.PI/d),lt=2*at*at,gt=Math.sqrt(lt*(2-lt)),_t=_[rt]=1,ct=_[0]=0;at=2*lt;for(var pt=1;pt<nt;pt++)_t-=lt,lt+=at*_t,ct+=gt,gt-=at*ct,_[pt]=ct,_[rt-pt]=_t;nt!==0&&(_[nt]=Math.sqrt(.5));for(var dt=0;dt<rt;dt++)_[tt-dt]=_[dt];for(var mt=0;mt<At;mt++)_[mt+tt]=-_[mt]}},$=["init","fft1d","ifft1d","fft2d","ifft2d"],et=0;et<$.length;et++)o[$[et]]=b[$[et]];return o.bt=b.bt1d,o.fft=b.fft1d,o.ifft=b.ifft1d,o}).call(fftlib)}(fftlib)),fftlib}var FFTUtils_1,hasRequiredFFTUtils;function requireFFTUtils(){if(hasRequiredFFTUtils)return FFTUtils_1;hasRequiredFFTUtils=1;var s=requireFftlib(),o={DEBUG:!1,ifft2DArray:function(h,d,g){var _=new Array(d*g),b=d/2,$=(g-1)*2;s.init(b);for(var et={re:new Array(b),im:new Array(b)},tt=0;tt<g;tt++){for(var rt=b-1;rt>=0;rt--)et.re[rt]=h[rt*2*g+tt],et.im[rt]=h[(rt*2+1)*g+tt];s.bt(et.re,et.im);for(var rt=b-1;rt>=0;rt--)_[rt*2*g+tt]=et.re[rt],_[(rt*2+1)*g+tt]=et.im[rt]}var nt=new Array(b*$);s.init($);for(var At={re:new Array($),im:new Array($)},at=$*b,rt=0;rt<d;rt+=2){At.re[0]=_[rt*g],At.im[0]=_[(rt+1)*g];for(var tt=1;tt<g;tt++)At.re[tt]=_[rt*g+tt],At.im[tt]=_[(rt+1)*g+tt],At.re[$-tt]=_[rt*g+tt],At.im[$-tt]=-_[(rt+1)*g+tt];s.bt(At.re,At.im);for(var lt=rt/2*$,tt=$-1;tt>=0;tt--)nt[lt+tt]=At.re[tt]/at}return nt},fft2DArray:function(h,d,g,_){Object.assign({},{inplace:!0});var b=g/2+1,$=d*2,et=new Array($*b);s.init(g);for(var tt={re:new Array(g),im:new Array(g)},rt={re:new Array(g),im:new Array(g)},nt={re:new Array(g),im:new Array(g)},At,at,lt,gt,_t,ct=0;ct<d/2;ct++){At=ct*2*g,tt.re=h.slice(At,At+g),At=(ct*2+1)*g,tt.im=h.slice(At,At+g),s.fft1d(tt.re,tt.im),this.reconstructTwoRealFFT(tt,rt,nt),at=ct*4*b,lt=(ct*4+1)*b,gt=(ct*4+2)*b,_t=(ct*4+3)*b;for(var pt=b-1;pt>=0;pt--)et[at+pt]=rt.re[pt],et[lt+pt]=rt.im[pt],et[gt+pt]=nt.re[pt],et[_t+pt]=nt.im[pt]}rt=null,nt=null;var dt=new Array($*b);s.init(d);for(var mt={re:new Array(d),im:new Array(d)},Qt=b-1;Qt>=0;Qt--){for(var ct=d-1;ct>=0;ct--)mt.re[ct]=et[ct*2*b+Qt],mt.im[ct]=et[(ct*2+1)*b+Qt],isNaN(mt.re[ct])&&(mt.re[ct]=0),isNaN(mt.im[ct])&&(mt.im[ct]=0);s.fft1d(mt.re,mt.im);for(var ct=d-1;ct>=0;ct--)dt[ct*2*b+Qt]=mt.re[ct],dt[(ct*2+1)*b+Qt]=mt.im[ct]}return dt},reconstructTwoRealFFT:function(h,d,g){var _=h.re.length;d.re[0]=h.re[0],d.im[0]=0,g.re[0]=h.im[0],g.im[0]=0;for(var b,$,et,tt,rt,nt=_/2;nt>0;nt--)rt=_-nt,b=.5*(h.re[nt]-h.re[rt]),$=.5*(h.re[nt]+h.re[rt]),et=.5*(h.im[nt]-h.im[rt]),tt=.5*(h.im[nt]+h.im[rt]),d.re[nt]=$,d.im[nt]=et,d.re[rt]=$,d.im[rt]=-et,g.re[nt]=tt,g.im[nt]=-b,g.re[rt]=tt,g.im[rt]=b},convolute2DI:function(h,d,g,_){for(var b,$,et=0;et<g/2;et++)for(var tt=0;tt<_;tt++)b=h[et*2*_+tt]*d[et*2*_+tt]-h[(et*2+1)*_+tt]*d[(et*2+1)*_+tt],$=h[et*2*_+tt]*d[(et*2+1)*_+tt]+h[(et*2+1)*_+tt]*d[et*2*_+tt],h[et*2*_+tt]=b,h[(et*2+1)*_+tt]=$},convolute:function(h,d,g,_,b){for(var $=new Array(_*g),et=0;et<g*_;et++)$[et]=h[et];$=this.fft2DArray($,g,_);for(var tt=d.length,rt=d[0].length,nt=new Array(_*g),et=0;et<_*g;et++)nt[et]=0;for(var At,at,lt=Math.floor((tt-1)/2),gt=Math.floor((rt-1)/2),_t=0;_t<tt;_t++){At=(_t-lt+g)%g;for(var ct=0;ct<rt;ct++)at=(ct-gt+_)%_,nt[At*_+at]=d[_t][ct]}nt=this.fft2DArray(nt,g,_);var pt=g*2,dt=_/2+1;return this.convolute2DI($,nt,pt,dt),this.ifft2DArray($,pt,dt)},toRadix2:function(h,d,g){var _,b,$,et,tt=g,rt=d;if(!(g!==0&&!(g&g-1))){for(tt=0;g>>++tt;);tt=1<<tt}if(!(d!==0&&!(d&d-1))){for(rt=0;d>>++rt;);rt=1<<rt}if(rt==d&&tt==g)return{data:h,rows:d,cols:g};var nt=new Array(rt*tt),At=Math.floor((rt-d)/2)-d,at=Math.floor((tt-g)/2)-g;for(_=0;_<rt;_++)for($=_*tt,et=(_-At)%d*g,b=0;b<tt;b++)nt[$+b]=h[et+(b-at)%g];return{data:nt,rows:rt,cols:tt}},crop:function(h,d,g,_,b,$){if(d==_&&g==b)return h;Object.assign({},$);var et=new Array(b*_),tt=Math.floor((d-_)/2),rt=Math.floor((g-b)/2),nt,At,at,lt;for(at=0;at<_;at++)for(nt=at*b,At=(at+tt)*g,lt=0;lt<b;lt++)et[nt+lt]=h[At+(lt+rt)];return et}};return FFTUtils_1=o,FFTUtils_1}var hasRequiredSrc$2;function requireSrc$2(){return hasRequiredSrc$2||(hasRequiredSrc$2=1,src$2.FFTUtils=requireFFTUtils(),src$2.FFT=requireFftlib()),src$2}var src$1,hasRequiredSrc$1;function requireSrc$1(){if(hasRequiredSrc$1)return src$1;hasRequiredSrc$1=1;var s=requireSrc$2().FFTUtils;function o(_,b,$){var et=g(_),tt=et.data,rt=Object.assign({normalize:!1,divisor:1,rows:et.rows,cols:et.cols},$),nt,At;if(rt.rows&&rt.cols)nt=rt.rows,At=rt.cols;else throw new Error("Invalid number of rows or columns "+nt+" "+At);var at=rt.divisor,lt,gt,_t=b.length,ct=b[0].length;if(rt.normalize)for(at=0,lt=0;lt<_t;lt++)for(gt=0;gt<ct;gt++)at+=b[lt][gt];if(at===0)throw new RangeError("convolution: The divisor is equal to zero");var pt=s.toRadix2(tt,nt,At),dt=s.convolute(pt.data,b,pt.rows,pt.cols);if(dt=s.crop(dt,pt.rows,pt.cols,nt,At),at!=0&&at!=1)for(lt=0;lt<dt.length;lt++)dt[lt]/=at;return dt}function h(_,b,$){var et=g(_),tt=et.data,rt=Object.assign({normalize:!1,divisor:1,rows:et.rows,cols:et.cols},$),nt,At;if(rt.rows&&rt.cols)nt=rt.rows,At=rt.cols;else throw new Error("Invalid number of rows or columns "+nt+" "+At);var at=rt.divisor,lt=b.length,gt=b[0].length,_t,ct,pt,dt,mt,Qt,xt,bt,kt;if(rt.normalize)for(at=0,_t=0;_t<lt;_t++)for(ct=0;ct<gt;ct++)at+=b[_t][ct];if(at===0)throw new RangeError("convolution: The divisor is equal to zero");var Lt=new Array(nt*At),Ht=Math.floor(lt/2),Pt=Math.floor(gt/2);for(dt=0;dt<nt;dt++)for(pt=0;pt<At;pt++){for(Qt=0,ct=0;ct<lt;ct++)for(_t=0;_t<gt;_t++)xt=b[lt-ct-1][gt-_t-1],bt=(dt+ct-Ht+nt)%nt,kt=(pt+_t-Pt+At)%At,mt=bt*At+kt,Qt+=tt[mt]*xt;mt=dt*At+pt,Lt[mt]=Qt/at}return Lt}function d(_,b,$){var et=1e3;$&&$.factor&&(et=$.factor);var tt=new Array(b),rt,nt,At,at;et*=-1;var lt=(b-1)/2,gt=2*_*_;for(rt=0;rt<b;rt++)for(tt[rt]=new Array(b),at=(rt-lt)*(rt-lt),nt=0;nt<b;nt++)At=-((nt-lt)*(nt-lt)+at)/gt,tt[rt][nt]=Math.round(et*(1+At)*Math.exp(At));return tt}function g(_){var b=_,$,et;if(typeof _[0]!="number"){$=_.length,et=_[0].length,b=new Array($*et);for(var tt=0;tt<$;tt++)for(var rt=0;rt<et;rt++)b[tt*et+rt]=_[tt][rt]}else{var nt=Math.sqrt(_.length);Number.isInteger(nt)&&($=nt,et=nt)}return{data:b,rows:$,cols:et}}return src$1={fft:o,direct:h,kernelFactory:{LoG:d},matrix2Array:g},src$1}var srcExports$1=requireSrc$1(),_isFinite,hasRequired_isFinite;function require_isFinite(){return hasRequired_isFinite||(hasRequired_isFinite=1,_isFinite=Number.isFinite||function(s){return!(typeof s!="number"||s!==s||s===1/0||s===-1/0)}),_isFinite}var isInteger$1,hasRequiredIsInteger;function requireIsInteger(){if(hasRequiredIsInteger)return isInteger$1;hasRequiredIsInteger=1;var s=require_isFinite();return isInteger$1=Number.isInteger||function(o){return typeof o=="number"&&s(o)&&Math.floor(o)===o},isInteger$1}var isIntegerExports=requireIsInteger();const isInteger=getDefaultExportFromCjs(isIntegerExports);function validateKernel(s){let o,h;if(Array.isArray(s))if(Array.isArray(s[0])){if(!(s.length&1)||!(s[0].length&1))throw new RangeError("validateKernel: Kernel rows and columns should be odd numbers");o=Math.floor(s.length/2),h=Math.floor(s[0].length/2)}else{let d=Math.sqrt(s.length);if(isInteger(d))h=o=Math.floor(Math.sqrt(s.length)/2);else throw new RangeError("validateKernel: Kernel array should be a square");let g=new Array(d);for(let _=0;_<d;_++){g[_]=new Array(d);for(let b=0;b<d;b++)g[_][b]=s[_*d+b]}s=g}else throw new Error(`validateKernel: Invalid Kernel: ${s}`);return{kernel:s,kWidth:h,kHeight:o}}function clamp(s,o){return Math.round(Math.min(Math.max(s,0),o.maxValue))}function directConvolution(s,o,h){if(h===void 0){const _=s.length+o.length-1;h=new Array(_)}fill(h);for(var d=0;d<s.length;d++)for(var g=0;g<o.length;g++)h[d+g]+=s[d]*o[g];return h}function fill(s){for(var o=0;o<s.length;o++)s[o]=0}var fft,hasRequiredFft;function requireFft(){if(hasRequiredFft)return fft;hasRequiredFft=1;function s(o){if(this.size=o|0,this.size<=1||(this.size&this.size-1)!==0)throw new Error("FFT size must be a power of two and bigger than 1");this._csize=o<<1;for(var h=new Array(this.size*2),d=0;d<h.length;d+=2){const tt=Math.PI*d/this.size;h[d]=Math.cos(tt),h[d+1]=-Math.sin(tt)}this.table=h;for(var g=0,_=1;this.size>_;_<<=1)g++;this._width=g%2===0?g-1:g,this._bitrev=new Array(1<<this._width);for(var b=0;b<this._bitrev.length;b++){this._bitrev[b]=0;for(var $=0;$<this._width;$+=2){var et=this._width-$-2;this._bitrev[b]|=(b>>>$&3)<<et}}this._out=null,this._data=null,this._inv=0}return fft=s,s.prototype.fromComplexArray=function(o,h){for(var d=h||new Array(o.length>>>1),g=0;g<o.length;g+=2)d[g>>>1]=o[g];return d},s.prototype.createComplexArray=function(){const o=new Array(this._csize);for(var h=0;h<o.length;h++)o[h]=0;return o},s.prototype.toComplexArray=function(o,h){for(var d=h||this.createComplexArray(),g=0;g<d.length;g+=2)d[g]=o[g>>>1],d[g+1]=0;return d},s.prototype.completeSpectrum=function(o){for(var h=this._csize,d=h>>>1,g=2;g<d;g+=2)o[h-g]=o[g],o[h-g+1]=-o[g+1]},s.prototype.transform=function(o,h){if(o===h)throw new Error("Input and output buffers must be different");this._out=o,this._data=h,this._inv=0,this._transform4(),this._out=null,this._data=null},s.prototype.realTransform=function(o,h){if(o===h)throw new Error("Input and output buffers must be different");this._out=o,this._data=h,this._inv=0,this._realTransform4(),this._out=null,this._data=null},s.prototype.inverseTransform=function(o,h){if(o===h)throw new Error("Input and output buffers must be different");this._out=o,this._data=h,this._inv=1,this._transform4();for(var d=0;d<o.length;d++)o[d]/=this.size;this._out=null,this._data=null},s.prototype._transform4=function(){var o=this._out,h=this._csize,d=this._width,g=1<<d,_=h/g<<1,b,$,et=this._bitrev;if(_===4)for(b=0,$=0;b<h;b+=_,$++){const gt=et[$];this._singleTransform2(b,gt,g)}else for(b=0,$=0;b<h;b+=_,$++){const gt=et[$];this._singleTransform4(b,gt,g)}var tt=this._inv?-1:1,rt=this.table;for(g>>=2;g>=2;g>>=2){_=h/g<<1;var nt=_>>>2;for(b=0;b<h;b+=_)for(var At=b+nt,at=b,lt=0;at<At;at+=2,lt+=g){const gt=at,_t=gt+nt,ct=_t+nt,pt=ct+nt,dt=o[gt],mt=o[gt+1],Qt=o[_t],xt=o[_t+1],bt=o[ct],kt=o[ct+1],Lt=o[pt],Ht=o[pt+1],Pt=dt,jt=mt,Vt=rt[lt],Xt=tt*rt[lt+1],nr=Qt*Vt-xt*Xt,Ar=Qt*Xt+xt*Vt,ar=rt[2*lt],Wt=tt*rt[2*lt+1],pr=bt*ar-kt*Wt,dr=bt*Wt+kt*ar,yr=rt[3*lt],Br=tt*rt[3*lt+1],Lr=Lt*yr-Ht*Br,Ur=Lt*Br+Ht*yr,or=Pt+pr,mr=jt+dr,Ir=Pt-pr,ur=jt-dr,lr=nr+Lr,Xr=Ar+Ur,zr=tt*(nr-Lr),kr=tt*(Ar-Ur),Tr=or+lr,Mr=mr+Xr,nn=or-lr,jr=mr-Xr,Pr=Ir+kr,$r=ur-zr,Cr=Ir-kr,tn=ur+zr;o[gt]=Tr,o[gt+1]=Mr,o[_t]=Pr,o[_t+1]=$r,o[ct]=nn,o[ct+1]=jr,o[pt]=Cr,o[pt+1]=tn}}},s.prototype._singleTransform2=function(o,h,d){const g=this._out,_=this._data,b=_[h],$=_[h+1],et=_[h+d],tt=_[h+d+1],rt=b+et,nt=$+tt,At=b-et,at=$-tt;g[o]=rt,g[o+1]=nt,g[o+2]=At,g[o+3]=at},s.prototype._singleTransform4=function(o,h,d){const g=this._out,_=this._data,b=this._inv?-1:1,$=d*2,et=d*3,tt=_[h],rt=_[h+1],nt=_[h+d],At=_[h+d+1],at=_[h+$],lt=_[h+$+1],gt=_[h+et],_t=_[h+et+1],ct=tt+at,pt=rt+lt,dt=tt-at,mt=rt-lt,Qt=nt+gt,xt=At+_t,bt=b*(nt-gt),kt=b*(At-_t),Lt=ct+Qt,Ht=pt+xt,Pt=dt+kt,jt=mt-bt,Vt=ct-Qt,Xt=pt-xt,nr=dt-kt,Ar=mt+bt;g[o]=Lt,g[o+1]=Ht,g[o+2]=Pt,g[o+3]=jt,g[o+4]=Vt,g[o+5]=Xt,g[o+6]=nr,g[o+7]=Ar},s.prototype._realTransform4=function(){var o=this._out,h=this._csize,d=this._width,g=1<<d,_=h/g<<1,b,$,et=this._bitrev;if(_===4)for(b=0,$=0;b<h;b+=_,$++){const br=et[$];this._singleRealTransform2(b,br>>>1,g>>>1)}else for(b=0,$=0;b<h;b+=_,$++){const br=et[$];this._singleRealTransform4(b,br>>>1,g>>>1)}var tt=this._inv?-1:1,rt=this.table;for(g>>=2;g>=2;g>>=2){_=h/g<<1;var nt=_>>>1,At=nt>>>1,at=At>>>1;for(b=0;b<h;b+=_)for(var lt=0,gt=0;lt<=at;lt+=2,gt+=g){var _t=b+lt,ct=_t+At,pt=ct+At,dt=pt+At,mt=o[_t],Qt=o[_t+1],xt=o[ct],bt=o[ct+1],kt=o[pt],Lt=o[pt+1],Ht=o[dt],Pt=o[dt+1],jt=mt,Vt=Qt,Xt=rt[gt],nr=tt*rt[gt+1],Ar=xt*Xt-bt*nr,ar=xt*nr+bt*Xt,Wt=rt[2*gt],pr=tt*rt[2*gt+1],dr=kt*Wt-Lt*pr,yr=kt*pr+Lt*Wt,Br=rt[3*gt],Lr=tt*rt[3*gt+1],Ur=Ht*Br-Pt*Lr,or=Ht*Lr+Pt*Br,mr=jt+dr,Ir=Vt+yr,ur=jt-dr,lr=Vt-yr,Xr=Ar+Ur,zr=ar+or,kr=tt*(Ar-Ur),Tr=tt*(ar-or),Mr=mr+Xr,nn=Ir+zr,jr=ur+Tr,Pr=lr-kr;if(o[_t]=Mr,o[_t+1]=nn,o[ct]=jr,o[ct+1]=Pr,lt===0){var $r=mr-Xr,Cr=Ir-zr;o[pt]=$r,o[pt+1]=Cr;continue}if(lt!==at){var tn=ur,An=-lr,Jr=mr,Dr=-Ir,on=-tt*Tr,qr=-tt*kr,Yr=-tt*zr,Wr=-tt*Xr,rn=tn+on,Nr=An+qr,en=Jr+Wr,Ft=Dr-Yr,sr=b+At-lt,hr=b+nt-lt;o[sr]=rn,o[sr+1]=Nr,o[hr]=en,o[hr+1]=Ft}}}},s.prototype._singleRealTransform2=function(o,h,d){const g=this._out,_=this._data,b=_[h],$=_[h+d],et=b+$,tt=b-$;g[o]=et,g[o+1]=0,g[o+2]=tt,g[o+3]=0},s.prototype._singleRealTransform4=function(o,h,d){const g=this._out,_=this._data,b=this._inv?-1:1,$=d*2,et=d*3,tt=_[h],rt=_[h+d],nt=_[h+$],At=_[h+et],at=tt+nt,lt=tt-nt,gt=rt+At,_t=b*(rt-At),ct=at+gt,pt=lt,dt=-_t,mt=at-gt,Qt=lt,xt=_t;g[o]=ct,g[o+1]=0,g[o+2]=pt,g[o+3]=dt,g[o+4]=mt,g[o+5]=0,g[o+6]=Qt,g[o+7]=xt},fft}requireFft();function convolutionSeparable(s,o,h,d){const g=new Array(s.length);let _,b,$,et;et=o[1],$=(et.length-1)/2,b=new Array(h+et.length-1),_=new Array(h);for(let tt=0;tt<d;tt++){for(let rt=0;rt<h;rt++)_[rt]=s[tt*h+rt];directConvolution(_,et,b);for(let rt=0;rt<h;rt++)g[tt*h+rt]=b[$+rt]}et=o[0],$=(et.length-1)/2,b=new Array(d+et.length-1),_=new Array(d);for(let tt=0;tt<h;tt++){for(let rt=0;rt<d;rt++)_[rt]=g[rt*h+tt];directConvolution(_,et,b);for(let rt=0;rt<d;rt++)g[rt*h+tt]=b[$+rt]}return g}var matrix$1={};const toString=Object.prototype.toString;function isAnyArray(s){const o=toString.call(s);return o.endsWith("Array]")&&!o.includes("Big")}const libEsm=Object.freeze(Object.defineProperty({__proto__:null,isAnyArray},Symbol.toStringTag,{value:"Module"})),require$$0$1=getAugmentedNamespace(libEsm);function max$1(s){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!isAnyArray(s))throw new TypeError("input must be an array");if(s.length===0)throw new TypeError("input must not be empty");var h=o.fromIndex,d=h===void 0?0:h,g=o.toIndex,_=g===void 0?s.length:g;if(d<0||d>=s.length||!Number.isInteger(d))throw new Error("fromIndex must be a positive integer smaller than length");if(_<=d||_>s.length||!Number.isInteger(_))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var b=s[d],$=d+1;$<_;$++)s[$]>b&&(b=s[$]);return b}function min$1(s){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!isAnyArray(s))throw new TypeError("input must be an array");if(s.length===0)throw new TypeError("input must not be empty");var h=o.fromIndex,d=h===void 0?0:h,g=o.toIndex,_=g===void 0?s.length:g;if(d<0||d>=s.length||!Number.isInteger(d))throw new Error("fromIndex must be a positive integer smaller than length");if(_<=d||_>s.length||!Number.isInteger(_))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var b=s[d],$=d+1;$<_;$++)s[$]<b&&(b=s[$]);return b}function rescale(s){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(isAnyArray(s)){if(s.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var h;if(o.output!==void 0){if(!isAnyArray(o.output))throw new TypeError("output option must be an array if specified");h=o.output}else h=new Array(s.length);var d=min$1(s),g=max$1(s);if(d===g)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var _=o.min,b=_===void 0?o.autoMinMax?d:0:_,$=o.max,et=$===void 0?o.autoMinMax?g:1:$;if(b>=et)throw new RangeError("min option must be smaller than max option");for(var tt=(et-b)/(g-d),rt=0;rt<s.length;rt++)h[rt]=(s[rt]-d)*tt+b;return h}const libEs6=Object.freeze(Object.defineProperty({__proto__:null,default:rescale},Symbol.toStringTag,{value:"Module"})),require$$1=getAugmentedNamespace(libEs6);var hasRequiredMatrix;function requireMatrix(){var s,o,h;if(hasRequiredMatrix)return matrix$1;hasRequiredMatrix=1,Object.defineProperty(matrix$1,"__esModule",{value:!0});var d=require$$0$1,g=require$$1;const _=" ".repeat(2),b=" ".repeat(4);function $(){return et(this)}function et(wt,ot={}){const{maxRows:st=15,maxColumns:ht=10,maxNumSize:vt=8,padMinus:Ut="auto"}=ot;return`${wt.constructor.name} {
${_}[
${b}${tt(wt,st,ht,vt,Ut)}
${_}]
${_}rows: ${wt.rows}
${_}columns: ${wt.columns}
}`}function tt(wt,ot,st,ht,vt){const{rows:Ut,columns:Ot}=wt,zt=Math.min(Ut,ot),Kt=Math.min(Ot,st),_e=[];if(vt==="auto"){vt=!1;t:for(let _r=0;_r<zt;_r++)for(let er=0;er<Kt;er++)if(wt.get(_r,er)<0){vt=!0;break t}}for(let _r=0;_r<zt;_r++){let er=[];for(let Er=0;Er<Kt;Er++)er.push(rt(wt.get(_r,Er),ht,vt));_e.push(`${er.join(" ")}`)}return Kt!==Ot&&(_e[_e.length-1]+=` ... ${Ot-st} more columns`),zt!==Ut&&_e.push(`... ${Ut-ot} more rows`),_e.join(`
${b}`)}function rt(wt,ot,st){return(wt>=0&&st?` ${nt(wt,ot-1)}`:nt(wt,ot)).padEnd(ot)}function nt(wt,ot){let st=wt.toString();if(st.length<=ot)return st;let ht=wt.toFixed(ot);if(ht.length>ot&&(ht=wt.toFixed(Math.max(0,ot-(ht.length-ot)))),ht.length<=ot&&!ht.startsWith("0.000")&&!ht.startsWith("-0.000"))return ht;let vt=wt.toExponential(ot);return vt.length>ot&&(vt=wt.toExponential(Math.max(0,ot-(vt.length-ot)))),vt.slice(0)}function At(wt,ot){wt.prototype.add=function(st){return typeof st=="number"?this.addS(st):this.addM(st)},wt.prototype.addS=function(st){for(let ht=0;ht<this.rows;ht++)for(let vt=0;vt<this.columns;vt++)this.set(ht,vt,this.get(ht,vt)+st);return this},wt.prototype.addM=function(st){if(st=ot.checkMatrix(st),this.rows!==st.rows||this.columns!==st.columns)throw new RangeError("Matrices dimensions must be equal");for(let ht=0;ht<this.rows;ht++)for(let vt=0;vt<this.columns;vt++)this.set(ht,vt,this.get(ht,vt)+st.get(ht,vt));return this},wt.add=function(st,ht){return new ot(st).add(ht)},wt.prototype.sub=function(st){return typeof st=="number"?this.subS(st):this.subM(st)},wt.prototype.subS=function(st){for(let ht=0;ht<this.rows;ht++)for(let vt=0;vt<this.columns;vt++)this.set(ht,vt,this.get(ht,vt)-st);return this},wt.prototype.subM=function(st){if(st=ot.checkMatrix(st),this.rows!==st.rows||this.columns!==st.columns)throw new RangeError("Matrices dimensions must be equal");for(let ht=0;ht<this.rows;ht++)for(let vt=0;vt<this.columns;vt++)this.set(ht,vt,this.get(ht,vt)-st.get(ht,vt));return this},wt.sub=function(st,ht){return new ot(st).sub(ht)},wt.prototype.subtract=wt.prototype.sub,wt.prototype.subtractS=wt.prototype.subS,wt.prototype.subtractM=wt.prototype.subM,wt.subtract=wt.sub,wt.prototype.mul=function(st){return typeof st=="number"?this.mulS(st):this.mulM(st)},wt.prototype.mulS=function(st){for(let ht=0;ht<this.rows;ht++)for(let vt=0;vt<this.columns;vt++)this.set(ht,vt,this.get(ht,vt)*st);return this},wt.prototype.mulM=function(st){if(st=ot.checkMatrix(st),this.rows!==st.rows||this.columns!==st.columns)throw new RangeError("Matrices dimensions must be equal");for(let ht=0;ht<this.rows;ht++)for(let vt=0;vt<this.columns;vt++)this.set(ht,vt,this.get(ht,vt)*st.get(ht,vt));return this},wt.mul=function(st,ht){return new ot(st).mul(ht)},wt.prototype.multiply=wt.prototype.mul,wt.prototype.multiplyS=wt.prototype.mulS,wt.prototype.multiplyM=wt.prototype.mulM,wt.multiply=wt.mul,wt.prototype.div=function(st){return typeof st=="number"?this.divS(st):this.divM(st)},wt.prototype.divS=function(st){for(let ht=0;ht<this.rows;ht++)for(let vt=0;vt<this.columns;vt++)this.set(ht,vt,this.get(ht,vt)/st);return this},wt.prototype.divM=function(st){if(st=ot.checkMatrix(st),this.rows!==st.rows||this.columns!==st.columns)throw new RangeError("Matrices dimensions must be equal");for(let ht=0;ht<this.rows;ht++)for(let vt=0;vt<this.columns;vt++)this.set(ht,vt,this.get(ht,vt)/st.get(ht,vt));return this},wt.div=function(st,ht){return new ot(st).div(ht)},wt.prototype.divide=wt.prototype.div,wt.prototype.divideS=wt.prototype.divS,wt.prototype.divideM=wt.prototype.divM,wt.divide=wt.div,wt.prototype.mod=function(st){return typeof st=="number"?this.modS(st):this.modM(st)},wt.prototype.modS=function(st){for(let ht=0;ht<this.rows;ht++)for(let vt=0;vt<this.columns;vt++)this.set(ht,vt,this.get(ht,vt)%st);return this},wt.prototype.modM=function(st){if(st=ot.checkMatrix(st),this.rows!==st.rows||this.columns!==st.columns)throw new RangeError("Matrices dimensions must be equal");for(let ht=0;ht<this.rows;ht++)for(let vt=0;vt<this.columns;vt++)this.set(ht,vt,this.get(ht,vt)%st.get(ht,vt));return this},wt.mod=function(st,ht){return new ot(st).mod(ht)},wt.prototype.modulus=wt.prototype.mod,wt.prototype.modulusS=wt.prototype.modS,wt.prototype.modulusM=wt.prototype.modM,wt.modulus=wt.mod,wt.prototype.and=function(st){return typeof st=="number"?this.andS(st):this.andM(st)},wt.prototype.andS=function(st){for(let ht=0;ht<this.rows;ht++)for(let vt=0;vt<this.columns;vt++)this.set(ht,vt,this.get(ht,vt)&st);return this},wt.prototype.andM=function(st){if(st=ot.checkMatrix(st),this.rows!==st.rows||this.columns!==st.columns)throw new RangeError("Matrices dimensions must be equal");for(let ht=0;ht<this.rows;ht++)for(let vt=0;vt<this.columns;vt++)this.set(ht,vt,this.get(ht,vt)&st.get(ht,vt));return this},wt.and=function(st,ht){return new ot(st).and(ht)},wt.prototype.or=function(st){return typeof st=="number"?this.orS(st):this.orM(st)},wt.prototype.orS=function(st){for(let ht=0;ht<this.rows;ht++)for(let vt=0;vt<this.columns;vt++)this.set(ht,vt,this.get(ht,vt)|st);return this},wt.prototype.orM=function(st){if(st=ot.checkMatrix(st),this.rows!==st.rows||this.columns!==st.columns)throw new RangeError("Matrices dimensions must be equal");for(let ht=0;ht<this.rows;ht++)for(let vt=0;vt<this.columns;vt++)this.set(ht,vt,this.get(ht,vt)|st.get(ht,vt));return this},wt.or=function(st,ht){return new ot(st).or(ht)},wt.prototype.xor=function(st){return typeof st=="number"?this.xorS(st):this.xorM(st)},wt.prototype.xorS=function(st){for(let ht=0;ht<this.rows;ht++)for(let vt=0;vt<this.columns;vt++)this.set(ht,vt,this.get(ht,vt)^st);return this},wt.prototype.xorM=function(st){if(st=ot.checkMatrix(st),this.rows!==st.rows||this.columns!==st.columns)throw new RangeError("Matrices dimensions must be equal");for(let ht=0;ht<this.rows;ht++)for(let vt=0;vt<this.columns;vt++)this.set(ht,vt,this.get(ht,vt)^st.get(ht,vt));return this},wt.xor=function(st,ht){return new ot(st).xor(ht)},wt.prototype.leftShift=function(st){return typeof st=="number"?this.leftShiftS(st):this.leftShiftM(st)},wt.prototype.leftShiftS=function(st){for(let ht=0;ht<this.rows;ht++)for(let vt=0;vt<this.columns;vt++)this.set(ht,vt,this.get(ht,vt)<<st);return this},wt.prototype.leftShiftM=function(st){if(st=ot.checkMatrix(st),this.rows!==st.rows||this.columns!==st.columns)throw new RangeError("Matrices dimensions must be equal");for(let ht=0;ht<this.rows;ht++)for(let vt=0;vt<this.columns;vt++)this.set(ht,vt,this.get(ht,vt)<<st.get(ht,vt));return this},wt.leftShift=function(st,ht){return new ot(st).leftShift(ht)},wt.prototype.signPropagatingRightShift=function(st){return typeof st=="number"?this.signPropagatingRightShiftS(st):this.signPropagatingRightShiftM(st)},wt.prototype.signPropagatingRightShiftS=function(st){for(let ht=0;ht<this.rows;ht++)for(let vt=0;vt<this.columns;vt++)this.set(ht,vt,this.get(ht,vt)>>st);return this},wt.prototype.signPropagatingRightShiftM=function(st){if(st=ot.checkMatrix(st),this.rows!==st.rows||this.columns!==st.columns)throw new RangeError("Matrices dimensions must be equal");for(let ht=0;ht<this.rows;ht++)for(let vt=0;vt<this.columns;vt++)this.set(ht,vt,this.get(ht,vt)>>st.get(ht,vt));return this},wt.signPropagatingRightShift=function(st,ht){return new ot(st).signPropagatingRightShift(ht)},wt.prototype.rightShift=function(st){return typeof st=="number"?this.rightShiftS(st):this.rightShiftM(st)},wt.prototype.rightShiftS=function(st){for(let ht=0;ht<this.rows;ht++)for(let vt=0;vt<this.columns;vt++)this.set(ht,vt,this.get(ht,vt)>>>st);return this},wt.prototype.rightShiftM=function(st){if(st=ot.checkMatrix(st),this.rows!==st.rows||this.columns!==st.columns)throw new RangeError("Matrices dimensions must be equal");for(let ht=0;ht<this.rows;ht++)for(let vt=0;vt<this.columns;vt++)this.set(ht,vt,this.get(ht,vt)>>>st.get(ht,vt));return this},wt.rightShift=function(st,ht){return new ot(st).rightShift(ht)},wt.prototype.zeroFillRightShift=wt.prototype.rightShift,wt.prototype.zeroFillRightShiftS=wt.prototype.rightShiftS,wt.prototype.zeroFillRightShiftM=wt.prototype.rightShiftM,wt.zeroFillRightShift=wt.rightShift,wt.prototype.not=function(){for(let st=0;st<this.rows;st++)for(let ht=0;ht<this.columns;ht++)this.set(st,ht,~this.get(st,ht));return this},wt.not=function(st){return new ot(st).not()},wt.prototype.abs=function(){for(let st=0;st<this.rows;st++)for(let ht=0;ht<this.columns;ht++)this.set(st,ht,Math.abs(this.get(st,ht)));return this},wt.abs=function(st){return new ot(st).abs()},wt.prototype.acos=function(){for(let st=0;st<this.rows;st++)for(let ht=0;ht<this.columns;ht++)this.set(st,ht,Math.acos(this.get(st,ht)));return this},wt.acos=function(st){return new ot(st).acos()},wt.prototype.acosh=function(){for(let st=0;st<this.rows;st++)for(let ht=0;ht<this.columns;ht++)this.set(st,ht,Math.acosh(this.get(st,ht)));return this},wt.acosh=function(st){return new ot(st).acosh()},wt.prototype.asin=function(){for(let st=0;st<this.rows;st++)for(let ht=0;ht<this.columns;ht++)this.set(st,ht,Math.asin(this.get(st,ht)));return this},wt.asin=function(st){return new ot(st).asin()},wt.prototype.asinh=function(){for(let st=0;st<this.rows;st++)for(let ht=0;ht<this.columns;ht++)this.set(st,ht,Math.asinh(this.get(st,ht)));return this},wt.asinh=function(st){return new ot(st).asinh()},wt.prototype.atan=function(){for(let st=0;st<this.rows;st++)for(let ht=0;ht<this.columns;ht++)this.set(st,ht,Math.atan(this.get(st,ht)));return this},wt.atan=function(st){return new ot(st).atan()},wt.prototype.atanh=function(){for(let st=0;st<this.rows;st++)for(let ht=0;ht<this.columns;ht++)this.set(st,ht,Math.atanh(this.get(st,ht)));return this},wt.atanh=function(st){return new ot(st).atanh()},wt.prototype.cbrt=function(){for(let st=0;st<this.rows;st++)for(let ht=0;ht<this.columns;ht++)this.set(st,ht,Math.cbrt(this.get(st,ht)));return this},wt.cbrt=function(st){return new ot(st).cbrt()},wt.prototype.ceil=function(){for(let st=0;st<this.rows;st++)for(let ht=0;ht<this.columns;ht++)this.set(st,ht,Math.ceil(this.get(st,ht)));return this},wt.ceil=function(st){return new ot(st).ceil()},wt.prototype.clz32=function(){for(let st=0;st<this.rows;st++)for(let ht=0;ht<this.columns;ht++)this.set(st,ht,Math.clz32(this.get(st,ht)));return this},wt.clz32=function(st){return new ot(st).clz32()},wt.prototype.cos=function(){for(let st=0;st<this.rows;st++)for(let ht=0;ht<this.columns;ht++)this.set(st,ht,Math.cos(this.get(st,ht)));return this},wt.cos=function(st){return new ot(st).cos()},wt.prototype.cosh=function(){for(let st=0;st<this.rows;st++)for(let ht=0;ht<this.columns;ht++)this.set(st,ht,Math.cosh(this.get(st,ht)));return this},wt.cosh=function(st){return new ot(st).cosh()},wt.prototype.exp=function(){for(let st=0;st<this.rows;st++)for(let ht=0;ht<this.columns;ht++)this.set(st,ht,Math.exp(this.get(st,ht)));return this},wt.exp=function(st){return new ot(st).exp()},wt.prototype.expm1=function(){for(let st=0;st<this.rows;st++)for(let ht=0;ht<this.columns;ht++)this.set(st,ht,Math.expm1(this.get(st,ht)));return this},wt.expm1=function(st){return new ot(st).expm1()},wt.prototype.floor=function(){for(let st=0;st<this.rows;st++)for(let ht=0;ht<this.columns;ht++)this.set(st,ht,Math.floor(this.get(st,ht)));return this},wt.floor=function(st){return new ot(st).floor()},wt.prototype.fround=function(){for(let st=0;st<this.rows;st++)for(let ht=0;ht<this.columns;ht++)this.set(st,ht,Math.fround(this.get(st,ht)));return this},wt.fround=function(st){return new ot(st).fround()},wt.prototype.log=function(){for(let st=0;st<this.rows;st++)for(let ht=0;ht<this.columns;ht++)this.set(st,ht,Math.log(this.get(st,ht)));return this},wt.log=function(st){return new ot(st).log()},wt.prototype.log1p=function(){for(let st=0;st<this.rows;st++)for(let ht=0;ht<this.columns;ht++)this.set(st,ht,Math.log1p(this.get(st,ht)));return this},wt.log1p=function(st){return new ot(st).log1p()},wt.prototype.log10=function(){for(let st=0;st<this.rows;st++)for(let ht=0;ht<this.columns;ht++)this.set(st,ht,Math.log10(this.get(st,ht)));return this},wt.log10=function(st){return new ot(st).log10()},wt.prototype.log2=function(){for(let st=0;st<this.rows;st++)for(let ht=0;ht<this.columns;ht++)this.set(st,ht,Math.log2(this.get(st,ht)));return this},wt.log2=function(st){return new ot(st).log2()},wt.prototype.round=function(){for(let st=0;st<this.rows;st++)for(let ht=0;ht<this.columns;ht++)this.set(st,ht,Math.round(this.get(st,ht)));return this},wt.round=function(st){return new ot(st).round()},wt.prototype.sign=function(){for(let st=0;st<this.rows;st++)for(let ht=0;ht<this.columns;ht++)this.set(st,ht,Math.sign(this.get(st,ht)));return this},wt.sign=function(st){return new ot(st).sign()},wt.prototype.sin=function(){for(let st=0;st<this.rows;st++)for(let ht=0;ht<this.columns;ht++)this.set(st,ht,Math.sin(this.get(st,ht)));return this},wt.sin=function(st){return new ot(st).sin()},wt.prototype.sinh=function(){for(let st=0;st<this.rows;st++)for(let ht=0;ht<this.columns;ht++)this.set(st,ht,Math.sinh(this.get(st,ht)));return this},wt.sinh=function(st){return new ot(st).sinh()},wt.prototype.sqrt=function(){for(let st=0;st<this.rows;st++)for(let ht=0;ht<this.columns;ht++)this.set(st,ht,Math.sqrt(this.get(st,ht)));return this},wt.sqrt=function(st){return new ot(st).sqrt()},wt.prototype.tan=function(){for(let st=0;st<this.rows;st++)for(let ht=0;ht<this.columns;ht++)this.set(st,ht,Math.tan(this.get(st,ht)));return this},wt.tan=function(st){return new ot(st).tan()},wt.prototype.tanh=function(){for(let st=0;st<this.rows;st++)for(let ht=0;ht<this.columns;ht++)this.set(st,ht,Math.tanh(this.get(st,ht)));return this},wt.tanh=function(st){return new ot(st).tanh()},wt.prototype.trunc=function(){for(let st=0;st<this.rows;st++)for(let ht=0;ht<this.columns;ht++)this.set(st,ht,Math.trunc(this.get(st,ht)));return this},wt.trunc=function(st){return new ot(st).trunc()},wt.pow=function(st,ht){return new ot(st).pow(ht)},wt.prototype.pow=function(st){return typeof st=="number"?this.powS(st):this.powM(st)},wt.prototype.powS=function(st){for(let ht=0;ht<this.rows;ht++)for(let vt=0;vt<this.columns;vt++)this.set(ht,vt,this.get(ht,vt)**st);return this},wt.prototype.powM=function(st){if(st=ot.checkMatrix(st),this.rows!==st.rows||this.columns!==st.columns)throw new RangeError("Matrices dimensions must be equal");for(let ht=0;ht<this.rows;ht++)for(let vt=0;vt<this.columns;vt++)this.set(ht,vt,this.get(ht,vt)**st.get(ht,vt));return this}}function at(wt,ot,st){let ht=st?wt.rows:wt.rows-1;if(ot<0||ot>ht)throw new RangeError("Row index out of range")}function lt(wt,ot,st){let ht=st?wt.columns:wt.columns-1;if(ot<0||ot>ht)throw new RangeError("Column index out of range")}function gt(wt,ot){if(ot.to1DArray&&(ot=ot.to1DArray()),ot.length!==wt.columns)throw new RangeError("vector size must be the same as the number of columns");return ot}function _t(wt,ot){if(ot.to1DArray&&(ot=ot.to1DArray()),ot.length!==wt.rows)throw new RangeError("vector size must be the same as the number of rows");return ot}function ct(wt,ot){if(!d.isAnyArray(ot))throw new TypeError("row indices must be an array");for(let st=0;st<ot.length;st++)if(ot[st]<0||ot[st]>=wt.rows)throw new RangeError("row indices are out of range")}function pt(wt,ot){if(!d.isAnyArray(ot))throw new TypeError("column indices must be an array");for(let st=0;st<ot.length;st++)if(ot[st]<0||ot[st]>=wt.columns)throw new RangeError("column indices are out of range")}function dt(wt,ot,st,ht,vt){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(Qt("startRow",ot),Qt("endRow",st),Qt("startColumn",ht),Qt("endColumn",vt),ot>st||ht>vt||ot<0||ot>=wt.rows||st<0||st>=wt.rows||ht<0||ht>=wt.columns||vt<0||vt>=wt.columns)throw new RangeError("Submatrix indices are out of range")}function mt(wt,ot=0){let st=[];for(let ht=0;ht<wt;ht++)st.push(ot);return st}function Qt(wt,ot){if(typeof ot!="number")throw new TypeError(`${wt} must be a number`)}function xt(wt){if(wt.isEmpty())throw new Error("Empty matrix has no elements to index")}function bt(wt){let ot=mt(wt.rows);for(let st=0;st<wt.rows;++st)for(let ht=0;ht<wt.columns;++ht)ot[st]+=wt.get(st,ht);return ot}function kt(wt){let ot=mt(wt.columns);for(let st=0;st<wt.rows;++st)for(let ht=0;ht<wt.columns;++ht)ot[ht]+=wt.get(st,ht);return ot}function Lt(wt){let ot=0;for(let st=0;st<wt.rows;st++)for(let ht=0;ht<wt.columns;ht++)ot+=wt.get(st,ht);return ot}function Ht(wt){let ot=mt(wt.rows,1);for(let st=0;st<wt.rows;++st)for(let ht=0;ht<wt.columns;++ht)ot[st]*=wt.get(st,ht);return ot}function Pt(wt){let ot=mt(wt.columns,1);for(let st=0;st<wt.rows;++st)for(let ht=0;ht<wt.columns;++ht)ot[ht]*=wt.get(st,ht);return ot}function jt(wt){let ot=1;for(let st=0;st<wt.rows;st++)for(let ht=0;ht<wt.columns;ht++)ot*=wt.get(st,ht);return ot}function Vt(wt,ot,st){const ht=wt.rows,vt=wt.columns,Ut=[];for(let Ot=0;Ot<ht;Ot++){let zt=0,Kt=0,_e=0;for(let _r=0;_r<vt;_r++)_e=wt.get(Ot,_r)-st[Ot],zt+=_e,Kt+=_e*_e;ot?Ut.push((Kt-zt*zt/vt)/(vt-1)):Ut.push((Kt-zt*zt/vt)/vt)}return Ut}function Xt(wt,ot,st){const ht=wt.rows,vt=wt.columns,Ut=[];for(let Ot=0;Ot<vt;Ot++){let zt=0,Kt=0,_e=0;for(let _r=0;_r<ht;_r++)_e=wt.get(_r,Ot)-st[Ot],zt+=_e,Kt+=_e*_e;ot?Ut.push((Kt-zt*zt/ht)/(ht-1)):Ut.push((Kt-zt*zt/ht)/ht)}return Ut}function nr(wt,ot,st){const ht=wt.rows,vt=wt.columns,Ut=ht*vt;let Ot=0,zt=0,Kt=0;for(let _e=0;_e<ht;_e++)for(let _r=0;_r<vt;_r++)Kt=wt.get(_e,_r)-st,Ot+=Kt,zt+=Kt*Kt;return ot?(zt-Ot*Ot/Ut)/(Ut-1):(zt-Ot*Ot/Ut)/Ut}function Ar(wt,ot){for(let st=0;st<wt.rows;st++)for(let ht=0;ht<wt.columns;ht++)wt.set(st,ht,wt.get(st,ht)-ot[st])}function ar(wt,ot){for(let st=0;st<wt.rows;st++)for(let ht=0;ht<wt.columns;ht++)wt.set(st,ht,wt.get(st,ht)-ot[ht])}function Wt(wt,ot){for(let st=0;st<wt.rows;st++)for(let ht=0;ht<wt.columns;ht++)wt.set(st,ht,wt.get(st,ht)-ot)}function pr(wt){const ot=[];for(let st=0;st<wt.rows;st++){let ht=0;for(let vt=0;vt<wt.columns;vt++)ht+=wt.get(st,vt)**2/(wt.columns-1);ot.push(Math.sqrt(ht))}return ot}function dr(wt,ot){for(let st=0;st<wt.rows;st++)for(let ht=0;ht<wt.columns;ht++)wt.set(st,ht,wt.get(st,ht)/ot[st])}function yr(wt){const ot=[];for(let st=0;st<wt.columns;st++){let ht=0;for(let vt=0;vt<wt.rows;vt++)ht+=wt.get(vt,st)**2/(wt.rows-1);ot.push(Math.sqrt(ht))}return ot}function Br(wt,ot){for(let st=0;st<wt.rows;st++)for(let ht=0;ht<wt.columns;ht++)wt.set(st,ht,wt.get(st,ht)/ot[ht])}function Lr(wt){const ot=wt.size-1;let st=0;for(let ht=0;ht<wt.columns;ht++)for(let vt=0;vt<wt.rows;vt++)st+=wt.get(vt,ht)**2/ot;return Math.sqrt(st)}function Ur(wt,ot){for(let st=0;st<wt.rows;st++)for(let ht=0;ht<wt.columns;ht++)wt.set(st,ht,wt.get(st,ht)/ot)}class or{static from1DArray(ot,st,ht){if(ot*st!==ht.length)throw new RangeError("data length does not match given dimensions");let vt=new lr(ot,st);for(let Ut=0;Ut<ot;Ut++)for(let Ot=0;Ot<st;Ot++)vt.set(Ut,Ot,ht[Ut*st+Ot]);return vt}static rowVector(ot){let st=new lr(1,ot.length);for(let ht=0;ht<ot.length;ht++)st.set(0,ht,ot[ht]);return st}static columnVector(ot){let st=new lr(ot.length,1);for(let ht=0;ht<ot.length;ht++)st.set(ht,0,ot[ht]);return st}static zeros(ot,st){return new lr(ot,st)}static ones(ot,st){return new lr(ot,st).fill(1)}static rand(ot,st,ht={}){if(typeof ht!="object")throw new TypeError("options must be an object");const{random:vt=Math.random}=ht;let Ut=new lr(ot,st);for(let Ot=0;Ot<ot;Ot++)for(let zt=0;zt<st;zt++)Ut.set(Ot,zt,vt());return Ut}static randInt(ot,st,ht={}){if(typeof ht!="object")throw new TypeError("options must be an object");const{min:vt=0,max:Ut=1e3,random:Ot=Math.random}=ht;if(!Number.isInteger(vt))throw new TypeError("min must be an integer");if(!Number.isInteger(Ut))throw new TypeError("max must be an integer");if(vt>=Ut)throw new RangeError("min must be smaller than max");let zt=Ut-vt,Kt=new lr(ot,st);for(let _e=0;_e<ot;_e++)for(let _r=0;_r<st;_r++){let er=vt+Math.round(Ot()*zt);Kt.set(_e,_r,er)}return Kt}static eye(ot,st,ht){st===void 0&&(st=ot),ht===void 0&&(ht=1);let vt=Math.min(ot,st),Ut=this.zeros(ot,st);for(let Ot=0;Ot<vt;Ot++)Ut.set(Ot,Ot,ht);return Ut}static diag(ot,st,ht){let vt=ot.length;st===void 0&&(st=vt),ht===void 0&&(ht=st);let Ut=Math.min(vt,st,ht),Ot=this.zeros(st,ht);for(let zt=0;zt<Ut;zt++)Ot.set(zt,zt,ot[zt]);return Ot}static min(ot,st){ot=this.checkMatrix(ot),st=this.checkMatrix(st);let ht=ot.rows,vt=ot.columns,Ut=new lr(ht,vt);for(let Ot=0;Ot<ht;Ot++)for(let zt=0;zt<vt;zt++)Ut.set(Ot,zt,Math.min(ot.get(Ot,zt),st.get(Ot,zt)));return Ut}static max(ot,st){ot=this.checkMatrix(ot),st=this.checkMatrix(st);let ht=ot.rows,vt=ot.columns,Ut=new this(ht,vt);for(let Ot=0;Ot<ht;Ot++)for(let zt=0;zt<vt;zt++)Ut.set(Ot,zt,Math.max(ot.get(Ot,zt),st.get(Ot,zt)));return Ut}static checkMatrix(ot){return or.isMatrix(ot)?ot:new lr(ot)}static isMatrix(ot){return ot!=null&&ot.klass==="Matrix"}get size(){return this.rows*this.columns}apply(ot){if(typeof ot!="function")throw new TypeError("callback must be a function");for(let st=0;st<this.rows;st++)for(let ht=0;ht<this.columns;ht++)ot.call(this,st,ht);return this}to1DArray(){let ot=[];for(let st=0;st<this.rows;st++)for(let ht=0;ht<this.columns;ht++)ot.push(this.get(st,ht));return ot}to2DArray(){let ot=[];for(let st=0;st<this.rows;st++){ot.push([]);for(let ht=0;ht<this.columns;ht++)ot[st].push(this.get(st,ht))}return ot}toJSON(){return this.to2DArray()}isRowVector(){return this.rows===1}isColumnVector(){return this.columns===1}isVector(){return this.rows===1||this.columns===1}isSquare(){return this.rows===this.columns}isEmpty(){return this.rows===0||this.columns===0}isSymmetric(){if(this.isSquare()){for(let ot=0;ot<this.rows;ot++)for(let st=0;st<=ot;st++)if(this.get(ot,st)!==this.get(st,ot))return!1;return!0}return!1}isDistance(){if(!this.isSymmetric())return!1;for(let ot=0;ot<this.rows;ot++)if(this.get(ot,ot)!==0)return!1;return!0}isEchelonForm(){let ot=0,st=0,ht=-1,vt=!0,Ut=!1;for(;ot<this.rows&&vt;){for(st=0,Ut=!1;st<this.columns&&Ut===!1;)this.get(ot,st)===0?st++:this.get(ot,st)===1&&st>ht?(Ut=!0,ht=st):(vt=!1,Ut=!0);ot++}return vt}isReducedEchelonForm(){let ot=0,st=0,ht=-1,vt=!0,Ut=!1;for(;ot<this.rows&&vt;){for(st=0,Ut=!1;st<this.columns&&Ut===!1;)this.get(ot,st)===0?st++:this.get(ot,st)===1&&st>ht?(Ut=!0,ht=st):(vt=!1,Ut=!0);for(let Ot=st+1;Ot<this.rows;Ot++)this.get(ot,Ot)!==0&&(vt=!1);ot++}return vt}echelonForm(){let ot=this.clone(),st=0,ht=0;for(;st<ot.rows&&ht<ot.columns;){let vt=st;for(let Ut=st;Ut<ot.rows;Ut++)ot.get(Ut,ht)>ot.get(vt,ht)&&(vt=Ut);if(ot.get(vt,ht)===0)ht++;else{ot.swapRows(st,vt);let Ut=ot.get(st,ht);for(let Ot=ht;Ot<ot.columns;Ot++)ot.set(st,Ot,ot.get(st,Ot)/Ut);for(let Ot=st+1;Ot<ot.rows;Ot++){let zt=ot.get(Ot,ht)/ot.get(st,ht);ot.set(Ot,ht,0);for(let Kt=ht+1;Kt<ot.columns;Kt++)ot.set(Ot,Kt,ot.get(Ot,Kt)-ot.get(st,Kt)*zt)}st++,ht++}}return ot}reducedEchelonForm(){let ot=this.echelonForm(),st=ot.columns,ht=ot.rows,vt=ht-1;for(;vt>=0;)if(ot.maxRow(vt)===0)vt--;else{let Ut=0,Ot=!1;for(;Ut<ht&&Ot===!1;)ot.get(vt,Ut)===1?Ot=!0:Ut++;for(let zt=0;zt<vt;zt++){let Kt=ot.get(zt,Ut);for(let _e=Ut;_e<st;_e++){let _r=ot.get(zt,_e)-Kt*ot.get(vt,_e);ot.set(zt,_e,_r)}}vt--}return ot}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(ot={}){if(typeof ot!="object")throw new TypeError("options must be an object");const{rows:st=1,columns:ht=1}=ot;if(!Number.isInteger(st)||st<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(ht)||ht<=0)throw new TypeError("columns must be a positive integer");let vt=new lr(this.rows*st,this.columns*ht);for(let Ut=0;Ut<st;Ut++)for(let Ot=0;Ot<ht;Ot++)vt.setSubMatrix(this,this.rows*Ut,this.columns*Ot);return vt}fill(ot){for(let st=0;st<this.rows;st++)for(let ht=0;ht<this.columns;ht++)this.set(st,ht,ot);return this}neg(){return this.mulS(-1)}getRow(ot){at(this,ot);let st=[];for(let ht=0;ht<this.columns;ht++)st.push(this.get(ot,ht));return st}getRowVector(ot){return lr.rowVector(this.getRow(ot))}setRow(ot,st){at(this,ot),st=gt(this,st);for(let ht=0;ht<this.columns;ht++)this.set(ot,ht,st[ht]);return this}swapRows(ot,st){at(this,ot),at(this,st);for(let ht=0;ht<this.columns;ht++){let vt=this.get(ot,ht);this.set(ot,ht,this.get(st,ht)),this.set(st,ht,vt)}return this}getColumn(ot){lt(this,ot);let st=[];for(let ht=0;ht<this.rows;ht++)st.push(this.get(ht,ot));return st}getColumnVector(ot){return lr.columnVector(this.getColumn(ot))}setColumn(ot,st){lt(this,ot),st=_t(this,st);for(let ht=0;ht<this.rows;ht++)this.set(ht,ot,st[ht]);return this}swapColumns(ot,st){lt(this,ot),lt(this,st);for(let ht=0;ht<this.rows;ht++){let vt=this.get(ht,ot);this.set(ht,ot,this.get(ht,st)),this.set(ht,st,vt)}return this}addRowVector(ot){ot=gt(this,ot);for(let st=0;st<this.rows;st++)for(let ht=0;ht<this.columns;ht++)this.set(st,ht,this.get(st,ht)+ot[ht]);return this}subRowVector(ot){ot=gt(this,ot);for(let st=0;st<this.rows;st++)for(let ht=0;ht<this.columns;ht++)this.set(st,ht,this.get(st,ht)-ot[ht]);return this}mulRowVector(ot){ot=gt(this,ot);for(let st=0;st<this.rows;st++)for(let ht=0;ht<this.columns;ht++)this.set(st,ht,this.get(st,ht)*ot[ht]);return this}divRowVector(ot){ot=gt(this,ot);for(let st=0;st<this.rows;st++)for(let ht=0;ht<this.columns;ht++)this.set(st,ht,this.get(st,ht)/ot[ht]);return this}addColumnVector(ot){ot=_t(this,ot);for(let st=0;st<this.rows;st++)for(let ht=0;ht<this.columns;ht++)this.set(st,ht,this.get(st,ht)+ot[st]);return this}subColumnVector(ot){ot=_t(this,ot);for(let st=0;st<this.rows;st++)for(let ht=0;ht<this.columns;ht++)this.set(st,ht,this.get(st,ht)-ot[st]);return this}mulColumnVector(ot){ot=_t(this,ot);for(let st=0;st<this.rows;st++)for(let ht=0;ht<this.columns;ht++)this.set(st,ht,this.get(st,ht)*ot[st]);return this}divColumnVector(ot){ot=_t(this,ot);for(let st=0;st<this.rows;st++)for(let ht=0;ht<this.columns;ht++)this.set(st,ht,this.get(st,ht)/ot[st]);return this}mulRow(ot,st){at(this,ot);for(let ht=0;ht<this.columns;ht++)this.set(ot,ht,this.get(ot,ht)*st);return this}mulColumn(ot,st){lt(this,ot);for(let ht=0;ht<this.rows;ht++)this.set(ht,ot,this.get(ht,ot)*st);return this}max(ot){if(this.isEmpty())return NaN;switch(ot){case"row":{const st=new Array(this.rows).fill(Number.NEGATIVE_INFINITY);for(let ht=0;ht<this.rows;ht++)for(let vt=0;vt<this.columns;vt++)this.get(ht,vt)>st[ht]&&(st[ht]=this.get(ht,vt));return st}case"column":{const st=new Array(this.columns).fill(Number.NEGATIVE_INFINITY);for(let ht=0;ht<this.rows;ht++)for(let vt=0;vt<this.columns;vt++)this.get(ht,vt)>st[vt]&&(st[vt]=this.get(ht,vt));return st}case void 0:{let st=this.get(0,0);for(let ht=0;ht<this.rows;ht++)for(let vt=0;vt<this.columns;vt++)this.get(ht,vt)>st&&(st=this.get(ht,vt));return st}default:throw new Error(`invalid option: ${ot}`)}}maxIndex(){xt(this);let ot=this.get(0,0),st=[0,0];for(let ht=0;ht<this.rows;ht++)for(let vt=0;vt<this.columns;vt++)this.get(ht,vt)>ot&&(ot=this.get(ht,vt),st[0]=ht,st[1]=vt);return st}min(ot){if(this.isEmpty())return NaN;switch(ot){case"row":{const st=new Array(this.rows).fill(Number.POSITIVE_INFINITY);for(let ht=0;ht<this.rows;ht++)for(let vt=0;vt<this.columns;vt++)this.get(ht,vt)<st[ht]&&(st[ht]=this.get(ht,vt));return st}case"column":{const st=new Array(this.columns).fill(Number.POSITIVE_INFINITY);for(let ht=0;ht<this.rows;ht++)for(let vt=0;vt<this.columns;vt++)this.get(ht,vt)<st[vt]&&(st[vt]=this.get(ht,vt));return st}case void 0:{let st=this.get(0,0);for(let ht=0;ht<this.rows;ht++)for(let vt=0;vt<this.columns;vt++)this.get(ht,vt)<st&&(st=this.get(ht,vt));return st}default:throw new Error(`invalid option: ${ot}`)}}minIndex(){xt(this);let ot=this.get(0,0),st=[0,0];for(let ht=0;ht<this.rows;ht++)for(let vt=0;vt<this.columns;vt++)this.get(ht,vt)<ot&&(ot=this.get(ht,vt),st[0]=ht,st[1]=vt);return st}maxRow(ot){if(at(this,ot),this.isEmpty())return NaN;let st=this.get(ot,0);for(let ht=1;ht<this.columns;ht++)this.get(ot,ht)>st&&(st=this.get(ot,ht));return st}maxRowIndex(ot){at(this,ot),xt(this);let st=this.get(ot,0),ht=[ot,0];for(let vt=1;vt<this.columns;vt++)this.get(ot,vt)>st&&(st=this.get(ot,vt),ht[1]=vt);return ht}minRow(ot){if(at(this,ot),this.isEmpty())return NaN;let st=this.get(ot,0);for(let ht=1;ht<this.columns;ht++)this.get(ot,ht)<st&&(st=this.get(ot,ht));return st}minRowIndex(ot){at(this,ot),xt(this);let st=this.get(ot,0),ht=[ot,0];for(let vt=1;vt<this.columns;vt++)this.get(ot,vt)<st&&(st=this.get(ot,vt),ht[1]=vt);return ht}maxColumn(ot){if(lt(this,ot),this.isEmpty())return NaN;let st=this.get(0,ot);for(let ht=1;ht<this.rows;ht++)this.get(ht,ot)>st&&(st=this.get(ht,ot));return st}maxColumnIndex(ot){lt(this,ot),xt(this);let st=this.get(0,ot),ht=[0,ot];for(let vt=1;vt<this.rows;vt++)this.get(vt,ot)>st&&(st=this.get(vt,ot),ht[0]=vt);return ht}minColumn(ot){if(lt(this,ot),this.isEmpty())return NaN;let st=this.get(0,ot);for(let ht=1;ht<this.rows;ht++)this.get(ht,ot)<st&&(st=this.get(ht,ot));return st}minColumnIndex(ot){lt(this,ot),xt(this);let st=this.get(0,ot),ht=[0,ot];for(let vt=1;vt<this.rows;vt++)this.get(vt,ot)<st&&(st=this.get(vt,ot),ht[0]=vt);return ht}diag(){let ot=Math.min(this.rows,this.columns),st=[];for(let ht=0;ht<ot;ht++)st.push(this.get(ht,ht));return st}norm(ot="frobenius"){switch(ot){case"max":return this.max();case"frobenius":return Math.sqrt(this.dot(this));default:throw new RangeError(`unknown norm type: ${ot}`)}}cumulativeSum(){let ot=0;for(let st=0;st<this.rows;st++)for(let ht=0;ht<this.columns;ht++)ot+=this.get(st,ht),this.set(st,ht,ot);return this}dot(ot){or.isMatrix(ot)&&(ot=ot.to1DArray());let st=this.to1DArray();if(st.length!==ot.length)throw new RangeError("vectors do not have the same size");let ht=0;for(let vt=0;vt<st.length;vt++)ht+=st[vt]*ot[vt];return ht}mmul(ot){ot=lr.checkMatrix(ot);let st=this.rows,ht=this.columns,vt=ot.columns,Ut=new lr(st,vt),Ot=new Float64Array(ht);for(let zt=0;zt<vt;zt++){for(let Kt=0;Kt<ht;Kt++)Ot[Kt]=ot.get(Kt,zt);for(let Kt=0;Kt<st;Kt++){let _e=0;for(let _r=0;_r<ht;_r++)_e+=this.get(Kt,_r)*Ot[_r];Ut.set(Kt,zt,_e)}}return Ut}mpow(ot){if(!this.isSquare())throw new RangeError("Matrix must be square");if(!Number.isInteger(ot)||ot<0)throw new RangeError("Exponent must be a non-negative integer");let st=lr.eye(this.rows),ht=this;for(let vt=ot;vt>=1;vt/=2)vt&1&&(st=st.mmul(ht)),ht=ht.mmul(ht);return st}strassen2x2(ot){ot=lr.checkMatrix(ot);let st=new lr(2,2);const ht=this.get(0,0),vt=ot.get(0,0),Ut=this.get(0,1),Ot=ot.get(0,1),zt=this.get(1,0),Kt=ot.get(1,0),_e=this.get(1,1),_r=ot.get(1,1),er=(ht+_e)*(vt+_r),Er=(zt+_e)*vt,Fr=ht*(Ot-_r),vr=_e*(Kt-vt),xr=(ht+Ut)*_r,Zr=(zt-ht)*(vt+Ot),fr=(Ut-_e)*(Kt+_r),Gr=er+vr-xr+fr,an=Fr+xr,fn=Er+vr,dn=er-Er+Fr+Zr;return st.set(0,0,Gr),st.set(0,1,an),st.set(1,0,fn),st.set(1,1,dn),st}strassen3x3(ot){ot=lr.checkMatrix(ot);let st=new lr(3,3);const ht=this.get(0,0),vt=this.get(0,1),Ut=this.get(0,2),Ot=this.get(1,0),zt=this.get(1,1),Kt=this.get(1,2),_e=this.get(2,0),_r=this.get(2,1),er=this.get(2,2),Er=ot.get(0,0),Fr=ot.get(0,1),vr=ot.get(0,2),xr=ot.get(1,0),Zr=ot.get(1,1),fr=ot.get(1,2),Gr=ot.get(2,0),an=ot.get(2,1),fn=ot.get(2,2),dn=(ht+vt+Ut-Ot-zt-_r-er)*Zr,xn=(ht-Ot)*(-Fr+Zr),un=zt*(-Er+Fr+xr-Zr-fr-Gr+fn),hn=(-ht+Ot+zt)*(Er-Fr+Zr),Sn=(Ot+zt)*(-Er+Fr),wr=ht*Er,Or=(-ht+_e+_r)*(Er-vr+fr),sn=(-ht+_e)*(vr-fr),Vr=(_e+_r)*(-Er+vr),En=(ht+vt+Ut-zt-Kt-_e-_r)*fr,bn=_r*(-Er+vr+xr-Zr-fr-Gr+an),Fn=(-Ut+_r+er)*(Zr+Gr-an),Cn=(Ut-er)*(Zr-an),gn=Ut*Gr,Bn=(_r+er)*(-Gr+an),Qn=(-Ut+zt+Kt)*(fr+Gr-fn),Ln=(Ut-Kt)*(fr-fn),Hn=(zt+Kt)*(-Gr+fn),_n=vt*xr,cn=Kt*an,vn=Ot*vr,Mn=_e*Fr,In=er*fn,Nn=wr+gn+_n,OA=dn+hn+Sn+wr+Fn+gn+Bn,sA=wr+Or+Vr+En+gn+Qn+Hn,Zn=xn+un+hn+wr+gn+Qn+Ln,kn=xn+hn+Sn+wr+cn,Yn=gn+Qn+Ln+Hn+vn,rA=wr+Or+sn+bn+Fn+Cn+gn,nA=Fn+Cn+gn+Bn+Mn,dA=wr+Or+sn+Vr+In;return st.set(0,0,Nn),st.set(0,1,OA),st.set(0,2,sA),st.set(1,0,Zn),st.set(1,1,kn),st.set(1,2,Yn),st.set(2,0,rA),st.set(2,1,nA),st.set(2,2,dA),st}mmulStrassen(ot){ot=lr.checkMatrix(ot);let st=this.clone(),ht=st.rows,vt=st.columns,Ut=ot.rows,Ot=ot.columns;vt!==Ut&&console.warn(`Multiplying ${ht} x ${vt} and ${Ut} x ${Ot} matrix: dimensions do not match.`);function zt(er,Er,Fr){let vr=er.rows,xr=er.columns;if(vr===Er&&xr===Fr)return er;{let Zr=or.zeros(Er,Fr);return Zr=Zr.setSubMatrix(er,0,0),Zr}}let Kt=Math.max(ht,Ut),_e=Math.max(vt,Ot);st=zt(st,Kt,_e),ot=zt(ot,Kt,_e);function _r(er,Er,Fr,vr){if(Fr<=512||vr<=512)return er.mmul(Er);Fr%2===1&&vr%2===1?(er=zt(er,Fr+1,vr+1),Er=zt(Er,Fr+1,vr+1)):Fr%2===1?(er=zt(er,Fr+1,vr),Er=zt(Er,Fr+1,vr)):vr%2===1&&(er=zt(er,Fr,vr+1),Er=zt(Er,Fr,vr+1));let xr=parseInt(er.rows/2,10),Zr=parseInt(er.columns/2,10),fr=er.subMatrix(0,xr-1,0,Zr-1),Gr=Er.subMatrix(0,xr-1,0,Zr-1),an=er.subMatrix(0,xr-1,Zr,er.columns-1),fn=Er.subMatrix(0,xr-1,Zr,Er.columns-1),dn=er.subMatrix(xr,er.rows-1,0,Zr-1),xn=Er.subMatrix(xr,Er.rows-1,0,Zr-1),un=er.subMatrix(xr,er.rows-1,Zr,er.columns-1),hn=Er.subMatrix(xr,Er.rows-1,Zr,Er.columns-1),Sn=_r(or.add(fr,un),or.add(Gr,hn),xr,Zr),wr=_r(or.add(dn,un),Gr,xr,Zr),Or=_r(fr,or.sub(fn,hn),xr,Zr),sn=_r(un,or.sub(xn,Gr),xr,Zr),Vr=_r(or.add(fr,an),hn,xr,Zr),En=_r(or.sub(dn,fr),or.add(Gr,fn),xr,Zr),bn=_r(or.sub(an,un),or.add(xn,hn),xr,Zr),Fn=or.add(Sn,sn);Fn.sub(Vr),Fn.add(bn);let Cn=or.add(Or,Vr),gn=or.add(wr,sn),Bn=or.sub(Sn,wr);Bn.add(Or),Bn.add(En);let Qn=or.zeros(2*Fn.rows,2*Fn.columns);return Qn=Qn.setSubMatrix(Fn,0,0),Qn=Qn.setSubMatrix(Cn,Fn.rows,0),Qn=Qn.setSubMatrix(gn,0,Fn.columns),Qn=Qn.setSubMatrix(Bn,Fn.rows,Fn.columns),Qn.subMatrix(0,Fr-1,0,vr-1)}return _r(st,ot,Kt,_e)}scaleRows(ot={}){if(typeof ot!="object")throw new TypeError("options must be an object");const{min:st=0,max:ht=1}=ot;if(!Number.isFinite(st))throw new TypeError("min must be a number");if(!Number.isFinite(ht))throw new TypeError("max must be a number");if(st>=ht)throw new RangeError("min must be smaller than max");let vt=new lr(this.rows,this.columns);for(let Ut=0;Ut<this.rows;Ut++){const Ot=this.getRow(Ut);Ot.length>0&&g(Ot,{min:st,max:ht,output:Ot}),vt.setRow(Ut,Ot)}return vt}scaleColumns(ot={}){if(typeof ot!="object")throw new TypeError("options must be an object");const{min:st=0,max:ht=1}=ot;if(!Number.isFinite(st))throw new TypeError("min must be a number");if(!Number.isFinite(ht))throw new TypeError("max must be a number");if(st>=ht)throw new RangeError("min must be smaller than max");let vt=new lr(this.rows,this.columns);for(let Ut=0;Ut<this.columns;Ut++){const Ot=this.getColumn(Ut);Ot.length&&g(Ot,{min:st,max:ht,output:Ot}),vt.setColumn(Ut,Ot)}return vt}flipRows(){const ot=Math.ceil(this.columns/2);for(let st=0;st<this.rows;st++)for(let ht=0;ht<ot;ht++){let vt=this.get(st,ht),Ut=this.get(st,this.columns-1-ht);this.set(st,ht,Ut),this.set(st,this.columns-1-ht,vt)}return this}flipColumns(){const ot=Math.ceil(this.rows/2);for(let st=0;st<this.columns;st++)for(let ht=0;ht<ot;ht++){let vt=this.get(ht,st),Ut=this.get(this.rows-1-ht,st);this.set(ht,st,Ut),this.set(this.rows-1-ht,st,vt)}return this}kroneckerProduct(ot){ot=lr.checkMatrix(ot);let st=this.rows,ht=this.columns,vt=ot.rows,Ut=ot.columns,Ot=new lr(st*vt,ht*Ut);for(let zt=0;zt<st;zt++)for(let Kt=0;Kt<ht;Kt++)for(let _e=0;_e<vt;_e++)for(let _r=0;_r<Ut;_r++)Ot.set(vt*zt+_e,Ut*Kt+_r,this.get(zt,Kt)*ot.get(_e,_r));return Ot}kroneckerSum(ot){if(ot=lr.checkMatrix(ot),!this.isSquare()||!ot.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");let st=this.rows,ht=ot.rows,vt=this.kroneckerProduct(lr.eye(ht,ht)),Ut=lr.eye(st,st).kroneckerProduct(ot);return vt.add(Ut)}transpose(){let ot=new lr(this.columns,this.rows);for(let st=0;st<this.rows;st++)for(let ht=0;ht<this.columns;ht++)ot.set(ht,st,this.get(st,ht));return ot}sortRows(ot=mr){for(let st=0;st<this.rows;st++)this.setRow(st,this.getRow(st).sort(ot));return this}sortColumns(ot=mr){for(let st=0;st<this.columns;st++)this.setColumn(st,this.getColumn(st).sort(ot));return this}subMatrix(ot,st,ht,vt){dt(this,ot,st,ht,vt);let Ut=new lr(st-ot+1,vt-ht+1);for(let Ot=ot;Ot<=st;Ot++)for(let zt=ht;zt<=vt;zt++)Ut.set(Ot-ot,zt-ht,this.get(Ot,zt));return Ut}subMatrixRow(ot,st,ht){if(st===void 0&&(st=0),ht===void 0&&(ht=this.columns-1),st>ht||st<0||st>=this.columns||ht<0||ht>=this.columns)throw new RangeError("Argument out of range");let vt=new lr(ot.length,ht-st+1);for(let Ut=0;Ut<ot.length;Ut++)for(let Ot=st;Ot<=ht;Ot++){if(ot[Ut]<0||ot[Ut]>=this.rows)throw new RangeError(`Row index out of range: ${ot[Ut]}`);vt.set(Ut,Ot-st,this.get(ot[Ut],Ot))}return vt}subMatrixColumn(ot,st,ht){if(st===void 0&&(st=0),ht===void 0&&(ht=this.rows-1),st>ht||st<0||st>=this.rows||ht<0||ht>=this.rows)throw new RangeError("Argument out of range");let vt=new lr(ht-st+1,ot.length);for(let Ut=0;Ut<ot.length;Ut++)for(let Ot=st;Ot<=ht;Ot++){if(ot[Ut]<0||ot[Ut]>=this.columns)throw new RangeError(`Column index out of range: ${ot[Ut]}`);vt.set(Ot-st,Ut,this.get(Ot,ot[Ut]))}return vt}setSubMatrix(ot,st,ht){if(ot=lr.checkMatrix(ot),ot.isEmpty())return this;let vt=st+ot.rows-1,Ut=ht+ot.columns-1;dt(this,st,vt,ht,Ut);for(let Ot=0;Ot<ot.rows;Ot++)for(let zt=0;zt<ot.columns;zt++)this.set(st+Ot,ht+zt,ot.get(Ot,zt));return this}selection(ot,st){ct(this,ot),pt(this,st);let ht=new lr(ot.length,st.length);for(let vt=0;vt<ot.length;vt++){let Ut=ot[vt];for(let Ot=0;Ot<st.length;Ot++){let zt=st[Ot];ht.set(vt,Ot,this.get(Ut,zt))}}return ht}trace(){let ot=Math.min(this.rows,this.columns),st=0;for(let ht=0;ht<ot;ht++)st+=this.get(ht,ht);return st}clone(){return this.constructor.copy(this,new lr(this.rows,this.columns))}static copy(ot,st){for(const[ht,vt,Ut]of ot.entries())st.set(ht,vt,Ut);return st}sum(ot){switch(ot){case"row":return bt(this);case"column":return kt(this);case void 0:return Lt(this);default:throw new Error(`invalid option: ${ot}`)}}product(ot){switch(ot){case"row":return Ht(this);case"column":return Pt(this);case void 0:return jt(this);default:throw new Error(`invalid option: ${ot}`)}}mean(ot){const st=this.sum(ot);switch(ot){case"row":{for(let ht=0;ht<this.rows;ht++)st[ht]/=this.columns;return st}case"column":{for(let ht=0;ht<this.columns;ht++)st[ht]/=this.rows;return st}case void 0:return st/this.size;default:throw new Error(`invalid option: ${ot}`)}}variance(ot,st={}){if(typeof ot=="object"&&(st=ot,ot=void 0),typeof st!="object")throw new TypeError("options must be an object");const{unbiased:ht=!0,mean:vt=this.mean(ot)}=st;if(typeof ht!="boolean")throw new TypeError("unbiased must be a boolean");switch(ot){case"row":{if(!d.isAnyArray(vt))throw new TypeError("mean must be an array");return Vt(this,ht,vt)}case"column":{if(!d.isAnyArray(vt))throw new TypeError("mean must be an array");return Xt(this,ht,vt)}case void 0:{if(typeof vt!="number")throw new TypeError("mean must be a number");return nr(this,ht,vt)}default:throw new Error(`invalid option: ${ot}`)}}standardDeviation(ot,st){typeof ot=="object"&&(st=ot,ot=void 0);const ht=this.variance(ot,st);if(ot===void 0)return Math.sqrt(ht);for(let vt=0;vt<ht.length;vt++)ht[vt]=Math.sqrt(ht[vt]);return ht}center(ot,st={}){if(typeof ot=="object"&&(st=ot,ot=void 0),typeof st!="object")throw new TypeError("options must be an object");const{center:ht=this.mean(ot)}=st;switch(ot){case"row":{if(!d.isAnyArray(ht))throw new TypeError("center must be an array");return Ar(this,ht),this}case"column":{if(!d.isAnyArray(ht))throw new TypeError("center must be an array");return ar(this,ht),this}case void 0:{if(typeof ht!="number")throw new TypeError("center must be a number");return Wt(this,ht),this}default:throw new Error(`invalid option: ${ot}`)}}scale(ot,st={}){if(typeof ot=="object"&&(st=ot,ot=void 0),typeof st!="object")throw new TypeError("options must be an object");let ht=st.scale;switch(ot){case"row":{if(ht===void 0)ht=pr(this);else if(!d.isAnyArray(ht))throw new TypeError("scale must be an array");return dr(this,ht),this}case"column":{if(ht===void 0)ht=yr(this);else if(!d.isAnyArray(ht))throw new TypeError("scale must be an array");return Br(this,ht),this}case void 0:{if(ht===void 0)ht=Lr(this);else if(typeof ht!="number")throw new TypeError("scale must be a number");return Ur(this,ht),this}default:throw new Error(`invalid option: ${ot}`)}}toString(ot){return et(this,ot)}[Symbol.iterator](){return this.entries()}*entries(){for(let ot=0;ot<this.rows;ot++)for(let st=0;st<this.columns;st++)yield[ot,st,this.get(ot,st)]}*values(){for(let ot=0;ot<this.rows;ot++)for(let st=0;st<this.columns;st++)yield this.get(ot,st)}}or.prototype.klass="Matrix",typeof Symbol<"u"&&(or.prototype[Symbol.for("nodejs.util.inspect.custom")]=$);function mr(wt,ot){return wt-ot}function Ir(wt){return wt.every(ot=>typeof ot=="number")}or.random=or.rand,or.randomInt=or.randInt,or.diagonal=or.diag,or.prototype.diagonal=or.prototype.diag,or.identity=or.eye,or.prototype.negate=or.prototype.neg,or.prototype.tensorProduct=or.prototype.kroneckerProduct;const ur=class ns extends or{constructor(ot,st){if(super(),It(this,s),$e(this,"data"),ns.isMatrix(ot))$t(this,s,o).call(this,ot.rows,ot.columns),ns.copy(ot,this);else if(Number.isInteger(ot)&&ot>=0)$t(this,s,o).call(this,ot,st);else if(d.isAnyArray(ot)){const ht=ot;if(ot=ht.length,st=ot?ht[0].length:0,typeof st!="number")throw new TypeError("Data must be a 2D array with at least one element");this.data=[];for(let vt=0;vt<ot;vt++){if(ht[vt].length!==st)throw new RangeError("Inconsistent array dimensions");if(!Ir(ht[vt]))throw new TypeError("Input data contains non-numeric values");this.data.push(Float64Array.from(ht[vt]))}this.rows=ot,this.columns=st}else throw new TypeError("First argument must be a positive number or an array")}set(ot,st,ht){return this.data[ot][st]=ht,this}get(ot,st){return this.data[ot][st]}removeRow(ot){return at(this,ot),this.data.splice(ot,1),this.rows-=1,this}addRow(ot,st){return st===void 0&&(st=ot,ot=this.rows),at(this,ot,!0),st=Float64Array.from(gt(this,st)),this.data.splice(ot,0,st),this.rows+=1,this}removeColumn(ot){lt(this,ot);for(let st=0;st<this.rows;st++){const ht=new Float64Array(this.columns-1);for(let vt=0;vt<ot;vt++)ht[vt]=this.data[st][vt];for(let vt=ot+1;vt<this.columns;vt++)ht[vt-1]=this.data[st][vt];this.data[st]=ht}return this.columns-=1,this}addColumn(ot,st){typeof st>"u"&&(st=ot,ot=this.columns),lt(this,ot,!0),st=_t(this,st);for(let ht=0;ht<this.rows;ht++){const vt=new Float64Array(this.columns+1);let Ut=0;for(;Ut<ot;Ut++)vt[Ut]=this.data[ht][Ut];for(vt[Ut++]=st[ht];Ut<this.columns+1;Ut++)vt[Ut]=this.data[ht][Ut-1];this.data[ht]=vt}return this.columns+=1,this}};s=new WeakSet,o=function(wt,ot){if(this.data=[],Number.isInteger(ot)&&ot>=0)for(let st=0;st<wt;st++)this.data.push(new Float64Array(ot));else throw new TypeError("nColumns must be a positive integer");this.rows=wt,this.columns=ot};let lr=ur;At(or,lr);const Xr=class is extends or{constructor(ot){if(super(),It(this,h),lr.isMatrix(ot)){if(!ot.isSymmetric())throw new TypeError("not symmetric data");Dt(this,h,lr.copy(ot,new lr(ot.rows,ot.rows)))}else if(Number.isInteger(ot)&&ot>=0)Dt(this,h,new lr(ot,ot));else if(Dt(this,h,new lr(ot)),!this.isSymmetric())throw new TypeError("not symmetric data")}get size(){return St(this,h).size}get rows(){return St(this,h).rows}get columns(){return St(this,h).columns}get diagonalSize(){return this.rows}static isSymmetricMatrix(ot){return lr.isMatrix(ot)&&ot.klassType==="SymmetricMatrix"}static zeros(ot){return new this(ot)}static ones(ot){return new this(ot).fill(1)}clone(){const ot=new is(this.diagonalSize);for(const[st,ht,vt]of this.upperRightEntries())ot.set(st,ht,vt);return ot}toMatrix(){return new lr(this)}get(ot,st){return St(this,h).get(ot,st)}set(ot,st,ht){return St(this,h).set(ot,st,ht),St(this,h).set(st,ot,ht),this}removeCross(ot){return St(this,h).removeRow(ot),St(this,h).removeColumn(ot),this}addCross(ot,st){st===void 0&&(st=ot,ot=this.diagonalSize);const ht=st.slice();return ht.splice(ot,1),St(this,h).addRow(ot,ht),St(this,h).addColumn(ot,st),this}applyMask(ot){if(ot.length!==this.diagonalSize)throw new RangeError("Mask size do not match with matrix size");const st=[];for(const[ht,vt]of ot.entries())vt||st.push(ht);st.reverse();for(const ht of st)this.removeCross(ht);return this}toCompact(){const{diagonalSize:ot}=this,st=new Array(ot*(ot+1)/2);for(let ht=0,vt=0,Ut=0;Ut<st.length;Ut++)st[Ut]=this.get(vt,ht),++ht>=ot&&(ht=++vt);return st}static fromCompact(ot){const st=ot.length,ht=(Math.sqrt(8*st+1)-1)/2;if(!Number.isInteger(ht))throw new TypeError(`This array is not a compact representation of a Symmetric Matrix, ${JSON.stringify(ot)}`);const vt=new is(ht);for(let Ut=0,Ot=0,zt=0;zt<st;zt++)vt.set(Ut,Ot,ot[zt]),++Ut>=ht&&(Ut=++Ot);return vt}*upperRightEntries(){for(let ot=0,st=0;ot<this.diagonalSize;void 0){const ht=this.get(ot,st);yield[ot,st,ht],++st>=this.diagonalSize&&(st=++ot)}}*upperRightValues(){for(let ot=0,st=0;ot<this.diagonalSize;void 0)yield this.get(ot,st),++st>=this.diagonalSize&&(st=++ot)}};h=new WeakMap;let zr=Xr;zr.prototype.klassType="SymmetricMatrix";class kr extends zr{static isDistanceMatrix(ot){return zr.isSymmetricMatrix(ot)&&ot.klassSubType==="DistanceMatrix"}constructor(ot){if(super(ot),!this.isDistance())throw new TypeError("Provided arguments do no produce a distance matrix")}set(ot,st,ht){return ot===st&&(ht=0),super.set(ot,st,ht)}addCross(ot,st){return st===void 0&&(st=ot,ot=this.diagonalSize),st=st.slice(),st[ot]=0,super.addCross(ot,st)}toSymmetricMatrix(){return new zr(this)}clone(){const ot=new kr(this.diagonalSize);for(const[st,ht,vt]of this.upperRightEntries())st!==ht&&ot.set(st,ht,vt);return ot}toCompact(){const{diagonalSize:ot}=this,st=(ot-1)*ot/2,ht=new Array(st);for(let vt=1,Ut=0,Ot=0;Ot<ht.length;Ot++)ht[Ot]=this.get(Ut,vt),++vt>=ot&&(vt=++Ut+1);return ht}static fromCompact(ot){const st=ot.length;if(st===0)return new this(0);const ht=(Math.sqrt(8*st+1)+1)/2;if(!Number.isInteger(ht))throw new TypeError(`This array is not a compact representation of a DistanceMatrix, ${JSON.stringify(ot)}`);const vt=new this(ht);for(let Ut=1,Ot=0,zt=0;zt<st;zt++)vt.set(Ut,Ot,ot[zt]),++Ut>=ht&&(Ut=++Ot+1);return vt}}kr.prototype.klassSubType="DistanceMatrix";class Tr extends or{constructor(ot,st,ht){super(),this.matrix=ot,this.rows=st,this.columns=ht}}class Mr extends Tr{constructor(ot,st){lt(ot,st),super(ot,ot.rows,1),this.column=st}set(ot,st,ht){return this.matrix.set(ot,this.column,ht),this}get(ot){return this.matrix.get(ot,this.column)}}class nn extends Tr{constructor(ot,st){pt(ot,st),super(ot,ot.rows,st.length),this.columnIndices=st}set(ot,st,ht){return this.matrix.set(ot,this.columnIndices[st],ht),this}get(ot,st){return this.matrix.get(ot,this.columnIndices[st])}}class jr extends Tr{constructor(ot){super(ot,ot.rows,ot.columns)}set(ot,st,ht){return this.matrix.set(ot,this.columns-st-1,ht),this}get(ot,st){return this.matrix.get(ot,this.columns-st-1)}}class Pr extends Tr{constructor(ot){super(ot,ot.rows,ot.columns)}set(ot,st,ht){return this.matrix.set(this.rows-ot-1,st,ht),this}get(ot,st){return this.matrix.get(this.rows-ot-1,st)}}class $r extends Tr{constructor(ot,st){at(ot,st),super(ot,1,ot.columns),this.row=st}set(ot,st,ht){return this.matrix.set(this.row,st,ht),this}get(ot,st){return this.matrix.get(this.row,st)}}class Cr extends Tr{constructor(ot,st){ct(ot,st),super(ot,st.length,ot.columns),this.rowIndices=st}set(ot,st,ht){return this.matrix.set(this.rowIndices[ot],st,ht),this}get(ot,st){return this.matrix.get(this.rowIndices[ot],st)}}class tn extends Tr{constructor(ot,st,ht){ct(ot,st),pt(ot,ht),super(ot,st.length,ht.length),this.rowIndices=st,this.columnIndices=ht}set(ot,st,ht){return this.matrix.set(this.rowIndices[ot],this.columnIndices[st],ht),this}get(ot,st){return this.matrix.get(this.rowIndices[ot],this.columnIndices[st])}}class An extends Tr{constructor(ot,st,ht,vt,Ut){dt(ot,st,ht,vt,Ut),super(ot,ht-st+1,Ut-vt+1),this.startRow=st,this.startColumn=vt}set(ot,st,ht){return this.matrix.set(this.startRow+ot,this.startColumn+st,ht),this}get(ot,st){return this.matrix.get(this.startRow+ot,this.startColumn+st)}}class Jr extends Tr{constructor(ot){super(ot,ot.columns,ot.rows)}set(ot,st,ht){return this.matrix.set(st,ot,ht),this}get(ot,st){return this.matrix.get(st,ot)}}class Dr extends or{constructor(ot,st={}){const{rows:ht=1}=st;if(ot.length%ht!==0)throw new Error("the data length is not divisible by the number of rows");super(),this.rows=ht,this.columns=ot.length/ht,this.data=ot}set(ot,st,ht){let vt=this._calculateIndex(ot,st);return this.data[vt]=ht,this}get(ot,st){let ht=this._calculateIndex(ot,st);return this.data[ht]}_calculateIndex(ot,st){return ot*this.columns+st}}class on extends or{constructor(ot){super(),this.data=ot,this.rows=ot.length,this.columns=ot[0].length}set(ot,st,ht){return this.data[ot][st]=ht,this}get(ot,st){return this.data[ot][st]}}function qr(wt,ot){if(d.isAnyArray(wt))return wt[0]&&d.isAnyArray(wt[0])?new on(wt):new Dr(wt,ot);throw new Error("the argument is not an array")}class Yr{constructor(ot){ot=on.checkMatrix(ot);let st=ot.clone(),ht=st.rows,vt=st.columns,Ut=new Float64Array(ht),Ot=1,zt,Kt,_e,_r,er,Er,Fr,vr,xr;for(zt=0;zt<ht;zt++)Ut[zt]=zt;for(vr=new Float64Array(ht),Kt=0;Kt<vt;Kt++){for(zt=0;zt<ht;zt++)vr[zt]=st.get(zt,Kt);for(zt=0;zt<ht;zt++){for(xr=Math.min(zt,Kt),er=0,_e=0;_e<xr;_e++)er+=st.get(zt,_e)*vr[_e];vr[zt]-=er,st.set(zt,Kt,vr[zt])}for(_r=Kt,zt=Kt+1;zt<ht;zt++)Math.abs(vr[zt])>Math.abs(vr[_r])&&(_r=zt);if(_r!==Kt){for(_e=0;_e<vt;_e++)Er=st.get(_r,_e),st.set(_r,_e,st.get(Kt,_e)),st.set(Kt,_e,Er);Fr=Ut[_r],Ut[_r]=Ut[Kt],Ut[Kt]=Fr,Ot=-Ot}if(Kt<ht&&st.get(Kt,Kt)!==0)for(zt=Kt+1;zt<ht;zt++)st.set(zt,Kt,st.get(zt,Kt)/st.get(Kt,Kt))}this.LU=st,this.pivotVector=Ut,this.pivotSign=Ot}isSingular(){let ot=this.LU,st=ot.columns;for(let ht=0;ht<st;ht++)if(ot.get(ht,ht)===0)return!0;return!1}solve(ot){ot=lr.checkMatrix(ot);let st=this.LU;if(st.rows!==ot.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");let ht=ot.columns,vt=ot.subMatrixRow(this.pivotVector,0,ht-1),Ut=st.columns,Ot,zt,Kt;for(Kt=0;Kt<Ut;Kt++)for(Ot=Kt+1;Ot<Ut;Ot++)for(zt=0;zt<ht;zt++)vt.set(Ot,zt,vt.get(Ot,zt)-vt.get(Kt,zt)*st.get(Ot,Kt));for(Kt=Ut-1;Kt>=0;Kt--){for(zt=0;zt<ht;zt++)vt.set(Kt,zt,vt.get(Kt,zt)/st.get(Kt,Kt));for(Ot=0;Ot<Kt;Ot++)for(zt=0;zt<ht;zt++)vt.set(Ot,zt,vt.get(Ot,zt)-vt.get(Kt,zt)*st.get(Ot,Kt))}return vt}get determinant(){let ot=this.LU;if(!ot.isSquare())throw new Error("Matrix must be square");let st=this.pivotSign,ht=ot.columns;for(let vt=0;vt<ht;vt++)st*=ot.get(vt,vt);return st}get lowerTriangularMatrix(){let ot=this.LU,st=ot.rows,ht=ot.columns,vt=new lr(st,ht);for(let Ut=0;Ut<st;Ut++)for(let Ot=0;Ot<ht;Ot++)Ut>Ot?vt.set(Ut,Ot,ot.get(Ut,Ot)):Ut===Ot?vt.set(Ut,Ot,1):vt.set(Ut,Ot,0);return vt}get upperTriangularMatrix(){let ot=this.LU,st=ot.rows,ht=ot.columns,vt=new lr(st,ht);for(let Ut=0;Ut<st;Ut++)for(let Ot=0;Ot<ht;Ot++)Ut<=Ot?vt.set(Ut,Ot,ot.get(Ut,Ot)):vt.set(Ut,Ot,0);return vt}get pivotPermutationVector(){return Array.from(this.pivotVector)}}function Wr(wt,ot){let st=0;return Math.abs(wt)>Math.abs(ot)?(st=ot/wt,Math.abs(wt)*Math.sqrt(1+st*st)):ot!==0?(st=wt/ot,Math.abs(ot)*Math.sqrt(1+st*st)):0}class rn{constructor(ot){ot=on.checkMatrix(ot);let st=ot.clone(),ht=ot.rows,vt=ot.columns,Ut=new Float64Array(vt),Ot,zt,Kt,_e;for(Kt=0;Kt<vt;Kt++){let _r=0;for(Ot=Kt;Ot<ht;Ot++)_r=Wr(_r,st.get(Ot,Kt));if(_r!==0){for(st.get(Kt,Kt)<0&&(_r=-_r),Ot=Kt;Ot<ht;Ot++)st.set(Ot,Kt,st.get(Ot,Kt)/_r);for(st.set(Kt,Kt,st.get(Kt,Kt)+1),zt=Kt+1;zt<vt;zt++){for(_e=0,Ot=Kt;Ot<ht;Ot++)_e+=st.get(Ot,Kt)*st.get(Ot,zt);for(_e=-_e/st.get(Kt,Kt),Ot=Kt;Ot<ht;Ot++)st.set(Ot,zt,st.get(Ot,zt)+_e*st.get(Ot,Kt))}}Ut[Kt]=-_r}this.QR=st,this.Rdiag=Ut}solve(ot){ot=lr.checkMatrix(ot);let st=this.QR,ht=st.rows;if(ot.rows!==ht)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");let vt=ot.columns,Ut=ot.clone(),Ot=st.columns,zt,Kt,_e,_r;for(_e=0;_e<Ot;_e++)for(Kt=0;Kt<vt;Kt++){for(_r=0,zt=_e;zt<ht;zt++)_r+=st.get(zt,_e)*Ut.get(zt,Kt);for(_r=-_r/st.get(_e,_e),zt=_e;zt<ht;zt++)Ut.set(zt,Kt,Ut.get(zt,Kt)+_r*st.get(zt,_e))}for(_e=Ot-1;_e>=0;_e--){for(Kt=0;Kt<vt;Kt++)Ut.set(_e,Kt,Ut.get(_e,Kt)/this.Rdiag[_e]);for(zt=0;zt<_e;zt++)for(Kt=0;Kt<vt;Kt++)Ut.set(zt,Kt,Ut.get(zt,Kt)-Ut.get(_e,Kt)*st.get(zt,_e))}return Ut.subMatrix(0,Ot-1,0,vt-1)}isFullRank(){let ot=this.QR.columns;for(let st=0;st<ot;st++)if(this.Rdiag[st]===0)return!1;return!0}get upperTriangularMatrix(){let ot=this.QR,st=ot.columns,ht=new lr(st,st),vt,Ut;for(vt=0;vt<st;vt++)for(Ut=0;Ut<st;Ut++)vt<Ut?ht.set(vt,Ut,ot.get(vt,Ut)):vt===Ut?ht.set(vt,Ut,this.Rdiag[vt]):ht.set(vt,Ut,0);return ht}get orthogonalMatrix(){let ot=this.QR,st=ot.rows,ht=ot.columns,vt=new lr(st,ht),Ut,Ot,zt,Kt;for(zt=ht-1;zt>=0;zt--){for(Ut=0;Ut<st;Ut++)vt.set(Ut,zt,0);for(vt.set(zt,zt,1),Ot=zt;Ot<ht;Ot++)if(ot.get(zt,zt)!==0){for(Kt=0,Ut=zt;Ut<st;Ut++)Kt+=ot.get(Ut,zt)*vt.get(Ut,Ot);for(Kt=-Kt/ot.get(zt,zt),Ut=zt;Ut<st;Ut++)vt.set(Ut,Ot,vt.get(Ut,Ot)+Kt*ot.get(Ut,zt))}}return vt}}class Nr{constructor(ot,st={}){if(ot=on.checkMatrix(ot),ot.isEmpty())throw new Error("Matrix must be non-empty");let ht=ot.rows,vt=ot.columns;const{computeLeftSingularVectors:Ut=!0,computeRightSingularVectors:Ot=!0,autoTranspose:zt=!1}=st;let Kt=!!Ut,_e=!!Ot,_r=!1,er;if(ht<vt)if(!zt)er=ot.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{er=ot.transpose(),ht=er.rows,vt=er.columns,_r=!0;let wr=Kt;Kt=_e,_e=wr}else er=ot.clone();let Er=Math.min(ht,vt),Fr=Math.min(ht+1,vt),vr=new Float64Array(Fr),xr=new lr(ht,Er),Zr=new lr(vt,vt),fr=new Float64Array(vt),Gr=new Float64Array(ht),an=new Float64Array(Fr);for(let wr=0;wr<Fr;wr++)an[wr]=wr;let fn=Math.min(ht-1,vt),dn=Math.max(0,Math.min(vt-2,ht)),xn=Math.max(fn,dn);for(let wr=0;wr<xn;wr++){if(wr<fn){vr[wr]=0;for(let Or=wr;Or<ht;Or++)vr[wr]=Wr(vr[wr],er.get(Or,wr));if(vr[wr]!==0){er.get(wr,wr)<0&&(vr[wr]=-vr[wr]);for(let Or=wr;Or<ht;Or++)er.set(Or,wr,er.get(Or,wr)/vr[wr]);er.set(wr,wr,er.get(wr,wr)+1)}vr[wr]=-vr[wr]}for(let Or=wr+1;Or<vt;Or++){if(wr<fn&&vr[wr]!==0){let sn=0;for(let Vr=wr;Vr<ht;Vr++)sn+=er.get(Vr,wr)*er.get(Vr,Or);sn=-sn/er.get(wr,wr);for(let Vr=wr;Vr<ht;Vr++)er.set(Vr,Or,er.get(Vr,Or)+sn*er.get(Vr,wr))}fr[Or]=er.get(wr,Or)}if(Kt&&wr<fn)for(let Or=wr;Or<ht;Or++)xr.set(Or,wr,er.get(Or,wr));if(wr<dn){fr[wr]=0;for(let Or=wr+1;Or<vt;Or++)fr[wr]=Wr(fr[wr],fr[Or]);if(fr[wr]!==0){fr[wr+1]<0&&(fr[wr]=0-fr[wr]);for(let Or=wr+1;Or<vt;Or++)fr[Or]/=fr[wr];fr[wr+1]+=1}if(fr[wr]=-fr[wr],wr+1<ht&&fr[wr]!==0){for(let Or=wr+1;Or<ht;Or++)Gr[Or]=0;for(let Or=wr+1;Or<ht;Or++)for(let sn=wr+1;sn<vt;sn++)Gr[Or]+=fr[sn]*er.get(Or,sn);for(let Or=wr+1;Or<vt;Or++){let sn=-fr[Or]/fr[wr+1];for(let Vr=wr+1;Vr<ht;Vr++)er.set(Vr,Or,er.get(Vr,Or)+sn*Gr[Vr])}}if(_e)for(let Or=wr+1;Or<vt;Or++)Zr.set(Or,wr,fr[Or])}}let un=Math.min(vt,ht+1);if(fn<vt&&(vr[fn]=er.get(fn,fn)),ht<un&&(vr[un-1]=0),dn+1<un&&(fr[dn]=er.get(dn,un-1)),fr[un-1]=0,Kt){for(let wr=fn;wr<Er;wr++){for(let Or=0;Or<ht;Or++)xr.set(Or,wr,0);xr.set(wr,wr,1)}for(let wr=fn-1;wr>=0;wr--)if(vr[wr]!==0){for(let Or=wr+1;Or<Er;Or++){let sn=0;for(let Vr=wr;Vr<ht;Vr++)sn+=xr.get(Vr,wr)*xr.get(Vr,Or);sn=-sn/xr.get(wr,wr);for(let Vr=wr;Vr<ht;Vr++)xr.set(Vr,Or,xr.get(Vr,Or)+sn*xr.get(Vr,wr))}for(let Or=wr;Or<ht;Or++)xr.set(Or,wr,-xr.get(Or,wr));xr.set(wr,wr,1+xr.get(wr,wr));for(let Or=0;Or<wr-1;Or++)xr.set(Or,wr,0)}else{for(let Or=0;Or<ht;Or++)xr.set(Or,wr,0);xr.set(wr,wr,1)}}if(_e)for(let wr=vt-1;wr>=0;wr--){if(wr<dn&&fr[wr]!==0)for(let Or=wr+1;Or<vt;Or++){let sn=0;for(let Vr=wr+1;Vr<vt;Vr++)sn+=Zr.get(Vr,wr)*Zr.get(Vr,Or);sn=-sn/Zr.get(wr+1,wr);for(let Vr=wr+1;Vr<vt;Vr++)Zr.set(Vr,Or,Zr.get(Vr,Or)+sn*Zr.get(Vr,wr))}for(let Or=0;Or<vt;Or++)Zr.set(Or,wr,0);Zr.set(wr,wr,1)}let hn=un-1,Sn=Number.EPSILON;for(;un>0;){let wr,Or;for(wr=un-2;wr>=-1&&wr!==-1;wr--){const sn=Number.MIN_VALUE+Sn*Math.abs(vr[wr]+Math.abs(vr[wr+1]));if(Math.abs(fr[wr])<=sn||Number.isNaN(fr[wr])){fr[wr]=0;break}}if(wr===un-2)Or=4;else{let sn;for(sn=un-1;sn>=wr&&sn!==wr;sn--){let Vr=(sn!==un?Math.abs(fr[sn]):0)+(sn!==wr+1?Math.abs(fr[sn-1]):0);if(Math.abs(vr[sn])<=Sn*Vr){vr[sn]=0;break}}sn===wr?Or=3:sn===un-1?Or=1:(Or=2,wr=sn)}switch(wr++,Or){case 1:{let sn=fr[un-2];fr[un-2]=0;for(let Vr=un-2;Vr>=wr;Vr--){let En=Wr(vr[Vr],sn),bn=vr[Vr]/En,Fn=sn/En;if(vr[Vr]=En,Vr!==wr&&(sn=-Fn*fr[Vr-1],fr[Vr-1]=bn*fr[Vr-1]),_e)for(let Cn=0;Cn<vt;Cn++)En=bn*Zr.get(Cn,Vr)+Fn*Zr.get(Cn,un-1),Zr.set(Cn,un-1,-Fn*Zr.get(Cn,Vr)+bn*Zr.get(Cn,un-1)),Zr.set(Cn,Vr,En)}break}case 2:{let sn=fr[wr-1];fr[wr-1]=0;for(let Vr=wr;Vr<un;Vr++){let En=Wr(vr[Vr],sn),bn=vr[Vr]/En,Fn=sn/En;if(vr[Vr]=En,sn=-Fn*fr[Vr],fr[Vr]=bn*fr[Vr],Kt)for(let Cn=0;Cn<ht;Cn++)En=bn*xr.get(Cn,Vr)+Fn*xr.get(Cn,wr-1),xr.set(Cn,wr-1,-Fn*xr.get(Cn,Vr)+bn*xr.get(Cn,wr-1)),xr.set(Cn,Vr,En)}break}case 3:{const sn=Math.max(Math.abs(vr[un-1]),Math.abs(vr[un-2]),Math.abs(fr[un-2]),Math.abs(vr[wr]),Math.abs(fr[wr])),Vr=vr[un-1]/sn,En=vr[un-2]/sn,bn=fr[un-2]/sn,Fn=vr[wr]/sn,Cn=fr[wr]/sn,gn=((En+Vr)*(En-Vr)+bn*bn)/2,Bn=Vr*bn*(Vr*bn);let Qn=0;(gn!==0||Bn!==0)&&(gn<0?Qn=0-Math.sqrt(gn*gn+Bn):Qn=Math.sqrt(gn*gn+Bn),Qn=Bn/(gn+Qn));let Ln=(Fn+Vr)*(Fn-Vr)+Qn,Hn=Fn*Cn;for(let _n=wr;_n<un-1;_n++){let cn=Wr(Ln,Hn);cn===0&&(cn=Number.MIN_VALUE);let vn=Ln/cn,Mn=Hn/cn;if(_n!==wr&&(fr[_n-1]=cn),Ln=vn*vr[_n]+Mn*fr[_n],fr[_n]=vn*fr[_n]-Mn*vr[_n],Hn=Mn*vr[_n+1],vr[_n+1]=vn*vr[_n+1],_e)for(let In=0;In<vt;In++)cn=vn*Zr.get(In,_n)+Mn*Zr.get(In,_n+1),Zr.set(In,_n+1,-Mn*Zr.get(In,_n)+vn*Zr.get(In,_n+1)),Zr.set(In,_n,cn);if(cn=Wr(Ln,Hn),cn===0&&(cn=Number.MIN_VALUE),vn=Ln/cn,Mn=Hn/cn,vr[_n]=cn,Ln=vn*fr[_n]+Mn*vr[_n+1],vr[_n+1]=-Mn*fr[_n]+vn*vr[_n+1],Hn=Mn*fr[_n+1],fr[_n+1]=vn*fr[_n+1],Kt&&_n<ht-1)for(let In=0;In<ht;In++)cn=vn*xr.get(In,_n)+Mn*xr.get(In,_n+1),xr.set(In,_n+1,-Mn*xr.get(In,_n)+vn*xr.get(In,_n+1)),xr.set(In,_n,cn)}fr[un-2]=Ln;break}case 4:{if(vr[wr]<=0&&(vr[wr]=vr[wr]<0?-vr[wr]:0,_e))for(let sn=0;sn<=hn;sn++)Zr.set(sn,wr,-Zr.get(sn,wr));for(;wr<hn&&!(vr[wr]>=vr[wr+1]);){let sn=vr[wr];if(vr[wr]=vr[wr+1],vr[wr+1]=sn,_e&&wr<vt-1)for(let Vr=0;Vr<vt;Vr++)sn=Zr.get(Vr,wr+1),Zr.set(Vr,wr+1,Zr.get(Vr,wr)),Zr.set(Vr,wr,sn);if(Kt&&wr<ht-1)for(let Vr=0;Vr<ht;Vr++)sn=xr.get(Vr,wr+1),xr.set(Vr,wr+1,xr.get(Vr,wr)),xr.set(Vr,wr,sn);wr++}un--;break}}}if(_r){let wr=Zr;Zr=xr,xr=wr}this.m=ht,this.n=vt,this.s=vr,this.U=xr,this.V=Zr}solve(ot){let st=ot,ht=this.threshold,vt=this.s.length,Ut=lr.zeros(vt,vt);for(let Er=0;Er<vt;Er++)Math.abs(this.s[Er])<=ht?Ut.set(Er,Er,0):Ut.set(Er,Er,1/this.s[Er]);let Ot=this.U,zt=this.rightSingularVectors,Kt=zt.mmul(Ut),_e=zt.rows,_r=Ot.rows,er=lr.zeros(_e,_r);for(let Er=0;Er<_e;Er++)for(let Fr=0;Fr<_r;Fr++){let vr=0;for(let xr=0;xr<vt;xr++)vr+=Kt.get(Er,xr)*Ot.get(Fr,xr);er.set(Er,Fr,vr)}return er.mmul(st)}solveForDiagonal(ot){return this.solve(lr.diag(ot))}inverse(){let ot=this.V,st=this.threshold,ht=ot.rows,vt=ot.columns,Ut=new lr(ht,this.s.length);for(let _r=0;_r<ht;_r++)for(let er=0;er<vt;er++)Math.abs(this.s[er])>st&&Ut.set(_r,er,ot.get(_r,er)/this.s[er]);let Ot=this.U,zt=Ot.rows,Kt=Ot.columns,_e=new lr(ht,zt);for(let _r=0;_r<ht;_r++)for(let er=0;er<zt;er++){let Er=0;for(let Fr=0;Fr<Kt;Fr++)Er+=Ut.get(_r,Fr)*Ot.get(er,Fr);_e.set(_r,er,Er)}return _e}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){let ot=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,st=0,ht=this.s;for(let vt=0,Ut=ht.length;vt<Ut;vt++)ht[vt]>ot&&st++;return st}get diagonal(){return Array.from(this.s)}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return this.U}get rightSingularVectors(){return this.V}get diagonalMatrix(){return lr.diag(this.s)}}function en(wt,ot=!1){return wt=on.checkMatrix(wt),ot?new Nr(wt).inverse():Ft(wt,lr.eye(wt.rows))}function Ft(wt,ot,st=!1){return wt=on.checkMatrix(wt),ot=on.checkMatrix(ot),st?new Nr(wt).solve(ot):wt.isSquare()?new Yr(wt).solve(ot):new rn(wt).solve(ot)}function sr(wt){if(wt=lr.checkMatrix(wt),wt.isSquare()){if(wt.columns===0)return 1;let ot,st,ht,vt;if(wt.columns===2)return ot=wt.get(0,0),st=wt.get(0,1),ht=wt.get(1,0),vt=wt.get(1,1),ot*vt-st*ht;if(wt.columns===3){let Ut,Ot,zt;return Ut=new tn(wt,[1,2],[1,2]),Ot=new tn(wt,[1,2],[0,2]),zt=new tn(wt,[1,2],[0,1]),ot=wt.get(0,0),st=wt.get(0,1),ht=wt.get(0,2),ot*sr(Ut)-st*sr(Ot)+ht*sr(zt)}else return new Yr(wt).determinant}else throw Error("determinant can only be calculated for a square matrix")}function hr(wt,ot){let st=[];for(let ht=0;ht<wt;ht++)ht!==ot&&st.push(ht);return st}function br(wt,ot,st,ht=1e-9,vt=1e-9){if(wt>vt)return new Array(ot.rows+1).fill(0);{let Ut=ot.addRow(st,[0]);for(let Ot=0;Ot<Ut.rows;Ot++)Math.abs(Ut.get(Ot,0))<ht&&Ut.set(Ot,0,0);return Ut.to1DArray()}}function Gt(wt,ot={}){const{thresholdValue:st=1e-9,thresholdError:ht=1e-9}=ot;wt=lr.checkMatrix(wt);let vt=wt.rows,Ut=new lr(vt,vt);for(let Ot=0;Ot<vt;Ot++){let zt=lr.columnVector(wt.getRow(Ot)),Kt=wt.subMatrixRow(hr(vt,Ot)).transpose(),_e=new Nr(Kt).solve(zt),_r=lr.sub(zt,Kt.mmul(_e)).abs().max();Ut.setRow(Ot,br(_r,_e,Ot,st,ht))}return Ut}function ir(wt,ot=Number.EPSILON){if(wt=lr.checkMatrix(wt),wt.isEmpty())return wt.transpose();let st=new Nr(wt,{autoTranspose:!0}),ht=st.leftSingularVectors,vt=st.rightSingularVectors,Ut=st.diagonal;for(let Ot=0;Ot<Ut.length;Ot++)Math.abs(Ut[Ot])>ot?Ut[Ot]=1/Ut[Ot]:Ut[Ot]=0;return vt.mmul(lr.diag(Ut).mmul(ht.transpose()))}function yt(wt,ot=wt,st={}){wt=new lr(wt);let ht=!1;if(typeof ot=="object"&&!lr.isMatrix(ot)&&!d.isAnyArray(ot)?(st=ot,ot=wt,ht=!0):ot=new lr(ot),wt.rows!==ot.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:vt=!0}=st;vt&&(wt=wt.center("column"),ht||(ot=ot.center("column")));const Ut=wt.transpose().mmul(ot);for(let Ot=0;Ot<Ut.rows;Ot++)for(let zt=0;zt<Ut.columns;zt++)Ut.set(Ot,zt,Ut.get(Ot,zt)*(1/(wt.rows-1)));return Ut}function gr(wt,ot=wt,st={}){wt=new lr(wt);let ht=!1;if(typeof ot=="object"&&!lr.isMatrix(ot)&&!d.isAnyArray(ot)?(st=ot,ot=wt,ht=!0):ot=new lr(ot),wt.rows!==ot.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:vt=!0,scale:Ut=!0}=st;vt&&(wt.center("column"),ht||ot.center("column")),Ut&&(wt.scale("column"),ht||ot.scale("column"));const Ot=wt.standardDeviation("column",{unbiased:!0}),zt=ht?Ot:ot.standardDeviation("column",{unbiased:!0}),Kt=wt.transpose().mmul(ot);for(let _e=0;_e<Kt.rows;_e++)for(let _r=0;_r<Kt.columns;_r++)Kt.set(_e,_r,Kt.get(_e,_r)*(1/(Ot[_e]*zt[_r]))*(1/(wt.rows-1)));return Kt}class Hr{constructor(ot,st={}){const{assumeSymmetric:ht=!1}=st;if(ot=on.checkMatrix(ot),!ot.isSquare())throw new Error("Matrix is not a square matrix");if(ot.isEmpty())throw new Error("Matrix must be non-empty");let vt=ot.columns,Ut=new lr(vt,vt),Ot=new Float64Array(vt),zt=new Float64Array(vt),Kt=ot,_e,_r,er=!1;if(ht?er=!0:er=ot.isSymmetric(),er){for(_e=0;_e<vt;_e++)for(_r=0;_r<vt;_r++)Ut.set(_e,_r,Kt.get(_e,_r));ut(vt,zt,Ot,Ut),tr(vt,zt,Ot,Ut)}else{let Er=new lr(vt,vt),Fr=new Float64Array(vt);for(_r=0;_r<vt;_r++)for(_e=0;_e<vt;_e++)Er.set(_e,_r,Kt.get(_e,_r));rr(vt,Er,Fr,Ut),Ct(vt,zt,Ot,Ut,Er)}this.n=vt,this.e=zt,this.d=Ot,this.V=Ut}get realEigenvalues(){return Array.from(this.d)}get imaginaryEigenvalues(){return Array.from(this.e)}get eigenvectorMatrix(){return this.V}get diagonalMatrix(){let ot=this.n,st=this.e,ht=this.d,vt=new lr(ot,ot),Ut,Ot;for(Ut=0;Ut<ot;Ut++){for(Ot=0;Ot<ot;Ot++)vt.set(Ut,Ot,0);vt.set(Ut,Ut,ht[Ut]),st[Ut]>0?vt.set(Ut,Ut+1,st[Ut]):st[Ut]<0&&vt.set(Ut,Ut-1,st[Ut])}return vt}}function ut(wt,ot,st,ht){let vt,Ut,Ot,zt,Kt,_e,_r,er;for(Kt=0;Kt<wt;Kt++)st[Kt]=ht.get(wt-1,Kt);for(zt=wt-1;zt>0;zt--){for(er=0,Ot=0,_e=0;_e<zt;_e++)er=er+Math.abs(st[_e]);if(er===0)for(ot[zt]=st[zt-1],Kt=0;Kt<zt;Kt++)st[Kt]=ht.get(zt-1,Kt),ht.set(zt,Kt,0),ht.set(Kt,zt,0);else{for(_e=0;_e<zt;_e++)st[_e]/=er,Ot+=st[_e]*st[_e];for(vt=st[zt-1],Ut=Math.sqrt(Ot),vt>0&&(Ut=-Ut),ot[zt]=er*Ut,Ot=Ot-vt*Ut,st[zt-1]=vt-Ut,Kt=0;Kt<zt;Kt++)ot[Kt]=0;for(Kt=0;Kt<zt;Kt++){for(vt=st[Kt],ht.set(Kt,zt,vt),Ut=ot[Kt]+ht.get(Kt,Kt)*vt,_e=Kt+1;_e<=zt-1;_e++)Ut+=ht.get(_e,Kt)*st[_e],ot[_e]+=ht.get(_e,Kt)*vt;ot[Kt]=Ut}for(vt=0,Kt=0;Kt<zt;Kt++)ot[Kt]/=Ot,vt+=ot[Kt]*st[Kt];for(_r=vt/(Ot+Ot),Kt=0;Kt<zt;Kt++)ot[Kt]-=_r*st[Kt];for(Kt=0;Kt<zt;Kt++){for(vt=st[Kt],Ut=ot[Kt],_e=Kt;_e<=zt-1;_e++)ht.set(_e,Kt,ht.get(_e,Kt)-(vt*ot[_e]+Ut*st[_e]));st[Kt]=ht.get(zt-1,Kt),ht.set(zt,Kt,0)}}st[zt]=Ot}for(zt=0;zt<wt-1;zt++){if(ht.set(wt-1,zt,ht.get(zt,zt)),ht.set(zt,zt,1),Ot=st[zt+1],Ot!==0){for(_e=0;_e<=zt;_e++)st[_e]=ht.get(_e,zt+1)/Ot;for(Kt=0;Kt<=zt;Kt++){for(Ut=0,_e=0;_e<=zt;_e++)Ut+=ht.get(_e,zt+1)*ht.get(_e,Kt);for(_e=0;_e<=zt;_e++)ht.set(_e,Kt,ht.get(_e,Kt)-Ut*st[_e])}}for(_e=0;_e<=zt;_e++)ht.set(_e,zt+1,0)}for(Kt=0;Kt<wt;Kt++)st[Kt]=ht.get(wt-1,Kt),ht.set(wt-1,Kt,0);ht.set(wt-1,wt-1,1),ot[0]=0}function tr(wt,ot,st,ht){let vt,Ut,Ot,zt,Kt,_e,_r,er,Er,Fr,vr,xr,Zr,fr,Gr,an;for(Ot=1;Ot<wt;Ot++)ot[Ot-1]=ot[Ot];ot[wt-1]=0;let fn=0,dn=0,xn=Number.EPSILON;for(_e=0;_e<wt;_e++){for(dn=Math.max(dn,Math.abs(st[_e])+Math.abs(ot[_e])),_r=_e;_r<wt&&!(Math.abs(ot[_r])<=xn*dn);)_r++;if(_r>_e)do{for(vt=st[_e],er=(st[_e+1]-vt)/(2*ot[_e]),Er=Wr(er,1),er<0&&(Er=-Er),st[_e]=ot[_e]/(er+Er),st[_e+1]=ot[_e]*(er+Er),Fr=st[_e+1],Ut=vt-st[_e],Ot=_e+2;Ot<wt;Ot++)st[Ot]-=Ut;for(fn=fn+Ut,er=st[_r],vr=1,xr=vr,Zr=vr,fr=ot[_e+1],Gr=0,an=0,Ot=_r-1;Ot>=_e;Ot--)for(Zr=xr,xr=vr,an=Gr,vt=vr*ot[Ot],Ut=vr*er,Er=Wr(er,ot[Ot]),ot[Ot+1]=Gr*Er,Gr=ot[Ot]/Er,vr=er/Er,er=vr*st[Ot]-Gr*vt,st[Ot+1]=Ut+Gr*(vr*vt+Gr*st[Ot]),Kt=0;Kt<wt;Kt++)Ut=ht.get(Kt,Ot+1),ht.set(Kt,Ot+1,Gr*ht.get(Kt,Ot)+vr*Ut),ht.set(Kt,Ot,vr*ht.get(Kt,Ot)-Gr*Ut);er=-Gr*an*Zr*fr*ot[_e]/Fr,ot[_e]=Gr*er,st[_e]=vr*er}while(Math.abs(ot[_e])>xn*dn);st[_e]=st[_e]+fn,ot[_e]=0}for(Ot=0;Ot<wt-1;Ot++){for(Kt=Ot,er=st[Ot],zt=Ot+1;zt<wt;zt++)st[zt]<er&&(Kt=zt,er=st[zt]);if(Kt!==Ot)for(st[Kt]=st[Ot],st[Ot]=er,zt=0;zt<wt;zt++)er=ht.get(zt,Ot),ht.set(zt,Ot,ht.get(zt,Kt)),ht.set(zt,Kt,er)}}function rr(wt,ot,st,ht){let vt=0,Ut=wt-1,Ot,zt,Kt,_e,_r,er,Er;for(er=vt+1;er<=Ut-1;er++){for(Er=0,_e=er;_e<=Ut;_e++)Er=Er+Math.abs(ot.get(_e,er-1));if(Er!==0){for(Kt=0,_e=Ut;_e>=er;_e--)st[_e]=ot.get(_e,er-1)/Er,Kt+=st[_e]*st[_e];for(zt=Math.sqrt(Kt),st[er]>0&&(zt=-zt),Kt=Kt-st[er]*zt,st[er]=st[er]-zt,_r=er;_r<wt;_r++){for(Ot=0,_e=Ut;_e>=er;_e--)Ot+=st[_e]*ot.get(_e,_r);for(Ot=Ot/Kt,_e=er;_e<=Ut;_e++)ot.set(_e,_r,ot.get(_e,_r)-Ot*st[_e])}for(_e=0;_e<=Ut;_e++){for(Ot=0,_r=Ut;_r>=er;_r--)Ot+=st[_r]*ot.get(_e,_r);for(Ot=Ot/Kt,_r=er;_r<=Ut;_r++)ot.set(_e,_r,ot.get(_e,_r)-Ot*st[_r])}st[er]=Er*st[er],ot.set(er,er-1,Er*zt)}}for(_e=0;_e<wt;_e++)for(_r=0;_r<wt;_r++)ht.set(_e,_r,_e===_r?1:0);for(er=Ut-1;er>=vt+1;er--)if(ot.get(er,er-1)!==0){for(_e=er+1;_e<=Ut;_e++)st[_e]=ot.get(_e,er-1);for(_r=er;_r<=Ut;_r++){for(zt=0,_e=er;_e<=Ut;_e++)zt+=st[_e]*ht.get(_e,_r);for(zt=zt/st[er]/ot.get(er,er-1),_e=er;_e<=Ut;_e++)ht.set(_e,_r,ht.get(_e,_r)+zt*st[_e])}}}function Ct(wt,ot,st,ht,vt){let Ut=wt-1,Ot=0,zt=wt-1,Kt=Number.EPSILON,_e=0,_r=0,er=0,Er=0,Fr=0,vr=0,xr=0,Zr=0,fr,Gr,an,fn,dn,xn,un,hn,Sn,wr,Or,sn,Vr,En,bn;for(fr=0;fr<wt;fr++)for((fr<Ot||fr>zt)&&(st[fr]=vt.get(fr,fr),ot[fr]=0),Gr=Math.max(fr-1,0);Gr<wt;Gr++)_r=_r+Math.abs(vt.get(fr,Gr));for(;Ut>=Ot;){for(fn=Ut;fn>Ot&&(vr=Math.abs(vt.get(fn-1,fn-1))+Math.abs(vt.get(fn,fn)),vr===0&&(vr=_r),!(Math.abs(vt.get(fn,fn-1))<Kt*vr));)fn--;if(fn===Ut)vt.set(Ut,Ut,vt.get(Ut,Ut)+_e),st[Ut]=vt.get(Ut,Ut),ot[Ut]=0,Ut--,Zr=0;else if(fn===Ut-1){if(un=vt.get(Ut,Ut-1)*vt.get(Ut-1,Ut),er=(vt.get(Ut-1,Ut-1)-vt.get(Ut,Ut))/2,Er=er*er+un,xr=Math.sqrt(Math.abs(Er)),vt.set(Ut,Ut,vt.get(Ut,Ut)+_e),vt.set(Ut-1,Ut-1,vt.get(Ut-1,Ut-1)+_e),hn=vt.get(Ut,Ut),Er>=0){for(xr=er>=0?er+xr:er-xr,st[Ut-1]=hn+xr,st[Ut]=st[Ut-1],xr!==0&&(st[Ut]=hn-un/xr),ot[Ut-1]=0,ot[Ut]=0,hn=vt.get(Ut,Ut-1),vr=Math.abs(hn)+Math.abs(xr),er=hn/vr,Er=xr/vr,Fr=Math.sqrt(er*er+Er*Er),er=er/Fr,Er=Er/Fr,Gr=Ut-1;Gr<wt;Gr++)xr=vt.get(Ut-1,Gr),vt.set(Ut-1,Gr,Er*xr+er*vt.get(Ut,Gr)),vt.set(Ut,Gr,Er*vt.get(Ut,Gr)-er*xr);for(fr=0;fr<=Ut;fr++)xr=vt.get(fr,Ut-1),vt.set(fr,Ut-1,Er*xr+er*vt.get(fr,Ut)),vt.set(fr,Ut,Er*vt.get(fr,Ut)-er*xr);for(fr=Ot;fr<=zt;fr++)xr=ht.get(fr,Ut-1),ht.set(fr,Ut-1,Er*xr+er*ht.get(fr,Ut)),ht.set(fr,Ut,Er*ht.get(fr,Ut)-er*xr)}else st[Ut-1]=hn+er,st[Ut]=hn+er,ot[Ut-1]=xr,ot[Ut]=-xr;Ut=Ut-2,Zr=0}else{if(hn=vt.get(Ut,Ut),Sn=0,un=0,fn<Ut&&(Sn=vt.get(Ut-1,Ut-1),un=vt.get(Ut,Ut-1)*vt.get(Ut-1,Ut)),Zr===10){for(_e+=hn,fr=Ot;fr<=Ut;fr++)vt.set(fr,fr,vt.get(fr,fr)-hn);vr=Math.abs(vt.get(Ut,Ut-1))+Math.abs(vt.get(Ut-1,Ut-2)),hn=Sn=.75*vr,un=-.4375*vr*vr}if(Zr===30&&(vr=(Sn-hn)/2,vr=vr*vr+un,vr>0)){for(vr=Math.sqrt(vr),Sn<hn&&(vr=-vr),vr=hn-un/((Sn-hn)/2+vr),fr=Ot;fr<=Ut;fr++)vt.set(fr,fr,vt.get(fr,fr)-vr);_e+=vr,hn=Sn=un=.964}for(Zr=Zr+1,dn=Ut-2;dn>=fn&&(xr=vt.get(dn,dn),Fr=hn-xr,vr=Sn-xr,er=(Fr*vr-un)/vt.get(dn+1,dn)+vt.get(dn,dn+1),Er=vt.get(dn+1,dn+1)-xr-Fr-vr,Fr=vt.get(dn+2,dn+1),vr=Math.abs(er)+Math.abs(Er)+Math.abs(Fr),er=er/vr,Er=Er/vr,Fr=Fr/vr,!(dn===fn||Math.abs(vt.get(dn,dn-1))*(Math.abs(Er)+Math.abs(Fr))<Kt*(Math.abs(er)*(Math.abs(vt.get(dn-1,dn-1))+Math.abs(xr)+Math.abs(vt.get(dn+1,dn+1))))));)dn--;for(fr=dn+2;fr<=Ut;fr++)vt.set(fr,fr-2,0),fr>dn+2&&vt.set(fr,fr-3,0);for(an=dn;an<=Ut-1&&(En=an!==Ut-1,an!==dn&&(er=vt.get(an,an-1),Er=vt.get(an+1,an-1),Fr=En?vt.get(an+2,an-1):0,hn=Math.abs(er)+Math.abs(Er)+Math.abs(Fr),hn!==0&&(er=er/hn,Er=Er/hn,Fr=Fr/hn)),hn!==0);an++)if(vr=Math.sqrt(er*er+Er*Er+Fr*Fr),er<0&&(vr=-vr),vr!==0){for(an!==dn?vt.set(an,an-1,-vr*hn):fn!==dn&&vt.set(an,an-1,-vt.get(an,an-1)),er=er+vr,hn=er/vr,Sn=Er/vr,xr=Fr/vr,Er=Er/er,Fr=Fr/er,Gr=an;Gr<wt;Gr++)er=vt.get(an,Gr)+Er*vt.get(an+1,Gr),En&&(er=er+Fr*vt.get(an+2,Gr),vt.set(an+2,Gr,vt.get(an+2,Gr)-er*xr)),vt.set(an,Gr,vt.get(an,Gr)-er*hn),vt.set(an+1,Gr,vt.get(an+1,Gr)-er*Sn);for(fr=0;fr<=Math.min(Ut,an+3);fr++)er=hn*vt.get(fr,an)+Sn*vt.get(fr,an+1),En&&(er=er+xr*vt.get(fr,an+2),vt.set(fr,an+2,vt.get(fr,an+2)-er*Fr)),vt.set(fr,an,vt.get(fr,an)-er),vt.set(fr,an+1,vt.get(fr,an+1)-er*Er);for(fr=Ot;fr<=zt;fr++)er=hn*ht.get(fr,an)+Sn*ht.get(fr,an+1),En&&(er=er+xr*ht.get(fr,an+2),ht.set(fr,an+2,ht.get(fr,an+2)-er*Fr)),ht.set(fr,an,ht.get(fr,an)-er),ht.set(fr,an+1,ht.get(fr,an+1)-er*Er)}}}if(_r!==0){for(Ut=wt-1;Ut>=0;Ut--)if(er=st[Ut],Er=ot[Ut],Er===0)for(fn=Ut,vt.set(Ut,Ut,1),fr=Ut-1;fr>=0;fr--){for(un=vt.get(fr,fr)-er,Fr=0,Gr=fn;Gr<=Ut;Gr++)Fr=Fr+vt.get(fr,Gr)*vt.get(Gr,Ut);if(ot[fr]<0)xr=un,vr=Fr;else if(fn=fr,ot[fr]===0?vt.set(fr,Ut,un!==0?-Fr/un:-Fr/(Kt*_r)):(hn=vt.get(fr,fr+1),Sn=vt.get(fr+1,fr),Er=(st[fr]-er)*(st[fr]-er)+ot[fr]*ot[fr],xn=(hn*vr-xr*Fr)/Er,vt.set(fr,Ut,xn),vt.set(fr+1,Ut,Math.abs(hn)>Math.abs(xr)?(-Fr-un*xn)/hn:(-vr-Sn*xn)/xr)),xn=Math.abs(vt.get(fr,Ut)),Kt*xn*xn>1)for(Gr=fr;Gr<=Ut;Gr++)vt.set(Gr,Ut,vt.get(Gr,Ut)/xn)}else if(Er<0)for(fn=Ut-1,Math.abs(vt.get(Ut,Ut-1))>Math.abs(vt.get(Ut-1,Ut))?(vt.set(Ut-1,Ut-1,Er/vt.get(Ut,Ut-1)),vt.set(Ut-1,Ut,-(vt.get(Ut,Ut)-er)/vt.get(Ut,Ut-1))):(bn=Nt(0,-vt.get(Ut-1,Ut),vt.get(Ut-1,Ut-1)-er,Er),vt.set(Ut-1,Ut-1,bn[0]),vt.set(Ut-1,Ut,bn[1])),vt.set(Ut,Ut-1,0),vt.set(Ut,Ut,1),fr=Ut-2;fr>=0;fr--){for(wr=0,Or=0,Gr=fn;Gr<=Ut;Gr++)wr=wr+vt.get(fr,Gr)*vt.get(Gr,Ut-1),Or=Or+vt.get(fr,Gr)*vt.get(Gr,Ut);if(un=vt.get(fr,fr)-er,ot[fr]<0)xr=un,Fr=wr,vr=Or;else if(fn=fr,ot[fr]===0?(bn=Nt(-wr,-Or,un,Er),vt.set(fr,Ut-1,bn[0]),vt.set(fr,Ut,bn[1])):(hn=vt.get(fr,fr+1),Sn=vt.get(fr+1,fr),sn=(st[fr]-er)*(st[fr]-er)+ot[fr]*ot[fr]-Er*Er,Vr=(st[fr]-er)*2*Er,sn===0&&Vr===0&&(sn=Kt*_r*(Math.abs(un)+Math.abs(Er)+Math.abs(hn)+Math.abs(Sn)+Math.abs(xr))),bn=Nt(hn*Fr-xr*wr+Er*Or,hn*vr-xr*Or-Er*wr,sn,Vr),vt.set(fr,Ut-1,bn[0]),vt.set(fr,Ut,bn[1]),Math.abs(hn)>Math.abs(xr)+Math.abs(Er)?(vt.set(fr+1,Ut-1,(-wr-un*vt.get(fr,Ut-1)+Er*vt.get(fr,Ut))/hn),vt.set(fr+1,Ut,(-Or-un*vt.get(fr,Ut)-Er*vt.get(fr,Ut-1))/hn)):(bn=Nt(-Fr-Sn*vt.get(fr,Ut-1),-vr-Sn*vt.get(fr,Ut),xr,Er),vt.set(fr+1,Ut-1,bn[0]),vt.set(fr+1,Ut,bn[1]))),xn=Math.max(Math.abs(vt.get(fr,Ut-1)),Math.abs(vt.get(fr,Ut))),Kt*xn*xn>1)for(Gr=fr;Gr<=Ut;Gr++)vt.set(Gr,Ut-1,vt.get(Gr,Ut-1)/xn),vt.set(Gr,Ut,vt.get(Gr,Ut)/xn)}for(fr=0;fr<wt;fr++)if(fr<Ot||fr>zt)for(Gr=fr;Gr<wt;Gr++)ht.set(fr,Gr,vt.get(fr,Gr));for(Gr=wt-1;Gr>=Ot;Gr--)for(fr=Ot;fr<=zt;fr++){for(xr=0,an=Ot;an<=Math.min(Gr,zt);an++)xr=xr+ht.get(fr,an)*vt.get(an,Gr);ht.set(fr,Gr,xr)}}}function Nt(wt,ot,st,ht){let vt,Ut;return Math.abs(st)>Math.abs(ht)?(vt=ht/st,Ut=st+vt*ht,[(wt+vt*ot)/Ut,(ot-vt*wt)/Ut]):(vt=st/ht,Ut=ht+vt*st,[(vt*wt+ot)/Ut,(vt*ot-wt)/Ut])}class Jt{constructor(ot){if(ot=on.checkMatrix(ot),!ot.isSymmetric())throw new Error("Matrix is not symmetric");let st=ot,ht=st.rows,vt=new lr(ht,ht),Ut=!0,Ot,zt,Kt;for(zt=0;zt<ht;zt++){let _e=0;for(Kt=0;Kt<zt;Kt++){let _r=0;for(Ot=0;Ot<Kt;Ot++)_r+=vt.get(Kt,Ot)*vt.get(zt,Ot);_r=(st.get(zt,Kt)-_r)/vt.get(Kt,Kt),vt.set(zt,Kt,_r),_e=_e+_r*_r}for(_e=st.get(zt,zt)-_e,Ut&&(Ut=_e>0),vt.set(zt,zt,Math.sqrt(Math.max(_e,0))),Kt=zt+1;Kt<ht;Kt++)vt.set(zt,Kt,0)}this.L=vt,this.positiveDefinite=Ut}isPositiveDefinite(){return this.positiveDefinite}solve(ot){ot=on.checkMatrix(ot);let st=this.L,ht=st.rows;if(ot.rows!==ht)throw new Error("Matrix dimensions do not match");if(this.isPositiveDefinite()===!1)throw new Error("Matrix is not positive definite");let vt=ot.columns,Ut=ot.clone(),Ot,zt,Kt;for(Kt=0;Kt<ht;Kt++)for(zt=0;zt<vt;zt++){for(Ot=0;Ot<Kt;Ot++)Ut.set(Kt,zt,Ut.get(Kt,zt)-Ut.get(Ot,zt)*st.get(Kt,Ot));Ut.set(Kt,zt,Ut.get(Kt,zt)/st.get(Kt,Kt))}for(Kt=ht-1;Kt>=0;Kt--)for(zt=0;zt<vt;zt++){for(Ot=Kt+1;Ot<ht;Ot++)Ut.set(Kt,zt,Ut.get(Kt,zt)-Ut.get(Ot,zt)*st.get(Ot,Kt));Ut.set(Kt,zt,Ut.get(Kt,zt)/st.get(Kt,Kt))}return Ut}get lowerTriangularMatrix(){return this.L}}class Rr{constructor(ot,st={}){ot=on.checkMatrix(ot);let{Y:ht}=st;const{scaleScores:vt=!1,maxIterations:Ut=1e3,terminationCriteria:Ot=1e-10}=st;let zt;if(ht){if(d.isAnyArray(ht)&&typeof ht[0]=="number"?ht=lr.columnVector(ht):ht=on.checkMatrix(ht),ht.rows!==ot.rows)throw new Error("Y should have the same number of rows as X");zt=ht.getColumnVector(0)}else zt=ot.getColumnVector(0);let Kt=1,_e,_r,er,Er;for(let Fr=0;Fr<Ut&&Kt>Ot;Fr++)er=ot.transpose().mmul(zt).div(zt.transpose().mmul(zt).get(0,0)),er=er.div(er.norm()),_e=ot.mmul(er).div(er.transpose().mmul(er).get(0,0)),Fr>0&&(Kt=_e.clone().sub(Er).pow(2).sum()),Er=_e.clone(),ht?(_r=ht.transpose().mmul(_e).div(_e.transpose().mmul(_e).get(0,0)),_r=_r.div(_r.norm()),zt=ht.mmul(_r).div(_r.transpose().mmul(_r).get(0,0))):zt=_e;if(ht){let Fr=ot.transpose().mmul(_e).div(_e.transpose().mmul(_e).get(0,0));Fr=Fr.div(Fr.norm());let vr=ot.clone().sub(_e.clone().mmul(Fr.transpose())),xr=zt.transpose().mmul(_e).div(_e.transpose().mmul(_e).get(0,0)),Zr=ht.clone().sub(_e.clone().mulS(xr.get(0,0)).mmul(_r.transpose()));this.t=_e,this.p=Fr.transpose(),this.w=er.transpose(),this.q=_r,this.u=zt,this.s=_e.transpose().mmul(_e),this.xResidual=vr,this.yResidual=Zr,this.betas=xr}else this.w=er.transpose(),this.s=_e.transpose().mmul(_e).sqrt(),vt?this.t=_e.clone().div(this.s.get(0,0)):this.t=_e,this.xResidual=ot.sub(_e.mmul(er.transpose()))}}return matrix$1.AbstractMatrix=or,matrix$1.CHO=Jt,matrix$1.CholeskyDecomposition=Jt,matrix$1.DistanceMatrix=kr,matrix$1.EVD=Hr,matrix$1.EigenvalueDecomposition=Hr,matrix$1.LU=Yr,matrix$1.LuDecomposition=Yr,matrix$1.Matrix=lr,matrix$1.MatrixColumnSelectionView=nn,matrix$1.MatrixColumnView=Mr,matrix$1.MatrixFlipColumnView=jr,matrix$1.MatrixFlipRowView=Pr,matrix$1.MatrixRowSelectionView=Cr,matrix$1.MatrixRowView=$r,matrix$1.MatrixSelectionView=tn,matrix$1.MatrixSubView=An,matrix$1.MatrixTransposeView=Jr,matrix$1.NIPALS=Rr,matrix$1.Nipals=Rr,matrix$1.QR=rn,matrix$1.QrDecomposition=rn,matrix$1.SVD=Nr,matrix$1.SingularValueDecomposition=Nr,matrix$1.SymmetricMatrix=zr,matrix$1.WrapperMatrix1D=Dr,matrix$1.WrapperMatrix2D=on,matrix$1.correlation=gr,matrix$1.covariance=yt,matrix$1.default=lr,matrix$1.determinant=sr,matrix$1.inverse=en,matrix$1.linearDependencies=Gt,matrix$1.pseudoInverse=ir,matrix$1.solve=Ft,matrix$1.wrap=qr,matrix$1}var matrixExports=requireMatrix();const matrix$2=getDefaultExportFromCjs(matrixExports),Matrix$1=matrixExports.Matrix,SVD=matrixExports.SVD,SingularValueDecomposition=matrixExports.SingularValueDecomposition;matrix$2.Matrix?matrix$2.Matrix:matrixExports.Matrix;const inverse=matrixExports.inverse,solve=matrixExports.solve;function getSeparatedKernel(s){const o=new SVD(s,{autoTranspose:!0});if(o.rank!==1)return null;const h=Math.sqrt(o.s[0]),d=o.U.to2DArray().map(_=>_[0]*h),g=o.V.to2DArray().map(_=>_[0]*h);return[d,g]}function convolution(s,o={}){let{channels:h,bitDepth:d,normalize:g=!1,divisor:_=1,border:b="copy",algorithm:$="auto"}=o,et={};d&&(et.bitDepth=d);let tt=Image$1.createFrom(this,et);if(h=validateArrayOfChannels(this,h),$!=="separable")({kernel:s}=validateKernel(s));else if(!Array.isArray(s)||s.length!==2)throw new RangeError("separable convolution requires two arrays of numbers to represent the kernel");if($==="auto"){let mt=getSeparatedKernel(s);mt!==null?($="separable",s=mt):(s.length>9||s[0].length>9)&&this.width<=4096&&this.height<=4096?$="fft":$="direct"}let rt,nt;$==="separable"?(rt=Math.floor(s[0].length/2),nt=Math.floor(s[1].length/2)):(rt=Math.floor(s.length/2),nt=Math.floor(s[0].length/2));let At=tt.isClamped,at=new Array(this.height*this.width),lt,gt,_t,ct,pt,dt;for(ct=0;ct<h.length;ct++){for(pt=h[ct],_t=0;_t<this.height;_t++)for(gt=0;gt<this.width;gt++)lt=_t*this.width+gt,at[lt]=this.data[lt*this.channels+pt];if($==="direct")dt=srcExports$1.direct(at,s,{rows:this.height,cols:this.width,normalize:g,divisor:_});else if($==="separable"){if(dt=convolutionSeparable(at,s,this.width,this.height),g){_=0;for(let mt=0;mt<s[0].length;mt++)for(let Qt=0;Qt<s[1].length;Qt++)_+=s[0][mt]*s[1][Qt]}if(_!==1)for(let mt=0;mt<dt.length;mt++)dt[mt]/=_}else dt=srcExports$1.fft(at,s,{rows:this.height,cols:this.width,normalize:g,divisor:_});for(_t=0;_t<this.height;_t++)for(gt=0;gt<this.width;gt++)lt=_t*this.width+gt,At?tt.data[lt*this.channels+pt]=clamp(dt[lt],tt):tt.data[lt*this.channels+pt]=dt[lt]}if(this.alpha&&!h.includes(this.channels))for(gt=this.components;gt<this.data.length;gt=gt+this.channels)tt.data[gt]=this.data[gt];return b!=="periodic"&&tt.setBorder({size:[nt,rt],algorithm:b}),tt}function gradientFilter(s={}){let{direction:o="xy",border:h="copy",kernelX:d,kernelY:g,channels:_,bitDepth:b=this.bitDepth}=s;switch(this.checkProcessable("gradientFilter",{bitDepth:[8,16]}),o){case"x":if(!d)throw new Error("kernelX option is missing");return convolution.call(this,d,{channels:_,border:h,bitDepth:b});case"y":if(!g)throw new Error("kernelY option is missing");return convolution.call(this,g,{channels:_,border:h,bitDepth:b});case"xy":{if(!d)throw new Error("kernelX option is missing");if(!g)throw new Error("kernelY option is missing");const $=convolution.call(this,d,{channels:_,border:h,bitDepth:32}),et=convolution.call(this,g,{channels:_,border:h,bitDepth:32});return $.hypotenuse(et,{bitDepth:b,channels:_})}default:throw new Error(`Unknown parameter direction: ${o}`)}}function sobelFilter(s){return gradientFilter.call(this,Object.assign({},s,{kernelX:SOBEL_X,kernelY:SOBEL_Y}))}function scharrFilter(s){return gradientFilter.call(this,Object.assign({},s,{kernelX:SCHARR_X,kernelY:SCHARR_Y}))}var newArray_1,hasRequiredNewArray;function requireNewArray(){if(hasRequiredNewArray)return newArray_1;hasRequiredNewArray=1,newArray_1=s;function s(o,h){o=o||0;for(var d=new Array(o),g=0;g<o;g++)d[g]=h;return d}return newArray_1}var newArrayExports=requireNewArray();const newArray=getDefaultExportFromCjs(newArrayExports);function level(s={}){let{algorithm:o="range",channels:h,min:d=this.min,max:g=this.max}=s;switch(this.checkProcessable("level",{bitDepth:[8,16,32]}),h=validateArrayOfChannels(this,{channels:h}),h.length!==this.channel&&(Array.isArray(d)&&d.length===this.channels&&(d=d.filter((_,b)=>h.includes(b))),Array.isArray(g)&&g.length===this.channels&&(g=g.filter((_,b)=>h.includes(b)))),o){case"range":d<0&&(d=0),g>this.maxValue&&(g=this.maxValue),Array.isArray(d)||(d=newArray(h.length,d)),Array.isArray(g)||(g=newArray(h.length,g)),processImage(this,d,g,h);break;default:throw new Error(`level: algorithm not implement: ${o}`)}return this}function processImage(s,o,h,d){let g=1e-5,_=new Array(d.length);for(let b=0;b<d.length;b++)o[b]===0&&h[b]===s.maxValue||h[b]===o[b]?_[b]=0:_[b]=(s.maxValue+1-g)/(h[b]-o[b]),o[b]+=(.5-g/2)/_[b];for(let b=0;b<d.length;b++){let $=d[b];if(_[b]!==0)for(let et=0;et<s.data.length;et+=s.channels)s.data[et+$]=Math.min(Math.max(0,(s.data[et+$]-o[b])*_[b]+.5|0),s.maxValue)}}var isArrayType,hasRequiredIsArrayType;function requireIsArrayType(){if(hasRequiredIsArrayType)return isArrayType;hasRequiredIsArrayType=1;var s=Object.prototype.toString;return isArrayType=function(o){return s.call(o).substr(-6,5)==="Array"},isArrayType}var isArrayTypeExports=requireIsArrayType();const isArray=getDefaultExportFromCjs(isArrayTypeExports);function checkNumberArray(s){if(isNaN(s)){if(s instanceof Image$1)return s.data;if(!isArray(s))throw new Error("checkNumberArray: the value should be either a number, array or Image");return s}else{if(s<=0)throw new Error("checkNumberArray: the value must be greater than 0");return s}}function add(s,o={}){let{channels:h}=o;if(this.checkProcessable("add",{bitDepth:[8,16]}),h=validateArrayOfChannels(this,{channels:h}),s=checkNumberArray(s),isNaN(s)){if(this.data.length!==s.length)throw new Error("add: the data size is different");for(let d=0;d<h.length;d++){let g=h[d];for(let _=0;_<this.data.length;_+=this.channels)this.data[_+g]=Math.max(0,Math.min(this.maxValue,this.data[_+g]+s[_+g]>>0))}}else for(let d=0;d<h.length;d++){let g=h[d];for(let _=0;_<this.data.length;_+=this.channels)this.data[_+g]=Math.min(this.maxValue,this.data[_+g]+s>>0)}return this}function subtract(s,o={}){let{channels:h}=o;if(this.checkProcessable("subtract",{bitDepth:[8,16]}),h=validateArrayOfChannels(this,{channels:h}),s=checkNumberArray(s),isNaN(s)){if(this.data.length!==s.length)throw new Error("subtract: the data size is different");for(let d=0;d<h.length;d++){let g=h[d];for(let _=0;_<this.data.length;_+=this.channels)this.data[_+g]=Math.max(0,Math.min(this.maxValue,this.data[_+g]-s[_+g]>>0))}}else for(let d=0;d<h.length;d++){let g=h[d];for(let _=0;_<this.data.length;_+=this.channels)this.data[_+g]=Math.max(0,this.data[_+g]-s>>0)}return this}function subtractImage(s,o={}){let{channels:h,absolute:d=!1}=o;if(this.checkProcessable("subtractImage",{bitDepth:[8,16]}),this.width!==s.width||this.height!==s.height)throw new Error("subtractImage: both images must have the same size");if(this.alpha!==s.alpha||this.bitDepth!==s.bitDepth)throw new Error("subtractImage: both images must have the same alpha and bitDepth");if(this.channels!==s.channels)throw new Error("subtractImage: both images must have the same number of channels");let g=this.clone();h=validateArrayOfChannels(this,{channels:h});for(let _=0;_<h.length;_++){let b=h[_];for(let $=b;$<this.data.length;$+=this.channels){let et=this.data[$]-s.data[$];d?g.data[$]=Math.abs(et):g.data[$]=Math.max(et,0)}}return g}function hypotenuse(s,o={}){let{bitDepth:h=this.bitDepth,channels:d}=o;if(this.checkProcessable("hypotenuse",{bitDepth:[8,16,32]}),this.width!==s.width||this.height!==s.height)throw new Error("hypotenuse: both images must have the same size");if(this.alpha!==s.alpha||this.bitDepth!==s.bitDepth)throw new Error("hypotenuse: both images must have the same alpha and bitDepth");if(this.channels!==s.channels)throw new Error("hypotenuse: both images must have the same number of channels");let g=Image$1.createFrom(this,{bitDepth:h});d=validateArrayOfChannels(this,{channels:d});let _=g.isClamped;for(let b=0;b<d.length;b++){let $=d[b];for(let et=$;et<this.data.length;et+=this.channels){let tt=Math.hypot(this.data[et],s.data[et]);_?g.data[et]=Math.min(Math.max(Math.round(tt),0),g.maxValue):g.data[et]=tt}}return g}function multiply(s,o={}){let{channels:h}=o;if(this.checkProcessable("multiply",{bitDepth:[8,16]}),s<=0)throw new Error("multiply: the value must be greater than 0");if(h=validateArrayOfChannels(this,{channels:h}),s=checkNumberArray(s),isNaN(s)){if(this.data.length!==s.length)throw new Error("multiply: the data size is different");for(let d=0;d<h.length;d++){let g=h[d];for(let _=0;_<this.data.length;_+=this.channels)this.data[_+g]=Math.max(0,Math.min(this.maxValue,this.data[_+g]*s[_+g]>>0))}}else for(let d=0;d<h.length;d++){let g=h[d];for(let _=0;_<this.data.length;_+=this.channels)this.data[_+g]=Math.min(this.maxValue,this.data[_+g]*s>>0)}return this}function divide(s,o={}){let{channels:h}=o;if(this.checkProcessable("divide",{bitDepth:[8,16]}),h=validateArrayOfChannels(this,{channels:h}),s=checkNumberArray(s),isNaN(s)){if(this.data.length!==s.length)throw new Error("divide: the: the data size is different");for(let d=0;d<h.length;d++){let g=h[d];for(let _=0;_<this.data.length;_+=this.channels)this.data[_+g]=Math.max(0,Math.min(this.maxValue,this.data[_+g]/s[_+g]>>0))}}else for(let d=0;d<h.length;d++){let g=h[d];for(let _=0;_<this.data.length;_+=this.channels)this.data[_+g]=Math.min(this.maxValue,this.data[_+g]/s>>0)}return this}class BaseRegression{constructor(){if(new.target===BaseRegression)throw new Error("BaseRegression must be subclassed")}predict(o){if(typeof o=="number")return this._predict(o);if(isAnyArray(o)){const h=[];for(let d=0;d<o.length;d++)h.push(this._predict(o[d]));return h}else throw new TypeError("x must be a number or array")}_predict(){throw new Error("_predict must be implemented")}train(){}toString(){return""}toLaTeX(){return""}score(o,h){if(!isAnyArray(o)||!isAnyArray(h)||o.length!==h.length)throw new Error("x and y must be arrays of the same length");const d=o.length,g=new Array(d);for(let at=0;at<d;at++)g[at]=this._predict(o[at]);let _=0,b=0,$=0,et=0,tt=0,rt=0,nt=0;for(let at=0;at<d;at++)_+=g[at],b+=h[at],tt+=g[at]*g[at],rt+=h[at]*h[at],nt+=g[at]*h[at],h[at]!==0&&($+=(h[at]-g[at])*(h[at]-g[at])/h[at]),et+=(h[at]-g[at])*(h[at]-g[at]);const At=(d*nt-_*b)/Math.sqrt((d*tt-_*_)*(d*rt-b*b));return{r:At,r2:At*At,chi2:$,rmsd:Math.sqrt(et/d)}}}function squaredEuclidean(s,o){let h=0;for(let d=0;d<s.length;d++)h+=(s[d]-o[d])*(s[d]-o[d]);return h}function euclidean(s,o){return Math.sqrt(squaredEuclidean(s,o))}const euclidean$1=Object.freeze(Object.defineProperty({__proto__:null,euclidean,squaredEuclidean},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(euclidean$1);var gaussianKernel,hasRequiredGaussianKernel;function requireGaussianKernel(){if(hasRequiredGaussianKernel)return gaussianKernel;hasRequiredGaussianKernel=1;const{squaredEuclidean:s}=require$$0,o={sigma:1};class h{constructor(g){g=Object.assign({},o,g),this.sigma=g.sigma,this.divisor=2*g.sigma*g.sigma}compute(g,_){const b=s(g,_);return Math.exp(-b/this.divisor)}}return gaussianKernel=h,gaussianKernel}var polynomialKernel,hasRequiredPolynomialKernel;function requirePolynomialKernel(){if(hasRequiredPolynomialKernel)return polynomialKernel;hasRequiredPolynomialKernel=1;const s={degree:1,constant:1,scale:1};class o{constructor(d){d=Object.assign({},s,d),this.degree=d.degree,this.constant=d.constant,this.scale=d.scale}compute(d,g){for(var _=0,b=0;b<d.length;b++)_+=d[b]*g[b];return Math.pow(this.scale*_+this.constant,this.degree)}}return polynomialKernel=o,polynomialKernel}var sigmoidKernel,hasRequiredSigmoidKernel;function requireSigmoidKernel(){if(hasRequiredSigmoidKernel)return sigmoidKernel;hasRequiredSigmoidKernel=1;const s={alpha:.01,constant:-Math.E};class o{constructor(d){d=Object.assign({},s,d),this.alpha=d.alpha,this.constant=d.constant}compute(d,g){for(var _=0,b=0;b<d.length;b++)_+=d[b]*g[b];return Math.tanh(this.alpha*_+this.constant)}}return sigmoidKernel=o,sigmoidKernel}var anovaKernel,hasRequiredAnovaKernel;function requireAnovaKernel(){if(hasRequiredAnovaKernel)return anovaKernel;hasRequiredAnovaKernel=1;const s={sigma:1,degree:1};class o{constructor(d){d=Object.assign({},s,d),this.sigma=d.sigma,this.degree=d.degree}compute(d,g){for(var _=0,b=Math.min(d.length,g.length),$=1;$<=b;++$)_+=Math.pow(Math.exp(-this.sigma*Math.pow(Math.pow(d[$-1],$)-Math.pow(g[$-1],$),2)),this.degree);return _}}return anovaKernel=o,anovaKernel}var cauchyKernel,hasRequiredCauchyKernel;function requireCauchyKernel(){if(hasRequiredCauchyKernel)return cauchyKernel;hasRequiredCauchyKernel=1;const{squaredEuclidean:s}=require$$0,o={sigma:1};class h{constructor(g){g=Object.assign({},o,g),this.sigma=g.sigma}compute(g,_){return 1/(1+s(g,_)/(this.sigma*this.sigma))}}return cauchyKernel=h,cauchyKernel}var exponentialKernel,hasRequiredExponentialKernel;function requireExponentialKernel(){if(hasRequiredExponentialKernel)return exponentialKernel;hasRequiredExponentialKernel=1;const{euclidean:s}=require$$0,o={sigma:1};class h{constructor(g){g=Object.assign({},o,g),this.sigma=g.sigma,this.divisor=2*g.sigma*g.sigma}compute(g,_){const b=s(g,_);return Math.exp(-b/this.divisor)}}return exponentialKernel=h,exponentialKernel}var histogramIntersectionKernel,hasRequiredHistogramIntersectionKernel;function requireHistogramIntersectionKernel(){if(hasRequiredHistogramIntersectionKernel)return histogramIntersectionKernel;hasRequiredHistogramIntersectionKernel=1;class s{compute(h,d){for(var g=Math.min(h.length,d.length),_=0,b=0;b<g;++b)_+=Math.min(h[b],d[b]);return _}}return histogramIntersectionKernel=s,histogramIntersectionKernel}var laplacianKernel,hasRequiredLaplacianKernel;function requireLaplacianKernel(){if(hasRequiredLaplacianKernel)return laplacianKernel;hasRequiredLaplacianKernel=1;const{euclidean:s}=require$$0,o={sigma:1};class h{constructor(g){g=Object.assign({},o,g),this.sigma=g.sigma}compute(g,_){const b=s(g,_);return Math.exp(-b/this.sigma)}}return laplacianKernel=h,laplacianKernel}var multiquadraticKernel,hasRequiredMultiquadraticKernel;function requireMultiquadraticKernel(){if(hasRequiredMultiquadraticKernel)return multiquadraticKernel;hasRequiredMultiquadraticKernel=1;const{squaredEuclidean:s}=require$$0,o={constant:1};class h{constructor(g){g=Object.assign({},o,g),this.constant=g.constant}compute(g,_){return Math.sqrt(s(g,_)+this.constant*this.constant)}}return multiquadraticKernel=h,multiquadraticKernel}var rationalQuadraticKernel,hasRequiredRationalQuadraticKernel;function requireRationalQuadraticKernel(){if(hasRequiredRationalQuadraticKernel)return rationalQuadraticKernel;hasRequiredRationalQuadraticKernel=1;const{squaredEuclidean:s}=require$$0,o={constant:1};class h{constructor(g){g=Object.assign({},o,g),this.constant=g.constant}compute(g,_){const b=s(g,_);return 1-b/(b+this.constant)}}return rationalQuadraticKernel=h,rationalQuadraticKernel}var kernel,hasRequiredKernel;function requireKernel(){if(hasRequiredKernel)return kernel;hasRequiredKernel=1;const{Matrix:s,MatrixTransposeView:o}=requireMatrix(),h=requireGaussianKernel(),d=requirePolynomialKernel(),g=requireSigmoidKernel(),_=requireAnovaKernel(),b=requireCauchyKernel(),$=requireExponentialKernel(),et=requireHistogramIntersectionKernel(),tt=requireLaplacianKernel(),rt=requireMultiquadraticKernel(),nt=requireRationalQuadraticKernel(),At={gaussian:h,rbf:h,polynomial:d,poly:d,anova:_,cauchy:b,exponential:$,histogram:et,min:et,laplacian:tt,multiquadratic:rt,rational:nt,sigmoid:g,mlp:g};class at{constructor(gt,_t){if(this.kernelType=gt,gt!=="linear")if(typeof gt=="string"){gt=gt.toLowerCase();var ct=At[gt];if(ct)this.kernelFunction=new ct(_t);else throw new Error(`unsupported kernel type: ${gt}`)}else if(typeof gt=="object"&&typeof gt.compute=="function")this.kernelFunction=gt;else throw new TypeError("first argument must be a valid kernel type or instance")}compute(gt,_t){if(gt=s.checkMatrix(gt),_t===void 0?_t=gt:_t=s.checkMatrix(_t),this.kernelType==="linear")return gt.mmul(new o(_t));const ct=new s(gt.rows,_t.rows);if(gt===_t)for(let pt=0;pt<gt.rows;pt++)for(let dt=pt;dt<gt.rows;dt++){const mt=this.kernelFunction.compute(gt.getRow(pt),gt.getRow(dt));ct.set(pt,dt,mt),ct.set(dt,pt,mt)}else for(let pt=0;pt<gt.rows;pt++)for(let dt=0;dt<_t.rows;dt++)ct.set(pt,dt,this.kernelFunction.compute(gt.getRow(pt),_t.getRow(dt)));return ct}}return kernel=at,kernel}var kernelExports=requireKernel();const Kernel=getDefaultExportFromCjs(kernelExports),defaultOptions$2={lambda:.1,kernelType:"gaussian",kernelOptions:{},computeCoefficient:!1};class KernelRidgeRegression extends BaseRegression{constructor(o,h,d){if(super(),o===!0)this.alpha=h.alpha,this.inputs=h.inputs,this.kernelType=h.kernelType,this.kernelOptions=h.kernelOptions,this.kernel=new Kernel(h.kernelType,h.kernelOptions);else{o=Matrix$1.checkMatrix(o),d=Object.assign({},defaultOptions$2,d);const g=new Kernel(d.kernelType,d.kernelOptions),_=g.compute(o),b=o.rows;_.add(Matrix$1.eye(b,b).mul(d.lambda)),this.alpha=solve(_,h),this.inputs=o,this.kernelType=d.kernelType,this.kernelOptions=d.kernelOptions,this.kernel=g}}_predict(o){return this.kernel.compute([o],this.inputs).mmul(this.alpha).getRow(0)}toJSON(){return{name:"kernelRidgeRegression",alpha:this.alpha,inputs:this.inputs,kernelType:this.kernelType,kernelOptions:this.kernelOptions}}static load(o){if(o.name!=="kernelRidgeRegression")throw new TypeError("not a KRR model");return new KernelRidgeRegression(!0,o)}}function background$1(s,o,h){const d=new KernelRidgeRegression(s,o,h),g=new Array(this.size);for(let $=0;$<this.width;$++)for(let et=0;et<this.height;et++)g[et*this.width+$]=[$,et];const _=d.predict(g),b=Image$1.createFrom(this);for(let $=0;$<this.size;$++)b.data[$]=Math.min(this.maxValue,Math.max(0,_[$][0]));return b}function dilate(s={}){let{kernel:o=[[1,1,1],[1,1,1],[1,1,1]],iterations:h=1}=s;if(this.checkProcessable("dilate",{bitDepth:[1,8,16],components:1,alpha:0}),o.columns%2===0||o.rows%2===0)throw new TypeError("dilate: The number of rows and columns of the kernel must be odd");let d=!0;t:for(const _ of o)for(const b of _)if(b!==1){d=!1;break t}let g=this;for(let _=0;_<h;_++)if(this.bitDepth===1)if(d){const b=g.clone();g=dilateOnceBinaryOnlyOnes(g,b,o.length,o[0].length)}else{const b=Image$1.createFrom(g);g=dilateOnceBinary(g,b,o)}else if(d){const b=Image$1.createFrom(g);g=dilateOnceGreyOnlyOnes(g,b,o.length,o[0].length)}else{const b=Image$1.createFrom(g);g=dilateOnceGrey(g,b,o)}return g}function dilateOnceGrey(s,o,h){const d=h.length,g=h[0].length;let _=(d-1)/2,b=(g-1)/2;for(let $=0;$<s.height;$++)for(let et=0;et<s.width;et++){let tt=0;for(let rt=0;rt<g;rt++)for(let nt=0;nt<d;nt++){if(h[nt][rt]!==1)continue;let At=nt-_+et,at=rt-b+$;if(At<0||at<0||At>=s.width||at>=s.height)continue;const lt=s.getValueXY(At,at,0);lt>tt&&(tt=lt)}o.setValueXY(et,$,0,tt)}return o}function dilateOnceGreyOnlyOnes(s,o,h,d){const g=(h-1)/2,_=(d-1)/2,b=[];for(let $=0;$<s.width;$++)b.push(0);for(let $=0;$<s.height;$++){for(let et=0;et<s.width;et++){let tt=0;for(let rt=Math.max(0,$-_);rt<Math.min(s.height,$+_+1);rt++){const nt=s.getValueXY(et,rt,0);nt>tt&&(tt=nt)}b[et]=tt}for(let et=0;et<s.width;et++){let tt=0;for(let rt=Math.max(0,et-g);rt<Math.min(s.width,et+g+1);rt++)b[rt]>tt&&(tt=b[rt]);o.setValueXY(et,$,0,tt)}}return o}function dilateOnceBinary(s,o,h){const d=h.length,g=h[0].length;let _=(d-1)/2,b=(g-1)/2;for(let $=0;$<s.height;$++)for(let et=0;et<s.width;et++){let tt=0;t:for(let rt=0;rt<g;rt++)for(let nt=0;nt<d;nt++){if(h[nt][rt]!==1)continue;let At=nt-_+et,at=rt-b+$;if(!(at<0||At<0||At>=s.width||at>=s.height)&&s.getBitXY(At,at)===1){tt=1;break t}}tt===1&&o.setBitXY(et,$)}return o}function dilateOnceBinaryOnlyOnes(s,o,h,d){const g=(h-1)/2,_=(d-1)/2,b=[];for(let $=0;$<s.width;$++)b.push(1);for(let $=0;$<s.height;$++){for(let et=0;et<s.width;et++){b[et]=0;for(let tt=Math.max(0,$-_);tt<Math.min(s.height,$+_+1);tt++)if(s.getBitXY(et,tt)===1){b[et]=1;break}}for(let et=0;et<s.width;et++)if(o.getBitXY(et,$)!==1){for(let tt=Math.max(0,et-g);tt<Math.min(s.width,et+g+1);tt++)if(b[tt]===1){o.setBitXY(et,$);break}}}return o}function erode(s={}){let{kernel:o=[[1,1,1],[1,1,1],[1,1,1]],iterations:h=1}=s;if(this.checkProcessable("erode",{bitDepth:[1,8,16],components:1,alpha:0}),o.columns%2===0||o.rows%2===0)throw new TypeError("erode: The number of rows and columns of the kernel must be odd");let d=!0;t:for(const _ of o)for(const b of _)if(b!==1){d=!1;break t}let g=this;for(let _=0;_<h;_++)if(this.bitDepth===1)if(d){const b=g.clone();g=erodeOnceBinaryOnlyOnes(g,b,o.length,o[0].length)}else{const b=Image$1.createFrom(g);g=erodeOnceBinary(g,b,o)}else if(d){const b=Image$1.createFrom(g);g=erodeOnceGreyOnlyOnes(g,b,o.length,o[0].length)}else{const b=Image$1.createFrom(g);g=erodeOnceGrey(g,b,o)}return g}function erodeOnceGrey(s,o,h){const d=h.length,g=h[0].length;let _=(d-1)/2,b=(g-1)/2;for(let $=0;$<s.height;$++)for(let et=0;et<s.width;et++){let tt=s.maxValue;for(let rt=0;rt<g;rt++)for(let nt=0;nt<d;nt++){if(h[nt][rt]!==1)continue;let At=nt-_+et,at=rt-b+$;if(At<0||at<0||At>=s.width||at>=s.height)continue;const lt=s.getValueXY(At,at,0);lt<tt&&(tt=lt)}o.setValueXY(et,$,0,tt)}return o}function erodeOnceGreyOnlyOnes(s,o,h,d){const g=(h-1)/2,_=(d-1)/2,b=[];for(let $=0;$<s.width;$++)b.push(0);for(let $=0;$<s.height;$++){for(let et=0;et<s.width;et++){let tt=s.maxValue;for(let rt=Math.max(0,$-_);rt<Math.min(s.height,$+_+1);rt++){const nt=s.getValueXY(et,rt,0);nt<tt&&(tt=nt)}b[et]=tt}for(let et=0;et<s.width;et++){let tt=s.maxValue;for(let rt=Math.max(0,et-g);rt<Math.min(s.width,et+g+1);rt++)b[rt]<tt&&(tt=b[rt]);o.setValueXY(et,$,0,tt)}}return o}function erodeOnceBinary(s,o,h){const d=h.length,g=h[0].length;let _=(d-1)/2,b=(g-1)/2;for(let $=0;$<s.height;$++)for(let et=0;et<s.width;et++){let tt=1;t:for(let rt=0;rt<g;rt++)for(let nt=0;nt<d;nt++){if(h[nt][rt]!==1)continue;let At=nt-_+et,at=rt-b+$;if(!(at<0||At<0||At>=s.width||at>=s.height)&&s.getBitXY(At,at)===0){tt=0;break t}}tt===1&&o.setBitXY(et,$)}return o}function erodeOnceBinaryOnlyOnes(s,o,h,d){const g=(h-1)/2,_=(d-1)/2,b=[];for(let $=0;$<s.width;$++)b.push(0);for(let $=0;$<s.height;$++){for(let et=0;et<s.width;et++){b[et]=1;for(let tt=Math.max(0,$-_);tt<Math.min(s.height,$+_+1);tt++)if(s.getBitXY(et,tt)===0){b[et]=0;break}}for(let et=0;et<s.width;et++)if(o.getBitXY(et,$)!==0){for(let tt=Math.max(0,et-g);tt<Math.min(s.width,et+g+1);tt++)if(b[tt]===0){o.clearBitXY(et,$);break}}}return o}function open(s={}){let{kernel:o=[[1,1,1],[1,1,1],[1,1,1]],iterations:h=1}=s;if(this.checkProcessable("open",{bitDepth:[8,16],components:1,alpha:0}),o.columns%2===0||o.rows%2===0)throw new TypeError("open: The number of rows and columns of the kernel must be odd");let d=this;for(let g=0;g<h;g++)d=d.erode({kernel:o}),d=d.dilate({kernel:o});return d}function close(s={}){let{kernel:o=[[1,1,1],[1,1,1],[1,1,1]],iterations:h=1}=s;if(this.checkProcessable("close",{bitDepth:[1,8,16],components:1,alpha:0}),o.columns%2===0||o.rows%2===0)throw new TypeError("close: The number of rows and columns of the kernel must be odd");let d=this;for(let g=0;g<h;g++)d=d.dilate({kernel:o}).erode({kernel:o});return d}function topHat(s={}){let{kernel:o=[[1,1,1],[1,1,1],[1,1,1]],iterations:h=1}=s;if(this.checkProcessable("topHat",{bitDepth:[8,16],components:1,alpha:0}),o.length%2===0||o[0].length%2===0)throw new TypeError("topHat: The number of rows and columns of the kernel must be odd");let d=this;for(let g=0;g<h;g++)d=d.open({kernel:o}).subtractImage(d,{absolute:!0});return d}function blackHat(s={}){let{kernel:o=[[1,1,1],[1,1,1],[1,1,1]],iterations:h=1}=s;if(this.checkProcessable("blackHat",{bitDepth:[8,16],components:1,alpha:0}),o.columns%2===0||o.rows%2===0)throw new TypeError("blackHat: The number of rows and columns of the kernel must be odd");let d=this;for(let g=0;g<h;g++)d=d.close({kernel:o}).subtractImage(d,{absolute:!0});return d}function morphologicalGradient(s={}){let{kernel:o=[[1,1,1],[1,1,1],[1,1,1]],iterations:h=1}=s;if(this.checkProcessable("morphologicalGradient",{bitDepth:[8,16],components:1,alpha:0}),o.columns%2===0||o.rows%2===0)throw new TypeError("morphologicalGradient: The number of rows and columns of the kernel must be odd");let d=this;for(let g=0;g<h;g++){let _=d.dilate({kernel:o}),b=d.erode({kernel:o});d=_.subtractImage(b,{absolute:!0})}return d}function order4Points(s){let o=0,h=0,d=0,g=0,_=s[0][0],b=0;for(let tt=1;tt<s.length;tt++)s[tt][0]<_&&(_=s[tt][0],b=tt);let $=s[(b+1)%s.length][0],et=(b+1)%s.length;for(let tt=1;tt<s.length;tt++)s[tt][0]<$&&tt!==b&&($=s[tt][0],et=tt);return s[et][1]<s[b][1]?(o=s[et],g=s[b],b!==(et+1)%4?(h=s[(et+1)%4],d=s[(et+2)%4]):(h=s[(et+2)%4],d=s[(et+3)%4])):(g=s[et],o=s[b],et!==(b+1)%4?(h=s[(b+1)%4],d=s[(b+2)%4]):(h=s[(b+2)%4],d=s[(b+3)%4])),[o,h,d,g]}function distance2Points(s,o){return Math.sqrt(Math.pow(s[0]-o[0],2)+Math.pow(s[1]-o[1],2))}function crossVect(s,o){return[s[1]*o[2]-s[2]*o[1],s[2]*o[0]-s[0]*o[2],s[0]*o[1]-s[1]*o[0]]}function dotVect(s,o){return s[0]*o[0]+s[1]*o[1]+s[2]*o[2]}function computeWidthAndHeigth(s,o,h,d,g,_){let b=Math.max(distance2Points(s,o),distance2Points(d,h)),$=Math.max(distance2Points(s,d),distance2Points(o,h)),et=0,tt=0,rt=Math.ceil(g/2),nt=Math.ceil(_/2),At=b/$,at=[s[0],s[1],1],lt=[o[0],o[1],1],gt=[d[0],d[1],1],_t=[h[0],h[1],1],ct=dotVect(crossVect(at,_t),gt)/dotVect(crossVect(lt,_t),gt),pt=dotVect(crossVect(at,_t),lt)/dotVect(crossVect(gt,_t),lt),dt=[ct*lt[0]-at[0],ct*lt[1]-at[1],ct*lt[2]-at[2]],mt=[pt*gt[0]-at[0],pt*gt[1]-at[1],pt*gt[2]-at[2]],Qt=dt[0],xt=dt[1],bt=dt[2],kt=mt[0],Lt=mt[1],Ht=mt[2],Pt=1/(bt*Ht)*(Qt*kt-(Qt*Ht+bt*kt)*rt+bt*Ht*rt*rt+(xt*Lt-(xt*Ht+bt*Lt)*nt+bt*Ht*nt*nt));Pt>=0?Pt=Math.sqrt(Pt):Pt=Math.sqrt(-Pt);let jt=new Matrix$1([[Pt,0,rt],[0,Pt,nt],[0,0,1]]),Vt=jt.transpose(),Xt=inverse(Vt),nr=inverse(jt),Ar=Matrix$1.rowVector(dt),ar=Matrix$1.rowVector(mt),Wt=Math.sqrt(dotVect(Ar.mmul(Xt).mmul(nr).to1DArray(),dt)/dotVect(ar.mmul(Xt).mmul(nr).to1DArray(),mt));return Wt===0||At===0?(et=Math.ceil(b),tt=Math.ceil($)):Wt<At?(et=Math.ceil(b),tt=Math.ceil(et/Wt)):(tt=Math.ceil($),et=Math.ceil(Wt*tt)),[et,tt]}function projectionPoint(s,o,h,d,g,_,b,$,et,tt,rt,nt){let[At,at]=[(h*s+d*o+g)/(et*s+tt*o+1),(_*s+b*o+$)/(et*s+tt*o+1)];return rt.getValueXY(Math.floor(At),Math.floor(at),nt)}function warpingFourPoints(s,o={}){let{calculateRatio:h=!0}=o;if(s.length!==4)throw new Error(`The array pts must have four elements, which are the four corners. Currently, pts have ${s.length} elements`);let[d,g,_,b]=s,$=[d,g,_,b],[et,tt,rt,nt]=order4Points($),At,at;h?[At,at]=computeWidthAndHeigth(et,tt,rt,nt,this.width,this.height):(At=Math.ceil(Math.max(distance2Points(et,tt),distance2Points(nt,rt))),at=Math.ceil(Math.max(distance2Points(et,nt),distance2Points(tt,rt))));let lt=Image$1.createFrom(this,{width:At,height:at}),[gt,_t]=et,[ct,pt]=tt,[dt,mt]=rt,[Qt,xt]=nt,[bt,kt]=[0,0],[Lt,Ht]=[0,At-1],[Pt,jt]=[at-1,At-1],[Vt,Xt]=[at-1,0],nr=new Matrix$1([[bt,kt,1,0,0,0,-bt*gt,-kt*gt],[Lt,Ht,1,0,0,0,-Lt*ct,-Ht*ct],[Pt,jt,1,0,0,0,-Pt*dt,-kt*dt],[Vt,Xt,1,0,0,0,-Vt*Qt,-Xt*Qt],[0,0,0,bt,kt,1,-bt*_t,-kt*_t],[0,0,0,Lt,Ht,1,-Lt*pt,-Ht*pt],[0,0,0,Pt,jt,1,-Pt*mt,-jt*mt],[0,0,0,Vt,Xt,1,-Vt*xt,-Xt*xt]]),Ar=Matrix$1.columnVector([gt,ct,dt,Qt,_t,pt,mt,xt]),ar=new SingularValueDecomposition(nr).solve(Ar),[Wt,pr,dr,yr,Br,Lr,Ur,or]=ar.to1DArray(),mr=new Matrix$1(at,At);for(let Ir=0;Ir<this.channels;Ir++){for(let ur=0;ur<at;ur++)for(let lr=0;lr<At;lr++)mr.set(ur,lr,projectionPoint(ur,lr,Wt,pr,dr,yr,Br,Lr,Ur,or,this,Ir));lt.setMatrix(mr,{channel:Ir})}return lt}function crop(s={}){let{x:o=0,y:h=0,width:d=this.width-o,height:g=this.height-h}=s;if(this.checkProcessable("crop",{bitDepth:[1,8,16]}),o=Math.round(o),h=Math.round(h),d=Math.round(d),g=Math.round(g),o>this.width-1||h>this.height-1)throw new RangeError(`crop: origin (x:${o}, y:${h}) out of range (${this.width-1}; ${this.height-1})`);if(d<=0||g<=0)throw new RangeError(`crop: width and height (width:${d}; height:${g}) must be positive numbers`);if(o<0||h<0)throw new RangeError(`crop: x and y (x:${o}, y:${h}) must be positive numbers`);if(d>this.width-o||g>this.height-h)throw new RangeError(`crop: (x: ${o}, y:${h}, width:${d}, height:${g}) size is out of range`);let _=this;if(this.bitDepth===1){const b=new Image$1(d,g,{kind:"BINARY",parent:this});_=cropBinary(this,b,o,h,d,g)}else{const b=Image$1.createFrom(this,{width:d,height:g,position:[o,h]});_=cropDefault(this,b,o,h,d,g)}return _}function cropDefault(s,o,h,d,g,_){let b=g*s.channels,$=d+_,et=0,tt=h*s.channels;for(let rt=d;rt<$;rt++){let nt=rt*s.width*s.channels+tt,At=nt+b;for(;nt<At;nt++)o.data[et++]=s.data[nt]}return o}function cropBinary(s,o,h,d,g,_){let b=g*s.channels,$=d+_,et=0,tt=h*s.channels;for(let rt=d;rt<$;rt++){let nt=rt*s.width*s.channels+tt,At=nt+b;for(;nt<At;nt++)s.getBit(nt)&&o.setBit(et),++et}return o}function cropAlpha(s={}){this.checkProcessable("cropAlpha",{alpha:1});const{threshold:o=this.maxValue}=s;let h=findLeft(this,o,this.components);if(h===-1)throw new Error("Could not find new dimensions. Threshold may be too high.");let d=findTop(this,o,this.components,h),g=findBottom(this,o,this.components,h),_=findRight(this,o,this.components,h,d,g);return this.crop({x:h,y:d,width:_-h+1,height:g-d+1})}function findLeft(s,o,h){for(let d=0;d<s.width;d++)for(let g=0;g<s.height;g++)if(s.getValueXY(d,g,h)>=o)return d;return-1}function findTop(s,o,h,d){for(let g=0;g<s.height;g++)for(let _=d;_<s.width;_++)if(s.getValueXY(_,g,h)>=o)return g;return-1}function findBottom(s,o,h,d){for(let g=s.height-1;g>=0;g--)for(let _=d;_<s.width;_++)if(s.getValueXY(_,g,h)>=o)return g;return-1}function findRight(s,o,h,d,g,_){for(let b=s.width-1;b>=d;b--)for(let $=g;$<=_;$++)if(s.getValueXY(b,$,h)>=o)return b;return-1}function getFactor(s){if(typeof s=="string"){const o=s[s.length-1];s=parseFloat(s),o==="%"&&(s/=100)}return s}function getThreshold$1(s,o){if(!o)throw Error("getThreshold : the maxValue should be specified");if(typeof s=="string"){if(s[s.length-1]!=="%")throw Error("getThreshold : if the value is a string it must finish by %");return parseFloat(s)/100*o}else{if(typeof s=="number")return s<1?s*o:s;throw Error("getThreshold : the value is not valid")}}function factorDimensions(s,o,h){s=getFactor(s);let d=Math.round(s*o),g=Math.round(s*h);return d<=0&&(d=1),g<=0&&(g=1),{width:d,height:g}}function checkRow(s,o){if(o<0||o>=s.height)throw new RangeError(`row must be included between 0 and ${s.height-1}. Current value: ${o}`)}function checkColumn(s,o){if(o<0||o>=s.width)throw new RangeError(`column must be included between 0 and ${s.width-1}. Current value: ${o}`)}function checkChannel(s,o){if(o<0||o>=s.channels)throw new RangeError(`channel must be included between 0 and ${s.channels-1}. Current value: ${o}`)}const validInterpolations={nearestneighbor:"nearestNeighbor",nearestneighbour:"nearestNeighbor",bilinear:"bilinear"};function checkInterpolation(s){if(typeof s!="string")throw new TypeError("interpolation must be a string");if(s=s.toLowerCase(),!validInterpolations[s])throw new RangeError(`invalid interpolation algorithm: ${s}`);return validInterpolations[s]}function nearestNeighbor(s,o,h){const d=this.width/o,g=this.height/h;if(this.bitDepth>1)for(let _=0;_<o;_++){const b=Math.floor((_+.5)*d);for(let $=0;$<h;$++){const et=Math.floor(($+.5)*g);for(let tt=0;tt<this.channels;tt++)s.setValueXY(_,$,tt,this.getValueXY(b,et,tt))}}else for(let _=0;_<o;_++){const b=Math.floor((_+.5)*d);for(let $=0;$<h;$++){const et=Math.floor(($+.5)*g);this.getBitXY(b,et)&&s.setBitXY(_,$)}}}function resize(s={}){const{factor:o=1,interpolation:h=validInterpolations.nearestneighbor,preserveAspectRatio:d=!0}=s,g=checkInterpolation(h);let _=s.width,b=s.height;if(_||(b&&d?_=Math.round(b*(this.width/this.height)):_=this.width),b||(d?b=Math.round(_*(this.height/this.width)):b=this.height),{width:_,height:b}=factorDimensions(o,_,b),_===this.width&&b===this.height){const rt=this.clone();return rt.position=[0,0],rt}let $=Math.round((this.width-_)/2),et=Math.round((this.height-b)/2);const tt=Image$1.createFrom(this,{width:_,height:b,position:[$,et]});switch(g){case validInterpolations.nearestneighbor:nearestNeighbor.call(this,tt,_,b);break;default:throw new Error(`unsupported resize interpolation: ${g}`)}return tt}function hsv(){this.checkProcessable("hsv",{bitDepth:[8,16],alpha:[0,1],colorModel:[RGB$1]});let s=Image$1.createFrom(this,{colorModel:HSV}),o=0,h=this.data;for(let d=0;d<h.length;d+=this.channels){let g=h[d],_=h[d+1],b=h[d+2],$=Math.min(g,_,b),et=Math.max(g,_,b),tt=et-$,rt=0,nt=et===0?0:tt/et,At=et;if(et!==$){switch(et){case g:rt=(_-b)/tt+(_<b?6:0);break;case _:rt=(b-g)/tt+2;break;case b:rt=(g-_)/tt+4;break;default:throw new Error("unreachable")}rt/=6}s.data[o++]=rt*this.maxValue,s.data[o++]=nt*this.maxValue,s.data[o++]=At,this.alpha&&(s.data[o++]=h[d+3])}return s}function hsl$1(){this.checkProcessable("hsl",{bitDepth:[8,16],alpha:[0,1],colorModel:[RGB$1]});let s=Image$1.createFrom(this,{colorModel:HSL}),o=Math.floor(this.maxValue/2),h=0,d=this.data;for(let g=0;g<d.length;g+=this.channels){let _=d[g],b=d[g+1],$=d[g+2],et=Math.max(_,b,$),tt=Math.min(_,b,$),rt=0,nt=0,At=(et+tt)/2;if(et!==tt){let at=et-tt;switch(nt=At>o?at/(2-et-tt):at/(et+tt),et){case _:rt=(b-$)/at+(b<$?6:0);break;case b:rt=($-_)/at+2;break;case $:rt=(_-b)/at+4;break;default:throw new Error("unreachable")}rt/=6}s.data[h++]=rt*this.maxValue,s.data[h++]=nt*this.maxValue,s.data[h++]=At,this.alpha&&(s.data[h++]=d[g+3])}return s}function cmyk(){this.checkProcessable("cmyk",{bitDepth:[8,16],alpha:[0,1],colorModel:[RGB$1]});let s=Image$1.createFrom(this,{components:4,colorModel:CMYK$1}),o=0,h=this.data;for(let d=0;d<h.length;d+=this.channels){let g=h[d],_=h[d+1],b=h[d+2],$=Math.min(this.maxValue-g,this.maxValue-_,this.maxValue-b),et=(this.maxValue-g-$)/(1-$/this.maxValue),tt=(this.maxValue-_-$)/(1-$/this.maxValue),rt=(this.maxValue-b-$)/(1-$/this.maxValue);s.data[o++]=Math.round(et),s.data[o++]=Math.round(tt),s.data[o++]=Math.round(rt),s.data[o++]=Math.round($),this.alpha&&(s.data[o++]=h[d+3])}return s}function rgba8(){return new Image$1(this.width,this.height,this.getRGBAData(),{kind:"RGBA",parent:this})}const methods$1={luma709(s,o,h){return s*6966+o*23436+h*2366>>15},luma601(s,o,h){return s*9798+o*19235+h*3735>>15},maximum(s,o,h){return Math.max(s,o,h)},minimum(s,o,h){return Math.min(s,o,h)},average(s,o,h){return(s+o+h)/3>>0},minmax(s,o,h){return(Math.max(s,o,h)+Math.min(s,o,h))/2},red(s){return s},green(s,o){return o},blue(s,o,h){return h},cyan(s,o,h,d){let g=methods$1.black(s,o,h,d);return(d.maxValue-s-g)/(1-g/d.maxValue)>>0},magenta(s,o,h,d){let g=methods$1.black(s,o,h,d);return(d.maxValue-o-g)/(1-g/d.maxValue)>>0},yellow(s,o,h,d){let g=methods$1.black(s,o,h,d);return(d.maxValue-h-g)/(1-g/d.maxValue)>>0},black(s,o,h,d){return Math.min(d.maxValue-s,d.maxValue-o,d.maxValue-h)},hue(s,o,h,d){let g=methods$1.min(s,o,h),_=methods$1.max(s,o,h);if(_===g)return 0;let b=0,$=_-g;switch(_){case s:b=(o-h)/$+(o<h?6:0);break;case o:b=(h-s)/$+2;break;case h:b=(s-o)/$+4;break;default:throw new Error("unreachable")}return b/6*d.maxValue>>0},saturation(s,o,h,d){let g=methods$1.min(s,o,h),_=methods$1.max(s,o,h),b=_-g;return _===0?0:b/_*d.maxValue},lightness(s,o,h){let d=methods$1.min(s,o,h);return(methods$1.max(s,o,h)+d)/2}};Object.defineProperty(methods$1,"luminosity",{enumerable:!1,value:methods$1.lightness});Object.defineProperty(methods$1,"luminance",{enumerable:!1,value:methods$1.lightness});Object.defineProperty(methods$1,"min",{enumerable:!1,value:methods$1.minimum});Object.defineProperty(methods$1,"max",{enumerable:!1,value:methods$1.maximum});Object.defineProperty(methods$1,"brightness",{enumerable:!1,value:methods$1.maximum});Object.keys(methods$1).forEach(s=>{});function grey(s={}){let{algorithm:o="luma709",keepAlpha:h=!1,mergeAlpha:d=!0}=s;if(typeof o!="string"&&typeof o!="function")throw new TypeError("algorithm must be a string or a function");this.checkProcessable("grey",{bitDepth:[8,16],alpha:[0,1]}),this.components===1&&(o="red"),h&=this.alpha,d&=this.alpha,h&&(d=!1);let g=getOutputImage(this,s,{components:1,alpha:h,colorModel:GREY$1}),_;if(typeof o=="function")_=o;else if(_=methods$1[o.toLowerCase()],!_)throw new Error(`unsupported grey algorithm: ${o}`);let b=0;for(let $=0;$<this.data.length;$+=this.channels)d?g.data[b++]=clamp(_(this.data[$],this.data[$+1],this.data[$+2],this)*this.data[$+this.components]/this.maxValue,this):(g.data[b++]=clamp(_(this.data[$],this.data[$+1],this.data[$+2],this),this),g.alpha&&(g.data[b++]=this.data[$+this.components]));return g}function huang(s){let o=0;for(let rt=0;rt<s.length;rt++)if(s[rt]!==0){o=rt;break}let h=s.length-1;for(let rt=s.length-1;rt>=o;rt--)if(s[rt]!==0){h=rt;break}let d=1/(h-o),g=new Array(s.length),_=0,b=0;for(let rt=o;rt<s.length;rt++)_+=rt*s[rt],b+=s[rt],g[rt]=_/b;let $=new Array(s.length);_=b=0;for(let rt=h;rt>0;rt--)_+=rt*s[rt],b+=s[rt],$[rt-1]=_/b;let et=-1,tt=Number.MAX_VALUE;for(let rt=0;rt<s.length;rt++){let nt=0,At;for(let at=0;at<=rt;at++)At=1/(1+d*Math.abs(at-g[rt])),At<1e-6||At>.999999||(nt+=s[at]*(-At*Math.log(At)-(1-At)*Math.log(1-At)));for(let at=rt+1;at<s.length;at++)At=1/(1+d*Math.abs(at-$[rt])),At<1e-6||At>.999999||(nt+=s[at]*(-At*Math.log(At)-(1-At)*Math.log(1-At)));nt<tt&&(tt=nt,et=rt)}return et}function intermodes(s){let o=s.slice(),h=0;for(;!bimodalTest$1(o);){let g=0,_=0,b=o[0];for(let $=0;$<s.length-1;$++)g=_,_=b,b=o[$+1],o[$]=(g+_+b)/3;if(o[s.length-1]=(_+b)/3,h++,h>1e4)throw new Error("Intermodes Threshold not found after 10000 iterations")}let d=0;for(let g=1;g<s.length-1;g++)o[g-1]<o[g]&&o[g+1]<o[g]&&(d+=g);return Math.floor(d/2)}function bimodalTest$1(s){let o=!1,h=0;for(let d=1;d<s.length-1;d++)if(s[d-1]<s[d]&&s[d+1]<s[d]&&(h++,h>2))return!1;return h===2&&(o=!0),o}function isodata(s){let o,h,d,g,_=0;for(let b=1;b<s.length;b++)if(s[b]>0){_=b+1;break}for(;;){o=0,d=0;for(let b=0;b<_;b++)d=d+s[b],o=o+s[b]*b;g=0,h=0;for(let b=_+1;b<s.length;b++)h+=s[b],g+=s[b]*b;if(d>0&&h>0&&(o/=d,g/=h,_===Math.round((o+g)/2)))break;if(_++,_>s.length-2)throw new Error("Threshold not found")}return _}function li(s,o){let h,d,g,_,b,$,et,tt,rt,nt,At,at;At=.5,nt=0;for(let lt=0;lt<s.length;lt++)nt+=lt*s[lt];nt/=o,et=nt;do{$=et,h=$+.5|0,d=0,_=0;for(let lt=0;lt<=h;lt++)d+=lt*s[lt],_+=s[lt];tt=_===0?0:d/_,g=0,b=0;for(let lt=h+1;lt<s.length;lt++)g+=lt*s[lt],b+=s[lt];rt=b===0?0:g/b,at=(tt-rt)/(Math.log(tt)-Math.log(rt)),at<-Number.EPSILON?et=at-.5|0:et=at+.5|0}while(Math.abs(et-$)>At);return h}function maxEntropy(s,o){let h=new Array(s.length);for(let At=0;At<s.length;At++)h[At]=s[At]/o;let d=new Array(s.length),g=new Array(s.length);d[0]=h[0],g[0]=1-d[0];for(let At=1;At<s.length;At++)d[At]=d[At-1]+h[At],g[At]=1-d[At];let _=0;for(let At=0;At<s.length;At++)if(Math.abs(d[At])>=Number.EPSILON){_=At;break}let b=s.length-1;for(let At=s.length-1;At>=_;At--)if(Math.abs(g[At])>=Number.EPSILON){b=At;break}let $=-1,et,tt=Number.MIN_VALUE,rt,nt;for(let At=_;At<=b;At++){rt=0;for(let at=0;at<=At;at++)s[at]!==0&&(rt-=h[at]/d[At]*Math.log(h[at]/d[At]));nt=0;for(let at=At+1;at<s.length;at++)s[at]!==0&&(nt-=h[at]/g[At]*Math.log(h[at]/g[At]));et=rt+nt,tt<et&&(tt=et,$=At)}return $}function mean$1(s,o){let h=0;for(let d=0;d<s.length;d++)h+=d*s[d];return Math.floor(h/o)}function minError(s,o){let h,d=-2,g,_,b,$,et,tt,rt,nt,At,at,lt,gt=0;for(let _t=0;_t<s.length;_t++)gt+=_t*s[_t];for(gt/=o,h=gt;h!==d;){let _t=sumA(s,h),ct=sumA(s,s.length-1),pt=sumB(s,h),dt=sumB(s,s.length-1),mt=sumC(s,h),Qt=sumC(s,s.length-1);if(g=pt/_t,_=(dt-pt)/(ct-_t),b=_t/ct,$=(ct-_t)/ct,et=mt/_t-g*g,tt=(Qt-mt)/(ct-_t)-_*_,rt=1/et-1/tt,nt=g/et-_/tt,At=g*g/et-_*_/tt+Math.log10(et*($*$)/(tt*(b*b))),at=nt*nt-rt*At,at<0)return h;d=h,lt=(nt+Math.sqrt(at))/rt,isNaN(lt)?h=d:h=Math.floor(lt)}return h}function sumA(s,o){let h=0;for(let d=0;d<=o;d++)h+=s[d];return h}function sumB(s,o){let h=0;for(let d=0;d<=o;d++)h+=d*s[d];return h}function sumC(s,o){let h=0;for(let d=0;d<=o;d++)h+=d*d*s[d];return h}function minimum(s){if(s.length<2)return 0;let o=0,h=-1,d=-1,g=new Array(s.length);for(let _=0;_<s.length;_++)g[_]=s[_],s[_]>0&&(d=_);for(;!bimodalTest(g);)if(g=smoothed(g),o++,o>1e4)return h;return h=minimumBetweenPeeks(g,d),h}function smoothed(s){let o=new Array(s.length);for(let h=1;h<s.length-1;h++)o[h]=(s[h-1]+s[h]+s[h+1])/3;return o[0]=(s[0]+s[1])/3,o[s.length-1]=(s[s.length-2]+s[s.length-1])/3,o}function minimumBetweenPeeks(s,o){let h;for(let d=1;d<o;d++)if(s[d-1]>s[d]&&s[d+1]>=s[d]){h=d;break}return h}function bimodalTest(s){let o=s.length,h=!1,d=0;for(let g=1;g<o-1;g++)if(s[g-1]<s[g]&&s[g+1]<s[g]&&(d++,d>2))return!1;return d===2&&(h=!0),h}function moments(s,o){let h=1,d=0,g=0,_=0,b=0,$,et,tt,rt,nt,At,at=-1,lt=s.length,gt=new Array(lt);for(let _t=0;_t<lt;_t++)gt[_t]=s[_t]/o;for(let _t=0;_t<lt;_t++)d+=_t*gt[_t],g+=_t*_t*gt[_t],_+=_t*_t*_t*gt[_t];et=h*g-d*d,tt=(-g*g+d*_)/et,rt=(h*-_+g*d)/et,nt=.5*(-rt-Math.sqrt(rt*rt-4*tt)),At=.5*(-rt+Math.sqrt(rt*rt-4*tt)),$=(At-d)/(At-nt);for(let _t=0;_t<lt;_t++)if(b+=gt[_t],b>$){at=_t;break}return at}function otsu(s,o){let h=0,d=0,g=0,_=0,b=0;for(let $=0;$<s.length;$++)b+=$*s[$];for(let $=0;$<s.length;$++){d=d+s[$];const et=o-d;if(d===0||et===0)continue;h=h+$*s[$];const tt=(b-h)/et,rt=d*et*(h/d-tt)*(h/d-tt);rt>=g&&(_=$,g=rt)}return _}function percentile(s){let o=-1,h=.5,d=new Array(s.length),g=partialSum(s,s.length-1),_=1;for(let b=0;b<s.length;b++)d[b]=Math.abs(partialSum(s,b)/g-h),d[b]<_&&(_=d[b],o=b);return o}function partialSum(s,o){let h=0;for(let d=0;d<=o;d++)h+=s[d];return h}function renyiEntropy(s,o){let h,d,g,_=new Array(s.length),b=new Array(s.length),$=new Array(s.length),et=0,tt=0,rt=0,nt=0,At=0,at=0,lt=1/(1-.5),gt=1/-1;for(let dt=0;dt<s.length;dt++)_[dt]=s[dt]/o;b[0]=_[0],$[0]=1-b[0];for(let dt=1;dt<s.length;dt++)b[dt]=b[dt-1]+_[dt],$[dt]=1-b[dt];d=0;for(let dt=0;dt<s.length;dt++)if(Math.abs(b[dt])>=Number.EPSILON){d=dt;break}g=s.length-1;for(let dt=s.length-1;dt>=d;dt--)if(Math.abs($[dt])>=Number.EPSILON){g=dt;break}for(let dt=d;dt<=g;dt++){let mt=0,Qt=0,xt=0;for(let Vt=0;Vt<=dt;Vt++)s[Vt]!==0&&(mt-=_[Vt]/b[dt]*Math.log(_[Vt]/b[dt])),Qt+=Math.sqrt(_[Vt]/b[dt]),xt+=_[Vt]*_[Vt]/(b[dt]*b[dt]);let bt=0,kt=0,Lt=0;for(let Vt=dt+1;Vt<s.length;Vt++)s[Vt]!==0&&(bt-=_[Vt]/$[dt]*Math.log(_[Vt]/$[dt])),kt+=Math.sqrt(_[Vt]/$[dt]),Lt+=_[Vt]*_[Vt]/($[dt]*$[dt]);let Ht=mt+bt,Pt=lt*(Qt*kt>0?Math.log(Qt*kt):0),jt=gt*(xt*Lt>0?Math.log(xt*Lt):0);Ht>nt&&(nt=Ht,et=dt),Pt>At&&(At=Pt,tt=dt),jt>at&&(at=jt,rt=dt)}let _t=[et,tt,rt];_t.sort((dt,mt)=>dt-mt);let ct;Math.abs(_t[0]-_t[1])<=5?Math.abs(_t[1]-_t[2])<=5?ct=[1,2,1]:ct=[0,1,3]:Math.abs(_t[1]-_t[2])<=5?ct=[3,1,0]:ct=[1,2,1];let pt=b[_t[2]]-b[_t[0]];return h=Math.round(_t[0]*(b[_t[0]]+.25*pt*ct[0])+.25*_t[1]*pt*ct[1]+_t[2]*($[_t[2]]+.25*pt*ct[2])),h}function shanbhag(s,o){let h=new Array(s.length);for(let at=0;at<s.length;at++)h[at]=s[at]/o;let d=new Array(s.length),g=new Array(s.length);d[0]=h[0],g[0]=1-d[0];for(let at=1;at<s.length;at++)d[at]=d[at-1]+h[at],g[at]=1-d[at];let _=0;for(let at=0;at<s.length;at++)if(Math.abs(d[at])>=Number.EPSILON){_=at;break}let b=s.length-1;for(let at=s.length-1;at>=_;at--)if(Math.abs(g[at])>=Number.EPSILON){b=at;break}let $=-1,et=Number.MAX_VALUE,tt,rt,nt,At;for(let at=_;at<=b;at++){nt=0,tt=.5/d[at];for(let lt=1;lt<=at;lt++)nt-=h[lt]*Math.log(1-tt*d[lt-1]);nt*=tt,At=0,tt=.5/g[at];for(let lt=at+1;lt<s.length;lt++)At-=h[lt]*Math.log(1-tt*g[lt]);At*=tt,rt=Math.abs(nt-At),rt<et&&(et=rt,$=at)}return $}function triangle$1(s){let o=0,h=0,d=0,g=0;for(let nt=0;nt<s.length;nt++)if(s[nt]>0){o=nt;break}o>0&&o--;for(let nt=s.length-1;nt>0;nt--)if(s[nt]>0){g=nt;break}g<s.length-1&&g++;for(let nt=0;nt<s.length;nt++)s[nt]>h&&(d=nt,h=s[nt]);let _=!1;if(d-o<g-d){_=!0;let nt=0,At=s.length-1;for(;nt<At;){let at=s[nt];s[nt]=s[At],s[At]=at,nt++,At--}o=s.length-1-g,d=s.length-1-d}if(o===d)return o;let b,$,et;b=s[d],$=o-d,et=Math.sqrt(b*b+$*$),b/=et,$/=et,et=b*o+$*s[o];let tt=o,rt=0;for(let nt=o+1;nt<=d;nt++){let At=b*nt+$*s[nt]-et;At>rt&&(tt=nt,rt=At)}if(tt--,_){let nt=0,At=s.length-1;for(;nt<At;){let at=s[nt];s[nt]=s[At],s[At]=at,nt++,At--}return s.length-1-tt}else return tt}function yen(s,o){let h=new Array(s.length);for(let tt=0;tt<s.length;tt++)h[tt]=s[tt]/o;let d=new Array(s.length);d[0]=h[0];for(let tt=1;tt<s.length;tt++)d[tt]=d[tt-1]+h[tt];let g=new Array(s.length);g[0]=h[0]*h[0];for(let tt=1;tt<s.length;tt++)g[tt]=g[tt-1]+h[tt]*h[tt];let _=new Array(s.length);_[s.length-1]=0;for(let tt=s.length-2;tt>=0;tt--)_[tt]=_[tt+1]+h[tt+1]*h[tt+1];let b=-1,$=Number.MIN_VALUE,et;for(let tt=0;tt<s.length;tt++)et=-1*(g[tt]*_[tt]>0?Math.log(g[tt]*_[tt]):0)+2*(d[tt]*(1-d[tt])>0?Math.log(d[tt]*(1-d[tt])):0),et>$&&($=et,b=tt);return b}const methods={huang,intermodes,isodata,li,maxentropy:maxEntropy,mean:mean$1,minerror:minError,minimum,moments,otsu,percentile,renyientropy:renyiEntropy,shanbhag,triangle:triangle$1,yen},names={};Object.keys(methods).forEach(s=>{names[s]=s});function getThreshold(s={}){let{algorithm:o=names.otsu}=s;this.checkProcessable("getThreshold",{components:1,bitDepth:[8,16]});let h=methods[o.toLowerCase()];if(h){let d=this.getHistogram();return h(d,this.size)}else throw new Error(`unknown thresholding algorithm: ${o}`)}const THRESHOLD="threshold";function mask(s={}){let{algorithm:o=THRESHOLD,threshold:h=.5,useAlpha:d=!0,invert:g=!1}=s;this.checkProcessable("mask",{components:1,bitDepth:[8,16]}),o===THRESHOLD?h=getThreshold$1(h,this.maxValue):h=getThreshold.call(this,s);let _=new Image$1(this.width,this.height,{kind:"BINARY",parent:this}),b=0;if(this.alpha&&d)for(let $=0;$<this.data.length;$+=this.channels){let et=this.data[$]+(this.maxValue-this.data[$])*(this.maxValue-this.data[$+1])/this.maxValue;(g&&et<=h||!g&&et>=h)&&_.setBit(b),b++}else for(let $=0;$<this.data.length;$+=this.channels)(g&&this.data[$]<=h||!g&&this.data[$]>=h)&&_.setBit(b),b++;return _}function copyImage(s,o,h,d){let g=s.width,_=s.height,b=o.width,$=s.channels;for(let et=0;et<g;et++)for(let tt=0;tt<_;tt++)for(let rt=0;rt<$;rt++){let nt=(tt*g+et)*$+rt,At=((d+tt)*b+h+et)*$+rt;o.data[At]=s.data[nt]}}function pad(s={}){let{size:o=0,algorithm:h="copy",color:d}=s;if(this.checkProcessable("pad",{bitDepth:[8,16]}),h==="set"){if(d.length!==this.channels)throw new Error(`pad: the color array must have the same length as the number of channels. Here: ${this.channels}`);for(let et=0;et<d.length;et++)d[et]===0&&(d[et]=.001)}else d=newArray(this.channels,null);Array.isArray(o)||(o=[o,o]);let g=this.width+o[0]*2,_=this.height+o[1]*2,b=this.channels,$=Image$1.createFrom(this,{width:g,height:_});copyImage(this,$,o[0],o[1]);for(let et=o[0];et<g-o[0];et++)for(let tt=0;tt<b;tt++){let rt=d[tt]||$.data[(o[1]*g+et)*b+tt];for(let nt=0;nt<o[1];nt++)$.data[(nt*g+et)*b+tt]=rt;rt=d[tt]||$.data[((_-o[1]-1)*g+et)*b+tt];for(let nt=_-o[1];nt<_;nt++)$.data[(nt*g+et)*b+tt]=rt}for(let et=0;et<_;et++)for(let tt=0;tt<b;tt++){let rt=d[tt]||$.data[(et*g+o[0])*b+tt];for(let nt=0;nt<o[0];nt++)$.data[(et*g+nt)*b+tt]=rt;rt=d[tt]||$.data[(et*g+g-o[0]-1)*b+tt];for(let nt=g-o[0];nt<g;nt++)$.data[(et*g+nt)*b+tt]=rt}return $}function colorDepth(s=8){if(this.checkProcessable("colorDepth",{bitDepth:[1,8,16]}),![8,16].includes(s))throw Error("You need to specify the new colorDepth as 8 or 16");if(this.bitDepth===s)return this.clone();let o=Image$1.createFrom(this,{bitDepth:s});switch(s){case 8:if(this.bitDepth===1)for(let h=0;h<this.size;h++)this.getBit(h)&&(o.data[h]=255);else for(let h=0;h<this.data.length;h++)o.data[h]=this.data[h]>>8;break;case 16:if(this.bitDepth===1)for(let h=0;h<this.size;h++)this.getBit(h)&&(o.data[h]=65535);else for(let h=0;h<this.data.length;h++)o.data[h]=this.data[h]<<8|this.data[h];break;default:throw new Error("colorDepth conversion unexpected case")}return o}function rotateFree(s,o={}){const{interpolation:h=validInterpolations.nearestneighbor,width:d=this.width,height:g=this.height}=o;if(typeof s!="number")throw new TypeError("degrees must be a number");const _=checkInterpolation(h),b=s*Math.PI/180,$=Math.floor(Math.abs(d*Math.cos(b))+Math.abs(g*Math.sin(b))),et=Math.floor(Math.abs(g*Math.cos(b))+Math.abs(d*Math.sin(b))),tt=Math.cos(-b),rt=Math.sin(-b);let nt=$/2,At=et/2;$%2===0?(nt=nt-.5,et%2===0?At=At-.5:At=Math.floor(At)):(nt=Math.floor(nt),et%2===0?At=At-.5:At=Math.floor(At));const at=Math.floor(d/2-nt),lt=Math.floor(g/2-At);if(this.bitDepth===1){const gt=new Image$1($,et,{kind:"BINARY",parent:this});switch(_){case validInterpolations.nearestneighbor:return rotateBinaryNearestNeighbor(this,gt,at,lt,nt,At,tt,rt);case validInterpolations.bilinear:return rotateBinaryBilinear(this,gt,at,lt,nt,At,tt,rt);default:throw new Error(`unsupported rotate interpolation: ${_}`)}}else{const gt=Image$1.createFrom(this,{width:$,height:et});switch(_){case validInterpolations.nearestneighbor:return rotateNearestNeighbor(this,gt,at,lt,nt,At,tt,rt);case validInterpolations.bilinear:return rotateBilinear(this,gt,at,lt,nt,At,tt,rt);default:throw new Error(`unsupported rotate interpolation: ${_}`)}}}function rotateNearestNeighbor(s,o,h,d,g,_,b,$){for(let et=0;et<o.width;et+=1)for(let tt=0;tt<o.height;tt+=1)for(let rt=0;rt<s.channels;rt++){let nt=Math.round((et-g)*b-(tt-_)*$+g)+h,At=Math.round((tt-_)*b+(et-g)*$+_)+d;nt<0||nt>=s.width||At<0||At>=s.height?s.alpha===1&&rt===s.channels-1?o.setValueXY(et,tt,rt,0):o.setValueXY(et,tt,rt,s.maxValue):o.setValueXY(et,tt,rt,s.getValueXY(nt,At,rt))}return o}function rotateBinaryNearestNeighbor(s,o,h,d,g,_,b,$){for(let et=0;et<o.width;et+=1)for(let tt=0;tt<o.height;tt+=1){let rt=Math.round((et-g)*b-(tt-_)*$+g)+h,nt=Math.round((tt-_)*b+(et-g)*$+_)+d;(rt<0||rt>=s.width||nt<0||nt>=s.height||s.getBitXY(rt,nt))&&o.setBitXY(et,tt)}return o}function rotateBilinear(s,o,h,d,g,_,b,$){let et=s.width*s.channels;for(let tt=0;tt<o.height;tt++)for(let rt=0;rt<o.width;rt++){let nt=(rt-g)*b-(tt-_)*$+g+h,At=(tt-_)*b+(rt-g)*$+_+d,at=nt|0,lt=At|0,gt=nt-at,_t=At-lt;for(let ct=0;ct<s.channels;ct++)if(nt<0||nt>=s.width||At<0||At>=s.height)s.alpha===1&&ct===s.channels-1?o.setValueXY(rt,tt,ct,0):o.setValueXY(rt,tt,ct,s.maxValue);else{let pt=(lt*s.width+at)*s.channels+ct,dt=s.data[pt],mt=s.data[pt+s.channels],Qt=s.data[pt+et],xt=s.data[pt+et+s.channels],bt=dt+gt*(mt-dt)+_t*(Qt-dt)+gt*_t*(dt-mt-Qt+xt)|0;o.setValueXY(rt,tt,ct,bt)}}return o}function rotateBinaryBilinear(s,o,h,d,g,_,b,$){let et=s.width;for(let tt=0;tt<o.height;tt++)for(let rt=0;rt<o.width;rt++){let nt=(rt-g)*b-(tt-_)*$+g+h,At=(tt-_)*b+(rt-g)*$+_+d,at=nt|0,lt=At|0,gt=nt-at,_t=At-lt;if(nt<0||nt>=s.width||At<0||At>=s.height)o.setBitXY(rt,tt);else{let ct=lt*s.width+at,pt=s.getBit(ct),dt=s.getBit(ct+1),mt=s.getBit(ct+et),Qt=s.getBit(ct+1+et);(pt|gt&dt-pt|_t&mt-pt|gt&_t&pt-dt-mt+Qt)>0&&o.setBitXY(rt,tt)}}return o}function rotate$1(s,o){if(this.checkProcessable("rotate",{bitDepth:[1,8,16]}),typeof s!="number")throw new TypeError("angle must be a number");switch(s<0&&(s=Math.ceil(-s/360)*360+s),s%360){case 0:return this.clone();case 90:return rotateRight.call(this);case 180:return rotate180.call(this);case 270:return rotateLeft.call(this);default:return rotateFree.call(this,s,o)}}function rotateLeft(){if(this.bitDepth===1){const s=new Image$1(this.height,this.width,{kind:"BINARY",parent:this}),o=s.height-1;for(let h=0;h<this.height;h++)for(let d=0;d<this.width;d++)this.getBitXY(d,h)&&s.setBitXY(h,o-d);return s}else{const s=Image$1.createFrom(this,{width:this.height,height:this.width}),o=s.height-1;for(let h=0;h<this.height;h++)for(let d=0;d<this.width;d++)for(let g=0;g<this.channels;g++)s.setValueXY(h,o-d,g,this.getValueXY(d,h,g));return s}}function rotateRight(){if(this.bitDepth===1){const s=new Image$1(this.height,this.width,{kind:"BINARY",parent:this}),o=s.width-1;for(let h=0;h<this.height;h++)for(let d=0;d<this.width;d++)this.getBitXY(d,h)&&s.setBitXY(o-h,d);return s}else{const s=Image$1.createFrom(this,{width:this.height,height:this.width}),o=s.width-1;for(let h=0;h<this.height;h++)for(let d=0;d<this.width;d++)for(let g=0;g<this.channels;g++)s.setValueXY(o-h,d,g,this.getValueXY(d,h,g));return s}}function rotate180(){if(this.bitDepth===1){const s=new Image$1(this.width,this.height,{kind:"BINARY",parent:this}),o=s.width-1,h=s.height-1;for(let d=0;d<this.height;d++)for(let g=0;g<this.width;g++)this.getBitXY(g,d)&&s.setBitXY(o-g,h-d);return s}else{const s=Image$1.createFrom(this),o=s.width-1,h=s.height-1;for(let d=0;d<this.height;d++)for(let g=0;g<this.width;g++)for(let _=0;_<this.channels;_++)s.setValueXY(o-g,h-d,_,this.getValueXY(g,d,_));return s}}function insert(s,o={}){const h=getImageParameters(s);this.checkProcessable("insert",h);let{x:d=0,y:g=0}=o;const _=getOutputImageOrInPlace(this,o,{copy:!0}),b=Math.min(_.height,g+s.height),$=Math.min(_.width,d+s.width);if(_.bitDepth===1)for(let et=g;et<b;et++)for(let tt=d;tt<$;tt++)s.getBitXY(tt-d,et-g)?_.setBitXY(tt,et):_.clearBitXY(tt,et);else for(let et=g;et<b;et++)for(let tt=d;tt<$;tt++)_.setPixelXY(tt,et,s.getPixelXY(tt-d,et-g));return _}function setBorder(s={}){let{size:o=0,algorithm:h="copy",color:d}=s;if(this.checkProcessable("setBorder",{bitDepth:[8,16,32,64]}),h==="set"){if(d.length!==this.channels)throw new Error(`setBorder: the color array must have the same length as the number of channels. Here: ${this.channels}`);for(let $=0;$<d.length;$++)d[$]===0&&(d[$]=.001)}else d=newArray(this.channels,null);Array.isArray(o)||(o=[o,o]);let g=o[0],_=o[1],b=this.channels;for(let $=g;$<this.width-g;$++)for(let et=0;et<b;et++){let tt=d[et]||this.data[($+this.width*_)*b+et];for(let rt=0;rt<_;rt++)this.data[(rt*this.width+$)*b+et]=tt;tt=d[et]||this.data[($+this.width*(this.height-_-1))*b+et];for(let rt=this.height-_;rt<this.height;rt++)this.data[(rt*this.width+$)*b+et]=tt}for(let $=0;$<this.height;$++)for(let et=0;et<b;et++){let tt=d[et]||this.data[($*this.width+g)*b+et];for(let rt=0;rt<g;rt++)this.data[($*this.width+rt)*b+et]=tt;tt=d[et]||this.data[($*this.width+this.width-g-1)*b+et];for(let rt=this.width-g;rt<this.width;rt++)this.data[($*this.width+rt)*b+et]=tt}return this}function split(s={}){let{preserveAlpha:o=!0}=s;if(this.checkProcessable("split",{bitDepth:[8,16]}),this.components===1)return new Stack([this.clone()]);let h=new Stack,d=this.data;if(this.alpha&&o)for(let g=0;g<this.components;g++){let _=Image$1.createFrom(this,{components:1,alpha:!0,colorModel:GREY$1}),b=0;for(let $=0;$<d.length;$+=this.channels)_.data[b++]=d[$+g],_.data[b++]=d[$+this.components];h.push(_)}else for(let g=0;g<this.channels;g++){let _=Image$1.createFrom(this,{components:1,alpha:!1,colorModel:GREY$1}),b=0;for(let $=0;$<d.length;$+=this.channels)_.data[b++]=d[$+g];h.push(_)}return h}function getChannel(s,o={}){let{keepAlpha:h=!1,mergeAlpha:d=!1}=o;h&=this.alpha,d&=this.alpha,this.checkProcessable("getChannel",{bitDepth:[8,16]}),s=validateChannel(this,s);let g=Image$1.createFrom(this,{components:1,alpha:h,colorModel:GREY$1}),_=0;for(let b=0;b<this.data.length;b+=this.channels)d?g.data[_++]=this.data[b+s]*this.data[b+this.components]/this.maxValue:(g.data[_++]=this.data[b+s],h&&(g.data[_++]=this.data[b+this.components]));return g}function combineChannels(s=defaultCombineMethod,o={}){let{mergeAlpha:h=!1,keepAlpha:d=!1}=o;h&=this.alpha,d&=this.alpha,this.checkProcessable("combineChannels",{bitDepth:[8,16]});let g=Image$1.createFrom(this,{components:1,alpha:d,colorModel:GREY$1}),_=0;for(let b=0;b<this.size;b++){let $=s(this.getPixel(b));h?g.data[_++]=$*this.data[b*this.channels+this.components]/this.maxValue:(g.data[_++]=$,d&&(g.data[_++]=this.data[b*this.channels+this.components]))}return g}function defaultCombineMethod(s){return(s[0]+s[1]+s[2])/3}function setChannel(s,o){if(this.checkProcessable("setChannel",{bitDepth:[8,16]}),o.checkProcessable("setChannel (image parameter check)",{bitDepth:[this.bitDepth],alpha:[0],components:[1]}),o.width!==this.width||o.height!==this.height)throw new Error("Images must have exactly the same width and height");s=validateChannel(this,s);let h=s;for(let d=0;d<o.data.length;d++)this.data[h]=o.data[d],h+=this.channels;return this}function getSimilarity(s,o={}){let{shift:h=[0,0],average:d,channels:g,defaultAlpha:_,normalize:b,border:$=[0,0]}=o;if(this.checkProcessable("getSimilarity",{bitDepth:[8,16]}),Array.isArray($)||($=[$,$]),g=validateArrayOfChannels(this,{channels:g,defaultAlpha:_}),this.bitDepth!==s.bitDepth)throw new Error("Both images must have the same bitDepth");if(this.channels!==s.channels)throw new Error("Both images must have the same number of channels");if(this.colorModel!==s.colorModel)throw new Error("Both images must have the same colorModel");typeof d>"u"&&(d=!0);let et=Math.max($[0],-h[0]),tt=Math.min(this.width-$[0],this.width-h[0]),rt=Math.max($[1],-h[1]),nt=Math.min(this.height-$[1],this.height-h[1]),At=newArray(g.length,0);for(let at=0;at<g.length;at++){let lt=g[at],gt=b?this.sum[lt]:Math.max(this.sum[lt],s.sum[lt]),_t=b?s.sum[lt]:Math.max(this.sum[lt],s.sum[lt]);if(gt!==0&&_t!==0)for(let ct=et;ct<tt;ct++)for(let pt=rt;pt<nt;pt++){let dt=ct*this.multiplierX+pt*this.multiplierY+lt,mt=dt+h[0]*this.multiplierX+h[1]*this.multiplierY;At[at]+=Math.min(this.data[dt]/gt,s.data[mt]/_t)}}return d?At.reduce((at,lt)=>at+lt)/At.length:At}function getPixelsGrid(s={}){let{sampling:o=[10,10],painted:h=!1,mask:d}=s;this.checkProcessable("getPixelsGrid",{bitDepth:[8,16],channels:1}),Array.isArray(o)||(o=[o,o]);const g=o[0],_=o[1],b=[],$=[],et=this.width/g,tt=this.height/_;let rt=Math.floor(et/2);for(let At=0;At<g;At++){let at=Math.floor(tt/2);for(let lt=0;lt<_;lt++){let gt=Math.round(rt),_t=Math.round(at);(!d||d.getBitXY(gt,_t))&&(b.push([gt,_t]),$.push(this.getPixelXY(gt,_t))),at+=tt}rt+=et}const nt={xyS:b,zS:$};return h&&(nt.painted=this.rgba8().paintPoints(b)),nt}function Matrix(s,o,h){const d=new Array(s);for(let g=0;g<s;g++)d[g]=new Array(o);if(h)for(let g=0;g<s;g++)for(let _=0;_<o;_++)d[g][_]=h;return d.width=s,d.height=o,Object.setPrototypeOf(d,Matrix.prototype),d}Matrix.prototype.localMin=function(s,o){let h=this[s][o],d=[s,o];for(let g=Math.max(0,s-1);g<Math.min(this.length,s+2);g++)for(let _=Math.max(0,o-1);_<Math.min(this[0].length,o+2);_++)this[g][_]<h&&(h=this[g][_],d=[g,_]);return{position:d,value:h}};Matrix.prototype.localMax=function(s,o){let h=this[s][o],d=[s,o];for(let g=Math.max(0,s-1);g<Math.min(this.length,s+2);g++)for(let _=Math.max(0,o-1);_<Math.min(this[0].length,o+2);_++)this[g][_]>h&&(h=this[g][_],d=[g,_]);return{position:d,value:h}};Matrix.prototype.localSearch=function(s,o,h){let d=[];for(let g=Math.max(0,s-1);g<Math.min(this.length,s+2);g++)for(let _=Math.max(0,o-1);_<Math.min(this[0].length,o+2);_++)this[g][_]===h&&d.push([g,_]);return d};function getBestMatch(s,o={}){let{border:h}=o;if(this.checkProcessable("getChannel",{bitDepth:[8,16]}),this.bitDepth!==s.bitDepth)throw new Error("Both images must have the same bitDepth");if(this.channels!==s.channels)throw new Error("Both images must have the same number of channels");if(this.colorModel!==s.colorModel)throw new Error("Both images must have the same colorModel");let d=new Matrix(s.width,s.height,-1/0),g=Math.floor(s.width/2),_=Math.floor(s.height/2),b=g,$=_,et=!1;for(;!et;){let tt=d.localSearch(g,_,-1/0);for(let nt=0;nt<tt.length;nt++){let At=tt[nt],at=this.getSimilarity(s,{border:h,shift:[b-At[0],$-At[1]]});d[At[0]][At[1]]=at}let rt=d.localMax(g,_);rt.position[0]!==g||rt.position[1]!==_?(g=rt.position[0],_=rt.position[1]):et=!0}return[g-b,_-$]}function getRow(s,o=0){this.checkProcessable("getRow",{bitDepth:[8,16]}),checkRow(this,s),checkChannel(this,o);let h=new Array(this.width),d=0,g=s*this.width*this.channels+o,_=g+this.width*this.channels;for(let b=g;b<_;b+=this.channels)h[d++]=this.data[b];return h}function getColumn(s,o=0){this.checkProcessable("getColumn",{bitDepth:[8,16]}),checkColumn(this,s),checkChannel(this,o);let h=new Array(this.height),d=0,g=this.width*this.channels;for(let _=o+s*this.channels;_<this.data.length;_+=g)h[d++]=this.data[_];return h}function getMatrix(s={}){let{channel:o}=s;if(this.checkProcessable("getMatrix",{bitDepth:[8,16]}),o===void 0){if(this.components>1)throw new RangeError("You need to define the channel for an image that contains more than one channel");o=0}let h=new Matrix$1(this.height,this.width);for(let d=0;d<this.height;d++)for(let g=0;g<this.width;g++)h.set(d,g,this.getValueXY(g,d,o));return h}function setMatrix(s,o={}){s=new Matrix$1(s);let{channel:h}=o;if(this.checkProcessable("getMatrix",{bitDepth:[8,16]}),h===void 0){if(this.components>1)throw new RangeError("You need to define the channel for an image that contains more than one channel");h=0}if(this.width!==s.columns||this.height!==s.rows)throw new RangeError("The size of the matrix must be equal to the size of the image");for(let d=0;d<this.height;d++)for(let g=0;g<this.width;g++)this.setValueXY(g,d,h,s.get(d,g));return this}function getPixelsArray(){this.checkProcessable("getPixelsArray",{bitDepth:[8,16,32]});let s=new Array(this.size),o=0;for(let h=0;h<this.data.length;h+=this.channels){let d=new Array(this.components);for(let g=0;g<this.components;g++)d[g]=this.data[h+g];s[o++]=d}return s}function getIntersection(s){let o=this,h=o.getClosestCommonParent(s),d=o.getRelativePosition(h,{defaultFurther:!0}),g=getRelativePositionForAllPixels(o,d),_=s.getRelativePosition(h,{defaultFurther:!0}),b=getRelativePositionForAllPixels(s,_),$=getCommonSurface(g,b),et={whitePixelsMask1:[],whitePixelsMask2:[],commonWhitePixels:[]};for(let tt=0;tt<$.length;tt++){let rt=$[tt],nt=[rt[0]-d[0],rt[1]-d[1]],At=[rt[0]-_[0],rt[1]-_[1]],at=o.getBitXY(nt[0],nt[1]),lt=s.getBitXY(At[0],At[1]);at===1&&lt===1&&et.commonWhitePixels.push(rt)}for(let tt=0;tt<g.length;tt++){let rt,nt;tt!==0&&(rt=Math.floor(tt/o.width),nt=tt%o.width),o.getBitXY(rt,nt)===1&&et.whitePixelsMask1.push(g[tt])}for(let tt=0;tt<b.length;tt++){let rt=0,nt=0;tt!==0&&(rt=Math.floor(tt/s.width),nt=tt%s.width),s.getBitXY(rt,nt)===1&&et.whitePixelsMask2.push(b[tt])}return et}function getRelativePositionForAllPixels(s,o){let h=[];for(let d=0;d<s.height;d++)for(let g=0;g<s.width;g++){let _=[d,g];h.push([_[0]+o[0],_[1]+o[1]])}return h}function getCommonSurface(s,o){let h=0,d=0,g=[];for(;h<s.length&&d<o.length;)s[h][0]===o[d][0]&&s[h][1]===o[d][1]?(g.push(s[h]),h++,d++):s[h][0]<o[d][0]||s[h][0]===o[d][0]&&s[h][1]<o[d][1]?h++:d++;return g}function getClosestCommonParent(s){let o=getDepth(this),h=getDepth(s),d;if(o>=h?d=getFurthestParent(this,o):d=getFurthestParent(s,h),o===0||h===0)return d;let g=this,_=s;for(;o!==h;)if(o>h){if(g=g.parent,g===null)return d;o=o-1}else{if(_=_.parent,_===null)return d;h=h-1}for(;g!==_&&g!==null&&_!==null;)if(g=g.parent,_=_.parent,g===null||_===null)return d;return g!==_?d:g}function getDepth(s){let o=0,h=s;for(;h.parent!=null;)h=h.parent,o++;return o}function getFurthestParent(s,o){let h=s;for(;o>0;)h=h.parent,o=o-1;return h}const defaultOptions$1={lowThreshold:10,highThreshold:30,gaussianBlur:1.1},Gx=[[-1,0,1],[-2,0,2],[-1,0,1]],Gy=[[-1,-2,-1],[0,0,0],[1,2,1]],convOptions={bitDepth:32,mode:"periodic"};function cannyEdgeDetector(s,o){s.checkProcessable("Canny edge detector",{bitDepth:8,channels:1,components:1}),o=Object.assign({},defaultOptions$1,o);const h=s.width,d=s.height,g=s.maxValue,_={sigma:o.gaussianBlur,radius:3},b=s.gaussianFilter(_),$=b.convolution(Gy,convOptions),et=b.convolution(Gx,convOptions),tt=et.hypotenuse($),rt=s.constructor,nt=new rt(h,d,{kind:"GREY",bitDepth:32}),At=new rt(h,d,{kind:"GREY",bitDepth:32}),at=new rt(h,d,{kind:"GREY"});for(var lt=1;lt<h-1;lt++)for(var gt=1;gt<d-1;gt++){var _t=(Math.round(Math.atan2(et.getValueXY(lt,gt,0),$.getValueXY(lt,gt,0))*(5/Math.PI))+5)%5;_t===0&&(tt.getValueXY(lt,gt,0)<=tt.getValueXY(lt,gt-1,0)||tt.getValueXY(lt,gt,0)<=tt.getValueXY(lt,gt+1,0))||_t===1&&(tt.getValueXY(lt,gt,0)<=tt.getValueXY(lt-1,gt+1,0)||tt.getValueXY(lt,gt,0)<=tt.getValueXY(lt+1,gt-1,0))||_t===2&&(tt.getValueXY(lt,gt,0)<=tt.getValueXY(lt-1,gt,0)||tt.getValueXY(lt,gt,0)<=tt.getValueXY(lt+1,gt,0))||_t===3&&(tt.getValueXY(lt,gt,0)<=tt.getValueXY(lt-1,gt-1,0)||tt.getValueXY(lt,gt,0)<=tt.getValueXY(lt+1,gt+1,0))||nt.setValueXY(lt,gt,0,tt.getValueXY(lt,gt,0))}for(lt=0;lt<h*d;++lt){var ct=nt.data[lt],pt=0;ct>o.highThreshold&&(pt++,at.data[lt]=g),ct>o.lowThreshold&&pt++,At.data[lt]=pt}var dt=[];for(lt=1;lt<h-1;++lt)for(gt=1;gt<d-1;++gt)if(At.getValueXY(lt,gt,0)===1){t:for(var mt=lt-1;mt<lt+2;++mt)for(var Qt=gt-1;Qt<gt+2;++Qt)if(At.getValueXY(mt,Qt,0)===2){dt.push([lt,gt]),at.setValueXY(lt,gt,0,g);break t}}for(;dt.length>0;){var xt=[];for(lt=0;lt<dt.length;++lt)for(gt=-1;gt<2;++gt)for(mt=-1;mt<2;++mt)if(!(gt===0&&mt===0)){var bt=dt[lt][0]+gt,kt=dt[lt][1]+mt;At.getValueXY(bt,kt,0)===1&&at.getValueXY(bt,kt,0)===0&&(xt.push([bt,kt]),at.setValueXY(bt,kt,0,g))}dt=xt}return at}function cannyEdge(s){return cannyEdgeDetector(this,s)}function extract(s,o={}){let{position:h}=o;if(this.checkProcessable("extract",{bitDepth:[1,8,16]}),!h&&(h=s.getRelativePosition(this),!h))throw new Error("extract : can not extract an image because the relative position can not be determined, try to specify manually the position as an array of 2 elements [x,y].");if(this.bitDepth>1){let d=Image$1.createFrom(this,{width:s.width,height:s.height,alpha:1,position:h,parent:this});for(let g=0;g<s.width;g++)for(let _=0;_<s.height;_++){for(let b=0;b<this.channels;b++){let $=this.getValueXY(g+h[0],_+h[1],b);d.setValueXY(g,_,b,$)}s.getBitXY(g,_)||d.setValueXY(g,_,this.components,0)}return d}else{let d=Image$1.createFrom(this,{width:s.width,height:s.height,position:h,parent:this});for(let g=0;g<s.height;g++)for(let _=0;_<s.width;_++)s.getBitXY(_,g)&&this.getBitXY(_+h[0],g+h[1])&&d.setBitXY(_,g);return d}}var fastList={exports:{}},hasRequiredFastList;function requireFastList(){return hasRequiredFastList||(hasRequiredFastList=1,function(s,o){(function(){function h(g,_,b){this.next=b,b&&(b.prev=this),this.prev=_,_&&(_.next=this),this.data=g}function d(){if(!(this instanceof d))return new d;this._head=null,this._tail=null,this.length=0}d.prototype={push:function(g){this._tail=new h(g,this._tail,null),this._head||(this._head=this._tail),this.length++},pop:function(){if(this.length!==0){var g=this._tail;return this._tail=g.prev,g.prev&&(g.prev=this._tail.next=null),this.length--,this.length===1?this._head=this._tail:this.length===0&&(this._head=this._tail=null),g.data}},unshift:function(g){this._head=new h(g,null,this._head),this._tail||(this._tail=this._head),this.length++},shift:function(){if(this.length!==0){var g=this._head;return this._head=g.next,g.next&&(g.next=this._head.prev=null),this.length--,this.length===1?this._tail=this._head:this.length===0&&(this._head=this._tail=null),g.data}},item:function(g){g<0&&(g=this.length+g);for(var _=this._head;g-- >0&&_;)_=_.next;return _?_.data:void 0},slice:function(g,_){if(g||(g=0),_||(_=this.length),_<0&&(_=this.length+_),g<0&&(g=this.length+g),_===g)return[];if(_<g)throw new Error("invalid offset: "+g+","+_+" (length="+this.length+")");for(var b=_-g,$=new Array(b),et=0,tt=this._head;g-- >0&&tt;)tt=tt.next;for(;et<b&&tt;)$[et++]=tt.data,tt=tt.next;return $},drop:function(){d.call(this)},forEach:function(g,_){for(var b=this._head,$=0,et=this.length;$<et&&b;)g.call(_||this,b.data,$,this),b=b.next,$++},map:function(g,_){var b=new d;return this.forEach(function($,et,tt){b.push(g.call(_||tt,$,et,tt))}),b},filter:function(g,_){var b=new d;return this.forEach(function($,et,tt){g.call(_||tt,$,et,tt)&&b.push($)}),b},reduce:function(g,_,b){var $=0,et=this._head,tt=this.length;for(_||($=1,_=et&&et.data,et=et&&et.next);$<tt&&et;)_=g.call(b||this,_,et.data,this),$++,et=et.next;return _}},s.exports=d})()}(fastList)),fastList.exports}var fastListExports=requireFastList();const LinkedList=getDefaultExportFromCjs(fastListExports);function floodFill(s={}){const{x:o=0,y:h=0,inPlace:d=!0}=s,g=d?this:Image$1.createFrom(this);if(this.checkProcessable("floodFill",{bitDepth:1}),this.getBitXY(o,h))return g;const _=new LinkedList;for(_.push(new Node$1(o,h));_.length>0;){const b=_.shift();g.setBitXY(b.x,b.y);for(let $=b.x+1;$<this.width&&!g.getBitXY($,b.y)&&!this.getBitXY($,b.y);$++)g.setBitXY($,b.y),b.y+1<this.height&&!this.getBitXY($,b.y+1)&&_.push(new Node$1($,b.y+1)),b.y-1>=0&&!this.getBitXY($,b.y-1)&&_.push(new Node$1($,b.y-1));for(let $=b.x-1;$>=0&&!g.getBitXY($,b.y)&&!this.getBitXY($,b.y);$++)g.setBitXY($,b.y),b.y+1<this.height&&!this.getBitXY($,b.y+1)&&_.push(new Node$1($,b.y+1)),b.y-1>=0&&!this.getBitXY($,b.y-1)&&_.push(new Node$1($,b.y-1))}return g}function Node$1(s,o){this.x=s,this.y=o}function _extends(){return _extends=Object.assign?Object.assign.bind():function(s){for(var o=1;o<arguments.length;o++){var h=arguments[o];for(var d in h)({}).hasOwnProperty.call(h,d)&&(s[d]=h[d])}return s},_extends.apply(null,arguments)}function hsv2rgb(s,o,h){o=o/100,h=h/100;var d=[],g=h*o,_=s/60,b=g*(1-Math.abs(_%2-1)),$=h-g;return _>=0&&_<1?d=[g,b,0]:_>=1&&_<2?d=[b,g,0]:_>=2&&_<3?d=[0,g,b]:s>=3&&_<4?d=[0,b,g]:s>=4&&_<5?d=[b,0,g]:s>=5&&_<=6?d=[g,0,b]:d=[0,0,0],{r:Math.round(255*(d[0]+$)),g:Math.round(255*(d[1]+$)),b:Math.round(255*(d[2]+$))}}function hsl2hsv(s,o,h){return o*=(h<50?h:100-h)/100,{h:s,s:2*o/(h+o)*100,v:h+o}}function hsl2rgb$1(s,o,h){var d=hsl2hsv(s,o,h);return hsv2rgb(d.h,d.s,d.v)}var colors={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]};function parse$1(s){return named(s)||hex3(s)||hex6(s)||rgb$1(s)||rgba$1(s)||hsl$2(s)||hsla(s)}function named(s){var o=colors[s.toLowerCase()];if(o)return{r:o[0],g:o[1],b:o[2],a:100}}function rgb$1(s){var o=s.match(/rgb\(([^)]+)\)/);if(o){var h=o[1].split(/ *, */).map(Number);return{r:h[0],g:h[1],b:h[2],a:100}}}function rgba$1(s){var o=s.match(/rgba\(([^)]+)\)/);if(o){var h=o[1].split(/ *, */).map(Number);return{r:h[0],g:h[1],b:h[2],a:h[3]*100}}}function hex6(s){if(s[0]==="#"&&s.length===7)return{r:parseInt(s.slice(1,3),16),g:parseInt(s.slice(3,5),16),b:parseInt(s.slice(5,7),16),a:100}}function hex3(s){if(s[0]==="#"&&s.length===4)return{r:parseInt(s[1]+s[1],16),g:parseInt(s[2]+s[2],16),b:parseInt(s[3]+s[3],16),a:100}}function hsl$2(s){var o=s.match(/hsl\(([^)]+)\)/);if(o){var h=o[1].split(/ *, */),d=parseInt(h[0],10),g=parseInt(h[1],10),_=parseInt(h[2],10),b=hsl2rgb$1(d,g,_);return _extends({},b,{a:100})}}function hsla(s){var o=s.match(/hsla\(([^)]+)\)/);if(o){var h=o[1].split(/ *, */),d=parseInt(h[0],10),g=parseInt(h[1],10),_=parseInt(h[2],10),b=parseInt(parseFloat(h[3])*100,10),$=hsl2rgb$1(d,g,_);return _extends({},$,{a:b})}}function css2array(s){let o=parse$1(s);return[o.r,o.g,o.b,Math.round(o.a*255/100)]}function hue2rgb$1(s,o,h){return h<0&&(h+=1),h>1&&(h-=1),h<1/6?s+(o-s)*6*h:h<1/2?o:h<2/3?s+(o-s)*(2/3-h)*6:s}function hsl2rgb(s,o,h){let d,g,_,b,$,et;return o/=100,h/=100,o===0?b=$=et=h*255:(h<=.5?g=h*(o+1):g=h+o-h*o,d=h*2-g,_=s/360,b=hue2rgb$1(d,g,_+1/3),$=hue2rgb$1(d,g,_),et=hue2rgb$1(d,g,_-1/3)),{r:b,g:$,b:et}}function getDistinctColors(s){let o=new Array(s),h=0;for(let d=0;d<360;d+=360/s){h++;let g=hsl2rgb(d,100,30+h%4*15);o[h-1]=[Math.round(g.r*255),Math.round(g.g*255),Math.round(g.b*255)]}return o}function getRandomColor(){return[Math.floor(Math.random()*256),Math.floor(Math.random()*256),Math.floor(Math.random()*256)]}function getColors(s){let{color:o,colors:h,randomColors:d,numberColors:g=50}=s;if(o&&!Array.isArray(o)&&(o=css2array(o)),o)return[o];if(h)return h=h.map(function(_){return Array.isArray(_)?_:css2array(_)}),h;if(d){h=new Array(g);for(let _=0;_<g;_++)h[_]=getRandomColor()}return getDistinctColors(g)}function paintLabels(s,o,h={}){let{color:d="blue",colors:g,font:_="12px Helvetica",rotate:b=0}=h;if(this.checkProcessable("paintMasks",{channels:[3,4],bitDepth:[8,16],colorModel:RGB$1}),!Array.isArray(s))throw Error("paintLabels: labels must be an array");if(!Array.isArray(o))throw Error("paintLabels: positions must be an array");if(d&&!Array.isArray(d)&&(d=css2array(d)),g?g=g.map(function(et){return Array.isArray(et)?et:css2array(et)}):g=[d],s.length!==o.length)throw Error("paintLabels: positions and labels must be arrays from the same size");Array.isArray(_)||(_=[_]),Array.isArray(b)||(b=[b]);let $=this.getCanvas().getContext("2d");for(let et=0;et<s.length;et++){$.save();let tt=g[et%g.length];$.fillStyle=`rgba(${tt[0]},${tt[1]},${tt[2]},${tt[3]/this.maxValue})`,$.font=_[et%_.length];let rt=o[et];$.translate(rt[0],rt[1]),$.rotate(b[et%b.length]/180*Math.PI),$.fillText(s[et],0,0),$.restore()}return this.data=Uint8Array.from($.getImageData(0,0,this.width,this.height).data),this}function paintMasks(s,o={}){let{alpha:h=255,labels:d=[],labelsPosition:g=[],labelColor:_="blue",labelFont:b="12px Helvetica"}=o;this.checkProcessable("paintMasks",{channels:[3,4],bitDepth:[8,16],colorModel:RGB$1});let $=getColors(Object.assign({},o,{numberColors:s.length}));Array.isArray(s)||(s=[s]);for(let et=0;et<s.length;et++){let tt=s[et],rt=$[et%$.length];for(let nt=0;nt<tt.width;nt++)for(let At=0;At<tt.height;At++)if(tt.getBitXY(nt,At))for(let at=0;at<Math.min(this.components,rt.length);at++)if(h===255)this.setValueXY(nt+tt.position[0],At+tt.position[1],at,rt[at]);else{let lt=this.getValueXY(nt+tt.position[0],At+tt.position[1],at);lt=Math.round((lt*(255-h)+rt[at]*h)/255),this.setValueXY(nt+tt.position[0],At+tt.position[1],at,lt)}}if(Array.isArray(d)&&d.length>0){let et=this.getCanvas().getContext("2d");et.fillStyle=_,et.font=b;for(let tt=0;tt<Math.min(s.length,d.length);tt++){let rt=g[tt]?g[tt]:s[tt].position;et.fillText(d[tt],rt[0],rt[1])}this.data=Uint8Array.from(et.getImageData(0,0,this.width,this.height).data)}return this}function zerosMatrix(s,o){let h=new Array(s);for(let d=0;d<s;d++)h[d]=new Array(o).fill(0);return h}const cross=[[0,0,1,0,0],[0,0,1,0,0],[1,1,1,1,1],[0,0,1,0,0],[0,0,1,0,0]],smallCross=[[0,1,0],[1,1,1],[0,1,0]];class Shape{constructor(o={}){let{kind:h="cross",shape:d,size:g,width:_,height:b,filled:$=!0}=o;if(g&&(_=g,b=g),d)switch(d.toLowerCase()){case"square":case"rectangle":this.matrix=rectangle(_,b,{filled:$});break;case"circle":case"ellipse":this.matrix=ellipse(_,b,{filled:$});break;case"triangle":this.matrix=triangle(_,b,{filled:$});break;default:throw new Error(`Shape: unexpected shape: ${d}`)}else if(h)switch(h.toLowerCase()){case"cross":this.matrix=cross;break;case"smallcross":this.matrix=smallCross;break;default:throw new Error(`Shape: unexpected kind: ${h}`)}else throw new Error("Shape: expected a kind or a shape option");this.height=this.matrix.length,this.width=this.matrix[0].length,this.halfHeight=this.height/2>>0,this.halfWidth=this.width/2>>0}getPoints(){let o=this.matrix,h=[];for(let d=0;d<o.length;d++)for(let g=0;g<o[0].length;g++)o[d][g]&&h.push([g-this.halfWidth,d-this.halfHeight]);return h}getMask(){let o=new Image$1(this.width,this.height,{kind:BINARY});for(let h=0;h<this.matrix.length;h++)for(let d=0;d<this.matrix[0].length;d++)this.matrix[h][d]&&o.setBitXY(d,h);return o}}function rectangle(s,o,h){const d=zerosMatrix(o,s);if(h.filled)for(let g=0;g<o;g++)for(let _=0;_<s;_++)d[g][_]=1;else{for(let g of[0,o-1])for(let _=0;_<s;_++)d[g][_]=1;for(let g=0;g<o;g++)for(let _ of[0,s-1])d[g][_]=1}return d}function ellipse(s,o,h){const d=zerosMatrix(o,s);let g=1-o%2,_=1-s%2,b=Math.floor((s-1)/2),$=Math.floor((o-1)/2),et=b*b,tt=$*$;if(h.filled)for(let rt=0;rt<=$;rt++){let nt=Math.floor(Math.sqrt(et-et*rt*rt/tt));for(let At=b-nt;At<=b;At++)d[$-rt][At]=1,d[$+rt+g][At]=1,d[$-rt][s-At-1]=1,d[$+rt+g][s-At-1]=1}else{for(let rt=0;rt<=$;rt++){let nt=Math.floor(Math.sqrt(et-et*rt*rt/tt)),At=b-nt;d[$-rt][At]=1,d[$+rt+g][At]=1,d[$-rt][s-At-1]=1,d[$+rt+g][s-At-1]=1}for(let rt=0;rt<=b;rt++){let nt=Math.floor(Math.sqrt(tt-tt*rt*rt/et)),At=$-nt;d[At][b-rt]=1,d[At][b+rt+_]=1,d[o-At-1][b-rt]=1,d[o-At-1][b+rt+_]=1}}return d}function triangle(s,o,h){if(!h.filled)throw new Error("Non filled triangle is not implemented");const d=zerosMatrix(o,s);for(let g=0;g<o;g++){let _=Math.floor((1-g/o)*s/2);for(let b=_;b<s-_;b++)d[g][b]=1}return d}function paintPoints(s,o={}){let{shape:h}=o;this.checkProcessable("paintPoints",{bitDepth:[8,16]});let d=getColors(Object.assign({},o,{numberColors:s.length})),g=new Shape(h).getPoints(),_=Math.min(this.channels,d[0].length);for(let b=0;b<s.length;b++){let $=d[b%d.length],et=s[b][0],tt=s[b][1];for(let rt=0;rt<g.length;rt++){let nt=g[rt][0],At=g[rt][1];if(et+nt>=0&&tt+At>=0&&et+nt<this.width&&tt+At<this.height){let at=(et+nt+(tt+At)*this.width)*this.channels;for(let lt=0;lt<_;lt++)this.data[at+lt]=$[lt]}}}return this}function paintPolyline(s,o={}){let{color:h=[this.maxValue,0,0],closed:d=!1}=o;this.checkProcessable("paintPoints",{bitDepth:[1,8,16]});let g=Math.min(this.channels,h.length);for(let _=0;_<s.length-1+d;_++){let b=s[_],$=s[(_+1)%s.length],et=$[0]-b[0],tt=$[1]-b[1],rt=Math.max(Math.abs(et),Math.abs(tt)),nt=et/rt,At=tt/rt,at=b[0],lt=b[1];for(let gt=0;gt<=rt;gt++){let _t=Math.round(at),ct=Math.round(lt);if(_t>=0&&ct>=0&&_t<this.width&&ct<this.height)if(this.bitDepth===1)this.setBitXY(_t,ct);else{let pt=(_t+ct*this.width)*this.channels;for(let dt=0;dt<g;dt++)this.data[pt+dt]=h[dt]}at=at+nt,lt=lt+At}}return this}function paintPolylines(s,o={}){let h=Object.assign({},o);this.checkProcessable("paintPolylines",{bitDepth:[8,16]});let d=getColors(Object.assign({},o,{numberColors:s.length}));for(let g=0;g<s.length;g++)h.color=d[g%d.length],this.paintPolyline(s[g],h);return this}function paintPolygon(s,o={}){let{color:h=[this.maxValue,0,0],filled:d=!1}=o;this.checkProcessable("paintPoints",{bitDepth:[1,8,16]}),o.closed=!0;let g=deleteDouble(s);if(d===!1)return this.paintPolyline(s,o);{let _=Array(this.height);for(let b=0;b<this.height;b++){_[b]=[];for(let $=0;$<this.width;$++)_[b].push(0)}for(let b=0;b<g.length;b++){const $=lineBetweenTwoPoints(g[b],g[(b+1)%g.length]);for(let et=0;et<this.height;et++)for(let tt=0;tt<this.width;tt++)isAtTheRightOfTheLine(tt,et,$,this.height)&&(_[et][tt]=_[et][tt]===0?1:0)}for(let b=0;b<this.height;b++)for(let $=0;$<this.width;$++)if(_[b][$]===1)if(this.bitDepth===1)this.setBitXY($,b);else{let et=Math.min(this.channels,h.length),tt=($+b*this.width)*this.channels;for(let rt=0;rt<et;rt++)this.data[tt+rt]=h[rt]}return this.paintPolyline(s,o)}}function deleteDouble(s){let o=[];for(let h=0;h<s.length;h++)if(!(s[h][0]===s[(h+1)%s.length][0]&&s[h][1]===s[(h+1)%s.length][1])){if(s[h][0]===s[(h-1+s.length)%s.length][0]&&s[h][1]===s[(h-1+s.length)%s.length][1]||s[(h+1)%s.length][0]===s[(h-1+s.length)%s.length][0]&&s[(h-1+s.length)%s.length][1]===s[(h+1)%s.length][1])continue;o.push(s[h])}return o}function lineBetweenTwoPoints(s,o){if(s[0]===o[0])return{a:0,b:s[0],vertical:!0};{const h=(o[1]-s[1])/(o[0]-s[0]),d=s[1]-h*s[0];return{a:h,b:d,vertical:!1}}}function isAtTheRightOfTheLine(s,o,h,d){if(h.vertical===!0)return h.b<=s;if(h.a===0)return!1;{const g=(o-h.b)/h.a;return g<s&&g>=0&&g<=d}}function paintPolygons(s,o={}){let h=Object.assign({},o);this.checkProcessable("paintPolygons",{bitDepth:[8,16]});let d=getColors(Object.assign({},o,{numberColors:s.length}));for(let g=0;g<s.length;g++)h.color=d[g%d.length],this.paintPolygon(s[g],h);return this}function getHistogram(s={}){let{maxSlots:o=256,channel:h,useAlpha:d=!0}=s;if(this.checkProcessable("getHistogram",{bitDepth:[1,8,16]}),h===void 0){if(this.components>1)throw new RangeError("You need to define the channel for an image that contains more than one channel");h=0}return getChannelHistogram.call(this,h,{useAlpha:d,maxSlots:o})}function getHistograms(s={}){const{maxSlots:o=256,useAlpha:h=!0}=s;this.checkProcessable("getHistograms",{bitDepth:[8,16]});let d=new Array(h?this.components:this.channels);for(let g=0;g<d.length;g++)d[g]=getChannelHistogram.call(this,g,{useAlpha:h,maxSlots:o});return d}function getChannelHistogram(s,o){let{useAlpha:h,maxSlots:d}=o;if(this.bitDepth===1){let et=[0,0];for(let tt=0;tt<this.height;tt++)for(let rt=0;rt<this.width;rt++){let nt=this.getBitXY(tt,rt);nt===0?et[0]+=1:nt===1&&(et[1]+=1)}return et}let g=Math.log2(d);if(!isInteger(g))throw new RangeError("maxSlots must be a power of 2, for example: 64, 256, 1024");let _=0;this.bitDepth>g&&(_=this.bitDepth-g);let b=this.data,$=newArray(Math.pow(2,Math.min(this.bitDepth,g)),0);if(h&&this.alpha){let et=this.channels-s-1;for(let tt=s;tt<b.length;tt+=this.channels)$[b[tt]>>_]+=b[tt+et]/this.maxValue}else for(let et=s;et<b.length;et+=this.channels)$[b[et]>>_]++;return $}function getColorHistogram(s={}){let{useAlpha:o=!0,nbSlots:h=512}=s;this.checkProcessable("getColorHistogram",{bitDepth:[8,16],components:[3]});let d=Math.log(h)/Math.log(8);if(d!==Math.floor(d))throw new RangeError("nbSlots must be a power of 8. Usually 8, 64, 512 or 4096");let g=this.bitDepth-d,_=this.data,b=newArray(Math.pow(8,d),0),$=Math.pow(2,d*2),et=Math.pow(2,d);for(let tt=0;tt<_.length;tt+=this.channels){let rt=(_[tt]>>g)*$+(_[tt+1]>>g)*et+(_[tt+2]>>g);o&&this.alpha?b[rt]+=_[tt+this.channels-1]/this.maxValue:b[rt]++}return b}function min(){this.checkProcessable("min",{bitDepth:[8,16,32]});let s=newArray(this.channels,1/0);for(let o=0;o<this.data.length;o+=this.channels)for(let h=0;h<this.channels;h++)this.data[o+h]<s[h]&&(s[h]=this.data[o+h]);return s}function max(){this.checkProcessable("max",{bitDepth:[8,16,32]});let s=newArray(this.channels,-1/0);for(let o=0;o<this.data.length;o+=this.channels)for(let h=0;h<this.channels;h++)this.data[o+h]>s[h]&&(s[h]=this.data[o+h]);return s}function sum(){this.checkProcessable("sum",{bitDepth:[8,16]});let s=newArray(this.channels,0);for(let o=0;o<this.data.length;o+=this.channels)for(let h=0;h<this.channels;h++)s[h]+=this.data[o+h];return s}function getMoment(s=0,o=0){this.checkProcessable("getMoment",{bitDepth:[1]});let h=0;for(let d=0;d<this.width;d++)for(let g=0;g<this.height;g++)this.getBitXY(d,g)===1&&(h+=d**s*g**o);return h}function localMaxima(s={}){let{mask:o,region:h=3,removeClosePoints:d=0,invert:g=!1,maxEquals:_=2}=s,b=this;this.checkProcessable("localMaxima",{bitDepth:[8,16],components:1}),h*=4;let $=g?0:1,et=[1,0,-1,0,1,1,-1,-1,2,0,-2,0,2,2,-2,-2],tt=[0,1,0,-1,1,-1,1,-1,0,2,0,-2,2,-2,2,-2],rt=h<=8?1:2,nt=[];for(let At=rt;At<b.height-rt;At++)for(let at=rt;at<b.width-rt;at++){if(o&&o.getBitXY(at,At)!==$)continue;let lt=0,gt=0,_t=b.data[at+At*b.width];for(let ct=0;ct<h;ct++)g?b.data[at+et[ct]+(At+tt[ct])*b.width]>_t&&lt++:b.data[at+et[ct]+(At+tt[ct])*b.width]<_t&&lt++,b.data[at+et[ct]+(At+tt[ct])*b.width]===_t&&gt++;lt+gt===h&&gt<=_&&nt.push([at,At])}if(d>0)for(let At=0;At<nt.length;At++)for(let at=At+1;at<nt.length;at++)Math.sqrt(Math.pow(nt[At][0]-nt[at][0],2)+Math.pow(nt[At][1]-nt[at][1],2))<d&&(nt[At][0]=nt[At][0]+nt[at][0]>>1,nt[At][1]=nt[At][1]+nt[at][1]>>1,nt.splice(at,1),at--);return nt}function mean(){let s=this.getHistograms({maxSlots:this.maxValue+1}),o=new Array(s.length);for(let h=0;h<s.length;h++){let d=s[h];o[h]=mean$2(d)}return o}function median(){let s=this.getHistograms({maxSlots:this.maxValue+1}),o=new Array(s.length);for(let h=0;h<s.length;h++){let d=s[h];o[h]=median$2(d)}return o}function points(){this.checkProcessable("points",{bitDepth:[1]});const s=[];for(let o=0;o<this.width;o++)for(let h=0;h<this.height;h++)this.getBitXY(o,h)===1&&s.push([o,h]);return s}function extendedPoints(){this.checkProcessable("extendedPoints",{bitDepth:[1]});const s=[];for(let o=0;o<this.height;o++)for(let h=0;h<this.width;h++)if(this.getBitXY(h,o)===1)for(s.push([h,o]),this.getBitXY(h+1,o)!==1?(s.push([h+1,o]),s.push([h+1,o+1]),this.getBitXY(h,o+1)!==1&&s.push([h,o+1])):this.getBitXY(h,o+1)!==1&&(s.push([h,o+1]),s.push([h+1,o+1]));h<this.width-2&&this.getBitXY(h+1,o)===1&&this.getBitXY(h+2,o)===1;)h++;return s}function getRelativePosition(s,o={}){if(this===s)return[0,0];let h=[0,0],d=this;for(;d;){if(d===s)return h;d.position&&(h[0]+=d.position[0],h[1]+=d.position[1]),d=d.parent}return o.defaultFurther?h:!1}function countAlphaPixels(s={}){let{alpha:o=1}=s;this.checkProcessable("countAlphaPixels",{bitDepth:[8,16],alpha:1});let h=0;if(o!==void 0){for(let d=this.components;d<this.data.length;d+=this.channels)this.data[d]===o&&h++;return h}else return this.size}function monotoneChainConvexHull$1(s,o={}){const{sorted:h}=o;h||(s=s.slice().sort(byXThenY));const d=s.length,g=new Array(d*2);let _=0;for(let $=0;$<d;$++){const et=s[$];for(;_>=2&&cw(g[_-2],g[_-1],et)<=0;)_--;g[_++]=et}const b=_+1;for(let $=d-2;$>=0;$--){const et=s[$];for(;_>=b&&cw(g[_-2],g[_-1],et)<=0;)_--;g[_++]=et}return g.slice(0,_-1)}function cw(s,o,h){return(o[1]-s[1])*(h[0]-s[0])-(o[0]-s[0])*(h[1]-s[1])}function byXThenY(s,o){return s[0]===o[0]?s[1]-o[1]:s[0]-o[0]}function monotoneChainConvexHull(){return monotoneChainConvexHull$1(this.extendedPoints,{sorted:!1})}function round(s){for(let o=0;o<s.length;o++)s[o][0]=Math.round(s[o][0]),s[o][1]=Math.round(s[o][1]);return s}function difference(s,o){return[s[0]-o[0],s[1]-o[1]]}function normalize(s){let o=Math.sqrt(s[0]**2+s[1]**2);return[s[0]/o,s[1]/o]}function rotate(s,o,h){h===void 0&&(h=new Array(o.length));let d=Math.cos(s),g=Math.sin(s);for(let _=0;_<h.length;++_)h[_]=[d*o[_][0]-g*o[_][1],g*o[_][0]+d*o[_][1]];return h}function perimeter(s){let o=0;for(let h=0;h<s.length;h++){let d=s[h][0],g=s[h][1],_=s[h===s.length-1?0:h+1][0],b=s[h===s.length-1?0:h+1][1];o+=Math.sqrt((_-d)**2+(b-g)**2)}return o}function surface(s){let o=0;for(let h=0;h<s.length;h++){let d=s[h][0],g=s[h===s.length-1?0:h+1][1],_=s[h===s.length-1?0:h+1][0],b=s[h][1];o+=d*g*.5,o-=_*b*.5}return Math.abs(o)}function minMax(s){let o=1/0,h=1/0,d=-1/0,g=-1/0;for(let _=0;_<s.length;_++)s[_][0]<o&&(o=s[_][0]),s[_][0]>d&&(d=s[_][0]),s[_][1]<h&&(h=s[_][1]),s[_][1]>g&&(g=s[_][1]);return[[o,h],[d,g]]}function moveToZeroZero(s,o){o===void 0&&(o=new Array(s.length).fill(0).map(()=>[]));let h=minMax(s),d=h[0][0],g=h[0][1];for(let _=0;_<s.length;_++)o[_][0]=s[_][0]-d,o[_][1]=s[_][1]-g;return o}function minimalBoundingRectangle(s={}){const{originalPoints:o=monotoneChainConvexHull.call(this)}=s;if(o.length===0)return[];if(o.length===1)return[o[0],o[0],o[0],o[0]];const h=new Array(o.length);let d=1/0,g=0,_;for(let b=0;b<h.length;b++){let $=getAngle$1(o[b],o[(b+1)%h.length]);rotate(-$,o,h);let et=h[b][0],tt=h[b][1],rt=h[(b+1)%h.length][0],nt=h[(b+1)%h.length][1],At=!0,at=0,lt=0,gt=0;for(let dt=0;dt<h.length;dt++){let mt=h[dt][0],Qt=h[dt][1],xt=(mt-et)/(rt-et);At===!0?(At=!1,at=xt,lt=xt):(xt<at&&(at=xt),xt>lt&&(lt=xt));let bt=(-(rt-et)*Qt+rt*tt-nt*et)/(rt-et);Math.abs(bt)>Math.abs(gt)&&(gt=bt)}let _t=[et+at*(rt-et),tt],ct=[et+lt*(rt-et),tt],pt=Math.abs(gt*(at-lt)*(rt-et));pt<d&&(g=$,d=pt,_=[_t,ct,[ct[0],ct[1]-gt],[_t[0],_t[1]-gt]])}return rotate(g,_,_),_}function getAngle$1(s,o){let h=difference(o,s),d=normalize(h),g=Math.acos(d[0]);return d[1]<0?-g:g}function extend$1(s){let o={inPlace:!0};s.extendMethod("invert",invert),s.extendMethod("abs",abs),s.extendMethod("level",level,o),s.extendMethod("add",add,o),s.extendMethod("subtract",subtract,o),s.extendMethod("subtractImage",subtractImage),s.extendMethod("multiply",multiply,o),s.extendMethod("divide",divide,o),s.extendMethod("hypotenuse",hypotenuse),s.extendMethod("background",background$1),s.extendMethod("flipX",flipX),s.extendMethod("flipY",flipY),s.extendMethod("blurFilter",blurFilter),s.extendMethod("medianFilter",medianFilter),s.extendMethod("gaussianFilter",gaussianFilter),s.extendMethod("sobelFilter",sobelFilter),s.extendMethod("gradientFilter",gradientFilter),s.extendMethod("scharrFilter",scharrFilter),s.extendMethod("dilate",dilate),s.extendMethod("erode",erode),s.extendMethod("open",open),s.extendMethod("close",close),s.extendMethod("topHat",topHat),s.extendMethod("blackHat",blackHat),s.extendMethod("morphologicalGradient",morphologicalGradient),s.extendMethod("warpingFourPoints",warpingFourPoints),s.extendMethod("crop",crop),s.extendMethod("cropAlpha",cropAlpha),s.extendMethod("resize",resize).extendMethod("scale",resize),s.extendMethod("hsv",hsv),s.extendMethod("hsl",hsl$1),s.extendMethod("cmyk",cmyk),s.extendMethod("rgba8",rgba8),s.extendMethod("grey",grey).extendMethod("gray",grey),s.extendMethod("mask",mask),s.extendMethod("pad",pad),s.extendMethod("colorDepth",colorDepth),s.extendMethod("setBorder",setBorder,o),s.extendMethod("rotate",rotate$1),s.extendMethod("rotateLeft",rotateLeft),s.extendMethod("rotateRight",rotateRight),s.extendMethod("insert",insert),s.extendMethod("getRow",getRow),s.extendMethod("getColumn",getColumn),s.extendMethod("getMatrix",getMatrix),s.extendMethod("setMatrix",setMatrix),s.extendMethod("getPixelsArray",getPixelsArray),s.extendMethod("getIntersection",getIntersection),s.extendMethod("getClosestCommonParent",getClosestCommonParent),s.extendMethod("getThreshold",getThreshold),s.extendMethod("split",split),s.extendMethod("getChannel",getChannel),s.extendMethod("combineChannels",combineChannels),s.extendMethod("setChannel",setChannel),s.extendMethod("getSimilarity",getSimilarity),s.extendMethod("getPixelsGrid",getPixelsGrid),s.extendMethod("getBestMatch",getBestMatch),s.extendMethod("cannyEdge",cannyEdge),s.extendMethod("convolution",convolution),s.extendMethod("extract",extract),s.extendMethod("floodFill",floodFill),s.extendMethod("paintLabels",paintLabels,o),s.extendMethod("paintMasks",paintMasks,o),s.extendMethod("paintPoints",paintPoints,o),s.extendMethod("paintPolyline",paintPolyline,o),s.extendMethod("paintPolylines",paintPolylines,o),s.extendMethod("paintPolygon",paintPolygon,o),s.extendMethod("paintPolygons",paintPolygons,o),s.extendMethod("countAlphaPixels",countAlphaPixels),s.extendMethod("monotoneChainConvexHull",monotoneChainConvexHull),s.extendMethod("minimalBoundingRectangle",minimalBoundingRectangle),s.extendMethod("getHistogram",getHistogram).extendProperty("histogram",getHistogram),s.extendMethod("getHistograms",getHistograms).extendProperty("histograms",getHistograms),s.extendMethod("getColorHistogram",getColorHistogram).extendProperty("colorHistogram",getColorHistogram),s.extendMethod("getMin",min).extendProperty("min",min),s.extendMethod("getMax",max).extendProperty("max",max),s.extendMethod("getSum",sum).extendProperty("sum",sum),s.extendMethod("getMoment",getMoment).extendProperty("moment",getMoment),s.extendMethod("getLocalMaxima",localMaxima),s.extendMethod("getMedian",median).extendProperty("median",median),s.extendMethod("getMean",mean).extendProperty("mean",mean),s.extendMethod("getPoints",points).extendProperty("points",points),s.extendMethod("getExtendedPoints",extendedPoints).extendProperty("extendedPoints",extendedPoints),s.extendMethod("getRelativePosition",getRelativePosition)}var quantities$1={exports:{}},quantities=quantities$1.exports,hasRequiredQuantities;function requireQuantities(){return hasRequiredQuantities||(hasRequiredQuantities=1,function(s,o){(function(h,d){s.exports=d()})(quantities,function(){function h(wt){return typeof wt=="string"||wt instanceof String}var d=Number.isFinite||window.isFinite;function g(wt){return d(wt)}function _(wt){return wt}function b(wt){var ot={};return wt.filter(function(st){return ot.hasOwnProperty(st)?!1:ot[st]=!0})}function $(wt,ot){if(ot.length!==wt.length)return!1;for(var st=0;st<wt.length;st++)if(ot[st].compareArray&&!ot[st].compareArray(wt[st])||ot[st]!==wt[st])return!1;return!0}function et(wt,ot){Object.keys(ot).forEach(function(st){wt[st]=ot[st]})}function tt(){for(var wt=1,ot=0,st=0;st<arguments.length;st++){var ht=arguments[st];ot=ot+At(ht),wt*=ht}return ot!==0?nt(wt,ot):wt}function rt(wt,ot){if(ot===0)throw new Error("Divide by zero");var st=Math.pow(10,At(ot)),ht=st/(st*ot);return tt(wt,ht)}function nt(wt,ot){return Math.round(wt*Math.pow(10,ot))/Math.pow(10,ot)}function At(wt){if(!isFinite(wt))return 0;for(var ot=0;wt%1!==0;)wt*=10,ot++;return ot}function at(){var wt;if(!this)return wt=Object.create(at.prototype),at.apply(wt,arguments),wt;wt=Error.apply(this,arguments),this.name="QtyError",this.message=wt.message,this.stack=wt.stack}at.prototype=Object.create(Error.prototype,{constructor:{value:at}});function lt(wt,ot){throw new at("Incompatible units: "+wt+" and "+ot)}var gt={"<googol>":[["googol"],1e100,"prefix"],"<kibi>":[["Ki","Kibi","kibi"],Math.pow(2,10),"prefix"],"<mebi>":[["Mi","Mebi","mebi"],Math.pow(2,20),"prefix"],"<gibi>":[["Gi","Gibi","gibi"],Math.pow(2,30),"prefix"],"<tebi>":[["Ti","Tebi","tebi"],Math.pow(2,40),"prefix"],"<pebi>":[["Pi","Pebi","pebi"],Math.pow(2,50),"prefix"],"<exi>":[["Ei","Exi","exi"],Math.pow(2,60),"prefix"],"<zebi>":[["Zi","Zebi","zebi"],Math.pow(2,70),"prefix"],"<yebi>":[["Yi","Yebi","yebi"],Math.pow(2,80),"prefix"],"<yotta>":[["Y","Yotta","yotta"],1e24,"prefix"],"<zetta>":[["Z","Zetta","zetta"],1e21,"prefix"],"<exa>":[["E","Exa","exa"],1e18,"prefix"],"<peta>":[["P","Peta","peta"],1e15,"prefix"],"<tera>":[["T","Tera","tera"],1e12,"prefix"],"<giga>":[["G","Giga","giga"],1e9,"prefix"],"<mega>":[["M","Mega","mega"],1e6,"prefix"],"<kilo>":[["k","kilo"],1e3,"prefix"],"<hecto>":[["h","Hecto","hecto"],100,"prefix"],"<deca>":[["da","Deca","deca","deka"],10,"prefix"],"<deci>":[["d","Deci","deci"],.1,"prefix"],"<centi>":[["c","Centi","centi"],.01,"prefix"],"<milli>":[["m","Milli","milli"],.001,"prefix"],"<micro>":[["u","","","Micro","mc","micro"],1e-6,"prefix"],"<nano>":[["n","Nano","nano"],1e-9,"prefix"],"<pico>":[["p","Pico","pico"],1e-12,"prefix"],"<femto>":[["f","Femto","femto"],1e-15,"prefix"],"<atto>":[["a","Atto","atto"],1e-18,"prefix"],"<zepto>":[["z","Zepto","zepto"],1e-21,"prefix"],"<yocto>":[["y","Yocto","yocto"],1e-24,"prefix"],"<1>":[["1","<1>"],1,""],"<meter>":[["m","meter","meters","metre","metres"],1,"length",["<meter>"]],"<inch>":[["in","inch","inches",'"'],.0254,"length",["<meter>"]],"<foot>":[["ft","foot","feet","'"],.3048,"length",["<meter>"]],"<yard>":[["yd","yard","yards"],.9144,"length",["<meter>"]],"<mile>":[["mi","mile","miles"],1609.344,"length",["<meter>"]],"<naut-mile>":[["nmi","naut-mile"],1852,"length",["<meter>"]],"<league>":[["league","leagues"],4828,"length",["<meter>"]],"<furlong>":[["furlong","furlongs"],201.2,"length",["<meter>"]],"<rod>":[["rd","rod","rods"],5.029,"length",["<meter>"]],"<mil>":[["mil","mils"],254e-7,"length",["<meter>"]],"<angstrom>":[["ang","angstrom","angstroms"],1e-10,"length",["<meter>"]],"<fathom>":[["fathom","fathoms"],1.829,"length",["<meter>"]],"<pica>":[["pica","picas"],.00423333333,"length",["<meter>"]],"<point>":[["pt","point","points"],.000352777778,"length",["<meter>"]],"<redshift>":[["z","red-shift","redshift"],1302773e20,"length",["<meter>"]],"<AU>":[["AU","astronomical-unit"],1495979e5,"length",["<meter>"]],"<light-second>":[["ls","light-second"],299792500,"length",["<meter>"]],"<light-minute>":[["lmin","light-minute"],1798755e4,"length",["<meter>"]],"<light-year>":[["ly","light-year"],9460528e9,"length",["<meter>"]],"<parsec>":[["pc","parsec","parsecs"],3085678e10,"length",["<meter>"]],"<datamile>":[["DM","datamile"],1828.8,"length",["<meter>"]],"<kilogram>":[["kg","kilogram","kilograms"],1,"mass",["<kilogram>"]],"<AMU>":[["u","AMU","amu"],1660538921e-36,"mass",["<kilogram>"]],"<dalton>":[["Da","Dalton","Daltons","dalton","daltons"],1660538921e-36,"mass",["<kilogram>"]],"<slug>":[["slug","slugs"],14.5939029,"mass",["<kilogram>"]],"<short-ton>":[["tn","ton","short-ton"],907.18474,"mass",["<kilogram>"]],"<metric-ton>":[["t","tonne","metric-ton"],1e3,"mass",["<kilogram>"]],"<carat>":[["ct","carat","carats"],2e-4,"mass",["<kilogram>"]],"<pound>":[["lbs","lb","pound","pounds","#"],.45359237,"mass",["<kilogram>"]],"<ounce>":[["oz","ounce","ounces"],.0283495231,"mass",["<kilogram>"]],"<gram>":[["g","gram","grams","gramme","grammes"],.001,"mass",["<kilogram>"]],"<grain>":[["grain","grains","gr"],6479891e-11,"mass",["<kilogram>"]],"<dram>":[["dram","drams","dr"],.0017718452,"mass",["<kilogram>"]],"<stone>":[["stone","stones","st"],6.35029318,"mass",["<kilogram>"]],"<hectare>":[["hectare"],1e4,"area",["<meter>","<meter>"]],"<acre>":[["acre","acres"],4046.85642,"area",["<meter>","<meter>"]],"<sqft>":[["sqft"],1,"area",["<foot>","<foot>"]],"<liter>":[["l","L","liter","liters","litre","litres"],.001,"volume",["<meter>","<meter>","<meter>"]],"<gallon>":[["gal","gallon","gallons"],.0037854118,"volume",["<meter>","<meter>","<meter>"]],"<gallon-imp>":[["galimp","gallon-imp","gallons-imp"],.00454609,"volume",["<meter>","<meter>","<meter>"]],"<quart>":[["qt","quart","quarts"],.00094635295,"volume",["<meter>","<meter>","<meter>"]],"<pint>":[["pt","pint","pints"],.000473176475,"volume",["<meter>","<meter>","<meter>"]],"<pint-imp>":[["ptimp","pint-imp","pints-imp"],.00056826125,"volume",["<meter>","<meter>","<meter>"]],"<cup>":[["cu","cup","cups"],.000236588238,"volume",["<meter>","<meter>","<meter>"]],"<fluid-ounce>":[["floz","fluid-ounce","fluid-ounces"],295735297e-13,"volume",["<meter>","<meter>","<meter>"]],"<fluid-ounce-imp>":[["flozimp","floz-imp","fluid-ounce-imp","fluid-ounces-imp"],284130625e-13,"volume",["<meter>","<meter>","<meter>"]],"<tablespoon>":[["tb","tbsp","tbs","tablespoon","tablespoons"],147867648e-13,"volume",["<meter>","<meter>","<meter>"]],"<teaspoon>":[["tsp","teaspoon","teaspoons"],492892161e-14,"volume",["<meter>","<meter>","<meter>"]],"<bushel>":[["bu","bsh","bushel","bushels"],.035239072,"volume",["<meter>","<meter>","<meter>"]],"<oilbarrel>":[["bbl","oilbarrel","oilbarrels","oil-barrel","oil-barrels"],.158987294928,"volume",["<meter>","<meter>","<meter>"]],"<beerbarrel>":[["bl","bl-us","beerbarrel","beerbarrels","beer-barrel","beer-barrels"],.1173477658,"volume",["<meter>","<meter>","<meter>"]],"<beerbarrel-imp>":[["blimp","bl-imp","beerbarrel-imp","beerbarrels-imp","beer-barrel-imp","beer-barrels-imp"],.16365924,"volume",["<meter>","<meter>","<meter>"]],"<kph>":[["kph"],.277777778,"speed",["<meter>"],["<second>"]],"<mph>":[["mph"],.44704,"speed",["<meter>"],["<second>"]],"<knot>":[["kt","kn","kts","knot","knots"],.514444444,"speed",["<meter>"],["<second>"]],"<fps>":[["fps"],.3048,"speed",["<meter>"],["<second>"]],"<gee>":[["gee"],9.80665,"acceleration",["<meter>"],["<second>","<second>"]],"<Gal>":[["Gal"],.01,"acceleration",["<meter>"],["<second>","<second>"]],"<kelvin>":[["degK","kelvin"],1,"temperature",["<kelvin>"]],"<celsius>":[["degC","celsius","celsius","centigrade"],1,"temperature",["<kelvin>"]],"<fahrenheit>":[["degF","fahrenheit"],5/9,"temperature",["<kelvin>"]],"<rankine>":[["degR","rankine"],5/9,"temperature",["<kelvin>"]],"<temp-K>":[["tempK","temp-K"],1,"temperature",["<temp-K>"]],"<temp-C>":[["tempC","temp-C"],1,"temperature",["<temp-K>"]],"<temp-F>":[["tempF","temp-F"],5/9,"temperature",["<temp-K>"]],"<temp-R>":[["tempR","temp-R"],5/9,"temperature",["<temp-K>"]],"<second>":[["s","sec","secs","second","seconds"],1,"time",["<second>"]],"<minute>":[["min","mins","minute","minutes"],60,"time",["<second>"]],"<hour>":[["h","hr","hrs","hour","hours"],3600,"time",["<second>"]],"<day>":[["d","day","days"],3600*24,"time",["<second>"]],"<week>":[["wk","week","weeks"],7*3600*24,"time",["<second>"]],"<fortnight>":[["fortnight","fortnights"],1209600,"time",["<second>"]],"<year>":[["y","yr","year","years","annum"],31556926,"time",["<second>"]],"<decade>":[["decade","decades"],315569260,"time",["<second>"]],"<century>":[["century","centuries"],3155692600,"time",["<second>"]],"<pascal>":[["Pa","pascal","Pascal"],1,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<bar>":[["bar","bars"],1e5,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<mmHg>":[["mmHg"],133.322368,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<inHg>":[["inHg"],3386.3881472,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<torr>":[["torr"],133.322368,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<atm>":[["atm","ATM","atmosphere","atmospheres"],101325,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<psi>":[["psi"],6894.76,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<cmh2o>":[["cmH2O","cmh2o"],98.0638,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<inh2o>":[["inH2O","inh2o"],249.082052,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<poise>":[["P","poise"],.1,"viscosity",["<kilogram>"],["<meter>","<second>"]],"<stokes>":[["St","stokes"],1e-4,"viscosity",["<meter>","<meter>"],["<second>"]],"<mole>":[["mol","mole"],1,"substance",["<mole>"]],"<molar>":[["M","molar"],1e3,"molar_concentration",["<mole>"],["<meter>","<meter>","<meter>"]],"<wtpercent>":[["wt%","wtpercent"],10,"molar_concentration",["<kilogram>"],["<meter>","<meter>","<meter>"]],"<katal>":[["kat","katal","Katal"],1,"activity",["<mole>"],["<second>"]],"<unit>":[["U","enzUnit","unit"],16667e-19,"activity",["<mole>"],["<second>"]],"<farad>":[["F","farad","Farad"],1,"capacitance",["<second>","<second>","<second>","<second>","<ampere>","<ampere>"],["<meter>","<meter>","<kilogram>"]],"<coulomb>":[["C","coulomb","Coulomb"],1,"charge",["<ampere>","<second>"]],"<Ah>":[["Ah"],3600,"charge",["<ampere>","<second>"]],"<ampere>":[["A","Ampere","ampere","amp","amps"],1,"current",["<ampere>"]],"<siemens>":[["S","Siemens","siemens"],1,"conductance",["<second>","<second>","<second>","<ampere>","<ampere>"],["<kilogram>","<meter>","<meter>"]],"<henry>":[["H","Henry","henry"],1,"inductance",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<ampere>","<ampere>"]],"<volt>":[["V","Volt","volt","volts"],1,"potential",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<second>","<ampere>"]],"<ohm>":[["Ohm","ohm","",""],1,"resistance",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<second>","<ampere>","<ampere>"]],"<weber>":[["Wb","weber","webers"],1,"magnetism",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<ampere>"]],"<tesla>":[["T","tesla","teslas"],1,"magnetism",["<kilogram>"],["<second>","<second>","<ampere>"]],"<gauss>":[["G","gauss"],1e-4,"magnetism",["<kilogram>"],["<second>","<second>","<ampere>"]],"<maxwell>":[["Mx","maxwell","maxwells"],1e-8,"magnetism",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<ampere>"]],"<oersted>":[["Oe","oersted","oersteds"],250/Math.PI,"magnetism",["<ampere>"],["<meter>"]],"<joule>":[["J","joule","Joule","joules","Joules"],1,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<erg>":[["erg","ergs"],1e-7,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<btu>":[["BTU","btu","BTUs"],1055.056,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<calorie>":[["cal","calorie","calories"],4.184,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<Calorie>":[["Cal","Calorie","Calories"],4184,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<therm-US>":[["th","therm","therms","Therm","therm-US"],105480400,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<Wh>":[["Wh"],3600,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<electronvolt>":[["eV","electronvolt","electronvolts"],1602176634e-28,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<newton>":[["N","Newton","newton"],1,"force",["<kilogram>","<meter>"],["<second>","<second>"]],"<dyne>":[["dyn","dyne"],1e-5,"force",["<kilogram>","<meter>"],["<second>","<second>"]],"<pound-force>":[["lbf","pound-force"],4.448222,"force",["<kilogram>","<meter>"],["<second>","<second>"]],"<hertz>":[["Hz","hertz","Hertz"],1,"frequency",["<1>"],["<second>"]],"<radian>":[["rad","radian","radians"],1,"angle",["<radian>"]],"<degree>":[["deg","degree","degrees"],Math.PI/180,"angle",["<radian>"]],"<arcminute>":[["arcmin","arcminute","arcminutes"],Math.PI/10800,"angle",["<radian>"]],"<arcsecond>":[["arcsec","arcsecond","arcseconds"],Math.PI/648e3,"angle",["<radian>"]],"<gradian>":[["gon","grad","gradian","grads"],Math.PI/200,"angle",["<radian>"]],"<steradian>":[["sr","steradian","steradians"],1,"solid_angle",["<steradian>"]],"<rotation>":[["rotation"],2*Math.PI,"angle",["<radian>"]],"<rpm>":[["rpm"],2*Math.PI/60,"angular_velocity",["<radian>"],["<second>"]],"<byte>":[["B","byte","bytes"],1,"information",["<byte>"]],"<bit>":[["b","bit","bits"],.125,"information",["<byte>"]],"<Bps>":[["Bps"],1,"information_rate",["<byte>"],["<second>"]],"<bps>":[["bps"],.125,"information_rate",["<byte>"],["<second>"]],"<dollar>":[["USD","dollar"],1,"currency",["<dollar>"]],"<cents>":[["cents"],.01,"currency",["<dollar>"]],"<candela>":[["cd","candela"],1,"luminosity",["<candela>"]],"<lumen>":[["lm","lumen"],1,"luminous_power",["<candela>","<steradian>"]],"<lux>":[["lux"],1,"illuminance",["<candela>","<steradian>"],["<meter>","<meter>"]],"<watt>":[["W","watt","watts"],1,"power",["<kilogram>","<meter>","<meter>"],["<second>","<second>","<second>"]],"<volt-ampere>":[["VA","volt-ampere"],1,"power",["<kilogram>","<meter>","<meter>"],["<second>","<second>","<second>"]],"<volt-ampere-reactive>":[["var","Var","VAr","VAR","volt-ampere-reactive"],1,"power",["<kilogram>","<meter>","<meter>"],["<second>","<second>","<second>"]],"<horsepower>":[["hp","horsepower"],745.699872,"power",["<kilogram>","<meter>","<meter>"],["<second>","<second>","<second>"]],"<gray>":[["Gy","gray","grays"],1,"radiation",["<meter>","<meter>"],["<second>","<second>"]],"<roentgen>":[["R","roentgen"],.00933,"radiation",["<meter>","<meter>"],["<second>","<second>"]],"<sievert>":[["Sv","sievert","sieverts"],1,"radiation",["<meter>","<meter>"],["<second>","<second>"]],"<becquerel>":[["Bq","becquerel","becquerels"],1,"radiation",["<1>"],["<second>"]],"<curie>":[["Ci","curie","curies"],37e9,"radiation",["<1>"],["<second>"]],"<cpm>":[["cpm"],1/60,"rate",["<count>"],["<second>"]],"<dpm>":[["dpm"],1/60,"rate",["<count>"],["<second>"]],"<bpm>":[["bpm"],1/60,"rate",["<count>"],["<second>"]],"<dot>":[["dot","dots"],1,"resolution",["<each>"]],"<pixel>":[["pixel","px"],1,"resolution",["<each>"]],"<ppi>":[["ppi"],1,"resolution",["<pixel>"],["<inch>"]],"<dpi>":[["dpi"],1,"typography",["<dot>"],["<inch>"]],"<cell>":[["cells","cell"],1,"counting",["<each>"]],"<each>":[["each"],1,"counting",["<each>"]],"<count>":[["count"],1,"counting",["<each>"]],"<base-pair>":[["bp","base-pair"],1,"counting",["<each>"]],"<nucleotide>":[["nt","nucleotide"],1,"counting",["<each>"]],"<molecule>":[["molecule","molecules"],1,"counting",["<1>"]],"<dozen>":[["doz","dz","dozen"],12,"prefix_only",["<each>"]],"<percent>":[["%","percent"],.01,"prefix_only",["<1>"]],"<ppm>":[["ppm"],1e-6,"prefix_only",["<1>"]],"<ppb>":[["ppb"],1e-9,"prefix_only",["<1>"]],"<ppt>":[["ppt"],1e-12,"prefix_only",["<1>"]],"<ppq>":[["ppq"],1e-15,"prefix_only",["<1>"]],"<gross>":[["gr","gross"],144,"prefix_only",["<dozen>","<dozen>"]],"<decibel>":[["dB","decibel","decibels"],1,"logarithmic",["<decibel>"]]},_t=["<meter>","<kilogram>","<second>","<mole>","<ampere>","<radian>","<kelvin>","<temp-K>","<byte>","<dollar>","<candela>","<each>","<steradian>","<decibel>"],ct="<1>",pt=[ct];function dt(wt,ot){var st=ot[1],ht=ot[3]||[],vt=ot[4]||[];if(!g(st))throw new at(wt+": Invalid unit definition. 'scalar' must be a number");ht.forEach(function(Ut){if(gt[Ut]===void 0)throw new at(wt+": Invalid unit definition. Unit "+Ut+" in 'numerator' is not recognized")}),vt.forEach(function(Ut){if(gt[Ut]===void 0)throw new at(wt+": Invalid unit definition. Unit "+Ut+" in 'denominator' is not recognized")})}var mt={},Qt={},xt={},bt={},kt={};for(var Lt in gt)if(gt.hasOwnProperty(Lt)){var Ht=gt[Lt];if(Ht[2]==="prefix"){mt[Lt]=Ht[1];for(var Pt=0;Pt<Ht[0].length;Pt++)Qt[Ht[0][Pt]]=Lt}else{dt(Lt,Ht),xt[Lt]={scalar:Ht[1],numerator:Ht[3],denominator:Ht[4]};for(var jt=0;jt<Ht[0].length;jt++)bt[Ht[0][jt]]=Lt}kt[Lt]=Ht[0][0]}function Vt(wt){var ot,st=[],ht=Object.keys(gt);if(typeof wt>"u")for(ot=0;ot<ht.length;ot++)["","prefix"].indexOf(gt[ht[ot]][2])===-1&&st.push(ht[ot].substr(1,ht[ot].length-2));else{if(this.getKinds().indexOf(wt)===-1)throw new at("Kind not recognized");for(ot=0;ot<ht.length;ot++)gt[ht[ot]][2]===wt&&st.push(ht[ot].substr(1,ht[ot].length-2))}return st.sort(function(vt,Ut){return vt.toLowerCase()<Ut.toLowerCase()?-1:vt.toLowerCase()>Ut.toLowerCase()?1:0})}function Xt(wt){if(!bt[wt])throw new at("Unit not recognized");return gt[bt[wt]][0]}var nr=["length","time","temperature","mass","current","substance","luminosity","currency","information","angle"];function Ar(){if(this.signature)return this.signature;for(var wt=ar.call(this),ot=0;ot<wt.length;ot++)wt[ot]*=Math.pow(20,ot);return wt.reduce(function(st,ht){return st+ht},0)}function ar(){if(!this.isBase())return ar.call(this.toBase());for(var wt=new Array(nr.length),ot=0;ot<wt.length;ot++)wt[ot]=0;for(var st,ht,vt=0;vt<this.numerator.length;vt++)(st=gt[this.numerator[vt]])&&(ht=nr.indexOf(st[2]),ht>=0&&(wt[ht]=wt[ht]+1));for(var Ut=0;Ut<this.denominator.length;Ut++)(st=gt[this.denominator[Ut]])&&(ht=nr.indexOf(st[2]),ht>=0&&(wt[ht]=wt[ht]-1));return wt}var Wt="[+-]",pr="\\d+",dr=Wt+"?"+pr,yr="\\."+pr,Br="(?:"+pr+"(?:"+yr+")?)|(?:"+yr+")",Lr="[Ee]"+dr,Ur="(?:"+Br+")(?:"+Lr+")?",or=Wt+"?\\s*"+Ur,mr="("+or+")?\\s*([^/]*)(?:/(.+))?",Ir=new RegExp("^"+mr+"$"),ur="\\^|\\*{2}",lr="[01234]",Xr=new RegExp("([^ \\*\\d]+?)(?:"+ur+")?(-?"+lr+"(?![a-zA-Z]))"),zr=new RegExp("([^ \\*\\d]+?)(?:"+ur+")?("+lr+"(?![a-zA-Z]))");function kr(wt){h(wt)||(wt=wt.toString()),wt=wt.trim();var ot=Ir.exec(wt);if(!ot)throw new at(wt+": Quantity not recognized");var st=ot[1];st?(st=st.replace(/\s/g,""),this.scalar=parseFloat(st)):this.scalar=1;for(var ht=ot[2],vt=ot[3],Ut,Ot,zt;ot=Xr.exec(ht);){if(Ut=parseFloat(ot[2]),isNaN(Ut))throw new at("Unit exponent is not a number");if(Ut===0&&!Pr.test(ot[1]))throw new at("Unit not recognized");Ot=ot[1]+" ",zt="";for(var Kt=0;Kt<Math.abs(Ut);Kt++)zt+=Ot;Ut>=0?ht=ht.replace(ot[0],zt):(vt=vt?vt+zt:zt,ht=ht.replace(ot[0],""))}for(;ot=zr.exec(vt);){if(Ut=parseFloat(ot[2]),isNaN(Ut))throw new at("Unit exponent is not a number");if(Ut===0&&!Pr.test(ot[1]))throw new at("Unit not recognized");Ot=ot[1]+" ",zt="";for(var _e=0;_e<Ut;_e++)zt+=Ot;vt=vt.replace(ot[0],zt)}ht&&(this.numerator=tn(ht.trim())),vt&&(this.denominator=tn(vt.trim()))}var Tr=Object.keys(Qt).sort(function(wt,ot){return ot.length-wt.length}).join("|"),Mr=Object.keys(bt).sort(function(wt,ot){return ot.length-wt.length}).join("|"),nn="\\b|$",jr="("+Tr+")??("+Mr+")(?:"+nn+")",Pr=new RegExp("^\\s*("+jr+"[\\s\\*]*)+$"),$r=new RegExp(jr,"g"),Cr={};function tn(wt){var ot=Cr[wt];if(ot)return ot;var st,ht=[];if(!Pr.test(wt))throw new at("Unit not recognized");for(;st=$r.exec(wt);)ht.push(st.slice(1));return ht=ht.map(function(vt){return Qt[vt[0]]?[Qt[vt[0]],bt[vt[1]]]:[bt[vt[1]]]}),ht=ht.reduce(function(vt,Ut){return vt.concat(Ut)},[]),ht=ht.filter(function(vt){return vt}),Cr[wt]=ht,ht}function An(wt){if(!h(wt))throw new at("Argument should be a string");try{return this(wt)}catch{return null}}function Jr(wt){return wt instanceof Dr}function Dr(wt,ot){if(on.apply(null,arguments),!Jr(this))return new Dr(wt,ot);if(this.scalar=null,this.baseScalar=null,this.signature=null,this._conversionCache={},this.numerator=pt,this.denominator=pt,qr(wt)?(this.scalar=wt.scalar,this.numerator=wt.numerator&&wt.numerator.length!==0?wt.numerator:pt,this.denominator=wt.denominator&&wt.denominator.length!==0?wt.denominator:pt):ot?(kr.call(this,ot),this.scalar=wt):kr.call(this,wt),this.denominator.join("*").indexOf("temp")>=0)throw new at("Cannot divide with temperatures");if(this.numerator.join("*").indexOf("temp")>=0){if(this.numerator.length>1)throw new at("Cannot multiply by temperatures");if(!$(this.denominator,pt))throw new at("Cannot divide with temperatures")}if(this.initValue=wt,Yr.call(this),this.isTemperature()&&this.baseScalar<0)throw new at("Temperatures must not be less than absolute zero")}Dr.prototype={constructor:Dr};function on(wt,ot){if(ot){if(!(g(wt)&&h(ot)))throw new at("Only number accepted as initialization value when units are explicitly provided")}else if(!(h(wt)||g(wt)||Jr(wt)||qr(wt)))throw new at("Only string, number or quantity accepted as single initialization value")}function qr(wt){return wt&&typeof wt=="object"&&wt.hasOwnProperty("scalar")}function Yr(){if(this.baseScalar)return this.baseScalar;if(this.isBase())this.baseScalar=this.scalar,this.signature=Ar.call(this);else{var wt=this.toBase();this.baseScalar=wt.scalar,this.signature=wt.signature}}var Wr={"-312078":"elastance","-312058":"resistance","-312038":"inductance","-152058":"potential","-152040":"magnetism","-152038":"magnetism","-7997":"specific_volume","-79":"snap","-59":"jolt","-39":"acceleration","-38":"radiation","-20":"frequency","-19":"speed","-18":"viscosity","-17":"volumetric_flow","-1":"wavenumber",0:"unitless",1:"length",2:"area",3:"volume",20:"time",400:"temperature",7941:"yank",7942:"power",7959:"pressure",7961:"force",7962:"energy",7979:"viscosity",7981:"momentum",7982:"angular_momentum",7997:"density",7998:"area_density",8e3:"mass",152020:"radiation_exposure",159999:"magnetism",16e4:"current",160020:"charge",312058:"conductance",312078:"capacitance",3199980:"activity",3199997:"molar_concentration",32e5:"substance",63999998:"illuminance",64e6:"luminous_power",128e7:"currency","25599999980":"information_rate","25600000000":"information","511999999980":"angular_velocity","512000000000":"angle"};function rn(){return b(Object.keys(Wr).map(function(wt){return Wr[wt]}))}Dr.prototype.kind=function(){return Wr[this.signature.toString()]},et(Dr.prototype,{isDegrees:function(){return(this.signature===null||this.signature===400)&&this.numerator.length===1&&$(this.denominator,pt)&&(this.numerator[0].match(/<temp-[CFRK]>/)||this.numerator[0].match(/<(kelvin|celsius|rankine|fahrenheit)>/))},isTemperature:function(){return this.isDegrees()&&this.numerator[0].match(/<temp-[CFRK]>/)}});function Nr(wt,ot){var st=wt.units(),ht=ot.to(st),vt=Dr(sr(st));return Dr({scalar:wt.scalar-ht.scalar,numerator:vt.numerator,denominator:vt.denominator})}function en(wt,ot){var st=ot.to(sr(wt.units()));return Dr({scalar:wt.scalar-st.scalar,numerator:wt.numerator,denominator:wt.denominator})}function Ft(wt,ot){var st=ot.to(sr(wt.units()));return Dr({scalar:wt.scalar+st.scalar,numerator:wt.numerator,denominator:wt.denominator})}function sr(wt){if(wt==="tempK")return"degK";if(wt==="tempC")return"degC";if(wt==="tempF")return"degF";if(wt==="tempR")return"degR";throw new at("Unknown type for temp conversion from: "+wt)}function hr(wt,ot){var st=br(wt),ht=ot.units(),vt;if(ht==="degK")vt=st.scalar;else if(ht==="degC")vt=st.scalar;else if(ht==="degF")vt=st.scalar*9/5;else if(ht==="degR")vt=st.scalar*9/5;else throw new at("Unknown type for degree conversion to: "+ht);return Dr({scalar:vt,numerator:ot.numerator,denominator:ot.denominator})}function br(wt){var ot=wt.units(),st;if(ot.match(/(deg)[CFRK]/))st=wt.baseScalar;else if(ot==="tempK")st=wt.scalar;else if(ot==="tempC")st=wt.scalar;else if(ot==="tempF")st=wt.scalar*5/9;else if(ot==="tempR")st=wt.scalar*5/9;else throw new at("Unknown type for temp conversion from: "+ot);return Dr({scalar:st,numerator:["<kelvin>"],denominator:pt})}function Gt(wt,ot){var st=ot.units(),ht;if(st==="tempK")ht=wt.baseScalar;else if(st==="tempC")ht=wt.baseScalar-273.15;else if(st==="tempF")ht=wt.baseScalar*9/5-459.67;else if(st==="tempR")ht=wt.baseScalar*9/5;else throw new at("Unknown type for temp conversion to: "+st);return Dr({scalar:ht,numerator:ot.numerator,denominator:ot.denominator})}function ir(wt){var ot=wt.units(),st;if(ot.match(/(deg)[CFRK]/))st=wt.baseScalar;else if(ot==="tempK")st=wt.scalar;else if(ot==="tempC")st=wt.scalar+273.15;else if(ot==="tempF")st=(wt.scalar+459.67)*5/9;else if(ot==="tempR")st=wt.scalar*5/9;else throw new at("Unknown type for temp conversion from: "+ot);return Dr({scalar:st,numerator:["<temp-K>"],denominator:pt})}et(Dr.prototype,{to:function(wt){var ot,st;if(wt==null)return this;if(!h(wt))return this.to(wt.units());if(ot=this._conversionCache[wt],ot)return ot;if(st=Dr(wt),st.units()===this.units())return this;if(!this.isCompatible(st))this.isInverse(st)?st=this.inverse().to(wt):lt(this.units(),st.units());else if(st.isTemperature())st=Gt(this,st);else if(st.isDegrees())st=hr(this,st);else{var ht=rt(this.baseScalar,st.baseScalar);st=Dr({scalar:ht,numerator:st.numerator,denominator:st.denominator})}return this._conversionCache[wt]=st,st},toBase:function(){if(this.isBase())return this;if(this.isTemperature())return ir(this);var wt=gr[this.units()];return wt||(wt=Hr(this.numerator,this.denominator),gr[this.units()]=wt),wt.mul(this.scalar)},toFloat:function(){if(this.isUnitless())return this.scalar;throw new at("Can't convert to Float unless unitless.  Use Unit#scalar")},toPrec:function(wt){if(h(wt)&&(wt=Dr(wt)),g(wt)&&(wt=Dr(wt+" "+this.units())),this.isUnitless()?wt.isUnitless()||lt(this.units(),wt.units()):wt=wt.to(this.units()),wt.scalar===0)throw new at("Divide by zero");var ot=tt(Math.round(this.scalar/wt.scalar),wt.scalar);return Dr(ot+this.units())}});function yt(wt,ot){var st=Dr(wt),ht=Dr(ot);if(st.eq(ht))return _;var vt;return st.isTemperature()?vt=function(Ut){return st.mul(Ut).to(ht).scalar}:vt=function(Ut){return Ut*st.baseScalar/ht.baseScalar},function(Ut){var Ot,zt,Kt;if(Array.isArray(Ut)){for(zt=Ut.length,Kt=[],Ot=0;Ot<zt;Ot++)Kt.push(vt(Ut[Ot]));return Kt}else return vt(Ut)}}var gr={};function Hr(wt,ot){for(var st=[],ht=[],vt=1,Ut,Ot=0;Ot<wt.length;Ot++)Ut=wt[Ot],mt[Ut]?vt=tt(vt,mt[Ut]):xt[Ut]&&(vt*=xt[Ut].scalar,xt[Ut].numerator&&st.push(xt[Ut].numerator),xt[Ut].denominator&&ht.push(xt[Ut].denominator));for(var zt=0;zt<ot.length;zt++)Ut=ot[zt],mt[Ut]?vt/=mt[Ut]:xt[Ut]&&(vt/=xt[Ut].scalar,xt[Ut].numerator&&ht.push(xt[Ut].numerator),xt[Ut].denominator&&st.push(xt[Ut].denominator));return st=st.reduce(function(Kt,_e){return Kt.concat(_e)},[]),ht=ht.reduce(function(Kt,_e){return Kt.concat(_e)},[]),Dr({scalar:vt,numerator:st,denominator:ht})}Dr.parse=An,Dr.getUnits=Vt,Dr.getAliases=Xt,Dr.mulSafe=tt,Dr.divSafe=rt,Dr.getKinds=rn,Dr.swiftConverter=yt,Dr.Error=at,et(Dr.prototype,{add:function(wt){if(h(wt)&&(wt=Dr(wt)),this.isCompatible(wt)||lt(this.units(),wt.units()),this.isTemperature()&&wt.isTemperature())throw new at("Cannot add two temperatures");return this.isTemperature()?Ft(this,wt):wt.isTemperature()?Ft(wt,this):Dr({scalar:this.scalar+wt.to(this).scalar,numerator:this.numerator,denominator:this.denominator})},sub:function(wt){if(h(wt)&&(wt=Dr(wt)),this.isCompatible(wt)||lt(this.units(),wt.units()),this.isTemperature()&&wt.isTemperature())return Nr(this,wt);if(this.isTemperature())return en(this,wt);if(wt.isTemperature())throw new at("Cannot subtract a temperature from a differential degree unit");return Dr({scalar:this.scalar-wt.to(this).scalar,numerator:this.numerator,denominator:this.denominator})},mul:function(wt){if(g(wt))return Dr({scalar:tt(this.scalar,wt),numerator:this.numerator,denominator:this.denominator});if(h(wt)&&(wt=Dr(wt)),(this.isTemperature()||wt.isTemperature())&&!(this.isUnitless()||wt.isUnitless()))throw new at("Cannot multiply by temperatures");var ot=this,st=wt;ot.isCompatible(st)&&ot.signature!==400&&(st=st.to(ot));var ht=ut(ot.numerator,ot.denominator,st.numerator,st.denominator);return Dr({scalar:tt(ot.scalar,st.scalar,ht[2]),numerator:ht[0],denominator:ht[1]})},div:function(wt){if(g(wt)){if(wt===0)throw new at("Divide by zero");return Dr({scalar:this.scalar/wt,numerator:this.numerator,denominator:this.denominator})}else h(wt)&&(wt=Dr(wt));if(wt.scalar===0)throw new at("Divide by zero");if(wt.isTemperature())throw new at("Cannot divide with temperatures");if(this.isTemperature()&&!wt.isUnitless())throw new at("Cannot divide with temperatures");var ot=this,st=wt;ot.isCompatible(st)&&ot.signature!==400&&(st=st.to(ot));var ht=ut(ot.numerator,ot.denominator,st.denominator,st.numerator);return Dr({scalar:tt(ot.scalar,ht[2])/st.scalar,numerator:ht[0],denominator:ht[1]})},inverse:function(){if(this.isTemperature())throw new at("Cannot divide with temperatures");if(this.scalar===0)throw new at("Divide by zero");return Dr({scalar:1/this.scalar,numerator:this.denominator,denominator:this.numerator})}});function ut(wt,ot,st,ht){function vt(Fr){return Fr!==ct}wt=wt.filter(vt),st=st.filter(vt),ot=ot.filter(vt),ht=ht.filter(vt);var Ut={};function Ot(Fr,vr){for(var xr,Zr,fr,Gr=0;Gr<Fr.length;Gr++)if(mt[Fr[Gr]]?(xr=Fr[Gr+1],Zr=Fr[Gr],fr=mt[Zr],Gr++):(xr=Fr[Gr],Zr=null,fr=1),xr&&xr!==ct)if(Ut[xr]){Ut[xr][0]+=vr;var an=Ut[xr][2]?mt[Ut[xr][2]]:1;Ut[xr][vr===1?3:4]*=rt(fr,an)}else Ut[xr]=[vr,xr,Zr,1,1]}Ot(wt,1),Ot(ot,-1),Ot(st,1),Ot(ht,-1);var zt=[],Kt=[],_e=1;for(var _r in Ut)if(Ut.hasOwnProperty(_r)){var er=Ut[_r],Er;if(er[0]>0)for(Er=0;Er<er[0];Er++)zt.push(er[2]===null?er[1]:[er[2],er[1]]);else if(er[0]<0)for(Er=0;Er<-er[0];Er++)Kt.push(er[2]===null?er[1]:[er[2],er[1]]);_e*=rt(er[3],er[4])}return zt.length===0&&(zt=pt),Kt.length===0&&(Kt=pt),zt=zt.reduce(function(Fr,vr){return Fr.concat(vr)},[]),Kt=Kt.reduce(function(Fr,vr){return Fr.concat(vr)},[]),[zt,Kt,_e]}et(Dr.prototype,{eq:function(wt){return this.compareTo(wt)===0},lt:function(wt){return this.compareTo(wt)===-1},lte:function(wt){return this.eq(wt)||this.lt(wt)},gt:function(wt){return this.compareTo(wt)===1},gte:function(wt){return this.eq(wt)||this.gt(wt)},compareTo:function(wt){if(h(wt))return this.compareTo(Dr(wt));if(this.isCompatible(wt)||lt(this.units(),wt.units()),this.baseScalar<wt.baseScalar)return-1;if(this.baseScalar===wt.baseScalar)return 0;if(this.baseScalar>wt.baseScalar)return 1},same:function(wt){return this.scalar===wt.scalar&&this.units()===wt.units()}}),et(Dr.prototype,{isUnitless:function(){return[this.numerator,this.denominator].every(function(wt){return $(wt,pt)})},isCompatible:function(wt){return h(wt)?this.isCompatible(Dr(wt)):Jr(wt)&&wt.signature!==void 0?this.signature===wt.signature:!1},isInverse:function(wt){return this.inverse().isCompatible(wt)},isBase:function(){return this._isBase!==void 0?this._isBase:this.isDegrees()&&this.numerator[0].match(/<(kelvin|temp-K)>/)?(this._isBase=!0,this._isBase):(this.numerator.concat(this.denominator).forEach(function(wt){wt!==ct&&_t.indexOf(wt)===-1&&(this._isBase=!1)},this),this._isBase===!1?this._isBase:(this._isBase=!0,this._isBase))}});function tr(){}tr.prototype.get=function(wt){return arguments.length>1&&(wt=Array.apply(null,arguments)),wt.reduce(function(ot,st,ht){if(ot){var vt=ot[st];return ht===wt.length-1?vt?vt.data:void 0:vt}},this)},tr.prototype.set=function(wt,ot){return arguments.length>2&&(wt=Array.prototype.slice.call(arguments,0,-1),ot=arguments[arguments.length-1]),wt.reduce(function(st,ht,vt){var Ut=st[ht];return Ut===void 0&&(Ut=st[ht]={}),vt===wt.length-1?(Ut.data=ot,ot):Ut},this)};function rr(wt,ot){return(wt+" "+ot).trim()}Dr.formatter=rr,et(Dr.prototype,{units:function(){if(this._units!==void 0)return this._units;var wt=$(this.numerator,pt),ot=$(this.denominator,pt);if(wt&&ot)return this._units="",this._units;var st=Nt(this.numerator),ht=Nt(this.denominator);return this._units=st+(ot?"":"/"+ht),this._units},toString:function(wt,ot){var st;if(g(wt))st=this.units(),ot=wt;else if(h(wt))st=wt;else if(Jr(wt))return this.toPrec(wt).toString(ot);var ht=this.to(st),vt=ot!==void 0?nt(ht.scalar,ot):ht.scalar;return ht=(vt+" "+ht.units()).trim(),ht},format:function(wt,ot){arguments.length===1&&typeof wt=="function"&&(ot=wt,wt=void 0),ot=ot||Dr.formatter;var st=this.to(wt);return ot.call(this,st.scalar,st.units())}});var Ct=new tr;function Nt(wt){var ot=Ct.get(wt);if(ot)return ot;var st=$(wt,pt);return st?ot="1":ot=Rr(Jt(wt)).join("*"),Ct.set(wt,ot),ot}function Jt(wt){for(var ot=[],st,ht,vt=0;vt<wt.length;vt++)st=wt[vt],ht=wt[vt+1],mt[st]?(ot.push(kt[st]+kt[ht]),vt++):ot.push(kt[st]);return ot}function Rr(wt){var ot=wt.reduce(function(st,ht){var vt=st[ht];return vt||st.push(vt=st[ht]=[ht,0]),vt[1]++,st},[]);return ot.map(function(st){return st[0]+(st[1]>1?st[1]:"")})}return Dr.version="1.8.0",Dr})}(quantities$1)),quantities$1.exports}var quantitiesExports=requireQuantities();const Qty=getDefaultExportFromCjs(quantitiesExports);function deepValue(s,o=""){let h=o.split(".");for(let d of h){if(s[d]===void 0)return;s=s[d]}return s}var orientation$1={exports:{}},twoProduct_1,hasRequiredTwoProduct;function requireTwoProduct(){if(hasRequiredTwoProduct)return twoProduct_1;hasRequiredTwoProduct=1,twoProduct_1=o;var s=+(Math.pow(2,27)+1);function o(h,d,g){var _=h*d,b=s*h,$=b-h,et=b-$,tt=h-et,rt=s*d,nt=rt-d,At=rt-nt,at=d-At,lt=_-et*At,gt=lt-tt*At,_t=gt-et*at,ct=tt*at-_t;return g?(g[0]=ct,g[1]=_,g):[ct,_]}return twoProduct_1}var robustSum,hasRequiredRobustSum;function requireRobustSum(){if(hasRequiredRobustSum)return robustSum;hasRequiredRobustSum=1,robustSum=o;function s(h,d){var g=h+d,_=g-h,b=g-_,$=d-_,et=h-b,tt=et+$;return tt?[tt,g]:[g]}function o(h,d){var g=h.length|0,_=d.length|0;if(g===1&&_===1)return s(h[0],d[0]);var b=g+_,$=new Array(b),et=0,tt=0,rt=0,nt=Math.abs,At=h[tt],at=nt(At),lt=d[rt],gt=nt(lt),_t,ct;at<gt?(ct=At,tt+=1,tt<g&&(At=h[tt],at=nt(At))):(ct=lt,rt+=1,rt<_&&(lt=d[rt],gt=nt(lt))),tt<g&&at<gt||rt>=_?(_t=At,tt+=1,tt<g&&(At=h[tt],at=nt(At))):(_t=lt,rt+=1,rt<_&&(lt=d[rt],gt=nt(lt)));for(var pt=_t+ct,dt=pt-_t,mt=ct-dt,Qt=mt,xt=pt,bt,kt,Lt,Ht,Pt;tt<g&&rt<_;)at<gt?(_t=At,tt+=1,tt<g&&(At=h[tt],at=nt(At))):(_t=lt,rt+=1,rt<_&&(lt=d[rt],gt=nt(lt))),ct=Qt,pt=_t+ct,dt=pt-_t,mt=ct-dt,mt&&($[et++]=mt),bt=xt+pt,kt=bt-xt,Lt=bt-kt,Ht=pt-kt,Pt=xt-Lt,Qt=Pt+Ht,xt=bt;for(;tt<g;)_t=At,ct=Qt,pt=_t+ct,dt=pt-_t,mt=ct-dt,mt&&($[et++]=mt),bt=xt+pt,kt=bt-xt,Lt=bt-kt,Ht=pt-kt,Pt=xt-Lt,Qt=Pt+Ht,xt=bt,tt+=1,tt<g&&(At=h[tt]);for(;rt<_;)_t=lt,ct=Qt,pt=_t+ct,dt=pt-_t,mt=ct-dt,mt&&($[et++]=mt),bt=xt+pt,kt=bt-xt,Lt=bt-kt,Ht=pt-kt,Pt=xt-Lt,Qt=Pt+Ht,xt=bt,rt+=1,rt<_&&(lt=d[rt]);return Qt&&($[et++]=Qt),xt&&($[et++]=xt),et||($[et++]=0),$.length=et,$}return robustSum}var twoSum,hasRequiredTwoSum;function requireTwoSum(){if(hasRequiredTwoSum)return twoSum;hasRequiredTwoSum=1,twoSum=s;function s(o,h,d){var g=o+h,_=g-o,b=g-_,$=h-_,et=o-b;return d?(d[0]=et+$,d[1]=g,d):[et+$,g]}return twoSum}var robustScale,hasRequiredRobustScale;function requireRobustScale(){if(hasRequiredRobustScale)return robustScale;hasRequiredRobustScale=1;var s=requireTwoProduct(),o=requireTwoSum();robustScale=h;function h(d,g){var _=d.length;if(_===1){var b=s(d[0],g);return b[0]?b:[b[1]]}var $=new Array(2*_),et=[.1,.1],tt=[.1,.1],rt=0;s(d[0],g,et),et[0]&&($[rt++]=et[0]);for(var nt=1;nt<_;++nt){s(d[nt],g,tt);var At=et[1];o(At,tt[0],et),et[0]&&($[rt++]=et[0]);var at=tt[1],lt=et[1],gt=at+lt,_t=gt-at,ct=lt-_t;et[1]=gt,ct&&($[rt++]=ct)}return et[1]&&($[rt++]=et[1]),rt===0&&($[rt++]=0),$.length=rt,$}return robustScale}var robustDiff,hasRequiredRobustDiff;function requireRobustDiff(){if(hasRequiredRobustDiff)return robustDiff;hasRequiredRobustDiff=1,robustDiff=o;function s(h,d){var g=h+d,_=g-h,b=g-_,$=d-_,et=h-b,tt=et+$;return tt?[tt,g]:[g]}function o(h,d){var g=h.length|0,_=d.length|0;if(g===1&&_===1)return s(h[0],-d[0]);var b=g+_,$=new Array(b),et=0,tt=0,rt=0,nt=Math.abs,At=h[tt],at=nt(At),lt=-d[rt],gt=nt(lt),_t,ct;at<gt?(ct=At,tt+=1,tt<g&&(At=h[tt],at=nt(At))):(ct=lt,rt+=1,rt<_&&(lt=-d[rt],gt=nt(lt))),tt<g&&at<gt||rt>=_?(_t=At,tt+=1,tt<g&&(At=h[tt],at=nt(At))):(_t=lt,rt+=1,rt<_&&(lt=-d[rt],gt=nt(lt)));for(var pt=_t+ct,dt=pt-_t,mt=ct-dt,Qt=mt,xt=pt,bt,kt,Lt,Ht,Pt;tt<g&&rt<_;)at<gt?(_t=At,tt+=1,tt<g&&(At=h[tt],at=nt(At))):(_t=lt,rt+=1,rt<_&&(lt=-d[rt],gt=nt(lt))),ct=Qt,pt=_t+ct,dt=pt-_t,mt=ct-dt,mt&&($[et++]=mt),bt=xt+pt,kt=bt-xt,Lt=bt-kt,Ht=pt-kt,Pt=xt-Lt,Qt=Pt+Ht,xt=bt;for(;tt<g;)_t=At,ct=Qt,pt=_t+ct,dt=pt-_t,mt=ct-dt,mt&&($[et++]=mt),bt=xt+pt,kt=bt-xt,Lt=bt-kt,Ht=pt-kt,Pt=xt-Lt,Qt=Pt+Ht,xt=bt,tt+=1,tt<g&&(At=h[tt]);for(;rt<_;)_t=lt,ct=Qt,pt=_t+ct,dt=pt-_t,mt=ct-dt,mt&&($[et++]=mt),bt=xt+pt,kt=bt-xt,Lt=bt-kt,Ht=pt-kt,Pt=xt-Lt,Qt=Pt+Ht,xt=bt,rt+=1,rt<_&&(lt=-d[rt]);return Qt&&($[et++]=Qt),xt&&($[et++]=xt),et||($[et++]=0),$.length=et,$}return robustDiff}var hasRequiredOrientation;function requireOrientation(){return hasRequiredOrientation||(hasRequiredOrientation=1,function(s){var o=requireTwoProduct(),h=requireRobustSum(),d=requireRobustScale(),g=requireRobustDiff(),_=5,b=11102230246251565e-32,$=(3+16*b)*b,et=(7+56*b)*b;function tt(dt,mt,Qt,xt){return function(bt,kt,Lt){var Ht=dt(dt(mt(kt[1],Lt[0]),mt(-Lt[1],kt[0])),dt(mt(bt[1],kt[0]),mt(-kt[1],bt[0]))),Pt=dt(mt(bt[1],Lt[0]),mt(-Lt[1],bt[0])),jt=xt(Ht,Pt);return jt[jt.length-1]}}function rt(dt,mt,Qt,xt){return function(bt,kt,Lt,Ht){var Pt=dt(dt(Qt(dt(mt(Lt[1],Ht[0]),mt(-Ht[1],Lt[0])),kt[2]),dt(Qt(dt(mt(kt[1],Ht[0]),mt(-Ht[1],kt[0])),-Lt[2]),Qt(dt(mt(kt[1],Lt[0]),mt(-Lt[1],kt[0])),Ht[2]))),dt(Qt(dt(mt(kt[1],Ht[0]),mt(-Ht[1],kt[0])),bt[2]),dt(Qt(dt(mt(bt[1],Ht[0]),mt(-Ht[1],bt[0])),-kt[2]),Qt(dt(mt(bt[1],kt[0]),mt(-kt[1],bt[0])),Ht[2])))),jt=dt(dt(Qt(dt(mt(Lt[1],Ht[0]),mt(-Ht[1],Lt[0])),bt[2]),dt(Qt(dt(mt(bt[1],Ht[0]),mt(-Ht[1],bt[0])),-Lt[2]),Qt(dt(mt(bt[1],Lt[0]),mt(-Lt[1],bt[0])),Ht[2]))),dt(Qt(dt(mt(kt[1],Lt[0]),mt(-Lt[1],kt[0])),bt[2]),dt(Qt(dt(mt(bt[1],Lt[0]),mt(-Lt[1],bt[0])),-kt[2]),Qt(dt(mt(bt[1],kt[0]),mt(-kt[1],bt[0])),Lt[2])))),Vt=xt(Pt,jt);return Vt[Vt.length-1]}}function nt(dt,mt,Qt,xt){return function(bt,kt,Lt,Ht,Pt){var jt=dt(dt(dt(Qt(dt(Qt(dt(mt(Ht[1],Pt[0]),mt(-Pt[1],Ht[0])),Lt[2]),dt(Qt(dt(mt(Lt[1],Pt[0]),mt(-Pt[1],Lt[0])),-Ht[2]),Qt(dt(mt(Lt[1],Ht[0]),mt(-Ht[1],Lt[0])),Pt[2]))),kt[3]),dt(Qt(dt(Qt(dt(mt(Ht[1],Pt[0]),mt(-Pt[1],Ht[0])),kt[2]),dt(Qt(dt(mt(kt[1],Pt[0]),mt(-Pt[1],kt[0])),-Ht[2]),Qt(dt(mt(kt[1],Ht[0]),mt(-Ht[1],kt[0])),Pt[2]))),-Lt[3]),Qt(dt(Qt(dt(mt(Lt[1],Pt[0]),mt(-Pt[1],Lt[0])),kt[2]),dt(Qt(dt(mt(kt[1],Pt[0]),mt(-Pt[1],kt[0])),-Lt[2]),Qt(dt(mt(kt[1],Lt[0]),mt(-Lt[1],kt[0])),Pt[2]))),Ht[3]))),dt(Qt(dt(Qt(dt(mt(Lt[1],Ht[0]),mt(-Ht[1],Lt[0])),kt[2]),dt(Qt(dt(mt(kt[1],Ht[0]),mt(-Ht[1],kt[0])),-Lt[2]),Qt(dt(mt(kt[1],Lt[0]),mt(-Lt[1],kt[0])),Ht[2]))),-Pt[3]),dt(Qt(dt(Qt(dt(mt(Ht[1],Pt[0]),mt(-Pt[1],Ht[0])),kt[2]),dt(Qt(dt(mt(kt[1],Pt[0]),mt(-Pt[1],kt[0])),-Ht[2]),Qt(dt(mt(kt[1],Ht[0]),mt(-Ht[1],kt[0])),Pt[2]))),bt[3]),Qt(dt(Qt(dt(mt(Ht[1],Pt[0]),mt(-Pt[1],Ht[0])),bt[2]),dt(Qt(dt(mt(bt[1],Pt[0]),mt(-Pt[1],bt[0])),-Ht[2]),Qt(dt(mt(bt[1],Ht[0]),mt(-Ht[1],bt[0])),Pt[2]))),-kt[3])))),dt(dt(Qt(dt(Qt(dt(mt(kt[1],Pt[0]),mt(-Pt[1],kt[0])),bt[2]),dt(Qt(dt(mt(bt[1],Pt[0]),mt(-Pt[1],bt[0])),-kt[2]),Qt(dt(mt(bt[1],kt[0]),mt(-kt[1],bt[0])),Pt[2]))),Ht[3]),dt(Qt(dt(Qt(dt(mt(kt[1],Ht[0]),mt(-Ht[1],kt[0])),bt[2]),dt(Qt(dt(mt(bt[1],Ht[0]),mt(-Ht[1],bt[0])),-kt[2]),Qt(dt(mt(bt[1],kt[0]),mt(-kt[1],bt[0])),Ht[2]))),-Pt[3]),Qt(dt(Qt(dt(mt(Lt[1],Ht[0]),mt(-Ht[1],Lt[0])),kt[2]),dt(Qt(dt(mt(kt[1],Ht[0]),mt(-Ht[1],kt[0])),-Lt[2]),Qt(dt(mt(kt[1],Lt[0]),mt(-Lt[1],kt[0])),Ht[2]))),bt[3]))),dt(Qt(dt(Qt(dt(mt(Lt[1],Ht[0]),mt(-Ht[1],Lt[0])),bt[2]),dt(Qt(dt(mt(bt[1],Ht[0]),mt(-Ht[1],bt[0])),-Lt[2]),Qt(dt(mt(bt[1],Lt[0]),mt(-Lt[1],bt[0])),Ht[2]))),-kt[3]),dt(Qt(dt(Qt(dt(mt(kt[1],Ht[0]),mt(-Ht[1],kt[0])),bt[2]),dt(Qt(dt(mt(bt[1],Ht[0]),mt(-Ht[1],bt[0])),-kt[2]),Qt(dt(mt(bt[1],kt[0]),mt(-kt[1],bt[0])),Ht[2]))),Lt[3]),Qt(dt(Qt(dt(mt(kt[1],Lt[0]),mt(-Lt[1],kt[0])),bt[2]),dt(Qt(dt(mt(bt[1],Lt[0]),mt(-Lt[1],bt[0])),-kt[2]),Qt(dt(mt(bt[1],kt[0]),mt(-kt[1],bt[0])),Lt[2]))),-Ht[3]))))),Vt=dt(dt(dt(Qt(dt(Qt(dt(mt(Ht[1],Pt[0]),mt(-Pt[1],Ht[0])),Lt[2]),dt(Qt(dt(mt(Lt[1],Pt[0]),mt(-Pt[1],Lt[0])),-Ht[2]),Qt(dt(mt(Lt[1],Ht[0]),mt(-Ht[1],Lt[0])),Pt[2]))),bt[3]),Qt(dt(Qt(dt(mt(Ht[1],Pt[0]),mt(-Pt[1],Ht[0])),bt[2]),dt(Qt(dt(mt(bt[1],Pt[0]),mt(-Pt[1],bt[0])),-Ht[2]),Qt(dt(mt(bt[1],Ht[0]),mt(-Ht[1],bt[0])),Pt[2]))),-Lt[3])),dt(Qt(dt(Qt(dt(mt(Lt[1],Pt[0]),mt(-Pt[1],Lt[0])),bt[2]),dt(Qt(dt(mt(bt[1],Pt[0]),mt(-Pt[1],bt[0])),-Lt[2]),Qt(dt(mt(bt[1],Lt[0]),mt(-Lt[1],bt[0])),Pt[2]))),Ht[3]),Qt(dt(Qt(dt(mt(Lt[1],Ht[0]),mt(-Ht[1],Lt[0])),bt[2]),dt(Qt(dt(mt(bt[1],Ht[0]),mt(-Ht[1],bt[0])),-Lt[2]),Qt(dt(mt(bt[1],Lt[0]),mt(-Lt[1],bt[0])),Ht[2]))),-Pt[3]))),dt(dt(Qt(dt(Qt(dt(mt(Lt[1],Pt[0]),mt(-Pt[1],Lt[0])),kt[2]),dt(Qt(dt(mt(kt[1],Pt[0]),mt(-Pt[1],kt[0])),-Lt[2]),Qt(dt(mt(kt[1],Lt[0]),mt(-Lt[1],kt[0])),Pt[2]))),bt[3]),Qt(dt(Qt(dt(mt(Lt[1],Pt[0]),mt(-Pt[1],Lt[0])),bt[2]),dt(Qt(dt(mt(bt[1],Pt[0]),mt(-Pt[1],bt[0])),-Lt[2]),Qt(dt(mt(bt[1],Lt[0]),mt(-Lt[1],bt[0])),Pt[2]))),-kt[3])),dt(Qt(dt(Qt(dt(mt(kt[1],Pt[0]),mt(-Pt[1],kt[0])),bt[2]),dt(Qt(dt(mt(bt[1],Pt[0]),mt(-Pt[1],bt[0])),-kt[2]),Qt(dt(mt(bt[1],kt[0]),mt(-kt[1],bt[0])),Pt[2]))),Lt[3]),Qt(dt(Qt(dt(mt(kt[1],Lt[0]),mt(-Lt[1],kt[0])),bt[2]),dt(Qt(dt(mt(bt[1],Lt[0]),mt(-Lt[1],bt[0])),-kt[2]),Qt(dt(mt(bt[1],kt[0]),mt(-kt[1],bt[0])),Lt[2]))),-Pt[3])))),Xt=xt(jt,Vt);return Xt[Xt.length-1]}}function At(dt){var mt=dt===3?tt:dt===4?rt:nt;return mt(h,o,d,g)}var at=At(3),lt=At(4),gt=[function(){return 0},function(){return 0},function(dt,mt){return mt[0]-dt[0]},function(dt,mt,Qt){var xt=(dt[1]-Qt[1])*(mt[0]-Qt[0]),bt=(dt[0]-Qt[0])*(mt[1]-Qt[1]),kt=xt-bt,Lt;if(xt>0){if(bt<=0)return kt;Lt=xt+bt}else if(xt<0){if(bt>=0)return kt;Lt=-(xt+bt)}else return kt;var Ht=$*Lt;return kt>=Ht||kt<=-Ht?kt:at(dt,mt,Qt)},function(dt,mt,Qt,xt){var bt=dt[0]-xt[0],kt=mt[0]-xt[0],Lt=Qt[0]-xt[0],Ht=dt[1]-xt[1],Pt=mt[1]-xt[1],jt=Qt[1]-xt[1],Vt=dt[2]-xt[2],Xt=mt[2]-xt[2],nr=Qt[2]-xt[2],Ar=kt*jt,ar=Lt*Pt,Wt=Lt*Ht,pr=bt*jt,dr=bt*Pt,yr=kt*Ht,Br=Vt*(Ar-ar)+Xt*(Wt-pr)+nr*(dr-yr),Lr=(Math.abs(Ar)+Math.abs(ar))*Math.abs(Vt)+(Math.abs(Wt)+Math.abs(pr))*Math.abs(Xt)+(Math.abs(dr)+Math.abs(yr))*Math.abs(nr),Ur=et*Lr;return Br>Ur||-Br>Ur?Br:lt(dt,mt,Qt,xt)}];function _t(dt){var mt=gt[dt.length];return mt||(mt=gt[dt.length]=At(dt.length)),mt.apply(void 0,dt)}function ct(dt,mt,Qt,xt,bt,kt,Lt){return function(Ht,Pt,jt,Vt,Xt){switch(arguments.length){case 0:case 1:return 0;case 2:return xt(Ht,Pt);case 3:return bt(Ht,Pt,jt);case 4:return kt(Ht,Pt,jt,Vt);case 5:return Lt(Ht,Pt,jt,Vt,Xt)}for(var nr=new Array(arguments.length),Ar=0;Ar<arguments.length;++Ar)nr[Ar]=arguments[Ar];return dt(nr)}}function pt(){for(;gt.length<=_;)gt.push(At(gt.length));s.exports=ct.apply(void 0,[_t].concat(gt));for(var dt=0;dt<=_;++dt)s.exports[dt]=gt[dt]}pt()}(orientation$1)),orientation$1.exports}var robustPnp,hasRequiredRobustPnp;function requireRobustPnp(){if(hasRequiredRobustPnp)return robustPnp;hasRequiredRobustPnp=1,robustPnp=o;var s=requireOrientation();function o(h,d){for(var g=d[0],_=d[1],b=h.length,$=1,et=b,tt=0,rt=b-1;tt<et;rt=tt++){var nt=h[tt],At=h[rt],at=nt[1],lt=At[1];if(lt<at){if(lt<_&&_<at){var gt=s(nt,At,d);if(gt===0)return 0;$^=0<gt|0}else if(_===at){var _t=h[(tt+1)%b],ct=_t[1];if(at<ct){var gt=s(nt,At,d);if(gt===0)return 0;$^=0<gt|0}}}else if(at<lt){if(at<_&&_<lt){var gt=s(nt,At,d);if(gt===0)return 0;$^=gt<0|0}else if(_===at){var _t=h[(tt+1)%b],ct=_t[1];if(ct<at){var gt=s(nt,At,d);if(gt===0)return 0;$^=gt<0|0}}}else if(_===at){var pt=Math.min(nt[0],At[0]),dt=Math.max(nt[0],At[0]);if(tt===0){for(;rt>0;){var mt=(rt+b-1)%b,Qt=h[mt];if(Qt[1]!==_)break;var xt=Qt[0];pt=Math.min(pt,xt),dt=Math.max(dt,xt),rt=mt}if(rt===0)return pt<=g&&g<=dt?0:1;et=rt+1}for(var bt=h[(rt+b-1)%b][1];tt+1<et;){var Qt=h[tt+1];if(Qt[1]!==_)break;var xt=Qt[0];pt=Math.min(pt,xt),dt=Math.max(dt,xt),tt+=1}if(pt<=g&&g<=dt)return 0;var kt=h[(tt+1)%b][1];g<pt&&bt<_!=kt<_&&($^=1)}}return 2*$-1}return robustPnp}var robustPnpExports=requireRobustPnp();const robustPointInPolygon=getDefaultExportFromCjs(robustPnpExports);function feretDiameters(s={}){const{originalPoints:o=monotoneChainConvexHull.call(this)}=s;if(o.length===0)return{min:0,max:0,minLine:[],maxLine:[],aspectRatio:1};if(o.length===1)return{min:1,max:1,minLine:[o[0],o[0]],maxLine:[o[0],o[0]],aspectRatio:1};const h=new Array(o.length);let d=1/0,g=0,_=[];for(let tt=0;tt<o.length;tt++){let rt=getAngle(o[tt],o[(tt+1)%o.length]);rotate(-rt,o,h);let nt=0,At=[];for(let at=0;at<o.length;at++){let lt=Math.abs(h[tt][1]-h[at][1]);lt>nt&&(nt=lt,At=[],At.push([h[at][0],h[tt][1]],[h[at][0],h[at][1]]))}nt<d&&(d=nt,g=rt,_=At)}rotate(g,_,_);let b=0,$=[],et=0;for(let tt=0;tt<o.length-1;tt++)for(let rt=tt+1;rt<o.length;rt++){let nt=(o[tt][0]-o[rt][0])**2+(o[tt][1]-o[rt][1])**2;nt>et&&(et=nt,b=Math.sqrt(nt),$=[o[tt],o[rt]])}return{min:d,minLine:_,max:b,maxLine:$,aspectRatio:d/b}}function getAngle(s,o){let h=difference(o,s),d=normalize(h),g=Math.acos(d[0]);return d[1]<0?-g:g}class Roi{constructor(o,h){this.map=o,this.id=h,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY,this.meanX=0,this.meanY=0,this.surface=0,this.computed={}}getMask(o={}){const{scale:h=1,kind:d=""}=o;let g;switch(d){case"contour":g=this.contourMask;break;case"box":g=this.boxMask;break;case"filled":g=this.filledMask;break;case"center":g=this.centerMask;break;case"mbr":g=this.mbrFilledMask;break;case"hull":g=this.convexHullFilledMask;break;case"hullContour":g=this.convexHullMask;break;case"mbrContour":g=this.mbrMask;break;case"feret":g=this.feretMask;break;default:g=this.mask}return h<1&&(g=g.resize({factor:h}),g.parent=this.mask.parent,g.position[0]+=this.minX,g.position[1]+=this.minY),g}get mean(){throw new Error("Roi mean not implemented yet")}get center(){return this.computed.center||(this.computed.center=[this.width/2>>0,this.height/2>>0]),this.computed.center}get ratio(){return this.width/this.height}get width(){return this.maxX-this.minX+1}get height(){return this.maxY-this.minY+1}_computExternalIDs(){let o=this.borderIDs,h=this.borderLengths;this.computed.externalIDs=[],this.computed.externalLengths=[];let d=this.internalIDs;for(let g=0;g<o.length;g++)d.includes(o[g])||(this.computed.externalIDs.push(o[g]),this.computed.externalLengths.push(h[g]))}get externalIDs(){return this.computed.externalIDs?this.computed.externalIDs:(this._computExternalIDs(),this.computed.externalIDs)}get externalLengths(){return this.computed.externalLengths?this.computed.externalLengths:(this._computExternalIDs(),this.computed.externalLengths)}_computeBorderIDs(){let o=getBorders(this);this.computed.borderIDs=o.ids,this.computed.borderLengths=o.lengths}get borderIDs(){return this.computed.borderIDs?this.computed.borderIDs:(this._computeBorderIDs(),this.computed.borderIDs)}get borderLengths(){return this.computed.borderLengths?this.computed.borderLengths:(this._computeBorderIDs(),this.computed.borderLengths)}get boxIDs(){return this.computed.boxIDs||(this.computed.boxIDs=getBoxIDs(this)),this.computed.boxIDs}get internalIDs(){return this.computed.internalIDs||(this.computed.internalIDs=getInternalIDs(this)),this.computed.internalIDs}get box(){return this.computed.box||(this.computed.box=getBox(this)),this.computed.box}get external(){return this.computed.external||(this.computed.external=getExternal(this)),this.computed.external}get holesInfo(){return this.computed.holesInfo||(this.computed.holesInfo=getHolesInfo(this)),this.computed.holesInfo}get border(){return this.computed.border||(this.computed.border=getBorder(this)),this.computed.border}get contourMask(){if(!this.computed.contourMask){let o=new Image$1(this.width,this.height,{kind:BINARY,position:[this.minX,this.minY],parent:this.map.parent});for(let h=0;h<this.width;h++)for(let d=0;d<this.height;d++)this.map.data[h+this.minX+(d+this.minY)*this.map.width]===this.id&&(h>0&&h<this.width-1&&d>0&&d<this.height-1?(this.map.data[h-1+this.minX+(d+this.minY)*this.map.width]!==this.id||this.map.data[h+1+this.minX+(d+this.minY)*this.map.width]!==this.id||this.map.data[h+this.minX+(d-1+this.minY)*this.map.width]!==this.id||this.map.data[h+this.minX+(d+1+this.minY)*this.map.width]!==this.id)&&o.setBitXY(h,d):o.setBitXY(h,d));this.computed.contourMask=o}return this.computed.contourMask}get boxMask(){if(!this.computed.boxMask){let o=new Image$1(this.width,this.height,{kind:BINARY,position:[this.minX,this.minY],parent:this.map.parent});for(let h=0;h<this.width;h++)o.setBitXY(h,0),o.setBitXY(h,this.height-1);for(let h=0;h<this.height;h++)o.setBitXY(0,h),o.setBitXY(this.width-1,h);this.computed.boxMask=o}return this.computed.boxMask}get mask(){if(!this.computed.mask){let o=new Image$1(this.width,this.height,{kind:BINARY,position:[this.minX,this.minY],parent:this.map.parent});for(let h=0;h<this.width;h++)for(let d=0;d<this.height;d++)this.map.data[h+this.minX+(d+this.minY)*this.map.width]===this.id&&o.setBitXY(h,d);this.computed.mask=o}return this.computed.mask}get filledMask(){if(!this.computed.filledMask){let o=new Image$1(this.width,this.height,{kind:BINARY,position:[this.minX,this.minY],parent:this.map.parent});for(let h=0;h<this.width;h++)for(let d=0;d<this.height;d++){let g=h+this.minX+(d+this.minY)*this.map.width;this.internalIDs.includes(this.map.data[g])&&o.setBitXY(h,d)}this.computed.filledMask=o}return this.computed.filledMask}get centerMask(){if(!this.computed.centerMask){let o=new Shape({kind:"smallCross"}).getMask();o.parent=this.map.parent,o.position=[this.minX+this.center[0]-1,this.minY+this.center[1]-1],this.computed.centerMask=o}return this.computed.centerMask}get convexHull(){if(!this.computed.convexHull){const o=[];for(let d=0;d<this.width;d++)for(let g=0;g<this.height;g++)this.map.data[d+this.minX+(g+this.minY)*this.map.width]===this.id&&(d>0&&d<this.width-1&&g>0&&g<this.height-1?(this.map.data[d-1+this.minX+(g+this.minY)*this.map.width]!==this.id||this.map.data[d+1+this.minX+(g+this.minY)*this.map.width]!==this.id||this.map.data[d+this.minX+(g-1+this.minY)*this.map.width]!==this.id||this.map.data[d+this.minX+(g+1+this.minY)*this.map.width]!==this.id)&&(o.push([d,g]),o.push([d+1,g]),o.push([d,g+1]),o.push([d+1,g+1])):(o.push([d,g]),o.push([d+1,g]),o.push([d,g+1]),o.push([d+1,g+1])));const h=monotoneChainConvexHull$1(o);this.computed.convexHull={polyline:h,surface:surface(h),perimeter:perimeter(h)}}return this.computed.convexHull}get convexHullMask(){if(!this.computed.convexHullMask){const o=this.convexHull,h=new Image$1(this.width+1,this.height+1,{kind:BINARY,position:[this.minX,this.minY],parent:this.map.parent});h.paintPolyline(o.polyline,{closed:!0}),this.computed.convexHullMask=h}return this.computed.convexHullMask}get convexHullFilledMask(){if(!this.computed.convexHullFilledMask){const o=this.convexHull,h=new Image$1(this.width,this.height,{kind:BINARY,position:[this.minX,this.minY],parent:this.map.parent});for(let d=0;d<this.width;d++)for(let g=0;g<this.height;g++)robustPointInPolygon(o.polyline,[d,g])!==1&&h.setBitXY(d,g);this.computed.convexHullFilledMask=h}return this.computed.convexHullFilledMask}get mbr(){if(!this.computed.mbr){let o=minimalBoundingRectangle({originalPoints:this.convexHull.polyline});if(o.length===0)this.computed.mbr={width:0,height:0,surface:0,perimeter:0,rectangle:o};else{let h=o[0],d=o[1],g=o[2],_=Math.sqrt((h[0]-d[0])**2+(h[1]-d[1])**2),b=Math.sqrt((g[0]-d[0])**2+(g[1]-d[1])**2);this.computed.mbr={width:_,height:b,elongation:1-_/b,aspectRatio:_/b,surface:_*b,perimeter:(_+b)*2,rectangle:o}}}return this.computed.mbr}get filledSurface(){return this.surface+this.holesInfo.surface}get fillRatio(){return this.surface/(this.surface+this.holesInfo.surface)}get feretDiameters(){return this.computed.feretDiameters||(this.computed.feretDiameters=feretDiameters({originalPoints:this.convexHull.polyline})),this.computed.feretDiameters}get eqpc(){return this.computed.eqpc||(this.computed.eqpc=2*Math.sqrt(this.surface/Math.PI)),this.computed.eqpc}get perimeterInfo(){return this.computed.perimeterInfo||(this.computed.perimeterInfo=getPerimeterInfo(this)),this.computed.perimeterInfo}get perimeter(){let o=this.perimeterInfo,h=2-Math.sqrt(2);return o.one+o.two*2+o.three*3+o.four*4-h*(o.two+o.three*2+o.four)}get ped(){return this.computed.ped||(this.computed.ped=this.perimeter/Math.PI),this.computed.ped}get feretMask(){if(!this.computed.feretMask){const o=new Image$1(this.width+1,this.height+1,{kind:BINARY,position:[this.minX,this.minY],parent:this.map.parent});o.paintPolyline(this.feretDiameters.minLine),o.paintPolyline(this.feretDiameters.maxLine),this.computed.feretMask=o}return this.computed.feretMask}get mbrMask(){if(!this.computed.mbrMask){let o=round(this.mbr.rectangle);if(o.length>0){const h=minMax(o),d=new Image$1(h[1][0]-h[0][0]+1,h[1][1]-h[0][1]+1,{kind:BINARY,position:[this.minX+h[0][0],this.minY+h[0][1]],parent:this.map.parent});o=moveToZeroZero(o),d.paintPolyline(o,{closed:!0}),this.computed.mbrMask=d}else this.computed.mbrMask=new Image$1(1,1,{kind:BINARY,position:[this.minX,this.minY],parent:this.map.parent})}return this.computed.mbrMask}get mbrFilledMask(){if(!this.computed.mbrFilledMask){const o=new Image$1(this.width,this.height,{kind:BINARY,position:[this.minX,this.minY],parent:this.map.parent}),h=this.mask.minimalBoundingRectangle();for(let d=0;d<this.width;d++)for(let g=0;g<this.height;g++)robustPointInPolygon(h,[d,g])!==1&&o.setBitXY(d,g);this.computed.mbrFilledMask=o}return this.computed.mbrFilledMask}get points(){if(!this.computed.points){let o=[];for(let h=0;h<this.height;h++)for(let d=0;d<this.width;d++){let g=(h+this.minY)*this.map.width+d+this.minX;this.map.data[g]===this.id&&o.push([d,h])}this.computed.points=o}return this.computed.points}get maxLengthPoints(){if(!this.computed.maxLengthPoints){let o=0,h;const d=this.points;for(let g=0;g<d.length;g++)for(let _=g+1;_<d.length;_++){let b=Math.pow(d[g][0]-d[_][0],2)+Math.pow(d[g][1]-d[_][1],2);b>=o&&(o=b,h=[d[g],d[_]])}this.computed.maxLengthPoints=h}return this.computed.maxLengthPoints}get maxLength(){if(!this.computed.maxLength){let o=Math.sqrt(Math.pow(this.maxLengthPoints[0][0]-this.maxLengthPoints[1][0],2)+Math.pow(this.maxLengthPoints[0][1]-this.maxLengthPoints[1][1],2));this.computed.maxLength=o}return this.computed.maxLength}get roundness(){return 4*this.surface/(Math.PI*this.feretDiameters.max**2)}get sphericity(){return 2*Math.sqrt(this.surface*Math.PI)/this.perimeter}get solidity(){return this.surface/this.convexHull.surface}get angle(){if(!this.computed.angle){let o=this.maxLengthPoints,h=-Math.atan2(o[0][1]-o[1][1],o[0][0]-o[1][0])*180/Math.PI;this.computed.angle=h}return this.computed.angle}toJSON(){return{id:this.id,minX:this.minX,maxX:this.maxX,minY:this.minY,maxY:this.maxY,meanX:this.meanX,meanY:this.meanY,height:this.height,width:this.width,filledSurface:this.filledSurface,surface:this.surface,hullSurface:this.convexHull.surface,hullPerimeter:this.convexHull.perimeter,mbrWidth:this.mbr.width,mbrHeight:this.mbr.height,mbrSurface:this.mbr.surface,eqpc:this.eqpc,ped:this.ped,feretDiameterMin:this.feretDiameters.min,feretDiameterMax:this.feretDiameters.max,aspectRatio:this.feretDiameters.aspectRatio,fillRatio:this.fillRatio,sphericity:this.sphericity,roundness:this.roundness,solidity:this.solidity,perimeter:this.perimeter}}}function getBorders(s){let o=s.map,h=o.data,d=new Set,g=new Map,_=new Set,b=[1,0,-1,0],$=[0,1,0,-1];for(let rt=s.minX;rt<=s.maxX;rt++)for(let nt=s.minY;nt<=s.maxY;nt++){let At=rt+nt*o.width;if(h[At]===s.id)for(let at=0;at<4;at++){let lt=rt+b[at],gt=nt+$[at];if(lt>=0&&gt>=0&&lt<o.width&&gt<o.height){let _t=lt+gt*o.width;if(h[_t]!==s.id&&!_.has(_t)){_.add(_t),d.add(h[_t]);let ct=g.get(h[_t]);ct?g.set(h[_t],++ct):g.set(h[_t],1)}}}}let et=Array.from(d),tt=et.map(function(rt){return g.get(rt)});return{ids:et,lengths:tt}}function getBoxIDs(s){let o=new Set,h=s.map,d=h.data;for(let g of[0,s.height-1])for(let _=0;_<s.width;_++){let b=(g+s.minY)*h.width+_+s.minX;if(_-s.minX>0&&d[b]===s.id&&d[b-1]!==s.id){let $=d[b-1];o.add($)}if(h.width-_-s.minX>1&&d[b]===s.id&&d[b+1]!==s.id){let $=d[b+1];o.add($)}}for(let g of[0,s.width-1])for(let _=0;_<s.height;_++){let b=(_+s.minY)*h.width+g+s.minX;if(_-s.minY>0&&d[b]===s.id&&d[b-h.width]!==s.id){let $=d[b-h.width];o.add($)}if(h.height-_-s.minY>1&&d[b]===s.id&&d[b+h.width]!==s.id){let $=d[b+h.width];o.add($)}}return Array.from(o)}function getBox(s){let o=0,h=s.map,d=h.data,g=[0];s.height>1&&(g[1]=s.height-1);for(let b of g)for(let $=1;$<s.width-1;$++){let et=(b+s.minY)*h.width+$+s.minX;d[et]===s.id&&o++}let _=[0];s.width>1&&(_[1]=s.width-1);for(let b of _)for(let $=0;$<s.height;$++){let et=($+s.minY)*h.width+b+s.minX;d[et]===s.id&&o++}return o}function getBorder(s){let o=0,h=s.map,d=h.data;for(let g=1;g<s.width-1;g++)for(let _=1;_<s.height-1;_++){let b=(_+s.minY)*h.width+g+s.minX;d[b]===s.id&&(d[b-1]!==s.id||d[b+1]!==s.id||d[b-h.width]!==s.id||d[b+h.width]!==s.id)&&o++}return o+s.box}function getPerimeterInfo(s){let o=s.map,h=o.data,d=0,g=0,_=0,b=0;for(let $=0;$<s.width;$++)for(let et=0;et<s.height;et++){let tt=(et+s.minY)*o.width+$+s.minX;if(h[tt]===s.id){let rt=0;switch(($===0||s.externalIDs.includes(h[tt-1]))&&rt++,($===s.width-1||s.externalIDs.includes(h[tt+1]))&&rt++,(et===0||s.externalIDs.includes(h[tt-o.width]))&&rt++,(et===s.height-1||s.externalIDs.includes(h[tt+o.width]))&&rt++,rt){case 1:d++;break;case 2:g++;break;case 3:_++;break;case 4:b++;break}}}return{one:d,two:g,three:_,four:b}}function getExternal(s){let o=0,h=s.map,d=h.data;for(let g=1;g<s.width-1;g++)for(let _=1;_<s.height-1;_++){let b=(_+s.minY)*h.width+g+s.minX;d[b]===s.id&&(s.externalIDs.includes(d[b-1])||s.externalIDs.includes(d[b+1])||s.externalIDs.includes(d[b-h.width])||s.externalIDs.includes(d[b+h.width]))&&o++}return o+s.box}function getHolesInfo(s){let o=0,h=s.map.width,d=s.map.data;for(let g=1;g<s.width-1;g++)for(let _=1;_<s.height-1;_++){let b=(_+s.minY)*h+g+s.minX;s.internalIDs.includes(d[b])&&d[b]!==s.id&&o++}return{number:s.internalIDs.length-1,surface:o}}function getInternalIDs(s){let o=[s.id],h=s.map,d=h.data;if(s.height>2)for(let _=0;_<s.width;_++){let b=s.minY*h.width+_+s.minX;if(o.includes(d[b])){let $=d[b+h.width];!o.includes($)&&!s.boxIDs.includes($)&&o.push($)}}let g=new Array(4);for(let _=1;_<s.width-1;_++)for(let b=1;b<s.height-1;b++){let $=(b+s.minY)*h.width+_+s.minX;if(o.includes(d[$])){g[0]=d[$-1],g[1]=d[$+1],g[2]=d[$-h.width],g[3]=d[$+h.width];for(let et=0;et<4;et++){let tt=g[et];!o.includes(tt)&&!s.boxIDs.includes(tt)&&o.push(tt)}}}return o}class RoiLayer{constructor(o,h){this.roiMap=o,this.options=h,this.roi=this.createRoi()}createRoi(){let o=this.roiMap.data,h={};this.roiMap.positive=0,this.roiMap.negative=0;for(let $=0;$<o.length;$++)o[$]&&!h[o[$]]&&(h[o[$]]=!0,o[$]>0?this.roiMap.positive++:this.roiMap.negative++);let d={};for(let $ in h)d[$]=new Roi(this.roiMap,$*1);let g=this.roiMap.width,_=this.roiMap.height;for(let $=0;$<_;$++)for(let et=0;et<g;et++){let tt=$*g+et;if(o[tt]!==0){const rt=o[tt],nt=d[rt];et<nt.minX&&(nt.minX=et),et>nt.maxX&&(nt.maxX=et),$<nt.minY&&(nt.minY=$),$>nt.maxY&&(nt.maxY=$),nt.meanX+=et,nt.meanY+=$,nt.surface++}}let b=[];for(let $ in h)d[$].meanX/=d[$].surface,d[$].meanY/=d[$].surface,b.push(d[$]);return b}}function commonBorderLength(s){let o=s.data,h=[1,0,-1,0],d=[0,1,0,-1],g=s.minMax,_=-g.min,b=g.max+_,$=[];for(let tt=0;tt<=b;tt++)$.push(Object.create(null));for(let tt=0;tt<s.width;tt++)for(let rt=0;rt<s.height;rt++){let nt=tt+rt*s.width,At=o[nt];if(At!==0){let at=Object.create(null),lt=!1;for(let gt=0;gt<4;gt++){let _t=tt+h[gt],ct=rt+d[gt];if(_t>=0&&ct>=0&&_t<s.width&&ct<s.height){let pt=o[_t+ct*s.width];At!==pt&&(lt=!0,pt!==0&&at[pt]===void 0&&(at[pt]=!0,$[pt+_][At]?$[pt+_][At]++:$[pt+_][At]=1))}else lt=!0}lt&&($[At+_][At]?$[At+_][At]++:$[At+_][At]=1)}}let et={};for(let tt=0;tt<$.length;tt++)Object.keys($[tt]).length>0&&(et[tt-_]=$[tt]);return et}function mergeRoi(s={}){const{algorithm:o="commonBorderLength",minCommonBorderLength:h=5,maxCommonBorderLength:d=100,minCommonBorderRatio:g=.3,maxCommonBorderRatio:_=1}=s;let b=function(_t,ct,pt){return _t[pt]>=h&&_t[pt]<=d};typeof o=="function"&&(b=o),o.toLowerCase()==="commonborderratio"&&(b=function(_t,ct,pt){let dt=Math.min(_t[pt]/_t[ct],1);return dt>=g&&dt<=_});const $=this,et=$.commonBorderLength;let tt={},rt={};for(let _t of Object.keys(et)){let ct=et[_t],pt=Object.keys(ct);for(let dt of pt)if(dt!==_t&&b(ct,_t,dt)){let mt=dt;rt[dt]&&(mt=rt[dt]);let Qt=_t;if(rt[_t]&&(Qt=rt[_t]),Number(mt)!==Qt){let xt=Math.min(mt,Qt),bt=Math.max(mt,Qt);if(tt[xt]||(tt[xt]={}),tt[xt][bt]=!0,rt[bt]=xt,tt[bt]){for(let kt of Object.keys(tt[bt]))tt[xt][kt]=!0,rt[kt]=xt;delete tt[bt]}}}}let nt=$.minMax,At=-nt.min,at=nt.max+At,lt=new Array(at+1).fill(0);for(let _t of Object.keys(rt))lt[Number(_t)+At]=rt[_t];let gt=$.data;for(let _t=0;_t<gt.length;_t++){let ct=gt[_t];if(ct!==0){let pt=lt[ct+At];pt!==0&&(gt[_t]=pt)}}return $.computed={},$}class RoiMap{constructor(o,h){this.parent=o,this.width=o.width,this.height=o.height,this.data=h,this.negative=0,this.positive=0}get total(){return this.negative+this.positive}get minMax(){let o=Number.MAX_SAFE_INTEGER,h=Number.MIN_SAFE_INTEGER;for(let d=0;d<this.data.length;d++)this.data[d]<o&&(o=this.data[d]),this.data[d]>h&&(h=this.data[d]);return{min:o,max:h}}get commonBorderLength(){return commonBorderLength(this)}mergeRoi(o={}){return mergeRoi.call(this,o)}mergeRois(o){const h=o[0],d=o.slice(1);for(let g=0;g<this.data.length;g++)d.includes(this.data[g])&&(this.data[g]=h)}rowsInfo(){let o=new Array(this.height),h=0;for(let d=0;d<this.data.length;d+=this.width){let g={row:h,positivePixel:0,negativePixel:0,zeroPixel:0,positiveRoi:0,negativeRoi:0,medianChange:0};o[h++]=g;let _={},b={},$=[],et=this.data[d],tt=0;for(let rt=d;rt<d+this.width;rt++){let nt=this.data[rt];et!==nt&&(et=nt,$.push(tt),tt=0),tt++,nt>0?(g.positivePixel++,_[nt]||(_[nt]=!0)):nt<0?(g.negativePixel++,b[nt]||(b[nt]=!0)):g.zeroPixel++}$.push(tt),g.medianChange=$.sort((rt,nt)=>rt-nt)[Math.floor($.length/2)],g.positiveRoiIDs=Object.keys(_),g.negativeRoiIDs=Object.keys(b),g.positiveRoi=g.positiveRoiIDs.length,g.negativeRoi=g.negativeRoiIDs.length}return o}colsInfo(){let o=new Array(this.width),h=0;for(let d=0;d<this.width;d++){let g={col:h,positivePixel:0,negativePixel:0,zeroPixel:0,positiveRoi:0,negativeRoi:0,medianChange:0};o[h++]=g;let _={},b={},$=[],et=this.data[d],tt=0;for(let rt=d;rt<d+this.data.length;rt+=this.width){let nt=this.data[rt];et!==nt&&(et=nt,$.push(tt),tt=0),tt++,nt>0?(g.positivePixel++,_[nt]||(_[nt]=!0)):nt<0?(g.negativePixel++,b[nt]||(b[nt]=!0)):g.zeroPixel++}$.push(tt),g.medianChange=$.sort((rt,nt)=>rt-nt)[Math.floor($.length/2)],g.positiveRoiIDs=Object.keys(_),g.negativeRoiIDs=Object.keys(b),g.positiveRoi=g.positiveRoiIDs.length,g.negativeRoi=g.negativeRoiIDs.length}return o}}function fromMask(s,o={}){const{allowCorners:h=!1}=o,d=65535;let g=new Int16Array(s.size),_=0,b=0,$=new Uint16Array(d+1),et=new Uint16Array(d+1);for(let rt=0;rt<s.width;rt++)for(let nt=0;nt<s.height;nt++)g[nt*s.width+rt]===0&&tt(rt,nt);function tt(rt,nt){let At=0,at=0,lt=s.getBitXY(rt,nt),gt=lt?++_:--b;if(_>32767||b<-32768)throw new Error("Too many regions of interest");for($[0]=rt,et[0]=nt;At<=at;){let _t=$[At&d],ct=et[At&d];if(g[ct*s.width+_t]=gt,_t>0&&g[ct*s.width+_t-1]===0&&s.getBitXY(_t-1,ct)===lt&&(at++,$[at&d]=_t-1,et[at&d]=ct,g[ct*s.width+_t-1]=-32768),ct>0&&g[(ct-1)*s.width+_t]===0&&s.getBitXY(_t,ct-1)===lt&&(at++,$[at&d]=_t,et[at&d]=ct-1,g[(ct-1)*s.width+_t]=-32768),_t<s.width-1&&g[ct*s.width+_t+1]===0&&s.getBitXY(_t+1,ct)===lt&&(at++,$[at&d]=_t+1,et[at&d]=ct,g[ct*s.width+_t+1]=-32768),ct<s.height-1&&g[(ct+1)*s.width+_t]===0&&s.getBitXY(_t,ct+1)===lt&&(at++,$[at&d]=_t,et[at&d]=ct+1,g[(ct+1)*s.width+_t]=-32768),h&&(_t>0&&ct>0&&g[(ct-1)*s.width+_t-1]===0&&s.getBitXY(_t-1,ct-1)===lt&&(at++,$[at&d]=_t-1,et[at&d]=ct-1,g[(ct-1)*s.width+_t-1]=-32768),_t<s.width-1&&ct>0&&g[(ct-1)*s.width+_t+1]===0&&s.getBitXY(_t+1,ct-1)===lt&&(at++,$[at&d]=_t+1,et[at&d]=ct-1,g[(ct-1)*s.width+_t+1]=-32768),_t>0&&ct<s.height-1&&g[(ct+1)*s.width+_t-1]===0&&s.getBitXY(_t-1,ct+1)===lt&&(at++,$[at&d]=_t-1,et[at&d]=ct+1,g[(ct+1)*s.width+_t-1]=-32768),_t<s.width-1&&ct<s.height-1&&g[(ct+1)*s.width+_t+1]===0&&s.getBitXY(_t+1,ct+1)===lt&&(at++,$[at&d]=_t+1,et[at&d]=ct+1,g[(ct+1)*s.width+_t+1]=-32768)),At++,at-At>d)throw new Error("analyseMask can not finish, the array to manage internal data is not big enough.You could improve mask by changing MAX_ARRAY")}}return new RoiMap(s,g)}var DisjointSet_1,hasRequiredDisjointSet;function requireDisjointSet(){if(hasRequiredDisjointSet)return DisjointSet_1;hasRequiredDisjointSet=1;class s{constructor(){this.nodes=new Map}add(d){var g=this.nodes.get(d);return g||(g=new o(d),this.nodes.set(d,g)),g}union(d,g){const _=this.find(d),b=this.find(g);_!==b&&(_.rank<b.rank?_.parent=b:_.rank>b.rank?b.parent=_:(b.parent=_,_.rank++))}find(d){for(var g=d;g.parent!==null;)g=g.parent;for(var _=d;_.parent!==null;){var b=_;_=_.parent,b.parent=g}return g}connected(d,g){return this.find(d)===this.find(g)}}DisjointSet_1=s;function o(h){this.value=h,this.parent=null,this.rank=0}return DisjointSet_1}var DisjointSetExports=requireDisjointSet();const DisjointSet=getDefaultExportFromCjs(DisjointSetExports),direction4X=[-1,0],direction4Y=[0,-1],neighbours4=[null,null],direction8X=[-1,-1,0,1],direction8Y=[0,-1,-1,-1],neighbours8=[null,null,null,null];function fromMaskConnectedComponentLabelingAlgorithm(s,o={}){const{allowCorners:h=!1}=o;let d=4;h&&(d=8);let g,_,b;if(d===8)g=direction8X,_=direction8Y,b=neighbours8;else if(d===4)g=direction4X,_=direction4Y,b=neighbours4;else throw new RangeError(`unsupported neighbours count: ${d}`);const $=s.size,et=s.width,tt=s.height,rt=new Array($),nt=new Uint32Array($),At=new DisjointSet;let at=1;for(let lt=0;lt<tt;lt++)for(let gt=0;gt<et;gt++){const _t=gt+lt*et;if(s.getBit(_t)){let ct=null;for(let pt=0;pt<b.length;pt++){const dt=gt+g[pt],mt=lt+_[pt];if(dt>=0&&mt>=0&&dt<et&&mt<tt){const Qt=dt+mt*et;let xt=rt[Qt];xt?(b[pt]=xt,(!ct||b[pt].value<ct.value)&&(ct=b[pt])):b[pt]=null}}if(!ct)rt[_t]=At.add(at++);else{rt[_t]=ct;for(let pt=0;pt<b.length;pt++)b[pt]&&b[pt]!==ct&&At.union(ct,b[pt])}}}for(let lt=0;lt<tt;lt++)for(let gt=0;gt<et;gt++){const _t=gt+lt*et;s.getBit(_t)&&(nt[_t]=At.find(rt[_t]).value)}return new RoiMap(s,nt)}function fromMaxima(s={}){let{allowCorner:o=!0,onlyTop:h=!1,invert:d=!1}=s,g=this;g.checkProcessable("fromMaxima",{components:[1]});const _=1,b=2;let $=0,et=0,tt=new Int16Array(g.size),rt=new Int8Array(g.size),nt=new Float32Array(g.size),At=1048575,at=new Uint16Array(At+1),lt=new Uint16Array(At+1),gt=0,_t=0,ct=new Uint16Array(At+1),pt=new Uint16Array(At+1),dt=0,mt=0;for(Qt(g);gt<_t;){let kt=at[gt&At],Lt=lt[gt&At];bt(kt,Lt,b),gt++}return new RoiMap(g,tt);function Qt({maxima:kt=!0}){for(let Lt=1;Lt<g.height-1;Lt++)for(let Ht=1;Ht<g.width-1;Ht++){let Pt=Ht+Lt*g.width;if(rt[Pt]===0){let jt=kt?g.data[Pt]:-g.data[Ht+Lt*g.width];if(g.data[Lt*g.width+Ht-1]>jt||g.data[Lt*g.width+Ht+1]>jt||g.data[(Lt-1)*g.width+Ht]>jt||g.data[(Lt+1)*g.width+Ht]>jt||o&&(g.data[(Lt-1)*g.width+Ht-1]>jt||g.data[(Lt-1)*g.width+Ht+1]>jt||g.data[(Lt+1)*g.width+Ht-1]>jt||g.data[(Lt+1)*g.width+Ht+1]>jt))continue;tt[Pt]=kt?++$:--et,xt(Ht,Lt)||(kt?--$:++et)}}}function xt(kt,Lt){let Ht=_t;dt=0,mt=1,ct[0]=kt,pt[0]=Lt;let Pt=!0;for(;dt<mt;){let jt=ct[dt&At],Vt=pt[dt&At];Pt&=bt(jt,Vt,_),dt++}if(!Pt){for(let jt=0;jt<mt;jt++){let Vt=ct[jt&At],Xt=pt[jt&At]*g.width+Vt;tt[Xt]=0}_t=Ht}return Pt}function bt(kt,Lt,Ht){let Pt=tt[Lt*g.width+kt],jt=g.data[Lt*g.width+kt];for(let Vt=Lt-1;Vt<=Lt+1;Vt++)for(let Xt=kt-1;Xt<=kt+1;Xt++){let nr=Vt*g.width+Xt;if(rt[nr]===0)switch(rt[nr]=1,nt[nr]=g.data[nr]-jt,Ht){case _:if(nt[nr]===0){if(Xt===0||Vt===0||Xt===g.width-1||Vt===g.height-1)return!1;tt[nr]=Pt,ct[mt&At]=Xt,pt[mt&At]=Vt,mt++}else{if(nt[nr]>0)return!1;h||(tt[nr]=Pt,at[_t&At]=Xt,lt[_t&At]=Vt,_t++)}break;case b:nt[nr]<=0&&(tt[nr]=Pt,at[_t&At]=Xt,lt[_t&At]=Vt,_t++);break;default:throw new Error("unreachable")}}return!0}}function fromPoints(s,o={}){let h=new Shape(o),d=new Int16Array(this.size),g=0,_=h.getPoints();for(let b=0;b<s.length;b++){g++;let $=s[b][0],et=s[b][1];for(let tt=0;tt<_.length;tt++){let rt=_[tt][0],nt=_[tt][1];$+rt>=0&&et+nt>=0&&$+rt<this.width&&et+nt<this.height&&(d[$+rt+(et+nt)*this.width]=g)}}return new RoiMap(this,d)}function commonjsRequire(s){throw new Error('Could not dynamically require "'+s+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var priorityQueue={exports:{}},hasRequiredPriorityQueue;function requirePriorityQueue(){return hasRequiredPriorityQueue||(hasRequiredPriorityQueue=1,function(s,o){(function(h){s.exports=h()})(function(){return function h(d,g,_){function b(tt,rt){if(!g[tt]){if(!d[tt]){var nt=typeof commonjsRequire=="function"&&commonjsRequire;if(!rt&&nt)return nt(tt,!0);if($)return $(tt,!0);var At=new Error("Cannot find module '"+tt+"'");throw At.code="MODULE_NOT_FOUND",At}var at=g[tt]={exports:{}};d[tt][0].call(at.exports,function(lt){var gt=d[tt][1][lt];return b(gt||lt)},at,at.exports,h,d,g,_)}return g[tt].exports}for(var $=typeof commonjsRequire=="function"&&commonjsRequire,et=0;et<_.length;et++)b(_[et]);return b}({1:[function(h,d,g){var _,b,$,et,tt,rt=function(At,at){for(var lt in at)nt.call(at,lt)&&(At[lt]=at[lt]);function gt(){this.constructor=At}return gt.prototype=at.prototype,At.prototype=new gt,At.__super__=at.prototype,At},nt={}.hasOwnProperty;_=h("./PriorityQueue/AbstractPriorityQueue"),b=h("./PriorityQueue/ArrayStrategy"),et=h("./PriorityQueue/BinaryHeapStrategy"),$=h("./PriorityQueue/BHeapStrategy"),tt=function(At){rt(at,At);function at(lt){lt||(lt={}),lt.strategy||(lt.strategy=et),lt.comparator||(lt.comparator=function(gt,_t){return(gt||0)-(_t||0)}),at.__super__.constructor.call(this,lt)}return at}(_),tt.ArrayStrategy=b,tt.BinaryHeapStrategy=et,tt.BHeapStrategy=$,d.exports=tt},{"./PriorityQueue/AbstractPriorityQueue":2,"./PriorityQueue/ArrayStrategy":3,"./PriorityQueue/BHeapStrategy":4,"./PriorityQueue/BinaryHeapStrategy":5}],2:[function(h,d,g){d.exports=function(){function _(b){var $;if((b!=null?b.strategy:void 0)==null)throw"Must pass options.strategy, a strategy";if((b!=null?b.comparator:void 0)==null)throw"Must pass options.comparator, a comparator";this.priv=new b.strategy(b),this.length=(b!=null&&($=b.initialValues)!=null?$.length:void 0)||0}return _.prototype.queue=function(b){this.length++,this.priv.queue(b)},_.prototype.dequeue=function(b){if(!this.length)throw"Empty queue";return this.length--,this.priv.dequeue()},_.prototype.peek=function(b){if(!this.length)throw"Empty queue";return this.priv.peek()},_.prototype.clear=function(){return this.length=0,this.priv.clear()},_}()},{}],3:[function(h,d,g){var _;_=function(b,$,et){var tt,rt,nt;for(rt=0,tt=b.length;rt<tt;)nt=rt+tt>>>1,et(b[nt],$)>=0?rt=nt+1:tt=nt;return rt},d.exports=function(){function b($){var et;this.options=$,this.comparator=this.options.comparator,this.data=((et=this.options.initialValues)!=null?et.slice(0):void 0)||[],this.data.sort(this.comparator).reverse()}return b.prototype.queue=function($){var et;et=_(this.data,$,this.comparator),this.data.splice(et,0,$)},b.prototype.dequeue=function(){return this.data.pop()},b.prototype.peek=function(){return this.data[this.data.length-1]},b.prototype.clear=function(){this.data.length=0},b}()},{}],4:[function(h,d,g){d.exports=function(){function _(b){var $,et,tt,rt,nt,At,at,lt;for(this.comparator=(b!=null?b.comparator:void 0)||function(gt,_t){return gt-_t},this.pageSize=(b!=null?b.pageSize:void 0)||512,this.length=0,at=0;1<<at<this.pageSize;)at+=1;if(1<<at!==this.pageSize)throw"pageSize must be a power of two";for(this._shift=at,this._emptyMemoryPageTemplate=$=[],et=0,nt=this.pageSize;0<=nt?et<nt:et>nt;0<=nt?++et:--et)$.push(null);if(this._memory=[],this._mask=this.pageSize-1,b.initialValues)for(At=b.initialValues,tt=0,rt=At.length;tt<rt;tt++)lt=At[tt],this.queue(lt)}return _.prototype.queue=function(b){this.length+=1,this._write(this.length,b),this._bubbleUp(this.length,b)},_.prototype.dequeue=function(){var b,$;return b=this._read(1),$=this._read(this.length),this.length-=1,this.length>0&&(this._write(1,$),this._bubbleDown(1,$)),b},_.prototype.peek=function(){return this._read(1)},_.prototype.clear=function(){this.length=0,this._memory.length=0},_.prototype._write=function(b,$){var et;for(et=b>>this._shift;et>=this._memory.length;)this._memory.push(this._emptyMemoryPageTemplate.slice(0));return this._memory[et][b&this._mask]=$},_.prototype._read=function(b){return this._memory[b>>this._shift][b&this._mask]},_.prototype._bubbleUp=function(b,$){var et,tt,rt,nt;for(et=this.comparator;b>1&&(tt=b&this._mask,b<this.pageSize||tt>3?rt=b&~this._mask|tt>>1:tt<2?(rt=b-this.pageSize>>this._shift,rt+=rt&~(this._mask>>1),rt|=this.pageSize>>1):rt=b-2,nt=this._read(rt),!(et(nt,$)<0));)this._write(rt,$),this._write(b,nt),b=rt},_.prototype._bubbleDown=function(b,$){var et,tt,rt,nt,At;for(At=this.comparator;b<this.length;)if(b>this._mask&&!(b&this._mask-1)?et=tt=b+2:b&this.pageSize>>1?(et=(b&~this._mask)>>1,et|=b&this._mask>>1,et=et+1<<this._shift,tt=et+1):(et=b+(b&this._mask),tt=et+1),et!==tt&&tt<=this.length)if(rt=this._read(et),nt=this._read(tt),At(rt,$)<0&&At(rt,nt)<=0)this._write(et,$),this._write(b,rt),b=et;else if(At(nt,$)<0)this._write(tt,$),this._write(b,nt),b=tt;else break;else if(et<=this.length)if(rt=this._read(et),At(rt,$)<0)this._write(et,$),this._write(b,rt),b=et;else break;else break},_}()},{}],5:[function(h,d,g){d.exports=function(){function _(b){var $;this.comparator=(b!=null?b.comparator:void 0)||function(et,tt){return et-tt},this.length=0,this.data=(($=b.initialValues)!=null?$.slice(0):void 0)||[],this._heapify()}return _.prototype._heapify=function(){var b,$,et;if(this.data.length>0)for(b=$=1,et=this.data.length;1<=et?$<et:$>et;b=1<=et?++$:--$)this._bubbleUp(b)},_.prototype.queue=function(b){this.data.push(b),this._bubbleUp(this.data.length-1)},_.prototype.dequeue=function(){var b,$;return $=this.data[0],b=this.data.pop(),this.data.length>0&&(this.data[0]=b,this._bubbleDown(0)),$},_.prototype.peek=function(){return this.data[0]},_.prototype.clear=function(){this.length=0,this.data.length=0},_.prototype._bubbleUp=function(b){for(var $,et;b>0&&($=b-1>>>1,this.comparator(this.data[b],this.data[$])<0);)et=this.data[$],this.data[$]=this.data[b],this.data[b]=et,b=$},_.prototype._bubbleDown=function(b){var $,et,tt,rt,nt;for($=this.data.length-1;et=(b<<1)+1,rt=et+1,tt=b,et<=$&&this.comparator(this.data[et],this.data[tt])<0&&(tt=et),rt<=$&&this.comparator(this.data[rt],this.data[tt])<0&&(tt=rt),tt!==b;)nt=this.data[tt],this.data[tt]=this.data[b],this.data[b]=nt,b=tt},_}()},{}]},{},[1])(1)})}(priorityQueue)),priorityQueue.exports}var priorityQueueExports=requirePriorityQueue();const PriorityQueue=getDefaultExportFromCjs(priorityQueueExports),dxs=[1,0,-1,0,1,1,-1,-1],dys=[0,1,0,-1,1,-1,1,-1];function fromWaterShed(s={}){let{points:o,mask:h,image:d,fillMaxValue:g=this.maxValue,invert:_=!1}=s,b=d||this;b.checkProcessable("fromWaterShed",{bitDepth:[8,16],components:1}),_=!_,o||(o=b.getLocalMaxima({invert:_,mask:h}));let $=_?0:1,et=new Int16Array(b.size),tt=b.width,rt=b.height,nt=new PriorityQueue({comparator:(At,at)=>At[2]-at[2],strategy:PriorityQueue.BinaryHeapStrategy});for(let At=0;At<o.length;At++){let at=o[At][0]+o[At][1]*tt;et[at]=At+1;let lt=b.data[at];(_&&lt<=g||!_&&lt>=g)&&nt.queue([o[At][0],o[At][1],lt])}for(;nt.length>0;){let At=nt.dequeue(),at=At[0]+At[1]*tt;for(let lt=0;lt<4;lt++){let gt=At[0]+dxs[lt],_t=At[1]+dys[lt];if(gt>=0&&_t>=0&&gt<tt&&_t<rt){let ct=gt+_t*tt;if(!h||h.getBit(ct)===$){let pt=b.data[ct];(_&&pt<=g||!_&&pt>=g)&&et[ct]===0&&(et[ct]=et[at],nt.queue([At[0]+dxs[lt],At[1]+dys[lt],pt]))}}}}return new RoiMap(b,et)}class RoiManager{constructor(o,h={}){this._image=o,this._options=h,this._options.label||(this._options.label="default"),this._layers={},this._painted=null}fromMaxima(o={}){let h=Object.assign({},this._options,o),d=fromMaxima.call(this._image,o);this._layers[h.label]=new RoiLayer(d,h)}fromPoints(o,h={}){let d=Object.assign({},this._options,h),g=fromPoints.call(this._image,o,h);return this._layers[d.label]=new RoiLayer(g,d),this}putMap(o,h={}){let d=new RoiMap(this._image,o),g=Object.assign({},this._options,h);return this._layers[g.label]=new RoiLayer(d,g),this}fromWaterShed(o={}){let h=Object.assign({},this._options,o),d=fromWaterShed.call(this._image,o);this._layers[h.label]=new RoiLayer(d,h)}fromMask(o,h={}){let d=Object.assign({},this._options,h),g=fromMask.call(this._image,o,h);return this._layers[d.label]=new RoiLayer(g,d),this}fromMaskConnectedComponentLabelingAlgorithm(o,h={}){let d=Object.assign({},this._options,h),g=fromMaskConnectedComponentLabelingAlgorithm.call(this._image,o,h);return this._layers[d.label]=new RoiLayer(g,d),this}getMap(o={}){let h=Object.assign({},this._options,o);return this._assertLayerWithLabel(h.label),this._layers[h.label].roiMap}rowsInfo(o={}){return this.getMap(o).rowsInfo()}colsInfo(o={}){return this.getMap(o).rowsInfo()}getRoiIds(o={}){let h=this.getRois(o);if(h){let d=new Array(h.length);for(let g=0;g<h.length;g++)d[g]=h[g].id;return d}throw new Error("ROIs not found")}getRois(o={}){let{label:h=this._options.label,positive:d=!0,negative:g=!0,minSurface:_=0,maxSurface:b=Number.POSITIVE_INFINITY,minWidth:$=0,maxWidth:et=Number.POSITIVE_INFINITY,minHeight:tt=0,maxHeight:rt=Number.POSITIVE_INFINITY,minRatio:nt=0,maxRatio:At=Number.POSITIVE_INFINITY}=o;if(!this._layers[h])throw new Error(`this Roi layer (${h}) does not exist`);const at=this._layers[h].roi,lt=[];for(const gt of at)(gt.id<0&&g||gt.id>0&&d)&&gt.surface>=_&&gt.surface<=b&&gt.width>=$&&gt.width<=et&&gt.height>=tt&&gt.height<=rt&&gt.ratio>=nt&&gt.ratio<=At&&lt.push(gt);return lt}getRoi(o,h={}){const{label:d=this._options.label}=h;if(!this._layers[d])throw new Error(`this Roi layer (${d}) does not exist`);const g=this._layers[d].roi.find(_=>_.id===o);if(!g)throw new Error(`found no Roi with id ${o}`);return g}getMasks(o={}){let h=this.getRois(o),d=new Array(h.length);for(let g=0;g<h.length;g++)d[g]=h[g].getMask(o);return d}getAnalysisMasks(o={}){const{analysisProperty:h}=o;let d=`${h}Mask`,g=this.getRois(o);return g.length===0||!g[0][d]?[]:g.map(_=>_[d])}getData(o={}){let h=Object.assign({},this._options,o);return this._assertLayerWithLabel(h.label),this._layers[h.label].roiMap.data}paint(o={}){let{labelProperty:h,analysisProperty:d}=o;this._painted||(this._painted=this._image.rgba8());let g=this.getMasks(o);if(h){const _=this.getRois(o);o.labels=_.map(tt=>deepValue(tt,h));const b=Math.max(...o.labels);let $=!1,et=!1;if(h.includes("surface")?$=!0:/(?:perimeter|min|max|external|width|height|length)/.test(h)&&(et=!0),isFinite(b)){let tt="";if(o.unit!=="pixel"&&o.pixelSize&&(et||$)){tt=$?`${o.unit}^2`:o.unit;let rt=$?"m^2":"m",nt=$?o.pixelSize**2:o.pixelSize;const At=Qty.swiftConverter(rt,tt);o.labels=o.labels.map(at=>At(nt*at))}b>50?o.labels=o.labels.map(rt=>Math.round(rt)+tt):b>10?o.labels=o.labels.map(rt=>rt.toFixed(1)+tt):o.labels=o.labels.map(rt=>rt.toFixed(2)+tt)}o.labelsPosition=_.map(tt=>[tt.meanX,tt.meanY])}if(this._painted.paintMasks(g,o),d){let _=this.getAnalysisMasks(o);this._painted.paintMasks(_,{color:o.analysisColor,alpha:o.analysisAlpha})}return this._painted}getMask(o={}){let h=new Image$1(this._image.width,this._image.height,{kind:"BINARY"}),d=this.getMasks(o);for(let g=0;g<d.length;g++){let _=d[g];for(let b=0;b<_.width;b++)for(let $=0;$<_.height;$++)_.getBitXY(b,$)&&h.setBitXY(b+_.position[0],$+_.position[1])}return h}resetPainted(o={}){const{image:h}=o;h?this._painted=this.image.rgba8():this._painted=this._image.rgba8()}mergeRoi(o={}){const h=this.getMap(o);return h.mergeRoi(o),this.putMap(h.data,o),this}mergeRois(o,h={}){if(!Array.isArray(o)||o.some(g=>!Number.isInteger(g)))throw new Error("Roi ids must be an array of integers");if(o.length<2)throw new Error("Roi ids must have at least two elements");if(new Set(o).size!==o.length)throw new Error("Roi ids must be all different");o.forEach(g=>this.getRoi(g));const d=this.getMap(h);return d.mergeRois(o),this.putMap(d.data,h),this}findCorrespondingRoi(o,h={}){let d=this.getRois(h),g=[];for(let _=0;_<d.length;_++){let b=d[_],$=b.minX,et=b.minY,tt=b.points,rt=Math.sign(b.id),nt=correspondingRoisInformation($,et,tt,o,rt);g.push(nt)}return g}_assertLayerWithLabel(o){if(!this._layers[o])throw new Error(`no layer with label ${o}`)}}function correspondingRoisInformation(s,o,h,d,g){let _={id:[],surface:[],roiSurfaceCovered:[],same:0,opposite:0,total:0};for(let b=0;b<h.length;b++){let $=h[b],et=$[0],tt=$[1],rt=et+s+(tt+o)*d.width,nt=d.data[rt];(nt>0||nt<0)&&(_.id.includes(nt)?_.surface[_.id.indexOf(nt)]+=1:(_.id.push(nt),_.surface.push(1)))}for(let b=0;b<_.id.length;b++)Math.sign(_.id[b])===g?_.same+=_.surface[b]:_.opposite+=_.surface[b],_.roiSurfaceCovered[b]=_.surface[b]/h.length;return _.total=_.opposite+_.same,_}const objectToString=Object.prototype.toString;let Image$1=class NA{constructor(o,h,d,g){if(arguments.length===1?(g=o,{width:o,height:h,data:d}=g):d&&!d.length&&(g=d,{data:d}=g),o===void 0&&(o=1),h===void 0&&(h=1),g===void 0&&(g={}),typeof g!="object"||g===null)throw new TypeError("options must be an object");if(!Number.isInteger(o)||o<=0)throw new RangeError("width must be a positive integer");if(!Number.isInteger(h)||h<=0)throw new RangeError("height must be a positive integer");const{kind:_=RGBA}=g;if(typeof _!="string")throw new TypeError("kind must be a string");const b=getKind(_),$=Object.assign({},g);for(const gt in b)$[gt]===void 0&&($[gt]=b[gt]);verifyKindDefinition($);const{components:et,bitDepth:tt,colorModel:rt}=$,nt=$.alpha+0,At=o*h,at=et+nt,lt=tt===32?Number.MAX_VALUE:2**tt-1;if(d===void 0)d=createPixelArray(At,et,nt,at,tt,lt);else{const gt=getTheoreticalPixelArraySize(At,at,tt);if(d.length!==gt)throw new RangeError(`incorrect data size: ${d.length}. Should be ${gt}`)}this.width=o,this.height=h,this.data=d,this.size=At,this.components=et,this.alpha=nt,this.bitDepth=tt,this.maxValue=lt,this.colorModel=rt,this.channels=at,this.meta=g.meta||{},Object.defineProperty(this,"parent",{enumerable:!1,writable:!0,configurable:!0,value:g.parent||null}),this.position=g.position||[0,0],this.computed=null,this.sizes=[this.width,this.height],this.multiplierX=this.channels,this.multiplierY=this.channels*this.width,this.isClamped=this.bitDepth<32,this.borderSizes=[0,0]}get[Symbol.toStringTag](){return"IJSImage"}static isImage(o){return objectToString.call(o)==="[object IJSImage]"}static fromCanvas(o){const h=o.getContext("2d").getImageData(0,0,o.width,o.height);return new NA(h.width,h.height,h.data)}static createFrom(o,h){const d=getImageParameters(o);return Object.assign(d,{parent:o,position:[0,0]},h),new NA(d)}getRoiManager(o){return new RoiManager(this,o)}clone(){const o=this.data.slice();return new NA(this.width,this.height,o,this)}apply(o){for(let h=0;h<this.height;h++)for(let d=0;d<this.width;d++){let g=(h*this.width+d)*this.channels;o.call(this,g)}}};setValueMethods(Image$1);setBitMethods(Image$1);setExportMethods(Image$1);Image$1.prototype.checkProcessable=checkProcessable;Image$1.prototype.getRGBAData=getRGBAData;Image$1.load=load;Image$1.extendMethod=extendMethod;Image$1.extendProperty=extendProperty;extend$1(Image$1);var workerTemplate={},hasRequiredWorkerTemplate;function requireWorkerTemplate(){if(hasRequiredWorkerTemplate)return workerTemplate;hasRequiredWorkerTemplate=1;var s=function(){self.window=self;function h(){this._listeners={}}h.prototype.on=function(g,_){if(this._listeners[g])throw new RangeError("there is already a listener for "+g);if(typeof _!="function")throw new TypeError("callback argument must be a function");this._listeners[g]=_},h.prototype._send=function(g,_,b){b===void 0?b=[]:Array.isArray(b)||(b=[b]),self.postMessage({id:g,data:_},b)},h.prototype._trigger=function(g,_){if(!this._listeners[g])throw new Error("event "+g+" is not defined");this._listeners[g].apply(null,_)};var d=new h;self.onmessage=function(g){switch(g.data.action){case"exec":g.data.args.unshift(function(_,b){d._send(g.data.id,_,b)}),d._trigger(g.data.event,g.data.args);break;case"ping":d._send(g.data.id,"pong");break;default:throw new Error("unexpected action: "+g.data.action)}}},o=s.toString().split('"CODE";');return workerTemplate.newWorkerURL=function(h,d){var g=new Blob(["(",o[0],"importScripts.apply(self, "+JSON.stringify(d)+`);
`,"(",h,")();",o[1],")();"],{type:"application/javascript"});return URL.createObjectURL(g)},workerTemplate}var src,hasRequiredSrc;function requireSrc(){if(hasRequiredSrc)return src;hasRequiredSrc=1;var s=requireWorkerTemplate(),o=navigator.hardwareConcurrency||1;function h(d,g){if(typeof d!="string"&&typeof d!="function")throw new TypeError("func argument must be a function");if(g===void 0&&(g={}),typeof g!="object"||g===null)throw new TypeError("options argument must be an object");this._workerCode=d.toString(),g.maxWorkers===void 0||g.maxWorkers==="auto"?this._numWorkers=Math.min(o-1,1):g.maxWorkers>0?this._numWorkers=Math.min(g.maxWorkers,o):this._numWorkers=o,this._workers=new Map,this._timeout=g.timeout||0,this._terminateOnError=!!g.terminateOnError;var _=g.deps;typeof _=="string"&&(_=[_]),Array.isArray(_)||(_=void 0),this._id=0,this._terminated=!1,this._working=0,this._waiting=[],this._init(_)}return h.prototype._init=function(d){for(var g=s.newWorkerURL(this._workerCode,d),_=0;_<this._numWorkers;_++){var b=new Worker(g);b.onmessage=this._onmessage.bind(this,b),b.onerror=this._onerror.bind(this,b),b.running=!1,b.id=_,this._workers.set(b,null)}URL.revokeObjectURL(g)},h.prototype._onerror=function(d,g){if(!this._terminated){this._working--,d.running=!1;var _=this._workers.get(d);_&&_[1](g.message),this._workers.set(d,null),this._terminateOnError?this.terminate():this._exec()}},h.prototype._onmessage=function(d,g){if(!this._terminated){this._working--,d.running=!1;var _=this._workers.get(d);_&&_[0](g.data.data),this._workers.set(d,null),this._exec()}},h.prototype._exec=function(){for(var d of this._workers.keys()){if(this._working===this._numWorkers||this._waiting.length===0)return;if(!d.running)for(var g=0;g<this._waiting.length;g++){var _=this._waiting[g];if(!(typeof _[4]=="number"&&_[4]!==d.id)){this._waiting.splice(g,1),d.postMessage({action:"exec",event:_[0],args:_[1]},_[2]),d.running=!0,d.time=Date.now(),this._workers.set(d,_[3]),this._working++;break}}}},h.prototype.terminate=function(){if(!this._terminated){for(var d of this._workers)d[0].terminate(),d[1]&&d[1][1](new Error("Terminated"));this._workers.clear(),this._waiting=[],this._working=0,this._terminated=!0}},h.prototype.postAll=function(d,g){if(this._terminated)throw new Error("Cannot post (terminated)");var _=[];for(var b of this._workers.keys())_.push(this.post(d,g,[],b.id));return Promise.all(_)},h.prototype.post=function(d,g,_,b){g===void 0&&(g=[]),_===void 0&&(_=[]),Array.isArray(g)||(g=[g]),Array.isArray(_)||(_=[_]);var $=this;return new Promise(function(et,tt){if($._terminated)throw new Error("Cannot post (terminated)");$._waiting.push([d,g,_,[et,tt],b]),$._exec()})},src=h,src}var srcExports=requireSrc();const WorkerManager=getDefaultExportFromCjs(srcExports),defaultOptions={regression:{kernelType:"polynomial",kernelOptions:{degree:2,constant:1}},threshold:.02,roi:{minSurface:100,positive:!1},sampling:20,include:[]};function run(s,o,h){o=Object.assign({},defaultOptions,o);const d=this.manager;return Array.isArray(s)?Promise.all(s.map(function(g){const _=runOnce(d,g,o);return typeof h=="function"&&_.then(h),_})):runOnce(d,s,o)}function runOnce(s,o,h){return s.post("data",[o,h]).then(function(d){for(let g in d)d[g]=new Image$1(d[g]);return d})}function work(){worker.on("data",function(s,o,h){o=new IJS(o);const d={},g=[],_=o.grey(),b=_.sobelFilter();at("sobel",b);const $=b.level().mask({threshold:h.threshold});at("mask",$);const et=b.getRoiManager();et.fromMask($);const tt=et.getMask(h.roi);at("realMask",tt);const rt=_.getPixelsGrid({sampling:h.sampling,mask:tt}),nt=o.getBackground(rt.xyS,rt.zS,h.regression);at("background",nt);const At=o.subtract(nt);d.result=At,g.push(At.data.buffer),s(d,g);function at(lt,gt){h.include.includes(lt)&&(d[lt]=gt,g.push(gt.data.buffer))}})}const background={run,work};function extend(s){s.extendMethod("background",background)}let Worker$1=class Gs{constructor(){this._url=null,this._deps=[null]}checkUrl(){if(this._url===null)throw new Error("image worker must be initialized with an URL")}get url(){return this._url}set url(o){if(typeof o!="string")throw new TypeError("worker URL must be a string");this._url=o,this._deps[0]=o}static extendMethod(o,h){let d,g,_={};function b(...$){return d||(this.checkUrl(),g=this.url,d=new WorkerManager(h.work,{deps:g}),_.manager=d),h.run.call(_,...$)}b.reset=function(){d&&(d.terminate(),d=new WorkerManager(h.work,{deps:g}),_.manager=d)},Gs.prototype[o]=b}};extend(Worker$1);var lz4$1={},xxh32={},util={},hasRequiredUtil;function requireUtil(){return hasRequiredUtil||(hasRequiredUtil=1,util.hashU32=function(s){return s=s|0,s=s+2127912214+(s<<12)|0,s=s^-949894596^s>>>19,s=s+374761393+(s<<5)|0,s=s+-744332180^s<<9,s=s+-42973499+(s<<3)|0,s^-1252372727^s>>>16|0},util.readU64=function(s,o){var h=0;return h|=s[o++]<<0,h|=s[o++]<<8,h|=s[o++]<<16,h|=s[o++]<<24,h|=s[o++]<<32,h|=s[o++]<<40,h|=s[o++]<<48,h|=s[o++]<<56,h},util.readU32=function(s,o){var h=0;return h|=s[o++]<<0,h|=s[o++]<<8,h|=s[o++]<<16,h|=s[o++]<<24,h},util.writeU32=function(s,o,h){s[o++]=h>>0&255,s[o++]=h>>8&255,s[o++]=h>>16&255,s[o++]=h>>24&255},util.imul=function(s,o){var h=s>>>16,d=s&65535,g=o>>>16,_=o&65535;return d*_+(h*_+d*g<<16)|0}),util}var hasRequiredXxh32;function requireXxh32(){if(hasRequiredXxh32)return xxh32;hasRequiredXxh32=1;var s=requireUtil(),o=2654435761,h=2246822519,d=3266489917,g=668265263,_=374761393;function b(lt,gt){return lt=lt|0,gt=gt|0,lt>>>(32-gt|0)|lt<<gt|0}function $(lt,gt,_t){return lt=lt|0,gt=gt|0,_t=_t|0,s.imul(lt>>>(32-gt|0)|lt<<gt,_t)|0}function et(lt,gt){return lt=lt|0,gt=gt|0,lt>>>gt^lt|0}function tt(lt,gt,_t,ct,pt){return $(s.imul(gt,_t)+lt,ct,pt)}function rt(lt,gt,_t){return $(lt+s.imul(gt[_t],_),11,o)}function nt(lt,gt,_t){return tt(lt,s.readU32(gt,_t),d,17,g)}function At(lt,gt,_t){return[tt(lt[0],s.readU32(gt,_t+0),h,13,o),tt(lt[1],s.readU32(gt,_t+4),h,13,o),tt(lt[2],s.readU32(gt,_t+8),h,13,o),tt(lt[3],s.readU32(gt,_t+12),h,13,o)]}function at(lt,gt,_t,ct){var pt,dt;if(dt=ct,ct>=16){for(pt=[lt+o+h,lt+h,lt,lt-o];ct>=16;)pt=At(pt,gt,_t),_t+=16,ct-=16;pt=b(pt[0],1)+b(pt[1],7)+b(pt[2],12)+b(pt[3],18)+dt}else pt=lt+_+ct>>>0;for(;ct>=4;)pt=nt(pt,gt,_t),_t+=4,ct-=4;for(;ct>0;)pt=rt(pt,gt,_t),_t++,ct--;return pt=et(s.imul(et(s.imul(et(pt,15),h),13),d),16),pt>>>0}return xxh32.hash=at,xxh32}var hasRequiredLz4;function requireLz4(){return hasRequiredLz4||(hasRequiredLz4=1,function(s){var o=requireXxh32(),h=requireUtil(),d=4,g=13,_=5,b=6,$=65536,et=4,tt=(1<<et)-1,rt=4,nt=(1<<rt)-1,At=Pt(5<<20),at=Lt(),lt=407708164,gt=4,_t=8,ct=16,pt=64,dt=192,mt=2147483648,Qt=7,xt=4,bt=7,kt={4:65536,5:262144,6:1048576,7:4194304};function Lt(){try{return new Uint32Array($)}catch{for(var Vt=new Array($),Xt=0;Xt<$;Xt++)Vt[Xt]=0;return Vt}}function Ht(Vt){for(var Xt=0;Xt<$;Xt++)at[Xt]=0}function Pt(Vt){try{return new Uint8Array(Vt)}catch{for(var Xt=new Array(Vt),nr=0;nr<Vt;nr++)Xt[nr]=0;return Xt}}function jt(Vt,Xt,nr){if(typeof Vt.buffer!==void 0){if(Uint8Array.prototype.slice)return Vt.slice(Xt,nr);var Ar=Vt.length;Xt=Xt|0,Xt=Xt<0?Math.max(Ar+Xt,0):Math.min(Xt,Ar),nr=nr===void 0?Ar:nr|0,nr=nr<0?Math.max(Ar+nr,0):Math.min(nr,Ar);for(var ar=new Uint8Array(nr-Xt),Wt=Xt,pr=0;Wt<nr;)ar[pr++]=Vt[Wt++];return ar}else return Vt.slice(Xt,nr)}s.compressBound=function(Vt){return Vt+Vt/255+16|0},s.decompressBound=function(Vt){var Xt=0;if(h.readU32(Vt,Xt)!==lt)throw new Error("invalid magic number");Xt+=4;var nr=Vt[Xt++];if((nr&dt)!==pt)throw new Error("incompatible descriptor version "+(nr&dt));var Ar=(nr&ct)!==0,ar=(nr&_t)!==0,Wt=Vt[Xt++]>>xt&bt;if(kt[Wt]===void 0)throw new Error("invalid block size "+Wt);var pr=kt[Wt];if(ar)return h.readU64(Vt,Xt);Xt++;for(var dr=0;;){var yr=h.readU32(Vt,Xt);if(Xt+=4,yr&mt?(yr&=2147483647,dr+=yr):dr+=pr,yr===0)return dr;Ar&&(Xt+=4),Xt+=yr}},s.makeBuffer=Pt,s.decompressBlock=function(Vt,Xt,nr,Ar,ar){var Wt,pr,dr,yr,Br;for(dr=nr+Ar;nr<dr;){var Lr=Vt[nr++],Ur=Lr>>4;if(Ur>0){if(Ur===15)for(;Ur+=Vt[nr],Vt[nr++]===255;);for(yr=nr+Ur;nr<yr;)Xt[ar++]=Vt[nr++]}if(nr>=dr)break;if(Wt=Lr&15,pr=Vt[nr++]|Vt[nr++]<<8,Wt===15)for(;Wt+=Vt[nr],Vt[nr++]===255;);for(Wt+=d,Br=ar-pr,yr=Br+Wt;Br<yr;)Xt[ar++]=Xt[Br++]|0}return ar},s.compressBlock=function(Vt,Xt,nr,Ar,ar){var Wt,pr,dr,yr,Br,Lr,Ur,or,mr;if(Ur=0,or=Ar+nr,pr=nr,Ar>=g)for(var Ir=(1<<b)+3;nr+d<or-_;){var ur=h.readU32(Vt,nr),lr=h.hashU32(ur)>>>0;if(lr=(lr>>16^lr)>>>0&65535,Wt=ar[lr]-1,ar[lr]=nr+1,Wt<0||nr-Wt>>>16>0||h.readU32(Vt,Wt)!==ur){Br=Ir++>>b,nr+=Br;continue}for(Ir=(1<<b)+3,Lr=nr-pr,yr=nr-Wt,nr+=d,Wt+=d,dr=nr;nr<or-_&&Vt[nr]===Vt[Wt];)nr++,Wt++;dr=nr-dr;var Xr=dr<tt?dr:tt;if(Lr>=nt){for(Xt[Ur++]=(nt<<et)+Xr,mr=Lr-nt;mr>=255;mr-=255)Xt[Ur++]=255;Xt[Ur++]=mr}else Xt[Ur++]=(Lr<<et)+Xr;for(var zr=0;zr<Lr;zr++)Xt[Ur++]=Vt[pr+zr];if(Xt[Ur++]=yr,Xt[Ur++]=yr>>8,dr>=tt){for(mr=dr-tt;mr>=255;mr-=255)Xt[Ur++]=255;Xt[Ur++]=mr}pr=nr}if(pr===0)return 0;if(Lr=or-pr,Lr>=nt){for(Xt[Ur++]=nt<<et,mr=Lr-nt;mr>=255;mr-=255)Xt[Ur++]=255;Xt[Ur++]=mr}else Xt[Ur++]=Lr<<et;for(nr=pr;nr<or;)Xt[Ur++]=Vt[nr++];return Ur},s.decompressFrame=function(Vt,Xt){var nr,Ar,ar,Wt,pr=0,dr=0;if(h.readU32(Vt,pr)!==lt)throw new Error("invalid magic number");if(pr+=4,Wt=Vt[pr++],(Wt&dt)!==pt)throw new Error("incompatible descriptor version");nr=(Wt&ct)!==0,Ar=(Wt&gt)!==0,ar=(Wt&_t)!==0;var yr=Vt[pr++]>>xt&bt;if(kt[yr]===void 0)throw new Error("invalid block size");for(ar&&(pr+=8),pr++;;){var Br;if(Br=h.readU32(Vt,pr),pr+=4,Br===0)break;if(nr&&(pr+=4),(Br&mt)!==0){Br&=2147483647;for(var Lr=0;Lr<Br;Lr++)Xt[dr++]=Vt[pr++]}else dr=s.decompressBlock(Vt,Xt,pr,Br,dr),pr+=Br}return Ar&&(pr+=4),dr},s.compressFrame=function(Vt,Xt){var nr=0;h.writeU32(Xt,nr,lt),nr+=4,Xt[nr++]=pt,Xt[nr++]=Qt<<xt,Xt[nr]=o.hash(0,Xt,4,nr-4)>>8,nr++;var Ar=kt[Qt],ar=Vt.length,Wt=0;for(Ht();ar>0;){var pr=0,dr=ar>Ar?Ar:ar;if(pr=s.compressBlock(Vt,At,Wt,dr,at),pr>dr||pr===0){h.writeU32(Xt,nr,2147483648|dr),nr+=4;for(var yr=Wt+dr;Wt<yr;)Xt[nr++]=Vt[Wt++];ar-=dr}else{h.writeU32(Xt,nr,pr),nr+=4;for(var Br=0;Br<pr;)Xt[nr++]=At[Br++];Wt+=dr,ar-=dr}}return h.writeU32(Xt,nr,0),nr+=4,nr},s.decompress=function(Vt,Xt){var nr,Ar;return Xt===void 0&&(Xt=s.decompressBound(Vt)),nr=s.makeBuffer(Xt),Ar=s.decompressFrame(Vt,nr),Ar!==Xt&&(nr=jt(nr,0,Ar)),nr},s.compress=function(Vt,Xt){var nr,Ar;return Xt===void 0&&(Xt=s.compressBound(Vt.length)),nr=s.makeBuffer(Xt),Ar=s.compressFrame(Vt,nr),Ar!==Xt&&(nr=jt(nr,0,Ar)),nr}}(lz4$1)),lz4$1}var lz4Exports=requireLz4();const lz4=getDefaultExportFromCjs(lz4Exports);var __defProp=Object.defineProperty,__defNormalProp=(s,o,h)=>o in s?__defProp(s,o,{enumerable:!0,configurable:!0,writable:!0,value:h}):s[o]=h,__export=(s,o)=>{for(var h in o)__defProp(s,h,{get:o[h],enumerable:!0})},__publicField=(s,o,h)=>(__defNormalProp(s,typeof o!="symbol"?o+"":o,h),h),constants_exports={};__export(constants_exports,{bt709:()=>bt709_exports});var bt709_exports={};__export(bt709_exports,{Y:()=>Y,x:()=>x,y:()=>y});var Y=(s=>(s[s.RED=.2126]="RED",s[s.GREEN=.7152]="GREEN",s[s.BLUE=.0722]="BLUE",s[s.WHITE=1]="WHITE",s))(Y||{}),x=(s=>(s[s.RED=.64]="RED",s[s.GREEN=.3]="GREEN",s[s.BLUE=.15]="BLUE",s[s.WHITE=.3127]="WHITE",s))(x||{}),y=(s=>(s[s.RED=.33]="RED",s[s.GREEN=.6]="GREEN",s[s.BLUE=.06]="BLUE",s[s.WHITE=.329]="WHITE",s))(y||{}),conversion_exports={};__export(conversion_exports,{lab2rgb:()=>lab2rgb,lab2xyz:()=>lab2xyz,rgb2hsl:()=>rgb2hsl,rgb2lab:()=>rgb2lab,rgb2xyz:()=>rgb2xyz,xyz2lab:()=>xyz2lab,xyz2rgb:()=>xyz2rgb});function correctGamma(s){return s>.04045?((s+.055)/1.055)**2.4:s/12.92}function rgb2xyz(s,o,h){return s=correctGamma(s/255),o=correctGamma(o/255),h=correctGamma(h/255),{x:s*.4124+o*.3576+h*.1805,y:s*.2126+o*.7152+h*.0722,z:s*.0193+o*.1192+h*.9505}}var arithmetic_exports={};__export(arithmetic_exports,{degrees2radians:()=>degrees2radians,inRange0to255:()=>inRange0to255,inRange0to255Rounded:()=>inRange0to255Rounded,intInRange:()=>intInRange,max3:()=>max3,min3:()=>min3,stableSort:()=>stableSort});function degrees2radians(s){return s*(Math.PI/180)}function max3(s,o,h){let d=s;return d<o&&(d=o),d<h&&(d=h),d}function min3(s,o,h){let d=s;return d>o&&(d=o),d>h&&(d=h),d}function intInRange(s,o,h){return s>h&&(s=h),s<o&&(s=o),s|0}function inRange0to255Rounded(s){return s=Math.round(s),s>255?s=255:s<0&&(s=0),s}function inRange0to255(s){return s>255?s=255:s<0&&(s=0),s}function stableSort(s,o){const h=typeof s[0];let d;if(h==="number"||h==="string"){const g=Object.create(null);for(let _=0,b=s.length;_<b;_++){const $=s[_];g[$]||g[$]===0||(g[$]=_)}d=s.sort((_,b)=>o(_,b)||g[_]-g[b])}else{const g=s.slice(0);d=s.sort((_,b)=>o(_,b)||g.indexOf(_)-g.indexOf(b))}return d}function rgb2hsl(s,o,h){const d=min3(s,o,h),g=max3(s,o,h),_=g-d,b=(d+g)/510;let $=0;b>0&&b<1&&($=_/(b<.5?g+d:510-g-d));let et=0;return _>0&&(g===s?et=(o-h)/_:g===o?et=2+(h-s)/_:et=4+(s-o)/_,et*=60,et<0&&(et+=360)),{h:et,s:$,l:b}}var refX=.95047,refY=1,refZ=1.08883;function pivot(s){return s>.008856?s**(1/3):7.787*s+16/116}function xyz2lab(s,o,h){if(s=pivot(s/refX),o=pivot(o/refY),h=pivot(h/refZ),116*o-16<0)throw new Error("xxx");return{L:Math.max(0,116*o-16),a:500*(s-o),b:200*(o-h)}}function rgb2lab(s,o,h){const d=rgb2xyz(s,o,h);return xyz2lab(d.x,d.y,d.z)}var refX2=.95047,refY2=1,refZ2=1.08883;function pivot2(s){return s>.206893034?s**3:(s-16/116)/7.787}function lab2xyz(s,o,h){const d=(s+16)/116,g=o/500+d,_=d-h/200;return{x:refX2*pivot2(g),y:refY2*pivot2(d),z:refZ2*pivot2(_)}}function correctGamma2(s){return s>.0031308?1.055*s**(1/2.4)-.055:12.92*s}function xyz2rgb(s,o,h){const d=correctGamma2(s*3.2406+o*-1.5372+h*-.4986),g=correctGamma2(s*-.9689+o*1.8758+h*.0415),_=correctGamma2(s*.0557+o*-.204+h*1.057);return{r:inRange0to255Rounded(d*255),g:inRange0to255Rounded(g*255),b:inRange0to255Rounded(_*255)}}function lab2rgb(s,o,h){const d=lab2xyz(s,o,h);return xyz2rgb(d.x,d.y,d.z)}var distance_exports={};__export(distance_exports,{AbstractDistanceCalculator:()=>AbstractDistanceCalculator,AbstractEuclidean:()=>AbstractEuclidean,AbstractManhattan:()=>AbstractManhattan,CIE94GraphicArts:()=>CIE94GraphicArts,CIE94Textiles:()=>CIE94Textiles,CIEDE2000:()=>CIEDE2000,CMetric:()=>CMetric,Euclidean:()=>Euclidean,EuclideanBT709:()=>EuclideanBT709,EuclideanBT709NoAlpha:()=>EuclideanBT709NoAlpha,Manhattan:()=>Manhattan,ManhattanBT709:()=>ManhattanBT709,ManhattanNommyde:()=>ManhattanNommyde,PNGQuant:()=>PNGQuant});var AbstractDistanceCalculator=class{constructor(){__publicField(this,"_maxDistance"),__publicField(this,"_whitePoint"),this._setDefaults(),this.setWhitePoint(255,255,255,255)}setWhitePoint(s,o,h,d){this._whitePoint={r:s>0?255/s:0,g:o>0?255/o:0,b:h>0?255/h:0,a:d>0?255/d:0},this._maxDistance=this.calculateRaw(s,o,h,d,0,0,0,0)}calculateNormalized(s,o){return this.calculateRaw(s.r,s.g,s.b,s.a,o.r,o.g,o.b,o.a)/this._maxDistance}},AbstractCIE94=class extends AbstractDistanceCalculator{calculateRaw(s,o,h,d,g,_,b,$){const et=rgb2lab(inRange0to255(s*this._whitePoint.r),inRange0to255(o*this._whitePoint.g),inRange0to255(h*this._whitePoint.b)),tt=rgb2lab(inRange0to255(g*this._whitePoint.r),inRange0to255(_*this._whitePoint.g),inRange0to255(b*this._whitePoint.b)),rt=et.L-tt.L,nt=et.a-tt.a,At=et.b-tt.b,at=Math.sqrt(et.a*et.a+et.b*et.b),lt=Math.sqrt(tt.a*tt.a+tt.b*tt.b),gt=at-lt;let _t=nt*nt+At*At-gt*gt;_t=_t<0?0:Math.sqrt(_t);const ct=($-d)*this._whitePoint.a*this._kA;return Math.sqrt((rt/this._Kl)**2+(gt/(1+this._K1*at))**2+(_t/(1+this._K2*at))**2+ct**2)}},CIE94Textiles=class extends AbstractCIE94{_setDefaults(){this._Kl=2,this._K1=.048,this._K2=.014,this._kA=.25*50/255}},CIE94GraphicArts=class extends AbstractCIE94{_setDefaults(){this._Kl=1,this._K1=.045,this._K2=.015,this._kA=.25*100/255}},_CIEDE2000=class extends AbstractDistanceCalculator{_setDefaults(){}static _calculatehp(s,o){const h=Math.atan2(s,o);return h>=0?h:h+_CIEDE2000._deg360InRad}static _calculateRT(s,o){const h=o**7,d=2*Math.sqrt(h/(h+_CIEDE2000._pow25to7)),g=_CIEDE2000._deg30InRad*Math.exp(-(((s-_CIEDE2000._deg275InRad)/_CIEDE2000._deg25InRad)**2));return-Math.sin(2*g)*d}static _calculateT(s){return 1-.17*Math.cos(s-_CIEDE2000._deg30InRad)+.24*Math.cos(s*2)+.32*Math.cos(s*3+_CIEDE2000._deg6InRad)-.2*Math.cos(s*4-_CIEDE2000._deg63InRad)}static _calculate_ahp(s,o,h,d){const g=h+d;return s===0?g:o<=_CIEDE2000._deg180InRad?g/2:g<_CIEDE2000._deg360InRad?(g+_CIEDE2000._deg360InRad)/2:(g-_CIEDE2000._deg360InRad)/2}static _calculate_dHp(s,o,h,d){let g;return s===0?g=0:o<=_CIEDE2000._deg180InRad?g=h-d:h<=d?g=h-d+_CIEDE2000._deg360InRad:g=h-d-_CIEDE2000._deg360InRad,2*Math.sqrt(s)*Math.sin(g/2)}calculateRaw(s,o,h,d,g,_,b,$){const et=rgb2lab(inRange0to255(s*this._whitePoint.r),inRange0to255(o*this._whitePoint.g),inRange0to255(h*this._whitePoint.b)),tt=rgb2lab(inRange0to255(g*this._whitePoint.r),inRange0to255(_*this._whitePoint.g),inRange0to255(b*this._whitePoint.b)),rt=($-d)*this._whitePoint.a*_CIEDE2000._kA,nt=this.calculateRawInLab(et,tt);return Math.sqrt(nt+rt*rt)}calculateRawInLab(s,o){const h=s.L,d=s.a,g=s.b,_=o.L,b=o.a,$=o.b,et=Math.sqrt(d*d+g*g),tt=Math.sqrt(b*b+$*$),rt=((et+tt)/2)**7,nt=.5*(1-Math.sqrt(rt/(rt+_CIEDE2000._pow25to7))),At=(1+nt)*d,at=(1+nt)*b,lt=Math.sqrt(At*At+g*g),gt=Math.sqrt(at*at+$*$),_t=lt*gt,ct=_CIEDE2000._calculatehp(g,At),pt=_CIEDE2000._calculatehp($,at),dt=Math.abs(ct-pt),mt=_-h,Qt=gt-lt,xt=_CIEDE2000._calculate_dHp(_t,dt,pt,ct),bt=_CIEDE2000._calculate_ahp(_t,dt,ct,pt),kt=_CIEDE2000._calculateT(bt),Lt=(lt+gt)/2,Ht=((h+_)/2-50)**2,Pt=1+.015*Ht/Math.sqrt(20+Ht),jt=1+.045*Lt,Vt=1+.015*kt*Lt,Xt=_CIEDE2000._calculateRT(bt,Lt),nr=mt/Pt,Ar=Qt/jt,ar=xt/Vt;return nr**2+Ar**2+ar**2+Xt*Ar*ar}},CIEDE2000=_CIEDE2000;__publicField(CIEDE2000,"_kA",.25*100/255);__publicField(CIEDE2000,"_pow25to7",25**7);__publicField(CIEDE2000,"_deg360InRad",degrees2radians(360));__publicField(CIEDE2000,"_deg180InRad",degrees2radians(180));__publicField(CIEDE2000,"_deg30InRad",degrees2radians(30));__publicField(CIEDE2000,"_deg6InRad",degrees2radians(6));__publicField(CIEDE2000,"_deg63InRad",degrees2radians(63));__publicField(CIEDE2000,"_deg275InRad",degrees2radians(275));__publicField(CIEDE2000,"_deg25InRad",degrees2radians(25));var CMetric=class extends AbstractDistanceCalculator{calculateRaw(s,o,h,d,g,_,b,$){const et=(s+g)/2*this._whitePoint.r,tt=(s-g)*this._whitePoint.r,rt=(o-_)*this._whitePoint.g,nt=(h-b)*this._whitePoint.b,At=((512+et)*tt*tt>>8)+4*rt*rt+((767-et)*nt*nt>>8),at=($-d)*this._whitePoint.a;return Math.sqrt(At+at*at)}_setDefaults(){}},AbstractEuclidean=class extends AbstractDistanceCalculator{calculateRaw(s,o,h,d,g,_,b,$){const et=g-s,tt=_-o,rt=b-h,nt=$-d;return Math.sqrt(this._kR*et*et+this._kG*tt*tt+this._kB*rt*rt+this._kA*nt*nt)}},Euclidean=class extends AbstractEuclidean{_setDefaults(){this._kR=1,this._kG=1,this._kB=1,this._kA=1}},EuclideanBT709=class extends AbstractEuclidean{_setDefaults(){this._kR=.2126,this._kG=.7152,this._kB=.0722,this._kA=1}},EuclideanBT709NoAlpha=class extends AbstractEuclidean{_setDefaults(){this._kR=.2126,this._kG=.7152,this._kB=.0722,this._kA=0}},AbstractManhattan=class extends AbstractDistanceCalculator{calculateRaw(s,o,h,d,g,_,b,$){let et=g-s,tt=_-o,rt=b-h,nt=$-d;return et<0&&(et=0-et),tt<0&&(tt=0-tt),rt<0&&(rt=0-rt),nt<0&&(nt=0-nt),this._kR*et+this._kG*tt+this._kB*rt+this._kA*nt}},Manhattan=class extends AbstractManhattan{_setDefaults(){this._kR=1,this._kG=1,this._kB=1,this._kA=1}},ManhattanNommyde=class extends AbstractManhattan{_setDefaults(){this._kR=.4984,this._kG=.8625,this._kB=.2979,this._kA=1}},ManhattanBT709=class extends AbstractManhattan{_setDefaults(){this._kR=.2126,this._kG=.7152,this._kB=.0722,this._kA=1}},PNGQuant=class extends AbstractDistanceCalculator{calculateRaw(s,o,h,d,g,_,b,$){const et=($-d)*this._whitePoint.a;return this._colordifferenceCh(s*this._whitePoint.r,g*this._whitePoint.r,et)+this._colordifferenceCh(o*this._whitePoint.g,_*this._whitePoint.g,et)+this._colordifferenceCh(h*this._whitePoint.b,b*this._whitePoint.b,et)}_colordifferenceCh(s,o,h){const d=s-o,g=d+h;return d*d+g*g}_setDefaults(){}},palette_exports={};__export(palette_exports,{AbstractPaletteQuantizer:()=>AbstractPaletteQuantizer,ColorHistogram:()=>ColorHistogram,NeuQuant:()=>NeuQuant,NeuQuantFloat:()=>NeuQuantFloat,RGBQuant:()=>RGBQuant,WuColorCube:()=>WuColorCube,WuQuant:()=>WuQuant});var AbstractPaletteQuantizer=class{quantizeSync(){for(const s of this.quantize())if(s.palette)return s.palette;throw new Error("unreachable")}},Point=class{constructor(){__publicField(this,"r"),__publicField(this,"g"),__publicField(this,"b"),__publicField(this,"a"),__publicField(this,"uint32"),__publicField(this,"rgba"),this.uint32=-1>>>0,this.r=this.g=this.b=this.a=0,this.rgba=new Array(4),this.rgba[0]=0,this.rgba[1]=0,this.rgba[2]=0,this.rgba[3]=0}static createByQuadruplet(s){const o=new Point;return o.r=s[0]|0,o.g=s[1]|0,o.b=s[2]|0,o.a=s[3]|0,o._loadUINT32(),o._loadQuadruplet(),o}static createByRGBA(s,o,h,d){const g=new Point;return g.r=s|0,g.g=o|0,g.b=h|0,g.a=d|0,g._loadUINT32(),g._loadQuadruplet(),g}static createByUint32(s){const o=new Point;return o.uint32=s>>>0,o._loadRGBA(),o._loadQuadruplet(),o}from(s){this.r=s.r,this.g=s.g,this.b=s.b,this.a=s.a,this.uint32=s.uint32,this.rgba[0]=s.r,this.rgba[1]=s.g,this.rgba[2]=s.b,this.rgba[3]=s.a}getLuminosity(s){let o=this.r,h=this.g,d=this.b;return s&&(o=Math.min(255,255-this.a+this.a*o/255),h=Math.min(255,255-this.a+this.a*h/255),d=Math.min(255,255-this.a+this.a*d/255)),o*.2126+h*.7152+d*.0722}_loadUINT32(){this.uint32=(this.a<<24|this.b<<16|this.g<<8|this.r)>>>0}_loadRGBA(){this.r=this.uint32&255,this.g=this.uint32>>>8&255,this.b=this.uint32>>>16&255,this.a=this.uint32>>>24&255}_loadQuadruplet(){this.rgba[0]=this.r,this.rgba[1]=this.g,this.rgba[2]=this.b,this.rgba[3]=this.a}},PointContainer=class{constructor(){__publicField(this,"_pointArray"),__publicField(this,"_width"),__publicField(this,"_height"),this._width=0,this._height=0,this._pointArray=[]}getWidth(){return this._width}getHeight(){return this._height}setWidth(s){this._width=s}setHeight(s){this._height=s}getPointArray(){return this._pointArray}clone(){const s=new PointContainer;s._width=this._width,s._height=this._height;for(let o=0,h=this._pointArray.length;o<h;o++)s._pointArray[o]=Point.createByUint32(this._pointArray[o].uint32|0);return s}toUint32Array(){const s=this._pointArray.length,o=new Uint32Array(s);for(let h=0;h<s;h++)o[h]=this._pointArray[h].uint32;return o}toUint8Array(){return new Uint8Array(this.toUint32Array().buffer)}static fromHTMLImageElement(s){const o=s.naturalWidth,h=s.naturalHeight,d=document.createElement("canvas");return d.width=o,d.height=h,d.getContext("2d").drawImage(s,0,0,o,h,0,0,o,h),PointContainer.fromHTMLCanvasElement(d)}static fromHTMLCanvasElement(s){const o=s.width,h=s.height,d=s.getContext("2d").getImageData(0,0,o,h);return PointContainer.fromImageData(d)}static fromImageData(s){const o=s.width,h=s.height;return PointContainer.fromUint8Array(s.data,o,h)}static fromUint8Array(s,o,h){switch(Object.prototype.toString.call(s)){case"[object Uint8ClampedArray]":case"[object Uint8Array]":break;default:s=new Uint8Array(s)}const d=new Uint32Array(s.buffer);return PointContainer.fromUint32Array(d,o,h)}static fromUint32Array(s,o,h){const d=new PointContainer;d._width=o,d._height=h;for(let g=0,_=s.length;g<_;g++)d._pointArray[g]=Point.createByUint32(s[g]|0);return d}static fromBuffer(s,o,h){const d=new Uint32Array(s.buffer,s.byteOffset,s.byteLength/Uint32Array.BYTES_PER_ELEMENT);return PointContainer.fromUint32Array(d,o,h)}},hueGroups=10;function hueGroup(s,o){const h=360/o,d=h/2;for(let g=1,_=h-d;g<o;g++,_+=h)if(s>=_&&s<_+h)return g;return 0}var Palette=class{constructor(){__publicField(this,"_pointContainer"),__publicField(this,"_pointArray",[]),__publicField(this,"_i32idx",{}),this._pointContainer=new PointContainer,this._pointContainer.setHeight(1),this._pointArray=this._pointContainer.getPointArray()}add(s){this._pointArray.push(s),this._pointContainer.setWidth(this._pointArray.length)}has(s){for(let o=this._pointArray.length-1;o>=0;o--)if(s.uint32===this._pointArray[o].uint32)return!0;return!1}getNearestColor(s,o){return this._pointArray[this._getNearestIndex(s,o)|0]}getPointContainer(){return this._pointContainer}_nearestPointFromCache(s){return typeof this._i32idx[s]=="number"?this._i32idx[s]:-1}_getNearestIndex(s,o){let h=this._nearestPointFromCache(""+o.uint32);if(h>=0)return h;let d=Number.MAX_VALUE;h=0;for(let g=0,_=this._pointArray.length;g<_;g++){const b=this._pointArray[g],$=s.calculateRaw(o.r,o.g,o.b,o.a,b.r,b.g,b.b,b.a);$<d&&(d=$,h=g)}return this._i32idx[o.uint32]=h,h}sort(){this._i32idx={},this._pointArray.sort((s,o)=>{const h=rgb2hsl(s.r,s.g,s.b),d=rgb2hsl(o.r,o.g,o.b),g=s.r===s.g&&s.g===s.b?0:1+hueGroup(h.h,hueGroups),_=(o.r===o.g&&o.g===o.b?0:1+hueGroup(d.h,hueGroups))-g;if(_)return-_;const b=s.getLuminosity(!0),$=o.getLuminosity(!0);if($-b!==0)return $-b;const et=(d.s*100|0)-(h.s*100|0);return et?-et:0})}},utils_exports={};__export(utils_exports,{HueStatistics:()=>HueStatistics,Palette:()=>Palette,Point:()=>Point,PointContainer:()=>PointContainer,ProgressTracker:()=>ProgressTracker,arithmetic:()=>arithmetic_exports});var HueGroup=class{constructor(){__publicField(this,"num",0),__publicField(this,"cols",[])}},HueStatistics=class{constructor(s,o){__publicField(this,"_numGroups"),__publicField(this,"_minCols"),__publicField(this,"_stats"),__publicField(this,"_groupsFull"),this._numGroups=s,this._minCols=o,this._stats=[];for(let h=0;h<=s;h++)this._stats[h]=new HueGroup;this._groupsFull=0}check(s){this._groupsFull===this._numGroups+1&&(this.check=()=>{});const o=s&255,h=s>>>8&255,d=s>>>16&255,g=o===h&&h===d?0:1+hueGroup(rgb2hsl(o,h,d).h,this._numGroups),_=this._stats[g],b=this._minCols;_.num++,!(_.num>b)&&(_.num===b&&this._groupsFull++,_.num<=b&&this._stats[g].cols.push(s))}injectIntoDictionary(s){for(let o=0;o<=this._numGroups;o++)this._stats[o].num<=this._minCols&&this._stats[o].cols.forEach(h=>{s[h]?s[h]++:s[h]=1})}injectIntoArray(s){for(let o=0;o<=this._numGroups;o++)this._stats[o].num<=this._minCols&&this._stats[o].cols.forEach(h=>{s.indexOf(h)===-1&&s.push(h)})}},_ProgressTracker=class{constructor(s,o){__publicField(this,"progress"),__publicField(this,"_step"),__publicField(this,"_range"),__publicField(this,"_last"),__publicField(this,"_progressRange"),this._range=s,this._progressRange=o,this._step=Math.max(1,this._range/(_ProgressTracker.steps+1)|0),this._last=-this._step,this.progress=0}shouldNotify(s){return s-this._last>=this._step?(this._last=s,this.progress=Math.min(this._progressRange*this._last/this._range,this._progressRange),!0):!1}},ProgressTracker=_ProgressTracker;__publicField(ProgressTracker,"steps",100);var networkBiasShift=3,Neuron=class{constructor(s){__publicField(this,"r"),__publicField(this,"g"),__publicField(this,"b"),__publicField(this,"a"),this.r=this.g=this.b=this.a=s}toPoint(){return Point.createByRGBA(this.r>>networkBiasShift,this.g>>networkBiasShift,this.b>>networkBiasShift,this.a>>networkBiasShift)}subtract(s,o,h,d){this.r-=s|0,this.g-=o|0,this.b-=h|0,this.a-=d|0}},_NeuQuant=class extends AbstractPaletteQuantizer{constructor(s,o=256){super(),__publicField(this,"_pointArray"),__publicField(this,"_networkSize"),__publicField(this,"_network"),__publicField(this,"_sampleFactor"),__publicField(this,"_radPower"),__publicField(this,"_freq"),__publicField(this,"_bias"),__publicField(this,"_distance"),this._distance=s,this._pointArray=[],this._sampleFactor=1,this._networkSize=o,this._distance.setWhitePoint(255<<networkBiasShift,255<<networkBiasShift,255<<networkBiasShift,255<<networkBiasShift)}sample(s){this._pointArray=this._pointArray.concat(s.getPointArray())}*quantize(){this._init(),yield*this._learn(),yield{palette:this._buildPalette(),progress:100}}_init(){this._freq=[],this._bias=[],this._radPower=[],this._network=[];for(let s=0;s<this._networkSize;s++)this._network[s]=new Neuron((s<<networkBiasShift+8)/this._networkSize|0),this._freq[s]=_NeuQuant._initialBias/this._networkSize|0,this._bias[s]=0}*_learn(){let s=this._sampleFactor;const o=this._pointArray.length;o<_NeuQuant._minpicturebytes&&(s=1);const h=30+(s-1)/3|0,d=o/s|0;let g=d/_NeuQuant._nCycles|0,_=_NeuQuant._initAlpha,b=(this._networkSize>>3)*_NeuQuant._radiusBias,$=b>>_NeuQuant._radiusBiasShift;$<=1&&($=0);for(let rt=0;rt<$;rt++)this._radPower[rt]=_*(($*$-rt*rt)*_NeuQuant._radBias/($*$))>>>0;let et;o<_NeuQuant._minpicturebytes?et=1:o%_NeuQuant._prime1!==0?et=_NeuQuant._prime1:o%_NeuQuant._prime2!==0?et=_NeuQuant._prime2:o%_NeuQuant._prime3!==0?et=_NeuQuant._prime3:et=_NeuQuant._prime4;const tt=new ProgressTracker(d,99);for(let rt=0,nt=0;rt<d;){tt.shouldNotify(rt)&&(yield{progress:tt.progress});const At=this._pointArray[nt],at=At.b<<networkBiasShift,lt=At.g<<networkBiasShift,gt=At.r<<networkBiasShift,_t=At.a<<networkBiasShift,ct=this._contest(at,lt,gt,_t);if(this._alterSingle(_,ct,at,lt,gt,_t),$!==0&&this._alterNeighbour($,ct,at,lt,gt,_t),nt+=et,nt>=o&&(nt-=o),rt++,g===0&&(g=1),rt%g===0){_-=_/h|0,b-=b/_NeuQuant._radiusDecrease|0,$=b>>_NeuQuant._radiusBiasShift,$<=1&&($=0);for(let pt=0;pt<$;pt++)this._radPower[pt]=_*(($*$-pt*pt)*_NeuQuant._radBias/($*$))>>>0}}}_buildPalette(){const s=new Palette;return this._network.forEach(o=>{s.add(o.toPoint())}),s.sort(),s}_alterNeighbour(s,o,h,d,g,_){let b=o-s;b<-1&&(b=-1);let $=o+s;$>this._networkSize&&($=this._networkSize);let et=o+1,tt=o-1,rt=1;for(;et<$||tt>b;){const nt=this._radPower[rt++]/_NeuQuant._alphaRadBias;if(et<$){const At=this._network[et++];At.subtract(nt*(At.r-g),nt*(At.g-d),nt*(At.b-h),nt*(At.a-_))}if(tt>b){const At=this._network[tt--];At.subtract(nt*(At.r-g),nt*(At.g-d),nt*(At.b-h),nt*(At.a-_))}}}_alterSingle(s,o,h,d,g,_){s/=_NeuQuant._initAlpha;const b=this._network[o];b.subtract(s*(b.r-g),s*(b.g-d),s*(b.b-h),s*(b.a-_))}_contest(s,o,h,d){const g=1020<<networkBiasShift;let _=2147483647,b=_,$=-1,et=$;for(let tt=0;tt<this._networkSize;tt++){const rt=this._network[tt],nt=this._distance.calculateNormalized(rt,{r:h,g:o,b:s,a:d})*g|0;nt<_&&(_=nt,$=tt);const At=nt-(this._bias[tt]>>_NeuQuant._initialBiasShift-networkBiasShift);At<b&&(b=At,et=tt);const at=this._freq[tt]>>_NeuQuant._betaShift;this._freq[tt]-=at,this._bias[tt]+=at<<_NeuQuant._gammaShift}return this._freq[$]+=_NeuQuant._beta,this._bias[$]-=_NeuQuant._betaGamma,et}},NeuQuant=_NeuQuant;__publicField(NeuQuant,"_prime1",499);__publicField(NeuQuant,"_prime2",491);__publicField(NeuQuant,"_prime3",487);__publicField(NeuQuant,"_prime4",503);__publicField(NeuQuant,"_minpicturebytes",_NeuQuant._prime4);__publicField(NeuQuant,"_nCycles",100);__publicField(NeuQuant,"_initialBiasShift",16);__publicField(NeuQuant,"_initialBias",1<<_NeuQuant._initialBiasShift);__publicField(NeuQuant,"_gammaShift",10);__publicField(NeuQuant,"_betaShift",10);__publicField(NeuQuant,"_beta",_NeuQuant._initialBias>>_NeuQuant._betaShift);__publicField(NeuQuant,"_betaGamma",_NeuQuant._initialBias<<_NeuQuant._gammaShift-_NeuQuant._betaShift);__publicField(NeuQuant,"_radiusBiasShift",6);__publicField(NeuQuant,"_radiusBias",1<<_NeuQuant._radiusBiasShift);__publicField(NeuQuant,"_radiusDecrease",30);__publicField(NeuQuant,"_alphaBiasShift",10);__publicField(NeuQuant,"_initAlpha",1<<_NeuQuant._alphaBiasShift);__publicField(NeuQuant,"_radBiasShift",8);__publicField(NeuQuant,"_radBias",1<<_NeuQuant._radBiasShift);__publicField(NeuQuant,"_alphaRadBiasShift",_NeuQuant._alphaBiasShift+_NeuQuant._radBiasShift);__publicField(NeuQuant,"_alphaRadBias",1<<_NeuQuant._alphaRadBiasShift);var networkBiasShift2=3,NeuronFloat=class{constructor(s){__publicField(this,"r"),__publicField(this,"g"),__publicField(this,"b"),__publicField(this,"a"),this.r=this.g=this.b=this.a=s}toPoint(){return Point.createByRGBA(this.r>>networkBiasShift2,this.g>>networkBiasShift2,this.b>>networkBiasShift2,this.a>>networkBiasShift2)}subtract(s,o,h,d){this.r-=s,this.g-=o,this.b-=h,this.a-=d}},_NeuQuantFloat=class extends AbstractPaletteQuantizer{constructor(s,o=256){super(),__publicField(this,"_pointArray"),__publicField(this,"_networkSize"),__publicField(this,"_network"),__publicField(this,"_sampleFactor"),__publicField(this,"_radPower"),__publicField(this,"_freq"),__publicField(this,"_bias"),__publicField(this,"_distance"),this._distance=s,this._pointArray=[],this._sampleFactor=1,this._networkSize=o,this._distance.setWhitePoint(255<<networkBiasShift2,255<<networkBiasShift2,255<<networkBiasShift2,255<<networkBiasShift2)}sample(s){this._pointArray=this._pointArray.concat(s.getPointArray())}*quantize(){this._init(),yield*this._learn(),yield{palette:this._buildPalette(),progress:100}}_init(){this._freq=[],this._bias=[],this._radPower=[],this._network=[];for(let s=0;s<this._networkSize;s++)this._network[s]=new NeuronFloat((s<<networkBiasShift2+8)/this._networkSize),this._freq[s]=_NeuQuantFloat._initialBias/this._networkSize,this._bias[s]=0}*_learn(){let s=this._sampleFactor;const o=this._pointArray.length;o<_NeuQuantFloat._minpicturebytes&&(s=1);const h=30+(s-1)/3,d=o/s;let g=d/_NeuQuantFloat._nCycles|0,_=_NeuQuantFloat._initAlpha,b=(this._networkSize>>3)*_NeuQuantFloat._radiusBias,$=b>>_NeuQuantFloat._radiusBiasShift;$<=1&&($=0);for(let rt=0;rt<$;rt++)this._radPower[rt]=_*(($*$-rt*rt)*_NeuQuantFloat._radBias/($*$));let et;o<_NeuQuantFloat._minpicturebytes?et=1:o%_NeuQuantFloat._prime1!==0?et=_NeuQuantFloat._prime1:o%_NeuQuantFloat._prime2!==0?et=_NeuQuantFloat._prime2:o%_NeuQuantFloat._prime3!==0?et=_NeuQuantFloat._prime3:et=_NeuQuantFloat._prime4;const tt=new ProgressTracker(d,99);for(let rt=0,nt=0;rt<d;){tt.shouldNotify(rt)&&(yield{progress:tt.progress});const At=this._pointArray[nt],at=At.b<<networkBiasShift2,lt=At.g<<networkBiasShift2,gt=At.r<<networkBiasShift2,_t=At.a<<networkBiasShift2,ct=this._contest(at,lt,gt,_t);if(this._alterSingle(_,ct,at,lt,gt,_t),$!==0&&this._alterNeighbour($,ct,at,lt,gt,_t),nt+=et,nt>=o&&(nt-=o),rt++,g===0&&(g=1),rt%g===0){_-=_/h,b-=b/_NeuQuantFloat._radiusDecrease,$=b>>_NeuQuantFloat._radiusBiasShift,$<=1&&($=0);for(let pt=0;pt<$;pt++)this._radPower[pt]=_*(($*$-pt*pt)*_NeuQuantFloat._radBias/($*$))}}}_buildPalette(){const s=new Palette;return this._network.forEach(o=>{s.add(o.toPoint())}),s.sort(),s}_alterNeighbour(s,o,h,d,g,_){let b=o-s;b<-1&&(b=-1);let $=o+s;$>this._networkSize&&($=this._networkSize);let et=o+1,tt=o-1,rt=1;for(;et<$||tt>b;){const nt=this._radPower[rt++]/_NeuQuantFloat._alphaRadBias;if(et<$){const At=this._network[et++];At.subtract(nt*(At.r-g),nt*(At.g-d),nt*(At.b-h),nt*(At.a-_))}if(tt>b){const At=this._network[tt--];At.subtract(nt*(At.r-g),nt*(At.g-d),nt*(At.b-h),nt*(At.a-_))}}}_alterSingle(s,o,h,d,g,_){s/=_NeuQuantFloat._initAlpha;const b=this._network[o];b.subtract(s*(b.r-g),s*(b.g-d),s*(b.b-h),s*(b.a-_))}_contest(s,o,h,d){const g=1020<<networkBiasShift2;let _=2147483647,b=_,$=-1,et=$;for(let tt=0;tt<this._networkSize;tt++){const rt=this._network[tt],nt=this._distance.calculateNormalized(rt,{r:h,g:o,b:s,a:d})*g;nt<_&&(_=nt,$=tt);const At=nt-(this._bias[tt]>>_NeuQuantFloat._initialBiasShift-networkBiasShift2);At<b&&(b=At,et=tt);const at=this._freq[tt]>>_NeuQuantFloat._betaShift;this._freq[tt]-=at,this._bias[tt]+=at<<_NeuQuantFloat._gammaShift}return this._freq[$]+=_NeuQuantFloat._beta,this._bias[$]-=_NeuQuantFloat._betaGamma,et}},NeuQuantFloat=_NeuQuantFloat;__publicField(NeuQuantFloat,"_prime1",499);__publicField(NeuQuantFloat,"_prime2",491);__publicField(NeuQuantFloat,"_prime3",487);__publicField(NeuQuantFloat,"_prime4",503);__publicField(NeuQuantFloat,"_minpicturebytes",_NeuQuantFloat._prime4);__publicField(NeuQuantFloat,"_nCycles",100);__publicField(NeuQuantFloat,"_initialBiasShift",16);__publicField(NeuQuantFloat,"_initialBias",1<<_NeuQuantFloat._initialBiasShift);__publicField(NeuQuantFloat,"_gammaShift",10);__publicField(NeuQuantFloat,"_betaShift",10);__publicField(NeuQuantFloat,"_beta",_NeuQuantFloat._initialBias>>_NeuQuantFloat._betaShift);__publicField(NeuQuantFloat,"_betaGamma",_NeuQuantFloat._initialBias<<_NeuQuantFloat._gammaShift-_NeuQuantFloat._betaShift);__publicField(NeuQuantFloat,"_radiusBiasShift",6);__publicField(NeuQuantFloat,"_radiusBias",1<<_NeuQuantFloat._radiusBiasShift);__publicField(NeuQuantFloat,"_radiusDecrease",30);__publicField(NeuQuantFloat,"_alphaBiasShift",10);__publicField(NeuQuantFloat,"_initAlpha",1<<_NeuQuantFloat._alphaBiasShift);__publicField(NeuQuantFloat,"_radBiasShift",8);__publicField(NeuQuantFloat,"_radBias",1<<_NeuQuantFloat._radBiasShift);__publicField(NeuQuantFloat,"_alphaRadBiasShift",_NeuQuantFloat._alphaBiasShift+_NeuQuantFloat._radBiasShift);__publicField(NeuQuantFloat,"_alphaRadBias",1<<_NeuQuantFloat._alphaRadBiasShift);var _ColorHistogram=class{constructor(s,o){__publicField(this,"_method"),__publicField(this,"_hueStats"),__publicField(this,"_histogram"),__publicField(this,"_initColors"),__publicField(this,"_minHueCols"),this._method=s,this._minHueCols=o<<2,this._initColors=o<<2,this._hueStats=new HueStatistics(_ColorHistogram._hueGroups,this._minHueCols),this._histogram=Object.create(null)}sample(s){switch(this._method){case 1:this._colorStats1D(s);break;case 2:this._colorStats2D(s);break}}getImportanceSortedColorsIDXI32(){const s=stableSort(Object.keys(this._histogram),(h,d)=>this._histogram[d]-this._histogram[h]);if(s.length===0)return[];let o;switch(this._method){case 1:const h=Math.min(s.length,this._initColors),d=s[h-1],g=this._histogram[d];o=s.slice(0,h);let _=h;const b=s.length;for(;_<b&&this._histogram[s[_]]===g;)o.push(s[_++]);this._hueStats.injectIntoArray(o);break;case 2:o=s;break;default:throw new Error("Incorrect method")}return o.map(h=>+h)}_colorStats1D(s){const o=this._histogram,h=s.getPointArray(),d=h.length;for(let g=0;g<d;g++){const _=h[g].uint32;this._hueStats.check(_),_ in o?o[_]++:o[_]=1}}_colorStats2D(s){const o=s.getWidth(),h=s.getHeight(),d=s.getPointArray(),g=_ColorHistogram._boxSize[0],_=_ColorHistogram._boxSize[1],b=g*_,$=this._makeBoxes(o,h,g,_),et=this._histogram;$.forEach(tt=>{let rt=Math.round(tt.w*tt.h/b)*_ColorHistogram._boxPixels;rt<2&&(rt=2);const nt={};this._iterateBox(tt,o,At=>{const at=d[At].uint32;this._hueStats.check(at),at in et?et[at]++:at in nt?++nt[at]>=rt&&(et[at]=nt[at]):nt[at]=1})}),this._hueStats.injectIntoDictionary(et)}_iterateBox(s,o,h){const d=s,g=d.y*o+d.x,_=(d.y+d.h-1)*o+(d.x+d.w-1),b=o-d.w+1;let $=0,et=g;do h.call(this,et),et+=++$%d.w===0?b:1;while(et<=_)}_makeBoxes(s,o,h,d){const g=s%h,_=o%d,b=s-g,$=o-_,et=[];for(let tt=0;tt<o;tt+=d)for(let rt=0;rt<s;rt+=h)et.push({x:rt,y:tt,w:rt===b?g:h,h:tt===$?_:d});return et}},ColorHistogram=_ColorHistogram;__publicField(ColorHistogram,"_boxSize",[64,64]);__publicField(ColorHistogram,"_boxPixels",2);__publicField(ColorHistogram,"_hueGroups",10);var RemovedColor=class{constructor(s,o,h){__publicField(this,"index"),__publicField(this,"color"),__publicField(this,"distance"),this.index=s,this.color=o,this.distance=h}},RGBQuant=class extends AbstractPaletteQuantizer{constructor(s,o=256,h=2){super(),__publicField(this,"_colors"),__publicField(this,"_initialDistance"),__publicField(this,"_distanceIncrement"),__publicField(this,"_histogram"),__publicField(this,"_distance"),this._distance=s,this._colors=o,this._histogram=new ColorHistogram(h,o),this._initialDistance=.01,this._distanceIncrement=.005}sample(s){this._histogram.sample(s)}*quantize(){const s=this._histogram.getImportanceSortedColorsIDXI32();if(s.length===0)throw new Error("No colors in image");yield*this._buildPalette(s)}*_buildPalette(s){const o=new Palette,h=o.getPointContainer().getPointArray(),d=new Array(s.length);for(let rt=0;rt<s.length;rt++)h.push(Point.createByUint32(s[rt])),d[rt]=1;const g=h.length,_=[];let b=g,$=this._initialDistance;const et=new ProgressTracker(b-this._colors,99);for(;b>this._colors;){_.length=0;for(let rt=0;rt<g;rt++){if(et.shouldNotify(g-b)&&(yield{progress:et.progress}),d[rt]===0)continue;const nt=h[rt];for(let At=rt+1;At<g;At++){if(d[At]===0)continue;const at=h[At],lt=this._distance.calculateNormalized(nt,at);lt<$&&(_.push(new RemovedColor(At,at,lt)),d[At]=0,b--)}}$+=b>this._colors*3?this._initialDistance:this._distanceIncrement}if(b<this._colors){stableSort(_,(nt,At)=>At.distance-nt.distance);let rt=0;for(;b<this._colors&&rt<_.length;){const nt=_[rt];d[nt.index]=1,b++,rt++}}let tt=h.length;for(let rt=tt-1;rt>=0;rt--)d[rt]===0&&(rt!==tt-1&&(h[rt]=h[tt-1]),--tt);h.length=tt,o.sort(),yield{palette:o,progress:100}}};function createArray1D(s){const o=[];for(let h=0;h<s;h++)o[h]=0;return o}function createArray4D(s,o,h,d){const g=new Array(s);for(let _=0;_<s;_++){g[_]=new Array(o);for(let b=0;b<o;b++){g[_][b]=new Array(h);for(let $=0;$<h;$++){g[_][b][$]=new Array(d);for(let et=0;et<d;et++)g[_][b][$][et]=0}}}return g}function createArray3D(s,o,h){const d=new Array(s);for(let g=0;g<s;g++){d[g]=new Array(o);for(let _=0;_<o;_++){d[g][_]=new Array(h);for(let b=0;b<h;b++)d[g][_][b]=0}}return d}function fillArray3D(s,o,h,d,g){for(let _=0;_<o;_++){s[_]=[];for(let b=0;b<h;b++){s[_][b]=[];for(let $=0;$<d;$++)s[_][b][$]=g}}}function fillArray1D(s,o,h){for(let d=0;d<o;d++)s[d]=h}var WuColorCube=class{constructor(){__publicField(this,"redMinimum"),__publicField(this,"redMaximum"),__publicField(this,"greenMinimum"),__publicField(this,"greenMaximum"),__publicField(this,"blueMinimum"),__publicField(this,"blueMaximum"),__publicField(this,"volume"),__publicField(this,"alphaMinimum"),__publicField(this,"alphaMaximum")}},_WuQuant=class extends AbstractPaletteQuantizer{constructor(s,o=256,h=5){super(),__publicField(this,"_reds"),__publicField(this,"_greens"),__publicField(this,"_blues"),__publicField(this,"_alphas"),__publicField(this,"_sums"),__publicField(this,"_weights"),__publicField(this,"_momentsRed"),__publicField(this,"_momentsGreen"),__publicField(this,"_momentsBlue"),__publicField(this,"_momentsAlpha"),__publicField(this,"_moments"),__publicField(this,"_table"),__publicField(this,"_pixels"),__publicField(this,"_cubes"),__publicField(this,"_colors"),__publicField(this,"_significantBitsPerChannel"),__publicField(this,"_maxSideIndex"),__publicField(this,"_alphaMaxSideIndex"),__publicField(this,"_sideSize"),__publicField(this,"_alphaSideSize"),__publicField(this,"_distance"),this._distance=s,this._setQuality(h),this._initialize(o)}sample(s){const o=s.getPointArray();for(let h=0,d=o.length;h<d;h++)this._addColor(o[h]);this._pixels=this._pixels.concat(o)}*quantize(){yield*this._preparePalette();const s=new Palette;for(let o=0;o<this._colors;o++)if(this._sums[o]>0){const h=this._sums[o],d=this._reds[o]/h,g=this._greens[o]/h,_=this._blues[o]/h,b=this._alphas[o]/h,$=Point.createByRGBA(d|0,g|0,_|0,b|0);s.add($)}s.sort(),yield{palette:s,progress:100}}*_preparePalette(){yield*this._calculateMoments();let s=0;const o=createArray1D(this._colors);for(let b=1;b<this._colors;++b){this._cut(this._cubes[s],this._cubes[b])?(o[s]=this._cubes[s].volume>1?this._calculateVariance(this._cubes[s]):0,o[b]=this._cubes[b].volume>1?this._calculateVariance(this._cubes[b]):0):(o[s]=0,b--),s=0;let $=o[0];for(let et=1;et<=b;++et)o[et]>$&&($=o[et],s=et);if($<=0){this._colors=b+1;break}}const h=[],d=[],g=[],_=[];for(let b=0;b<this._colors;++b){const $=_WuQuant._volume(this._cubes[b],this._weights);$>0?(h[b]=_WuQuant._volume(this._cubes[b],this._momentsRed)/$|0,d[b]=_WuQuant._volume(this._cubes[b],this._momentsGreen)/$|0,g[b]=_WuQuant._volume(this._cubes[b],this._momentsBlue)/$|0,_[b]=_WuQuant._volume(this._cubes[b],this._momentsAlpha)/$|0):(h[b]=0,d[b]=0,g[b]=0,_[b]=0)}this._reds=createArray1D(this._colors+1),this._greens=createArray1D(this._colors+1),this._blues=createArray1D(this._colors+1),this._alphas=createArray1D(this._colors+1),this._sums=createArray1D(this._colors+1);for(let b=0,$=this._pixels.length;b<$;b++){const et=this._pixels[b];let tt=-1,rt=Number.MAX_VALUE;for(let nt=0;nt<this._colors;nt++){const At=h[nt],at=d[nt],lt=g[nt],gt=_[nt],_t=this._distance.calculateRaw(At,at,lt,gt,et.r,et.g,et.b,et.a);_t<rt&&(rt=_t,tt=nt)}this._reds[tt]+=et.r,this._greens[tt]+=et.g,this._blues[tt]+=et.b,this._alphas[tt]+=et.a,this._sums[tt]++}}_addColor(s){const o=8-this._significantBitsPerChannel,h=(s.r>>o)+1,d=(s.g>>o)+1,g=(s.b>>o)+1,_=(s.a>>o)+1;this._weights[_][h][d][g]++,this._momentsRed[_][h][d][g]+=s.r,this._momentsGreen[_][h][d][g]+=s.g,this._momentsBlue[_][h][d][g]+=s.b,this._momentsAlpha[_][h][d][g]+=s.a,this._moments[_][h][d][g]+=this._table[s.r]+this._table[s.g]+this._table[s.b]+this._table[s.a]}*_calculateMoments(){const s=[],o=[],h=[],d=[],g=[],_=[],b=createArray3D(this._sideSize,this._sideSize,this._sideSize),$=createArray3D(this._sideSize,this._sideSize,this._sideSize),et=createArray3D(this._sideSize,this._sideSize,this._sideSize),tt=createArray3D(this._sideSize,this._sideSize,this._sideSize),rt=createArray3D(this._sideSize,this._sideSize,this._sideSize),nt=createArray3D(this._sideSize,this._sideSize,this._sideSize);let At=0;const at=new ProgressTracker(this._alphaMaxSideIndex*this._maxSideIndex,99);for(let lt=1;lt<=this._alphaMaxSideIndex;++lt){fillArray3D(b,this._sideSize,this._sideSize,this._sideSize,0),fillArray3D($,this._sideSize,this._sideSize,this._sideSize,0),fillArray3D(et,this._sideSize,this._sideSize,this._sideSize,0),fillArray3D(tt,this._sideSize,this._sideSize,this._sideSize,0),fillArray3D(rt,this._sideSize,this._sideSize,this._sideSize,0),fillArray3D(nt,this._sideSize,this._sideSize,this._sideSize,0);for(let gt=1;gt<=this._maxSideIndex;++gt,++At){at.shouldNotify(At)&&(yield{progress:at.progress}),fillArray1D(s,this._sideSize,0),fillArray1D(o,this._sideSize,0),fillArray1D(h,this._sideSize,0),fillArray1D(d,this._sideSize,0),fillArray1D(g,this._sideSize,0),fillArray1D(_,this._sideSize,0);for(let _t=1;_t<=this._maxSideIndex;++_t){let ct=0,pt=0,dt=0,mt=0,Qt=0,xt=0;for(let bt=1;bt<=this._maxSideIndex;++bt)ct+=this._weights[lt][gt][_t][bt],pt+=this._momentsRed[lt][gt][_t][bt],dt+=this._momentsGreen[lt][gt][_t][bt],mt+=this._momentsBlue[lt][gt][_t][bt],Qt+=this._momentsAlpha[lt][gt][_t][bt],xt+=this._moments[lt][gt][_t][bt],s[bt]+=ct,o[bt]+=pt,h[bt]+=dt,d[bt]+=mt,g[bt]+=Qt,_[bt]+=xt,b[gt][_t][bt]=b[gt-1][_t][bt]+s[bt],$[gt][_t][bt]=$[gt-1][_t][bt]+o[bt],et[gt][_t][bt]=et[gt-1][_t][bt]+h[bt],tt[gt][_t][bt]=tt[gt-1][_t][bt]+d[bt],rt[gt][_t][bt]=rt[gt-1][_t][bt]+g[bt],nt[gt][_t][bt]=nt[gt-1][_t][bt]+_[bt],this._weights[lt][gt][_t][bt]=this._weights[lt-1][gt][_t][bt]+b[gt][_t][bt],this._momentsRed[lt][gt][_t][bt]=this._momentsRed[lt-1][gt][_t][bt]+$[gt][_t][bt],this._momentsGreen[lt][gt][_t][bt]=this._momentsGreen[lt-1][gt][_t][bt]+et[gt][_t][bt],this._momentsBlue[lt][gt][_t][bt]=this._momentsBlue[lt-1][gt][_t][bt]+tt[gt][_t][bt],this._momentsAlpha[lt][gt][_t][bt]=this._momentsAlpha[lt-1][gt][_t][bt]+rt[gt][_t][bt],this._moments[lt][gt][_t][bt]=this._moments[lt-1][gt][_t][bt]+nt[gt][_t][bt]}}}}static _volumeFloat(s,o){return o[s.alphaMaximum][s.redMaximum][s.greenMaximum][s.blueMaximum]-o[s.alphaMaximum][s.redMaximum][s.greenMinimum][s.blueMaximum]-o[s.alphaMaximum][s.redMinimum][s.greenMaximum][s.blueMaximum]+o[s.alphaMaximum][s.redMinimum][s.greenMinimum][s.blueMaximum]-o[s.alphaMinimum][s.redMaximum][s.greenMaximum][s.blueMaximum]+o[s.alphaMinimum][s.redMaximum][s.greenMinimum][s.blueMaximum]+o[s.alphaMinimum][s.redMinimum][s.greenMaximum][s.blueMaximum]-o[s.alphaMinimum][s.redMinimum][s.greenMinimum][s.blueMaximum]-(o[s.alphaMaximum][s.redMaximum][s.greenMaximum][s.blueMinimum]-o[s.alphaMinimum][s.redMaximum][s.greenMaximum][s.blueMinimum]-o[s.alphaMaximum][s.redMaximum][s.greenMinimum][s.blueMinimum]+o[s.alphaMinimum][s.redMaximum][s.greenMinimum][s.blueMinimum]-o[s.alphaMaximum][s.redMinimum][s.greenMaximum][s.blueMinimum]+o[s.alphaMinimum][s.redMinimum][s.greenMaximum][s.blueMinimum]+o[s.alphaMaximum][s.redMinimum][s.greenMinimum][s.blueMinimum]-o[s.alphaMinimum][s.redMinimum][s.greenMinimum][s.blueMinimum])}static _volume(s,o){return _WuQuant._volumeFloat(s,o)|0}static _top(s,o,h,d){let g;switch(o){case _WuQuant._alpha:g=d[h][s.redMaximum][s.greenMaximum][s.blueMaximum]-d[h][s.redMaximum][s.greenMinimum][s.blueMaximum]-d[h][s.redMinimum][s.greenMaximum][s.blueMaximum]+d[h][s.redMinimum][s.greenMinimum][s.blueMaximum]-(d[h][s.redMaximum][s.greenMaximum][s.blueMinimum]-d[h][s.redMaximum][s.greenMinimum][s.blueMinimum]-d[h][s.redMinimum][s.greenMaximum][s.blueMinimum]+d[h][s.redMinimum][s.greenMinimum][s.blueMinimum]);break;case _WuQuant._red:g=d[s.alphaMaximum][h][s.greenMaximum][s.blueMaximum]-d[s.alphaMaximum][h][s.greenMinimum][s.blueMaximum]-d[s.alphaMinimum][h][s.greenMaximum][s.blueMaximum]+d[s.alphaMinimum][h][s.greenMinimum][s.blueMaximum]-(d[s.alphaMaximum][h][s.greenMaximum][s.blueMinimum]-d[s.alphaMaximum][h][s.greenMinimum][s.blueMinimum]-d[s.alphaMinimum][h][s.greenMaximum][s.blueMinimum]+d[s.alphaMinimum][h][s.greenMinimum][s.blueMinimum]);break;case _WuQuant._green:g=d[s.alphaMaximum][s.redMaximum][h][s.blueMaximum]-d[s.alphaMaximum][s.redMinimum][h][s.blueMaximum]-d[s.alphaMinimum][s.redMaximum][h][s.blueMaximum]+d[s.alphaMinimum][s.redMinimum][h][s.blueMaximum]-(d[s.alphaMaximum][s.redMaximum][h][s.blueMinimum]-d[s.alphaMaximum][s.redMinimum][h][s.blueMinimum]-d[s.alphaMinimum][s.redMaximum][h][s.blueMinimum]+d[s.alphaMinimum][s.redMinimum][h][s.blueMinimum]);break;case _WuQuant._blue:g=d[s.alphaMaximum][s.redMaximum][s.greenMaximum][h]-d[s.alphaMaximum][s.redMaximum][s.greenMinimum][h]-d[s.alphaMaximum][s.redMinimum][s.greenMaximum][h]+d[s.alphaMaximum][s.redMinimum][s.greenMinimum][h]-(d[s.alphaMinimum][s.redMaximum][s.greenMaximum][h]-d[s.alphaMinimum][s.redMaximum][s.greenMinimum][h]-d[s.alphaMinimum][s.redMinimum][s.greenMaximum][h]+d[s.alphaMinimum][s.redMinimum][s.greenMinimum][h]);break;default:throw new Error("impossible")}return g|0}static _bottom(s,o,h){switch(o){case _WuQuant._alpha:return-h[s.alphaMinimum][s.redMaximum][s.greenMaximum][s.blueMaximum]+h[s.alphaMinimum][s.redMaximum][s.greenMinimum][s.blueMaximum]+h[s.alphaMinimum][s.redMinimum][s.greenMaximum][s.blueMaximum]-h[s.alphaMinimum][s.redMinimum][s.greenMinimum][s.blueMaximum]-(-h[s.alphaMinimum][s.redMaximum][s.greenMaximum][s.blueMinimum]+h[s.alphaMinimum][s.redMaximum][s.greenMinimum][s.blueMinimum]+h[s.alphaMinimum][s.redMinimum][s.greenMaximum][s.blueMinimum]-h[s.alphaMinimum][s.redMinimum][s.greenMinimum][s.blueMinimum]);case _WuQuant._red:return-h[s.alphaMaximum][s.redMinimum][s.greenMaximum][s.blueMaximum]+h[s.alphaMaximum][s.redMinimum][s.greenMinimum][s.blueMaximum]+h[s.alphaMinimum][s.redMinimum][s.greenMaximum][s.blueMaximum]-h[s.alphaMinimum][s.redMinimum][s.greenMinimum][s.blueMaximum]-(-h[s.alphaMaximum][s.redMinimum][s.greenMaximum][s.blueMinimum]+h[s.alphaMaximum][s.redMinimum][s.greenMinimum][s.blueMinimum]+h[s.alphaMinimum][s.redMinimum][s.greenMaximum][s.blueMinimum]-h[s.alphaMinimum][s.redMinimum][s.greenMinimum][s.blueMinimum]);case _WuQuant._green:return-h[s.alphaMaximum][s.redMaximum][s.greenMinimum][s.blueMaximum]+h[s.alphaMaximum][s.redMinimum][s.greenMinimum][s.blueMaximum]+h[s.alphaMinimum][s.redMaximum][s.greenMinimum][s.blueMaximum]-h[s.alphaMinimum][s.redMinimum][s.greenMinimum][s.blueMaximum]-(-h[s.alphaMaximum][s.redMaximum][s.greenMinimum][s.blueMinimum]+h[s.alphaMaximum][s.redMinimum][s.greenMinimum][s.blueMinimum]+h[s.alphaMinimum][s.redMaximum][s.greenMinimum][s.blueMinimum]-h[s.alphaMinimum][s.redMinimum][s.greenMinimum][s.blueMinimum]);case _WuQuant._blue:return-h[s.alphaMaximum][s.redMaximum][s.greenMaximum][s.blueMinimum]+h[s.alphaMaximum][s.redMaximum][s.greenMinimum][s.blueMinimum]+h[s.alphaMaximum][s.redMinimum][s.greenMaximum][s.blueMinimum]-h[s.alphaMaximum][s.redMinimum][s.greenMinimum][s.blueMinimum]-(-h[s.alphaMinimum][s.redMaximum][s.greenMaximum][s.blueMinimum]+h[s.alphaMinimum][s.redMaximum][s.greenMinimum][s.blueMinimum]+h[s.alphaMinimum][s.redMinimum][s.greenMaximum][s.blueMinimum]-h[s.alphaMinimum][s.redMinimum][s.greenMinimum][s.blueMinimum]);default:return 0}}_calculateVariance(s){const o=_WuQuant._volume(s,this._momentsRed),h=_WuQuant._volume(s,this._momentsGreen),d=_WuQuant._volume(s,this._momentsBlue),g=_WuQuant._volume(s,this._momentsAlpha),_=_WuQuant._volumeFloat(s,this._moments),b=_WuQuant._volume(s,this._weights),$=o*o+h*h+d*d+g*g;return _-$/b}_maximize(s,o,h,d,g,_,b,$,et){const tt=_WuQuant._bottom(s,o,this._momentsRed)|0,rt=_WuQuant._bottom(s,o,this._momentsGreen)|0,nt=_WuQuant._bottom(s,o,this._momentsBlue)|0,At=_WuQuant._bottom(s,o,this._momentsAlpha)|0,at=_WuQuant._bottom(s,o,this._weights)|0;let lt=0,gt=-1;for(let _t=h;_t<d;++_t){let ct=tt+_WuQuant._top(s,o,_t,this._momentsRed),pt=rt+_WuQuant._top(s,o,_t,this._momentsGreen),dt=nt+_WuQuant._top(s,o,_t,this._momentsBlue),mt=At+_WuQuant._top(s,o,_t,this._momentsAlpha),Qt=at+_WuQuant._top(s,o,_t,this._weights);if(Qt!==0){let xt=ct*ct+pt*pt+dt*dt+mt*mt,bt=xt/Qt;ct=g-ct,pt=_-pt,dt=b-dt,mt=$-mt,Qt=et-Qt,Qt!==0&&(xt=ct*ct+pt*pt+dt*dt+mt*mt,bt+=xt/Qt,bt>lt&&(lt=bt,gt=_t))}}return{max:lt,position:gt}}_cut(s,o){let h;const d=_WuQuant._volume(s,this._momentsRed),g=_WuQuant._volume(s,this._momentsGreen),_=_WuQuant._volume(s,this._momentsBlue),b=_WuQuant._volume(s,this._momentsAlpha),$=_WuQuant._volume(s,this._weights),et=this._maximize(s,_WuQuant._red,s.redMinimum+1,s.redMaximum,d,g,_,b,$),tt=this._maximize(s,_WuQuant._green,s.greenMinimum+1,s.greenMaximum,d,g,_,b,$),rt=this._maximize(s,_WuQuant._blue,s.blueMinimum+1,s.blueMaximum,d,g,_,b,$),nt=this._maximize(s,_WuQuant._alpha,s.alphaMinimum+1,s.alphaMaximum,d,g,_,b,$);if(nt.max>=et.max&&nt.max>=tt.max&&nt.max>=rt.max){if(h=_WuQuant._alpha,nt.position<0)return!1}else et.max>=nt.max&&et.max>=tt.max&&et.max>=rt.max?h=_WuQuant._red:tt.max>=nt.max&&tt.max>=et.max&&tt.max>=rt.max?h=_WuQuant._green:h=_WuQuant._blue;switch(o.redMaximum=s.redMaximum,o.greenMaximum=s.greenMaximum,o.blueMaximum=s.blueMaximum,o.alphaMaximum=s.alphaMaximum,h){case _WuQuant._red:o.redMinimum=s.redMaximum=et.position,o.greenMinimum=s.greenMinimum,o.blueMinimum=s.blueMinimum,o.alphaMinimum=s.alphaMinimum;break;case _WuQuant._green:o.greenMinimum=s.greenMaximum=tt.position,o.redMinimum=s.redMinimum,o.blueMinimum=s.blueMinimum,o.alphaMinimum=s.alphaMinimum;break;case _WuQuant._blue:o.blueMinimum=s.blueMaximum=rt.position,o.redMinimum=s.redMinimum,o.greenMinimum=s.greenMinimum,o.alphaMinimum=s.alphaMinimum;break;case _WuQuant._alpha:o.alphaMinimum=s.alphaMaximum=nt.position,o.blueMinimum=s.blueMinimum,o.redMinimum=s.redMinimum,o.greenMinimum=s.greenMinimum;break}return s.volume=(s.redMaximum-s.redMinimum)*(s.greenMaximum-s.greenMinimum)*(s.blueMaximum-s.blueMinimum)*(s.alphaMaximum-s.alphaMinimum),o.volume=(o.redMaximum-o.redMinimum)*(o.greenMaximum-o.greenMinimum)*(o.blueMaximum-o.blueMinimum)*(o.alphaMaximum-o.alphaMinimum),!0}_initialize(s){this._colors=s,this._cubes=[];for(let o=0;o<s;o++)this._cubes[o]=new WuColorCube;this._cubes[0].redMinimum=0,this._cubes[0].greenMinimum=0,this._cubes[0].blueMinimum=0,this._cubes[0].alphaMinimum=0,this._cubes[0].redMaximum=this._maxSideIndex,this._cubes[0].greenMaximum=this._maxSideIndex,this._cubes[0].blueMaximum=this._maxSideIndex,this._cubes[0].alphaMaximum=this._alphaMaxSideIndex,this._weights=createArray4D(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize),this._momentsRed=createArray4D(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize),this._momentsGreen=createArray4D(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize),this._momentsBlue=createArray4D(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize),this._momentsAlpha=createArray4D(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize),this._moments=createArray4D(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize),this._table=[];for(let o=0;o<256;++o)this._table[o]=o*o;this._pixels=[]}_setQuality(s=5){this._significantBitsPerChannel=s,this._maxSideIndex=1<<this._significantBitsPerChannel,this._alphaMaxSideIndex=this._maxSideIndex,this._sideSize=this._maxSideIndex+1,this._alphaSideSize=this._alphaMaxSideIndex+1}},WuQuant=_WuQuant;__publicField(WuQuant,"_alpha",3);__publicField(WuQuant,"_red",2);__publicField(WuQuant,"_green",1);__publicField(WuQuant,"_blue",0);var image_exports={};__export(image_exports,{AbstractImageQuantizer:()=>AbstractImageQuantizer,ErrorDiffusionArray:()=>ErrorDiffusionArray,ErrorDiffusionArrayKernel:()=>ErrorDiffusionArrayKernel,ErrorDiffusionRiemersma:()=>ErrorDiffusionRiemersma,NearestColor:()=>NearestColor});var AbstractImageQuantizer=class{quantizeSync(s,o){for(const h of this.quantize(s,o))if(h.pointContainer)return h.pointContainer;throw new Error("unreachable")}},NearestColor=class extends AbstractImageQuantizer{constructor(s){super(),__publicField(this,"_distance"),this._distance=s}*quantize(s,o){const h=s.getPointArray(),d=s.getWidth(),g=s.getHeight(),_=new ProgressTracker(g,99);for(let b=0;b<g;b++){_.shouldNotify(b)&&(yield{progress:_.progress});for(let $=0,et=b*d;$<d;$++,et++){const tt=h[et];tt.from(o.getNearestColor(this._distance,tt))}}yield{pointContainer:s,progress:100}}},ErrorDiffusionArrayKernel=(s=>(s[s.FloydSteinberg=0]="FloydSteinberg",s[s.FalseFloydSteinberg=1]="FalseFloydSteinberg",s[s.Stucki=2]="Stucki",s[s.Atkinson=3]="Atkinson",s[s.Jarvis=4]="Jarvis",s[s.Burkes=5]="Burkes",s[s.Sierra=6]="Sierra",s[s.TwoSierra=7]="TwoSierra",s[s.SierraLite=8]="SierraLite",s))(ErrorDiffusionArrayKernel||{}),ErrorDiffusionArray=class extends AbstractImageQuantizer{constructor(s,o,h=!0,d=0,g=!1){super(),__publicField(this,"_minColorDistance"),__publicField(this,"_serpentine"),__publicField(this,"_kernel"),__publicField(this,"_calculateErrorLikeGIMP"),__publicField(this,"_distance"),this._setKernel(o),this._distance=s,this._minColorDistance=d,this._serpentine=h,this._calculateErrorLikeGIMP=g}*quantize(s,o){const h=s.getPointArray(),d=new Point,g=s.getWidth(),_=s.getHeight(),b=[];let $=1,et=1;for(const rt of this._kernel){const nt=rt[2]+1;et<nt&&(et=nt)}for(let rt=0;rt<et;rt++)this._fillErrorLine(b[rt]=[],g);const tt=new ProgressTracker(_,99);for(let rt=0;rt<_;rt++){tt.shouldNotify(rt)&&(yield{progress:tt.progress}),this._serpentine&&($*=-1);const nt=rt*g,At=$===1?0:g-1,at=$===1?g:-1;this._fillErrorLine(b[0],g),b.push(b.shift());const lt=b[0];for(let gt=At,_t=nt+At;gt!==at;gt+=$,_t+=$){const ct=h[_t],pt=lt[gt];d.from(ct);const dt=Point.createByRGBA(inRange0to255Rounded(ct.r+pt[0]),inRange0to255Rounded(ct.g+pt[1]),inRange0to255Rounded(ct.b+pt[2]),inRange0to255Rounded(ct.a+pt[3])),mt=o.getNearestColor(this._distance,dt);if(ct.from(mt),this._minColorDistance&&this._distance.calculateNormalized(d,mt)<this._minColorDistance)continue;let Qt,xt,bt,kt;this._calculateErrorLikeGIMP?(Qt=dt.r-mt.r,xt=dt.g-mt.g,bt=dt.b-mt.b,kt=dt.a-mt.a):(Qt=d.r-mt.r,xt=d.g-mt.g,bt=d.b-mt.b,kt=d.a-mt.a);const Lt=$===1?0:this._kernel.length-1,Ht=$===1?this._kernel.length:-1;for(let Pt=Lt;Pt!==Ht;Pt+=$){const jt=this._kernel[Pt][1]*$,Vt=this._kernel[Pt][2];if(jt+gt>=0&&jt+gt<g&&Vt+rt>=0&&Vt+rt<_){const Xt=this._kernel[Pt][0],nr=b[Vt][jt+gt];nr[0]+=Qt*Xt,nr[1]+=xt*Xt,nr[2]+=bt*Xt,nr[3]+=kt*Xt}}}}yield{pointContainer:s,progress:100}}_fillErrorLine(s,o){s.length>o&&(s.length=o);const h=s.length;for(let d=0;d<h;d++){const g=s[d];g[0]=g[1]=g[2]=g[3]=0}for(let d=h;d<o;d++)s[d]=[0,0,0,0]}_setKernel(s){switch(s){case 0:this._kernel=[[7/16,1,0],[3/16,-1,1],[5/16,0,1],[1/16,1,1]];break;case 1:this._kernel=[[3/8,1,0],[3/8,0,1],[2/8,1,1]];break;case 2:this._kernel=[[8/42,1,0],[4/42,2,0],[2/42,-2,1],[4/42,-1,1],[8/42,0,1],[4/42,1,1],[2/42,2,1],[1/42,-2,2],[2/42,-1,2],[4/42,0,2],[2/42,1,2],[1/42,2,2]];break;case 3:this._kernel=[[1/8,1,0],[1/8,2,0],[1/8,-1,1],[1/8,0,1],[1/8,1,1],[1/8,0,2]];break;case 4:this._kernel=[[7/48,1,0],[5/48,2,0],[3/48,-2,1],[5/48,-1,1],[7/48,0,1],[5/48,1,1],[3/48,2,1],[1/48,-2,2],[3/48,-1,2],[5/48,0,2],[3/48,1,2],[1/48,2,2]];break;case 5:this._kernel=[[8/32,1,0],[4/32,2,0],[2/32,-2,1],[4/32,-1,1],[8/32,0,1],[4/32,1,1],[2/32,2,1]];break;case 6:this._kernel=[[5/32,1,0],[3/32,2,0],[2/32,-2,1],[4/32,-1,1],[5/32,0,1],[4/32,1,1],[2/32,2,1],[2/32,-1,2],[3/32,0,2],[2/32,1,2]];break;case 7:this._kernel=[[4/16,1,0],[3/16,2,0],[1/16,-2,1],[2/16,-1,1],[3/16,0,1],[2/16,1,1],[1/16,2,1]];break;case 8:this._kernel=[[2/4,1,0],[1/4,-1,1],[1/4,0,1]];break;default:throw new Error(`ErrorDiffusionArray: unknown kernel = ${s}`)}}};function*hilbertCurve(s,o,h){const d=Math.max(s,o),g=Math.floor(Math.log(d)/Math.log(2)+1),_=new ProgressTracker(s*o,99),b={width:s,height:o,level:g,callback:h,tracker:_,index:0,x:0,y:0};yield*walkHilbert(b,1),visit(b,0)}function*walkHilbert(s,o){if(!(s.level<1)){switch(s.tracker.shouldNotify(s.index)&&(yield{progress:s.tracker.progress}),s.level--,o){case 2:yield*walkHilbert(s,1),visit(s,3),yield*walkHilbert(s,2),visit(s,4),yield*walkHilbert(s,2),visit(s,2),yield*walkHilbert(s,4);break;case 3:yield*walkHilbert(s,4),visit(s,2),yield*walkHilbert(s,3),visit(s,1),yield*walkHilbert(s,3),visit(s,3),yield*walkHilbert(s,1);break;case 1:yield*walkHilbert(s,2),visit(s,4),yield*walkHilbert(s,1),visit(s,3),yield*walkHilbert(s,1),visit(s,1),yield*walkHilbert(s,3);break;case 4:yield*walkHilbert(s,3),visit(s,1),yield*walkHilbert(s,4),visit(s,2),yield*walkHilbert(s,4),visit(s,4),yield*walkHilbert(s,2);break}s.level++}}function visit(s,o){switch(s.x>=0&&s.x<s.width&&s.y>=0&&s.y<s.height&&(s.callback(s.x,s.y),s.index++),o){case 2:s.x--;break;case 3:s.x++;break;case 1:s.y--;break;case 4:s.y++;break}}var ErrorDiffusionRiemersma=class extends AbstractImageQuantizer{constructor(s,o=16,h=1){super(),__publicField(this,"_distance"),__publicField(this,"_weights"),__publicField(this,"_errorQueueSize"),this._distance=s,this._errorQueueSize=o,this._weights=ErrorDiffusionRiemersma._createWeights(h,o)}*quantize(s,o){const h=s.getPointArray(),d=s.getWidth(),g=s.getHeight(),_=[];let b=0;for(let $=0;$<this._errorQueueSize;$++)_[$]={r:0,g:0,b:0,a:0};yield*hilbertCurve(d,g,($,et)=>{const tt=h[$+et*d];let{r:rt,g:nt,b:At,a:at}=tt;for(let ct=0;ct<this._errorQueueSize;ct++){const pt=this._weights[ct],dt=_[(ct+b)%this._errorQueueSize];rt+=dt.r*pt,nt+=dt.g*pt,At+=dt.b*pt,at+=dt.a*pt}const lt=Point.createByRGBA(inRange0to255Rounded(rt),inRange0to255Rounded(nt),inRange0to255Rounded(At),inRange0to255Rounded(at)),gt=o.getNearestColor(this._distance,lt);b=(b+1)%this._errorQueueSize;const _t=(b+this._errorQueueSize-1)%this._errorQueueSize;_[_t].r=tt.r-gt.r,_[_t].g=tt.g-gt.g,_[_t].b=tt.b-gt.b,_[_t].a=tt.a-gt.a,tt.from(gt)}),yield{pointContainer:s,progress:100}}static _createWeights(s,o){const h=[],d=Math.exp(Math.log(o)/(o-1));for(let g=0,_=1;g<o;g++)h[g]=(_+.5|0)/o*s,_*=d;return h}},quality_exports={};__export(quality_exports,{ssim:()=>ssim});var K1=.01,K2=.03;function ssim(s,o){if(s.getHeight()!==o.getHeight()||s.getWidth()!==o.getWidth())throw new Error("Images have different sizes!");const h=255,d=(K1*h)**2,g=(K2*h)**2;let _=0,b=0;return iterate(s,o,($,et,tt,rt)=>{let nt=0,At=0,at=0;for(let pt=0;pt<$.length;pt++)At+=($[pt]-tt)**2,at+=(et[pt]-rt)**2,nt+=($[pt]-tt)*(et[pt]-rt);const lt=$.length-1;At/=lt,at/=lt,nt/=lt;const gt=(2*tt*rt+d)*(2*nt+g),_t=(tt**2+rt**2+d)*(At+at+g),ct=gt/_t;b+=ct,_++}),b/_}function iterate(s,o,h){const d=s.getWidth(),g=s.getHeight();for(let _=0;_<g;_+=8)for(let b=0;b<d;b+=8){const $=Math.min(8,d-b),et=Math.min(8,g-_),tt=calculateLumaValuesForWindow(s,b,_,$,et),rt=calculateLumaValuesForWindow(o,b,_,$,et),nt=calculateAverageLuma(tt),At=calculateAverageLuma(rt);h(tt,rt,nt,At)}}function calculateLumaValuesForWindow(s,o,h,d,g){const _=s.getPointArray(),b=[];let $=0;for(let et=h;et<h+g;et++){const tt=et*s.getWidth();for(let rt=o;rt<o+d;rt++){const nt=_[tt+rt];b[$]=nt.r*.2126+nt.g*.7152+nt.b*.0722,$++}}return b}function calculateAverageLuma(s){let o=0;for(const h of s)o+=h;return o/s.length}typeof setImmediate=="function"?setImmediate:typeof process<"u"&&(process==null||process.nextTick);function buildPaletteSync(s,{colorDistanceFormula:o,paletteQuantization:h,colors:d}={}){const g=colorDistanceFormulaToColorDistance(o),_=paletteQuantizationToPaletteQuantizer(g,h,d);return s.forEach(b=>_.sample(b)),_.quantizeSync()}function applyPaletteSync(s,o,{colorDistanceFormula:h,imageQuantization:d}={}){const g=colorDistanceFormulaToColorDistance(h);return imageQuantizationToImageQuantizer(g,d).quantizeSync(s,o)}function colorDistanceFormulaToColorDistance(s="euclidean-bt709"){switch(s){case"cie94-graphic-arts":return new CIE94GraphicArts;case"cie94-textiles":return new CIE94Textiles;case"ciede2000":return new CIEDE2000;case"color-metric":return new CMetric;case"euclidean":return new Euclidean;case"euclidean-bt709":return new EuclideanBT709;case"euclidean-bt709-noalpha":return new EuclideanBT709NoAlpha;case"manhattan":return new Manhattan;case"manhattan-bt709":return new ManhattanBT709;case"manhattan-nommyde":return new ManhattanNommyde;case"pngquant":return new PNGQuant;default:throw new Error(`Unknown colorDistanceFormula ${s}`)}}function imageQuantizationToImageQuantizer(s,o="floyd-steinberg"){switch(o){case"nearest":return new NearestColor(s);case"riemersma":return new ErrorDiffusionRiemersma(s);case"floyd-steinberg":return new ErrorDiffusionArray(s,0);case"false-floyd-steinberg":return new ErrorDiffusionArray(s,1);case"stucki":return new ErrorDiffusionArray(s,2);case"atkinson":return new ErrorDiffusionArray(s,3);case"jarvis":return new ErrorDiffusionArray(s,4);case"burkes":return new ErrorDiffusionArray(s,5);case"sierra":return new ErrorDiffusionArray(s,6);case"two-sierra":return new ErrorDiffusionArray(s,7);case"sierra-lite":return new ErrorDiffusionArray(s,8);default:throw new Error(`Unknown imageQuantization ${o}`)}}function paletteQuantizationToPaletteQuantizer(s,o="wuquant",h=256){switch(o){case"neuquant":return new NeuQuant(s,h);case"rgbquant":return new RGBQuant(s,h);case"wuquant":return new WuQuant(s,h);case"neuquant-float":return new NeuQuantFloat(s,h);default:throw new Error(`Unknown paletteQuantization ${o}`)}}/**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * cie94.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * ciede2000.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * cmetric.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * common.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * constants.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * ditherErrorDiffusionArray.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * euclidean.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * helper.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * hueStatistics.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * iq.ts - Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * lab2rgb.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * lab2xyz.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * manhattanNeuQuant.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * nearestColor.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * palette.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * pngQuant.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * point.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * pointContainer.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * rgb2hsl.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * rgb2lab.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * rgb2xyz.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * ssim.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * wuQuant.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * xyz2lab.ts - part of Image Quantization Library
 *//**
 * @preserve
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * xyz2rgb.ts - part of Image Quantization Library
 *//**
 * @preserve
 * MIT License
 *
 * Copyright 2015-2018 Igor Bezkrovnyi
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL
 * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * riemersma.ts - part of Image Quantization Library
 *//**
 * @preserve TypeScript port:
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * colorHistogram.ts - part of Image Quantization Library
 *//**
 * @preserve TypeScript port:
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * neuquant.ts - part of Image Quantization Library
 *//**
 * @preserve TypeScript port:
 * Copyright 2015-2018 Igor Bezkrovnyi
 * All rights reserved. (MIT Licensed)
 *
 * rgbquant.ts - part of Image Quantization Library
 */var common={},hasRequiredCommon;function requireCommon(){return hasRequiredCommon||(hasRequiredCommon=1,function(s){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function h(_,b){return Object.prototype.hasOwnProperty.call(_,b)}s.assign=function(_){for(var b=Array.prototype.slice.call(arguments,1);b.length;){var $=b.shift();if($){if(typeof $!="object")throw new TypeError($+"must be non-object");for(var et in $)h($,et)&&(_[et]=$[et])}}return _},s.shrinkBuf=function(_,b){return _.length===b?_:_.subarray?_.subarray(0,b):(_.length=b,_)};var d={arraySet:function(_,b,$,et,tt){if(b.subarray&&_.subarray){_.set(b.subarray($,$+et),tt);return}for(var rt=0;rt<et;rt++)_[tt+rt]=b[$+rt]},flattenChunks:function(_){var b,$,et,tt,rt,nt;for(et=0,b=0,$=_.length;b<$;b++)et+=_[b].length;for(nt=new Uint8Array(et),tt=0,b=0,$=_.length;b<$;b++)rt=_[b],nt.set(rt,tt),tt+=rt.length;return nt}},g={arraySet:function(_,b,$,et,tt){for(var rt=0;rt<et;rt++)_[tt+rt]=b[$+rt]},flattenChunks:function(_){return[].concat.apply([],_)}};s.setTyped=function(_){_?(s.Buf8=Uint8Array,s.Buf16=Uint16Array,s.Buf32=Int32Array,s.assign(s,d)):(s.Buf8=Array,s.Buf16=Array,s.Buf32=Array,s.assign(s,g))},s.setTyped(o)}(common)),common}var deflate$1={},deflate={},trees={},hasRequiredTrees;function requireTrees(){if(hasRequiredTrees)return trees;hasRequiredTrees=1;var s=requireCommon(),o=4,h=0,d=1,g=2;function _(Ft){for(var sr=Ft.length;--sr>=0;)Ft[sr]=0}var b=0,$=1,et=2,tt=3,rt=258,nt=29,At=256,at=At+1+nt,lt=30,gt=19,_t=2*at+1,ct=15,pt=16,dt=7,mt=256,Qt=16,xt=17,bt=18,kt=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Lt=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Ht=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Pt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],jt=512,Vt=new Array((at+2)*2);_(Vt);var Xt=new Array(lt*2);_(Xt);var nr=new Array(jt);_(nr);var Ar=new Array(rt-tt+1);_(Ar);var ar=new Array(nt);_(ar);var Wt=new Array(lt);_(Wt);function pr(Ft,sr,hr,br,Gt){this.static_tree=Ft,this.extra_bits=sr,this.extra_base=hr,this.elems=br,this.max_length=Gt,this.has_stree=Ft&&Ft.length}var dr,yr,Br;function Lr(Ft,sr){this.dyn_tree=Ft,this.max_code=0,this.stat_desc=sr}function Ur(Ft){return Ft<256?nr[Ft]:nr[256+(Ft>>>7)]}function or(Ft,sr){Ft.pending_buf[Ft.pending++]=sr&255,Ft.pending_buf[Ft.pending++]=sr>>>8&255}function mr(Ft,sr,hr){Ft.bi_valid>pt-hr?(Ft.bi_buf|=sr<<Ft.bi_valid&65535,or(Ft,Ft.bi_buf),Ft.bi_buf=sr>>pt-Ft.bi_valid,Ft.bi_valid+=hr-pt):(Ft.bi_buf|=sr<<Ft.bi_valid&65535,Ft.bi_valid+=hr)}function Ir(Ft,sr,hr){mr(Ft,hr[sr*2],hr[sr*2+1])}function ur(Ft,sr){var hr=0;do hr|=Ft&1,Ft>>>=1,hr<<=1;while(--sr>0);return hr>>>1}function lr(Ft){Ft.bi_valid===16?(or(Ft,Ft.bi_buf),Ft.bi_buf=0,Ft.bi_valid=0):Ft.bi_valid>=8&&(Ft.pending_buf[Ft.pending++]=Ft.bi_buf&255,Ft.bi_buf>>=8,Ft.bi_valid-=8)}function Xr(Ft,sr){var hr=sr.dyn_tree,br=sr.max_code,Gt=sr.stat_desc.static_tree,ir=sr.stat_desc.has_stree,yt=sr.stat_desc.extra_bits,gr=sr.stat_desc.extra_base,Hr=sr.stat_desc.max_length,ut,tr,rr,Ct,Nt,Jt,Rr=0;for(Ct=0;Ct<=ct;Ct++)Ft.bl_count[Ct]=0;for(hr[Ft.heap[Ft.heap_max]*2+1]=0,ut=Ft.heap_max+1;ut<_t;ut++)tr=Ft.heap[ut],Ct=hr[hr[tr*2+1]*2+1]+1,Ct>Hr&&(Ct=Hr,Rr++),hr[tr*2+1]=Ct,!(tr>br)&&(Ft.bl_count[Ct]++,Nt=0,tr>=gr&&(Nt=yt[tr-gr]),Jt=hr[tr*2],Ft.opt_len+=Jt*(Ct+Nt),ir&&(Ft.static_len+=Jt*(Gt[tr*2+1]+Nt)));if(Rr!==0){do{for(Ct=Hr-1;Ft.bl_count[Ct]===0;)Ct--;Ft.bl_count[Ct]--,Ft.bl_count[Ct+1]+=2,Ft.bl_count[Hr]--,Rr-=2}while(Rr>0);for(Ct=Hr;Ct!==0;Ct--)for(tr=Ft.bl_count[Ct];tr!==0;)rr=Ft.heap[--ut],!(rr>br)&&(hr[rr*2+1]!==Ct&&(Ft.opt_len+=(Ct-hr[rr*2+1])*hr[rr*2],hr[rr*2+1]=Ct),tr--)}}function zr(Ft,sr,hr){var br=new Array(ct+1),Gt=0,ir,yt;for(ir=1;ir<=ct;ir++)br[ir]=Gt=Gt+hr[ir-1]<<1;for(yt=0;yt<=sr;yt++){var gr=Ft[yt*2+1];gr!==0&&(Ft[yt*2]=ur(br[gr]++,gr))}}function kr(){var Ft,sr,hr,br,Gt,ir=new Array(ct+1);for(hr=0,br=0;br<nt-1;br++)for(ar[br]=hr,Ft=0;Ft<1<<kt[br];Ft++)Ar[hr++]=br;for(Ar[hr-1]=br,Gt=0,br=0;br<16;br++)for(Wt[br]=Gt,Ft=0;Ft<1<<Lt[br];Ft++)nr[Gt++]=br;for(Gt>>=7;br<lt;br++)for(Wt[br]=Gt<<7,Ft=0;Ft<1<<Lt[br]-7;Ft++)nr[256+Gt++]=br;for(sr=0;sr<=ct;sr++)ir[sr]=0;for(Ft=0;Ft<=143;)Vt[Ft*2+1]=8,Ft++,ir[8]++;for(;Ft<=255;)Vt[Ft*2+1]=9,Ft++,ir[9]++;for(;Ft<=279;)Vt[Ft*2+1]=7,Ft++,ir[7]++;for(;Ft<=287;)Vt[Ft*2+1]=8,Ft++,ir[8]++;for(zr(Vt,at+1,ir),Ft=0;Ft<lt;Ft++)Xt[Ft*2+1]=5,Xt[Ft*2]=ur(Ft,5);dr=new pr(Vt,kt,At+1,at,ct),yr=new pr(Xt,Lt,0,lt,ct),Br=new pr(new Array(0),Ht,0,gt,dt)}function Tr(Ft){var sr;for(sr=0;sr<at;sr++)Ft.dyn_ltree[sr*2]=0;for(sr=0;sr<lt;sr++)Ft.dyn_dtree[sr*2]=0;for(sr=0;sr<gt;sr++)Ft.bl_tree[sr*2]=0;Ft.dyn_ltree[mt*2]=1,Ft.opt_len=Ft.static_len=0,Ft.last_lit=Ft.matches=0}function Mr(Ft){Ft.bi_valid>8?or(Ft,Ft.bi_buf):Ft.bi_valid>0&&(Ft.pending_buf[Ft.pending++]=Ft.bi_buf),Ft.bi_buf=0,Ft.bi_valid=0}function nn(Ft,sr,hr,br){Mr(Ft),or(Ft,hr),or(Ft,~hr),s.arraySet(Ft.pending_buf,Ft.window,sr,hr,Ft.pending),Ft.pending+=hr}function jr(Ft,sr,hr,br){var Gt=sr*2,ir=hr*2;return Ft[Gt]<Ft[ir]||Ft[Gt]===Ft[ir]&&br[sr]<=br[hr]}function Pr(Ft,sr,hr){for(var br=Ft.heap[hr],Gt=hr<<1;Gt<=Ft.heap_len&&(Gt<Ft.heap_len&&jr(sr,Ft.heap[Gt+1],Ft.heap[Gt],Ft.depth)&&Gt++,!jr(sr,br,Ft.heap[Gt],Ft.depth));)Ft.heap[hr]=Ft.heap[Gt],hr=Gt,Gt<<=1;Ft.heap[hr]=br}function $r(Ft,sr,hr){var br,Gt,ir=0,yt,gr;if(Ft.last_lit!==0)do br=Ft.pending_buf[Ft.d_buf+ir*2]<<8|Ft.pending_buf[Ft.d_buf+ir*2+1],Gt=Ft.pending_buf[Ft.l_buf+ir],ir++,br===0?Ir(Ft,Gt,sr):(yt=Ar[Gt],Ir(Ft,yt+At+1,sr),gr=kt[yt],gr!==0&&(Gt-=ar[yt],mr(Ft,Gt,gr)),br--,yt=Ur(br),Ir(Ft,yt,hr),gr=Lt[yt],gr!==0&&(br-=Wt[yt],mr(Ft,br,gr)));while(ir<Ft.last_lit);Ir(Ft,mt,sr)}function Cr(Ft,sr){var hr=sr.dyn_tree,br=sr.stat_desc.static_tree,Gt=sr.stat_desc.has_stree,ir=sr.stat_desc.elems,yt,gr,Hr=-1,ut;for(Ft.heap_len=0,Ft.heap_max=_t,yt=0;yt<ir;yt++)hr[yt*2]!==0?(Ft.heap[++Ft.heap_len]=Hr=yt,Ft.depth[yt]=0):hr[yt*2+1]=0;for(;Ft.heap_len<2;)ut=Ft.heap[++Ft.heap_len]=Hr<2?++Hr:0,hr[ut*2]=1,Ft.depth[ut]=0,Ft.opt_len--,Gt&&(Ft.static_len-=br[ut*2+1]);for(sr.max_code=Hr,yt=Ft.heap_len>>1;yt>=1;yt--)Pr(Ft,hr,yt);ut=ir;do yt=Ft.heap[1],Ft.heap[1]=Ft.heap[Ft.heap_len--],Pr(Ft,hr,1),gr=Ft.heap[1],Ft.heap[--Ft.heap_max]=yt,Ft.heap[--Ft.heap_max]=gr,hr[ut*2]=hr[yt*2]+hr[gr*2],Ft.depth[ut]=(Ft.depth[yt]>=Ft.depth[gr]?Ft.depth[yt]:Ft.depth[gr])+1,hr[yt*2+1]=hr[gr*2+1]=ut,Ft.heap[1]=ut++,Pr(Ft,hr,1);while(Ft.heap_len>=2);Ft.heap[--Ft.heap_max]=Ft.heap[1],Xr(Ft,sr),zr(hr,Hr,Ft.bl_count)}function tn(Ft,sr,hr){var br,Gt=-1,ir,yt=sr[0*2+1],gr=0,Hr=7,ut=4;for(yt===0&&(Hr=138,ut=3),sr[(hr+1)*2+1]=65535,br=0;br<=hr;br++)ir=yt,yt=sr[(br+1)*2+1],!(++gr<Hr&&ir===yt)&&(gr<ut?Ft.bl_tree[ir*2]+=gr:ir!==0?(ir!==Gt&&Ft.bl_tree[ir*2]++,Ft.bl_tree[Qt*2]++):gr<=10?Ft.bl_tree[xt*2]++:Ft.bl_tree[bt*2]++,gr=0,Gt=ir,yt===0?(Hr=138,ut=3):ir===yt?(Hr=6,ut=3):(Hr=7,ut=4))}function An(Ft,sr,hr){var br,Gt=-1,ir,yt=sr[0*2+1],gr=0,Hr=7,ut=4;for(yt===0&&(Hr=138,ut=3),br=0;br<=hr;br++)if(ir=yt,yt=sr[(br+1)*2+1],!(++gr<Hr&&ir===yt)){if(gr<ut)do Ir(Ft,ir,Ft.bl_tree);while(--gr!==0);else ir!==0?(ir!==Gt&&(Ir(Ft,ir,Ft.bl_tree),gr--),Ir(Ft,Qt,Ft.bl_tree),mr(Ft,gr-3,2)):gr<=10?(Ir(Ft,xt,Ft.bl_tree),mr(Ft,gr-3,3)):(Ir(Ft,bt,Ft.bl_tree),mr(Ft,gr-11,7));gr=0,Gt=ir,yt===0?(Hr=138,ut=3):ir===yt?(Hr=6,ut=3):(Hr=7,ut=4)}}function Jr(Ft){var sr;for(tn(Ft,Ft.dyn_ltree,Ft.l_desc.max_code),tn(Ft,Ft.dyn_dtree,Ft.d_desc.max_code),Cr(Ft,Ft.bl_desc),sr=gt-1;sr>=3&&Ft.bl_tree[Pt[sr]*2+1]===0;sr--);return Ft.opt_len+=3*(sr+1)+5+5+4,sr}function Dr(Ft,sr,hr,br){var Gt;for(mr(Ft,sr-257,5),mr(Ft,hr-1,5),mr(Ft,br-4,4),Gt=0;Gt<br;Gt++)mr(Ft,Ft.bl_tree[Pt[Gt]*2+1],3);An(Ft,Ft.dyn_ltree,sr-1),An(Ft,Ft.dyn_dtree,hr-1)}function on(Ft){var sr=4093624447,hr;for(hr=0;hr<=31;hr++,sr>>>=1)if(sr&1&&Ft.dyn_ltree[hr*2]!==0)return h;if(Ft.dyn_ltree[9*2]!==0||Ft.dyn_ltree[10*2]!==0||Ft.dyn_ltree[13*2]!==0)return d;for(hr=32;hr<At;hr++)if(Ft.dyn_ltree[hr*2]!==0)return d;return h}var qr=!1;function Yr(Ft){qr||(kr(),qr=!0),Ft.l_desc=new Lr(Ft.dyn_ltree,dr),Ft.d_desc=new Lr(Ft.dyn_dtree,yr),Ft.bl_desc=new Lr(Ft.bl_tree,Br),Ft.bi_buf=0,Ft.bi_valid=0,Tr(Ft)}function Wr(Ft,sr,hr,br){mr(Ft,(b<<1)+(br?1:0),3),nn(Ft,sr,hr)}function rn(Ft){mr(Ft,$<<1,3),Ir(Ft,mt,Vt),lr(Ft)}function Nr(Ft,sr,hr,br){var Gt,ir,yt=0;Ft.level>0?(Ft.strm.data_type===g&&(Ft.strm.data_type=on(Ft)),Cr(Ft,Ft.l_desc),Cr(Ft,Ft.d_desc),yt=Jr(Ft),Gt=Ft.opt_len+3+7>>>3,ir=Ft.static_len+3+7>>>3,ir<=Gt&&(Gt=ir)):Gt=ir=hr+5,hr+4<=Gt&&sr!==-1?Wr(Ft,sr,hr,br):Ft.strategy===o||ir===Gt?(mr(Ft,($<<1)+(br?1:0),3),$r(Ft,Vt,Xt)):(mr(Ft,(et<<1)+(br?1:0),3),Dr(Ft,Ft.l_desc.max_code+1,Ft.d_desc.max_code+1,yt+1),$r(Ft,Ft.dyn_ltree,Ft.dyn_dtree)),Tr(Ft),br&&Mr(Ft)}function en(Ft,sr,hr){return Ft.pending_buf[Ft.d_buf+Ft.last_lit*2]=sr>>>8&255,Ft.pending_buf[Ft.d_buf+Ft.last_lit*2+1]=sr&255,Ft.pending_buf[Ft.l_buf+Ft.last_lit]=hr&255,Ft.last_lit++,sr===0?Ft.dyn_ltree[hr*2]++:(Ft.matches++,sr--,Ft.dyn_ltree[(Ar[hr]+At+1)*2]++,Ft.dyn_dtree[Ur(sr)*2]++),Ft.last_lit===Ft.lit_bufsize-1}return trees._tr_init=Yr,trees._tr_stored_block=Wr,trees._tr_flush_block=Nr,trees._tr_tally=en,trees._tr_align=rn,trees}var adler32_1,hasRequiredAdler32;function requireAdler32(){if(hasRequiredAdler32)return adler32_1;hasRequiredAdler32=1;function s(o,h,d,g){for(var _=o&65535|0,b=o>>>16&65535|0,$=0;d!==0;){$=d>2e3?2e3:d,d-=$;do _=_+h[g++]|0,b=b+_|0;while(--$);_%=65521,b%=65521}return _|b<<16|0}return adler32_1=s,adler32_1}var crc32_1,hasRequiredCrc32;function requireCrc32(){if(hasRequiredCrc32)return crc32_1;hasRequiredCrc32=1;function s(){for(var d,g=[],_=0;_<256;_++){d=_;for(var b=0;b<8;b++)d=d&1?3988292384^d>>>1:d>>>1;g[_]=d}return g}var o=s();function h(d,g,_,b){var $=o,et=b+_;d^=-1;for(var tt=b;tt<et;tt++)d=d>>>8^$[(d^g[tt])&255];return d^-1}return crc32_1=h,crc32_1}var messages,hasRequiredMessages;function requireMessages(){return hasRequiredMessages||(hasRequiredMessages=1,messages={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}),messages}var hasRequiredDeflate$1;function requireDeflate$1(){if(hasRequiredDeflate$1)return deflate;hasRequiredDeflate$1=1;var s=requireCommon(),o=requireTrees(),h=requireAdler32(),d=requireCrc32(),g=requireMessages(),_=0,b=1,$=3,et=4,tt=5,rt=0,nt=1,At=-2,at=-3,lt=-5,gt=-1,_t=1,ct=2,pt=3,dt=4,mt=0,Qt=2,xt=8,bt=9,kt=15,Lt=8,Ht=29,Pt=256,jt=Pt+1+Ht,Vt=30,Xt=19,nr=2*jt+1,Ar=15,ar=3,Wt=258,pr=Wt+ar+1,dr=32,yr=42,Br=69,Lr=73,Ur=91,or=103,mr=113,Ir=666,ur=1,lr=2,Xr=3,zr=4,kr=3;function Tr(ut,tr){return ut.msg=g[tr],tr}function Mr(ut){return(ut<<1)-(ut>4?9:0)}function nn(ut){for(var tr=ut.length;--tr>=0;)ut[tr]=0}function jr(ut){var tr=ut.state,rr=tr.pending;rr>ut.avail_out&&(rr=ut.avail_out),rr!==0&&(s.arraySet(ut.output,tr.pending_buf,tr.pending_out,rr,ut.next_out),ut.next_out+=rr,tr.pending_out+=rr,ut.total_out+=rr,ut.avail_out-=rr,tr.pending-=rr,tr.pending===0&&(tr.pending_out=0))}function Pr(ut,tr){o._tr_flush_block(ut,ut.block_start>=0?ut.block_start:-1,ut.strstart-ut.block_start,tr),ut.block_start=ut.strstart,jr(ut.strm)}function $r(ut,tr){ut.pending_buf[ut.pending++]=tr}function Cr(ut,tr){ut.pending_buf[ut.pending++]=tr>>>8&255,ut.pending_buf[ut.pending++]=tr&255}function tn(ut,tr,rr,Ct){var Nt=ut.avail_in;return Nt>Ct&&(Nt=Ct),Nt===0?0:(ut.avail_in-=Nt,s.arraySet(tr,ut.input,ut.next_in,Nt,rr),ut.state.wrap===1?ut.adler=h(ut.adler,tr,Nt,rr):ut.state.wrap===2&&(ut.adler=d(ut.adler,tr,Nt,rr)),ut.next_in+=Nt,ut.total_in+=Nt,Nt)}function An(ut,tr){var rr=ut.max_chain_length,Ct=ut.strstart,Nt,Jt,Rr=ut.prev_length,wt=ut.nice_match,ot=ut.strstart>ut.w_size-pr?ut.strstart-(ut.w_size-pr):0,st=ut.window,ht=ut.w_mask,vt=ut.prev,Ut=ut.strstart+Wt,Ot=st[Ct+Rr-1],zt=st[Ct+Rr];ut.prev_length>=ut.good_match&&(rr>>=2),wt>ut.lookahead&&(wt=ut.lookahead);do if(Nt=tr,!(st[Nt+Rr]!==zt||st[Nt+Rr-1]!==Ot||st[Nt]!==st[Ct]||st[++Nt]!==st[Ct+1])){Ct+=2,Nt++;do;while(st[++Ct]===st[++Nt]&&st[++Ct]===st[++Nt]&&st[++Ct]===st[++Nt]&&st[++Ct]===st[++Nt]&&st[++Ct]===st[++Nt]&&st[++Ct]===st[++Nt]&&st[++Ct]===st[++Nt]&&st[++Ct]===st[++Nt]&&Ct<Ut);if(Jt=Wt-(Ut-Ct),Ct=Ut-Wt,Jt>Rr){if(ut.match_start=tr,Rr=Jt,Jt>=wt)break;Ot=st[Ct+Rr-1],zt=st[Ct+Rr]}}while((tr=vt[tr&ht])>ot&&--rr!==0);return Rr<=ut.lookahead?Rr:ut.lookahead}function Jr(ut){var tr=ut.w_size,rr,Ct,Nt,Jt,Rr;do{if(Jt=ut.window_size-ut.lookahead-ut.strstart,ut.strstart>=tr+(tr-pr)){s.arraySet(ut.window,ut.window,tr,tr,0),ut.match_start-=tr,ut.strstart-=tr,ut.block_start-=tr,Ct=ut.hash_size,rr=Ct;do Nt=ut.head[--rr],ut.head[rr]=Nt>=tr?Nt-tr:0;while(--Ct);Ct=tr,rr=Ct;do Nt=ut.prev[--rr],ut.prev[rr]=Nt>=tr?Nt-tr:0;while(--Ct);Jt+=tr}if(ut.strm.avail_in===0)break;if(Ct=tn(ut.strm,ut.window,ut.strstart+ut.lookahead,Jt),ut.lookahead+=Ct,ut.lookahead+ut.insert>=ar)for(Rr=ut.strstart-ut.insert,ut.ins_h=ut.window[Rr],ut.ins_h=(ut.ins_h<<ut.hash_shift^ut.window[Rr+1])&ut.hash_mask;ut.insert&&(ut.ins_h=(ut.ins_h<<ut.hash_shift^ut.window[Rr+ar-1])&ut.hash_mask,ut.prev[Rr&ut.w_mask]=ut.head[ut.ins_h],ut.head[ut.ins_h]=Rr,Rr++,ut.insert--,!(ut.lookahead+ut.insert<ar)););}while(ut.lookahead<pr&&ut.strm.avail_in!==0)}function Dr(ut,tr){var rr=65535;for(rr>ut.pending_buf_size-5&&(rr=ut.pending_buf_size-5);;){if(ut.lookahead<=1){if(Jr(ut),ut.lookahead===0&&tr===_)return ur;if(ut.lookahead===0)break}ut.strstart+=ut.lookahead,ut.lookahead=0;var Ct=ut.block_start+rr;if((ut.strstart===0||ut.strstart>=Ct)&&(ut.lookahead=ut.strstart-Ct,ut.strstart=Ct,Pr(ut,!1),ut.strm.avail_out===0)||ut.strstart-ut.block_start>=ut.w_size-pr&&(Pr(ut,!1),ut.strm.avail_out===0))return ur}return ut.insert=0,tr===et?(Pr(ut,!0),ut.strm.avail_out===0?Xr:zr):(ut.strstart>ut.block_start&&(Pr(ut,!1),ut.strm.avail_out),ur)}function on(ut,tr){for(var rr,Ct;;){if(ut.lookahead<pr){if(Jr(ut),ut.lookahead<pr&&tr===_)return ur;if(ut.lookahead===0)break}if(rr=0,ut.lookahead>=ar&&(ut.ins_h=(ut.ins_h<<ut.hash_shift^ut.window[ut.strstart+ar-1])&ut.hash_mask,rr=ut.prev[ut.strstart&ut.w_mask]=ut.head[ut.ins_h],ut.head[ut.ins_h]=ut.strstart),rr!==0&&ut.strstart-rr<=ut.w_size-pr&&(ut.match_length=An(ut,rr)),ut.match_length>=ar)if(Ct=o._tr_tally(ut,ut.strstart-ut.match_start,ut.match_length-ar),ut.lookahead-=ut.match_length,ut.match_length<=ut.max_lazy_match&&ut.lookahead>=ar){ut.match_length--;do ut.strstart++,ut.ins_h=(ut.ins_h<<ut.hash_shift^ut.window[ut.strstart+ar-1])&ut.hash_mask,rr=ut.prev[ut.strstart&ut.w_mask]=ut.head[ut.ins_h],ut.head[ut.ins_h]=ut.strstart;while(--ut.match_length!==0);ut.strstart++}else ut.strstart+=ut.match_length,ut.match_length=0,ut.ins_h=ut.window[ut.strstart],ut.ins_h=(ut.ins_h<<ut.hash_shift^ut.window[ut.strstart+1])&ut.hash_mask;else Ct=o._tr_tally(ut,0,ut.window[ut.strstart]),ut.lookahead--,ut.strstart++;if(Ct&&(Pr(ut,!1),ut.strm.avail_out===0))return ur}return ut.insert=ut.strstart<ar-1?ut.strstart:ar-1,tr===et?(Pr(ut,!0),ut.strm.avail_out===0?Xr:zr):ut.last_lit&&(Pr(ut,!1),ut.strm.avail_out===0)?ur:lr}function qr(ut,tr){for(var rr,Ct,Nt;;){if(ut.lookahead<pr){if(Jr(ut),ut.lookahead<pr&&tr===_)return ur;if(ut.lookahead===0)break}if(rr=0,ut.lookahead>=ar&&(ut.ins_h=(ut.ins_h<<ut.hash_shift^ut.window[ut.strstart+ar-1])&ut.hash_mask,rr=ut.prev[ut.strstart&ut.w_mask]=ut.head[ut.ins_h],ut.head[ut.ins_h]=ut.strstart),ut.prev_length=ut.match_length,ut.prev_match=ut.match_start,ut.match_length=ar-1,rr!==0&&ut.prev_length<ut.max_lazy_match&&ut.strstart-rr<=ut.w_size-pr&&(ut.match_length=An(ut,rr),ut.match_length<=5&&(ut.strategy===_t||ut.match_length===ar&&ut.strstart-ut.match_start>4096)&&(ut.match_length=ar-1)),ut.prev_length>=ar&&ut.match_length<=ut.prev_length){Nt=ut.strstart+ut.lookahead-ar,Ct=o._tr_tally(ut,ut.strstart-1-ut.prev_match,ut.prev_length-ar),ut.lookahead-=ut.prev_length-1,ut.prev_length-=2;do++ut.strstart<=Nt&&(ut.ins_h=(ut.ins_h<<ut.hash_shift^ut.window[ut.strstart+ar-1])&ut.hash_mask,rr=ut.prev[ut.strstart&ut.w_mask]=ut.head[ut.ins_h],ut.head[ut.ins_h]=ut.strstart);while(--ut.prev_length!==0);if(ut.match_available=0,ut.match_length=ar-1,ut.strstart++,Ct&&(Pr(ut,!1),ut.strm.avail_out===0))return ur}else if(ut.match_available){if(Ct=o._tr_tally(ut,0,ut.window[ut.strstart-1]),Ct&&Pr(ut,!1),ut.strstart++,ut.lookahead--,ut.strm.avail_out===0)return ur}else ut.match_available=1,ut.strstart++,ut.lookahead--}return ut.match_available&&(Ct=o._tr_tally(ut,0,ut.window[ut.strstart-1]),ut.match_available=0),ut.insert=ut.strstart<ar-1?ut.strstart:ar-1,tr===et?(Pr(ut,!0),ut.strm.avail_out===0?Xr:zr):ut.last_lit&&(Pr(ut,!1),ut.strm.avail_out===0)?ur:lr}function Yr(ut,tr){for(var rr,Ct,Nt,Jt,Rr=ut.window;;){if(ut.lookahead<=Wt){if(Jr(ut),ut.lookahead<=Wt&&tr===_)return ur;if(ut.lookahead===0)break}if(ut.match_length=0,ut.lookahead>=ar&&ut.strstart>0&&(Nt=ut.strstart-1,Ct=Rr[Nt],Ct===Rr[++Nt]&&Ct===Rr[++Nt]&&Ct===Rr[++Nt])){Jt=ut.strstart+Wt;do;while(Ct===Rr[++Nt]&&Ct===Rr[++Nt]&&Ct===Rr[++Nt]&&Ct===Rr[++Nt]&&Ct===Rr[++Nt]&&Ct===Rr[++Nt]&&Ct===Rr[++Nt]&&Ct===Rr[++Nt]&&Nt<Jt);ut.match_length=Wt-(Jt-Nt),ut.match_length>ut.lookahead&&(ut.match_length=ut.lookahead)}if(ut.match_length>=ar?(rr=o._tr_tally(ut,1,ut.match_length-ar),ut.lookahead-=ut.match_length,ut.strstart+=ut.match_length,ut.match_length=0):(rr=o._tr_tally(ut,0,ut.window[ut.strstart]),ut.lookahead--,ut.strstart++),rr&&(Pr(ut,!1),ut.strm.avail_out===0))return ur}return ut.insert=0,tr===et?(Pr(ut,!0),ut.strm.avail_out===0?Xr:zr):ut.last_lit&&(Pr(ut,!1),ut.strm.avail_out===0)?ur:lr}function Wr(ut,tr){for(var rr;;){if(ut.lookahead===0&&(Jr(ut),ut.lookahead===0)){if(tr===_)return ur;break}if(ut.match_length=0,rr=o._tr_tally(ut,0,ut.window[ut.strstart]),ut.lookahead--,ut.strstart++,rr&&(Pr(ut,!1),ut.strm.avail_out===0))return ur}return ut.insert=0,tr===et?(Pr(ut,!0),ut.strm.avail_out===0?Xr:zr):ut.last_lit&&(Pr(ut,!1),ut.strm.avail_out===0)?ur:lr}function rn(ut,tr,rr,Ct,Nt){this.good_length=ut,this.max_lazy=tr,this.nice_length=rr,this.max_chain=Ct,this.func=Nt}var Nr;Nr=[new rn(0,0,0,0,Dr),new rn(4,4,8,4,on),new rn(4,5,16,8,on),new rn(4,6,32,32,on),new rn(4,4,16,16,qr),new rn(8,16,32,32,qr),new rn(8,16,128,128,qr),new rn(8,32,128,256,qr),new rn(32,128,258,1024,qr),new rn(32,258,258,4096,qr)];function en(ut){ut.window_size=2*ut.w_size,nn(ut.head),ut.max_lazy_match=Nr[ut.level].max_lazy,ut.good_match=Nr[ut.level].good_length,ut.nice_match=Nr[ut.level].nice_length,ut.max_chain_length=Nr[ut.level].max_chain,ut.strstart=0,ut.block_start=0,ut.lookahead=0,ut.insert=0,ut.match_length=ut.prev_length=ar-1,ut.match_available=0,ut.ins_h=0}function Ft(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=xt,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new s.Buf16(nr*2),this.dyn_dtree=new s.Buf16((2*Vt+1)*2),this.bl_tree=new s.Buf16((2*Xt+1)*2),nn(this.dyn_ltree),nn(this.dyn_dtree),nn(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new s.Buf16(Ar+1),this.heap=new s.Buf16(2*jt+1),nn(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new s.Buf16(2*jt+1),nn(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function sr(ut){var tr;return!ut||!ut.state?Tr(ut,At):(ut.total_in=ut.total_out=0,ut.data_type=Qt,tr=ut.state,tr.pending=0,tr.pending_out=0,tr.wrap<0&&(tr.wrap=-tr.wrap),tr.status=tr.wrap?yr:mr,ut.adler=tr.wrap===2?0:1,tr.last_flush=_,o._tr_init(tr),rt)}function hr(ut){var tr=sr(ut);return tr===rt&&en(ut.state),tr}function br(ut,tr){return!ut||!ut.state||ut.state.wrap!==2?At:(ut.state.gzhead=tr,rt)}function Gt(ut,tr,rr,Ct,Nt,Jt){if(!ut)return At;var Rr=1;if(tr===gt&&(tr=6),Ct<0?(Rr=0,Ct=-Ct):Ct>15&&(Rr=2,Ct-=16),Nt<1||Nt>bt||rr!==xt||Ct<8||Ct>15||tr<0||tr>9||Jt<0||Jt>dt)return Tr(ut,At);Ct===8&&(Ct=9);var wt=new Ft;return ut.state=wt,wt.strm=ut,wt.wrap=Rr,wt.gzhead=null,wt.w_bits=Ct,wt.w_size=1<<wt.w_bits,wt.w_mask=wt.w_size-1,wt.hash_bits=Nt+7,wt.hash_size=1<<wt.hash_bits,wt.hash_mask=wt.hash_size-1,wt.hash_shift=~~((wt.hash_bits+ar-1)/ar),wt.window=new s.Buf8(wt.w_size*2),wt.head=new s.Buf16(wt.hash_size),wt.prev=new s.Buf16(wt.w_size),wt.lit_bufsize=1<<Nt+6,wt.pending_buf_size=wt.lit_bufsize*4,wt.pending_buf=new s.Buf8(wt.pending_buf_size),wt.d_buf=1*wt.lit_bufsize,wt.l_buf=3*wt.lit_bufsize,wt.level=tr,wt.strategy=Jt,wt.method=rr,hr(ut)}function ir(ut,tr){return Gt(ut,tr,xt,kt,Lt,mt)}function yt(ut,tr){var rr,Ct,Nt,Jt;if(!ut||!ut.state||tr>tt||tr<0)return ut?Tr(ut,At):At;if(Ct=ut.state,!ut.output||!ut.input&&ut.avail_in!==0||Ct.status===Ir&&tr!==et)return Tr(ut,ut.avail_out===0?lt:At);if(Ct.strm=ut,rr=Ct.last_flush,Ct.last_flush=tr,Ct.status===yr)if(Ct.wrap===2)ut.adler=0,$r(Ct,31),$r(Ct,139),$r(Ct,8),Ct.gzhead?($r(Ct,(Ct.gzhead.text?1:0)+(Ct.gzhead.hcrc?2:0)+(Ct.gzhead.extra?4:0)+(Ct.gzhead.name?8:0)+(Ct.gzhead.comment?16:0)),$r(Ct,Ct.gzhead.time&255),$r(Ct,Ct.gzhead.time>>8&255),$r(Ct,Ct.gzhead.time>>16&255),$r(Ct,Ct.gzhead.time>>24&255),$r(Ct,Ct.level===9?2:Ct.strategy>=ct||Ct.level<2?4:0),$r(Ct,Ct.gzhead.os&255),Ct.gzhead.extra&&Ct.gzhead.extra.length&&($r(Ct,Ct.gzhead.extra.length&255),$r(Ct,Ct.gzhead.extra.length>>8&255)),Ct.gzhead.hcrc&&(ut.adler=d(ut.adler,Ct.pending_buf,Ct.pending,0)),Ct.gzindex=0,Ct.status=Br):($r(Ct,0),$r(Ct,0),$r(Ct,0),$r(Ct,0),$r(Ct,0),$r(Ct,Ct.level===9?2:Ct.strategy>=ct||Ct.level<2?4:0),$r(Ct,kr),Ct.status=mr);else{var Rr=xt+(Ct.w_bits-8<<4)<<8,wt=-1;Ct.strategy>=ct||Ct.level<2?wt=0:Ct.level<6?wt=1:Ct.level===6?wt=2:wt=3,Rr|=wt<<6,Ct.strstart!==0&&(Rr|=dr),Rr+=31-Rr%31,Ct.status=mr,Cr(Ct,Rr),Ct.strstart!==0&&(Cr(Ct,ut.adler>>>16),Cr(Ct,ut.adler&65535)),ut.adler=1}if(Ct.status===Br)if(Ct.gzhead.extra){for(Nt=Ct.pending;Ct.gzindex<(Ct.gzhead.extra.length&65535)&&!(Ct.pending===Ct.pending_buf_size&&(Ct.gzhead.hcrc&&Ct.pending>Nt&&(ut.adler=d(ut.adler,Ct.pending_buf,Ct.pending-Nt,Nt)),jr(ut),Nt=Ct.pending,Ct.pending===Ct.pending_buf_size));)$r(Ct,Ct.gzhead.extra[Ct.gzindex]&255),Ct.gzindex++;Ct.gzhead.hcrc&&Ct.pending>Nt&&(ut.adler=d(ut.adler,Ct.pending_buf,Ct.pending-Nt,Nt)),Ct.gzindex===Ct.gzhead.extra.length&&(Ct.gzindex=0,Ct.status=Lr)}else Ct.status=Lr;if(Ct.status===Lr)if(Ct.gzhead.name){Nt=Ct.pending;do{if(Ct.pending===Ct.pending_buf_size&&(Ct.gzhead.hcrc&&Ct.pending>Nt&&(ut.adler=d(ut.adler,Ct.pending_buf,Ct.pending-Nt,Nt)),jr(ut),Nt=Ct.pending,Ct.pending===Ct.pending_buf_size)){Jt=1;break}Ct.gzindex<Ct.gzhead.name.length?Jt=Ct.gzhead.name.charCodeAt(Ct.gzindex++)&255:Jt=0,$r(Ct,Jt)}while(Jt!==0);Ct.gzhead.hcrc&&Ct.pending>Nt&&(ut.adler=d(ut.adler,Ct.pending_buf,Ct.pending-Nt,Nt)),Jt===0&&(Ct.gzindex=0,Ct.status=Ur)}else Ct.status=Ur;if(Ct.status===Ur)if(Ct.gzhead.comment){Nt=Ct.pending;do{if(Ct.pending===Ct.pending_buf_size&&(Ct.gzhead.hcrc&&Ct.pending>Nt&&(ut.adler=d(ut.adler,Ct.pending_buf,Ct.pending-Nt,Nt)),jr(ut),Nt=Ct.pending,Ct.pending===Ct.pending_buf_size)){Jt=1;break}Ct.gzindex<Ct.gzhead.comment.length?Jt=Ct.gzhead.comment.charCodeAt(Ct.gzindex++)&255:Jt=0,$r(Ct,Jt)}while(Jt!==0);Ct.gzhead.hcrc&&Ct.pending>Nt&&(ut.adler=d(ut.adler,Ct.pending_buf,Ct.pending-Nt,Nt)),Jt===0&&(Ct.status=or)}else Ct.status=or;if(Ct.status===or&&(Ct.gzhead.hcrc?(Ct.pending+2>Ct.pending_buf_size&&jr(ut),Ct.pending+2<=Ct.pending_buf_size&&($r(Ct,ut.adler&255),$r(Ct,ut.adler>>8&255),ut.adler=0,Ct.status=mr)):Ct.status=mr),Ct.pending!==0){if(jr(ut),ut.avail_out===0)return Ct.last_flush=-1,rt}else if(ut.avail_in===0&&Mr(tr)<=Mr(rr)&&tr!==et)return Tr(ut,lt);if(Ct.status===Ir&&ut.avail_in!==0)return Tr(ut,lt);if(ut.avail_in!==0||Ct.lookahead!==0||tr!==_&&Ct.status!==Ir){var ot=Ct.strategy===ct?Wr(Ct,tr):Ct.strategy===pt?Yr(Ct,tr):Nr[Ct.level].func(Ct,tr);if((ot===Xr||ot===zr)&&(Ct.status=Ir),ot===ur||ot===Xr)return ut.avail_out===0&&(Ct.last_flush=-1),rt;if(ot===lr&&(tr===b?o._tr_align(Ct):tr!==tt&&(o._tr_stored_block(Ct,0,0,!1),tr===$&&(nn(Ct.head),Ct.lookahead===0&&(Ct.strstart=0,Ct.block_start=0,Ct.insert=0))),jr(ut),ut.avail_out===0))return Ct.last_flush=-1,rt}return tr!==et?rt:Ct.wrap<=0?nt:(Ct.wrap===2?($r(Ct,ut.adler&255),$r(Ct,ut.adler>>8&255),$r(Ct,ut.adler>>16&255),$r(Ct,ut.adler>>24&255),$r(Ct,ut.total_in&255),$r(Ct,ut.total_in>>8&255),$r(Ct,ut.total_in>>16&255),$r(Ct,ut.total_in>>24&255)):(Cr(Ct,ut.adler>>>16),Cr(Ct,ut.adler&65535)),jr(ut),Ct.wrap>0&&(Ct.wrap=-Ct.wrap),Ct.pending!==0?rt:nt)}function gr(ut){var tr;return!ut||!ut.state?At:(tr=ut.state.status,tr!==yr&&tr!==Br&&tr!==Lr&&tr!==Ur&&tr!==or&&tr!==mr&&tr!==Ir?Tr(ut,At):(ut.state=null,tr===mr?Tr(ut,at):rt))}function Hr(ut,tr){var rr=tr.length,Ct,Nt,Jt,Rr,wt,ot,st,ht;if(!ut||!ut.state||(Ct=ut.state,Rr=Ct.wrap,Rr===2||Rr===1&&Ct.status!==yr||Ct.lookahead))return At;for(Rr===1&&(ut.adler=h(ut.adler,tr,rr,0)),Ct.wrap=0,rr>=Ct.w_size&&(Rr===0&&(nn(Ct.head),Ct.strstart=0,Ct.block_start=0,Ct.insert=0),ht=new s.Buf8(Ct.w_size),s.arraySet(ht,tr,rr-Ct.w_size,Ct.w_size,0),tr=ht,rr=Ct.w_size),wt=ut.avail_in,ot=ut.next_in,st=ut.input,ut.avail_in=rr,ut.next_in=0,ut.input=tr,Jr(Ct);Ct.lookahead>=ar;){Nt=Ct.strstart,Jt=Ct.lookahead-(ar-1);do Ct.ins_h=(Ct.ins_h<<Ct.hash_shift^Ct.window[Nt+ar-1])&Ct.hash_mask,Ct.prev[Nt&Ct.w_mask]=Ct.head[Ct.ins_h],Ct.head[Ct.ins_h]=Nt,Nt++;while(--Jt);Ct.strstart=Nt,Ct.lookahead=ar-1,Jr(Ct)}return Ct.strstart+=Ct.lookahead,Ct.block_start=Ct.strstart,Ct.insert=Ct.lookahead,Ct.lookahead=0,Ct.match_length=Ct.prev_length=ar-1,Ct.match_available=0,ut.next_in=ot,ut.input=st,ut.avail_in=wt,Ct.wrap=Rr,rt}return deflate.deflateInit=ir,deflate.deflateInit2=Gt,deflate.deflateReset=hr,deflate.deflateResetKeep=sr,deflate.deflateSetHeader=br,deflate.deflate=yt,deflate.deflateEnd=gr,deflate.deflateSetDictionary=Hr,deflate.deflateInfo="pako deflate (from Nodeca project)",deflate}var strings={},hasRequiredStrings;function requireStrings(){if(hasRequiredStrings)return strings;hasRequiredStrings=1;var s=requireCommon(),o=!0,h=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{h=!1}for(var d=new s.Buf8(256),g=0;g<256;g++)d[g]=g>=252?6:g>=248?5:g>=240?4:g>=224?3:g>=192?2:1;d[254]=d[254]=1,strings.string2buf=function(b){var $,et,tt,rt,nt,At=b.length,at=0;for(rt=0;rt<At;rt++)et=b.charCodeAt(rt),(et&64512)===55296&&rt+1<At&&(tt=b.charCodeAt(rt+1),(tt&64512)===56320&&(et=65536+(et-55296<<10)+(tt-56320),rt++)),at+=et<128?1:et<2048?2:et<65536?3:4;for($=new s.Buf8(at),nt=0,rt=0;nt<at;rt++)et=b.charCodeAt(rt),(et&64512)===55296&&rt+1<At&&(tt=b.charCodeAt(rt+1),(tt&64512)===56320&&(et=65536+(et-55296<<10)+(tt-56320),rt++)),et<128?$[nt++]=et:et<2048?($[nt++]=192|et>>>6,$[nt++]=128|et&63):et<65536?($[nt++]=224|et>>>12,$[nt++]=128|et>>>6&63,$[nt++]=128|et&63):($[nt++]=240|et>>>18,$[nt++]=128|et>>>12&63,$[nt++]=128|et>>>6&63,$[nt++]=128|et&63);return $};function _(b,$){if($<65534&&(b.subarray&&h||!b.subarray&&o))return String.fromCharCode.apply(null,s.shrinkBuf(b,$));for(var et="",tt=0;tt<$;tt++)et+=String.fromCharCode(b[tt]);return et}return strings.buf2binstring=function(b){return _(b,b.length)},strings.binstring2buf=function(b){for(var $=new s.Buf8(b.length),et=0,tt=$.length;et<tt;et++)$[et]=b.charCodeAt(et);return $},strings.buf2string=function(b,$){var et,tt,rt,nt,At=$||b.length,at=new Array(At*2);for(tt=0,et=0;et<At;){if(rt=b[et++],rt<128){at[tt++]=rt;continue}if(nt=d[rt],nt>4){at[tt++]=65533,et+=nt-1;continue}for(rt&=nt===2?31:nt===3?15:7;nt>1&&et<At;)rt=rt<<6|b[et++]&63,nt--;if(nt>1){at[tt++]=65533;continue}rt<65536?at[tt++]=rt:(rt-=65536,at[tt++]=55296|rt>>10&1023,at[tt++]=56320|rt&1023)}return _(at,tt)},strings.utf8border=function(b,$){var et;for($=$||b.length,$>b.length&&($=b.length),et=$-1;et>=0&&(b[et]&192)===128;)et--;return et<0||et===0?$:et+d[b[et]]>$?et:$},strings}var zstream,hasRequiredZstream;function requireZstream(){if(hasRequiredZstream)return zstream;hasRequiredZstream=1;function s(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}return zstream=s,zstream}var hasRequiredDeflate;function requireDeflate(){if(hasRequiredDeflate)return deflate$1;hasRequiredDeflate=1;var s=requireDeflate$1(),o=requireCommon(),h=requireStrings(),d=requireMessages(),g=requireZstream(),_=Object.prototype.toString,b=0,$=4,et=0,tt=1,rt=2,nt=-1,At=0,at=8;function lt(pt){if(!(this instanceof lt))return new lt(pt);this.options=o.assign({level:nt,method:at,chunkSize:16384,windowBits:15,memLevel:8,strategy:At,to:""},pt||{});var dt=this.options;dt.raw&&dt.windowBits>0?dt.windowBits=-dt.windowBits:dt.gzip&&dt.windowBits>0&&dt.windowBits<16&&(dt.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new g,this.strm.avail_out=0;var mt=s.deflateInit2(this.strm,dt.level,dt.method,dt.windowBits,dt.memLevel,dt.strategy);if(mt!==et)throw new Error(d[mt]);if(dt.header&&s.deflateSetHeader(this.strm,dt.header),dt.dictionary){var Qt;if(typeof dt.dictionary=="string"?Qt=h.string2buf(dt.dictionary):_.call(dt.dictionary)==="[object ArrayBuffer]"?Qt=new Uint8Array(dt.dictionary):Qt=dt.dictionary,mt=s.deflateSetDictionary(this.strm,Qt),mt!==et)throw new Error(d[mt]);this._dict_set=!0}}lt.prototype.push=function(pt,dt){var mt=this.strm,Qt=this.options.chunkSize,xt,bt;if(this.ended)return!1;bt=dt===~~dt?dt:dt===!0?$:b,typeof pt=="string"?mt.input=h.string2buf(pt):_.call(pt)==="[object ArrayBuffer]"?mt.input=new Uint8Array(pt):mt.input=pt,mt.next_in=0,mt.avail_in=mt.input.length;do{if(mt.avail_out===0&&(mt.output=new o.Buf8(Qt),mt.next_out=0,mt.avail_out=Qt),xt=s.deflate(mt,bt),xt!==tt&&xt!==et)return this.onEnd(xt),this.ended=!0,!1;(mt.avail_out===0||mt.avail_in===0&&(bt===$||bt===rt))&&(this.options.to==="string"?this.onData(h.buf2binstring(o.shrinkBuf(mt.output,mt.next_out))):this.onData(o.shrinkBuf(mt.output,mt.next_out)))}while((mt.avail_in>0||mt.avail_out===0)&&xt!==tt);return bt===$?(xt=s.deflateEnd(this.strm),this.onEnd(xt),this.ended=!0,xt===et):(bt===rt&&(this.onEnd(et),mt.avail_out=0),!0)},lt.prototype.onData=function(pt){this.chunks.push(pt)},lt.prototype.onEnd=function(pt){pt===et&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=pt,this.msg=this.strm.msg};function gt(pt,dt){var mt=new lt(dt);if(mt.push(pt,!0),mt.err)throw mt.msg||d[mt.err];return mt.result}function _t(pt,dt){return dt=dt||{},dt.raw=!0,gt(pt,dt)}function ct(pt,dt){return dt=dt||{},dt.gzip=!0,gt(pt,dt)}return deflate$1.Deflate=lt,deflate$1.deflate=gt,deflate$1.deflateRaw=_t,deflate$1.gzip=ct,deflate$1}var inflate$1={},inflate={},inffast,hasRequiredInffast;function requireInffast(){if(hasRequiredInffast)return inffast;hasRequiredInffast=1;var s=30,o=12;return inffast=function(h,d){var g,_,b,$,et,tt,rt,nt,At,at,lt,gt,_t,ct,pt,dt,mt,Qt,xt,bt,kt,Lt,Ht,Pt,jt;g=h.state,_=h.next_in,Pt=h.input,b=_+(h.avail_in-5),$=h.next_out,jt=h.output,et=$-(d-h.avail_out),tt=$+(h.avail_out-257),rt=g.dmax,nt=g.wsize,At=g.whave,at=g.wnext,lt=g.window,gt=g.hold,_t=g.bits,ct=g.lencode,pt=g.distcode,dt=(1<<g.lenbits)-1,mt=(1<<g.distbits)-1;t:do{_t<15&&(gt+=Pt[_++]<<_t,_t+=8,gt+=Pt[_++]<<_t,_t+=8),Qt=ct[gt&dt];e:for(;;){if(xt=Qt>>>24,gt>>>=xt,_t-=xt,xt=Qt>>>16&255,xt===0)jt[$++]=Qt&65535;else if(xt&16){bt=Qt&65535,xt&=15,xt&&(_t<xt&&(gt+=Pt[_++]<<_t,_t+=8),bt+=gt&(1<<xt)-1,gt>>>=xt,_t-=xt),_t<15&&(gt+=Pt[_++]<<_t,_t+=8,gt+=Pt[_++]<<_t,_t+=8),Qt=pt[gt&mt];r:for(;;){if(xt=Qt>>>24,gt>>>=xt,_t-=xt,xt=Qt>>>16&255,xt&16){if(kt=Qt&65535,xt&=15,_t<xt&&(gt+=Pt[_++]<<_t,_t+=8,_t<xt&&(gt+=Pt[_++]<<_t,_t+=8)),kt+=gt&(1<<xt)-1,kt>rt){h.msg="invalid distance too far back",g.mode=s;break t}if(gt>>>=xt,_t-=xt,xt=$-et,kt>xt){if(xt=kt-xt,xt>At&&g.sane){h.msg="invalid distance too far back",g.mode=s;break t}if(Lt=0,Ht=lt,at===0){if(Lt+=nt-xt,xt<bt){bt-=xt;do jt[$++]=lt[Lt++];while(--xt);Lt=$-kt,Ht=jt}}else if(at<xt){if(Lt+=nt+at-xt,xt-=at,xt<bt){bt-=xt;do jt[$++]=lt[Lt++];while(--xt);if(Lt=0,at<bt){xt=at,bt-=xt;do jt[$++]=lt[Lt++];while(--xt);Lt=$-kt,Ht=jt}}}else if(Lt+=at-xt,xt<bt){bt-=xt;do jt[$++]=lt[Lt++];while(--xt);Lt=$-kt,Ht=jt}for(;bt>2;)jt[$++]=Ht[Lt++],jt[$++]=Ht[Lt++],jt[$++]=Ht[Lt++],bt-=3;bt&&(jt[$++]=Ht[Lt++],bt>1&&(jt[$++]=Ht[Lt++]))}else{Lt=$-kt;do jt[$++]=jt[Lt++],jt[$++]=jt[Lt++],jt[$++]=jt[Lt++],bt-=3;while(bt>2);bt&&(jt[$++]=jt[Lt++],bt>1&&(jt[$++]=jt[Lt++]))}}else if(xt&64){h.msg="invalid distance code",g.mode=s;break t}else{Qt=pt[(Qt&65535)+(gt&(1<<xt)-1)];continue r}break}}else if(xt&64)if(xt&32){g.mode=o;break t}else{h.msg="invalid literal/length code",g.mode=s;break t}else{Qt=ct[(Qt&65535)+(gt&(1<<xt)-1)];continue e}break}}while(_<b&&$<tt);bt=_t>>3,_-=bt,_t-=bt<<3,gt&=(1<<_t)-1,h.next_in=_,h.next_out=$,h.avail_in=_<b?5+(b-_):5-(_-b),h.avail_out=$<tt?257+(tt-$):257-($-tt),g.hold=gt,g.bits=_t},inffast}var inftrees,hasRequiredInftrees;function requireInftrees(){if(hasRequiredInftrees)return inftrees;hasRequiredInftrees=1;var s=requireCommon(),o=15,h=852,d=592,g=0,_=1,b=2,$=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],et=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],tt=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],rt=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];return inftrees=function(nt,At,at,lt,gt,_t,ct,pt){var dt=pt.bits,mt=0,Qt=0,xt=0,bt=0,kt=0,Lt=0,Ht=0,Pt=0,jt=0,Vt=0,Xt,nr,Ar,ar,Wt,pr=null,dr=0,yr,Br=new s.Buf16(o+1),Lr=new s.Buf16(o+1),Ur=null,or=0,mr,Ir,ur;for(mt=0;mt<=o;mt++)Br[mt]=0;for(Qt=0;Qt<lt;Qt++)Br[At[at+Qt]]++;for(kt=dt,bt=o;bt>=1&&Br[bt]===0;bt--);if(kt>bt&&(kt=bt),bt===0)return gt[_t++]=1<<24|64<<16|0,gt[_t++]=1<<24|64<<16|0,pt.bits=1,0;for(xt=1;xt<bt&&Br[xt]===0;xt++);for(kt<xt&&(kt=xt),Pt=1,mt=1;mt<=o;mt++)if(Pt<<=1,Pt-=Br[mt],Pt<0)return-1;if(Pt>0&&(nt===g||bt!==1))return-1;for(Lr[1]=0,mt=1;mt<o;mt++)Lr[mt+1]=Lr[mt]+Br[mt];for(Qt=0;Qt<lt;Qt++)At[at+Qt]!==0&&(ct[Lr[At[at+Qt]]++]=Qt);if(nt===g?(pr=Ur=ct,yr=19):nt===_?(pr=$,dr-=257,Ur=et,or-=257,yr=256):(pr=tt,Ur=rt,yr=-1),Vt=0,Qt=0,mt=xt,Wt=_t,Lt=kt,Ht=0,Ar=-1,jt=1<<kt,ar=jt-1,nt===_&&jt>h||nt===b&&jt>d)return 1;for(;;){mr=mt-Ht,ct[Qt]<yr?(Ir=0,ur=ct[Qt]):ct[Qt]>yr?(Ir=Ur[or+ct[Qt]],ur=pr[dr+ct[Qt]]):(Ir=96,ur=0),Xt=1<<mt-Ht,nr=1<<Lt,xt=nr;do nr-=Xt,gt[Wt+(Vt>>Ht)+nr]=mr<<24|Ir<<16|ur|0;while(nr!==0);for(Xt=1<<mt-1;Vt&Xt;)Xt>>=1;if(Xt!==0?(Vt&=Xt-1,Vt+=Xt):Vt=0,Qt++,--Br[mt]===0){if(mt===bt)break;mt=At[at+ct[Qt]]}if(mt>kt&&(Vt&ar)!==Ar){for(Ht===0&&(Ht=kt),Wt+=xt,Lt=mt-Ht,Pt=1<<Lt;Lt+Ht<bt&&(Pt-=Br[Lt+Ht],!(Pt<=0));)Lt++,Pt<<=1;if(jt+=1<<Lt,nt===_&&jt>h||nt===b&&jt>d)return 1;Ar=Vt&ar,gt[Ar]=kt<<24|Lt<<16|Wt-_t|0}}return Vt!==0&&(gt[Wt+Vt]=mt-Ht<<24|64<<16|0),pt.bits=kt,0},inftrees}var hasRequiredInflate$1;function requireInflate$1(){if(hasRequiredInflate$1)return inflate;hasRequiredInflate$1=1;var s=requireCommon(),o=requireAdler32(),h=requireCrc32(),d=requireInffast(),g=requireInftrees(),_=0,b=1,$=2,et=4,tt=5,rt=6,nt=0,At=1,at=2,lt=-2,gt=-3,_t=-4,ct=-5,pt=8,dt=1,mt=2,Qt=3,xt=4,bt=5,kt=6,Lt=7,Ht=8,Pt=9,jt=10,Vt=11,Xt=12,nr=13,Ar=14,ar=15,Wt=16,pr=17,dr=18,yr=19,Br=20,Lr=21,Ur=22,or=23,mr=24,Ir=25,ur=26,lr=27,Xr=28,zr=29,kr=30,Tr=31,Mr=32,nn=852,jr=592,Pr=15,$r=Pr;function Cr(Gt){return(Gt>>>24&255)+(Gt>>>8&65280)+((Gt&65280)<<8)+((Gt&255)<<24)}function tn(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function An(Gt){var ir;return!Gt||!Gt.state?lt:(ir=Gt.state,Gt.total_in=Gt.total_out=ir.total=0,Gt.msg="",ir.wrap&&(Gt.adler=ir.wrap&1),ir.mode=dt,ir.last=0,ir.havedict=0,ir.dmax=32768,ir.head=null,ir.hold=0,ir.bits=0,ir.lencode=ir.lendyn=new s.Buf32(nn),ir.distcode=ir.distdyn=new s.Buf32(jr),ir.sane=1,ir.back=-1,nt)}function Jr(Gt){var ir;return!Gt||!Gt.state?lt:(ir=Gt.state,ir.wsize=0,ir.whave=0,ir.wnext=0,An(Gt))}function Dr(Gt,ir){var yt,gr;return!Gt||!Gt.state||(gr=Gt.state,ir<0?(yt=0,ir=-ir):(yt=(ir>>4)+1,ir<48&&(ir&=15)),ir&&(ir<8||ir>15))?lt:(gr.window!==null&&gr.wbits!==ir&&(gr.window=null),gr.wrap=yt,gr.wbits=ir,Jr(Gt))}function on(Gt,ir){var yt,gr;return Gt?(gr=new tn,Gt.state=gr,gr.window=null,yt=Dr(Gt,ir),yt!==nt&&(Gt.state=null),yt):lt}function qr(Gt){return on(Gt,$r)}var Yr=!0,Wr,rn;function Nr(Gt){if(Yr){var ir;for(Wr=new s.Buf32(512),rn=new s.Buf32(32),ir=0;ir<144;)Gt.lens[ir++]=8;for(;ir<256;)Gt.lens[ir++]=9;for(;ir<280;)Gt.lens[ir++]=7;for(;ir<288;)Gt.lens[ir++]=8;for(g(b,Gt.lens,0,288,Wr,0,Gt.work,{bits:9}),ir=0;ir<32;)Gt.lens[ir++]=5;g($,Gt.lens,0,32,rn,0,Gt.work,{bits:5}),Yr=!1}Gt.lencode=Wr,Gt.lenbits=9,Gt.distcode=rn,Gt.distbits=5}function en(Gt,ir,yt,gr){var Hr,ut=Gt.state;return ut.window===null&&(ut.wsize=1<<ut.wbits,ut.wnext=0,ut.whave=0,ut.window=new s.Buf8(ut.wsize)),gr>=ut.wsize?(s.arraySet(ut.window,ir,yt-ut.wsize,ut.wsize,0),ut.wnext=0,ut.whave=ut.wsize):(Hr=ut.wsize-ut.wnext,Hr>gr&&(Hr=gr),s.arraySet(ut.window,ir,yt-gr,Hr,ut.wnext),gr-=Hr,gr?(s.arraySet(ut.window,ir,yt-gr,gr,0),ut.wnext=gr,ut.whave=ut.wsize):(ut.wnext+=Hr,ut.wnext===ut.wsize&&(ut.wnext=0),ut.whave<ut.wsize&&(ut.whave+=Hr))),0}function Ft(Gt,ir){var yt,gr,Hr,ut,tr,rr,Ct,Nt,Jt,Rr,wt,ot,st,ht,vt=0,Ut,Ot,zt,Kt,_e,_r,er,Er,Fr=new s.Buf8(4),vr,xr,Zr=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!Gt||!Gt.state||!Gt.output||!Gt.input&&Gt.avail_in!==0)return lt;yt=Gt.state,yt.mode===Xt&&(yt.mode=nr),tr=Gt.next_out,Hr=Gt.output,Ct=Gt.avail_out,ut=Gt.next_in,gr=Gt.input,rr=Gt.avail_in,Nt=yt.hold,Jt=yt.bits,Rr=rr,wt=Ct,Er=nt;t:for(;;)switch(yt.mode){case dt:if(yt.wrap===0){yt.mode=nr;break}for(;Jt<16;){if(rr===0)break t;rr--,Nt+=gr[ut++]<<Jt,Jt+=8}if(yt.wrap&2&&Nt===35615){yt.check=0,Fr[0]=Nt&255,Fr[1]=Nt>>>8&255,yt.check=h(yt.check,Fr,2,0),Nt=0,Jt=0,yt.mode=mt;break}if(yt.flags=0,yt.head&&(yt.head.done=!1),!(yt.wrap&1)||(((Nt&255)<<8)+(Nt>>8))%31){Gt.msg="incorrect header check",yt.mode=kr;break}if((Nt&15)!==pt){Gt.msg="unknown compression method",yt.mode=kr;break}if(Nt>>>=4,Jt-=4,er=(Nt&15)+8,yt.wbits===0)yt.wbits=er;else if(er>yt.wbits){Gt.msg="invalid window size",yt.mode=kr;break}yt.dmax=1<<er,Gt.adler=yt.check=1,yt.mode=Nt&512?jt:Xt,Nt=0,Jt=0;break;case mt:for(;Jt<16;){if(rr===0)break t;rr--,Nt+=gr[ut++]<<Jt,Jt+=8}if(yt.flags=Nt,(yt.flags&255)!==pt){Gt.msg="unknown compression method",yt.mode=kr;break}if(yt.flags&57344){Gt.msg="unknown header flags set",yt.mode=kr;break}yt.head&&(yt.head.text=Nt>>8&1),yt.flags&512&&(Fr[0]=Nt&255,Fr[1]=Nt>>>8&255,yt.check=h(yt.check,Fr,2,0)),Nt=0,Jt=0,yt.mode=Qt;case Qt:for(;Jt<32;){if(rr===0)break t;rr--,Nt+=gr[ut++]<<Jt,Jt+=8}yt.head&&(yt.head.time=Nt),yt.flags&512&&(Fr[0]=Nt&255,Fr[1]=Nt>>>8&255,Fr[2]=Nt>>>16&255,Fr[3]=Nt>>>24&255,yt.check=h(yt.check,Fr,4,0)),Nt=0,Jt=0,yt.mode=xt;case xt:for(;Jt<16;){if(rr===0)break t;rr--,Nt+=gr[ut++]<<Jt,Jt+=8}yt.head&&(yt.head.xflags=Nt&255,yt.head.os=Nt>>8),yt.flags&512&&(Fr[0]=Nt&255,Fr[1]=Nt>>>8&255,yt.check=h(yt.check,Fr,2,0)),Nt=0,Jt=0,yt.mode=bt;case bt:if(yt.flags&1024){for(;Jt<16;){if(rr===0)break t;rr--,Nt+=gr[ut++]<<Jt,Jt+=8}yt.length=Nt,yt.head&&(yt.head.extra_len=Nt),yt.flags&512&&(Fr[0]=Nt&255,Fr[1]=Nt>>>8&255,yt.check=h(yt.check,Fr,2,0)),Nt=0,Jt=0}else yt.head&&(yt.head.extra=null);yt.mode=kt;case kt:if(yt.flags&1024&&(ot=yt.length,ot>rr&&(ot=rr),ot&&(yt.head&&(er=yt.head.extra_len-yt.length,yt.head.extra||(yt.head.extra=new Array(yt.head.extra_len)),s.arraySet(yt.head.extra,gr,ut,ot,er)),yt.flags&512&&(yt.check=h(yt.check,gr,ot,ut)),rr-=ot,ut+=ot,yt.length-=ot),yt.length))break t;yt.length=0,yt.mode=Lt;case Lt:if(yt.flags&2048){if(rr===0)break t;ot=0;do er=gr[ut+ot++],yt.head&&er&&yt.length<65536&&(yt.head.name+=String.fromCharCode(er));while(er&&ot<rr);if(yt.flags&512&&(yt.check=h(yt.check,gr,ot,ut)),rr-=ot,ut+=ot,er)break t}else yt.head&&(yt.head.name=null);yt.length=0,yt.mode=Ht;case Ht:if(yt.flags&4096){if(rr===0)break t;ot=0;do er=gr[ut+ot++],yt.head&&er&&yt.length<65536&&(yt.head.comment+=String.fromCharCode(er));while(er&&ot<rr);if(yt.flags&512&&(yt.check=h(yt.check,gr,ot,ut)),rr-=ot,ut+=ot,er)break t}else yt.head&&(yt.head.comment=null);yt.mode=Pt;case Pt:if(yt.flags&512){for(;Jt<16;){if(rr===0)break t;rr--,Nt+=gr[ut++]<<Jt,Jt+=8}if(Nt!==(yt.check&65535)){Gt.msg="header crc mismatch",yt.mode=kr;break}Nt=0,Jt=0}yt.head&&(yt.head.hcrc=yt.flags>>9&1,yt.head.done=!0),Gt.adler=yt.check=0,yt.mode=Xt;break;case jt:for(;Jt<32;){if(rr===0)break t;rr--,Nt+=gr[ut++]<<Jt,Jt+=8}Gt.adler=yt.check=Cr(Nt),Nt=0,Jt=0,yt.mode=Vt;case Vt:if(yt.havedict===0)return Gt.next_out=tr,Gt.avail_out=Ct,Gt.next_in=ut,Gt.avail_in=rr,yt.hold=Nt,yt.bits=Jt,at;Gt.adler=yt.check=1,yt.mode=Xt;case Xt:if(ir===tt||ir===rt)break t;case nr:if(yt.last){Nt>>>=Jt&7,Jt-=Jt&7,yt.mode=lr;break}for(;Jt<3;){if(rr===0)break t;rr--,Nt+=gr[ut++]<<Jt,Jt+=8}switch(yt.last=Nt&1,Nt>>>=1,Jt-=1,Nt&3){case 0:yt.mode=Ar;break;case 1:if(Nr(yt),yt.mode=Br,ir===rt){Nt>>>=2,Jt-=2;break t}break;case 2:yt.mode=pr;break;case 3:Gt.msg="invalid block type",yt.mode=kr}Nt>>>=2,Jt-=2;break;case Ar:for(Nt>>>=Jt&7,Jt-=Jt&7;Jt<32;){if(rr===0)break t;rr--,Nt+=gr[ut++]<<Jt,Jt+=8}if((Nt&65535)!==(Nt>>>16^65535)){Gt.msg="invalid stored block lengths",yt.mode=kr;break}if(yt.length=Nt&65535,Nt=0,Jt=0,yt.mode=ar,ir===rt)break t;case ar:yt.mode=Wt;case Wt:if(ot=yt.length,ot){if(ot>rr&&(ot=rr),ot>Ct&&(ot=Ct),ot===0)break t;s.arraySet(Hr,gr,ut,ot,tr),rr-=ot,ut+=ot,Ct-=ot,tr+=ot,yt.length-=ot;break}yt.mode=Xt;break;case pr:for(;Jt<14;){if(rr===0)break t;rr--,Nt+=gr[ut++]<<Jt,Jt+=8}if(yt.nlen=(Nt&31)+257,Nt>>>=5,Jt-=5,yt.ndist=(Nt&31)+1,Nt>>>=5,Jt-=5,yt.ncode=(Nt&15)+4,Nt>>>=4,Jt-=4,yt.nlen>286||yt.ndist>30){Gt.msg="too many length or distance symbols",yt.mode=kr;break}yt.have=0,yt.mode=dr;case dr:for(;yt.have<yt.ncode;){for(;Jt<3;){if(rr===0)break t;rr--,Nt+=gr[ut++]<<Jt,Jt+=8}yt.lens[Zr[yt.have++]]=Nt&7,Nt>>>=3,Jt-=3}for(;yt.have<19;)yt.lens[Zr[yt.have++]]=0;if(yt.lencode=yt.lendyn,yt.lenbits=7,vr={bits:yt.lenbits},Er=g(_,yt.lens,0,19,yt.lencode,0,yt.work,vr),yt.lenbits=vr.bits,Er){Gt.msg="invalid code lengths set",yt.mode=kr;break}yt.have=0,yt.mode=yr;case yr:for(;yt.have<yt.nlen+yt.ndist;){for(;vt=yt.lencode[Nt&(1<<yt.lenbits)-1],Ut=vt>>>24,Ot=vt>>>16&255,zt=vt&65535,!(Ut<=Jt);){if(rr===0)break t;rr--,Nt+=gr[ut++]<<Jt,Jt+=8}if(zt<16)Nt>>>=Ut,Jt-=Ut,yt.lens[yt.have++]=zt;else{if(zt===16){for(xr=Ut+2;Jt<xr;){if(rr===0)break t;rr--,Nt+=gr[ut++]<<Jt,Jt+=8}if(Nt>>>=Ut,Jt-=Ut,yt.have===0){Gt.msg="invalid bit length repeat",yt.mode=kr;break}er=yt.lens[yt.have-1],ot=3+(Nt&3),Nt>>>=2,Jt-=2}else if(zt===17){for(xr=Ut+3;Jt<xr;){if(rr===0)break t;rr--,Nt+=gr[ut++]<<Jt,Jt+=8}Nt>>>=Ut,Jt-=Ut,er=0,ot=3+(Nt&7),Nt>>>=3,Jt-=3}else{for(xr=Ut+7;Jt<xr;){if(rr===0)break t;rr--,Nt+=gr[ut++]<<Jt,Jt+=8}Nt>>>=Ut,Jt-=Ut,er=0,ot=11+(Nt&127),Nt>>>=7,Jt-=7}if(yt.have+ot>yt.nlen+yt.ndist){Gt.msg="invalid bit length repeat",yt.mode=kr;break}for(;ot--;)yt.lens[yt.have++]=er}}if(yt.mode===kr)break;if(yt.lens[256]===0){Gt.msg="invalid code -- missing end-of-block",yt.mode=kr;break}if(yt.lenbits=9,vr={bits:yt.lenbits},Er=g(b,yt.lens,0,yt.nlen,yt.lencode,0,yt.work,vr),yt.lenbits=vr.bits,Er){Gt.msg="invalid literal/lengths set",yt.mode=kr;break}if(yt.distbits=6,yt.distcode=yt.distdyn,vr={bits:yt.distbits},Er=g($,yt.lens,yt.nlen,yt.ndist,yt.distcode,0,yt.work,vr),yt.distbits=vr.bits,Er){Gt.msg="invalid distances set",yt.mode=kr;break}if(yt.mode=Br,ir===rt)break t;case Br:yt.mode=Lr;case Lr:if(rr>=6&&Ct>=258){Gt.next_out=tr,Gt.avail_out=Ct,Gt.next_in=ut,Gt.avail_in=rr,yt.hold=Nt,yt.bits=Jt,d(Gt,wt),tr=Gt.next_out,Hr=Gt.output,Ct=Gt.avail_out,ut=Gt.next_in,gr=Gt.input,rr=Gt.avail_in,Nt=yt.hold,Jt=yt.bits,yt.mode===Xt&&(yt.back=-1);break}for(yt.back=0;vt=yt.lencode[Nt&(1<<yt.lenbits)-1],Ut=vt>>>24,Ot=vt>>>16&255,zt=vt&65535,!(Ut<=Jt);){if(rr===0)break t;rr--,Nt+=gr[ut++]<<Jt,Jt+=8}if(Ot&&!(Ot&240)){for(Kt=Ut,_e=Ot,_r=zt;vt=yt.lencode[_r+((Nt&(1<<Kt+_e)-1)>>Kt)],Ut=vt>>>24,Ot=vt>>>16&255,zt=vt&65535,!(Kt+Ut<=Jt);){if(rr===0)break t;rr--,Nt+=gr[ut++]<<Jt,Jt+=8}Nt>>>=Kt,Jt-=Kt,yt.back+=Kt}if(Nt>>>=Ut,Jt-=Ut,yt.back+=Ut,yt.length=zt,Ot===0){yt.mode=ur;break}if(Ot&32){yt.back=-1,yt.mode=Xt;break}if(Ot&64){Gt.msg="invalid literal/length code",yt.mode=kr;break}yt.extra=Ot&15,yt.mode=Ur;case Ur:if(yt.extra){for(xr=yt.extra;Jt<xr;){if(rr===0)break t;rr--,Nt+=gr[ut++]<<Jt,Jt+=8}yt.length+=Nt&(1<<yt.extra)-1,Nt>>>=yt.extra,Jt-=yt.extra,yt.back+=yt.extra}yt.was=yt.length,yt.mode=or;case or:for(;vt=yt.distcode[Nt&(1<<yt.distbits)-1],Ut=vt>>>24,Ot=vt>>>16&255,zt=vt&65535,!(Ut<=Jt);){if(rr===0)break t;rr--,Nt+=gr[ut++]<<Jt,Jt+=8}if(!(Ot&240)){for(Kt=Ut,_e=Ot,_r=zt;vt=yt.distcode[_r+((Nt&(1<<Kt+_e)-1)>>Kt)],Ut=vt>>>24,Ot=vt>>>16&255,zt=vt&65535,!(Kt+Ut<=Jt);){if(rr===0)break t;rr--,Nt+=gr[ut++]<<Jt,Jt+=8}Nt>>>=Kt,Jt-=Kt,yt.back+=Kt}if(Nt>>>=Ut,Jt-=Ut,yt.back+=Ut,Ot&64){Gt.msg="invalid distance code",yt.mode=kr;break}yt.offset=zt,yt.extra=Ot&15,yt.mode=mr;case mr:if(yt.extra){for(xr=yt.extra;Jt<xr;){if(rr===0)break t;rr--,Nt+=gr[ut++]<<Jt,Jt+=8}yt.offset+=Nt&(1<<yt.extra)-1,Nt>>>=yt.extra,Jt-=yt.extra,yt.back+=yt.extra}if(yt.offset>yt.dmax){Gt.msg="invalid distance too far back",yt.mode=kr;break}yt.mode=Ir;case Ir:if(Ct===0)break t;if(ot=wt-Ct,yt.offset>ot){if(ot=yt.offset-ot,ot>yt.whave&&yt.sane){Gt.msg="invalid distance too far back",yt.mode=kr;break}ot>yt.wnext?(ot-=yt.wnext,st=yt.wsize-ot):st=yt.wnext-ot,ot>yt.length&&(ot=yt.length),ht=yt.window}else ht=Hr,st=tr-yt.offset,ot=yt.length;ot>Ct&&(ot=Ct),Ct-=ot,yt.length-=ot;do Hr[tr++]=ht[st++];while(--ot);yt.length===0&&(yt.mode=Lr);break;case ur:if(Ct===0)break t;Hr[tr++]=yt.length,Ct--,yt.mode=Lr;break;case lr:if(yt.wrap){for(;Jt<32;){if(rr===0)break t;rr--,Nt|=gr[ut++]<<Jt,Jt+=8}if(wt-=Ct,Gt.total_out+=wt,yt.total+=wt,wt&&(Gt.adler=yt.check=yt.flags?h(yt.check,Hr,wt,tr-wt):o(yt.check,Hr,wt,tr-wt)),wt=Ct,(yt.flags?Nt:Cr(Nt))!==yt.check){Gt.msg="incorrect data check",yt.mode=kr;break}Nt=0,Jt=0}yt.mode=Xr;case Xr:if(yt.wrap&&yt.flags){for(;Jt<32;){if(rr===0)break t;rr--,Nt+=gr[ut++]<<Jt,Jt+=8}if(Nt!==(yt.total&4294967295)){Gt.msg="incorrect length check",yt.mode=kr;break}Nt=0,Jt=0}yt.mode=zr;case zr:Er=At;break t;case kr:Er=gt;break t;case Tr:return _t;case Mr:default:return lt}return Gt.next_out=tr,Gt.avail_out=Ct,Gt.next_in=ut,Gt.avail_in=rr,yt.hold=Nt,yt.bits=Jt,(yt.wsize||wt!==Gt.avail_out&&yt.mode<kr&&(yt.mode<lr||ir!==et))&&en(Gt,Gt.output,Gt.next_out,wt-Gt.avail_out),Rr-=Gt.avail_in,wt-=Gt.avail_out,Gt.total_in+=Rr,Gt.total_out+=wt,yt.total+=wt,yt.wrap&&wt&&(Gt.adler=yt.check=yt.flags?h(yt.check,Hr,wt,Gt.next_out-wt):o(yt.check,Hr,wt,Gt.next_out-wt)),Gt.data_type=yt.bits+(yt.last?64:0)+(yt.mode===Xt?128:0)+(yt.mode===Br||yt.mode===ar?256:0),(Rr===0&&wt===0||ir===et)&&Er===nt&&(Er=ct),Er}function sr(Gt){if(!Gt||!Gt.state)return lt;var ir=Gt.state;return ir.window&&(ir.window=null),Gt.state=null,nt}function hr(Gt,ir){var yt;return!Gt||!Gt.state||(yt=Gt.state,(yt.wrap&2)===0)?lt:(yt.head=ir,ir.done=!1,nt)}function br(Gt,ir){var yt=ir.length,gr,Hr,ut;return!Gt||!Gt.state||(gr=Gt.state,gr.wrap!==0&&gr.mode!==Vt)?lt:gr.mode===Vt&&(Hr=1,Hr=o(Hr,ir,yt,0),Hr!==gr.check)?gt:(ut=en(Gt,ir,yt,yt),ut?(gr.mode=Tr,_t):(gr.havedict=1,nt))}return inflate.inflateReset=Jr,inflate.inflateReset2=Dr,inflate.inflateResetKeep=An,inflate.inflateInit=qr,inflate.inflateInit2=on,inflate.inflate=Ft,inflate.inflateEnd=sr,inflate.inflateGetHeader=hr,inflate.inflateSetDictionary=br,inflate.inflateInfo="pako inflate (from Nodeca project)",inflate}var constants,hasRequiredConstants;function requireConstants(){return hasRequiredConstants||(hasRequiredConstants=1,constants={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}),constants}var gzheader,hasRequiredGzheader;function requireGzheader(){if(hasRequiredGzheader)return gzheader;hasRequiredGzheader=1;function s(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}return gzheader=s,gzheader}var hasRequiredInflate;function requireInflate(){if(hasRequiredInflate)return inflate$1;hasRequiredInflate=1;var s=requireInflate$1(),o=requireCommon(),h=requireStrings(),d=requireConstants(),g=requireMessages(),_=requireZstream(),b=requireGzheader(),$=Object.prototype.toString;function et(nt){if(!(this instanceof et))return new et(nt);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},nt||{});var At=this.options;At.raw&&At.windowBits>=0&&At.windowBits<16&&(At.windowBits=-At.windowBits,At.windowBits===0&&(At.windowBits=-15)),At.windowBits>=0&&At.windowBits<16&&!(nt&&nt.windowBits)&&(At.windowBits+=32),At.windowBits>15&&At.windowBits<48&&!(At.windowBits&15)&&(At.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new _,this.strm.avail_out=0;var at=s.inflateInit2(this.strm,At.windowBits);if(at!==d.Z_OK)throw new Error(g[at]);if(this.header=new b,s.inflateGetHeader(this.strm,this.header),At.dictionary&&(typeof At.dictionary=="string"?At.dictionary=h.string2buf(At.dictionary):$.call(At.dictionary)==="[object ArrayBuffer]"&&(At.dictionary=new Uint8Array(At.dictionary)),At.raw&&(at=s.inflateSetDictionary(this.strm,At.dictionary),at!==d.Z_OK)))throw new Error(g[at])}et.prototype.push=function(nt,At){var at=this.strm,lt=this.options.chunkSize,gt=this.options.dictionary,_t,ct,pt,dt,mt,Qt=!1;if(this.ended)return!1;ct=At===~~At?At:At===!0?d.Z_FINISH:d.Z_NO_FLUSH,typeof nt=="string"?at.input=h.binstring2buf(nt):$.call(nt)==="[object ArrayBuffer]"?at.input=new Uint8Array(nt):at.input=nt,at.next_in=0,at.avail_in=at.input.length;do{if(at.avail_out===0&&(at.output=new o.Buf8(lt),at.next_out=0,at.avail_out=lt),_t=s.inflate(at,d.Z_NO_FLUSH),_t===d.Z_NEED_DICT&&gt&&(_t=s.inflateSetDictionary(this.strm,gt)),_t===d.Z_BUF_ERROR&&Qt===!0&&(_t=d.Z_OK,Qt=!1),_t!==d.Z_STREAM_END&&_t!==d.Z_OK)return this.onEnd(_t),this.ended=!0,!1;at.next_out&&(at.avail_out===0||_t===d.Z_STREAM_END||at.avail_in===0&&(ct===d.Z_FINISH||ct===d.Z_SYNC_FLUSH))&&(this.options.to==="string"?(pt=h.utf8border(at.output,at.next_out),dt=at.next_out-pt,mt=h.buf2string(at.output,pt),at.next_out=dt,at.avail_out=lt-dt,dt&&o.arraySet(at.output,at.output,pt,dt,0),this.onData(mt)):this.onData(o.shrinkBuf(at.output,at.next_out))),at.avail_in===0&&at.avail_out===0&&(Qt=!0)}while((at.avail_in>0||at.avail_out===0)&&_t!==d.Z_STREAM_END);return _t===d.Z_STREAM_END&&(ct=d.Z_FINISH),ct===d.Z_FINISH?(_t=s.inflateEnd(this.strm),this.onEnd(_t),this.ended=!0,_t===d.Z_OK):(ct===d.Z_SYNC_FLUSH&&(this.onEnd(d.Z_OK),at.avail_out=0),!0)},et.prototype.onData=function(nt){this.chunks.push(nt)},et.prototype.onEnd=function(nt){nt===d.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=nt,this.msg=this.strm.msg};function tt(nt,At){var at=new et(At);if(at.push(nt,!0),at.err)throw at.msg||g[at.err];return at.result}function rt(nt,At){return At=At||{},At.raw=!0,tt(nt,At)}return inflate$1.Inflate=et,inflate$1.inflate=tt,inflate$1.inflateRaw=rt,inflate$1.ungzip=tt,inflate$1}var pako_1,hasRequiredPako;function requirePako(){if(hasRequiredPako)return pako_1;hasRequiredPako=1;var s=requireCommon().assign,o=requireDeflate(),h=requireInflate(),d=requireConstants(),g={};return s(g,o,h,d),pako_1=g,pako_1}var pakoExports=requirePako();const pako=getDefaultExportFromCjs(pakoExports);var UPNG={};UPNG.toRGBA8=function(s){var o=s.width,h=s.height;if(s.tabs.acTL==null)return[UPNG.toRGBA8.decodeImage(s.data,o,h,s).buffer];var d=[];s.frames[0].data==null&&(s.frames[0].data=s.data);for(var g=o*h*4,_=new Uint8Array(g),b=new Uint8Array(g),$=new Uint8Array(g),et=0;et<s.frames.length;et++){var tt=s.frames[et],rt=tt.rect.x,nt=tt.rect.y,At=tt.rect.width,at=tt.rect.height,lt=UPNG.toRGBA8.decodeImage(tt.data,At,at,s);if(et!=0)for(var gt=0;gt<g;gt++)$[gt]=_[gt];if(tt.blend==0?UPNG._copyTile(lt,At,at,_,o,h,rt,nt,0):tt.blend==1&&UPNG._copyTile(lt,At,at,_,o,h,rt,nt,1),d.push(_.buffer.slice(0)),tt.dispose!=0){if(tt.dispose==1)UPNG._copyTile(b,At,at,_,o,h,rt,nt,0);else if(tt.dispose==2)for(var gt=0;gt<g;gt++)_[gt]=$[gt]}}return d};UPNG.toRGBA8.decodeImage=function(s,o,h,d){var g=o*h,_=UPNG.decode._getBPP(d),b=Math.ceil(o*_/8),$=new Uint8Array(g*4),et=new Uint32Array($.buffer),tt=d.ctype,rt=d.depth,nt=UPNG._bin.readUshort;if(tt==6){var At=g<<2;if(rt==8)for(var at=0;at<At;at+=4)$[at]=s[at],$[at+1]=s[at+1],$[at+2]=s[at+2],$[at+3]=s[at+3];if(rt==16)for(var at=0;at<At;at++)$[at]=s[at<<1]}else if(tt==2){var lt=d.tabs.tRNS;if(lt==null){if(rt==8)for(var at=0;at<g;at++){var gt=at*3;et[at]=255<<24|s[gt+2]<<16|s[gt+1]<<8|s[gt]}if(rt==16)for(var at=0;at<g;at++){var gt=at*6;et[at]=255<<24|s[gt+4]<<16|s[gt+2]<<8|s[gt]}}else{var _t=lt[0],ct=lt[1],pt=lt[2];if(rt==8)for(var at=0;at<g;at++){var dt=at<<2,gt=at*3;et[at]=255<<24|s[gt+2]<<16|s[gt+1]<<8|s[gt],s[gt]==_t&&s[gt+1]==ct&&s[gt+2]==pt&&($[dt+3]=0)}if(rt==16)for(var at=0;at<g;at++){var dt=at<<2,gt=at*6;et[at]=255<<24|s[gt+4]<<16|s[gt+2]<<8|s[gt],nt(s,gt)==_t&&nt(s,gt+2)==ct&&nt(s,gt+4)==pt&&($[dt+3]=0)}}}else if(tt==3){var mt=d.tabs.PLTE,Qt=d.tabs.tRNS,xt=Qt?Qt.length:0;if(rt==1)for(var bt=0;bt<h;bt++)for(var kt=bt*b,Lt=bt*o,at=0;at<o;at++){var dt=Lt+at<<2,Ht=s[kt+(at>>3)]>>7-((at&7)<<0)&1,Pt=3*Ht;$[dt]=mt[Pt],$[dt+1]=mt[Pt+1],$[dt+2]=mt[Pt+2],$[dt+3]=Ht<xt?Qt[Ht]:255}if(rt==2)for(var bt=0;bt<h;bt++)for(var kt=bt*b,Lt=bt*o,at=0;at<o;at++){var dt=Lt+at<<2,Ht=s[kt+(at>>2)]>>6-((at&3)<<1)&3,Pt=3*Ht;$[dt]=mt[Pt],$[dt+1]=mt[Pt+1],$[dt+2]=mt[Pt+2],$[dt+3]=Ht<xt?Qt[Ht]:255}if(rt==4)for(var bt=0;bt<h;bt++)for(var kt=bt*b,Lt=bt*o,at=0;at<o;at++){var dt=Lt+at<<2,Ht=s[kt+(at>>1)]>>4-((at&1)<<2)&15,Pt=3*Ht;$[dt]=mt[Pt],$[dt+1]=mt[Pt+1],$[dt+2]=mt[Pt+2],$[dt+3]=Ht<xt?Qt[Ht]:255}if(rt==8)for(var at=0;at<g;at++){var dt=at<<2,Ht=s[at],Pt=3*Ht;$[dt]=mt[Pt],$[dt+1]=mt[Pt+1],$[dt+2]=mt[Pt+2],$[dt+3]=Ht<xt?Qt[Ht]:255}}else if(tt==4){if(rt==8)for(var at=0;at<g;at++){var dt=at<<2,jt=at<<1,Vt=s[jt];$[dt]=Vt,$[dt+1]=Vt,$[dt+2]=Vt,$[dt+3]=s[jt+1]}if(rt==16)for(var at=0;at<g;at++){var dt=at<<2,jt=at<<2,Vt=s[jt];$[dt]=Vt,$[dt+1]=Vt,$[dt+2]=Vt,$[dt+3]=s[jt+2]}}else if(tt==0)for(var _t=d.tabs.tRNS?d.tabs.tRNS:-1,bt=0;bt<h;bt++){var Xt=bt*b,nr=bt*o;if(rt==1)for(var Ar=0;Ar<o;Ar++){var Vt=255*(s[Xt+(Ar>>>3)]>>>7-(Ar&7)&1),ar=Vt==_t*255?0:255;et[nr+Ar]=ar<<24|Vt<<16|Vt<<8|Vt}else if(rt==2)for(var Ar=0;Ar<o;Ar++){var Vt=85*(s[Xt+(Ar>>>2)]>>>6-((Ar&3)<<1)&3),ar=Vt==_t*85?0:255;et[nr+Ar]=ar<<24|Vt<<16|Vt<<8|Vt}else if(rt==4)for(var Ar=0;Ar<o;Ar++){var Vt=17*(s[Xt+(Ar>>>1)]>>>4-((Ar&1)<<2)&15),ar=Vt==_t*17?0:255;et[nr+Ar]=ar<<24|Vt<<16|Vt<<8|Vt}else if(rt==8)for(var Ar=0;Ar<o;Ar++){var Vt=s[Xt+Ar],ar=Vt==_t?0:255;et[nr+Ar]=ar<<24|Vt<<16|Vt<<8|Vt}else if(rt==16)for(var Ar=0;Ar<o;Ar++){var Vt=s[Xt+(Ar<<1)],ar=nt(s,Xt+(Ar<<at))==_t?0:255;et[nr+Ar]=ar<<24|Vt<<16|Vt<<8|Vt}}return $};UPNG.decode=function(s){for(var o=new Uint8Array(s),h=8,d=UPNG._bin,g=d.readUshort,_=d.readUint,b={tabs:{},frames:[]},$=new Uint8Array(o.length),et=0,tt,rt=0,nt=[137,80,78,71,13,10,26,10],At=0;At<8;At++)if(o[At]!=nt[At])throw"The input is not a PNG file!";for(;h<o.length;){var at=d.readUint(o,h);h+=4;var lt=d.readASCII(o,h,4);if(h+=4,lt=="IHDR")UPNG.decode._IHDR(o,h,b);else if(lt=="IDAT"){for(var At=0;At<at;At++)$[et+At]=o[h+At];et+=at}else if(lt=="acTL")b.tabs[lt]={num_frames:_(o,h),num_plays:_(o,h+4)},tt=new Uint8Array(o.length);else if(lt=="fcTL"){if(rt!=0){var gt=b.frames[b.frames.length-1];gt.data=UPNG.decode._decompress(b,tt.slice(0,rt),gt.rect.width,gt.rect.height),rt=0}var _t={x:_(o,h+12),y:_(o,h+16),width:_(o,h+4),height:_(o,h+8)},ct=g(o,h+22);ct=g(o,h+20)/(ct==0?100:ct);var pt={rect:_t,delay:Math.round(ct*1e3),dispose:o[h+24],blend:o[h+25]};b.frames.push(pt)}else if(lt=="fdAT"){for(var At=0;At<at-4;At++)tt[rt+At]=o[h+At+4];rt+=at-4}else if(lt=="pHYs")b.tabs[lt]=[d.readUint(o,h),d.readUint(o,h+4),o[h+8]];else if(lt=="cHRM"){b.tabs[lt]=[];for(var At=0;At<8;At++)b.tabs[lt].push(d.readUint(o,h+At*4))}else if(lt=="tEXt"){b.tabs[lt]==null&&(b.tabs[lt]={});var dt=d.nextZero(o,h),mt=d.readASCII(o,h,dt-h),Qt=d.readASCII(o,dt+1,h+at-dt-1);b.tabs[lt][mt]=Qt}else if(lt=="iTXt"){b.tabs[lt]==null&&(b.tabs[lt]={});var dt=0,xt=h;dt=d.nextZero(o,xt);var mt=d.readASCII(o,xt,dt-xt);xt=dt+1,o[xt],o[xt+1],xt+=2,dt=d.nextZero(o,xt),d.readASCII(o,xt,dt-xt),xt=dt+1,dt=d.nextZero(o,xt),d.readUTF8(o,xt,dt-xt),xt=dt+1;var Qt=d.readUTF8(o,xt,at-(xt-h));b.tabs[lt][mt]=Qt}else if(lt=="PLTE")b.tabs[lt]=d.readBytes(o,h,at);else if(lt=="hIST"){var bt=b.tabs.PLTE.length/3;b.tabs[lt]=[];for(var At=0;At<bt;At++)b.tabs[lt].push(g(o,h+At*2))}else if(lt=="tRNS")b.ctype==3?b.tabs[lt]=d.readBytes(o,h,at):b.ctype==0?b.tabs[lt]=g(o,h):b.ctype==2&&(b.tabs[lt]=[g(o,h),g(o,h+2),g(o,h+4)]);else if(lt=="gAMA")b.tabs[lt]=d.readUint(o,h)/1e5;else if(lt=="sRGB")b.tabs[lt]=o[h];else if(lt=="bKGD")b.ctype==0||b.ctype==4?b.tabs[lt]=[g(o,h)]:b.ctype==2||b.ctype==6?b.tabs[lt]=[g(o,h),g(o,h+2),g(o,h+4)]:b.ctype==3&&(b.tabs[lt]=o[h]);else if(lt=="IEND")break;h+=at,d.readUint(o,h),h+=4}if(rt!=0){var gt=b.frames[b.frames.length-1];gt.data=UPNG.decode._decompress(b,tt.slice(0,rt),gt.rect.width,gt.rect.height),rt=0}return b.data=UPNG.decode._decompress(b,$,b.width,b.height),delete b.compress,delete b.interlace,delete b.filter,b};UPNG.decode._decompress=function(s,o,h,d){var g=UPNG.decode._getBPP(s),_=Math.ceil(h*g/8),b=new Uint8Array((_+1+s.interlace)*d);return o=UPNG.decode._inflate(o,b),s.interlace==0?o=UPNG.decode._filterZero(o,s,0,h,d):s.interlace==1&&(o=UPNG.decode._readInterlace(o,s)),o};UPNG.decode._inflate=function(s,o){var h=UPNG.inflateRaw(new Uint8Array(s.buffer,2,s.length-6),o);return h};UPNG.inflateRaw=function(){var s={};return s.H={},s.H.N=function(o,h){var d=Uint8Array,g=0,_=0,b=0,$=0,et=0,tt=0,rt=0,nt=0,At=0,at,lt;if(o[0]==3&&o[1]==0)return h||new d(0);var gt=s.H,_t=gt.b,ct=gt.e,pt=gt.R,dt=gt.n,mt=gt.A,Qt=gt.Z,xt=gt.m,bt=h==null;for(bt&&(h=new d(o.length>>>2<<3));g==0;){if(g=_t(o,At,1),_=_t(o,At+1,2),At+=3,_==0){At&7&&(At+=8-(At&7));var kt=(At>>>3)+4,Lt=o[kt-4]|o[kt-3]<<8;bt&&(h=s.H.W(h,nt+Lt)),h.set(new d(o.buffer,o.byteOffset+kt,Lt),nt),At=kt+Lt<<3,nt+=Lt;continue}if(bt&&(h=s.H.W(h,nt+(1<<17))),_==1&&(at=xt.J,lt=xt.h,tt=511,rt=31),_==2){b=ct(o,At,5)+257,$=ct(o,At+5,5)+1,et=ct(o,At+10,4)+4,At+=14;for(var Ht=1,Pt=0;Pt<38;Pt+=2)xt.Q[Pt]=0,xt.Q[Pt+1]=0;for(var Pt=0;Pt<et;Pt++){var jt=ct(o,At+Pt*3,3);xt.Q[(xt.X[Pt]<<1)+1]=jt,jt>Ht&&(Ht=jt)}At+=3*et,dt(xt.Q,Ht),mt(xt.Q,Ht,xt.u),at=xt.w,lt=xt.d,At=pt(xt.u,(1<<Ht)-1,b+$,o,At,xt.v);var Vt=gt.V(xt.v,0,b,xt.C);tt=(1<<Vt)-1;var Xt=gt.V(xt.v,b,$,xt.D);rt=(1<<Xt)-1,dt(xt.C,Vt),mt(xt.C,Vt,at),dt(xt.D,Xt),mt(xt.D,Xt,lt)}for(;;){var nr=at[Qt(o,At)&tt];At+=nr&15;var Ar=nr>>>4;if(!(Ar>>>8))h[nt++]=Ar;else{if(Ar==256)break;var ar=nt+Ar-254;if(Ar>264){var Wt=xt.q[Ar-257];ar=nt+(Wt>>>3)+ct(o,At,Wt&7),At+=Wt&7}var pr=lt[Qt(o,At)&rt];At+=pr&15;var dr=pr>>>4,yr=xt.c[dr],Br=(yr>>>4)+_t(o,At,yr&15);for(At+=yr&15;nt<ar;)h[nt]=h[nt++-Br],h[nt]=h[nt++-Br],h[nt]=h[nt++-Br],h[nt]=h[nt++-Br];nt=ar}}}return h.length==nt?h:h.slice(0,nt)},s.H.W=function(o,h){var d=o.length;if(h<=d)return o;var g=new Uint8Array(d<<1);return g.set(o,0),g},s.H.R=function(o,h,d,g,_,b){for(var $=s.H.e,et=s.H.Z,tt=0;tt<d;){var rt=o[et(g,_)&h];_+=rt&15;var nt=rt>>>4;if(nt<=15)b[tt]=nt,tt++;else{var At=0,at=0;nt==16?(at=3+$(g,_,2),_+=2,At=b[tt-1]):nt==17?(at=3+$(g,_,3),_+=3):nt==18&&(at=11+$(g,_,7),_+=7);for(var lt=tt+at;tt<lt;)b[tt]=At,tt++}}return _},s.H.V=function(o,h,d,g){for(var _=0,b=0,$=g.length>>>1;b<d;){var et=o[b+h];g[b<<1]=0,g[(b<<1)+1]=et,et>_&&(_=et),b++}for(;b<$;)g[b<<1]=0,g[(b<<1)+1]=0,b++;return _},s.H.n=function(o,h){for(var d=s.H.m,g=o.length,_,b,$,rt,et,tt=d.j,rt=0;rt<=h;rt++)tt[rt]=0;for(rt=1;rt<g;rt+=2)tt[o[rt]]++;var nt=d.K;for(_=0,tt[0]=0,b=1;b<=h;b++)_=_+tt[b-1]<<1,nt[b]=_;for($=0;$<g;$+=2)et=o[$+1],et!=0&&(o[$]=nt[et],nt[et]++)},s.H.A=function(o,h,d){for(var g=o.length,_=s.H.m,b=_.r,$=0;$<g;$+=2)if(o[$+1]!=0)for(var et=$>>1,tt=o[$+1],rt=et<<4|tt,nt=h-tt,At=o[$]<<nt,at=At+(1<<nt);At!=at;){var lt=b[At]>>>15-h;d[lt]=rt,At++}},s.H.l=function(o,h){for(var d=s.H.m.r,g=15-h,_=0;_<o.length;_+=2){var b=o[_]<<h-o[_+1];o[_]=d[b]>>>g}},s.H.M=function(o,h,d){d=d<<(h&7);var g=h>>>3;o[g]|=d,o[g+1]|=d>>>8},s.H.I=function(o,h,d){d=d<<(h&7);var g=h>>>3;o[g]|=d,o[g+1]|=d>>>8,o[g+2]|=d>>>16},s.H.e=function(o,h,d){return(o[h>>>3]|o[(h>>>3)+1]<<8)>>>(h&7)&(1<<d)-1},s.H.b=function(o,h,d){return(o[h>>>3]|o[(h>>>3)+1]<<8|o[(h>>>3)+2]<<16)>>>(h&7)&(1<<d)-1},s.H.Z=function(o,h){return(o[h>>>3]|o[(h>>>3)+1]<<8|o[(h>>>3)+2]<<16)>>>(h&7)},s.H.i=function(o,h){return(o[h>>>3]|o[(h>>>3)+1]<<8|o[(h>>>3)+2]<<16|o[(h>>>3)+3]<<24)>>>(h&7)},s.H.m=function(){var o=Uint16Array,h=Uint32Array;return{K:new o(16),j:new o(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new o(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new h(32),J:new o(512),_:[],h:new o(32),$:[],w:new o(32768),C:[],v:[],d:new o(32768),D:[],u:new o(512),Q:[],r:new o(32768),s:new h(286),Y:new h(30),a:new h(19),t:new h(15e3),k:new o(65536),g:new o(32768)}}(),function(){for(var o=s.H.m,h=32768,d=0;d<h;d++){var g=d;g=(g&2863311530)>>>1|(g&1431655765)<<1,g=(g&3435973836)>>>2|(g&858993459)<<2,g=(g&4042322160)>>>4|(g&252645135)<<4,g=(g&4278255360)>>>8|(g&16711935)<<8,o.r[d]=(g>>>16|g<<16)>>>17}function _(b,$,et){for(;$--!=0;)b.push(0,et)}for(var d=0;d<32;d++)o.q[d]=o.S[d]<<3|o.T[d],o.c[d]=o.p[d]<<4|o.z[d];_(o._,144,8),_(o._,112,9),_(o._,24,7),_(o._,8,8),s.H.n(o._,9),s.H.A(o._,9,o.J),s.H.l(o._,9),_(o.$,32,5),s.H.n(o.$,5),s.H.A(o.$,5,o.h),s.H.l(o.$,5),_(o.Q,19,0),_(o.C,286,0),_(o.D,30,0),_(o.v,320,0)}(),s.H.N}();UPNG.decode._readInterlace=function(s,o){for(var h=o.width,d=o.height,g=UPNG.decode._getBPP(o),_=g>>3,b=Math.ceil(h*g/8),$=new Uint8Array(d*b),et=0,tt=[0,0,4,0,2,0,1],rt=[0,4,0,2,0,1,0],nt=[8,8,8,4,4,2,2],At=[8,8,4,4,2,2,1],at=0;at<7;){for(var lt=nt[at],gt=At[at],_t=0,ct=0,pt=tt[at];pt<d;)pt+=lt,ct++;for(var dt=rt[at];dt<h;)dt+=gt,_t++;var mt=Math.ceil(_t*g/8);UPNG.decode._filterZero(s,o,et,_t,ct);for(var Qt=0,xt=tt[at];xt<d;){for(var bt=rt[at],kt=et+Qt*mt<<3;bt<h;){if(g==1){var Lt=s[kt>>3];Lt=Lt>>7-(kt&7)&1,$[xt*b+(bt>>3)]|=Lt<<7-((bt&7)<<0)}if(g==2){var Lt=s[kt>>3];Lt=Lt>>6-(kt&7)&3,$[xt*b+(bt>>2)]|=Lt<<6-((bt&3)<<1)}if(g==4){var Lt=s[kt>>3];Lt=Lt>>4-(kt&7)&15,$[xt*b+(bt>>1)]|=Lt<<4-((bt&1)<<2)}if(g>=8)for(var Ht=xt*b+bt*_,Pt=0;Pt<_;Pt++)$[Ht+Pt]=s[(kt>>3)+Pt];kt+=g,bt+=gt}Qt++,xt+=lt}_t*ct!=0&&(et+=ct*(1+mt)),at=at+1}return $};UPNG.decode._getBPP=function(s){var o=[1,null,3,1,2,null,4][s.ctype];return o*s.depth};UPNG.decode._filterZero=function(s,o,h,d,g){var _=UPNG.decode._getBPP(o),b=Math.ceil(d*_/8),$=UPNG.decode._paeth;_=Math.ceil(_/8);var et=0,tt=1,rt=s[h],nt=0;if(rt>1&&(s[h]=[0,0,1][rt-2]),rt==3)for(nt=_;nt<b;nt++)s[nt+1]=s[nt+1]+(s[nt+1-_]>>>1)&255;for(var At=0;At<g;At++)if(et=h+At*b,tt=et+At+1,rt=s[tt-1],nt=0,rt==0)for(;nt<b;nt++)s[et+nt]=s[tt+nt];else if(rt==1){for(;nt<_;nt++)s[et+nt]=s[tt+nt];for(;nt<b;nt++)s[et+nt]=s[tt+nt]+s[et+nt-_]}else if(rt==2)for(;nt<b;nt++)s[et+nt]=s[tt+nt]+s[et+nt-b];else if(rt==3){for(;nt<_;nt++)s[et+nt]=s[tt+nt]+(s[et+nt-b]>>>1);for(;nt<b;nt++)s[et+nt]=s[tt+nt]+(s[et+nt-b]+s[et+nt-_]>>>1)}else{for(;nt<_;nt++)s[et+nt]=s[tt+nt]+$(0,s[et+nt-b],0);for(;nt<b;nt++)s[et+nt]=s[tt+nt]+$(s[et+nt-_],s[et+nt-b],s[et+nt-_-b])}return s};UPNG.decode._paeth=function(s,o,h){var d=s+o-h,g=d-s,_=d-o,b=d-h;return g*g<=_*_&&g*g<=b*b?s:_*_<=b*b?o:h};UPNG.decode._IHDR=function(s,o,h){var d=UPNG._bin;h.width=d.readUint(s,o),o+=4,h.height=d.readUint(s,o),o+=4,h.depth=s[o],o++,h.ctype=s[o],o++,h.compress=s[o],o++,h.filter=s[o],o++,h.interlace=s[o],o++};UPNG._bin={nextZero:function(s,o){for(;s[o]!=0;)o++;return o},readUshort:function(s,o){return s[o]<<8|s[o+1]},writeUshort:function(s,o,h){s[o]=h>>8&255,s[o+1]=h&255},readUint:function(s,o){return s[o]*(256*256*256)+(s[o+1]<<16|s[o+2]<<8|s[o+3])},writeUint:function(s,o,h){s[o]=h>>24&255,s[o+1]=h>>16&255,s[o+2]=h>>8&255,s[o+3]=h&255},readASCII:function(s,o,h){for(var d="",g=0;g<h;g++)d+=String.fromCharCode(s[o+g]);return d},writeASCII:function(s,o,h){for(var d=0;d<h.length;d++)s[o+d]=h.charCodeAt(d)},readBytes:function(s,o,h){for(var d=[],g=0;g<h;g++)d.push(s[o+g]);return d},pad:function(s){return s.length<2?"0"+s:s},readUTF8:function(s,o,h){for(var d="",g,_=0;_<h;_++)d+="%"+UPNG._bin.pad(s[o+_].toString(16));try{g=decodeURIComponent(d)}catch{return UPNG._bin.readASCII(s,o,h)}return g}};UPNG._copyTile=function(s,o,h,d,g,_,b,$,et){for(var tt=Math.min(o,g),rt=Math.min(h,_),nt=0,At=0,at=0;at<rt;at++)for(var lt=0;lt<tt;lt++)if(b>=0&&$>=0?(nt=at*o+lt<<2,At=($+at)*g+b+lt<<2):(nt=(-$+at)*o-b+lt<<2,At=at*g+lt<<2),et==0)d[At]=s[nt],d[At+1]=s[nt+1],d[At+2]=s[nt+2],d[At+3]=s[nt+3];else if(et==1){var gt=s[nt+3]*.00392156862745098,_t=s[nt]*gt,ct=s[nt+1]*gt,pt=s[nt+2]*gt,dt=d[At+3]*(1/255),mt=d[At]*dt,Qt=d[At+1]*dt,xt=d[At+2]*dt,bt=1-gt,kt=gt+dt*bt,Lt=kt==0?0:1/kt;d[At+3]=255*kt,d[At+0]=(_t+mt*bt)*Lt,d[At+1]=(ct+Qt*bt)*Lt,d[At+2]=(pt+xt*bt)*Lt}else if(et==2){var gt=s[nt+3],_t=s[nt],ct=s[nt+1],pt=s[nt+2],dt=d[At+3],mt=d[At],Qt=d[At+1],xt=d[At+2];gt==dt&&_t==mt&&ct==Qt&&pt==xt?(d[At]=0,d[At+1]=0,d[At+2]=0,d[At+3]=0):(d[At]=_t,d[At+1]=ct,d[At+2]=pt,d[At+3]=gt)}else if(et==3){var gt=s[nt+3],_t=s[nt],ct=s[nt+1],pt=s[nt+2],dt=d[At+3],mt=d[At],Qt=d[At+1],xt=d[At+2];if(gt==dt&&_t==mt&&ct==Qt&&pt==xt)continue;if(gt<220&&dt>20)return!1}return!0};UPNG.encode=function(s,o,h,d,g,_,b){d==null&&(d=0),b==null&&(b=!1);var $=UPNG.encode.compress(s,o,h,d,[!1,!1,!1,0,b]);return UPNG.encode.compressPNG($,-1),UPNG.encode._main($,o,h,g,_)};UPNG.encodeLL=function(s,o,h,d,g,_,b,$){for(var et={ctype:0+(d==1?0:2)+(g==0?0:4),depth:_,frames:[]},tt=(d+g)*_,rt=tt*o,nt=0;nt<s.length;nt++)et.frames.push({rect:{x:0,y:0,width:o,height:h},img:new Uint8Array(s[nt]),blend:0,dispose:1,bpp:Math.ceil(tt/8),bpl:Math.ceil(rt/8)});UPNG.encode.compressPNG(et,0,!0);var At=UPNG.encode._main(et,o,h,b,$);return At};UPNG.encode._main=function(s,o,h,d,g){g==null&&(g={});var _=UPNG.crc.crc,b=UPNG._bin.writeUint,$=UPNG._bin.writeUshort,et=UPNG._bin.writeASCII,tt=8,rt=s.frames.length>1,nt=!1,At=33+(rt?20:0);if(g.sRGB!=null&&(At+=13),g.pHYs!=null&&(At+=21),s.ctype==3){for(var at=s.plte.length,lt=0;lt<at;lt++)s.plte[lt]>>>24!=255&&(nt=!0);At+=8+at*3+4+(nt?8+at*1+4:0)}for(var gt=0;gt<s.frames.length;gt++){var _t=s.frames[gt];rt&&(At+=38),At+=_t.cimg.length+12,gt!=0&&(At+=4)}At+=12;for(var ct=new Uint8Array(At),pt=[137,80,78,71,13,10,26,10],lt=0;lt<8;lt++)ct[lt]=pt[lt];if(b(ct,tt,13),tt+=4,et(ct,tt,"IHDR"),tt+=4,b(ct,tt,o),tt+=4,b(ct,tt,h),tt+=4,ct[tt]=s.depth,tt++,ct[tt]=s.ctype,tt++,ct[tt]=0,tt++,ct[tt]=0,tt++,ct[tt]=0,tt++,b(ct,tt,_(ct,tt-17,17)),tt+=4,g.sRGB!=null&&(b(ct,tt,1),tt+=4,et(ct,tt,"sRGB"),tt+=4,ct[tt]=g.sRGB,tt++,b(ct,tt,_(ct,tt-5,5)),tt+=4),g.pHYs!=null&&(b(ct,tt,9),tt+=4,et(ct,tt,"pHYs"),tt+=4,b(ct,tt,g.pHYs[0]),tt+=4,b(ct,tt,g.pHYs[1]),tt+=4,ct[tt]=g.pHYs[2],tt++,b(ct,tt,_(ct,tt-13,13)),tt+=4),rt&&(b(ct,tt,8),tt+=4,et(ct,tt,"acTL"),tt+=4,b(ct,tt,s.frames.length),tt+=4,b(ct,tt,g.loop!=null?g.loop:0),tt+=4,b(ct,tt,_(ct,tt-12,12)),tt+=4),s.ctype==3){var at=s.plte.length;b(ct,tt,at*3),tt+=4,et(ct,tt,"PLTE"),tt+=4;for(var lt=0;lt<at;lt++){var dt=lt*3,mt=s.plte[lt],Qt=mt&255,xt=mt>>>8&255,bt=mt>>>16&255;ct[tt+dt+0]=Qt,ct[tt+dt+1]=xt,ct[tt+dt+2]=bt}if(tt+=at*3,b(ct,tt,_(ct,tt-at*3-4,at*3+4)),tt+=4,nt){b(ct,tt,at),tt+=4,et(ct,tt,"tRNS"),tt+=4;for(var lt=0;lt<at;lt++)ct[tt+lt]=s.plte[lt]>>>24&255;tt+=at,b(ct,tt,_(ct,tt-at-4,at+4)),tt+=4}}for(var kt=0,gt=0;gt<s.frames.length;gt++){var _t=s.frames[gt];rt&&(b(ct,tt,26),tt+=4,et(ct,tt,"fcTL"),tt+=4,b(ct,tt,kt++),tt+=4,b(ct,tt,_t.rect.width),tt+=4,b(ct,tt,_t.rect.height),tt+=4,b(ct,tt,_t.rect.x),tt+=4,b(ct,tt,_t.rect.y),tt+=4,$(ct,tt,d[gt]),tt+=2,$(ct,tt,1e3),tt+=2,ct[tt]=_t.dispose,tt++,ct[tt]=_t.blend,tt++,b(ct,tt,_(ct,tt-30,30)),tt+=4);var Lt=_t.cimg,at=Lt.length;b(ct,tt,at+(gt==0?0:4)),tt+=4;var Ht=tt;et(ct,tt,gt==0?"IDAT":"fdAT"),tt+=4,gt!=0&&(b(ct,tt,kt++),tt+=4),ct.set(Lt,tt),tt+=at,b(ct,tt,_(ct,Ht,tt-Ht)),tt+=4}return b(ct,tt,0),tt+=4,et(ct,tt,"IEND"),tt+=4,b(ct,tt,_(ct,tt-4,4)),tt+=4,ct.buffer};UPNG.encode.compressPNG=function(s,o,h){for(var d=0;d<s.frames.length;d++){var g=s.frames[d];g.rect.width;var _=g.rect.height,b=new Uint8Array(_*g.bpl+_);g.cimg=UPNG.encode._filterZero(g.img,_,g.bpp,g.bpl,b,o,h)}};UPNG.encode.compress=function(s,o,h,d,g){for(var _=g[0],b=g[1],$=g[2],et=g[3],tt=g[4],rt=6,nt=8,At=255,at=0;at<s.length;at++)for(var lt=new Uint8Array(s[at]),gt=lt.length,_t=0;_t<gt;_t+=4)At&=lt[_t+3];var ct=At!=255,pt=UPNG.encode.framize(s,o,h,_,b,$),dt={},mt=[],Qt=[];if(d!=0){for(var xt=[],_t=0;_t<pt.length;_t++)xt.push(pt[_t].img.buffer);for(var bt=UPNG.encode.concatRGBA(xt),kt=UPNG.quantize(bt,d),Lt=0,Ht=new Uint8Array(kt.abuf),_t=0;_t<pt.length;_t++){var Pt=pt[_t].img,jt=Pt.length;Qt.push(new Uint8Array(kt.inds.buffer,Lt>>2,jt>>2));for(var at=0;at<jt;at+=4)Pt[at]=Ht[Lt+at],Pt[at+1]=Ht[Lt+at+1],Pt[at+2]=Ht[Lt+at+2],Pt[at+3]=Ht[Lt+at+3];Lt+=jt}for(var _t=0;_t<kt.plte.length;_t++)mt.push(kt.plte[_t].est.rgba)}else for(var at=0;at<pt.length;at++){var Vt=pt[at],Xt=new Uint32Array(Vt.img.buffer),nr=Vt.rect.width,gt=Xt.length,Ar=new Uint8Array(gt);Qt.push(Ar);for(var _t=0;_t<gt;_t++){var ar=Xt[_t];if(_t!=0&&ar==Xt[_t-1])Ar[_t]=Ar[_t-1];else if(_t>nr&&ar==Xt[_t-nr])Ar[_t]=Ar[_t-nr];else{var Wt=dt[ar];if(Wt==null&&(dt[ar]=Wt=mt.length,mt.push(ar),mt.length>=300))break;Ar[_t]=Wt}}}var pr=mt.length;pr<=256&&tt==!1&&(pr<=2?nt=1:pr<=4?nt=2:pr<=16?nt=4:nt=8,nt=Math.max(nt,et));for(var at=0;at<pt.length;at++){var Vt=pt[at];Vt.rect.x,Vt.rect.y;var nr=Vt.rect.width,dr=Vt.rect.height,yr=Vt.img;new Uint32Array(yr.buffer);var Br=4*nr,Lr=4;if(pr<=256&&tt==!1){Br=Math.ceil(nt*nr/8);for(var Ur=new Uint8Array(Br*dr),or=Qt[at],mr=0;mr<dr;mr++){var _t=mr*Br,Ir=mr*nr;if(nt==8)for(var ur=0;ur<nr;ur++)Ur[_t+ur]=or[Ir+ur];else if(nt==4)for(var ur=0;ur<nr;ur++)Ur[_t+(ur>>1)]|=or[Ir+ur]<<4-(ur&1)*4;else if(nt==2)for(var ur=0;ur<nr;ur++)Ur[_t+(ur>>2)]|=or[Ir+ur]<<6-(ur&3)*2;else if(nt==1)for(var ur=0;ur<nr;ur++)Ur[_t+(ur>>3)]|=or[Ir+ur]<<7-(ur&7)*1}yr=Ur,rt=3,Lr=1}else if(ct==!1&&pt.length==1){for(var Ur=new Uint8Array(nr*dr*3),lr=nr*dr,_t=0;_t<lr;_t++){var Pt=_t*3,Xr=_t*4;Ur[Pt]=yr[Xr],Ur[Pt+1]=yr[Xr+1],Ur[Pt+2]=yr[Xr+2]}yr=Ur,rt=2,Lr=3,Br=3*nr}Vt.img=yr,Vt.bpl=Br,Vt.bpp=Lr}return{ctype:rt,depth:nt,plte:mt,frames:pt}};UPNG.encode.framize=function(s,o,h,d,g,_){for(var b=[],$=0;$<s.length;$++){var et=new Uint8Array(s[$]),tt=new Uint32Array(et.buffer),rt,nt=0,At=0,at=o,lt=h,gt=d?1:0;if($!=0){for(var _t=_||d||$==1||b[$-2].dispose!=0?1:2,ct=0,pt=1e9,dt=0;dt<_t;dt++){for(var Vt=new Uint8Array(s[$-1-dt]),mt=new Uint32Array(s[$-1-dt]),Qt=o,xt=h,bt=-1,kt=-1,Lt=0;Lt<h;Lt++)for(var Ht=0;Ht<o;Ht++){var Pt=Lt*o+Ht;tt[Pt]!=mt[Pt]&&(Ht<Qt&&(Qt=Ht),Ht>bt&&(bt=Ht),Lt<xt&&(xt=Lt),Lt>kt&&(kt=Lt))}bt==-1&&(Qt=xt=bt=kt=0),g&&((Qt&1)==1&&Qt--,(xt&1)==1&&xt--);var jt=(bt-Qt+1)*(kt-xt+1);jt<pt&&(pt=jt,ct=dt,nt=Qt,At=xt,at=bt-Qt+1,lt=kt-xt+1)}var Vt=new Uint8Array(s[$-1-ct]);ct==1&&(b[$-1].dispose=2),rt=new Uint8Array(at*lt*4),UPNG._copyTile(Vt,o,h,rt,at,lt,-nt,-At,0),gt=UPNG._copyTile(et,o,h,rt,at,lt,-nt,-At,3)?1:0,gt==1?UPNG.encode._prepareDiff(et,o,h,rt,{x:nt,y:At,width:at,height:lt}):UPNG._copyTile(et,o,h,rt,at,lt,-nt,-At,0)}else rt=et.slice(0);b.push({rect:{x:nt,y:At,width:at,height:lt},img:rt,blend:gt,dispose:0})}if(d)for(var $=0;$<b.length;$++){var Xt=b[$];if(Xt.blend!=1){var nr=Xt.rect,Ar=b[$-1].rect,ar=Math.min(nr.x,Ar.x),Wt=Math.min(nr.y,Ar.y),pr=Math.max(nr.x+nr.width,Ar.x+Ar.width),dr=Math.max(nr.y+nr.height,Ar.y+Ar.height),yr={x:ar,y:Wt,width:pr-ar,height:dr-Wt};b[$-1].dispose=1,$-1!=0&&UPNG.encode._updateFrame(s,o,h,b,$-1,yr,g),UPNG.encode._updateFrame(s,o,h,b,$,yr,g)}}var Br=0;if(s.length!=1)for(var Pt=0;Pt<b.length;Pt++){var Xt=b[Pt];Br+=Xt.rect.width*Xt.rect.height}return b};UPNG.encode._updateFrame=function(s,o,h,d,g,_,b){for(var $=Uint8Array,et=Uint32Array,tt=new $(s[g-1]),rt=new et(s[g-1]),nt=g+1<s.length?new $(s[g+1]):null,At=new $(s[g]),at=new et(At.buffer),lt=o,gt=h,_t=-1,ct=-1,pt=0;pt<_.height;pt++)for(var dt=0;dt<_.width;dt++){var mt=_.x+dt,Qt=_.y+pt,xt=Qt*o+mt,bt=at[xt];bt==0||d[g-1].dispose==0&&rt[xt]==bt&&(nt==null||nt[xt*4+3]!=0)||(mt<lt&&(lt=mt),mt>_t&&(_t=mt),Qt<gt&&(gt=Qt),Qt>ct&&(ct=Qt))}_t==-1&&(lt=gt=_t=ct=0),b&&((lt&1)==1&&lt--,(gt&1)==1&&gt--),_={x:lt,y:gt,width:_t-lt+1,height:ct-gt+1};var kt=d[g];kt.rect=_,kt.blend=1,kt.img=new Uint8Array(_.width*_.height*4),d[g-1].dispose==0?(UPNG._copyTile(tt,o,h,kt.img,_.width,_.height,-_.x,-_.y,0),UPNG.encode._prepareDiff(At,o,h,kt.img,_)):UPNG._copyTile(At,o,h,kt.img,_.width,_.height,-_.x,-_.y,0)};UPNG.encode._prepareDiff=function(s,o,h,d,g){UPNG._copyTile(s,o,h,d,g.width,g.height,-g.x,-g.y,2)};UPNG.encode._filterZero=function(s,o,h,d,g,_,b){var $=[],et=[0,1,2,3,4];_!=-1?et=[_]:(o*d>5e5||h==1)&&(et=[0]);var tt;b&&(tt={level:0});for(var rt=b&&UZIP!=null?UZIP:pako,nt=0;nt<et.length;nt++){for(var At=0;At<o;At++)UPNG.encode._filterLine(g,s,At,d,h,et[nt]);$.push(rt.deflate(g,tt))}for(var at,lt=1e9,nt=0;nt<$.length;nt++)$[nt].length<lt&&(at=nt,lt=$[nt].length);return $[at]};UPNG.encode._filterLine=function(s,o,h,d,g,_){var b=h*d,$=b+h,et=UPNG.decode._paeth;if(s[$]=_,$++,_==0)if(d<500)for(var tt=0;tt<d;tt++)s[$+tt]=o[b+tt];else s.set(new Uint8Array(o.buffer,b,d),$);else if(_==1){for(var tt=0;tt<g;tt++)s[$+tt]=o[b+tt];for(var tt=g;tt<d;tt++)s[$+tt]=o[b+tt]-o[b+tt-g]+256&255}else if(h==0){for(var tt=0;tt<g;tt++)s[$+tt]=o[b+tt];if(_==2)for(var tt=g;tt<d;tt++)s[$+tt]=o[b+tt];if(_==3)for(var tt=g;tt<d;tt++)s[$+tt]=o[b+tt]-(o[b+tt-g]>>1)+256&255;if(_==4)for(var tt=g;tt<d;tt++)s[$+tt]=o[b+tt]-et(o[b+tt-g],0,0)+256&255}else{if(_==2)for(var tt=0;tt<d;tt++)s[$+tt]=o[b+tt]+256-o[b+tt-d]&255;if(_==3){for(var tt=0;tt<g;tt++)s[$+tt]=o[b+tt]+256-(o[b+tt-d]>>1)&255;for(var tt=g;tt<d;tt++)s[$+tt]=o[b+tt]+256-(o[b+tt-d]+o[b+tt-g]>>1)&255}if(_==4){for(var tt=0;tt<g;tt++)s[$+tt]=o[b+tt]+256-et(0,o[b+tt-d],0)&255;for(var tt=g;tt<d;tt++)s[$+tt]=o[b+tt]+256-et(o[b+tt-g],o[b+tt-d],o[b+tt-g-d])&255}}};UPNG.crc={table:function(){for(var s=new Uint32Array(256),o=0;o<256;o++){for(var h=o,d=0;d<8;d++)h&1?h=3988292384^h>>>1:h=h>>>1;s[o]=h}return s}(),update:function(s,o,h,d){for(var g=0;g<d;g++)s=UPNG.crc.table[(s^o[h+g])&255]^s>>>8;return s},crc:function(s,o,h){return UPNG.crc.update(4294967295,s,o,h)^4294967295}};UPNG.quantize=function(s,o){var h=new Uint8Array(s),d=h.slice(0),g=new Uint32Array(d.buffer),_=UPNG.quantize.getKDtree(d,o),b=_[0],$=_[1];UPNG.quantize.planeDst;for(var et=h,tt=g,rt=et.length,nt=new Uint8Array(h.length>>2),At=0;At<rt;At+=4){var at=et[At]*.00392156862745098,lt=et[At+1]*(1/255),gt=et[At+2]*(1/255),_t=et[At+3]*(1/255),ct=UPNG.quantize.getNearest(b,at,lt,gt,_t);nt[At>>2]=ct.ind,tt[At>>2]=ct.est.rgba}return{abuf:d.buffer,inds:nt,plte:$}};UPNG.quantize.getKDtree=function(s,o,h){h==null&&(h=1e-4);var d=new Uint32Array(s.buffer),g={i0:0,i1:s.length,bst:null,est:null,tdst:0,left:null,right:null};g.bst=UPNG.quantize.stats(s,g.i0,g.i1),g.est=UPNG.quantize.estats(g.bst);for(var _=[g];_.length<o;){for(var b=0,$=0,et=0;et<_.length;et++)_[et].est.L>b&&(b=_[et].est.L,$=et);if(b<h)break;var tt=_[$],rt=UPNG.quantize.splitPixels(s,d,tt.i0,tt.i1,tt.est.e,tt.est.eMq255),nt=tt.i0>=rt||tt.i1<=rt;if(nt){tt.est.L=0;continue}var At={i0:tt.i0,i1:rt,bst:null,est:null,tdst:0,left:null,right:null};At.bst=UPNG.quantize.stats(s,At.i0,At.i1),At.est=UPNG.quantize.estats(At.bst);var at={i0:rt,i1:tt.i1,bst:null,est:null,tdst:0,left:null,right:null};at.bst={R:[],m:[],N:tt.bst.N-At.bst.N};for(var et=0;et<16;et++)at.bst.R[et]=tt.bst.R[et]-At.bst.R[et];for(var et=0;et<4;et++)at.bst.m[et]=tt.bst.m[et]-At.bst.m[et];at.est=UPNG.quantize.estats(at.bst),tt.left=At,tt.right=at,_[$]=At,_.push(at)}_.sort(function(lt,gt){return gt.bst.N-lt.bst.N});for(var et=0;et<_.length;et++)_[et].ind=et;return[g,_]};UPNG.quantize.getNearest=function(s,o,h,d,g){if(s.left==null)return s.tdst=UPNG.quantize.dist(s.est.q,o,h,d,g),s;var _=UPNG.quantize.planeDst(s.est,o,h,d,g),b=s.left,$=s.right;_>0&&(b=s.right,$=s.left);var et=UPNG.quantize.getNearest(b,o,h,d,g);if(et.tdst<=_*_)return et;var tt=UPNG.quantize.getNearest($,o,h,d,g);return tt.tdst<et.tdst?tt:et};UPNG.quantize.planeDst=function(s,o,h,d,g){var _=s.e;return _[0]*o+_[1]*h+_[2]*d+_[3]*g-s.eMq};UPNG.quantize.dist=function(s,o,h,d,g){var _=o-s[0],b=h-s[1],$=d-s[2],et=g-s[3];return _*_+b*b+$*$+et*et};UPNG.quantize.splitPixels=function(s,o,h,d,g,_){var b=UPNG.quantize.vecDot;for(d-=4;h<d;){for(;b(s,h,g)<=_;)h+=4;for(;b(s,d,g)>_;)d-=4;if(h>=d)break;var $=o[h>>2];o[h>>2]=o[d>>2],o[d>>2]=$,h+=4,d-=4}for(;b(s,h,g)>_;)h-=4;return h+4};UPNG.quantize.vecDot=function(s,o,h){return s[o]*h[0]+s[o+1]*h[1]+s[o+2]*h[2]+s[o+3]*h[3]};UPNG.quantize.stats=function(s,o,h){for(var d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],g=[0,0,0,0],_=h-o>>2,b=o;b<h;b+=4){var $=s[b]*.00392156862745098,et=s[b+1]*(1/255),tt=s[b+2]*(1/255),rt=s[b+3]*(1/255);g[0]+=$,g[1]+=et,g[2]+=tt,g[3]+=rt,d[0]+=$*$,d[1]+=$*et,d[2]+=$*tt,d[3]+=$*rt,d[5]+=et*et,d[6]+=et*tt,d[7]+=et*rt,d[10]+=tt*tt,d[11]+=tt*rt,d[15]+=rt*rt}return d[4]=d[1],d[8]=d[2],d[9]=d[6],d[12]=d[3],d[13]=d[7],d[14]=d[11],{R:d,m:g,N:_}};UPNG.quantize.estats=function(s){var o=s.R,h=s.m,d=s.N,g=h[0],_=h[1],b=h[2],$=h[3],et=d==0?0:1/d,tt=[o[0]-g*g*et,o[1]-g*_*et,o[2]-g*b*et,o[3]-g*$*et,o[4]-_*g*et,o[5]-_*_*et,o[6]-_*b*et,o[7]-_*$*et,o[8]-b*g*et,o[9]-b*_*et,o[10]-b*b*et,o[11]-b*$*et,o[12]-$*g*et,o[13]-$*_*et,o[14]-$*b*et,o[15]-$*$*et],rt=tt,nt=UPNG.M4,At=[.5,.5,.5,.5],at=0,lt=0;if(d!=0)for(var gt=0;gt<10&&(At=nt.multVec(rt,At),lt=Math.sqrt(nt.dot(At,At)),At=nt.sml(1/lt,At),!(Math.abs(lt-at)<1e-9));gt++)at=lt;var _t=[g*et,_*et,b*et,$*et],ct=nt.dot(nt.sml(255,_t),At);return{Cov:tt,q:_t,e:At,L:at,eMq255:ct,eMq:nt.dot(At,_t),rgba:(Math.round(255*_t[3])<<24|Math.round(255*_t[2])<<16|Math.round(255*_t[1])<<8|Math.round(255*_t[0])<<0)>>>0}};UPNG.M4={multVec:function(s,o){return[s[0]*o[0]+s[1]*o[1]+s[2]*o[2]+s[3]*o[3],s[4]*o[0]+s[5]*o[1]+s[6]*o[2]+s[7]*o[3],s[8]*o[0]+s[9]*o[1]+s[10]*o[2]+s[11]*o[3],s[12]*o[0]+s[13]*o[1]+s[14]*o[2]+s[15]*o[3]]},dot:function(s,o){return s[0]*o[0]+s[1]*o[1]+s[2]*o[2]+s[3]*o[3]},sml:function(s,o){return[s*o[0],s*o[1],s*o[2],s*o[3]]}};UPNG.encode.concatRGBA=function(s){for(var o=0,h=0;h<s.length;h++)o+=s[h].byteLength;for(var d=new Uint8Array(o),g=0,h=0;h<s.length;h++){for(var _=new Uint8Array(s[h]),b=_.length,$=0;$<b;$+=4){var et=_[$],tt=_[$+1],rt=_[$+2],nt=_[$+3];nt==0&&(et=tt=rt=0),d[g+$]=et,d[g+$+1]=tt,d[g+$+2]=rt,d[g+$+3]=nt}g+=b}return d.buffer};class TxSprite{constructor(o,h,d,g,_,b=!1){$e(this,"width"),$e(this,"height"),$e(this,"numColors"),$e(this,"paletteData"),$e(this,"pixelData"),$e(this,"compress"),this.width=o,this.height=h,this.numColors=d,this.paletteData=g,this.pixelData=_,this.compress=b,g.length/3!==d&&d>0&&console.warn(`TxSprite constructor: numColors (${d}) does not match paletteData length (${g.length/3} colors).`),_.length!==o*h&&o*h>0&&console.warn(`TxSprite constructor: pixelData length (${_.length}) does not match width*height (${o*h}).`)}static async fromIndexedPngBytes(o,h=!1){const d=UPNG.decode(o),{width:g,height:_,data:b,ctype:$,tabs:et}=d;return console.log(`PNG dimensions: ${g}x${_}, data length: ${b.byteLength}, ctype: ${$}, PLTE: ${et.PLTE}`),new TxSprite(g,_,et.PLTE?et.PLTE.length/3:0,et.PLTE?new Uint8Array(et.PLTE):new Uint8Array,new Uint8Array(b.slice(0,g*_)),h)}static async fromImageBytes(o,h=48e3,d=!1){let g=await Image$1.load(o),_=g.width*g.height;if(_>h){const At=Math.sqrt(h/_);g=g.resize({factor:At})}(g.width>640||g.height>400)&&(g=g.resize({width:640,height:400,preserveAspectRatio:!0,interpolation:"nearestNeighbor"})),console.log(`Resized image to ${g.width}x${g.height}`);const b=utils_exports.PointContainer.fromUint8Array(g.getRGBAData(),g.width,g.height);console.log(`PointContainer created with ${b.getPointArray().length} points.`);const $=buildPaletteSync([b],{colors:15});console.log(`Palette built: ${$.getPointContainer().getPointArray().length} colors.`),$.getPointContainer().getPointArray().unshift(utils_exports.Point.createByQuadruplet([0,0,0,0]));const et=applyPaletteSync(b,$);console.log(`OutPointContainer: ${et.getPointArray().length} points.`);const tt=new Uint8Array(et.toUint32Array());console.log(`Indexed pixel data size: ${tt.length}.`);const rt=$.getPointContainer().getPointArray().length,nt=new Uint8Array(rt*3);return $.getPointContainer().getPointArray().forEach((At,at)=>{nt[at*3+0]=At.r,nt[at*3+1]=At.g,nt[at*3+2]=At.b,console.log(`Color ${at}: R=${At.r}, G=${At.g}, B=${At.b}`)}),new TxSprite(g.width,g.height,rt,nt,tt,d)}get bpp(){return this.numColors<=0?4:this.numColors<=2?1:this.numColors<=4?2:(this.numColors<=16||console.warn(`numColors (${this.numColors}) is greater than 16. Defaulting BPP to 4.`),4)}pack(){let o;const h=this.bpp;switch(h){case 1:o=TxSprite._pack_1bit(this.pixelData);break;case 2:o=TxSprite._pack_2bit(this.pixelData);break;case 4:o=TxSprite._pack_4bit(this.pixelData);break;default:throw new Error(`Unsupported bpp: ${h}`)}const d=new Uint8Array(7),g=new DataView(d.buffer);g.setUint16(0,this.width,!1),g.setUint16(2,this.height,!1),g.setUint8(4,this.compress?1:0),g.setUint8(5,h),g.setUint8(6,this.numColors>16?16:this.numColors);let _=o;if(this.compress)try{_=lz4.compress(Buffer.from(o),9)}catch($){throw console.error("LZ4 compression failed:",$),$}const b=new Uint8Array(d.length+this.paletteData.length+_.length);return b.set(d,0),b.set(this.paletteData,d.length),b.set(_,d.length+this.paletteData.length),b}static _pack_1bit(o){const h=Math.ceil(o.length/8),d=new Uint8Array(h);for(let g=0;g<o.length;g++){const _=Math.floor(g/8),b=7-g%8;o[g]&1&&(d[_]|=1<<b)}return d}static _pack_2bit(o){const h=Math.ceil(o.length/4),d=new Uint8Array(h);for(let g=0;g<o.length;g++){const _=Math.floor(g/4),b=(3-g%4)*2;d[_]|=(o[g]&3)<<b}return d}static _pack_4bit(o){const h=Math.ceil(o.length/2),d=new Uint8Array(h);for(let g=0;g<o.length;g++){const _=Math.floor(g/2),b=(1-g%2)*4;d[_]|=(o[g]&15)<<b}return d}}const Rt=class EA{constructor(o={}){$e(this,"nonFinalChunkFlag"),$e(this,"finalChunkFlag"),$e(this,"upright"),$e(this,"isRaw"),$e(this,"quality"),$e(this,"resolution"),$e(this,"queue"),$e(this,"_imageDataChunks"),this.nonFinalChunkFlag=o.nonFinalChunkFlag??7,this.finalChunkFlag=o.finalChunkFlag??8,this.upright=o.upright??!0,this.isRaw=o.isRaw??!1,this.quality=o.quality??null,this.resolution=o.resolution??null,this.queue=null,this._imageDataChunks=[]}static hasJpegHeader(o,h){return`${o}_${h}`in EA._jpegHeaderMap}concatenateImageData(){let o=0;for(const g of this._imageDataChunks)o+=g.length;const h=new Uint8Array(o);let d=0;for(const g of this._imageDataChunks)h.set(g,d),d+=g.length;return h}handleData(o){if(!this.queue){console.warn("RxPhoto: Received data but queue not initialized - call attach() first");return}const h=o[0],d=o.slice(1);this._imageDataChunks.push(d),h===this.finalChunkFlag&&this._processCompleteImage().catch(g=>{console.error("RxPhoto: Error processing complete image:",g),this._imageDataChunks=[]})}async _processCompleteImage(){if(!this.queue)return;let o;const h=this.concatenateImageData();if(this._imageDataChunks=[],this.isRaw){if(!this.quality||!this.resolution)throw new Error("RxPhoto: Quality and resolution must be set for raw images if no header is cached.");const d=`${this.quality}_${this.resolution}`,g=EA._jpegHeaderMap[d];if(!g)throw new Error(`RxPhoto: No JPEG header found for quality ${this.quality} and resolution ${this.resolution} - request full JPEG first to cache header.`);const _=new Uint8Array(g.length+h.length);_.set(g,0),_.set(h,g.length),o=_}else if(o=h,this.quality&&this.resolution){const d=`${this.quality}_${this.resolution}`;if(!EA._jpegHeaderMap[d]){const g=o.slice(0,623);EA._jpegHeaderMap[d]=g}}this.upright?(console.log("Rotating image 90 degrees counter-clockwise"),this.queue.put(await this.rotateJpeg90CounterClockwise(o))):this.queue.put(o)}async attach(o){return this.isRaw&&(!this.quality||!this.resolution)&&console.warn("RxPhoto: Handling raw images without quality/resolution specified. Header must be pre-cached or will fail."),this.queue=new AsyncQueue,this._imageDataChunks=[],o.registerDataResponseHandler(this,[this.nonFinalChunkFlag,this.finalChunkFlag],this.handleData.bind(this)),this.queue}detach(o){o.unregisterDataResponseHandler(this),this.queue&&this.queue.clear(),this.queue=null,this._imageDataChunks=[]}async rotateJpeg90CounterClockwise(o){const h=jpeg.decode(o,{useTArray:!0});if(!h||!h.data||!h.width||!h.height)throw new Error("Failed to decode JPEG image.");const d=document.createElement("canvas");d.width=h.height,d.height=h.width;const g=d.getContext("2d");if(!g)throw new Error("Failed to get canvas 2D context.");const _=document.createElement("canvas");_.width=h.width,_.height=h.height;const b=_.getContext("2d");if(!b)throw new Error("Failed to get temporary canvas 2D context.");b.putImageData(new ImageData(new Uint8ClampedArray(h.data.buffer),h.width,h.height),0,0),g.clearRect(0,0,d.width,d.height),g.translate(0,d.height),g.rotate(-90*Math.PI/180),g.drawImage(_,0,0);const $=await(await new Promise((et,tt)=>{d.toBlob(rt=>{rt?et(rt):tt(new Error("Failed to convert canvas to JPEG blob."))},"image/jpeg")})).arrayBuffer();return new Uint8Array($)}};$e(Rt,"_jpegHeaderMap",{});let RxPhoto=Rt;const markinoFrameApp=`local data = require('data.min')
local plain_txt = require('plain_text.min')
local camera = require('camera.min')
local sprite = require('sprite.min')
local TEXT_MSG = 0x0A
local CAPTURE_SETTINGS_MSG = 0x0D
local IMAGE_SPRITE_MSG = 0x20
data.parsers[TEXT_MSG] = plain_txt.parse_plain_text
data.parsers[CAPTURE_SETTINGS_MSG] = camera.parse_capture_settings
data.parsers[IMAGE_SPRITE_MSG] = sprite.parse_sprite
local CHAR_PER_LINE = 25
local LINES_PER_PAGE = 5
local LINE_HEIGHT = 60
local wrapped = {}
local page = 1
local function wrap(s)
  local out = {}
  for i = 1, #s, CHAR_PER_LINE do
    out[#out + 1] = s:sub(i, i + CHAR_PER_LINE - 1)
  end
  return out
end
local function clear()
  frame.display.text(' ', 1, 1)
  frame.display.show()
  frame.sleep(0.04)
end
local function render()
  clear()
  for o = 0, LINES_PER_PAGE - 1 do
    local L = wrapped[page + o]
    if not L then break end
    frame.display.text(L, 1, o * LINE_HEIGHT + 1)
  end
  frame.display.show()
end
local function on_tap()
  page = page + LINES_PER_PAGE
  if page > #wrapped then page = 1 end
  render()
end
frame.imu.tap_callback(on_tap)
clear()
print('In esecuzione')
while true do
  local ok, err = pcall(function()
    local n = data.process_raw_items()
    if n > 0 then
      -- testo
      if data.app_data[TEXT_MSG] then
        wrapped = wrap(data.app_data[TEXT_MSG].string or '')
        page    = 1
        render()
        data.app_data[TEXT_MSG] = nil
      end
      if data.app_data[CAPTURE_SETTINGS_MSG] then
        camera.capture_and_send(data.app_data[CAPTURE_SETTINGS_MSG])
        data.app_data[CAPTURE_SETTINGS_MSG] = nil
      end
      if data.app_data[IMAGE_SPRITE_MSG] then
        local spr = data.app_data[IMAGE_SPRITE_MSG]
        print("Sprite ricevuto", spr.width, spr.height)
        sprite.set_palette(spr.num_colors, spr.palette_data)
        frame.display.bitmap(1, 1, spr.width, 2 ^ spr.bpp, 0, spr.pixel_data)
        frame.display.show()
        print("Sprite visualizzato")
        data.app_data[IMAGE_SPRITE_MSG] = nil
        collectgarbage('collect')
      end
    end
  end)
  if not ok then
    print('Errore:', err)
    clear()
  end
  frame.sleep(0.1)
end
`;var leafletSrc={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(s,o){(function(h,d){d(o)})(commonjsGlobal,function(h){var d="1.9.4";function g(j){var it,ft,Et,Mt;for(ft=1,Et=arguments.length;ft<Et;ft++){Mt=arguments[ft];for(it in Mt)j[it]=Mt[it]}return j}var _=Object.create||function(){function j(){}return function(it){return j.prototype=it,new j}}();function b(j,it){var ft=Array.prototype.slice;if(j.bind)return j.bind.apply(j,ft.call(arguments,1));var Et=ft.call(arguments,2);return function(){return j.apply(it,Et.length?Et.concat(ft.call(arguments)):arguments)}}var $=0;function et(j){return"_leaflet_id"in j||(j._leaflet_id=++$),j._leaflet_id}function tt(j,it,ft){var Et,Mt,qt,cr;return cr=function(){Et=!1,Mt&&(qt.apply(ft,Mt),Mt=!1)},qt=function(){Et?Mt=arguments:(j.apply(ft,arguments),setTimeout(cr,it),Et=!0)},qt}function rt(j,it,ft){var Et=it[1],Mt=it[0],qt=Et-Mt;return j===Et&&ft?j:((j-Mt)%qt+qt)%qt+Mt}function nt(){return!1}function At(j,it){if(it===!1)return j;var ft=Math.pow(10,it===void 0?6:it);return Math.round(j*ft)/ft}function at(j){return j.trim?j.trim():j.replace(/^\s+|\s+$/g,"")}function lt(j){return at(j).split(/\s+/)}function gt(j,it){Object.prototype.hasOwnProperty.call(j,"options")||(j.options=j.options?_(j.options):{});for(var ft in it)j.options[ft]=it[ft];return j.options}function _t(j,it,ft){var Et=[];for(var Mt in j)Et.push(encodeURIComponent(ft?Mt.toUpperCase():Mt)+"="+encodeURIComponent(j[Mt]));return(!it||it.indexOf("?")===-1?"?":"&")+Et.join("&")}var ct=/\{ *([\w_ -]+) *\}/g;function pt(j,it){return j.replace(ct,function(ft,Et){var Mt=it[Et];if(Mt===void 0)throw new Error("No value provided for variable "+ft);return typeof Mt=="function"&&(Mt=Mt(it)),Mt})}var dt=Array.isArray||function(j){return Object.prototype.toString.call(j)==="[object Array]"};function mt(j,it){for(var ft=0;ft<j.length;ft++)if(j[ft]===it)return ft;return-1}var Qt="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function xt(j){return window["webkit"+j]||window["moz"+j]||window["ms"+j]}var bt=0;function kt(j){var it=+new Date,ft=Math.max(0,16-(it-bt));return bt=it+ft,window.setTimeout(j,ft)}var Lt=window.requestAnimationFrame||xt("RequestAnimationFrame")||kt,Ht=window.cancelAnimationFrame||xt("CancelAnimationFrame")||xt("CancelRequestAnimationFrame")||function(j){window.clearTimeout(j)};function Pt(j,it,ft){if(ft&&Lt===kt)j.call(it);else return Lt.call(window,b(j,it))}function jt(j){j&&Ht.call(window,j)}var Vt={__proto__:null,extend:g,create:_,bind:b,get lastId(){return $},stamp:et,throttle:tt,wrapNum:rt,falseFn:nt,formatNum:At,trim:at,splitWords:lt,setOptions:gt,getParamString:_t,template:pt,isArray:dt,indexOf:mt,emptyImageUrl:Qt,requestFn:Lt,cancelFn:Ht,requestAnimFrame:Pt,cancelAnimFrame:jt};function Xt(){}Xt.extend=function(j){var it=function(){gt(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},ft=it.__super__=this.prototype,Et=_(ft);Et.constructor=it,it.prototype=Et;for(var Mt in this)Object.prototype.hasOwnProperty.call(this,Mt)&&Mt!=="prototype"&&Mt!=="__super__"&&(it[Mt]=this[Mt]);return j.statics&&g(it,j.statics),j.includes&&(nr(j.includes),g.apply(null,[Et].concat(j.includes))),g(Et,j),delete Et.statics,delete Et.includes,Et.options&&(Et.options=ft.options?_(ft.options):{},g(Et.options,j.options)),Et._initHooks=[],Et.callInitHooks=function(){if(!this._initHooksCalled){ft.callInitHooks&&ft.callInitHooks.call(this),this._initHooksCalled=!0;for(var qt=0,cr=Et._initHooks.length;qt<cr;qt++)Et._initHooks[qt].call(this)}},it},Xt.include=function(j){var it=this.prototype.options;return g(this.prototype,j),j.options&&(this.prototype.options=it,this.mergeOptions(j.options)),this},Xt.mergeOptions=function(j){return g(this.prototype.options,j),this},Xt.addInitHook=function(j){var it=Array.prototype.slice.call(arguments,1),ft=typeof j=="function"?j:function(){this[j].apply(this,it)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(ft),this};function nr(j){if(!(typeof L>"u"||!L||!L.Mixin)){j=dt(j)?j:[j];for(var it=0;it<j.length;it++)j[it]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Ar={on:function(j,it,ft){if(typeof j=="object")for(var Et in j)this._on(Et,j[Et],it);else{j=lt(j);for(var Mt=0,qt=j.length;Mt<qt;Mt++)this._on(j[Mt],it,ft)}return this},off:function(j,it,ft){if(!arguments.length)delete this._events;else if(typeof j=="object")for(var Et in j)this._off(Et,j[Et],it);else{j=lt(j);for(var Mt=arguments.length===1,qt=0,cr=j.length;qt<cr;qt++)Mt?this._off(j[qt]):this._off(j[qt],it,ft)}return this},_on:function(j,it,ft,Et){if(typeof it!="function"){console.warn("wrong listener type: "+typeof it);return}if(this._listens(j,it,ft)===!1){ft===this&&(ft=void 0);var Mt={fn:it,ctx:ft};Et&&(Mt.once=!0),this._events=this._events||{},this._events[j]=this._events[j]||[],this._events[j].push(Mt)}},_off:function(j,it,ft){var Et,Mt,qt;if(this._events&&(Et=this._events[j],!!Et)){if(arguments.length===1){if(this._firingCount)for(Mt=0,qt=Et.length;Mt<qt;Mt++)Et[Mt].fn=nt;delete this._events[j];return}if(typeof it!="function"){console.warn("wrong listener type: "+typeof it);return}var cr=this._listens(j,it,ft);if(cr!==!1){var Sr=Et[cr];this._firingCount&&(Sr.fn=nt,this._events[j]=Et=Et.slice()),Et.splice(cr,1)}}},fire:function(j,it,ft){if(!this.listens(j,ft))return this;var Et=g({},it,{type:j,target:this,sourceTarget:it&&it.sourceTarget||this});if(this._events){var Mt=this._events[j];if(Mt){this._firingCount=this._firingCount+1||1;for(var qt=0,cr=Mt.length;qt<cr;qt++){var Sr=Mt[qt],Qr=Sr.fn;Sr.once&&this.off(j,Qr,Sr.ctx),Qr.call(Sr.ctx||this,Et)}this._firingCount--}}return ft&&this._propagateEvent(Et),this},listens:function(j,it,ft,Et){typeof j!="string"&&console.warn('"string" type argument expected');var Mt=it;typeof it!="function"&&(Et=!!it,Mt=void 0,ft=void 0);var qt=this._events&&this._events[j];if(qt&&qt.length&&this._listens(j,Mt,ft)!==!1)return!0;if(Et){for(var cr in this._eventParents)if(this._eventParents[cr].listens(j,it,ft,Et))return!0}return!1},_listens:function(j,it,ft){if(!this._events)return!1;var Et=this._events[j]||[];if(!it)return!!Et.length;ft===this&&(ft=void 0);for(var Mt=0,qt=Et.length;Mt<qt;Mt++)if(Et[Mt].fn===it&&Et[Mt].ctx===ft)return Mt;return!1},once:function(j,it,ft){if(typeof j=="object")for(var Et in j)this._on(Et,j[Et],it,!0);else{j=lt(j);for(var Mt=0,qt=j.length;Mt<qt;Mt++)this._on(j[Mt],it,ft,!0)}return this},addEventParent:function(j){return this._eventParents=this._eventParents||{},this._eventParents[et(j)]=j,this},removeEventParent:function(j){return this._eventParents&&delete this._eventParents[et(j)],this},_propagateEvent:function(j){for(var it in this._eventParents)this._eventParents[it].fire(j.type,g({layer:j.target,propagatedFrom:j.target},j),!0)}};Ar.addEventListener=Ar.on,Ar.removeEventListener=Ar.clearAllEventListeners=Ar.off,Ar.addOneTimeEventListener=Ar.once,Ar.fireEvent=Ar.fire,Ar.hasEventListeners=Ar.listens;var ar=Xt.extend(Ar);function Wt(j,it,ft){this.x=ft?Math.round(j):j,this.y=ft?Math.round(it):it}var pr=Math.trunc||function(j){return j>0?Math.floor(j):Math.ceil(j)};Wt.prototype={clone:function(){return new Wt(this.x,this.y)},add:function(j){return this.clone()._add(dr(j))},_add:function(j){return this.x+=j.x,this.y+=j.y,this},subtract:function(j){return this.clone()._subtract(dr(j))},_subtract:function(j){return this.x-=j.x,this.y-=j.y,this},divideBy:function(j){return this.clone()._divideBy(j)},_divideBy:function(j){return this.x/=j,this.y/=j,this},multiplyBy:function(j){return this.clone()._multiplyBy(j)},_multiplyBy:function(j){return this.x*=j,this.y*=j,this},scaleBy:function(j){return new Wt(this.x*j.x,this.y*j.y)},unscaleBy:function(j){return new Wt(this.x/j.x,this.y/j.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=pr(this.x),this.y=pr(this.y),this},distanceTo:function(j){j=dr(j);var it=j.x-this.x,ft=j.y-this.y;return Math.sqrt(it*it+ft*ft)},equals:function(j){return j=dr(j),j.x===this.x&&j.y===this.y},contains:function(j){return j=dr(j),Math.abs(j.x)<=Math.abs(this.x)&&Math.abs(j.y)<=Math.abs(this.y)},toString:function(){return"Point("+At(this.x)+", "+At(this.y)+")"}};function dr(j,it,ft){return j instanceof Wt?j:dt(j)?new Wt(j[0],j[1]):j==null?j:typeof j=="object"&&"x"in j&&"y"in j?new Wt(j.x,j.y):new Wt(j,it,ft)}function yr(j,it){if(j)for(var ft=it?[j,it]:j,Et=0,Mt=ft.length;Et<Mt;Et++)this.extend(ft[Et])}yr.prototype={extend:function(j){var it,ft;if(!j)return this;if(j instanceof Wt||typeof j[0]=="number"||"x"in j)it=ft=dr(j);else if(j=Br(j),it=j.min,ft=j.max,!it||!ft)return this;return!this.min&&!this.max?(this.min=it.clone(),this.max=ft.clone()):(this.min.x=Math.min(it.x,this.min.x),this.max.x=Math.max(ft.x,this.max.x),this.min.y=Math.min(it.y,this.min.y),this.max.y=Math.max(ft.y,this.max.y)),this},getCenter:function(j){return dr((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,j)},getBottomLeft:function(){return dr(this.min.x,this.max.y)},getTopRight:function(){return dr(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(j){var it,ft;return typeof j[0]=="number"||j instanceof Wt?j=dr(j):j=Br(j),j instanceof yr?(it=j.min,ft=j.max):it=ft=j,it.x>=this.min.x&&ft.x<=this.max.x&&it.y>=this.min.y&&ft.y<=this.max.y},intersects:function(j){j=Br(j);var it=this.min,ft=this.max,Et=j.min,Mt=j.max,qt=Mt.x>=it.x&&Et.x<=ft.x,cr=Mt.y>=it.y&&Et.y<=ft.y;return qt&&cr},overlaps:function(j){j=Br(j);var it=this.min,ft=this.max,Et=j.min,Mt=j.max,qt=Mt.x>it.x&&Et.x<ft.x,cr=Mt.y>it.y&&Et.y<ft.y;return qt&&cr},isValid:function(){return!!(this.min&&this.max)},pad:function(j){var it=this.min,ft=this.max,Et=Math.abs(it.x-ft.x)*j,Mt=Math.abs(it.y-ft.y)*j;return Br(dr(it.x-Et,it.y-Mt),dr(ft.x+Et,ft.y+Mt))},equals:function(j){return j?(j=Br(j),this.min.equals(j.getTopLeft())&&this.max.equals(j.getBottomRight())):!1}};function Br(j,it){return!j||j instanceof yr?j:new yr(j,it)}function Lr(j,it){if(j)for(var ft=it?[j,it]:j,Et=0,Mt=ft.length;Et<Mt;Et++)this.extend(ft[Et])}Lr.prototype={extend:function(j){var it=this._southWest,ft=this._northEast,Et,Mt;if(j instanceof or)Et=j,Mt=j;else if(j instanceof Lr){if(Et=j._southWest,Mt=j._northEast,!Et||!Mt)return this}else return j?this.extend(mr(j)||Ur(j)):this;return!it&&!ft?(this._southWest=new or(Et.lat,Et.lng),this._northEast=new or(Mt.lat,Mt.lng)):(it.lat=Math.min(Et.lat,it.lat),it.lng=Math.min(Et.lng,it.lng),ft.lat=Math.max(Mt.lat,ft.lat),ft.lng=Math.max(Mt.lng,ft.lng)),this},pad:function(j){var it=this._southWest,ft=this._northEast,Et=Math.abs(it.lat-ft.lat)*j,Mt=Math.abs(it.lng-ft.lng)*j;return new Lr(new or(it.lat-Et,it.lng-Mt),new or(ft.lat+Et,ft.lng+Mt))},getCenter:function(){return new or((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new or(this.getNorth(),this.getWest())},getSouthEast:function(){return new or(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(j){typeof j[0]=="number"||j instanceof or||"lat"in j?j=mr(j):j=Ur(j);var it=this._southWest,ft=this._northEast,Et,Mt;return j instanceof Lr?(Et=j.getSouthWest(),Mt=j.getNorthEast()):Et=Mt=j,Et.lat>=it.lat&&Mt.lat<=ft.lat&&Et.lng>=it.lng&&Mt.lng<=ft.lng},intersects:function(j){j=Ur(j);var it=this._southWest,ft=this._northEast,Et=j.getSouthWest(),Mt=j.getNorthEast(),qt=Mt.lat>=it.lat&&Et.lat<=ft.lat,cr=Mt.lng>=it.lng&&Et.lng<=ft.lng;return qt&&cr},overlaps:function(j){j=Ur(j);var it=this._southWest,ft=this._northEast,Et=j.getSouthWest(),Mt=j.getNorthEast(),qt=Mt.lat>it.lat&&Et.lat<ft.lat,cr=Mt.lng>it.lng&&Et.lng<ft.lng;return qt&&cr},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(j,it){return j?(j=Ur(j),this._southWest.equals(j.getSouthWest(),it)&&this._northEast.equals(j.getNorthEast(),it)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Ur(j,it){return j instanceof Lr?j:new Lr(j,it)}function or(j,it,ft){if(isNaN(j)||isNaN(it))throw new Error("Invalid LatLng object: ("+j+", "+it+")");this.lat=+j,this.lng=+it,ft!==void 0&&(this.alt=+ft)}or.prototype={equals:function(j,it){if(!j)return!1;j=mr(j);var ft=Math.max(Math.abs(this.lat-j.lat),Math.abs(this.lng-j.lng));return ft<=(it===void 0?1e-9:it)},toString:function(j){return"LatLng("+At(this.lat,j)+", "+At(this.lng,j)+")"},distanceTo:function(j){return ur.distance(this,mr(j))},wrap:function(){return ur.wrapLatLng(this)},toBounds:function(j){var it=180*j/40075017,ft=it/Math.cos(Math.PI/180*this.lat);return Ur([this.lat-it,this.lng-ft],[this.lat+it,this.lng+ft])},clone:function(){return new or(this.lat,this.lng,this.alt)}};function mr(j,it,ft){return j instanceof or?j:dt(j)&&typeof j[0]!="object"?j.length===3?new or(j[0],j[1],j[2]):j.length===2?new or(j[0],j[1]):null:j==null?j:typeof j=="object"&&"lat"in j?new or(j.lat,"lng"in j?j.lng:j.lon,j.alt):it===void 0?null:new or(j,it,ft)}var Ir={latLngToPoint:function(j,it){var ft=this.projection.project(j),Et=this.scale(it);return this.transformation._transform(ft,Et)},pointToLatLng:function(j,it){var ft=this.scale(it),Et=this.transformation.untransform(j,ft);return this.projection.unproject(Et)},project:function(j){return this.projection.project(j)},unproject:function(j){return this.projection.unproject(j)},scale:function(j){return 256*Math.pow(2,j)},zoom:function(j){return Math.log(j/256)/Math.LN2},getProjectedBounds:function(j){if(this.infinite)return null;var it=this.projection.bounds,ft=this.scale(j),Et=this.transformation.transform(it.min,ft),Mt=this.transformation.transform(it.max,ft);return new yr(Et,Mt)},infinite:!1,wrapLatLng:function(j){var it=this.wrapLng?rt(j.lng,this.wrapLng,!0):j.lng,ft=this.wrapLat?rt(j.lat,this.wrapLat,!0):j.lat,Et=j.alt;return new or(ft,it,Et)},wrapLatLngBounds:function(j){var it=j.getCenter(),ft=this.wrapLatLng(it),Et=it.lat-ft.lat,Mt=it.lng-ft.lng;if(Et===0&&Mt===0)return j;var qt=j.getSouthWest(),cr=j.getNorthEast(),Sr=new or(qt.lat-Et,qt.lng-Mt),Qr=new or(cr.lat-Et,cr.lng-Mt);return new Lr(Sr,Qr)}},ur=g({},Ir,{wrapLng:[-180,180],R:6371e3,distance:function(j,it){var ft=Math.PI/180,Et=j.lat*ft,Mt=it.lat*ft,qt=Math.sin((it.lat-j.lat)*ft/2),cr=Math.sin((it.lng-j.lng)*ft/2),Sr=qt*qt+Math.cos(Et)*Math.cos(Mt)*cr*cr,Qr=2*Math.atan2(Math.sqrt(Sr),Math.sqrt(1-Sr));return this.R*Qr}}),lr=6378137,Xr={R:lr,MAX_LATITUDE:85.0511287798,project:function(j){var it=Math.PI/180,ft=this.MAX_LATITUDE,Et=Math.max(Math.min(ft,j.lat),-ft),Mt=Math.sin(Et*it);return new Wt(this.R*j.lng*it,this.R*Math.log((1+Mt)/(1-Mt))/2)},unproject:function(j){var it=180/Math.PI;return new or((2*Math.atan(Math.exp(j.y/this.R))-Math.PI/2)*it,j.x*it/this.R)},bounds:function(){var j=lr*Math.PI;return new yr([-j,-j],[j,j])}()};function zr(j,it,ft,Et){if(dt(j)){this._a=j[0],this._b=j[1],this._c=j[2],this._d=j[3];return}this._a=j,this._b=it,this._c=ft,this._d=Et}zr.prototype={transform:function(j,it){return this._transform(j.clone(),it)},_transform:function(j,it){return it=it||1,j.x=it*(this._a*j.x+this._b),j.y=it*(this._c*j.y+this._d),j},untransform:function(j,it){return it=it||1,new Wt((j.x/it-this._b)/this._a,(j.y/it-this._d)/this._c)}};function kr(j,it,ft,Et){return new zr(j,it,ft,Et)}var Tr=g({},ur,{code:"EPSG:3857",projection:Xr,transformation:function(){var j=.5/(Math.PI*Xr.R);return kr(j,.5,-j,.5)}()}),Mr=g({},Tr,{code:"EPSG:900913"});function nn(j){return document.createElementNS("http://www.w3.org/2000/svg",j)}function jr(j,it){var ft="",Et,Mt,qt,cr,Sr,Qr;for(Et=0,qt=j.length;Et<qt;Et++){for(Sr=j[Et],Mt=0,cr=Sr.length;Mt<cr;Mt++)Qr=Sr[Mt],ft+=(Mt?"L":"M")+Qr.x+" "+Qr.y;ft+=it?Kt.svg?"z":"x":""}return ft||"M0 0"}var Pr=document.documentElement.style,$r="ActiveXObject"in window,Cr=$r&&!document.addEventListener,tn="msLaunchUri"in navigator&&!("documentMode"in document),An=zt("webkit"),Jr=zt("android"),Dr=zt("android 2")||zt("android 3"),on=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),qr=Jr&&zt("Google")&&on<537&&!("AudioNode"in window),Yr=!!window.opera,Wr=!tn&&zt("chrome"),rn=zt("gecko")&&!An&&!Yr&&!$r,Nr=!Wr&&zt("safari"),en=zt("phantom"),Ft="OTransition"in Pr,sr=navigator.platform.indexOf("Win")===0,hr=$r&&"transition"in Pr,br="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Dr,Gt="MozPerspective"in Pr,ir=!window.L_DISABLE_3D&&(hr||br||Gt)&&!Ft&&!en,yt=typeof orientation<"u"||zt("mobile"),gr=yt&&An,Hr=yt&&br,ut=!window.PointerEvent&&window.MSPointerEvent,tr=!!(window.PointerEvent||ut),rr="ontouchstart"in window||!!window.TouchEvent,Ct=!window.L_NO_TOUCH&&(rr||tr),Nt=yt&&Yr,Jt=yt&&rn,Rr=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,wt=function(){var j=!1;try{var it=Object.defineProperty({},"passive",{get:function(){j=!0}});window.addEventListener("testPassiveEventSupport",nt,it),window.removeEventListener("testPassiveEventSupport",nt,it)}catch{}return j}(),ot=function(){return!!document.createElement("canvas").getContext}(),st=!!(document.createElementNS&&nn("svg").createSVGRect),ht=!!st&&function(){var j=document.createElement("div");return j.innerHTML="<svg/>",(j.firstChild&&j.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),vt=!st&&function(){try{var j=document.createElement("div");j.innerHTML='<v:shape adj="1"/>';var it=j.firstChild;return it.style.behavior="url(#default#VML)",it&&typeof it.adj=="object"}catch{return!1}}(),Ut=navigator.platform.indexOf("Mac")===0,Ot=navigator.platform.indexOf("Linux")===0;function zt(j){return navigator.userAgent.toLowerCase().indexOf(j)>=0}var Kt={ie:$r,ielt9:Cr,edge:tn,webkit:An,android:Jr,android23:Dr,androidStock:qr,opera:Yr,chrome:Wr,gecko:rn,safari:Nr,phantom:en,opera12:Ft,win:sr,ie3d:hr,webkit3d:br,gecko3d:Gt,any3d:ir,mobile:yt,mobileWebkit:gr,mobileWebkit3d:Hr,msPointer:ut,pointer:tr,touch:Ct,touchNative:rr,mobileOpera:Nt,mobileGecko:Jt,retina:Rr,passiveEvents:wt,canvas:ot,svg:st,vml:vt,inlineSvg:ht,mac:Ut,linux:Ot},_e=Kt.msPointer?"MSPointerDown":"pointerdown",_r=Kt.msPointer?"MSPointerMove":"pointermove",er=Kt.msPointer?"MSPointerUp":"pointerup",Er=Kt.msPointer?"MSPointerCancel":"pointercancel",Fr={touchstart:_e,touchmove:_r,touchend:er,touchcancel:Er},vr={touchstart:hn,touchmove:un,touchend:un,touchcancel:un},xr={},Zr=!1;function fr(j,it,ft){return it==="touchstart"&&xn(),vr[it]?(ft=vr[it].bind(this,ft),j.addEventListener(Fr[it],ft,!1),ft):(console.warn("wrong event specified:",it),nt)}function Gr(j,it,ft){if(!Fr[it]){console.warn("wrong event specified:",it);return}j.removeEventListener(Fr[it],ft,!1)}function an(j){xr[j.pointerId]=j}function fn(j){xr[j.pointerId]&&(xr[j.pointerId]=j)}function dn(j){delete xr[j.pointerId]}function xn(){Zr||(document.addEventListener(_e,an,!0),document.addEventListener(_r,fn,!0),document.addEventListener(er,dn,!0),document.addEventListener(Er,dn,!0),Zr=!0)}function un(j,it){if(it.pointerType!==(it.MSPOINTER_TYPE_MOUSE||"mouse")){it.touches=[];for(var ft in xr)it.touches.push(xr[ft]);it.changedTouches=[it],j(it)}}function hn(j,it){it.MSPOINTER_TYPE_TOUCH&&it.pointerType===it.MSPOINTER_TYPE_TOUCH&&Dn(it),un(j,it)}function Sn(j){var it={},ft,Et;for(Et in j)ft=j[Et],it[Et]=ft&&ft.bind?ft.bind(j):ft;return j=it,it.type="dblclick",it.detail=2,it.isTrusted=!1,it._simulated=!0,it}var wr=200;function Or(j,it){j.addEventListener("dblclick",it);var ft=0,Et;function Mt(qt){if(qt.detail!==1){Et=qt.detail;return}if(!(qt.pointerType==="mouse"||qt.sourceCapabilities&&!qt.sourceCapabilities.firesTouchEvents)){var cr=ss(qt);if(!(cr.some(function(Qr){return Qr instanceof HTMLLabelElement&&Qr.attributes.for})&&!cr.some(function(Qr){return Qr instanceof HTMLInputElement||Qr instanceof HTMLSelectElement}))){var Sr=Date.now();Sr-ft<=wr?(Et++,Et===2&&it(Sn(qt))):Et=1,ft=Sr}}}return j.addEventListener("click",Mt),{dblclick:it,simDblclick:Mt}}function sn(j,it){j.removeEventListener("dblclick",it.dblclick),j.removeEventListener("click",it.simDblclick)}var Vr=sA(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),En=sA(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),bn=En==="webkitTransition"||En==="OTransition"?En+"End":"transitionend";function Fn(j){return typeof j=="string"?document.getElementById(j):j}function Cn(j,it){var ft=j.style[it]||j.currentStyle&&j.currentStyle[it];if((!ft||ft==="auto")&&document.defaultView){var Et=document.defaultView.getComputedStyle(j,null);ft=Et?Et[it]:null}return ft==="auto"?null:ft}function gn(j,it,ft){var Et=document.createElement(j);return Et.className=it||"",ft&&ft.appendChild(Et),Et}function Bn(j){var it=j.parentNode;it&&it.removeChild(j)}function Qn(j){for(;j.firstChild;)j.removeChild(j.firstChild)}function Ln(j){var it=j.parentNode;it&&it.lastChild!==j&&it.appendChild(j)}function Hn(j){var it=j.parentNode;it&&it.firstChild!==j&&it.insertBefore(j,it.firstChild)}function _n(j,it){if(j.classList!==void 0)return j.classList.contains(it);var ft=In(j);return ft.length>0&&new RegExp("(^|\\s)"+it+"(\\s|$)").test(ft)}function cn(j,it){if(j.classList!==void 0)for(var ft=lt(it),Et=0,Mt=ft.length;Et<Mt;Et++)j.classList.add(ft[Et]);else if(!_n(j,it)){var qt=In(j);Mn(j,(qt?qt+" ":"")+it)}}function vn(j,it){j.classList!==void 0?j.classList.remove(it):Mn(j,at((" "+In(j)+" ").replace(" "+it+" "," ")))}function Mn(j,it){j.className.baseVal===void 0?j.className=it:j.className.baseVal=it}function In(j){return j.correspondingElement&&(j=j.correspondingElement),j.className.baseVal===void 0?j.className:j.className.baseVal}function Nn(j,it){"opacity"in j.style?j.style.opacity=it:"filter"in j.style&&OA(j,it)}function OA(j,it){var ft=!1,Et="DXImageTransform.Microsoft.Alpha";try{ft=j.filters.item(Et)}catch{if(it===1)return}it=Math.round(it*100),ft?(ft.Enabled=it!==100,ft.Opacity=it):j.style.filter+=" progid:"+Et+"(opacity="+it+")"}function sA(j){for(var it=document.documentElement.style,ft=0;ft<j.length;ft++)if(j[ft]in it)return j[ft];return!1}function Zn(j,it,ft){var Et=it||new Wt(0,0);j.style[Vr]=(Kt.ie3d?"translate("+Et.x+"px,"+Et.y+"px)":"translate3d("+Et.x+"px,"+Et.y+"px,0)")+(ft?" scale("+ft+")":"")}function kn(j,it){j._leaflet_pos=it,Kt.any3d?Zn(j,it):(j.style.left=it.x+"px",j.style.top=it.y+"px")}function Yn(j){return j._leaflet_pos||new Wt(0,0)}var rA,nA,dA;if("onselectstart"in document)rA=function(){mn(window,"selectstart",Dn)},nA=function(){Un(window,"selectstart",Dn)};else{var gA=sA(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);rA=function(){if(gA){var j=document.documentElement.style;dA=j[gA],j[gA]="none"}},nA=function(){gA&&(document.documentElement.style[gA]=dA,dA=void 0)}}function $A(){mn(window,"dragstart",Dn)}function KA(){Un(window,"dragstart",Dn)}var CA,zA;function GA(j){for(;j.tabIndex===-1;)j=j.parentNode;j.style&&(xA(),CA=j,zA=j.style.outlineStyle,j.style.outlineStyle="none",mn(window,"keydown",xA))}function xA(){CA&&(CA.style.outlineStyle=zA,CA=void 0,zA=void 0,Un(window,"keydown",xA))}function As(j){do j=j.parentNode;while((!j.offsetWidth||!j.offsetHeight)&&j!==document.body);return j}function VA(j){var it=j.getBoundingClientRect();return{x:it.width/j.offsetWidth||1,y:it.height/j.offsetHeight||1,boundingClientRect:it}}var Vs={__proto__:null,TRANSFORM:Vr,TRANSITION:En,TRANSITION_END:bn,get:Fn,getStyle:Cn,create:gn,remove:Bn,empty:Qn,toFront:Ln,toBack:Hn,hasClass:_n,addClass:cn,removeClass:vn,setClass:Mn,getClass:In,setOpacity:Nn,testProp:sA,setTransform:Zn,setPosition:kn,getPosition:Yn,get disableTextSelection(){return rA},get enableTextSelection(){return nA},disableImageDrag:$A,enableImageDrag:KA,preventOutline:GA,restoreOutline:xA,getSizedParentNode:As,getScale:VA};function mn(j,it,ft,Et){if(it&&typeof it=="object")for(var Mt in it)XA(j,Mt,it[Mt],ft);else{it=lt(it);for(var qt=0,cr=it.length;qt<cr;qt++)XA(j,it[qt],ft,Et)}return this}var Vn="_leaflet_events";function Un(j,it,ft,Et){if(arguments.length===1)as(j),delete j[Vn];else if(it&&typeof it=="object")for(var Mt in it)ZA(j,Mt,it[Mt],ft);else if(it=lt(it),arguments.length===2)as(j,function(Sr){return mt(it,Sr)!==-1});else for(var qt=0,cr=it.length;qt<cr;qt++)ZA(j,it[qt],ft,Et);return this}function as(j,it){for(var ft in j[Vn]){var Et=ft.split(/\d/)[0];(!it||it(Et))&&ZA(j,Et,null,null,ft)}}var qA={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function XA(j,it,ft,Et){var Mt=it+et(ft)+(Et?"_"+et(Et):"");if(j[Vn]&&j[Vn][Mt])return this;var qt=function(Sr){return ft.call(Et||j,Sr||window.event)},cr=qt;!Kt.touchNative&&Kt.pointer&&it.indexOf("touch")===0?qt=fr(j,it,qt):Kt.touch&&it==="dblclick"?qt=Or(j,qt):"addEventListener"in j?it==="touchstart"||it==="touchmove"||it==="wheel"||it==="mousewheel"?j.addEventListener(qA[it]||it,qt,Kt.passiveEvents?{passive:!1}:!1):it==="mouseenter"||it==="mouseleave"?(qt=function(Sr){Sr=Sr||window.event,jA(j,Sr)&&cr(Sr)},j.addEventListener(qA[it],qt,!1)):j.addEventListener(it,cr,!1):j.attachEvent("on"+it,qt),j[Vn]=j[Vn]||{},j[Vn][Mt]=qt}function ZA(j,it,ft,Et,Mt){Mt=Mt||it+et(ft)+(Et?"_"+et(Et):"");var qt=j[Vn]&&j[Vn][Mt];if(!qt)return this;!Kt.touchNative&&Kt.pointer&&it.indexOf("touch")===0?Gr(j,it,qt):Kt.touch&&it==="dblclick"?sn(j,qt):"removeEventListener"in j?j.removeEventListener(qA[it]||it,qt,!1):j.detachEvent("on"+it,qt),j[Vn][Mt]=null}function iA(j){return j.stopPropagation?j.stopPropagation():j.originalEvent?j.originalEvent._stopped=!0:j.cancelBubble=!0,this}function YA(j){return XA(j,"wheel",iA),this}function pA(j){return mn(j,"mousedown touchstart dblclick contextmenu",iA),j._leaflet_disable_click=!0,this}function Dn(j){return j.preventDefault?j.preventDefault():j.returnValue=!1,this}function AA(j){return Dn(j),iA(j),this}function ss(j){if(j.composedPath)return j.composedPath();for(var it=[],ft=j.target;ft;)it.push(ft),ft=ft.parentNode;return it}function os(j,it){if(!it)return new Wt(j.clientX,j.clientY);var ft=VA(it),Et=ft.boundingClientRect;return new Wt((j.clientX-Et.left)/ft.x-it.clientLeft,(j.clientY-Et.top)/ft.y-it.clientTop)}var qs=Kt.linux&&Kt.chrome?window.devicePixelRatio:Kt.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function ls(j){return Kt.edge?j.wheelDeltaY/2:j.deltaY&&j.deltaMode===0?-j.deltaY/qs:j.deltaY&&j.deltaMode===1?-j.deltaY*20:j.deltaY&&j.deltaMode===2?-j.deltaY*60:j.deltaX||j.deltaZ?0:j.wheelDelta?(j.wheelDeltaY||j.wheelDelta)/2:j.detail&&Math.abs(j.detail)<32765?-j.detail*20:j.detail?j.detail/-32765*60:0}function jA(j,it){var ft=it.relatedTarget;if(!ft)return!0;try{for(;ft&&ft!==j;)ft=ft.parentNode}catch{return!1}return ft!==j}var Xs={__proto__:null,on:mn,off:Un,stopPropagation:iA,disableScrollPropagation:YA,disableClickPropagation:pA,preventDefault:Dn,stop:AA,getPropagationPath:ss,getMousePosition:os,getWheelDelta:ls,isExternalTarget:jA,addListener:mn,removeListener:Un},us=ar.extend({run:function(j,it,ft,Et){this.stop(),this._el=j,this._inProgress=!0,this._duration=ft||.25,this._easeOutPower=1/Math.max(Et||.5,.2),this._startPos=Yn(j),this._offset=it.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=Pt(this._animate,this),this._step()},_step:function(j){var it=+new Date-this._startTime,ft=this._duration*1e3;it<ft?this._runFrame(this._easeOut(it/ft),j):(this._runFrame(1),this._complete())},_runFrame:function(j,it){var ft=this._startPos.add(this._offset.multiplyBy(j));it&&ft._round(),kn(this._el,ft),this.fire("step")},_complete:function(){jt(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(j){return 1-Math.pow(1-j,this._easeOutPower)}}),yn=ar.extend({options:{crs:Tr,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(j,it){it=gt(this,it),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(j),this._initLayout(),this._onResize=b(this._onResize,this),this._initEvents(),it.maxBounds&&this.setMaxBounds(it.maxBounds),it.zoom!==void 0&&(this._zoom=this._limitZoom(it.zoom)),it.center&&it.zoom!==void 0&&this.setView(mr(it.center),it.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=En&&Kt.any3d&&!Kt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),mn(this._proxy,bn,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(j,it,ft){if(it=it===void 0?this._zoom:this._limitZoom(it),j=this._limitCenter(mr(j),it,this.options.maxBounds),ft=ft||{},this._stop(),this._loaded&&!ft.reset&&ft!==!0){ft.animate!==void 0&&(ft.zoom=g({animate:ft.animate},ft.zoom),ft.pan=g({animate:ft.animate,duration:ft.duration},ft.pan));var Et=this._zoom!==it?this._tryAnimatedZoom&&this._tryAnimatedZoom(j,it,ft.zoom):this._tryAnimatedPan(j,ft.pan);if(Et)return clearTimeout(this._sizeTimer),this}return this._resetView(j,it,ft.pan&&ft.pan.noMoveStart),this},setZoom:function(j,it){return this._loaded?this.setView(this.getCenter(),j,{zoom:it}):(this._zoom=j,this)},zoomIn:function(j,it){return j=j||(Kt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+j,it)},zoomOut:function(j,it){return j=j||(Kt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-j,it)},setZoomAround:function(j,it,ft){var Et=this.getZoomScale(it),Mt=this.getSize().divideBy(2),qt=j instanceof Wt?j:this.latLngToContainerPoint(j),cr=qt.subtract(Mt).multiplyBy(1-1/Et),Sr=this.containerPointToLatLng(Mt.add(cr));return this.setView(Sr,it,{zoom:ft})},_getBoundsCenterZoom:function(j,it){it=it||{},j=j.getBounds?j.getBounds():Ur(j);var ft=dr(it.paddingTopLeft||it.padding||[0,0]),Et=dr(it.paddingBottomRight||it.padding||[0,0]),Mt=this.getBoundsZoom(j,!1,ft.add(Et));if(Mt=typeof it.maxZoom=="number"?Math.min(it.maxZoom,Mt):Mt,Mt===1/0)return{center:j.getCenter(),zoom:Mt};var qt=Et.subtract(ft).divideBy(2),cr=this.project(j.getSouthWest(),Mt),Sr=this.project(j.getNorthEast(),Mt),Qr=this.unproject(cr.add(Sr).divideBy(2).add(qt),Mt);return{center:Qr,zoom:Mt}},fitBounds:function(j,it){if(j=Ur(j),!j.isValid())throw new Error("Bounds are not valid.");var ft=this._getBoundsCenterZoom(j,it);return this.setView(ft.center,ft.zoom,it)},fitWorld:function(j){return this.fitBounds([[-90,-180],[90,180]],j)},panTo:function(j,it){return this.setView(j,this._zoom,{pan:it})},panBy:function(j,it){if(j=dr(j).round(),it=it||{},!j.x&&!j.y)return this.fire("moveend");if(it.animate!==!0&&!this.getSize().contains(j))return this._resetView(this.unproject(this.project(this.getCenter()).add(j)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new us,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),it.noMoveStart||this.fire("movestart"),it.animate!==!1){cn(this._mapPane,"leaflet-pan-anim");var ft=this._getMapPanePos().subtract(j).round();this._panAnim.run(this._mapPane,ft,it.duration||.25,it.easeLinearity)}else this._rawPanBy(j),this.fire("move").fire("moveend");return this},flyTo:function(j,it,ft){if(ft=ft||{},ft.animate===!1||!Kt.any3d)return this.setView(j,it,ft);this._stop();var Et=this.project(this.getCenter()),Mt=this.project(j),qt=this.getSize(),cr=this._zoom;j=mr(j),it=it===void 0?cr:it;var Sr=Math.max(qt.x,qt.y),Qr=Sr*this.getZoomScale(cr,it),Kr=Mt.distanceTo(Et)||1,ln=1.42,pn=ln*ln;function wn(Tn){var PA=Tn?-1:1,Do=Tn?Qr:Sr,Ho=Qr*Qr-Sr*Sr+PA*pn*pn*Kr*Kr,Po=2*Do*pn*Kr,rs=Ho/Po,zs=Math.sqrt(rs*rs+1)-rs,No=zs<1e-9?-18:Math.log(zs);return No}function Pn(Tn){return(Math.exp(Tn)-Math.exp(-Tn))/2}function Rn(Tn){return(Math.exp(Tn)+Math.exp(-Tn))/2}function Kn(Tn){return Pn(Tn)/Rn(Tn)}var On=wn(0);function fA(Tn){return Sr*(Rn(On)/Rn(On+ln*Tn))}function To(Tn){return Sr*(Rn(On)*Kn(On+ln*Tn)-Pn(On))/pn}function Ro(Tn){return 1-Math.pow(1-Tn,1.5)}var Lo=Date.now(),$s=(wn(1)-On)/ln,Mo=ft.duration?1e3*ft.duration:1e3*$s*.8;function Ks(){var Tn=(Date.now()-Lo)/Mo,PA=Ro(Tn)*$s;Tn<=1?(this._flyToFrame=Pt(Ks,this),this._move(this.unproject(Et.add(Mt.subtract(Et).multiplyBy(To(PA)/Kr)),cr),this.getScaleZoom(Sr/fA(PA),cr),{flyTo:!0})):this._move(j,it)._moveEnd(!0)}return this._moveStart(!0,ft.noMoveStart),Ks.call(this),this},flyToBounds:function(j,it){var ft=this._getBoundsCenterZoom(j,it);return this.flyTo(ft.center,ft.zoom,it)},setMaxBounds:function(j){return j=Ur(j),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),j.isValid()?(this.options.maxBounds=j,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(j){var it=this.options.minZoom;return this.options.minZoom=j,this._loaded&&it!==j&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(j):this},setMaxZoom:function(j){var it=this.options.maxZoom;return this.options.maxZoom=j,this._loaded&&it!==j&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(j):this},panInsideBounds:function(j,it){this._enforcingBounds=!0;var ft=this.getCenter(),Et=this._limitCenter(ft,this._zoom,Ur(j));return ft.equals(Et)||this.panTo(Et,it),this._enforcingBounds=!1,this},panInside:function(j,it){it=it||{};var ft=dr(it.paddingTopLeft||it.padding||[0,0]),Et=dr(it.paddingBottomRight||it.padding||[0,0]),Mt=this.project(this.getCenter()),qt=this.project(j),cr=this.getPixelBounds(),Sr=Br([cr.min.add(ft),cr.max.subtract(Et)]),Qr=Sr.getSize();if(!Sr.contains(qt)){this._enforcingBounds=!0;var Kr=qt.subtract(Sr.getCenter()),ln=Sr.extend(qt).getSize().subtract(Qr);Mt.x+=Kr.x<0?-ln.x:ln.x,Mt.y+=Kr.y<0?-ln.y:ln.y,this.panTo(this.unproject(Mt),it),this._enforcingBounds=!1}return this},invalidateSize:function(j){if(!this._loaded)return this;j=g({animate:!1,pan:!0},j===!0?{animate:!0}:j);var it=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var ft=this.getSize(),Et=it.divideBy(2).round(),Mt=ft.divideBy(2).round(),qt=Et.subtract(Mt);return!qt.x&&!qt.y?this:(j.animate&&j.pan?this.panBy(qt):(j.pan&&this._rawPanBy(qt),this.fire("move"),j.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(b(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:it,newSize:ft}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(j){if(j=this._locateOptions=g({timeout:1e4,watch:!1},j),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var it=b(this._handleGeolocationResponse,this),ft=b(this._handleGeolocationError,this);return j.watch?this._locationWatchId=navigator.geolocation.watchPosition(it,ft,j):navigator.geolocation.getCurrentPosition(it,ft,j),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(j){if(this._container._leaflet_id){var it=j.code,ft=j.message||(it===1?"permission denied":it===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:it,message:"Geolocation error: "+ft+"."})}},_handleGeolocationResponse:function(j){if(this._container._leaflet_id){var it=j.coords.latitude,ft=j.coords.longitude,Et=new or(it,ft),Mt=Et.toBounds(j.coords.accuracy*2),qt=this._locateOptions;if(qt.setView){var cr=this.getBoundsZoom(Mt);this.setView(Et,qt.maxZoom?Math.min(cr,qt.maxZoom):cr)}var Sr={latlng:Et,bounds:Mt,timestamp:j.timestamp};for(var Qr in j.coords)typeof j.coords[Qr]=="number"&&(Sr[Qr]=j.coords[Qr]);this.fire("locationfound",Sr)}},addHandler:function(j,it){if(!it)return this;var ft=this[j]=new it(this);return this._handlers.push(ft),this.options[j]&&ft.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Bn(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(jt(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var j;for(j in this._layers)this._layers[j].remove();for(j in this._panes)Bn(this._panes[j]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(j,it){var ft="leaflet-pane"+(j?" leaflet-"+j.replace("Pane","")+"-pane":""),Et=gn("div",ft,it||this._mapPane);return j&&(this._panes[j]=Et),Et},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var j=this.getPixelBounds(),it=this.unproject(j.getBottomLeft()),ft=this.unproject(j.getTopRight());return new Lr(it,ft)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(j,it,ft){j=Ur(j),ft=dr(ft||[0,0]);var Et=this.getZoom()||0,Mt=this.getMinZoom(),qt=this.getMaxZoom(),cr=j.getNorthWest(),Sr=j.getSouthEast(),Qr=this.getSize().subtract(ft),Kr=Br(this.project(Sr,Et),this.project(cr,Et)).getSize(),ln=Kt.any3d?this.options.zoomSnap:1,pn=Qr.x/Kr.x,wn=Qr.y/Kr.y,Pn=it?Math.max(pn,wn):Math.min(pn,wn);return Et=this.getScaleZoom(Pn,Et),ln&&(Et=Math.round(Et/(ln/100))*(ln/100),Et=it?Math.ceil(Et/ln)*ln:Math.floor(Et/ln)*ln),Math.max(Mt,Math.min(qt,Et))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Wt(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(j,it){var ft=this._getTopLeftPoint(j,it);return new yr(ft,ft.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(j){return this.options.crs.getProjectedBounds(j===void 0?this.getZoom():j)},getPane:function(j){return typeof j=="string"?this._panes[j]:j},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(j,it){var ft=this.options.crs;return it=it===void 0?this._zoom:it,ft.scale(j)/ft.scale(it)},getScaleZoom:function(j,it){var ft=this.options.crs;it=it===void 0?this._zoom:it;var Et=ft.zoom(j*ft.scale(it));return isNaN(Et)?1/0:Et},project:function(j,it){return it=it===void 0?this._zoom:it,this.options.crs.latLngToPoint(mr(j),it)},unproject:function(j,it){return it=it===void 0?this._zoom:it,this.options.crs.pointToLatLng(dr(j),it)},layerPointToLatLng:function(j){var it=dr(j).add(this.getPixelOrigin());return this.unproject(it)},latLngToLayerPoint:function(j){var it=this.project(mr(j))._round();return it._subtract(this.getPixelOrigin())},wrapLatLng:function(j){return this.options.crs.wrapLatLng(mr(j))},wrapLatLngBounds:function(j){return this.options.crs.wrapLatLngBounds(Ur(j))},distance:function(j,it){return this.options.crs.distance(mr(j),mr(it))},containerPointToLayerPoint:function(j){return dr(j).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(j){return dr(j).add(this._getMapPanePos())},containerPointToLatLng:function(j){var it=this.containerPointToLayerPoint(dr(j));return this.layerPointToLatLng(it)},latLngToContainerPoint:function(j){return this.layerPointToContainerPoint(this.latLngToLayerPoint(mr(j)))},mouseEventToContainerPoint:function(j){return os(j,this._container)},mouseEventToLayerPoint:function(j){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(j))},mouseEventToLatLng:function(j){return this.layerPointToLatLng(this.mouseEventToLayerPoint(j))},_initContainer:function(j){var it=this._container=Fn(j);if(it){if(it._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");mn(it,"scroll",this._onScroll,this),this._containerId=et(it)},_initLayout:function(){var j=this._container;this._fadeAnimated=this.options.fadeAnimation&&Kt.any3d,cn(j,"leaflet-container"+(Kt.touch?" leaflet-touch":"")+(Kt.retina?" leaflet-retina":"")+(Kt.ielt9?" leaflet-oldie":"")+(Kt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var it=Cn(j,"position");it!=="absolute"&&it!=="relative"&&it!=="fixed"&&it!=="sticky"&&(j.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var j=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),kn(this._mapPane,new Wt(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(cn(j.markerPane,"leaflet-zoom-hide"),cn(j.shadowPane,"leaflet-zoom-hide"))},_resetView:function(j,it,ft){kn(this._mapPane,new Wt(0,0));var Et=!this._loaded;this._loaded=!0,it=this._limitZoom(it),this.fire("viewprereset");var Mt=this._zoom!==it;this._moveStart(Mt,ft)._move(j,it)._moveEnd(Mt),this.fire("viewreset"),Et&&this.fire("load")},_moveStart:function(j,it){return j&&this.fire("zoomstart"),it||this.fire("movestart"),this},_move:function(j,it,ft,Et){it===void 0&&(it=this._zoom);var Mt=this._zoom!==it;return this._zoom=it,this._lastCenter=j,this._pixelOrigin=this._getNewPixelOrigin(j),Et?ft&&ft.pinch&&this.fire("zoom",ft):((Mt||ft&&ft.pinch)&&this.fire("zoom",ft),this.fire("move",ft)),this},_moveEnd:function(j){return j&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return jt(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(j){kn(this._mapPane,this._getMapPanePos().subtract(j))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(j){this._targets={},this._targets[et(this._container)]=this;var it=j?Un:mn;it(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&it(window,"resize",this._onResize,this),Kt.any3d&&this.options.transform3DLimit&&(j?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){jt(this._resizeRequest),this._resizeRequest=Pt(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var j=this._getMapPanePos();Math.max(Math.abs(j.x),Math.abs(j.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(j,it){for(var ft=[],Et,Mt=it==="mouseout"||it==="mouseover",qt=j.target||j.srcElement,cr=!1;qt;){if(Et=this._targets[et(qt)],Et&&(it==="click"||it==="preclick")&&this._draggableMoved(Et)){cr=!0;break}if(Et&&Et.listens(it,!0)&&(Mt&&!jA(qt,j)||(ft.push(Et),Mt))||qt===this._container)break;qt=qt.parentNode}return!ft.length&&!cr&&!Mt&&this.listens(it,!0)&&(ft=[this]),ft},_isClickDisabled:function(j){for(;j&&j!==this._container;){if(j._leaflet_disable_click)return!0;j=j.parentNode}},_handleDOMEvent:function(j){var it=j.target||j.srcElement;if(!(!this._loaded||it._leaflet_disable_events||j.type==="click"&&this._isClickDisabled(it))){var ft=j.type;ft==="mousedown"&&GA(it),this._fireDOMEvent(j,ft)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(j,it,ft){if(j.type==="click"){var Et=g({},j);Et.type="preclick",this._fireDOMEvent(Et,Et.type,ft)}var Mt=this._findEventTargets(j,it);if(ft){for(var qt=[],cr=0;cr<ft.length;cr++)ft[cr].listens(it,!0)&&qt.push(ft[cr]);Mt=qt.concat(Mt)}if(Mt.length){it==="contextmenu"&&Dn(j);var Sr=Mt[0],Qr={originalEvent:j};if(j.type!=="keypress"&&j.type!=="keydown"&&j.type!=="keyup"){var Kr=Sr.getLatLng&&(!Sr._radius||Sr._radius<=10);Qr.containerPoint=Kr?this.latLngToContainerPoint(Sr.getLatLng()):this.mouseEventToContainerPoint(j),Qr.layerPoint=this.containerPointToLayerPoint(Qr.containerPoint),Qr.latlng=Kr?Sr.getLatLng():this.layerPointToLatLng(Qr.layerPoint)}for(cr=0;cr<Mt.length;cr++)if(Mt[cr].fire(it,Qr,!0),Qr.originalEvent._stopped||Mt[cr].options.bubblingMouseEvents===!1&&mt(this._mouseEvents,it)!==-1)return}},_draggableMoved:function(j){return j=j.dragging&&j.dragging.enabled()?j:this,j.dragging&&j.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var j=0,it=this._handlers.length;j<it;j++)this._handlers[j].disable()},whenReady:function(j,it){return this._loaded?j.call(it||this,{target:this}):this.on("load",j,it),this},_getMapPanePos:function(){return Yn(this._mapPane)||new Wt(0,0)},_moved:function(){var j=this._getMapPanePos();return j&&!j.equals([0,0])},_getTopLeftPoint:function(j,it){var ft=j&&it!==void 0?this._getNewPixelOrigin(j,it):this.getPixelOrigin();return ft.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(j,it){var ft=this.getSize()._divideBy(2);return this.project(j,it)._subtract(ft)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(j,it,ft){var Et=this._getNewPixelOrigin(ft,it);return this.project(j,it)._subtract(Et)},_latLngBoundsToNewLayerBounds:function(j,it,ft){var Et=this._getNewPixelOrigin(ft,it);return Br([this.project(j.getSouthWest(),it)._subtract(Et),this.project(j.getNorthWest(),it)._subtract(Et),this.project(j.getSouthEast(),it)._subtract(Et),this.project(j.getNorthEast(),it)._subtract(Et)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(j){return this.latLngToLayerPoint(j).subtract(this._getCenterLayerPoint())},_limitCenter:function(j,it,ft){if(!ft)return j;var Et=this.project(j,it),Mt=this.getSize().divideBy(2),qt=new yr(Et.subtract(Mt),Et.add(Mt)),cr=this._getBoundsOffset(qt,ft,it);return Math.abs(cr.x)<=1&&Math.abs(cr.y)<=1?j:this.unproject(Et.add(cr),it)},_limitOffset:function(j,it){if(!it)return j;var ft=this.getPixelBounds(),Et=new yr(ft.min.add(j),ft.max.add(j));return j.add(this._getBoundsOffset(Et,it))},_getBoundsOffset:function(j,it,ft){var Et=Br(this.project(it.getNorthEast(),ft),this.project(it.getSouthWest(),ft)),Mt=Et.min.subtract(j.min),qt=Et.max.subtract(j.max),cr=this._rebound(Mt.x,-qt.x),Sr=this._rebound(Mt.y,-qt.y);return new Wt(cr,Sr)},_rebound:function(j,it){return j+it>0?Math.round(j-it)/2:Math.max(0,Math.ceil(j))-Math.max(0,Math.floor(it))},_limitZoom:function(j){var it=this.getMinZoom(),ft=this.getMaxZoom(),Et=Kt.any3d?this.options.zoomSnap:1;return Et&&(j=Math.round(j/Et)*Et),Math.max(it,Math.min(ft,j))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){vn(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(j,it){var ft=this._getCenterOffset(j)._trunc();return(it&&it.animate)!==!0&&!this.getSize().contains(ft)?!1:(this.panBy(ft,it),!0)},_createAnimProxy:function(){var j=this._proxy=gn("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(j),this.on("zoomanim",function(it){var ft=Vr,Et=this._proxy.style[ft];Zn(this._proxy,this.project(it.center,it.zoom),this.getZoomScale(it.zoom,1)),Et===this._proxy.style[ft]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Bn(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var j=this.getCenter(),it=this.getZoom();Zn(this._proxy,this.project(j,it),this.getZoomScale(it,1))},_catchTransitionEnd:function(j){this._animatingZoom&&j.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(j,it,ft){if(this._animatingZoom)return!0;if(ft=ft||{},!this._zoomAnimated||ft.animate===!1||this._nothingToAnimate()||Math.abs(it-this._zoom)>this.options.zoomAnimationThreshold)return!1;var Et=this.getZoomScale(it),Mt=this._getCenterOffset(j)._divideBy(1-1/Et);return ft.animate!==!0&&!this.getSize().contains(Mt)?!1:(Pt(function(){this._moveStart(!0,ft.noMoveStart||!1)._animateZoom(j,it,!0)},this),!0)},_animateZoom:function(j,it,ft,Et){this._mapPane&&(ft&&(this._animatingZoom=!0,this._animateToCenter=j,this._animateToZoom=it,cn(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:j,zoom:it,noUpdate:Et}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(b(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&vn(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Zs(j,it){return new yn(j,it)}var zn=Xt.extend({options:{position:"topright"},initialize:function(j){gt(this,j)},getPosition:function(){return this.options.position},setPosition:function(j){var it=this._map;return it&&it.removeControl(this),this.options.position=j,it&&it.addControl(this),this},getContainer:function(){return this._container},addTo:function(j){this.remove(),this._map=j;var it=this._container=this.onAdd(j),ft=this.getPosition(),Et=j._controlCorners[ft];return cn(it,"leaflet-control"),ft.indexOf("bottom")!==-1?Et.insertBefore(it,Et.firstChild):Et.appendChild(it),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Bn(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(j){this._map&&j&&j.screenX>0&&j.screenY>0&&this._map.getContainer().focus()}}),mA=function(j){return new zn(j)};yn.include({addControl:function(j){return j.addTo(this),this},removeControl:function(j){return j.remove(),this},_initControlPos:function(){var j=this._controlCorners={},it="leaflet-",ft=this._controlContainer=gn("div",it+"control-container",this._container);function Et(Mt,qt){var cr=it+Mt+" "+it+qt;j[Mt+qt]=gn("div",cr,ft)}Et("top","left"),Et("top","right"),Et("bottom","left"),Et("bottom","right")},_clearControlPos:function(){for(var j in this._controlCorners)Bn(this._controlCorners[j]);Bn(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var hs=zn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(j,it,ft,Et){return ft<Et?-1:Et<ft?1:0}},initialize:function(j,it,ft){gt(this,ft),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var Et in j)this._addLayer(j[Et],Et);for(Et in it)this._addLayer(it[Et],Et,!0)},onAdd:function(j){this._initLayout(),this._update(),this._map=j,j.on("zoomend",this._checkDisabledLayers,this);for(var it=0;it<this._layers.length;it++)this._layers[it].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(j){return zn.prototype.addTo.call(this,j),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var j=0;j<this._layers.length;j++)this._layers[j].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(j,it){return this._addLayer(j,it),this._map?this._update():this},addOverlay:function(j,it){return this._addLayer(j,it,!0),this._map?this._update():this},removeLayer:function(j){j.off("add remove",this._onLayerChange,this);var it=this._getLayer(et(j));return it&&this._layers.splice(this._layers.indexOf(it),1),this._map?this._update():this},expand:function(){cn(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var j=this._map.getSize().y-(this._container.offsetTop+50);return j<this._section.clientHeight?(cn(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=j+"px"):vn(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return vn(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var j="leaflet-control-layers",it=this._container=gn("div",j),ft=this.options.collapsed;it.setAttribute("aria-haspopup",!0),pA(it),YA(it);var Et=this._section=gn("section",j+"-list");ft&&(this._map.on("click",this.collapse,this),mn(it,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var Mt=this._layersLink=gn("a",j+"-toggle",it);Mt.href="#",Mt.title="Layers",Mt.setAttribute("role","button"),mn(Mt,{keydown:function(qt){qt.keyCode===13&&this._expandSafely()},click:function(qt){Dn(qt),this._expandSafely()}},this),ft||this.expand(),this._baseLayersList=gn("div",j+"-base",Et),this._separator=gn("div",j+"-separator",Et),this._overlaysList=gn("div",j+"-overlays",Et),it.appendChild(Et)},_getLayer:function(j){for(var it=0;it<this._layers.length;it++)if(this._layers[it]&&et(this._layers[it].layer)===j)return this._layers[it]},_addLayer:function(j,it,ft){this._map&&j.on("add remove",this._onLayerChange,this),this._layers.push({layer:j,name:it,overlay:ft}),this.options.sortLayers&&this._layers.sort(b(function(Et,Mt){return this.options.sortFunction(Et.layer,Mt.layer,Et.name,Mt.name)},this)),this.options.autoZIndex&&j.setZIndex&&(this._lastZIndex++,j.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Qn(this._baseLayersList),Qn(this._overlaysList),this._layerControlInputs=[];var j,it,ft,Et,Mt=0;for(ft=0;ft<this._layers.length;ft++)Et=this._layers[ft],this._addItem(Et),it=it||Et.overlay,j=j||!Et.overlay,Mt+=Et.overlay?0:1;return this.options.hideSingleBase&&(j=j&&Mt>1,this._baseLayersList.style.display=j?"":"none"),this._separator.style.display=it&&j?"":"none",this},_onLayerChange:function(j){this._handlingClick||this._update();var it=this._getLayer(et(j.target)),ft=it.overlay?j.type==="add"?"overlayadd":"overlayremove":j.type==="add"?"baselayerchange":null;ft&&this._map.fire(ft,it)},_createRadioElement:function(j,it){var ft='<input type="radio" class="leaflet-control-layers-selector" name="'+j+'"'+(it?' checked="checked"':"")+"/>",Et=document.createElement("div");return Et.innerHTML=ft,Et.firstChild},_addItem:function(j){var it=document.createElement("label"),ft=this._map.hasLayer(j.layer),Et;j.overlay?(Et=document.createElement("input"),Et.type="checkbox",Et.className="leaflet-control-layers-selector",Et.defaultChecked=ft):Et=this._createRadioElement("leaflet-base-layers_"+et(this),ft),this._layerControlInputs.push(Et),Et.layerId=et(j.layer),mn(Et,"click",this._onInputClick,this);var Mt=document.createElement("span");Mt.innerHTML=" "+j.name;var qt=document.createElement("span");it.appendChild(qt),qt.appendChild(Et),qt.appendChild(Mt);var cr=j.overlay?this._overlaysList:this._baseLayersList;return cr.appendChild(it),this._checkDisabledLayers(),it},_onInputClick:function(){if(!this._preventClick){var j=this._layerControlInputs,it,ft,Et=[],Mt=[];this._handlingClick=!0;for(var qt=j.length-1;qt>=0;qt--)it=j[qt],ft=this._getLayer(it.layerId).layer,it.checked?Et.push(ft):it.checked||Mt.push(ft);for(qt=0;qt<Mt.length;qt++)this._map.hasLayer(Mt[qt])&&this._map.removeLayer(Mt[qt]);for(qt=0;qt<Et.length;qt++)this._map.hasLayer(Et[qt])||this._map.addLayer(Et[qt]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var j=this._layerControlInputs,it,ft,Et=this._map.getZoom(),Mt=j.length-1;Mt>=0;Mt--)it=j[Mt],ft=this._getLayer(it.layerId).layer,it.disabled=ft.options.minZoom!==void 0&&Et<ft.options.minZoom||ft.options.maxZoom!==void 0&&Et>ft.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var j=this._section;this._preventClick=!0,mn(j,"click",Dn),this.expand();var it=this;setTimeout(function(){Un(j,"click",Dn),it._preventClick=!1})}}),Ys=function(j,it,ft){return new hs(j,it,ft)},WA=zn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(j){var it="leaflet-control-zoom",ft=gn("div",it+" leaflet-bar"),Et=this.options;return this._zoomInButton=this._createButton(Et.zoomInText,Et.zoomInTitle,it+"-in",ft,this._zoomIn),this._zoomOutButton=this._createButton(Et.zoomOutText,Et.zoomOutTitle,it+"-out",ft,this._zoomOut),this._updateDisabled(),j.on("zoomend zoomlevelschange",this._updateDisabled,this),ft},onRemove:function(j){j.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(j){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(j.shiftKey?3:1))},_zoomOut:function(j){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(j.shiftKey?3:1))},_createButton:function(j,it,ft,Et,Mt){var qt=gn("a",ft,Et);return qt.innerHTML=j,qt.href="#",qt.title=it,qt.setAttribute("role","button"),qt.setAttribute("aria-label",it),pA(qt),mn(qt,"click",AA),mn(qt,"click",Mt,this),mn(qt,"click",this._refocusOnMap,this),qt},_updateDisabled:function(){var j=this._map,it="leaflet-disabled";vn(this._zoomInButton,it),vn(this._zoomOutButton,it),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||j._zoom===j.getMinZoom())&&(cn(this._zoomOutButton,it),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||j._zoom===j.getMaxZoom())&&(cn(this._zoomInButton,it),this._zoomInButton.setAttribute("aria-disabled","true"))}});yn.mergeOptions({zoomControl:!0}),yn.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new WA,this.addControl(this.zoomControl))});var js=function(j){return new WA(j)},cs=zn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(j){var it="leaflet-control-scale",ft=gn("div",it),Et=this.options;return this._addScales(Et,it+"-line",ft),j.on(Et.updateWhenIdle?"moveend":"move",this._update,this),j.whenReady(this._update,this),ft},onRemove:function(j){j.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(j,it,ft){j.metric&&(this._mScale=gn("div",it,ft)),j.imperial&&(this._iScale=gn("div",it,ft))},_update:function(){var j=this._map,it=j.getSize().y/2,ft=j.distance(j.containerPointToLatLng([0,it]),j.containerPointToLatLng([this.options.maxWidth,it]));this._updateScales(ft)},_updateScales:function(j){this.options.metric&&j&&this._updateMetric(j),this.options.imperial&&j&&this._updateImperial(j)},_updateMetric:function(j){var it=this._getRoundNum(j),ft=it<1e3?it+" m":it/1e3+" km";this._updateScale(this._mScale,ft,it/j)},_updateImperial:function(j){var it=j*3.2808399,ft,Et,Mt;it>5280?(ft=it/5280,Et=this._getRoundNum(ft),this._updateScale(this._iScale,Et+" mi",Et/ft)):(Mt=this._getRoundNum(it),this._updateScale(this._iScale,Mt+" ft",Mt/it))},_updateScale:function(j,it,ft){j.style.width=Math.round(this.options.maxWidth*ft)+"px",j.innerHTML=it},_getRoundNum:function(j){var it=Math.pow(10,(Math.floor(j)+"").length-1),ft=j/it;return ft=ft>=10?10:ft>=5?5:ft>=3?3:ft>=2?2:1,it*ft}}),Ws=function(j){return new cs(j)},Js='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',JA=zn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Kt.inlineSvg?Js+" ":"")+"Leaflet</a>"},initialize:function(j){gt(this,j),this._attributions={}},onAdd:function(j){j.attributionControl=this,this._container=gn("div","leaflet-control-attribution"),pA(this._container);for(var it in j._layers)j._layers[it].getAttribution&&this.addAttribution(j._layers[it].getAttribution());return this._update(),j.on("layeradd",this._addAttribution,this),this._container},onRemove:function(j){j.off("layeradd",this._addAttribution,this)},_addAttribution:function(j){j.layer.getAttribution&&(this.addAttribution(j.layer.getAttribution()),j.layer.once("remove",function(){this.removeAttribution(j.layer.getAttribution())},this))},setPrefix:function(j){return this.options.prefix=j,this._update(),this},addAttribution:function(j){return j?(this._attributions[j]||(this._attributions[j]=0),this._attributions[j]++,this._update(),this):this},removeAttribution:function(j){return j?(this._attributions[j]&&(this._attributions[j]--,this._update()),this):this},_update:function(){if(this._map){var j=[];for(var it in this._attributions)this._attributions[it]&&j.push(it);var ft=[];this.options.prefix&&ft.push(this.options.prefix),j.length&&ft.push(j.join(", ")),this._container.innerHTML=ft.join(' <span aria-hidden="true">|</span> ')}}});yn.mergeOptions({attributionControl:!0}),yn.addInitHook(function(){this.options.attributionControl&&new JA().addTo(this)});var to=function(j){return new JA(j)};zn.Layers=hs,zn.Zoom=WA,zn.Scale=cs,zn.Attribution=JA,mA.layers=Ys,mA.zoom=js,mA.scale=Ws,mA.attribution=to;var qn=Xt.extend({initialize:function(j){this._map=j},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});qn.addTo=function(j,it){return j.addHandler(it,this),this};var eo={Events:Ar},fs=Kt.touch?"touchstart mousedown":"mousedown",tA=ar.extend({options:{clickTolerance:3},initialize:function(j,it,ft,Et){gt(this,Et),this._element=j,this._dragStartTarget=it||j,this._preventOutline=ft},enable:function(){this._enabled||(mn(this._dragStartTarget,fs,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(tA._dragging===this&&this.finishDrag(!0),Un(this._dragStartTarget,fs,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(j){if(this._enabled&&(this._moved=!1,!_n(this._element,"leaflet-zoom-anim"))){if(j.touches&&j.touches.length!==1){tA._dragging===this&&this.finishDrag();return}if(!(tA._dragging||j.shiftKey||j.which!==1&&j.button!==1&&!j.touches)&&(tA._dragging=this,this._preventOutline&&GA(this._element),$A(),rA(),!this._moving)){this.fire("down");var it=j.touches?j.touches[0]:j,ft=As(this._element);this._startPoint=new Wt(it.clientX,it.clientY),this._startPos=Yn(this._element),this._parentScale=VA(ft);var Et=j.type==="mousedown";mn(document,Et?"mousemove":"touchmove",this._onMove,this),mn(document,Et?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(j){if(this._enabled){if(j.touches&&j.touches.length>1){this._moved=!0;return}var it=j.touches&&j.touches.length===1?j.touches[0]:j,ft=new Wt(it.clientX,it.clientY)._subtract(this._startPoint);!ft.x&&!ft.y||Math.abs(ft.x)+Math.abs(ft.y)<this.options.clickTolerance||(ft.x/=this._parentScale.x,ft.y/=this._parentScale.y,Dn(j),this._moved||(this.fire("dragstart"),this._moved=!0,cn(document.body,"leaflet-dragging"),this._lastTarget=j.target||j.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),cn(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(ft),this._moving=!0,this._lastEvent=j,this._updatePosition())}},_updatePosition:function(){var j={originalEvent:this._lastEvent};this.fire("predrag",j),kn(this._element,this._newPos),this.fire("drag",j)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(j){vn(document.body,"leaflet-dragging"),this._lastTarget&&(vn(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Un(document,"mousemove touchmove",this._onMove,this),Un(document,"mouseup touchend touchcancel",this._onUp,this),KA(),nA();var it=this._moved&&this._moving;this._moving=!1,tA._dragging=!1,it&&this.fire("dragend",{noInertia:j,distance:this._newPos.distanceTo(this._startPos)})}});function ds(j,it,ft){var Et,Mt=[1,4,2,8],qt,cr,Sr,Qr,Kr,ln,pn,wn;for(qt=0,ln=j.length;qt<ln;qt++)j[qt]._code=aA(j[qt],it);for(Sr=0;Sr<4;Sr++){for(pn=Mt[Sr],Et=[],qt=0,ln=j.length,cr=ln-1;qt<ln;cr=qt++)Qr=j[qt],Kr=j[cr],Qr._code&pn?Kr._code&pn||(wn=FA(Kr,Qr,pn,it,ft),wn._code=aA(wn,it),Et.push(wn)):(Kr._code&pn&&(wn=FA(Kr,Qr,pn,it,ft),wn._code=aA(wn,it),Et.push(wn)),Et.push(Qr));j=Et}return j}function gs(j,it){var ft,Et,Mt,qt,cr,Sr,Qr,Kr,ln;if(!j||j.length===0)throw new Error("latlngs not passed");$n(j)||(console.warn("latlngs are not flat! Only the first ring will be used"),j=j[0]);var pn=mr([0,0]),wn=Ur(j),Pn=wn.getNorthWest().distanceTo(wn.getSouthWest())*wn.getNorthEast().distanceTo(wn.getNorthWest());Pn<1700&&(pn=na(j));var Rn=j.length,Kn=[];for(ft=0;ft<Rn;ft++){var On=mr(j[ft]);Kn.push(it.project(mr([On.lat-pn.lat,On.lng-pn.lng])))}for(Sr=Qr=Kr=0,ft=0,Et=Rn-1;ft<Rn;Et=ft++)Mt=Kn[ft],qt=Kn[Et],cr=Mt.y*qt.x-qt.y*Mt.x,Qr+=(Mt.x+qt.x)*cr,Kr+=(Mt.y+qt.y)*cr,Sr+=cr*3;Sr===0?ln=Kn[0]:ln=[Qr/Sr,Kr/Sr];var fA=it.unproject(dr(ln));return mr([fA.lat+pn.lat,fA.lng+pn.lng])}function na(j){for(var it=0,ft=0,Et=0,Mt=0;Mt<j.length;Mt++){var qt=mr(j[Mt]);it+=qt.lat,ft+=qt.lng,Et++}return mr([it/Et,ft/Et])}var ro={__proto__:null,clipPolygon:ds,polygonCenter:gs,centroid:na};function ps(j,it){if(!it||!j.length)return j.slice();var ft=it*it;return j=Ao(j,ft),j=io(j,ft),j}function ms(j,it,ft){return Math.sqrt(_A(j,it,ft,!0))}function no(j,it,ft){return _A(j,it,ft)}function io(j,it){var ft=j.length,Et=typeof Uint8Array<"u"?Uint8Array:Array,Mt=new Et(ft);Mt[0]=Mt[ft-1]=1,ga(j,Mt,it,0,ft-1);var qt,cr=[];for(qt=0;qt<ft;qt++)Mt[qt]&&cr.push(j[qt]);return cr}function ga(j,it,ft,Et,Mt){var qt=0,cr,Sr,Qr;for(Sr=Et+1;Sr<=Mt-1;Sr++)Qr=_A(j[Sr],j[Et],j[Mt],!0),Qr>qt&&(cr=Sr,qt=Qr);qt>ft&&(it[cr]=1,ga(j,it,ft,Et,cr),ga(j,it,ft,cr,Mt))}function Ao(j,it){for(var ft=[j[0]],Et=1,Mt=0,qt=j.length;Et<qt;Et++)ao(j[Et],j[Mt])>it&&(ft.push(j[Et]),Mt=Et);return Mt<qt-1&&ft.push(j[qt-1]),ft}var _s;function ws(j,it,ft,Et,Mt){var qt=Et?_s:aA(j,ft),cr=aA(it,ft),Sr,Qr,Kr;for(_s=cr;;){if(!(qt|cr))return[j,it];if(qt&cr)return!1;Sr=qt||cr,Qr=FA(j,it,Sr,ft,Mt),Kr=aA(Qr,ft),Sr===qt?(j=Qr,qt=Kr):(it=Qr,cr=Kr)}}function FA(j,it,ft,Et,Mt){var qt=it.x-j.x,cr=it.y-j.y,Sr=Et.min,Qr=Et.max,Kr,ln;return ft&8?(Kr=j.x+qt*(Qr.y-j.y)/cr,ln=Qr.y):ft&4?(Kr=j.x+qt*(Sr.y-j.y)/cr,ln=Sr.y):ft&2?(Kr=Qr.x,ln=j.y+cr*(Qr.x-j.x)/qt):ft&1&&(Kr=Sr.x,ln=j.y+cr*(Sr.x-j.x)/qt),new Wt(Kr,ln,Mt)}function aA(j,it){var ft=0;return j.x<it.min.x?ft|=1:j.x>it.max.x&&(ft|=2),j.y<it.min.y?ft|=4:j.y>it.max.y&&(ft|=8),ft}function ao(j,it){var ft=it.x-j.x,Et=it.y-j.y;return ft*ft+Et*Et}function _A(j,it,ft,Et){var Mt=it.x,qt=it.y,cr=ft.x-Mt,Sr=ft.y-qt,Qr=cr*cr+Sr*Sr,Kr;return Qr>0&&(Kr=((j.x-Mt)*cr+(j.y-qt)*Sr)/Qr,Kr>1?(Mt=ft.x,qt=ft.y):Kr>0&&(Mt+=cr*Kr,qt+=Sr*Kr)),cr=j.x-Mt,Sr=j.y-qt,Et?cr*cr+Sr*Sr:new Wt(Mt,qt)}function $n(j){return!dt(j[0])||typeof j[0][0]!="object"&&typeof j[0][0]<"u"}function Bs(j){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),$n(j)}function vs(j,it){var ft,Et,Mt,qt,cr,Sr,Qr,Kr;if(!j||j.length===0)throw new Error("latlngs not passed");$n(j)||(console.warn("latlngs are not flat! Only the first ring will be used"),j=j[0]);var ln=mr([0,0]),pn=Ur(j),wn=pn.getNorthWest().distanceTo(pn.getSouthWest())*pn.getNorthEast().distanceTo(pn.getNorthWest());wn<1700&&(ln=na(j));var Pn=j.length,Rn=[];for(ft=0;ft<Pn;ft++){var Kn=mr(j[ft]);Rn.push(it.project(mr([Kn.lat-ln.lat,Kn.lng-ln.lng])))}for(ft=0,Et=0;ft<Pn-1;ft++)Et+=Rn[ft].distanceTo(Rn[ft+1])/2;if(Et===0)Kr=Rn[0];else for(ft=0,qt=0;ft<Pn-1;ft++)if(cr=Rn[ft],Sr=Rn[ft+1],Mt=cr.distanceTo(Sr),qt+=Mt,qt>Et){Qr=(qt-Et)/Mt,Kr=[Sr.x-Qr*(Sr.x-cr.x),Sr.y-Qr*(Sr.y-cr.y)];break}var On=it.unproject(dr(Kr));return mr([On.lat+ln.lat,On.lng+ln.lng])}var so={__proto__:null,simplify:ps,pointToSegmentDistance:ms,closestPointOnSegment:no,clipSegment:ws,_getEdgeIntersection:FA,_getBitCode:aA,_sqClosestPointOnSegment:_A,isFlat:$n,_flat:Bs,polylineCenter:vs},_a={project:function(j){return new Wt(j.lng,j.lat)},unproject:function(j){return new or(j.y,j.x)},bounds:new yr([-180,-90],[180,90])},ba={R:6378137,R_MINOR:6356752314245179e-9,bounds:new yr([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(j){var it=Math.PI/180,ft=this.R,Et=j.lat*it,Mt=this.R_MINOR/ft,qt=Math.sqrt(1-Mt*Mt),cr=qt*Math.sin(Et),Sr=Math.tan(Math.PI/4-Et/2)/Math.pow((1-cr)/(1+cr),qt/2);return Et=-ft*Math.log(Math.max(Sr,1e-10)),new Wt(j.lng*it*ft,Et)},unproject:function(j){for(var it=180/Math.PI,ft=this.R,Et=this.R_MINOR/ft,Mt=Math.sqrt(1-Et*Et),qt=Math.exp(-j.y/ft),cr=Math.PI/2-2*Math.atan(qt),Sr=0,Qr=.1,Kr;Sr<15&&Math.abs(Qr)>1e-7;Sr++)Kr=Mt*Math.sin(cr),Kr=Math.pow((1-Kr)/(1+Kr),Mt/2),Qr=Math.PI/2-2*Math.atan(qt*Kr)-cr,cr+=Qr;return new or(cr*it,j.x*it/ft)}},oo={__proto__:null,LonLat:_a,Mercator:ba,SphericalMercator:Xr},lo=g({},ur,{code:"EPSG:3395",projection:ba,transformation:function(){var j=.5/(Math.PI*ba.R);return kr(j,.5,-j,.5)}()}),ys=g({},ur,{code:"EPSG:4326",projection:_a,transformation:kr(1/180,1,-1/180,.5)}),uo=g({},Ir,{projection:_a,transformation:kr(1,0,-1,0),scale:function(j){return Math.pow(2,j)},zoom:function(j){return Math.log(j)/Math.LN2},distance:function(j,it){var ft=it.lng-j.lng,Et=it.lat-j.lat;return Math.sqrt(ft*ft+Et*Et)},infinite:!0});Ir.Earth=ur,Ir.EPSG3395=lo,Ir.EPSG3857=Tr,Ir.EPSG900913=Mr,Ir.EPSG4326=ys,Ir.Simple=uo;var Gn=ar.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(j){return j.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(j){return j&&j.removeLayer(this),this},getPane:function(j){return this._map.getPane(j?this.options[j]||j:this.options.pane)},addInteractiveTarget:function(j){return this._map._targets[et(j)]=this,this},removeInteractiveTarget:function(j){return delete this._map._targets[et(j)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(j){var it=j.target;if(it.hasLayer(this)){if(this._map=it,this._zoomAnimated=it._zoomAnimated,this.getEvents){var ft=this.getEvents();it.on(ft,this),this.once("remove",function(){it.off(ft,this)},this)}this.onAdd(it),this.fire("add"),it.fire("layeradd",{layer:this})}}});yn.include({addLayer:function(j){if(!j._layerAdd)throw new Error("The provided object is not a Layer.");var it=et(j);return this._layers[it]?this:(this._layers[it]=j,j._mapToAdd=this,j.beforeAdd&&j.beforeAdd(this),this.whenReady(j._layerAdd,j),this)},removeLayer:function(j){var it=et(j);return this._layers[it]?(this._loaded&&j.onRemove(this),delete this._layers[it],this._loaded&&(this.fire("layerremove",{layer:j}),j.fire("remove")),j._map=j._mapToAdd=null,this):this},hasLayer:function(j){return et(j)in this._layers},eachLayer:function(j,it){for(var ft in this._layers)j.call(it,this._layers[ft]);return this},_addLayers:function(j){j=j?dt(j)?j:[j]:[];for(var it=0,ft=j.length;it<ft;it++)this.addLayer(j[it])},_addZoomLimit:function(j){(!isNaN(j.options.maxZoom)||!isNaN(j.options.minZoom))&&(this._zoomBoundLayers[et(j)]=j,this._updateZoomLevels())},_removeZoomLimit:function(j){var it=et(j);this._zoomBoundLayers[it]&&(delete this._zoomBoundLayers[it],this._updateZoomLevels())},_updateZoomLevels:function(){var j=1/0,it=-1/0,ft=this._getZoomSpan();for(var Et in this._zoomBoundLayers){var Mt=this._zoomBoundLayers[Et].options;j=Mt.minZoom===void 0?j:Math.min(j,Mt.minZoom),it=Mt.maxZoom===void 0?it:Math.max(it,Mt.maxZoom)}this._layersMaxZoom=it===-1/0?void 0:it,this._layersMinZoom=j===1/0?void 0:j,ft!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var oA=Gn.extend({initialize:function(j,it){gt(this,it),this._layers={};var ft,Et;if(j)for(ft=0,Et=j.length;ft<Et;ft++)this.addLayer(j[ft])},addLayer:function(j){var it=this.getLayerId(j);return this._layers[it]=j,this._map&&this._map.addLayer(j),this},removeLayer:function(j){var it=j in this._layers?j:this.getLayerId(j);return this._map&&this._layers[it]&&this._map.removeLayer(this._layers[it]),delete this._layers[it],this},hasLayer:function(j){var it=typeof j=="number"?j:this.getLayerId(j);return it in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(j){var it=Array.prototype.slice.call(arguments,1),ft,Et;for(ft in this._layers)Et=this._layers[ft],Et[j]&&Et[j].apply(Et,it);return this},onAdd:function(j){this.eachLayer(j.addLayer,j)},onRemove:function(j){this.eachLayer(j.removeLayer,j)},eachLayer:function(j,it){for(var ft in this._layers)j.call(it,this._layers[ft]);return this},getLayer:function(j){return this._layers[j]},getLayers:function(){var j=[];return this.eachLayer(j.push,j),j},setZIndex:function(j){return this.invoke("setZIndex",j)},getLayerId:function(j){return et(j)}}),ho=function(j,it){return new oA(j,it)},jn=oA.extend({addLayer:function(j){return this.hasLayer(j)?this:(j.addEventParent(this),oA.prototype.addLayer.call(this,j),this.fire("layeradd",{layer:j}))},removeLayer:function(j){return this.hasLayer(j)?(j in this._layers&&(j=this._layers[j]),j.removeEventParent(this),oA.prototype.removeLayer.call(this,j),this.fire("layerremove",{layer:j})):this},setStyle:function(j){return this.invoke("setStyle",j)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var j=new Lr;for(var it in this._layers){var ft=this._layers[it];j.extend(ft.getBounds?ft.getBounds():ft.getLatLng())}return j}}),co=function(j,it){return new jn(j,it)},lA=Xt.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(j){gt(this,j)},createIcon:function(j){return this._createIcon("icon",j)},createShadow:function(j){return this._createIcon("shadow",j)},_createIcon:function(j,it){var ft=this._getIconUrl(j);if(!ft){if(j==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var Et=this._createImg(ft,it&&it.tagName==="IMG"?it:null);return this._setIconStyles(Et,j),(this.options.crossOrigin||this.options.crossOrigin==="")&&(Et.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),Et},_setIconStyles:function(j,it){var ft=this.options,Et=ft[it+"Size"];typeof Et=="number"&&(Et=[Et,Et]);var Mt=dr(Et),qt=dr(it==="shadow"&&ft.shadowAnchor||ft.iconAnchor||Mt&&Mt.divideBy(2,!0));j.className="leaflet-marker-"+it+" "+(ft.className||""),qt&&(j.style.marginLeft=-qt.x+"px",j.style.marginTop=-qt.y+"px"),Mt&&(j.style.width=Mt.x+"px",j.style.height=Mt.y+"px")},_createImg:function(j,it){return it=it||document.createElement("img"),it.src=j,it},_getIconUrl:function(j){return Kt.retina&&this.options[j+"RetinaUrl"]||this.options[j+"Url"]}});function fo(j){return new lA(j)}var wA=lA.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(j){return typeof wA.imagePath!="string"&&(wA.imagePath=this._detectIconPath()),(this.options.imagePath||wA.imagePath)+lA.prototype._getIconUrl.call(this,j)},_stripUrl:function(j){var it=function(ft,Et,Mt){var qt=Et.exec(ft);return qt&&qt[Mt]};return j=it(j,/^url\((['"])?(.+)\1\)$/,2),j&&it(j,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var j=gn("div","leaflet-default-icon-path",document.body),it=Cn(j,"background-image")||Cn(j,"backgroundImage");if(document.body.removeChild(j),it=this._stripUrl(it),it)return it;var ft=document.querySelector('link[href$="leaflet.css"]');return ft?ft.href.substring(0,ft.href.length-11-1):""}}),bs=qn.extend({initialize:function(j){this._marker=j},addHooks:function(){var j=this._marker._icon;this._draggable||(this._draggable=new tA(j,j,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),cn(j,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&vn(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(j){var it=this._marker,ft=it._map,Et=this._marker.options.autoPanSpeed,Mt=this._marker.options.autoPanPadding,qt=Yn(it._icon),cr=ft.getPixelBounds(),Sr=ft.getPixelOrigin(),Qr=Br(cr.min._subtract(Sr).add(Mt),cr.max._subtract(Sr).subtract(Mt));if(!Qr.contains(qt)){var Kr=dr((Math.max(Qr.max.x,qt.x)-Qr.max.x)/(cr.max.x-Qr.max.x)-(Math.min(Qr.min.x,qt.x)-Qr.min.x)/(cr.min.x-Qr.min.x),(Math.max(Qr.max.y,qt.y)-Qr.max.y)/(cr.max.y-Qr.max.y)-(Math.min(Qr.min.y,qt.y)-Qr.min.y)/(cr.min.y-Qr.min.y)).multiplyBy(Et);ft.panBy(Kr,{animate:!1}),this._draggable._newPos._add(Kr),this._draggable._startPos._add(Kr),kn(it._icon,this._draggable._newPos),this._onDrag(j),this._panRequest=Pt(this._adjustPan.bind(this,j))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(j){this._marker.options.autoPan&&(jt(this._panRequest),this._panRequest=Pt(this._adjustPan.bind(this,j)))},_onDrag:function(j){var it=this._marker,ft=it._shadow,Et=Yn(it._icon),Mt=it._map.layerPointToLatLng(Et);ft&&kn(ft,Et),it._latlng=Mt,j.latlng=Mt,j.oldLatLng=this._oldLatLng,it.fire("move",j).fire("drag",j)},_onDragEnd:function(j){jt(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",j)}}),UA=Gn.extend({options:{icon:new wA,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(j,it){gt(this,it),this._latlng=mr(j)},onAdd:function(j){this._zoomAnimated=this._zoomAnimated&&j.options.markerZoomAnimation,this._zoomAnimated&&j.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(j){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&j.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(j){var it=this._latlng;return this._latlng=mr(j),this.update(),this.fire("move",{oldLatLng:it,latlng:this._latlng})},setZIndexOffset:function(j){return this.options.zIndexOffset=j,this.update()},getIcon:function(){return this.options.icon},setIcon:function(j){return this.options.icon=j,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var j=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(j)}return this},_initIcon:function(){var j=this.options,it="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),ft=j.icon.createIcon(this._icon),Et=!1;ft!==this._icon&&(this._icon&&this._removeIcon(),Et=!0,j.title&&(ft.title=j.title),ft.tagName==="IMG"&&(ft.alt=j.alt||"")),cn(ft,it),j.keyboard&&(ft.tabIndex="0",ft.setAttribute("role","button")),this._icon=ft,j.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&mn(ft,"focus",this._panOnFocus,this);var Mt=j.icon.createShadow(this._shadow),qt=!1;Mt!==this._shadow&&(this._removeShadow(),qt=!0),Mt&&(cn(Mt,it),Mt.alt=""),this._shadow=Mt,j.opacity<1&&this._updateOpacity(),Et&&this.getPane().appendChild(this._icon),this._initInteraction(),Mt&&qt&&this.getPane(j.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Un(this._icon,"focus",this._panOnFocus,this),Bn(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Bn(this._shadow),this._shadow=null},_setPos:function(j){this._icon&&kn(this._icon,j),this._shadow&&kn(this._shadow,j),this._zIndex=j.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(j){this._icon&&(this._icon.style.zIndex=this._zIndex+j)},_animateZoom:function(j){var it=this._map._latLngToNewLayerPoint(this._latlng,j.zoom,j.center).round();this._setPos(it)},_initInteraction:function(){if(this.options.interactive&&(cn(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),bs)){var j=this.options.draggable;this.dragging&&(j=this.dragging.enabled(),this.dragging.disable()),this.dragging=new bs(this),j&&this.dragging.enable()}},setOpacity:function(j){return this.options.opacity=j,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var j=this.options.opacity;this._icon&&Nn(this._icon,j),this._shadow&&Nn(this._shadow,j)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var j=this._map;if(j){var it=this.options.icon.options,ft=it.iconSize?dr(it.iconSize):dr(0,0),Et=it.iconAnchor?dr(it.iconAnchor):dr(0,0);j.panInside(this._latlng,{paddingTopLeft:Et,paddingBottomRight:ft.subtract(Et)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function go(j,it){return new UA(j,it)}var eA=Gn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(j){this._renderer=j.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(j){return gt(this,j),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&j&&Object.prototype.hasOwnProperty.call(j,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),QA=eA.extend({options:{fill:!0,radius:10},initialize:function(j,it){gt(this,it),this._latlng=mr(j),this._radius=this.options.radius},setLatLng:function(j){var it=this._latlng;return this._latlng=mr(j),this.redraw(),this.fire("move",{oldLatLng:it,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(j){return this.options.radius=this._radius=j,this.redraw()},getRadius:function(){return this._radius},setStyle:function(j){var it=j&&j.radius||this._radius;return eA.prototype.setStyle.call(this,j),this.setRadius(it),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var j=this._radius,it=this._radiusY||j,ft=this._clickTolerance(),Et=[j+ft,it+ft];this._pxBounds=new yr(this._point.subtract(Et),this._point.add(Et))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(j){return j.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function po(j,it){return new QA(j,it)}var xa=QA.extend({initialize:function(j,it,ft){if(typeof it=="number"&&(it=g({},ft,{radius:it})),gt(this,it),this._latlng=mr(j),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(j){return this._mRadius=j,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var j=[this._radius,this._radiusY||this._radius];return new Lr(this._map.layerPointToLatLng(this._point.subtract(j)),this._map.layerPointToLatLng(this._point.add(j)))},setStyle:eA.prototype.setStyle,_project:function(){var j=this._latlng.lng,it=this._latlng.lat,ft=this._map,Et=ft.options.crs;if(Et.distance===ur.distance){var Mt=Math.PI/180,qt=this._mRadius/ur.R/Mt,cr=ft.project([it+qt,j]),Sr=ft.project([it-qt,j]),Qr=cr.add(Sr).divideBy(2),Kr=ft.unproject(Qr).lat,ln=Math.acos((Math.cos(qt*Mt)-Math.sin(it*Mt)*Math.sin(Kr*Mt))/(Math.cos(it*Mt)*Math.cos(Kr*Mt)))/Mt;(isNaN(ln)||ln===0)&&(ln=qt/Math.cos(Math.PI/180*it)),this._point=Qr.subtract(ft.getPixelOrigin()),this._radius=isNaN(ln)?0:Qr.x-ft.project([Kr,j-ln]).x,this._radiusY=Qr.y-cr.y}else{var pn=Et.unproject(Et.project(this._latlng).subtract([this._mRadius,0]));this._point=ft.latLngToLayerPoint(this._latlng),this._radius=this._point.x-ft.latLngToLayerPoint(pn).x}this._updateBounds()}});function mo(j,it,ft){return new xa(j,it,ft)}var Wn=eA.extend({options:{smoothFactor:1,noClip:!1},initialize:function(j,it){gt(this,it),this._setLatLngs(j)},getLatLngs:function(){return this._latlngs},setLatLngs:function(j){return this._setLatLngs(j),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(j){for(var it=1/0,ft=null,Et=_A,Mt,qt,cr=0,Sr=this._parts.length;cr<Sr;cr++)for(var Qr=this._parts[cr],Kr=1,ln=Qr.length;Kr<ln;Kr++){Mt=Qr[Kr-1],qt=Qr[Kr];var pn=Et(j,Mt,qt,!0);pn<it&&(it=pn,ft=Et(j,Mt,qt))}return ft&&(ft.distance=Math.sqrt(it)),ft},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return vs(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(j,it){return it=it||this._defaultShape(),j=mr(j),it.push(j),this._bounds.extend(j),this.redraw()},_setLatLngs:function(j){this._bounds=new Lr,this._latlngs=this._convertLatLngs(j)},_defaultShape:function(){return $n(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(j){for(var it=[],ft=$n(j),Et=0,Mt=j.length;Et<Mt;Et++)ft?(it[Et]=mr(j[Et]),this._bounds.extend(it[Et])):it[Et]=this._convertLatLngs(j[Et]);return it},_project:function(){var j=new yr;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,j),this._bounds.isValid()&&j.isValid()&&(this._rawPxBounds=j,this._updateBounds())},_updateBounds:function(){var j=this._clickTolerance(),it=new Wt(j,j);this._rawPxBounds&&(this._pxBounds=new yr([this._rawPxBounds.min.subtract(it),this._rawPxBounds.max.add(it)]))},_projectLatlngs:function(j,it,ft){var Et=j[0]instanceof or,Mt=j.length,qt,cr;if(Et){for(cr=[],qt=0;qt<Mt;qt++)cr[qt]=this._map.latLngToLayerPoint(j[qt]),ft.extend(cr[qt]);it.push(cr)}else for(qt=0;qt<Mt;qt++)this._projectLatlngs(j[qt],it,ft)},_clipPoints:function(){var j=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(j))){if(this.options.noClip){this._parts=this._rings;return}var it=this._parts,ft,Et,Mt,qt,cr,Sr,Qr;for(ft=0,Mt=0,qt=this._rings.length;ft<qt;ft++)for(Qr=this._rings[ft],Et=0,cr=Qr.length;Et<cr-1;Et++)Sr=ws(Qr[Et],Qr[Et+1],j,Et,!0),Sr&&(it[Mt]=it[Mt]||[],it[Mt].push(Sr[0]),(Sr[1]!==Qr[Et+1]||Et===cr-2)&&(it[Mt].push(Sr[1]),Mt++))}},_simplifyPoints:function(){for(var j=this._parts,it=this.options.smoothFactor,ft=0,Et=j.length;ft<Et;ft++)j[ft]=ps(j[ft],it)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(j,it){var ft,Et,Mt,qt,cr,Sr,Qr=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(j))return!1;for(ft=0,qt=this._parts.length;ft<qt;ft++)for(Sr=this._parts[ft],Et=0,cr=Sr.length,Mt=cr-1;Et<cr;Mt=Et++)if(!(!it&&Et===0)&&ms(j,Sr[Mt],Sr[Et])<=Qr)return!0;return!1}});function _o(j,it){return new Wn(j,it)}Wn._flat=Bs;var uA=Wn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return gs(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(j){var it=Wn.prototype._convertLatLngs.call(this,j),ft=it.length;return ft>=2&&it[0]instanceof or&&it[0].equals(it[ft-1])&&it.pop(),it},_setLatLngs:function(j){Wn.prototype._setLatLngs.call(this,j),$n(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return $n(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var j=this._renderer._bounds,it=this.options.weight,ft=new Wt(it,it);if(j=new yr(j.min.subtract(ft),j.max.add(ft)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(j))){if(this.options.noClip){this._parts=this._rings;return}for(var Et=0,Mt=this._rings.length,qt;Et<Mt;Et++)qt=ds(this._rings[Et],j,!0),qt.length&&this._parts.push(qt)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(j){var it=!1,ft,Et,Mt,qt,cr,Sr,Qr,Kr;if(!this._pxBounds||!this._pxBounds.contains(j))return!1;for(qt=0,Qr=this._parts.length;qt<Qr;qt++)for(ft=this._parts[qt],cr=0,Kr=ft.length,Sr=Kr-1;cr<Kr;Sr=cr++)Et=ft[cr],Mt=ft[Sr],Et.y>j.y!=Mt.y>j.y&&j.x<(Mt.x-Et.x)*(j.y-Et.y)/(Mt.y-Et.y)+Et.x&&(it=!it);return it||Wn.prototype._containsPoint.call(this,j,!0)}});function wo(j,it){return new uA(j,it)}var Jn=jn.extend({initialize:function(j,it){gt(this,it),this._layers={},j&&this.addData(j)},addData:function(j){var it=dt(j)?j:j.features,ft,Et,Mt;if(it){for(ft=0,Et=it.length;ft<Et;ft++)Mt=it[ft],(Mt.geometries||Mt.geometry||Mt.features||Mt.coordinates)&&this.addData(Mt);return this}var qt=this.options;if(qt.filter&&!qt.filter(j))return this;var cr=IA(j,qt);return cr?(cr.feature=RA(j),cr.defaultOptions=cr.options,this.resetStyle(cr),qt.onEachFeature&&qt.onEachFeature(j,cr),this.addLayer(cr)):this},resetStyle:function(j){return j===void 0?this.eachLayer(this.resetStyle,this):(j.options=g({},j.defaultOptions),this._setLayerStyle(j,this.options.style),this)},setStyle:function(j){return this.eachLayer(function(it){this._setLayerStyle(it,j)},this)},_setLayerStyle:function(j,it){j.setStyle&&(typeof it=="function"&&(it=it(j.feature)),j.setStyle(it))}});function IA(j,it){var ft=j.type==="Feature"?j.geometry:j,Et=ft?ft.coordinates:null,Mt=[],qt=it&&it.pointToLayer,cr=it&&it.coordsToLatLng||$a,Sr,Qr,Kr,ln;if(!Et&&!ft)return null;switch(ft.type){case"Point":return Sr=cr(Et),Es(qt,j,Sr,it);case"MultiPoint":for(Kr=0,ln=Et.length;Kr<ln;Kr++)Sr=cr(Et[Kr]),Mt.push(Es(qt,j,Sr,it));return new jn(Mt);case"LineString":case"MultiLineString":return Qr=kA(Et,ft.type==="LineString"?0:1,cr),new Wn(Qr,it);case"Polygon":case"MultiPolygon":return Qr=kA(Et,ft.type==="Polygon"?1:2,cr),new uA(Qr,it);case"GeometryCollection":for(Kr=0,ln=ft.geometries.length;Kr<ln;Kr++){var pn=IA({geometry:ft.geometries[Kr],type:"Feature",properties:j.properties},it);pn&&Mt.push(pn)}return new jn(Mt);case"FeatureCollection":for(Kr=0,ln=ft.features.length;Kr<ln;Kr++){var wn=IA(ft.features[Kr],it);wn&&Mt.push(wn)}return new jn(Mt);default:throw new Error("Invalid GeoJSON object.")}}function Es(j,it,ft,Et){return j?j(it,ft):new UA(ft,Et&&Et.markersInheritOptions&&Et)}function $a(j){return new or(j[1],j[0],j[2])}function kA(j,it,ft){for(var Et=[],Mt=0,qt=j.length,cr;Mt<qt;Mt++)cr=it?kA(j[Mt],it-1,ft):(ft||$a)(j[Mt]),Et.push(cr);return Et}function ts(j,it){return j=mr(j),j.alt!==void 0?[At(j.lng,it),At(j.lat,it),At(j.alt,it)]:[At(j.lng,it),At(j.lat,it)]}function TA(j,it,ft,Et){for(var Mt=[],qt=0,cr=j.length;qt<cr;qt++)Mt.push(it?TA(j[qt],$n(j[qt])?0:it-1,ft,Et):ts(j[qt],Et));return!it&&ft&&Mt.length>0&&Mt.push(Mt[0].slice()),Mt}function hA(j,it){return j.feature?g({},j.feature,{geometry:it}):RA(it)}function RA(j){return j.type==="Feature"||j.type==="FeatureCollection"?j:{type:"Feature",properties:{},geometry:j}}var es={toGeoJSON:function(j){return hA(this,{type:"Point",coordinates:ts(this.getLatLng(),j)})}};UA.include(es),xa.include(es),QA.include(es),Wn.include({toGeoJSON:function(j){var it=!$n(this._latlngs),ft=TA(this._latlngs,it?1:0,!1,j);return hA(this,{type:(it?"Multi":"")+"LineString",coordinates:ft})}}),uA.include({toGeoJSON:function(j){var it=!$n(this._latlngs),ft=it&&!$n(this._latlngs[0]),Et=TA(this._latlngs,ft?2:it?1:0,!0,j);return it||(Et=[Et]),hA(this,{type:(ft?"Multi":"")+"Polygon",coordinates:Et})}}),oA.include({toMultiPoint:function(j){var it=[];return this.eachLayer(function(ft){it.push(ft.toGeoJSON(j).geometry.coordinates)}),hA(this,{type:"MultiPoint",coordinates:it})},toGeoJSON:function(j){var it=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(it==="MultiPoint")return this.toMultiPoint(j);var ft=it==="GeometryCollection",Et=[];return this.eachLayer(function(Mt){if(Mt.toGeoJSON){var qt=Mt.toGeoJSON(j);if(ft)Et.push(qt.geometry);else{var cr=RA(qt);cr.type==="FeatureCollection"?Et.push.apply(Et,cr.features):Et.push(cr)}}}),ft?hA(this,{geometries:Et,type:"GeometryCollection"}):{type:"FeatureCollection",features:Et}}});function Cs(j,it){return new Jn(j,it)}var Bo=Cs,LA=Gn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(j,it,ft){this._url=j,this._bounds=Ur(it),gt(this,ft)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(cn(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Bn(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(j){return this.options.opacity=j,this._image&&this._updateOpacity(),this},setStyle:function(j){return j.opacity&&this.setOpacity(j.opacity),this},bringToFront:function(){return this._map&&Ln(this._image),this},bringToBack:function(){return this._map&&Hn(this._image),this},setUrl:function(j){return this._url=j,this._image&&(this._image.src=j),this},setBounds:function(j){return this._bounds=Ur(j),this._map&&this._reset(),this},getEvents:function(){var j={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(j.zoomanim=this._animateZoom),j},setZIndex:function(j){return this.options.zIndex=j,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var j=this._url.tagName==="IMG",it=this._image=j?this._url:gn("img");if(cn(it,"leaflet-image-layer"),this._zoomAnimated&&cn(it,"leaflet-zoom-animated"),this.options.className&&cn(it,this.options.className),it.onselectstart=nt,it.onmousemove=nt,it.onload=b(this.fire,this,"load"),it.onerror=b(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(it.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),j){this._url=it.src;return}it.src=this._url,it.alt=this.options.alt},_animateZoom:function(j){var it=this._map.getZoomScale(j.zoom),ft=this._map._latLngBoundsToNewLayerBounds(this._bounds,j.zoom,j.center).min;Zn(this._image,ft,it)},_reset:function(){var j=this._image,it=new yr(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),ft=it.getSize();kn(j,it.min),j.style.width=ft.x+"px",j.style.height=ft.y+"px"},_updateOpacity:function(){Nn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var j=this.options.errorOverlayUrl;j&&this._url!==j&&(this._url=j,this._image.src=j)},getCenter:function(){return this._bounds.getCenter()}}),vo=function(j,it,ft){return new LA(j,it,ft)},xs=LA.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var j=this._url.tagName==="VIDEO",it=this._image=j?this._url:gn("video");if(cn(it,"leaflet-image-layer"),this._zoomAnimated&&cn(it,"leaflet-zoom-animated"),this.options.className&&cn(it,this.options.className),it.onselectstart=nt,it.onmousemove=nt,it.onloadeddata=b(this.fire,this,"load"),j){for(var ft=it.getElementsByTagName("source"),Et=[],Mt=0;Mt<ft.length;Mt++)Et.push(ft[Mt].src);this._url=ft.length>0?Et:[it.src];return}dt(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(it.style,"objectFit")&&(it.style.objectFit="fill"),it.autoplay=!!this.options.autoplay,it.loop=!!this.options.loop,it.muted=!!this.options.muted,it.playsInline=!!this.options.playsInline;for(var qt=0;qt<this._url.length;qt++){var cr=gn("source");cr.src=this._url[qt],it.appendChild(cr)}}});function yo(j,it,ft){return new xs(j,it,ft)}var Ss=LA.extend({_initImage:function(){var j=this._image=this._url;cn(j,"leaflet-image-layer"),this._zoomAnimated&&cn(j,"leaflet-zoom-animated"),this.options.className&&cn(j,this.options.className),j.onselectstart=nt,j.onmousemove=nt}});function bo(j,it,ft){return new Ss(j,it,ft)}var Xn=Gn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(j,it){j&&(j instanceof or||dt(j))?(this._latlng=mr(j),gt(this,it)):(gt(this,j),this._source=it),this.options.content&&(this._content=this.options.content)},openOn:function(j){return j=arguments.length?j:this._source._map,j.hasLayer(this)||j.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(j){return this._map?this.close():(arguments.length?this._source=j:j=this._source,this._prepareOpen(),this.openOn(j._map)),this},onAdd:function(j){this._zoomAnimated=j._zoomAnimated,this._container||this._initLayout(),j._fadeAnimated&&Nn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),j._fadeAnimated&&Nn(this._container,1),this.bringToFront(),this.options.interactive&&(cn(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(j){j._fadeAnimated?(Nn(this._container,0),this._removeTimeout=setTimeout(b(Bn,void 0,this._container),200)):Bn(this._container),this.options.interactive&&(vn(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(j){return this._latlng=mr(j),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(j){return this._content=j,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var j={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(j.zoomanim=this._animateZoom),j},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Ln(this._container),this},bringToBack:function(){return this._map&&Hn(this._container),this},_prepareOpen:function(j){var it=this._source;if(!it._map)return!1;if(it instanceof jn){it=null;var ft=this._source._layers;for(var Et in ft)if(ft[Et]._map){it=ft[Et];break}if(!it)return!1;this._source=it}if(!j)if(it.getCenter)j=it.getCenter();else if(it.getLatLng)j=it.getLatLng();else if(it.getBounds)j=it.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(j),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var j=this._contentNode,it=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof it=="string")j.innerHTML=it;else{for(;j.hasChildNodes();)j.removeChild(j.firstChild);j.appendChild(it)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var j=this._map.latLngToLayerPoint(this._latlng),it=dr(this.options.offset),ft=this._getAnchor();this._zoomAnimated?kn(this._container,j.add(ft)):it=it.add(j).add(ft);var Et=this._containerBottom=-it.y,Mt=this._containerLeft=-Math.round(this._containerWidth/2)+it.x;this._container.style.bottom=Et+"px",this._container.style.left=Mt+"px"}},_getAnchor:function(){return[0,0]}});yn.include({_initOverlay:function(j,it,ft,Et){var Mt=it;return Mt instanceof j||(Mt=new j(Et).setContent(it)),ft&&Mt.setLatLng(ft),Mt}}),Gn.include({_initOverlay:function(j,it,ft,Et){var Mt=ft;return Mt instanceof j?(gt(Mt,Et),Mt._source=this):(Mt=it&&!Et?it:new j(Et,this),Mt.setContent(ft)),Mt}});var MA=Xn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(j){return j=arguments.length?j:this._source._map,!j.hasLayer(this)&&j._popup&&j._popup.options.autoClose&&j.removeLayer(j._popup),j._popup=this,Xn.prototype.openOn.call(this,j)},onAdd:function(j){Xn.prototype.onAdd.call(this,j),j.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof eA||this._source.on("preclick",iA))},onRemove:function(j){Xn.prototype.onRemove.call(this,j),j.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof eA||this._source.off("preclick",iA))},getEvents:function(){var j=Xn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(j.preclick=this.close),this.options.keepInView&&(j.moveend=this._adjustPan),j},_initLayout:function(){var j="leaflet-popup",it=this._container=gn("div",j+" "+(this.options.className||"")+" leaflet-zoom-animated"),ft=this._wrapper=gn("div",j+"-content-wrapper",it);if(this._contentNode=gn("div",j+"-content",ft),pA(it),YA(this._contentNode),mn(it,"contextmenu",iA),this._tipContainer=gn("div",j+"-tip-container",it),this._tip=gn("div",j+"-tip",this._tipContainer),this.options.closeButton){var Et=this._closeButton=gn("a",j+"-close-button",it);Et.setAttribute("role","button"),Et.setAttribute("aria-label","Close popup"),Et.href="#close",Et.innerHTML='<span aria-hidden="true">&#215;</span>',mn(Et,"click",function(Mt){Dn(Mt),this.close()},this)}},_updateLayout:function(){var j=this._contentNode,it=j.style;it.width="",it.whiteSpace="nowrap";var ft=j.offsetWidth;ft=Math.min(ft,this.options.maxWidth),ft=Math.max(ft,this.options.minWidth),it.width=ft+1+"px",it.whiteSpace="",it.height="";var Et=j.offsetHeight,Mt=this.options.maxHeight,qt="leaflet-popup-scrolled";Mt&&Et>Mt?(it.height=Mt+"px",cn(j,qt)):vn(j,qt),this._containerWidth=this._container.offsetWidth},_animateZoom:function(j){var it=this._map._latLngToNewLayerPoint(this._latlng,j.zoom,j.center),ft=this._getAnchor();kn(this._container,it.add(ft))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var j=this._map,it=parseInt(Cn(this._container,"marginBottom"),10)||0,ft=this._container.offsetHeight+it,Et=this._containerWidth,Mt=new Wt(this._containerLeft,-ft-this._containerBottom);Mt._add(Yn(this._container));var qt=j.layerPointToContainerPoint(Mt),cr=dr(this.options.autoPanPadding),Sr=dr(this.options.autoPanPaddingTopLeft||cr),Qr=dr(this.options.autoPanPaddingBottomRight||cr),Kr=j.getSize(),ln=0,pn=0;qt.x+Et+Qr.x>Kr.x&&(ln=qt.x+Et-Kr.x+Qr.x),qt.x-ln-Sr.x<0&&(ln=qt.x-Sr.x),qt.y+ft+Qr.y>Kr.y&&(pn=qt.y+ft-Kr.y+Qr.y),qt.y-pn-Sr.y<0&&(pn=qt.y-Sr.y),(ln||pn)&&(this.options.keepInView&&(this._autopanning=!0),j.fire("autopanstart").panBy([ln,pn]))}},_getAnchor:function(){return dr(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Eo=function(j,it){return new MA(j,it)};yn.mergeOptions({closePopupOnClick:!0}),yn.include({openPopup:function(j,it,ft){return this._initOverlay(MA,j,it,ft).openOn(this),this},closePopup:function(j){return j=arguments.length?j:this._popup,j&&j.close(),this}}),Gn.include({bindPopup:function(j,it){return this._popup=this._initOverlay(MA,this._popup,j,it),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(j){return this._popup&&(this instanceof jn||(this._popup._source=this),this._popup._prepareOpen(j||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(j){return this._popup&&this._popup.setContent(j),this},getPopup:function(){return this._popup},_openPopup:function(j){if(!(!this._popup||!this._map)){AA(j);var it=j.layer||j.target;if(this._popup._source===it&&!(it instanceof eA)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(j.latlng);return}this._popup._source=it,this.openPopup(j.latlng)}},_movePopup:function(j){this._popup.setLatLng(j.latlng)},_onKeyPress:function(j){j.originalEvent.keyCode===13&&this._openPopup(j)}});var DA=Xn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(j){Xn.prototype.onAdd.call(this,j),this.setOpacity(this.options.opacity),j.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(j){Xn.prototype.onRemove.call(this,j),j.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var j=Xn.prototype.getEvents.call(this);return this.options.permanent||(j.preclick=this.close),j},_initLayout:function(){var j="leaflet-tooltip",it=j+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=gn("div",it),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+et(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(j){var it,ft,Et=this._map,Mt=this._container,qt=Et.latLngToContainerPoint(Et.getCenter()),cr=Et.layerPointToContainerPoint(j),Sr=this.options.direction,Qr=Mt.offsetWidth,Kr=Mt.offsetHeight,ln=dr(this.options.offset),pn=this._getAnchor();Sr==="top"?(it=Qr/2,ft=Kr):Sr==="bottom"?(it=Qr/2,ft=0):Sr==="center"?(it=Qr/2,ft=Kr/2):Sr==="right"?(it=0,ft=Kr/2):Sr==="left"?(it=Qr,ft=Kr/2):cr.x<qt.x?(Sr="right",it=0,ft=Kr/2):(Sr="left",it=Qr+(ln.x+pn.x)*2,ft=Kr/2),j=j.subtract(dr(it,ft,!0)).add(ln).add(pn),vn(Mt,"leaflet-tooltip-right"),vn(Mt,"leaflet-tooltip-left"),vn(Mt,"leaflet-tooltip-top"),vn(Mt,"leaflet-tooltip-bottom"),cn(Mt,"leaflet-tooltip-"+Sr),kn(Mt,j)},_updatePosition:function(){var j=this._map.latLngToLayerPoint(this._latlng);this._setPosition(j)},setOpacity:function(j){this.options.opacity=j,this._container&&Nn(this._container,j)},_animateZoom:function(j){var it=this._map._latLngToNewLayerPoint(this._latlng,j.zoom,j.center);this._setPosition(it)},_getAnchor:function(){return dr(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Co=function(j,it){return new DA(j,it)};yn.include({openTooltip:function(j,it,ft){return this._initOverlay(DA,j,it,ft).openOn(this),this},closeTooltip:function(j){return j.close(),this}}),Gn.include({bindTooltip:function(j,it){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(DA,this._tooltip,j,it),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(j){if(!(!j&&this._tooltipHandlersAdded)){var it=j?"off":"on",ft={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?ft.add=this._openTooltip:(ft.mouseover=this._openTooltip,ft.mouseout=this.closeTooltip,ft.click=this._openTooltip,this._map?this._addFocusListeners():ft.add=this._addFocusListeners),this._tooltip.options.sticky&&(ft.mousemove=this._moveTooltip),this[it](ft),this._tooltipHandlersAdded=!j}},openTooltip:function(j){return this._tooltip&&(this instanceof jn||(this._tooltip._source=this),this._tooltip._prepareOpen(j)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(j){return this._tooltip&&this._tooltip.setContent(j),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(j){var it=typeof j.getElement=="function"&&j.getElement();it&&(mn(it,"focus",function(){this._tooltip._source=j,this.openTooltip()},this),mn(it,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(j){var it=typeof j.getElement=="function"&&j.getElement();it&&it.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(j){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var it=this;this._map.once("moveend",function(){it._openOnceFlag=!1,it._openTooltip(j)});return}this._tooltip._source=j.layer||j.target,this.openTooltip(this._tooltip.options.sticky?j.latlng:void 0)}},_moveTooltip:function(j){var it=j.latlng,ft,Et;this._tooltip.options.sticky&&j.originalEvent&&(ft=this._map.mouseEventToContainerPoint(j.originalEvent),Et=this._map.containerPointToLayerPoint(ft),it=this._map.layerPointToLatLng(Et)),this._tooltip.setLatLng(it)}});var Fs=lA.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(j){var it=j&&j.tagName==="DIV"?j:document.createElement("div"),ft=this.options;if(ft.html instanceof Element?(Qn(it),it.appendChild(ft.html)):it.innerHTML=ft.html!==!1?ft.html:"",ft.bgPos){var Et=dr(ft.bgPos);it.style.backgroundPosition=-Et.x+"px "+-Et.y+"px"}return this._setIconStyles(it,"icon"),it},createShadow:function(){return null}});function xo(j){return new Fs(j)}lA.Default=wA;var vA=Gn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Kt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(j){gt(this,j)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(j){j._addZoomLimit(this)},onRemove:function(j){this._removeAllTiles(),Bn(this._container),j._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Ln(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Hn(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(j){return this.options.opacity=j,this._updateOpacity(),this},setZIndex:function(j){return this.options.zIndex=j,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var j=this._clampZoom(this._map.getZoom());j!==this._tileZoom&&(this._tileZoom=j,this._updateLevels()),this._update()}return this},getEvents:function(){var j={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=tt(this._onMoveEnd,this.options.updateInterval,this)),j.move=this._onMove),this._zoomAnimated&&(j.zoomanim=this._animateZoom),j},createTile:function(){return document.createElement("div")},getTileSize:function(){var j=this.options.tileSize;return j instanceof Wt?j:new Wt(j,j)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(j){for(var it=this.getPane().children,ft=-j(-1/0,1/0),Et=0,Mt=it.length,qt;Et<Mt;Et++)qt=it[Et].style.zIndex,it[Et]!==this._container&&qt&&(ft=j(ft,+qt));isFinite(ft)&&(this.options.zIndex=ft+j(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Kt.ielt9){Nn(this._container,this.options.opacity);var j=+new Date,it=!1,ft=!1;for(var Et in this._tiles){var Mt=this._tiles[Et];if(!(!Mt.current||!Mt.loaded)){var qt=Math.min(1,(j-Mt.loaded)/200);Nn(Mt.el,qt),qt<1?it=!0:(Mt.active?ft=!0:this._onOpaqueTile(Mt),Mt.active=!0)}}ft&&!this._noPrune&&this._pruneTiles(),it&&(jt(this._fadeFrame),this._fadeFrame=Pt(this._updateOpacity,this))}},_onOpaqueTile:nt,_initContainer:function(){this._container||(this._container=gn("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var j=this._tileZoom,it=this.options.maxZoom;if(j!==void 0){for(var ft in this._levels)ft=Number(ft),this._levels[ft].el.children.length||ft===j?(this._levels[ft].el.style.zIndex=it-Math.abs(j-ft),this._onUpdateLevel(ft)):(Bn(this._levels[ft].el),this._removeTilesAtZoom(ft),this._onRemoveLevel(ft),delete this._levels[ft]);var Et=this._levels[j],Mt=this._map;return Et||(Et=this._levels[j]={},Et.el=gn("div","leaflet-tile-container leaflet-zoom-animated",this._container),Et.el.style.zIndex=it,Et.origin=Mt.project(Mt.unproject(Mt.getPixelOrigin()),j).round(),Et.zoom=j,this._setZoomTransform(Et,Mt.getCenter(),Mt.getZoom()),nt(Et.el.offsetWidth),this._onCreateLevel(Et)),this._level=Et,Et}},_onUpdateLevel:nt,_onRemoveLevel:nt,_onCreateLevel:nt,_pruneTiles:function(){if(this._map){var j,it,ft=this._map.getZoom();if(ft>this.options.maxZoom||ft<this.options.minZoom){this._removeAllTiles();return}for(j in this._tiles)it=this._tiles[j],it.retain=it.current;for(j in this._tiles)if(it=this._tiles[j],it.current&&!it.active){var Et=it.coords;this._retainParent(Et.x,Et.y,Et.z,Et.z-5)||this._retainChildren(Et.x,Et.y,Et.z,Et.z+2)}for(j in this._tiles)this._tiles[j].retain||this._removeTile(j)}},_removeTilesAtZoom:function(j){for(var it in this._tiles)this._tiles[it].coords.z===j&&this._removeTile(it)},_removeAllTiles:function(){for(var j in this._tiles)this._removeTile(j)},_invalidateAll:function(){for(var j in this._levels)Bn(this._levels[j].el),this._onRemoveLevel(Number(j)),delete this._levels[j];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(j,it,ft,Et){var Mt=Math.floor(j/2),qt=Math.floor(it/2),cr=ft-1,Sr=new Wt(+Mt,+qt);Sr.z=+cr;var Qr=this._tileCoordsToKey(Sr),Kr=this._tiles[Qr];return Kr&&Kr.active?(Kr.retain=!0,!0):(Kr&&Kr.loaded&&(Kr.retain=!0),cr>Et?this._retainParent(Mt,qt,cr,Et):!1)},_retainChildren:function(j,it,ft,Et){for(var Mt=2*j;Mt<2*j+2;Mt++)for(var qt=2*it;qt<2*it+2;qt++){var cr=new Wt(Mt,qt);cr.z=ft+1;var Sr=this._tileCoordsToKey(cr),Qr=this._tiles[Sr];if(Qr&&Qr.active){Qr.retain=!0;continue}else Qr&&Qr.loaded&&(Qr.retain=!0);ft+1<Et&&this._retainChildren(Mt,qt,ft+1,Et)}},_resetView:function(j){var it=j&&(j.pinch||j.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),it,it)},_animateZoom:function(j){this._setView(j.center,j.zoom,!0,j.noUpdate)},_clampZoom:function(j){var it=this.options;return it.minNativeZoom!==void 0&&j<it.minNativeZoom?it.minNativeZoom:it.maxNativeZoom!==void 0&&it.maxNativeZoom<j?it.maxNativeZoom:j},_setView:function(j,it,ft,Et){var Mt=Math.round(it);this.options.maxZoom!==void 0&&Mt>this.options.maxZoom||this.options.minZoom!==void 0&&Mt<this.options.minZoom?Mt=void 0:Mt=this._clampZoom(Mt);var qt=this.options.updateWhenZooming&&Mt!==this._tileZoom;(!Et||qt)&&(this._tileZoom=Mt,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),Mt!==void 0&&this._update(j),ft||this._pruneTiles(),this._noPrune=!!ft),this._setZoomTransforms(j,it)},_setZoomTransforms:function(j,it){for(var ft in this._levels)this._setZoomTransform(this._levels[ft],j,it)},_setZoomTransform:function(j,it,ft){var Et=this._map.getZoomScale(ft,j.zoom),Mt=j.origin.multiplyBy(Et).subtract(this._map._getNewPixelOrigin(it,ft)).round();Kt.any3d?Zn(j.el,Mt,Et):kn(j.el,Mt)},_resetGrid:function(){var j=this._map,it=j.options.crs,ft=this._tileSize=this.getTileSize(),Et=this._tileZoom,Mt=this._map.getPixelWorldBounds(this._tileZoom);Mt&&(this._globalTileRange=this._pxBoundsToTileRange(Mt)),this._wrapX=it.wrapLng&&!this.options.noWrap&&[Math.floor(j.project([0,it.wrapLng[0]],Et).x/ft.x),Math.ceil(j.project([0,it.wrapLng[1]],Et).x/ft.y)],this._wrapY=it.wrapLat&&!this.options.noWrap&&[Math.floor(j.project([it.wrapLat[0],0],Et).y/ft.x),Math.ceil(j.project([it.wrapLat[1],0],Et).y/ft.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(j){var it=this._map,ft=it._animatingZoom?Math.max(it._animateToZoom,it.getZoom()):it.getZoom(),Et=it.getZoomScale(ft,this._tileZoom),Mt=it.project(j,this._tileZoom).floor(),qt=it.getSize().divideBy(Et*2);return new yr(Mt.subtract(qt),Mt.add(qt))},_update:function(j){var it=this._map;if(it){var ft=this._clampZoom(it.getZoom());if(j===void 0&&(j=it.getCenter()),this._tileZoom!==void 0){var Et=this._getTiledPixelBounds(j),Mt=this._pxBoundsToTileRange(Et),qt=Mt.getCenter(),cr=[],Sr=this.options.keepBuffer,Qr=new yr(Mt.getBottomLeft().subtract([Sr,-Sr]),Mt.getTopRight().add([Sr,-Sr]));if(!(isFinite(Mt.min.x)&&isFinite(Mt.min.y)&&isFinite(Mt.max.x)&&isFinite(Mt.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Kr in this._tiles){var ln=this._tiles[Kr].coords;(ln.z!==this._tileZoom||!Qr.contains(new Wt(ln.x,ln.y)))&&(this._tiles[Kr].current=!1)}if(Math.abs(ft-this._tileZoom)>1){this._setView(j,ft);return}for(var pn=Mt.min.y;pn<=Mt.max.y;pn++)for(var wn=Mt.min.x;wn<=Mt.max.x;wn++){var Pn=new Wt(wn,pn);if(Pn.z=this._tileZoom,!!this._isValidTile(Pn)){var Rn=this._tiles[this._tileCoordsToKey(Pn)];Rn?Rn.current=!0:cr.push(Pn)}}if(cr.sort(function(On,fA){return On.distanceTo(qt)-fA.distanceTo(qt)}),cr.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Kn=document.createDocumentFragment();for(wn=0;wn<cr.length;wn++)this._addTile(cr[wn],Kn);this._level.el.appendChild(Kn)}}}},_isValidTile:function(j){var it=this._map.options.crs;if(!it.infinite){var ft=this._globalTileRange;if(!it.wrapLng&&(j.x<ft.min.x||j.x>ft.max.x)||!it.wrapLat&&(j.y<ft.min.y||j.y>ft.max.y))return!1}if(!this.options.bounds)return!0;var Et=this._tileCoordsToBounds(j);return Ur(this.options.bounds).overlaps(Et)},_keyToBounds:function(j){return this._tileCoordsToBounds(this._keyToTileCoords(j))},_tileCoordsToNwSe:function(j){var it=this._map,ft=this.getTileSize(),Et=j.scaleBy(ft),Mt=Et.add(ft),qt=it.unproject(Et,j.z),cr=it.unproject(Mt,j.z);return[qt,cr]},_tileCoordsToBounds:function(j){var it=this._tileCoordsToNwSe(j),ft=new Lr(it[0],it[1]);return this.options.noWrap||(ft=this._map.wrapLatLngBounds(ft)),ft},_tileCoordsToKey:function(j){return j.x+":"+j.y+":"+j.z},_keyToTileCoords:function(j){var it=j.split(":"),ft=new Wt(+it[0],+it[1]);return ft.z=+it[2],ft},_removeTile:function(j){var it=this._tiles[j];it&&(Bn(it.el),delete this._tiles[j],this.fire("tileunload",{tile:it.el,coords:this._keyToTileCoords(j)}))},_initTile:function(j){cn(j,"leaflet-tile");var it=this.getTileSize();j.style.width=it.x+"px",j.style.height=it.y+"px",j.onselectstart=nt,j.onmousemove=nt,Kt.ielt9&&this.options.opacity<1&&Nn(j,this.options.opacity)},_addTile:function(j,it){var ft=this._getTilePos(j),Et=this._tileCoordsToKey(j),Mt=this.createTile(this._wrapCoords(j),b(this._tileReady,this,j));this._initTile(Mt),this.createTile.length<2&&Pt(b(this._tileReady,this,j,null,Mt)),kn(Mt,ft),this._tiles[Et]={el:Mt,coords:j,current:!0},it.appendChild(Mt),this.fire("tileloadstart",{tile:Mt,coords:j})},_tileReady:function(j,it,ft){it&&this.fire("tileerror",{error:it,tile:ft,coords:j});var Et=this._tileCoordsToKey(j);ft=this._tiles[Et],ft&&(ft.loaded=+new Date,this._map._fadeAnimated?(Nn(ft.el,0),jt(this._fadeFrame),this._fadeFrame=Pt(this._updateOpacity,this)):(ft.active=!0,this._pruneTiles()),it||(cn(ft.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:ft.el,coords:j})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Kt.ielt9||!this._map._fadeAnimated?Pt(this._pruneTiles,this):setTimeout(b(this._pruneTiles,this),250)))},_getTilePos:function(j){return j.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(j){var it=new Wt(this._wrapX?rt(j.x,this._wrapX):j.x,this._wrapY?rt(j.y,this._wrapY):j.y);return it.z=j.z,it},_pxBoundsToTileRange:function(j){var it=this.getTileSize();return new yr(j.min.unscaleBy(it).floor(),j.max.unscaleBy(it).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var j in this._tiles)if(!this._tiles[j].loaded)return!1;return!0}});function So(j){return new vA(j)}var cA=vA.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(j,it){this._url=j,it=gt(this,it),it.detectRetina&&Kt.retina&&it.maxZoom>0?(it.tileSize=Math.floor(it.tileSize/2),it.zoomReverse?(it.zoomOffset--,it.minZoom=Math.min(it.maxZoom,it.minZoom+1)):(it.zoomOffset++,it.maxZoom=Math.max(it.minZoom,it.maxZoom-1)),it.minZoom=Math.max(0,it.minZoom)):it.zoomReverse?it.minZoom=Math.min(it.maxZoom,it.minZoom):it.maxZoom=Math.max(it.minZoom,it.maxZoom),typeof it.subdomains=="string"&&(it.subdomains=it.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(j,it){return this._url===j&&it===void 0&&(it=!0),this._url=j,it||this.redraw(),this},createTile:function(j,it){var ft=document.createElement("img");return mn(ft,"load",b(this._tileOnLoad,this,it,ft)),mn(ft,"error",b(this._tileOnError,this,it,ft)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(ft.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(ft.referrerPolicy=this.options.referrerPolicy),ft.alt="",ft.src=this.getTileUrl(j),ft},getTileUrl:function(j){var it={r:Kt.retina?"@2x":"",s:this._getSubdomain(j),x:j.x,y:j.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var ft=this._globalTileRange.max.y-j.y;this.options.tms&&(it.y=ft),it["-y"]=ft}return pt(this._url,g(it,this.options))},_tileOnLoad:function(j,it){Kt.ielt9?setTimeout(b(j,this,null,it),0):j(null,it)},_tileOnError:function(j,it,ft){var Et=this.options.errorTileUrl;Et&&it.getAttribute("src")!==Et&&(it.src=Et),j(ft,it)},_onTileRemove:function(j){j.tile.onload=null},_getZoomForUrl:function(){var j=this._tileZoom,it=this.options.maxZoom,ft=this.options.zoomReverse,Et=this.options.zoomOffset;return ft&&(j=it-j),j+Et},_getSubdomain:function(j){var it=Math.abs(j.x+j.y)%this.options.subdomains.length;return this.options.subdomains[it]},_abortLoading:function(){var j,it;for(j in this._tiles)if(this._tiles[j].coords.z!==this._tileZoom&&(it=this._tiles[j].el,it.onload=nt,it.onerror=nt,!it.complete)){it.src=Qt;var ft=this._tiles[j].coords;Bn(it),delete this._tiles[j],this.fire("tileabort",{tile:it,coords:ft})}},_removeTile:function(j){var it=this._tiles[j];if(it)return it.el.setAttribute("src",Qt),vA.prototype._removeTile.call(this,j)},_tileReady:function(j,it,ft){if(!(!this._map||ft&&ft.getAttribute("src")===Qt))return vA.prototype._tileReady.call(this,j,it,ft)}});function Us(j,it){return new cA(j,it)}var Qs=cA.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(j,it){this._url=j;var ft=g({},this.defaultWmsParams);for(var Et in it)Et in this.options||(ft[Et]=it[Et]);it=gt(this,it);var Mt=it.detectRetina&&Kt.retina?2:1,qt=this.getTileSize();ft.width=qt.x*Mt,ft.height=qt.y*Mt,this.wmsParams=ft},onAdd:function(j){this._crs=this.options.crs||j.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var it=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[it]=this._crs.code,cA.prototype.onAdd.call(this,j)},getTileUrl:function(j){var it=this._tileCoordsToNwSe(j),ft=this._crs,Et=Br(ft.project(it[0]),ft.project(it[1])),Mt=Et.min,qt=Et.max,cr=(this._wmsVersion>=1.3&&this._crs===ys?[Mt.y,Mt.x,qt.y,qt.x]:[Mt.x,Mt.y,qt.x,qt.y]).join(","),Sr=cA.prototype.getTileUrl.call(this,j);return Sr+_t(this.wmsParams,Sr,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+cr},setParams:function(j,it){return g(this.wmsParams,j),it||this.redraw(),this}});function Fo(j,it){return new Qs(j,it)}cA.WMS=Qs,Us.wms=Fo;var _i=Gn.extend({options:{padding:.1},initialize:function(j){gt(this,j),et(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),cn(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var j={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(j.zoomanim=this._onAnimZoom),j},_onAnimZoom:function(j){this._updateTransform(j.center,j.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(j,it){var ft=this._map.getZoomScale(it,this._zoom),Et=this._map.getSize().multiplyBy(.5+this.options.padding),Mt=this._map.project(this._center,it),qt=Et.multiplyBy(-ft).add(Mt).subtract(this._map._getNewPixelOrigin(j,it));Kt.any3d?Zn(this._container,qt,ft):kn(this._container,qt)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var j in this._layers)this._layers[j]._reset()},_onZoomEnd:function(){for(var j in this._layers)this._layers[j]._project()},_updatePaths:function(){for(var j in this._layers)this._layers[j]._update()},_update:function(){var j=this.options.padding,it=this._map.getSize(),ft=this._map.containerPointToLayerPoint(it.multiplyBy(-j)).round();this._bounds=new yr(ft,ft.add(it.multiplyBy(1+j*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Is=_i.extend({options:{tolerance:0},getEvents:function(){var j=_i.prototype.getEvents.call(this);return j.viewprereset=this._onViewPreReset,j},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){_i.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var j=this._container=document.createElement("canvas");mn(j,"mousemove",this._onMouseMove,this),mn(j,"click dblclick mousedown mouseup contextmenu",this._onClick,this),mn(j,"mouseout",this._handleMouseOut,this),j._leaflet_disable_events=!0,this._ctx=j.getContext("2d")},_destroyContainer:function(){jt(this._redrawRequest),delete this._ctx,Bn(this._container),Un(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var j;this._redrawBounds=null;for(var it in this._layers)j=this._layers[it],j._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){_i.prototype._update.call(this);var j=this._bounds,it=this._container,ft=j.getSize(),Et=Kt.retina?2:1;kn(it,j.min),it.width=Et*ft.x,it.height=Et*ft.y,it.style.width=ft.x+"px",it.style.height=ft.y+"px",Kt.retina&&this._ctx.scale(2,2),this._ctx.translate(-j.min.x,-j.min.y),this.fire("update")}},_reset:function(){_i.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(j){this._updateDashArray(j),this._layers[et(j)]=j;var it=j._order={layer:j,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=it),this._drawLast=it,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(j){this._requestRedraw(j)},_removePath:function(j){var it=j._order,ft=it.next,Et=it.prev;ft?ft.prev=Et:this._drawLast=Et,Et?Et.next=ft:this._drawFirst=ft,delete j._order,delete this._layers[et(j)],this._requestRedraw(j)},_updatePath:function(j){this._extendRedrawBounds(j),j._project(),j._update(),this._requestRedraw(j)},_updateStyle:function(j){this._updateDashArray(j),this._requestRedraw(j)},_updateDashArray:function(j){if(typeof j.options.dashArray=="string"){var it=j.options.dashArray.split(/[, ]+/),ft=[],Et,Mt;for(Mt=0;Mt<it.length;Mt++){if(Et=Number(it[Mt]),isNaN(Et))return;ft.push(Et)}j.options._dashArray=ft}else j.options._dashArray=j.options.dashArray},_requestRedraw:function(j){this._map&&(this._extendRedrawBounds(j),this._redrawRequest=this._redrawRequest||Pt(this._redraw,this))},_extendRedrawBounds:function(j){if(j._pxBounds){var it=(j.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new yr,this._redrawBounds.extend(j._pxBounds.min.subtract([it,it])),this._redrawBounds.extend(j._pxBounds.max.add([it,it]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var j=this._redrawBounds;if(j){var it=j.getSize();this._ctx.clearRect(j.min.x,j.min.y,it.x,it.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var j,it=this._redrawBounds;if(this._ctx.save(),it){var ft=it.getSize();this._ctx.beginPath(),this._ctx.rect(it.min.x,it.min.y,ft.x,ft.y),this._ctx.clip()}this._drawing=!0;for(var Et=this._drawFirst;Et;Et=Et.next)j=Et.layer,(!it||j._pxBounds&&j._pxBounds.intersects(it))&&j._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(j,it){if(this._drawing){var ft,Et,Mt,qt,cr=j._parts,Sr=cr.length,Qr=this._ctx;if(Sr){for(Qr.beginPath(),ft=0;ft<Sr;ft++){for(Et=0,Mt=cr[ft].length;Et<Mt;Et++)qt=cr[ft][Et],Qr[Et?"lineTo":"moveTo"](qt.x,qt.y);it&&Qr.closePath()}this._fillStroke(Qr,j)}}},_updateCircle:function(j){if(!(!this._drawing||j._empty())){var it=j._point,ft=this._ctx,Et=Math.max(Math.round(j._radius),1),Mt=(Math.max(Math.round(j._radiusY),1)||Et)/Et;Mt!==1&&(ft.save(),ft.scale(1,Mt)),ft.beginPath(),ft.arc(it.x,it.y/Mt,Et,0,Math.PI*2,!1),Mt!==1&&ft.restore(),this._fillStroke(ft,j)}},_fillStroke:function(j,it){var ft=it.options;ft.fill&&(j.globalAlpha=ft.fillOpacity,j.fillStyle=ft.fillColor||ft.color,j.fill(ft.fillRule||"evenodd")),ft.stroke&&ft.weight!==0&&(j.setLineDash&&j.setLineDash(it.options&&it.options._dashArray||[]),j.globalAlpha=ft.opacity,j.lineWidth=ft.weight,j.strokeStyle=ft.color,j.lineCap=ft.lineCap,j.lineJoin=ft.lineJoin,j.stroke())},_onClick:function(j){for(var it=this._map.mouseEventToLayerPoint(j),ft,Et,Mt=this._drawFirst;Mt;Mt=Mt.next)ft=Mt.layer,ft.options.interactive&&ft._containsPoint(it)&&(!(j.type==="click"||j.type==="preclick")||!this._map._draggableMoved(ft))&&(Et=ft);this._fireEvent(Et?[Et]:!1,j)},_onMouseMove:function(j){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var it=this._map.mouseEventToLayerPoint(j);this._handleMouseHover(j,it)}},_handleMouseOut:function(j){var it=this._hoveredLayer;it&&(vn(this._container,"leaflet-interactive"),this._fireEvent([it],j,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(j,it){if(!this._mouseHoverThrottled){for(var ft,Et,Mt=this._drawFirst;Mt;Mt=Mt.next)ft=Mt.layer,ft.options.interactive&&ft._containsPoint(it)&&(Et=ft);Et!==this._hoveredLayer&&(this._handleMouseOut(j),Et&&(cn(this._container,"leaflet-interactive"),this._fireEvent([Et],j,"mouseover"),this._hoveredLayer=Et)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,j),this._mouseHoverThrottled=!0,setTimeout(b(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(j,it,ft){this._map._fireDOMEvent(it,ft||it.type,j)},_bringToFront:function(j){var it=j._order;if(it){var ft=it.next,Et=it.prev;if(ft)ft.prev=Et;else return;Et?Et.next=ft:ft&&(this._drawFirst=ft),it.prev=this._drawLast,this._drawLast.next=it,it.next=null,this._drawLast=it,this._requestRedraw(j)}},_bringToBack:function(j){var it=j._order;if(it){var ft=it.next,Et=it.prev;if(Et)Et.next=ft;else return;ft?ft.prev=Et:Et&&(this._drawLast=Et),it.prev=null,it.next=this._drawFirst,this._drawFirst.prev=it,this._drawFirst=it,this._requestRedraw(j)}}});function ks(j){return Kt.canvas?new Is(j):null}var yA=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(j){return document.createElement("<lvml:"+j+' class="lvml">')}}catch{}return function(j){return document.createElement("<"+j+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Uo={_initContainer:function(){this._container=gn("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(_i.prototype._update.call(this),this.fire("update"))},_initPath:function(j){var it=j._container=yA("shape");cn(it,"leaflet-vml-shape "+(this.options.className||"")),it.coordsize="1 1",j._path=yA("path"),it.appendChild(j._path),this._updateStyle(j),this._layers[et(j)]=j},_addPath:function(j){var it=j._container;this._container.appendChild(it),j.options.interactive&&j.addInteractiveTarget(it)},_removePath:function(j){var it=j._container;Bn(it),j.removeInteractiveTarget(it),delete this._layers[et(j)]},_updateStyle:function(j){var it=j._stroke,ft=j._fill,Et=j.options,Mt=j._container;Mt.stroked=!!Et.stroke,Mt.filled=!!Et.fill,Et.stroke?(it||(it=j._stroke=yA("stroke")),Mt.appendChild(it),it.weight=Et.weight+"px",it.color=Et.color,it.opacity=Et.opacity,Et.dashArray?it.dashStyle=dt(Et.dashArray)?Et.dashArray.join(" "):Et.dashArray.replace(/( *, *)/g," "):it.dashStyle="",it.endcap=Et.lineCap.replace("butt","flat"),it.joinstyle=Et.lineJoin):it&&(Mt.removeChild(it),j._stroke=null),Et.fill?(ft||(ft=j._fill=yA("fill")),Mt.appendChild(ft),ft.color=Et.fillColor||Et.color,ft.opacity=Et.fillOpacity):ft&&(Mt.removeChild(ft),j._fill=null)},_updateCircle:function(j){var it=j._point.round(),ft=Math.round(j._radius),Et=Math.round(j._radiusY||ft);this._setPath(j,j._empty()?"M0 0":"AL "+it.x+","+it.y+" "+ft+","+Et+" 0,"+65535*360)},_setPath:function(j,it){j._path.v=it},_bringToFront:function(j){Ln(j._container)},_bringToBack:function(j){Hn(j._container)}},HA=Kt.vml?yA:nn,bA=_i.extend({_initContainer:function(){this._container=HA("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=HA("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Bn(this._container),Un(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){_i.prototype._update.call(this);var j=this._bounds,it=j.getSize(),ft=this._container;(!this._svgSize||!this._svgSize.equals(it))&&(this._svgSize=it,ft.setAttribute("width",it.x),ft.setAttribute("height",it.y)),kn(ft,j.min),ft.setAttribute("viewBox",[j.min.x,j.min.y,it.x,it.y].join(" ")),this.fire("update")}},_initPath:function(j){var it=j._path=HA("path");j.options.className&&cn(it,j.options.className),j.options.interactive&&cn(it,"leaflet-interactive"),this._updateStyle(j),this._layers[et(j)]=j},_addPath:function(j){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(j._path),j.addInteractiveTarget(j._path)},_removePath:function(j){Bn(j._path),j.removeInteractiveTarget(j._path),delete this._layers[et(j)]},_updatePath:function(j){j._project(),j._update()},_updateStyle:function(j){var it=j._path,ft=j.options;it&&(ft.stroke?(it.setAttribute("stroke",ft.color),it.setAttribute("stroke-opacity",ft.opacity),it.setAttribute("stroke-width",ft.weight),it.setAttribute("stroke-linecap",ft.lineCap),it.setAttribute("stroke-linejoin",ft.lineJoin),ft.dashArray?it.setAttribute("stroke-dasharray",ft.dashArray):it.removeAttribute("stroke-dasharray"),ft.dashOffset?it.setAttribute("stroke-dashoffset",ft.dashOffset):it.removeAttribute("stroke-dashoffset")):it.setAttribute("stroke","none"),ft.fill?(it.setAttribute("fill",ft.fillColor||ft.color),it.setAttribute("fill-opacity",ft.fillOpacity),it.setAttribute("fill-rule",ft.fillRule||"evenodd")):it.setAttribute("fill","none"))},_updatePoly:function(j,it){this._setPath(j,jr(j._parts,it))},_updateCircle:function(j){var it=j._point,ft=Math.max(Math.round(j._radius),1),Et=Math.max(Math.round(j._radiusY),1)||ft,Mt="a"+ft+","+Et+" 0 1,0 ",qt=j._empty()?"M0 0":"M"+(it.x-ft)+","+it.y+Mt+ft*2+",0 "+Mt+-ft*2+",0 ";this._setPath(j,qt)},_setPath:function(j,it){j._path.setAttribute("d",it)},_bringToFront:function(j){Ln(j._path)},_bringToBack:function(j){Hn(j._path)}});Kt.vml&&bA.include(Uo);function Ts(j){return Kt.svg||Kt.vml?new bA(j):null}yn.include({getRenderer:function(j){var it=j.options.renderer||this._getPaneRenderer(j.options.pane)||this.options.renderer||this._renderer;return it||(it=this._renderer=this._createRenderer()),this.hasLayer(it)||this.addLayer(it),it},_getPaneRenderer:function(j){if(j==="overlayPane"||j===void 0)return!1;var it=this._paneRenderers[j];return it===void 0&&(it=this._createRenderer({pane:j}),this._paneRenderers[j]=it),it},_createRenderer:function(j){return this.options.preferCanvas&&ks(j)||Ts(j)}});var Rs=uA.extend({initialize:function(j,it){uA.prototype.initialize.call(this,this._boundsToLatLngs(j),it)},setBounds:function(j){return this.setLatLngs(this._boundsToLatLngs(j))},_boundsToLatLngs:function(j){return j=Ur(j),[j.getSouthWest(),j.getNorthWest(),j.getNorthEast(),j.getSouthEast()]}});function Qo(j,it){return new Rs(j,it)}bA.create=HA,bA.pointsToPath=jr,Jn.geometryToLayer=IA,Jn.coordsToLatLng=$a,Jn.coordsToLatLngs=kA,Jn.latLngToCoords=ts,Jn.latLngsToCoords=TA,Jn.getFeature=hA,Jn.asFeature=RA,yn.mergeOptions({boxZoom:!0});var Ls=qn.extend({initialize:function(j){this._map=j,this._container=j._container,this._pane=j._panes.overlayPane,this._resetStateTimeout=0,j.on("unload",this._destroy,this)},addHooks:function(){mn(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Un(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Bn(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(j){if(!j.shiftKey||j.which!==1&&j.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),rA(),$A(),this._startPoint=this._map.mouseEventToContainerPoint(j),mn(document,{contextmenu:AA,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(j){this._moved||(this._moved=!0,this._box=gn("div","leaflet-zoom-box",this._container),cn(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(j);var it=new yr(this._point,this._startPoint),ft=it.getSize();kn(this._box,it.min),this._box.style.width=ft.x+"px",this._box.style.height=ft.y+"px"},_finish:function(){this._moved&&(Bn(this._box),vn(this._container,"leaflet-crosshair")),nA(),KA(),Un(document,{contextmenu:AA,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(j){if(!(j.which!==1&&j.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(b(this._resetState,this),0);var it=new Lr(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(it).fire("boxzoomend",{boxZoomBounds:it})}},_onKeyDown:function(j){j.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});yn.addInitHook("addHandler","boxZoom",Ls),yn.mergeOptions({doubleClickZoom:!0});var Ms=qn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(j){var it=this._map,ft=it.getZoom(),Et=it.options.zoomDelta,Mt=j.originalEvent.shiftKey?ft-Et:ft+Et;it.options.doubleClickZoom==="center"?it.setZoom(Mt):it.setZoomAround(j.containerPoint,Mt)}});yn.addInitHook("addHandler","doubleClickZoom",Ms),yn.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Ds=qn.extend({addHooks:function(){if(!this._draggable){var j=this._map;this._draggable=new tA(j._mapPane,j._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),j.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),j.on("zoomend",this._onZoomEnd,this),j.whenReady(this._onZoomEnd,this))}cn(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){vn(this._map._container,"leaflet-grab"),vn(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var j=this._map;if(j._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var it=Ur(this._map.options.maxBounds);this._offsetLimit=Br(this._map.latLngToContainerPoint(it.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(it.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;j.fire("movestart").fire("dragstart"),j.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(j){if(this._map.options.inertia){var it=this._lastTime=+new Date,ft=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(ft),this._times.push(it),this._prunePositions(it)}this._map.fire("move",j).fire("drag",j)},_prunePositions:function(j){for(;this._positions.length>1&&j-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var j=this._map.getSize().divideBy(2),it=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=it.subtract(j).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(j,it){return j-(j-it)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var j=this._draggable._newPos.subtract(this._draggable._startPos),it=this._offsetLimit;j.x<it.min.x&&(j.x=this._viscousLimit(j.x,it.min.x)),j.y<it.min.y&&(j.y=this._viscousLimit(j.y,it.min.y)),j.x>it.max.x&&(j.x=this._viscousLimit(j.x,it.max.x)),j.y>it.max.y&&(j.y=this._viscousLimit(j.y,it.max.y)),this._draggable._newPos=this._draggable._startPos.add(j)}},_onPreDragWrap:function(){var j=this._worldWidth,it=Math.round(j/2),ft=this._initialWorldOffset,Et=this._draggable._newPos.x,Mt=(Et-it+ft)%j+it-ft,qt=(Et+it+ft)%j-it-ft,cr=Math.abs(Mt+ft)<Math.abs(qt+ft)?Mt:qt;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=cr},_onDragEnd:function(j){var it=this._map,ft=it.options,Et=!ft.inertia||j.noInertia||this._times.length<2;if(it.fire("dragend",j),Et)it.fire("moveend");else{this._prunePositions(+new Date);var Mt=this._lastPos.subtract(this._positions[0]),qt=(this._lastTime-this._times[0])/1e3,cr=ft.easeLinearity,Sr=Mt.multiplyBy(cr/qt),Qr=Sr.distanceTo([0,0]),Kr=Math.min(ft.inertiaMaxSpeed,Qr),ln=Sr.multiplyBy(Kr/Qr),pn=Kr/(ft.inertiaDeceleration*cr),wn=ln.multiplyBy(-pn/2).round();!wn.x&&!wn.y?it.fire("moveend"):(wn=it._limitOffset(wn,it.options.maxBounds),Pt(function(){it.panBy(wn,{duration:pn,easeLinearity:cr,noMoveStart:!0,animate:!0})}))}}});yn.addInitHook("addHandler","dragging",Ds),yn.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Hs=qn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(j){this._map=j,this._setPanDelta(j.options.keyboardPanDelta),this._setZoomDelta(j.options.zoomDelta)},addHooks:function(){var j=this._map._container;j.tabIndex<=0&&(j.tabIndex="0"),mn(j,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Un(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var j=document.body,it=document.documentElement,ft=j.scrollTop||it.scrollTop,Et=j.scrollLeft||it.scrollLeft;this._map._container.focus(),window.scrollTo(Et,ft)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(j){var it=this._panKeys={},ft=this.keyCodes,Et,Mt;for(Et=0,Mt=ft.left.length;Et<Mt;Et++)it[ft.left[Et]]=[-1*j,0];for(Et=0,Mt=ft.right.length;Et<Mt;Et++)it[ft.right[Et]]=[j,0];for(Et=0,Mt=ft.down.length;Et<Mt;Et++)it[ft.down[Et]]=[0,j];for(Et=0,Mt=ft.up.length;Et<Mt;Et++)it[ft.up[Et]]=[0,-1*j]},_setZoomDelta:function(j){var it=this._zoomKeys={},ft=this.keyCodes,Et,Mt;for(Et=0,Mt=ft.zoomIn.length;Et<Mt;Et++)it[ft.zoomIn[Et]]=j;for(Et=0,Mt=ft.zoomOut.length;Et<Mt;Et++)it[ft.zoomOut[Et]]=-j},_addHooks:function(){mn(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Un(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(j){if(!(j.altKey||j.ctrlKey||j.metaKey)){var it=j.keyCode,ft=this._map,Et;if(it in this._panKeys){if(!ft._panAnim||!ft._panAnim._inProgress)if(Et=this._panKeys[it],j.shiftKey&&(Et=dr(Et).multiplyBy(3)),ft.options.maxBounds&&(Et=ft._limitOffset(dr(Et),ft.options.maxBounds)),ft.options.worldCopyJump){var Mt=ft.wrapLatLng(ft.unproject(ft.project(ft.getCenter()).add(Et)));ft.panTo(Mt)}else ft.panBy(Et)}else if(it in this._zoomKeys)ft.setZoom(ft.getZoom()+(j.shiftKey?3:1)*this._zoomKeys[it]);else if(it===27&&ft._popup&&ft._popup.options.closeOnEscapeKey)ft.closePopup();else return;AA(j)}}});yn.addInitHook("addHandler","keyboard",Hs),yn.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Ps=qn.extend({addHooks:function(){mn(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Un(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(j){var it=ls(j),ft=this._map.options.wheelDebounceTime;this._delta+=it,this._lastMousePos=this._map.mouseEventToContainerPoint(j),this._startTime||(this._startTime=+new Date);var Et=Math.max(ft-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(b(this._performZoom,this),Et),AA(j)},_performZoom:function(){var j=this._map,it=j.getZoom(),ft=this._map.options.zoomSnap||0;j._stop();var Et=this._delta/(this._map.options.wheelPxPerZoomLevel*4),Mt=4*Math.log(2/(1+Math.exp(-Math.abs(Et))))/Math.LN2,qt=ft?Math.ceil(Mt/ft)*ft:Mt,cr=j._limitZoom(it+(this._delta>0?qt:-qt))-it;this._delta=0,this._startTime=null,cr&&(j.options.scrollWheelZoom==="center"?j.setZoom(it+cr):j.setZoomAround(this._lastMousePos,it+cr))}});yn.addInitHook("addHandler","scrollWheelZoom",Ps);var Io=600;yn.mergeOptions({tapHold:Kt.touchNative&&Kt.safari&&Kt.mobile,tapTolerance:15});var Ns=qn.extend({addHooks:function(){mn(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Un(this._map._container,"touchstart",this._onDown,this)},_onDown:function(j){if(clearTimeout(this._holdTimeout),j.touches.length===1){var it=j.touches[0];this._startPos=this._newPos=new Wt(it.clientX,it.clientY),this._holdTimeout=setTimeout(b(function(){this._cancel(),this._isTapValid()&&(mn(document,"touchend",Dn),mn(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",it))},this),Io),mn(document,"touchend touchcancel contextmenu",this._cancel,this),mn(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function j(){Un(document,"touchend",Dn),Un(document,"touchend touchcancel",j)},_cancel:function(){clearTimeout(this._holdTimeout),Un(document,"touchend touchcancel contextmenu",this._cancel,this),Un(document,"touchmove",this._onMove,this)},_onMove:function(j){var it=j.touches[0];this._newPos=new Wt(it.clientX,it.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(j,it){var ft=new MouseEvent(j,{bubbles:!0,cancelable:!0,view:window,screenX:it.screenX,screenY:it.screenY,clientX:it.clientX,clientY:it.clientY});ft._simulated=!0,it.target.dispatchEvent(ft)}});yn.addInitHook("addHandler","tapHold",Ns),yn.mergeOptions({touchZoom:Kt.touch,bounceAtZoomLimits:!0});var Os=qn.extend({addHooks:function(){cn(this._map._container,"leaflet-touch-zoom"),mn(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){vn(this._map._container,"leaflet-touch-zoom"),Un(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(j){var it=this._map;if(!(!j.touches||j.touches.length!==2||it._animatingZoom||this._zooming)){var ft=it.mouseEventToContainerPoint(j.touches[0]),Et=it.mouseEventToContainerPoint(j.touches[1]);this._centerPoint=it.getSize()._divideBy(2),this._startLatLng=it.containerPointToLatLng(this._centerPoint),it.options.touchZoom!=="center"&&(this._pinchStartLatLng=it.containerPointToLatLng(ft.add(Et)._divideBy(2))),this._startDist=ft.distanceTo(Et),this._startZoom=it.getZoom(),this._moved=!1,this._zooming=!0,it._stop(),mn(document,"touchmove",this._onTouchMove,this),mn(document,"touchend touchcancel",this._onTouchEnd,this),Dn(j)}},_onTouchMove:function(j){if(!(!j.touches||j.touches.length!==2||!this._zooming)){var it=this._map,ft=it.mouseEventToContainerPoint(j.touches[0]),Et=it.mouseEventToContainerPoint(j.touches[1]),Mt=ft.distanceTo(Et)/this._startDist;if(this._zoom=it.getScaleZoom(Mt,this._startZoom),!it.options.bounceAtZoomLimits&&(this._zoom<it.getMinZoom()&&Mt<1||this._zoom>it.getMaxZoom()&&Mt>1)&&(this._zoom=it._limitZoom(this._zoom)),it.options.touchZoom==="center"){if(this._center=this._startLatLng,Mt===1)return}else{var qt=ft._add(Et)._divideBy(2)._subtract(this._centerPoint);if(Mt===1&&qt.x===0&&qt.y===0)return;this._center=it.unproject(it.project(this._pinchStartLatLng,this._zoom).subtract(qt),this._zoom)}this._moved||(it._moveStart(!0,!1),this._moved=!0),jt(this._animRequest);var cr=b(it._move,it,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=Pt(cr,this,!0),Dn(j)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,jt(this._animRequest),Un(document,"touchmove",this._onTouchMove,this),Un(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});yn.addInitHook("addHandler","touchZoom",Os),yn.BoxZoom=Ls,yn.DoubleClickZoom=Ms,yn.Drag=Ds,yn.Keyboard=Hs,yn.ScrollWheelZoom=Ps,yn.TapHold=Ns,yn.TouchZoom=Os,h.Bounds=yr,h.Browser=Kt,h.CRS=Ir,h.Canvas=Is,h.Circle=xa,h.CircleMarker=QA,h.Class=Xt,h.Control=zn,h.DivIcon=Fs,h.DivOverlay=Xn,h.DomEvent=Xs,h.DomUtil=Vs,h.Draggable=tA,h.Evented=ar,h.FeatureGroup=jn,h.GeoJSON=Jn,h.GridLayer=vA,h.Handler=qn,h.Icon=lA,h.ImageOverlay=LA,h.LatLng=or,h.LatLngBounds=Lr,h.Layer=Gn,h.LayerGroup=oA,h.LineUtil=so,h.Map=yn,h.Marker=UA,h.Mixin=eo,h.Path=eA,h.Point=Wt,h.PolyUtil=ro,h.Polygon=uA,h.Polyline=Wn,h.Popup=MA,h.PosAnimation=us,h.Projection=oo,h.Rectangle=Rs,h.Renderer=_i,h.SVG=bA,h.SVGOverlay=Ss,h.TileLayer=cA,h.Tooltip=DA,h.Transformation=zr,h.Util=Vt,h.VideoOverlay=xs,h.bind=b,h.bounds=Br,h.canvas=ks,h.circle=mo,h.circleMarker=po,h.control=mA,h.divIcon=xo,h.extend=g,h.featureGroup=co,h.geoJSON=Cs,h.geoJson=Bo,h.gridLayer=So,h.icon=fo,h.imageOverlay=vo,h.latLng=mr,h.latLngBounds=Ur,h.layerGroup=ho,h.map=Zs,h.marker=go,h.point=dr,h.polygon=wo,h.polyline=_o,h.popup=Eo,h.rectangle=Qo,h.setOptions=gt,h.stamp=et,h.svg=Ts,h.svgOverlay=bo,h.tileLayer=Us,h.tooltip=Co,h.transformation=kr,h.version=d,h.videoOverlay=yo;var ko=window.L;h.noConflict=function(){return window.L=ko,this},window.L=h})})(leafletSrc,leafletSrc.exports);var leafletSrcExports=leafletSrc.exports;const L$2=getDefaultExportFromCjs$1(leafletSrcExports);/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics=function(s,o){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var g in d)Object.prototype.hasOwnProperty.call(d,g)&&(h[g]=d[g])},extendStatics(s,o)};function __extends(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");extendStatics(s,o);function h(){this.constructor=s}s.prototype=o===null?Object.create(o):(h.prototype=o.prototype,new h)}var __assign=function(){return __assign=Object.assign||function(o){for(var h,d=1,g=arguments.length;d<g;d++){h=arguments[d];for(var _ in h)Object.prototype.hasOwnProperty.call(h,_)&&(o[_]=h[_])}return o},__assign.apply(this,arguments)};function __awaiter(s,o,h,d){function g(_){return _ instanceof h?_:new h(function(b){b(_)})}return new(h||(h=Promise))(function(_,b){function $(rt){try{tt(d.next(rt))}catch(nt){b(nt)}}function et(rt){try{tt(d.throw(rt))}catch(nt){b(nt)}}function tt(rt){rt.done?_(rt.value):g(rt.value).then($,et)}tt((d=d.apply(s,[])).next())})}function __generator(s,o){var h={label:0,sent:function(){if(_[0]&1)throw _[1];return _[1]},trys:[],ops:[]},d,g,_,b;return b={next:$(0),throw:$(1),return:$(2)},typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function $(tt){return function(rt){return et([tt,rt])}}function et(tt){if(d)throw new TypeError("Generator is already executing.");for(;h;)try{if(d=1,g&&(_=tt[0]&2?g.return:tt[0]?g.throw||((_=g.return)&&_.call(g),0):g.next)&&!(_=_.call(g,tt[1])).done)return _;switch(g=0,_&&(tt=[tt[0]&2,_.value]),tt[0]){case 0:case 1:_=tt;break;case 4:return h.label++,{value:tt[1],done:!1};case 5:h.label++,g=tt[1],tt=[0];continue;case 7:tt=h.ops.pop(),h.trys.pop();continue;default:if(_=h.trys,!(_=_.length>0&&_[_.length-1])&&(tt[0]===6||tt[0]===2)){h=0;continue}if(tt[0]===3&&(!_||tt[1]>_[0]&&tt[1]<_[3])){h.label=tt[1];break}if(tt[0]===6&&h.label<_[1]){h.label=_[1],_=tt;break}if(_&&h.label<_[2]){h.label=_[2],h.ops.push(tt);break}_[2]&&h.ops.pop(),h.trys.pop();continue}tt=o.call(s,h)}catch(rt){tt=[6,rt],g=0}finally{d=_=0}if(tt[0]&5)throw tt[1];return{value:tt[0]?tt[1]:void 0,done:!0}}}function __spreadArray(s,o,h){if(arguments.length===2)for(var d=0,g=o.length,_;d<g;d++)(_||!(d in o))&&(_||(_=Array.prototype.slice.call(o,0,d)),_[d]=o[d]);return s.concat(_||o)}var Bounds=function(){function s(o,h,d,g){this.left=o,this.top=h,this.width=d,this.height=g}return s.prototype.add=function(o,h,d,g){return new s(this.left+o,this.top+h,this.width+d,this.height+g)},s.fromClientRect=function(o,h){return new s(h.left+o.windowBounds.left,h.top+o.windowBounds.top,h.width,h.height)},s.fromDOMRectList=function(o,h){var d=Array.from(h).find(function(g){return g.width!==0});return d?new s(d.left+o.windowBounds.left,d.top+o.windowBounds.top,d.width,d.height):s.EMPTY},s.EMPTY=new s(0,0,0,0),s}(),parseBounds=function(s,o){return Bounds.fromClientRect(s,o.getBoundingClientRect())},parseDocumentSize=function(s){var o=s.body,h=s.documentElement;if(!o||!h)throw new Error("Unable to get document size");var d=Math.max(Math.max(o.scrollWidth,h.scrollWidth),Math.max(o.offsetWidth,h.offsetWidth),Math.max(o.clientWidth,h.clientWidth)),g=Math.max(Math.max(o.scrollHeight,h.scrollHeight),Math.max(o.offsetHeight,h.offsetHeight),Math.max(o.clientHeight,h.clientHeight));return new Bounds(0,0,d,g)},toCodePoints$1=function(s){for(var o=[],h=0,d=s.length;h<d;){var g=s.charCodeAt(h++);if(g>=55296&&g<=56319&&h<d){var _=s.charCodeAt(h++);(_&64512)===56320?o.push(((g&1023)<<10)+(_&1023)+65536):(o.push(g),h--)}else o.push(g)}return o},fromCodePoint$1=function(){for(var s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];if(String.fromCodePoint)return String.fromCodePoint.apply(String,s);var h=s.length;if(!h)return"";for(var d=[],g=-1,_="";++g<h;){var b=s[g];b<=65535?d.push(b):(b-=65536,d.push((b>>10)+55296,b%1024+56320)),(g+1===h||d.length>16384)&&(_+=String.fromCharCode.apply(String,d),d.length=0)}return _},chars$2="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup$2=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var i$2=0;i$2<chars$2.length;i$2++)lookup$2[chars$2.charCodeAt(i$2)]=i$2;var chars$1$1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup$1$1=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var i$1$1=0;i$1$1<chars$1$1.length;i$1$1++)lookup$1$1[chars$1$1.charCodeAt(i$1$1)]=i$1$1;var decode$1=function(s){var o=s.length*.75,h=s.length,d,g=0,_,b,$,et;s[s.length-1]==="="&&(o--,s[s.length-2]==="="&&o--);var tt=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(o):new Array(o),rt=Array.isArray(tt)?tt:new Uint8Array(tt);for(d=0;d<h;d+=4)_=lookup$1$1[s.charCodeAt(d)],b=lookup$1$1[s.charCodeAt(d+1)],$=lookup$1$1[s.charCodeAt(d+2)],et=lookup$1$1[s.charCodeAt(d+3)],rt[g++]=_<<2|b>>4,rt[g++]=(b&15)<<4|$>>2,rt[g++]=($&3)<<6|et&63;return tt},polyUint16Array$1=function(s){for(var o=s.length,h=[],d=0;d<o;d+=2)h.push(s[d+1]<<8|s[d]);return h},polyUint32Array$1=function(s){for(var o=s.length,h=[],d=0;d<o;d+=4)h.push(s[d+3]<<24|s[d+2]<<16|s[d+1]<<8|s[d]);return h},UTRIE2_SHIFT_2$1=5,UTRIE2_SHIFT_1$1=11,UTRIE2_INDEX_SHIFT$1=2,UTRIE2_SHIFT_1_2$1=UTRIE2_SHIFT_1$1-UTRIE2_SHIFT_2$1,UTRIE2_LSCP_INDEX_2_OFFSET$1=65536>>UTRIE2_SHIFT_2$1,UTRIE2_DATA_BLOCK_LENGTH$1=1<<UTRIE2_SHIFT_2$1,UTRIE2_DATA_MASK$1=UTRIE2_DATA_BLOCK_LENGTH$1-1,UTRIE2_LSCP_INDEX_2_LENGTH$1=1024>>UTRIE2_SHIFT_2$1,UTRIE2_INDEX_2_BMP_LENGTH$1=UTRIE2_LSCP_INDEX_2_OFFSET$1+UTRIE2_LSCP_INDEX_2_LENGTH$1,UTRIE2_UTF8_2B_INDEX_2_OFFSET$1=UTRIE2_INDEX_2_BMP_LENGTH$1,UTRIE2_UTF8_2B_INDEX_2_LENGTH$1=32,UTRIE2_INDEX_1_OFFSET$1=UTRIE2_UTF8_2B_INDEX_2_OFFSET$1+UTRIE2_UTF8_2B_INDEX_2_LENGTH$1,UTRIE2_OMITTED_BMP_INDEX_1_LENGTH$1=65536>>UTRIE2_SHIFT_1$1,UTRIE2_INDEX_2_BLOCK_LENGTH$1=1<<UTRIE2_SHIFT_1_2$1,UTRIE2_INDEX_2_MASK$1=UTRIE2_INDEX_2_BLOCK_LENGTH$1-1,slice16$1=function(s,o,h){return s.slice?s.slice(o,h):new Uint16Array(Array.prototype.slice.call(s,o,h))},slice32$1=function(s,o,h){return s.slice?s.slice(o,h):new Uint32Array(Array.prototype.slice.call(s,o,h))},createTrieFromBase64$1=function(s,o){var h=decode$1(s),d=Array.isArray(h)?polyUint32Array$1(h):new Uint32Array(h),g=Array.isArray(h)?polyUint16Array$1(h):new Uint16Array(h),_=24,b=slice16$1(g,_/2,d[4]/2),$=d[5]===2?slice16$1(g,(_+d[4])/2):slice32$1(d,Math.ceil((_+d[4])/4));return new Trie$1(d[0],d[1],d[2],d[3],b,$)},Trie$1=function(){function s(o,h,d,g,_,b){this.initialValue=o,this.errorValue=h,this.highStart=d,this.highValueIndex=g,this.index=_,this.data=b}return s.prototype.get=function(o){var h;if(o>=0){if(o<55296||o>56319&&o<=65535)return h=this.index[o>>UTRIE2_SHIFT_2$1],h=(h<<UTRIE2_INDEX_SHIFT$1)+(o&UTRIE2_DATA_MASK$1),this.data[h];if(o<=65535)return h=this.index[UTRIE2_LSCP_INDEX_2_OFFSET$1+(o-55296>>UTRIE2_SHIFT_2$1)],h=(h<<UTRIE2_INDEX_SHIFT$1)+(o&UTRIE2_DATA_MASK$1),this.data[h];if(o<this.highStart)return h=UTRIE2_INDEX_1_OFFSET$1-UTRIE2_OMITTED_BMP_INDEX_1_LENGTH$1+(o>>UTRIE2_SHIFT_1$1),h=this.index[h],h+=o>>UTRIE2_SHIFT_2$1&UTRIE2_INDEX_2_MASK$1,h=this.index[h],h=(h<<UTRIE2_INDEX_SHIFT$1)+(o&UTRIE2_DATA_MASK$1),this.data[h];if(o<=1114111)return this.data[this.highValueIndex]}return this.errorValue},s}(),chars$3="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup$3=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var i$3=0;i$3<chars$3.length;i$3++)lookup$3[chars$3.charCodeAt(i$3)]=i$3;var base64$1="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",LETTER_NUMBER_MODIFIER=50,BK=1,CR$1=2,LF$1=3,CM=4,NL=5,WJ=7,ZW=8,GL=9,SP=10,ZWJ$1=11,B2=12,BA=13,BB=14,HY=15,CB=16,CL=17,CP=18,EX=19,IN=20,NS=21,OP=22,QU=23,IS=24,NU=25,PO=26,PR=27,SY=28,AI=29,AL=30,CJ=31,EB=32,EM=33,H2=34,H3=35,HL=36,ID=37,JL=38,JV=39,JT=40,RI$1=41,SA=42,XX=43,ea_OP=[9001,65288],BREAK_MANDATORY="!",BREAK_NOT_ALLOWED$1="",BREAK_ALLOWED$1="",UnicodeTrie$1=createTrieFromBase64$1(base64$1),ALPHABETICS=[AL,HL],HARD_LINE_BREAKS=[BK,CR$1,LF$1,NL],SPACE$1=[SP,ZW],PREFIX_POSTFIX=[PR,PO],LINE_BREAKS=HARD_LINE_BREAKS.concat(SPACE$1),KOREAN_SYLLABLE_BLOCK=[JL,JV,JT,H2,H3],HYPHEN=[HY,BA],codePointsToCharacterClasses=function(s,o){o===void 0&&(o="strict");var h=[],d=[],g=[];return s.forEach(function(_,b){var $=UnicodeTrie$1.get(_);if($>LETTER_NUMBER_MODIFIER?(g.push(!0),$-=LETTER_NUMBER_MODIFIER):g.push(!1),["normal","auto","loose"].indexOf(o)!==-1&&[8208,8211,12316,12448].indexOf(_)!==-1)return d.push(b),h.push(CB);if($===CM||$===ZWJ$1){if(b===0)return d.push(b),h.push(AL);var et=h[b-1];return LINE_BREAKS.indexOf(et)===-1?(d.push(d[b-1]),h.push(et)):(d.push(b),h.push(AL))}if(d.push(b),$===CJ)return h.push(o==="strict"?NS:ID);if($===SA||$===AI)return h.push(AL);if($===XX)return _>=131072&&_<=196605||_>=196608&&_<=262141?h.push(ID):h.push(AL);h.push($)}),[d,h,g]},isAdjacentWithSpaceIgnored=function(s,o,h,d){var g=d[h];if(Array.isArray(s)?s.indexOf(g)!==-1:s===g)for(var _=h;_<=d.length;){_++;var b=d[_];if(b===o)return!0;if(b!==SP)break}if(g===SP)for(var _=h;_>0;){_--;var $=d[_];if(Array.isArray(s)?s.indexOf($)!==-1:s===$)for(var et=h;et<=d.length;){et++;var b=d[et];if(b===o)return!0;if(b!==SP)break}if($!==SP)break}return!1},previousNonSpaceClassType=function(s,o){for(var h=s;h>=0;){var d=o[h];if(d===SP)h--;else return d}return 0},_lineBreakAtIndex=function(s,o,h,d,g){if(h[d]===0)return BREAK_NOT_ALLOWED$1;var _=d-1;if(Array.isArray(g)&&g[_]===!0)return BREAK_NOT_ALLOWED$1;var b=_-1,$=_+1,et=o[_],tt=b>=0?o[b]:0,rt=o[$];if(et===CR$1&&rt===LF$1)return BREAK_NOT_ALLOWED$1;if(HARD_LINE_BREAKS.indexOf(et)!==-1)return BREAK_MANDATORY;if(HARD_LINE_BREAKS.indexOf(rt)!==-1||SPACE$1.indexOf(rt)!==-1)return BREAK_NOT_ALLOWED$1;if(previousNonSpaceClassType(_,o)===ZW)return BREAK_ALLOWED$1;if(UnicodeTrie$1.get(s[_])===ZWJ$1||(et===EB||et===EM)&&UnicodeTrie$1.get(s[$])===ZWJ$1||et===WJ||rt===WJ||et===GL||[SP,BA,HY].indexOf(et)===-1&&rt===GL||[CL,CP,EX,IS,SY].indexOf(rt)!==-1||previousNonSpaceClassType(_,o)===OP||isAdjacentWithSpaceIgnored(QU,OP,_,o)||isAdjacentWithSpaceIgnored([CL,CP],NS,_,o)||isAdjacentWithSpaceIgnored(B2,B2,_,o))return BREAK_NOT_ALLOWED$1;if(et===SP)return BREAK_ALLOWED$1;if(et===QU||rt===QU)return BREAK_NOT_ALLOWED$1;if(rt===CB||et===CB)return BREAK_ALLOWED$1;if([BA,HY,NS].indexOf(rt)!==-1||et===BB||tt===HL&&HYPHEN.indexOf(et)!==-1||et===SY&&rt===HL||rt===IN||ALPHABETICS.indexOf(rt)!==-1&&et===NU||ALPHABETICS.indexOf(et)!==-1&&rt===NU||et===PR&&[ID,EB,EM].indexOf(rt)!==-1||[ID,EB,EM].indexOf(et)!==-1&&rt===PO||ALPHABETICS.indexOf(et)!==-1&&PREFIX_POSTFIX.indexOf(rt)!==-1||PREFIX_POSTFIX.indexOf(et)!==-1&&ALPHABETICS.indexOf(rt)!==-1||[PR,PO].indexOf(et)!==-1&&(rt===NU||[OP,HY].indexOf(rt)!==-1&&o[$+1]===NU)||[OP,HY].indexOf(et)!==-1&&rt===NU||et===NU&&[NU,SY,IS].indexOf(rt)!==-1)return BREAK_NOT_ALLOWED$1;if([NU,SY,IS,CL,CP].indexOf(rt)!==-1)for(var nt=_;nt>=0;){var At=o[nt];if(At===NU)return BREAK_NOT_ALLOWED$1;if([SY,IS].indexOf(At)!==-1)nt--;else break}if([PR,PO].indexOf(rt)!==-1)for(var nt=[CL,CP].indexOf(et)!==-1?b:_;nt>=0;){var At=o[nt];if(At===NU)return BREAK_NOT_ALLOWED$1;if([SY,IS].indexOf(At)!==-1)nt--;else break}if(JL===et&&[JL,JV,H2,H3].indexOf(rt)!==-1||[JV,H2].indexOf(et)!==-1&&[JV,JT].indexOf(rt)!==-1||[JT,H3].indexOf(et)!==-1&&rt===JT||KOREAN_SYLLABLE_BLOCK.indexOf(et)!==-1&&[IN,PO].indexOf(rt)!==-1||KOREAN_SYLLABLE_BLOCK.indexOf(rt)!==-1&&et===PR||ALPHABETICS.indexOf(et)!==-1&&ALPHABETICS.indexOf(rt)!==-1||et===IS&&ALPHABETICS.indexOf(rt)!==-1||ALPHABETICS.concat(NU).indexOf(et)!==-1&&rt===OP&&ea_OP.indexOf(s[$])===-1||ALPHABETICS.concat(NU).indexOf(rt)!==-1&&et===CP)return BREAK_NOT_ALLOWED$1;if(et===RI$1&&rt===RI$1){for(var at=h[_],lt=1;at>0&&(at--,o[at]===RI$1);)lt++;if(lt%2!==0)return BREAK_NOT_ALLOWED$1}return et===EB&&rt===EM?BREAK_NOT_ALLOWED$1:BREAK_ALLOWED$1},cssFormattedClasses=function(s,o){o||(o={lineBreak:"normal",wordBreak:"normal"});var h=codePointsToCharacterClasses(s,o.lineBreak),d=h[0],g=h[1],_=h[2];(o.wordBreak==="break-all"||o.wordBreak==="break-word")&&(g=g.map(function($){return[NU,AL,SA].indexOf($)!==-1?ID:$}));var b=o.wordBreak==="keep-all"?_.map(function($,et){return $&&s[et]>=19968&&s[et]<=40959}):void 0;return[d,g,b]},Break=function(){function s(o,h,d,g){this.codePoints=o,this.required=h===BREAK_MANDATORY,this.start=d,this.end=g}return s.prototype.slice=function(){return fromCodePoint$1.apply(void 0,this.codePoints.slice(this.start,this.end))},s}(),LineBreaker=function(s,o){var h=toCodePoints$1(s),d=cssFormattedClasses(h,o),g=d[0],_=d[1],b=d[2],$=h.length,et=0,tt=0;return{next:function(){if(tt>=$)return{done:!0,value:null};for(var rt=BREAK_NOT_ALLOWED$1;tt<$&&(rt=_lineBreakAtIndex(h,_,g,++tt,b))===BREAK_NOT_ALLOWED$1;);if(rt!==BREAK_NOT_ALLOWED$1||tt===$){var nt=new Break(h,rt,et,tt);return et=tt,{value:nt,done:!1}}return{done:!0,value:null}}}},FLAG_UNRESTRICTED=1,FLAG_ID=2,FLAG_INTEGER=4,FLAG_NUMBER=8,LINE_FEED=10,SOLIDUS=47,REVERSE_SOLIDUS=92,CHARACTER_TABULATION=9,SPACE=32,QUOTATION_MARK=34,EQUALS_SIGN=61,NUMBER_SIGN=35,DOLLAR_SIGN=36,PERCENTAGE_SIGN=37,APOSTROPHE=39,LEFT_PARENTHESIS=40,RIGHT_PARENTHESIS=41,LOW_LINE=95,HYPHEN_MINUS=45,EXCLAMATION_MARK=33,LESS_THAN_SIGN=60,GREATER_THAN_SIGN=62,COMMERCIAL_AT=64,LEFT_SQUARE_BRACKET=91,RIGHT_SQUARE_BRACKET=93,CIRCUMFLEX_ACCENT=61,LEFT_CURLY_BRACKET=123,QUESTION_MARK=63,RIGHT_CURLY_BRACKET=125,VERTICAL_LINE=124,TILDE=126,CONTROL=128,REPLACEMENT_CHARACTER=65533,ASTERISK=42,PLUS_SIGN=43,COMMA=44,COLON=58,SEMICOLON=59,FULL_STOP=46,NULL=0,BACKSPACE=8,LINE_TABULATION=11,SHIFT_OUT=14,INFORMATION_SEPARATOR_ONE=31,DELETE=127,EOF=-1,ZERO=48,a=97,e=101,f=102,u=117,z=122,A=65,E=69,F=70,U=85,Z=90,isDigit=function(s){return s>=ZERO&&s<=57},isSurrogateCodePoint=function(s){return s>=55296&&s<=57343},isHex=function(s){return isDigit(s)||s>=A&&s<=F||s>=a&&s<=f},isLowerCaseLetter=function(s){return s>=a&&s<=z},isUpperCaseLetter=function(s){return s>=A&&s<=Z},isLetter=function(s){return isLowerCaseLetter(s)||isUpperCaseLetter(s)},isNonASCIICodePoint=function(s){return s>=CONTROL},isWhiteSpace=function(s){return s===LINE_FEED||s===CHARACTER_TABULATION||s===SPACE},isNameStartCodePoint=function(s){return isLetter(s)||isNonASCIICodePoint(s)||s===LOW_LINE},isNameCodePoint=function(s){return isNameStartCodePoint(s)||isDigit(s)||s===HYPHEN_MINUS},isNonPrintableCodePoint=function(s){return s>=NULL&&s<=BACKSPACE||s===LINE_TABULATION||s>=SHIFT_OUT&&s<=INFORMATION_SEPARATOR_ONE||s===DELETE},isValidEscape=function(s,o){return s!==REVERSE_SOLIDUS?!1:o!==LINE_FEED},isIdentifierStart=function(s,o,h){return s===HYPHEN_MINUS?isNameStartCodePoint(o)||isValidEscape(o,h):isNameStartCodePoint(s)?!0:!!(s===REVERSE_SOLIDUS&&isValidEscape(s,o))},isNumberStart=function(s,o,h){return s===PLUS_SIGN||s===HYPHEN_MINUS?isDigit(o)?!0:o===FULL_STOP&&isDigit(h):isDigit(s===FULL_STOP?o:s)},stringToNumber=function(s){var o=0,h=1;(s[o]===PLUS_SIGN||s[o]===HYPHEN_MINUS)&&(s[o]===HYPHEN_MINUS&&(h=-1),o++);for(var d=[];isDigit(s[o]);)d.push(s[o++]);var g=d.length?parseInt(fromCodePoint$1.apply(void 0,d),10):0;s[o]===FULL_STOP&&o++;for(var _=[];isDigit(s[o]);)_.push(s[o++]);var b=_.length,$=b?parseInt(fromCodePoint$1.apply(void 0,_),10):0;(s[o]===E||s[o]===e)&&o++;var et=1;(s[o]===PLUS_SIGN||s[o]===HYPHEN_MINUS)&&(s[o]===HYPHEN_MINUS&&(et=-1),o++);for(var tt=[];isDigit(s[o]);)tt.push(s[o++]);var rt=tt.length?parseInt(fromCodePoint$1.apply(void 0,tt),10):0;return h*(g+$*Math.pow(10,-b))*Math.pow(10,et*rt)},LEFT_PARENTHESIS_TOKEN={type:2},RIGHT_PARENTHESIS_TOKEN={type:3},COMMA_TOKEN={type:4},SUFFIX_MATCH_TOKEN={type:13},PREFIX_MATCH_TOKEN={type:8},COLUMN_TOKEN={type:21},DASH_MATCH_TOKEN={type:9},INCLUDE_MATCH_TOKEN={type:10},LEFT_CURLY_BRACKET_TOKEN={type:11},RIGHT_CURLY_BRACKET_TOKEN={type:12},SUBSTRING_MATCH_TOKEN={type:14},BAD_URL_TOKEN={type:23},BAD_STRING_TOKEN={type:1},CDO_TOKEN={type:25},CDC_TOKEN={type:24},COLON_TOKEN={type:26},SEMICOLON_TOKEN={type:27},LEFT_SQUARE_BRACKET_TOKEN={type:28},RIGHT_SQUARE_BRACKET_TOKEN={type:29},WHITESPACE_TOKEN={type:31},EOF_TOKEN={type:32},Tokenizer=function(){function s(){this._value=[]}return s.prototype.write=function(o){this._value=this._value.concat(toCodePoints$1(o))},s.prototype.read=function(){for(var o=[],h=this.consumeToken();h!==EOF_TOKEN;)o.push(h),h=this.consumeToken();return o},s.prototype.consumeToken=function(){var o=this.consumeCodePoint();switch(o){case QUOTATION_MARK:return this.consumeStringToken(QUOTATION_MARK);case NUMBER_SIGN:var h=this.peekCodePoint(0),d=this.peekCodePoint(1),g=this.peekCodePoint(2);if(isNameCodePoint(h)||isValidEscape(d,g)){var _=isIdentifierStart(h,d,g)?FLAG_ID:FLAG_UNRESTRICTED,b=this.consumeName();return{type:5,value:b,flags:_}}break;case DOLLAR_SIGN:if(this.peekCodePoint(0)===EQUALS_SIGN)return this.consumeCodePoint(),SUFFIX_MATCH_TOKEN;break;case APOSTROPHE:return this.consumeStringToken(APOSTROPHE);case LEFT_PARENTHESIS:return LEFT_PARENTHESIS_TOKEN;case RIGHT_PARENTHESIS:return RIGHT_PARENTHESIS_TOKEN;case ASTERISK:if(this.peekCodePoint(0)===EQUALS_SIGN)return this.consumeCodePoint(),SUBSTRING_MATCH_TOKEN;break;case PLUS_SIGN:if(isNumberStart(o,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(o),this.consumeNumericToken();break;case COMMA:return COMMA_TOKEN;case HYPHEN_MINUS:var $=o,et=this.peekCodePoint(0),tt=this.peekCodePoint(1);if(isNumberStart($,et,tt))return this.reconsumeCodePoint(o),this.consumeNumericToken();if(isIdentifierStart($,et,tt))return this.reconsumeCodePoint(o),this.consumeIdentLikeToken();if(et===HYPHEN_MINUS&&tt===GREATER_THAN_SIGN)return this.consumeCodePoint(),this.consumeCodePoint(),CDC_TOKEN;break;case FULL_STOP:if(isNumberStart(o,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(o),this.consumeNumericToken();break;case SOLIDUS:if(this.peekCodePoint(0)===ASTERISK)for(this.consumeCodePoint();;){var rt=this.consumeCodePoint();if(rt===ASTERISK&&(rt=this.consumeCodePoint(),rt===SOLIDUS))return this.consumeToken();if(rt===EOF)return this.consumeToken()}break;case COLON:return COLON_TOKEN;case SEMICOLON:return SEMICOLON_TOKEN;case LESS_THAN_SIGN:if(this.peekCodePoint(0)===EXCLAMATION_MARK&&this.peekCodePoint(1)===HYPHEN_MINUS&&this.peekCodePoint(2)===HYPHEN_MINUS)return this.consumeCodePoint(),this.consumeCodePoint(),CDO_TOKEN;break;case COMMERCIAL_AT:var nt=this.peekCodePoint(0),At=this.peekCodePoint(1),at=this.peekCodePoint(2);if(isIdentifierStart(nt,At,at)){var b=this.consumeName();return{type:7,value:b}}break;case LEFT_SQUARE_BRACKET:return LEFT_SQUARE_BRACKET_TOKEN;case REVERSE_SOLIDUS:if(isValidEscape(o,this.peekCodePoint(0)))return this.reconsumeCodePoint(o),this.consumeIdentLikeToken();break;case RIGHT_SQUARE_BRACKET:return RIGHT_SQUARE_BRACKET_TOKEN;case CIRCUMFLEX_ACCENT:if(this.peekCodePoint(0)===EQUALS_SIGN)return this.consumeCodePoint(),PREFIX_MATCH_TOKEN;break;case LEFT_CURLY_BRACKET:return LEFT_CURLY_BRACKET_TOKEN;case RIGHT_CURLY_BRACKET:return RIGHT_CURLY_BRACKET_TOKEN;case u:case U:var lt=this.peekCodePoint(0),gt=this.peekCodePoint(1);return lt===PLUS_SIGN&&(isHex(gt)||gt===QUESTION_MARK)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(o),this.consumeIdentLikeToken();case VERTICAL_LINE:if(this.peekCodePoint(0)===EQUALS_SIGN)return this.consumeCodePoint(),DASH_MATCH_TOKEN;if(this.peekCodePoint(0)===VERTICAL_LINE)return this.consumeCodePoint(),COLUMN_TOKEN;break;case TILDE:if(this.peekCodePoint(0)===EQUALS_SIGN)return this.consumeCodePoint(),INCLUDE_MATCH_TOKEN;break;case EOF:return EOF_TOKEN}return isWhiteSpace(o)?(this.consumeWhiteSpace(),WHITESPACE_TOKEN):isDigit(o)?(this.reconsumeCodePoint(o),this.consumeNumericToken()):isNameStartCodePoint(o)?(this.reconsumeCodePoint(o),this.consumeIdentLikeToken()):{type:6,value:fromCodePoint$1(o)}},s.prototype.consumeCodePoint=function(){var o=this._value.shift();return typeof o>"u"?-1:o},s.prototype.reconsumeCodePoint=function(o){this._value.unshift(o)},s.prototype.peekCodePoint=function(o){return o>=this._value.length?-1:this._value[o]},s.prototype.consumeUnicodeRangeToken=function(){for(var o=[],h=this.consumeCodePoint();isHex(h)&&o.length<6;)o.push(h),h=this.consumeCodePoint();for(var d=!1;h===QUESTION_MARK&&o.length<6;)o.push(h),h=this.consumeCodePoint(),d=!0;if(d){var g=parseInt(fromCodePoint$1.apply(void 0,o.map(function(et){return et===QUESTION_MARK?ZERO:et})),16),_=parseInt(fromCodePoint$1.apply(void 0,o.map(function(et){return et===QUESTION_MARK?F:et})),16);return{type:30,start:g,end:_}}var b=parseInt(fromCodePoint$1.apply(void 0,o),16);if(this.peekCodePoint(0)===HYPHEN_MINUS&&isHex(this.peekCodePoint(1))){this.consumeCodePoint(),h=this.consumeCodePoint();for(var $=[];isHex(h)&&$.length<6;)$.push(h),h=this.consumeCodePoint();var _=parseInt(fromCodePoint$1.apply(void 0,$),16);return{type:30,start:b,end:_}}else return{type:30,start:b,end:b}},s.prototype.consumeIdentLikeToken=function(){var o=this.consumeName();return o.toLowerCase()==="url"&&this.peekCodePoint(0)===LEFT_PARENTHESIS?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===LEFT_PARENTHESIS?(this.consumeCodePoint(),{type:19,value:o}):{type:20,value:o}},s.prototype.consumeUrlToken=function(){var o=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===EOF)return{type:22,value:""};var h=this.peekCodePoint(0);if(h===APOSTROPHE||h===QUOTATION_MARK){var d=this.consumeStringToken(this.consumeCodePoint());return d.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===EOF||this.peekCodePoint(0)===RIGHT_PARENTHESIS)?(this.consumeCodePoint(),{type:22,value:d.value}):(this.consumeBadUrlRemnants(),BAD_URL_TOKEN)}for(;;){var g=this.consumeCodePoint();if(g===EOF||g===RIGHT_PARENTHESIS)return{type:22,value:fromCodePoint$1.apply(void 0,o)};if(isWhiteSpace(g))return this.consumeWhiteSpace(),this.peekCodePoint(0)===EOF||this.peekCodePoint(0)===RIGHT_PARENTHESIS?(this.consumeCodePoint(),{type:22,value:fromCodePoint$1.apply(void 0,o)}):(this.consumeBadUrlRemnants(),BAD_URL_TOKEN);if(g===QUOTATION_MARK||g===APOSTROPHE||g===LEFT_PARENTHESIS||isNonPrintableCodePoint(g))return this.consumeBadUrlRemnants(),BAD_URL_TOKEN;if(g===REVERSE_SOLIDUS)if(isValidEscape(g,this.peekCodePoint(0)))o.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),BAD_URL_TOKEN;else o.push(g)}},s.prototype.consumeWhiteSpace=function(){for(;isWhiteSpace(this.peekCodePoint(0));)this.consumeCodePoint()},s.prototype.consumeBadUrlRemnants=function(){for(;;){var o=this.consumeCodePoint();if(o===RIGHT_PARENTHESIS||o===EOF)return;isValidEscape(o,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},s.prototype.consumeStringSlice=function(o){for(var h=5e4,d="";o>0;){var g=Math.min(h,o);d+=fromCodePoint$1.apply(void 0,this._value.splice(0,g)),o-=g}return this._value.shift(),d},s.prototype.consumeStringToken=function(o){var h="",d=0;do{var g=this._value[d];if(g===EOF||g===void 0||g===o)return h+=this.consumeStringSlice(d),{type:0,value:h};if(g===LINE_FEED)return this._value.splice(0,d),BAD_STRING_TOKEN;if(g===REVERSE_SOLIDUS){var _=this._value[d+1];_!==EOF&&_!==void 0&&(_===LINE_FEED?(h+=this.consumeStringSlice(d),d=-1,this._value.shift()):isValidEscape(g,_)&&(h+=this.consumeStringSlice(d),h+=fromCodePoint$1(this.consumeEscapedCodePoint()),d=-1))}d++}while(!0)},s.prototype.consumeNumber=function(){var o=[],h=FLAG_INTEGER,d=this.peekCodePoint(0);for((d===PLUS_SIGN||d===HYPHEN_MINUS)&&o.push(this.consumeCodePoint());isDigit(this.peekCodePoint(0));)o.push(this.consumeCodePoint());d=this.peekCodePoint(0);var g=this.peekCodePoint(1);if(d===FULL_STOP&&isDigit(g))for(o.push(this.consumeCodePoint(),this.consumeCodePoint()),h=FLAG_NUMBER;isDigit(this.peekCodePoint(0));)o.push(this.consumeCodePoint());d=this.peekCodePoint(0),g=this.peekCodePoint(1);var _=this.peekCodePoint(2);if((d===E||d===e)&&((g===PLUS_SIGN||g===HYPHEN_MINUS)&&isDigit(_)||isDigit(g)))for(o.push(this.consumeCodePoint(),this.consumeCodePoint()),h=FLAG_NUMBER;isDigit(this.peekCodePoint(0));)o.push(this.consumeCodePoint());return[stringToNumber(o),h]},s.prototype.consumeNumericToken=function(){var o=this.consumeNumber(),h=o[0],d=o[1],g=this.peekCodePoint(0),_=this.peekCodePoint(1),b=this.peekCodePoint(2);if(isIdentifierStart(g,_,b)){var $=this.consumeName();return{type:15,number:h,flags:d,unit:$}}return g===PERCENTAGE_SIGN?(this.consumeCodePoint(),{type:16,number:h,flags:d}):{type:17,number:h,flags:d}},s.prototype.consumeEscapedCodePoint=function(){var o=this.consumeCodePoint();if(isHex(o)){for(var h=fromCodePoint$1(o);isHex(this.peekCodePoint(0))&&h.length<6;)h+=fromCodePoint$1(this.consumeCodePoint());isWhiteSpace(this.peekCodePoint(0))&&this.consumeCodePoint();var d=parseInt(h,16);return d===0||isSurrogateCodePoint(d)||d>1114111?REPLACEMENT_CHARACTER:d}return o===EOF?REPLACEMENT_CHARACTER:o},s.prototype.consumeName=function(){for(var o="";;){var h=this.consumeCodePoint();if(isNameCodePoint(h))o+=fromCodePoint$1(h);else if(isValidEscape(h,this.peekCodePoint(0)))o+=fromCodePoint$1(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(h),o}},s}(),Parser=function(){function s(o){this._tokens=o}return s.create=function(o){var h=new Tokenizer;return h.write(o),new s(h.read())},s.parseValue=function(o){return s.create(o).parseComponentValue()},s.parseValues=function(o){return s.create(o).parseComponentValues()},s.prototype.parseComponentValue=function(){for(var o=this.consumeToken();o.type===31;)o=this.consumeToken();if(o.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(o);var h=this.consumeComponentValue();do o=this.consumeToken();while(o.type===31);if(o.type===32)return h;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},s.prototype.parseComponentValues=function(){for(var o=[];;){var h=this.consumeComponentValue();if(h.type===32)return o;o.push(h),o.push()}},s.prototype.consumeComponentValue=function(){var o=this.consumeToken();switch(o.type){case 11:case 28:case 2:return this.consumeSimpleBlock(o.type);case 19:return this.consumeFunction(o)}return o},s.prototype.consumeSimpleBlock=function(o){for(var h={type:o,values:[]},d=this.consumeToken();;){if(d.type===32||isEndingTokenFor(d,o))return h;this.reconsumeToken(d),h.values.push(this.consumeComponentValue()),d=this.consumeToken()}},s.prototype.consumeFunction=function(o){for(var h={name:o.value,values:[],type:18};;){var d=this.consumeToken();if(d.type===32||d.type===3)return h;this.reconsumeToken(d),h.values.push(this.consumeComponentValue())}},s.prototype.consumeToken=function(){var o=this._tokens.shift();return typeof o>"u"?EOF_TOKEN:o},s.prototype.reconsumeToken=function(o){this._tokens.unshift(o)},s}(),isDimensionToken=function(s){return s.type===15},isNumberToken=function(s){return s.type===17},isIdentToken=function(s){return s.type===20},isStringToken=function(s){return s.type===0},isIdentWithValue=function(s,o){return isIdentToken(s)&&s.value===o},nonWhiteSpace=function(s){return s.type!==31},nonFunctionArgSeparator=function(s){return s.type!==31&&s.type!==4},parseFunctionArgs=function(s){var o=[],h=[];return s.forEach(function(d){if(d.type===4){if(h.length===0)throw new Error("Error parsing function args, zero tokens for arg");o.push(h),h=[];return}d.type!==31&&h.push(d)}),h.length&&o.push(h),o},isEndingTokenFor=function(s,o){return o===11&&s.type===12||o===28&&s.type===29?!0:o===2&&s.type===3},isLength=function(s){return s.type===17||s.type===15},isLengthPercentage=function(s){return s.type===16||isLength(s)},parseLengthPercentageTuple=function(s){return s.length>1?[s[0],s[1]]:[s[0]]},ZERO_LENGTH={type:17,number:0,flags:FLAG_INTEGER},FIFTY_PERCENT={type:16,number:50,flags:FLAG_INTEGER},HUNDRED_PERCENT={type:16,number:100,flags:FLAG_INTEGER},getAbsoluteValueForTuple=function(s,o,h){var d=s[0],g=s[1];return[getAbsoluteValue(d,o),getAbsoluteValue(typeof g<"u"?g:d,h)]},getAbsoluteValue=function(s,o){if(s.type===16)return s.number/100*o;if(isDimensionToken(s))switch(s.unit){case"rem":case"em":return 16*s.number;case"px":default:return s.number}return s.number},DEG="deg",GRAD="grad",RAD="rad",TURN="turn",angle={name:"angle",parse:function(s,o){if(o.type===15)switch(o.unit){case DEG:return Math.PI*o.number/180;case GRAD:return Math.PI/200*o.number;case RAD:return o.number;case TURN:return Math.PI*2*o.number}throw new Error("Unsupported angle type")}},isAngle=function(s){return s.type===15&&(s.unit===DEG||s.unit===GRAD||s.unit===RAD||s.unit===TURN)},parseNamedSide=function(s){var o=s.filter(isIdentToken).map(function(h){return h.value}).join(" ");switch(o){case"to bottom right":case"to right bottom":case"left top":case"top left":return[ZERO_LENGTH,ZERO_LENGTH];case"to top":case"bottom":return deg(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[ZERO_LENGTH,HUNDRED_PERCENT];case"to right":case"left":return deg(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[HUNDRED_PERCENT,HUNDRED_PERCENT];case"to bottom":case"top":return deg(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[HUNDRED_PERCENT,ZERO_LENGTH];case"to left":case"right":return deg(270)}return 0},deg=function(s){return Math.PI*s/180},color$1={name:"color",parse:function(s,o){if(o.type===18){var h=SUPPORTED_COLOR_FUNCTIONS[o.name];if(typeof h>"u")throw new Error('Attempting to parse an unsupported color function "'+o.name+'"');return h(s,o.values)}if(o.type===5){if(o.value.length===3){var d=o.value.substring(0,1),g=o.value.substring(1,2),_=o.value.substring(2,3);return pack(parseInt(d+d,16),parseInt(g+g,16),parseInt(_+_,16),1)}if(o.value.length===4){var d=o.value.substring(0,1),g=o.value.substring(1,2),_=o.value.substring(2,3),b=o.value.substring(3,4);return pack(parseInt(d+d,16),parseInt(g+g,16),parseInt(_+_,16),parseInt(b+b,16)/255)}if(o.value.length===6){var d=o.value.substring(0,2),g=o.value.substring(2,4),_=o.value.substring(4,6);return pack(parseInt(d,16),parseInt(g,16),parseInt(_,16),1)}if(o.value.length===8){var d=o.value.substring(0,2),g=o.value.substring(2,4),_=o.value.substring(4,6),b=o.value.substring(6,8);return pack(parseInt(d,16),parseInt(g,16),parseInt(_,16),parseInt(b,16)/255)}}if(o.type===20){var $=COLORS[o.value.toUpperCase()];if(typeof $<"u")return $}return COLORS.TRANSPARENT}},isTransparent=function(s){return(255&s)===0},asString=function(s){var o=255&s,h=255&s>>8,d=255&s>>16,g=255&s>>24;return o<255?"rgba("+g+","+d+","+h+","+o/255+")":"rgb("+g+","+d+","+h+")"},pack=function(s,o,h,d){return(s<<24|o<<16|h<<8|Math.round(d*255)<<0)>>>0},getTokenColorValue=function(s,o){if(s.type===17)return s.number;if(s.type===16){var h=o===3?1:255;return o===3?s.number/100*h:Math.round(s.number/100*h)}return 0},rgb=function(s,o){var h=o.filter(nonFunctionArgSeparator);if(h.length===3){var d=h.map(getTokenColorValue),g=d[0],_=d[1],b=d[2];return pack(g,_,b,1)}if(h.length===4){var $=h.map(getTokenColorValue),g=$[0],_=$[1],b=$[2],et=$[3];return pack(g,_,b,et)}return 0};function hue2rgb(s,o,h){return h<0&&(h+=1),h>=1&&(h-=1),h<1/6?(o-s)*h*6+s:h<1/2?o:h<2/3?(o-s)*6*(2/3-h)+s:s}var hsl=function(s,o){var h=o.filter(nonFunctionArgSeparator),d=h[0],g=h[1],_=h[2],b=h[3],$=(d.type===17?deg(d.number):angle.parse(s,d))/(Math.PI*2),et=isLengthPercentage(g)?g.number/100:0,tt=isLengthPercentage(_)?_.number/100:0,rt=typeof b<"u"&&isLengthPercentage(b)?getAbsoluteValue(b,1):1;if(et===0)return pack(tt*255,tt*255,tt*255,1);var nt=tt<=.5?tt*(et+1):tt+et-tt*et,At=tt*2-nt,at=hue2rgb(At,nt,$+1/3),lt=hue2rgb(At,nt,$),gt=hue2rgb(At,nt,$-1/3);return pack(at*255,lt*255,gt*255,rt)},SUPPORTED_COLOR_FUNCTIONS={hsl,hsla:hsl,rgb,rgba:rgb},parseColor=function(s,o){return color$1.parse(s,Parser.create(o).parseComponentValue())},COLORS={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},backgroundClip={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(s,o){return o.map(function(h){if(isIdentToken(h))switch(h.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},backgroundColor={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},parseColorStop=function(s,o){var h=color$1.parse(s,o[0]),d=o[1];return d&&isLengthPercentage(d)?{color:h,stop:d}:{color:h,stop:null}},processColorStops=function(s,o){var h=s[0],d=s[s.length-1];h.stop===null&&(h.stop=ZERO_LENGTH),d.stop===null&&(d.stop=HUNDRED_PERCENT);for(var g=[],_=0,b=0;b<s.length;b++){var $=s[b].stop;if($!==null){var et=getAbsoluteValue($,o);et>_?g.push(et):g.push(_),_=et}else g.push(null)}for(var tt=null,b=0;b<g.length;b++){var rt=g[b];if(rt===null)tt===null&&(tt=b);else if(tt!==null){for(var nt=b-tt,At=g[tt-1],at=(rt-At)/(nt+1),lt=1;lt<=nt;lt++)g[tt+lt-1]=at*lt;tt=null}}return s.map(function(gt,_t){var ct=gt.color;return{color:ct,stop:Math.max(Math.min(1,g[_t]/o),0)}})},getAngleFromCorner=function(s,o,h){var d=o/2,g=h/2,_=getAbsoluteValue(s[0],o)-d,b=g-getAbsoluteValue(s[1],h);return(Math.atan2(b,_)+Math.PI*2)%(Math.PI*2)},calculateGradientDirection=function(s,o,h){var d=typeof s=="number"?s:getAngleFromCorner(s,o,h),g=Math.abs(o*Math.sin(d))+Math.abs(h*Math.cos(d)),_=o/2,b=h/2,$=g/2,et=Math.sin(d-Math.PI/2)*$,tt=Math.cos(d-Math.PI/2)*$;return[g,_-tt,_+tt,b-et,b+et]},distance=function(s,o){return Math.sqrt(s*s+o*o)},findCorner=function(s,o,h,d,g){var _=[[0,0],[0,o],[s,0],[s,o]];return _.reduce(function(b,$){var et=$[0],tt=$[1],rt=distance(h-et,d-tt);return(g?rt<b.optimumDistance:rt>b.optimumDistance)?{optimumCorner:$,optimumDistance:rt}:b},{optimumDistance:g?1/0:-1/0,optimumCorner:null}).optimumCorner},calculateRadius=function(s,o,h,d,g){var _=0,b=0;switch(s.size){case 0:s.shape===0?_=b=Math.min(Math.abs(o),Math.abs(o-d),Math.abs(h),Math.abs(h-g)):s.shape===1&&(_=Math.min(Math.abs(o),Math.abs(o-d)),b=Math.min(Math.abs(h),Math.abs(h-g)));break;case 2:if(s.shape===0)_=b=Math.min(distance(o,h),distance(o,h-g),distance(o-d,h),distance(o-d,h-g));else if(s.shape===1){var $=Math.min(Math.abs(h),Math.abs(h-g))/Math.min(Math.abs(o),Math.abs(o-d)),et=findCorner(d,g,o,h,!0),tt=et[0],rt=et[1];_=distance(tt-o,(rt-h)/$),b=$*_}break;case 1:s.shape===0?_=b=Math.max(Math.abs(o),Math.abs(o-d),Math.abs(h),Math.abs(h-g)):s.shape===1&&(_=Math.max(Math.abs(o),Math.abs(o-d)),b=Math.max(Math.abs(h),Math.abs(h-g)));break;case 3:if(s.shape===0)_=b=Math.max(distance(o,h),distance(o,h-g),distance(o-d,h),distance(o-d,h-g));else if(s.shape===1){var $=Math.max(Math.abs(h),Math.abs(h-g))/Math.max(Math.abs(o),Math.abs(o-d)),nt=findCorner(d,g,o,h,!1),tt=nt[0],rt=nt[1];_=distance(tt-o,(rt-h)/$),b=$*_}break}return Array.isArray(s.size)&&(_=getAbsoluteValue(s.size[0],d),b=s.size.length===2?getAbsoluteValue(s.size[1],g):_),[_,b]},linearGradient=function(s,o){var h=deg(180),d=[];return parseFunctionArgs(o).forEach(function(g,_){if(_===0){var b=g[0];if(b.type===20&&b.value==="to"){h=parseNamedSide(g);return}else if(isAngle(b)){h=angle.parse(s,b);return}}var $=parseColorStop(s,g);d.push($)}),{angle:h,stops:d,type:1}},prefixLinearGradient=function(s,o){var h=deg(180),d=[];return parseFunctionArgs(o).forEach(function(g,_){if(_===0){var b=g[0];if(b.type===20&&["top","left","right","bottom"].indexOf(b.value)!==-1){h=parseNamedSide(g);return}else if(isAngle(b)){h=(angle.parse(s,b)+deg(270))%deg(360);return}}var $=parseColorStop(s,g);d.push($)}),{angle:h,stops:d,type:1}},webkitGradient=function(s,o){var h=deg(180),d=[],g=1,_=0,b=3,$=[];return parseFunctionArgs(o).forEach(function(et,tt){var rt=et[0];if(tt===0){if(isIdentToken(rt)&&rt.value==="linear"){g=1;return}else if(isIdentToken(rt)&&rt.value==="radial"){g=2;return}}if(rt.type===18){if(rt.name==="from"){var nt=color$1.parse(s,rt.values[0]);d.push({stop:ZERO_LENGTH,color:nt})}else if(rt.name==="to"){var nt=color$1.parse(s,rt.values[0]);d.push({stop:HUNDRED_PERCENT,color:nt})}else if(rt.name==="color-stop"){var At=rt.values.filter(nonFunctionArgSeparator);if(At.length===2){var nt=color$1.parse(s,At[1]),at=At[0];isNumberToken(at)&&d.push({stop:{type:16,number:at.number*100,flags:at.flags},color:nt})}}}}),g===1?{angle:(h+deg(180))%deg(360),stops:d,type:g}:{size:b,shape:_,stops:d,position:$,type:g}},CLOSEST_SIDE="closest-side",FARTHEST_SIDE="farthest-side",CLOSEST_CORNER="closest-corner",FARTHEST_CORNER="farthest-corner",CIRCLE="circle",ELLIPSE="ellipse",COVER="cover",CONTAIN="contain",radialGradient=function(s,o){var h=0,d=3,g=[],_=[];return parseFunctionArgs(o).forEach(function(b,$){var et=!0;if($===0){var tt=!1;et=b.reduce(function(nt,At){if(tt)if(isIdentToken(At))switch(At.value){case"center":return _.push(FIFTY_PERCENT),nt;case"top":case"left":return _.push(ZERO_LENGTH),nt;case"right":case"bottom":return _.push(HUNDRED_PERCENT),nt}else(isLengthPercentage(At)||isLength(At))&&_.push(At);else if(isIdentToken(At))switch(At.value){case CIRCLE:return h=0,!1;case ELLIPSE:return h=1,!1;case"at":return tt=!0,!1;case CLOSEST_SIDE:return d=0,!1;case COVER:case FARTHEST_SIDE:return d=1,!1;case CONTAIN:case CLOSEST_CORNER:return d=2,!1;case FARTHEST_CORNER:return d=3,!1}else if(isLength(At)||isLengthPercentage(At))return Array.isArray(d)||(d=[]),d.push(At),!1;return nt},et)}if(et){var rt=parseColorStop(s,b);g.push(rt)}}),{size:d,shape:h,stops:g,position:_,type:2}},prefixRadialGradient=function(s,o){var h=0,d=3,g=[],_=[];return parseFunctionArgs(o).forEach(function(b,$){var et=!0;if($===0?et=b.reduce(function(rt,nt){if(isIdentToken(nt))switch(nt.value){case"center":return _.push(FIFTY_PERCENT),!1;case"top":case"left":return _.push(ZERO_LENGTH),!1;case"right":case"bottom":return _.push(HUNDRED_PERCENT),!1}else if(isLengthPercentage(nt)||isLength(nt))return _.push(nt),!1;return rt},et):$===1&&(et=b.reduce(function(rt,nt){if(isIdentToken(nt))switch(nt.value){case CIRCLE:return h=0,!1;case ELLIPSE:return h=1,!1;case CONTAIN:case CLOSEST_SIDE:return d=0,!1;case FARTHEST_SIDE:return d=1,!1;case CLOSEST_CORNER:return d=2,!1;case COVER:case FARTHEST_CORNER:return d=3,!1}else if(isLength(nt)||isLengthPercentage(nt))return Array.isArray(d)||(d=[]),d.push(nt),!1;return rt},et)),et){var tt=parseColorStop(s,b);g.push(tt)}}),{size:d,shape:h,stops:g,position:_,type:2}},isLinearGradient=function(s){return s.type===1},isRadialGradient=function(s){return s.type===2},image={name:"image",parse:function(s,o){if(o.type===22){var h={url:o.value,type:0};return s.cache.addImage(o.value),h}if(o.type===18){var d=SUPPORTED_IMAGE_FUNCTIONS[o.name];if(typeof d>"u")throw new Error('Attempting to parse an unsupported image function "'+o.name+'"');return d(s,o.values)}throw new Error("Unsupported image type "+o.type)}};function isSupportedImage(s){return!(s.type===20&&s.value==="none")&&(s.type!==18||!!SUPPORTED_IMAGE_FUNCTIONS[s.name])}var SUPPORTED_IMAGE_FUNCTIONS={"linear-gradient":linearGradient,"-moz-linear-gradient":prefixLinearGradient,"-ms-linear-gradient":prefixLinearGradient,"-o-linear-gradient":prefixLinearGradient,"-webkit-linear-gradient":prefixLinearGradient,"radial-gradient":radialGradient,"-moz-radial-gradient":prefixRadialGradient,"-ms-radial-gradient":prefixRadialGradient,"-o-radial-gradient":prefixRadialGradient,"-webkit-radial-gradient":prefixRadialGradient,"-webkit-gradient":webkitGradient},backgroundImage={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(s,o){if(o.length===0)return[];var h=o[0];return h.type===20&&h.value==="none"?[]:o.filter(function(d){return nonFunctionArgSeparator(d)&&isSupportedImage(d)}).map(function(d){return image.parse(s,d)})}},backgroundOrigin={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(s,o){return o.map(function(h){if(isIdentToken(h))switch(h.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},backgroundPosition={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(s,o){return parseFunctionArgs(o).map(function(h){return h.filter(isLengthPercentage)}).map(parseLengthPercentageTuple)}},backgroundRepeat={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(s,o){return parseFunctionArgs(o).map(function(h){return h.filter(isIdentToken).map(function(d){return d.value}).join(" ")}).map(parseBackgroundRepeat)}},parseBackgroundRepeat=function(s){switch(s){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},BACKGROUND_SIZE;(function(s){s.AUTO="auto",s.CONTAIN="contain",s.COVER="cover"})(BACKGROUND_SIZE||(BACKGROUND_SIZE={}));var backgroundSize={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(s,o){return parseFunctionArgs(o).map(function(h){return h.filter(isBackgroundSizeInfoToken)})}},isBackgroundSizeInfoToken=function(s){return isIdentToken(s)||isLengthPercentage(s)},borderColorForSide=function(s){return{name:"border-"+s+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},borderTopColor=borderColorForSide("top"),borderRightColor=borderColorForSide("right"),borderBottomColor=borderColorForSide("bottom"),borderLeftColor=borderColorForSide("left"),borderRadiusForSide=function(s){return{name:"border-radius-"+s,initialValue:"0 0",prefix:!1,type:1,parse:function(o,h){return parseLengthPercentageTuple(h.filter(isLengthPercentage))}}},borderTopLeftRadius=borderRadiusForSide("top-left"),borderTopRightRadius=borderRadiusForSide("top-right"),borderBottomRightRadius=borderRadiusForSide("bottom-right"),borderBottomLeftRadius=borderRadiusForSide("bottom-left"),borderStyleForSide=function(s){return{name:"border-"+s+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(o,h){switch(h){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},borderTopStyle=borderStyleForSide("top"),borderRightStyle=borderStyleForSide("right"),borderBottomStyle=borderStyleForSide("bottom"),borderLeftStyle=borderStyleForSide("left"),borderWidthForSide=function(s){return{name:"border-"+s+"-width",initialValue:"0",type:0,prefix:!1,parse:function(o,h){return isDimensionToken(h)?h.number:0}}},borderTopWidth=borderWidthForSide("top"),borderRightWidth=borderWidthForSide("right"),borderBottomWidth=borderWidthForSide("bottom"),borderLeftWidth=borderWidthForSide("left"),color={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},direction={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(s,o){switch(o){case"rtl":return 1;case"ltr":default:return 0}}},display={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(s,o){return o.filter(isIdentToken).reduce(function(h,d){return h|parseDisplayValue(d.value)},0)}},parseDisplayValue=function(s){switch(s){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},float={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(s,o){switch(o){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},letterSpacing={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(s,o){return o.type===20&&o.value==="normal"?0:o.type===17||o.type===15?o.number:0}},LINE_BREAK;(function(s){s.NORMAL="normal",s.STRICT="strict"})(LINE_BREAK||(LINE_BREAK={}));var lineBreak={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(s,o){switch(o){case"strict":return LINE_BREAK.STRICT;case"normal":default:return LINE_BREAK.NORMAL}}},lineHeight={name:"line-height",initialValue:"normal",prefix:!1,type:4},computeLineHeight=function(s,o){return isIdentToken(s)&&s.value==="normal"?1.2*o:s.type===17?o*s.number:isLengthPercentage(s)?getAbsoluteValue(s,o):o},listStyleImage={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(s,o){return o.type===20&&o.value==="none"?null:image.parse(s,o)}},listStylePosition={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(s,o){switch(o){case"inside":return 0;case"outside":default:return 1}}},listStyleType={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(s,o){switch(o){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},marginForSide=function(s){return{name:"margin-"+s,initialValue:"0",prefix:!1,type:4}},marginTop=marginForSide("top"),marginRight=marginForSide("right"),marginBottom=marginForSide("bottom"),marginLeft=marginForSide("left"),overflow={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(s,o){return o.filter(isIdentToken).map(function(h){switch(h.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},overflowWrap={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(s,o){switch(o){case"break-word":return"break-word";case"normal":default:return"normal"}}},paddingForSide=function(s){return{name:"padding-"+s,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},paddingTop=paddingForSide("top"),paddingRight=paddingForSide("right"),paddingBottom=paddingForSide("bottom"),paddingLeft=paddingForSide("left"),textAlign={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(s,o){switch(o){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},position={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(s,o){switch(o){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},textShadow={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(s,o){return o.length===1&&isIdentWithValue(o[0],"none")?[]:parseFunctionArgs(o).map(function(h){for(var d={color:COLORS.TRANSPARENT,offsetX:ZERO_LENGTH,offsetY:ZERO_LENGTH,blur:ZERO_LENGTH},g=0,_=0;_<h.length;_++){var b=h[_];isLength(b)?(g===0?d.offsetX=b:g===1?d.offsetY=b:d.blur=b,g++):d.color=color$1.parse(s,b)}return d})}},textTransform={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(s,o){switch(o){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},transform$1={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(s,o){if(o.type===20&&o.value==="none")return null;if(o.type===18){var h=SUPPORTED_TRANSFORM_FUNCTIONS[o.name];if(typeof h>"u")throw new Error('Attempting to parse an unsupported transform function "'+o.name+'"');return h(o.values)}return null}},matrix=function(s){var o=s.filter(function(h){return h.type===17}).map(function(h){return h.number});return o.length===6?o:null},matrix3d=function(s){var o=s.filter(function(et){return et.type===17}).map(function(et){return et.number}),h=o[0],d=o[1];o[2],o[3];var g=o[4],_=o[5];o[6],o[7],o[8],o[9],o[10],o[11];var b=o[12],$=o[13];return o[14],o[15],o.length===16?[h,d,g,_,b,$]:null},SUPPORTED_TRANSFORM_FUNCTIONS={matrix,matrix3d},DEFAULT_VALUE={type:16,number:50,flags:FLAG_INTEGER},DEFAULT=[DEFAULT_VALUE,DEFAULT_VALUE],transformOrigin={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(s,o){var h=o.filter(isLengthPercentage);return h.length!==2?DEFAULT:[h[0],h[1]]}},visibility={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(s,o){switch(o){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},WORD_BREAK;(function(s){s.NORMAL="normal",s.BREAK_ALL="break-all",s.KEEP_ALL="keep-all"})(WORD_BREAK||(WORD_BREAK={}));var wordBreak={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(s,o){switch(o){case"break-all":return WORD_BREAK.BREAK_ALL;case"keep-all":return WORD_BREAK.KEEP_ALL;case"normal":default:return WORD_BREAK.NORMAL}}},zIndex={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(s,o){if(o.type===20)return{auto:!0,order:0};if(isNumberToken(o))return{auto:!1,order:o.number};throw new Error("Invalid z-index number parsed")}},time={name:"time",parse:function(s,o){if(o.type===15)switch(o.unit.toLowerCase()){case"s":return 1e3*o.number;case"ms":return o.number}throw new Error("Unsupported time type")}},opacity={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(s,o){return isNumberToken(o)?o.number:1}},textDecorationColor={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},textDecorationLine={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(s,o){return o.filter(isIdentToken).map(function(h){switch(h.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(h){return h!==0})}},fontFamily={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(s,o){var h=[],d=[];return o.forEach(function(g){switch(g.type){case 20:case 0:h.push(g.value);break;case 17:h.push(g.number.toString());break;case 4:d.push(h.join(" ")),h.length=0;break}}),h.length&&d.push(h.join(" ")),d.map(function(g){return g.indexOf(" ")===-1?g:"'"+g+"'"})}},fontSize={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},fontWeight={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(s,o){if(isNumberToken(o))return o.number;if(isIdentToken(o))switch(o.value){case"bold":return 700;case"normal":default:return 400}return 400}},fontVariant={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(s,o){return o.filter(isIdentToken).map(function(h){return h.value})}},fontStyle={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(s,o){switch(o){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},contains=function(s,o){return(s&o)!==0},content={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(s,o){if(o.length===0)return[];var h=o[0];return h.type===20&&h.value==="none"?[]:o}},counterIncrement={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(s,o){if(o.length===0)return null;var h=o[0];if(h.type===20&&h.value==="none")return null;for(var d=[],g=o.filter(nonWhiteSpace),_=0;_<g.length;_++){var b=g[_],$=g[_+1];if(b.type===20){var et=$&&isNumberToken($)?$.number:1;d.push({counter:b.value,increment:et})}}return d}},counterReset={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(s,o){if(o.length===0)return[];for(var h=[],d=o.filter(nonWhiteSpace),g=0;g<d.length;g++){var _=d[g],b=d[g+1];if(isIdentToken(_)&&_.value!=="none"){var $=b&&isNumberToken(b)?b.number:0;h.push({counter:_.value,reset:$})}}return h}},duration={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(s,o){return o.filter(isDimensionToken).map(function(h){return time.parse(s,h)})}},quotes={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(s,o){if(o.length===0)return null;var h=o[0];if(h.type===20&&h.value==="none")return null;var d=[],g=o.filter(isStringToken);if(g.length%2!==0)return null;for(var _=0;_<g.length;_+=2){var b=g[_].value,$=g[_+1].value;d.push({open:b,close:$})}return d}},getQuote=function(s,o,h){if(!s)return"";var d=s[Math.min(o,s.length-1)];return d?h?d.open:d.close:""},boxShadow={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(s,o){return o.length===1&&isIdentWithValue(o[0],"none")?[]:parseFunctionArgs(o).map(function(h){for(var d={color:255,offsetX:ZERO_LENGTH,offsetY:ZERO_LENGTH,blur:ZERO_LENGTH,spread:ZERO_LENGTH,inset:!1},g=0,_=0;_<h.length;_++){var b=h[_];isIdentWithValue(b,"inset")?d.inset=!0:isLength(b)?(g===0?d.offsetX=b:g===1?d.offsetY=b:g===2?d.blur=b:d.spread=b,g++):d.color=color$1.parse(s,b)}return d})}},paintOrder={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(s,o){var h=[0,1,2],d=[];return o.filter(isIdentToken).forEach(function(g){switch(g.value){case"stroke":d.push(1);break;case"fill":d.push(0);break;case"markers":d.push(2);break}}),h.forEach(function(g){d.indexOf(g)===-1&&d.push(g)}),d}},webkitTextStrokeColor={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},webkitTextStrokeWidth={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(s,o){return isDimensionToken(o)?o.number:0}},CSSParsedDeclaration=function(){function s(o,h){var d,g;this.animationDuration=parse(o,duration,h.animationDuration),this.backgroundClip=parse(o,backgroundClip,h.backgroundClip),this.backgroundColor=parse(o,backgroundColor,h.backgroundColor),this.backgroundImage=parse(o,backgroundImage,h.backgroundImage),this.backgroundOrigin=parse(o,backgroundOrigin,h.backgroundOrigin),this.backgroundPosition=parse(o,backgroundPosition,h.backgroundPosition),this.backgroundRepeat=parse(o,backgroundRepeat,h.backgroundRepeat),this.backgroundSize=parse(o,backgroundSize,h.backgroundSize),this.borderTopColor=parse(o,borderTopColor,h.borderTopColor),this.borderRightColor=parse(o,borderRightColor,h.borderRightColor),this.borderBottomColor=parse(o,borderBottomColor,h.borderBottomColor),this.borderLeftColor=parse(o,borderLeftColor,h.borderLeftColor),this.borderTopLeftRadius=parse(o,borderTopLeftRadius,h.borderTopLeftRadius),this.borderTopRightRadius=parse(o,borderTopRightRadius,h.borderTopRightRadius),this.borderBottomRightRadius=parse(o,borderBottomRightRadius,h.borderBottomRightRadius),this.borderBottomLeftRadius=parse(o,borderBottomLeftRadius,h.borderBottomLeftRadius),this.borderTopStyle=parse(o,borderTopStyle,h.borderTopStyle),this.borderRightStyle=parse(o,borderRightStyle,h.borderRightStyle),this.borderBottomStyle=parse(o,borderBottomStyle,h.borderBottomStyle),this.borderLeftStyle=parse(o,borderLeftStyle,h.borderLeftStyle),this.borderTopWidth=parse(o,borderTopWidth,h.borderTopWidth),this.borderRightWidth=parse(o,borderRightWidth,h.borderRightWidth),this.borderBottomWidth=parse(o,borderBottomWidth,h.borderBottomWidth),this.borderLeftWidth=parse(o,borderLeftWidth,h.borderLeftWidth),this.boxShadow=parse(o,boxShadow,h.boxShadow),this.color=parse(o,color,h.color),this.direction=parse(o,direction,h.direction),this.display=parse(o,display,h.display),this.float=parse(o,float,h.cssFloat),this.fontFamily=parse(o,fontFamily,h.fontFamily),this.fontSize=parse(o,fontSize,h.fontSize),this.fontStyle=parse(o,fontStyle,h.fontStyle),this.fontVariant=parse(o,fontVariant,h.fontVariant),this.fontWeight=parse(o,fontWeight,h.fontWeight),this.letterSpacing=parse(o,letterSpacing,h.letterSpacing),this.lineBreak=parse(o,lineBreak,h.lineBreak),this.lineHeight=parse(o,lineHeight,h.lineHeight),this.listStyleImage=parse(o,listStyleImage,h.listStyleImage),this.listStylePosition=parse(o,listStylePosition,h.listStylePosition),this.listStyleType=parse(o,listStyleType,h.listStyleType),this.marginTop=parse(o,marginTop,h.marginTop),this.marginRight=parse(o,marginRight,h.marginRight),this.marginBottom=parse(o,marginBottom,h.marginBottom),this.marginLeft=parse(o,marginLeft,h.marginLeft),this.opacity=parse(o,opacity,h.opacity);var _=parse(o,overflow,h.overflow);this.overflowX=_[0],this.overflowY=_[_.length>1?1:0],this.overflowWrap=parse(o,overflowWrap,h.overflowWrap),this.paddingTop=parse(o,paddingTop,h.paddingTop),this.paddingRight=parse(o,paddingRight,h.paddingRight),this.paddingBottom=parse(o,paddingBottom,h.paddingBottom),this.paddingLeft=parse(o,paddingLeft,h.paddingLeft),this.paintOrder=parse(o,paintOrder,h.paintOrder),this.position=parse(o,position,h.position),this.textAlign=parse(o,textAlign,h.textAlign),this.textDecorationColor=parse(o,textDecorationColor,(d=h.textDecorationColor)!==null&&d!==void 0?d:h.color),this.textDecorationLine=parse(o,textDecorationLine,(g=h.textDecorationLine)!==null&&g!==void 0?g:h.textDecoration),this.textShadow=parse(o,textShadow,h.textShadow),this.textTransform=parse(o,textTransform,h.textTransform),this.transform=parse(o,transform$1,h.transform),this.transformOrigin=parse(o,transformOrigin,h.transformOrigin),this.visibility=parse(o,visibility,h.visibility),this.webkitTextStrokeColor=parse(o,webkitTextStrokeColor,h.webkitTextStrokeColor),this.webkitTextStrokeWidth=parse(o,webkitTextStrokeWidth,h.webkitTextStrokeWidth),this.wordBreak=parse(o,wordBreak,h.wordBreak),this.zIndex=parse(o,zIndex,h.zIndex)}return s.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},s.prototype.isTransparent=function(){return isTransparent(this.backgroundColor)},s.prototype.isTransformed=function(){return this.transform!==null},s.prototype.isPositioned=function(){return this.position!==0},s.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},s.prototype.isFloating=function(){return this.float!==0},s.prototype.isInlineLevel=function(){return contains(this.display,4)||contains(this.display,33554432)||contains(this.display,268435456)||contains(this.display,536870912)||contains(this.display,67108864)||contains(this.display,134217728)},s}(),CSSParsedPseudoDeclaration=function(){function s(o,h){this.content=parse(o,content,h.content),this.quotes=parse(o,quotes,h.quotes)}return s}(),CSSParsedCounterDeclaration=function(){function s(o,h){this.counterIncrement=parse(o,counterIncrement,h.counterIncrement),this.counterReset=parse(o,counterReset,h.counterReset)}return s}(),parse=function(s,o,h){var d=new Tokenizer,g=h!==null&&typeof h<"u"?h.toString():o.initialValue;d.write(g);var _=new Parser(d.read());switch(o.type){case 2:var b=_.parseComponentValue();return o.parse(s,isIdentToken(b)?b.value:o.initialValue);case 0:return o.parse(s,_.parseComponentValue());case 1:return o.parse(s,_.parseComponentValues());case 4:return _.parseComponentValue();case 3:switch(o.format){case"angle":return angle.parse(s,_.parseComponentValue());case"color":return color$1.parse(s,_.parseComponentValue());case"image":return image.parse(s,_.parseComponentValue());case"length":var $=_.parseComponentValue();return isLength($)?$:ZERO_LENGTH;case"length-percentage":var et=_.parseComponentValue();return isLengthPercentage(et)?et:ZERO_LENGTH;case"time":return time.parse(s,_.parseComponentValue())}break}},elementDebuggerAttribute="data-html2canvas-debug",getElementDebugType=function(s){var o=s.getAttribute(elementDebuggerAttribute);switch(o){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},isDebugging=function(s,o){var h=getElementDebugType(s);return h===1||o===h},ElementContainer=function(){function s(o,h){if(this.context=o,this.textNodes=[],this.elements=[],this.flags=0,isDebugging(h,3))debugger;this.styles=new CSSParsedDeclaration(o,window.getComputedStyle(h,null)),isHTMLElementNode(h)&&(this.styles.animationDuration.some(function(d){return d>0})&&(h.style.animationDuration="0s"),this.styles.transform!==null&&(h.style.transform="none")),this.bounds=parseBounds(this.context,h),isDebugging(h,4)&&(this.flags|=16)}return s}(),base64="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",chars$1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup$1=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var i$1=0;i$1<chars$1.length;i$1++)lookup$1[chars$1.charCodeAt(i$1)]=i$1;var decode=function(s){var o=s.length*.75,h=s.length,d,g=0,_,b,$,et;s[s.length-1]==="="&&(o--,s[s.length-2]==="="&&o--);var tt=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(o):new Array(o),rt=Array.isArray(tt)?tt:new Uint8Array(tt);for(d=0;d<h;d+=4)_=lookup$1[s.charCodeAt(d)],b=lookup$1[s.charCodeAt(d+1)],$=lookup$1[s.charCodeAt(d+2)],et=lookup$1[s.charCodeAt(d+3)],rt[g++]=_<<2|b>>4,rt[g++]=(b&15)<<4|$>>2,rt[g++]=($&3)<<6|et&63;return tt},polyUint16Array=function(s){for(var o=s.length,h=[],d=0;d<o;d+=2)h.push(s[d+1]<<8|s[d]);return h},polyUint32Array=function(s){for(var o=s.length,h=[],d=0;d<o;d+=4)h.push(s[d+3]<<24|s[d+2]<<16|s[d+1]<<8|s[d]);return h},UTRIE2_SHIFT_2=5,UTRIE2_SHIFT_1=11,UTRIE2_INDEX_SHIFT=2,UTRIE2_SHIFT_1_2=UTRIE2_SHIFT_1-UTRIE2_SHIFT_2,UTRIE2_LSCP_INDEX_2_OFFSET=65536>>UTRIE2_SHIFT_2,UTRIE2_DATA_BLOCK_LENGTH=1<<UTRIE2_SHIFT_2,UTRIE2_DATA_MASK=UTRIE2_DATA_BLOCK_LENGTH-1,UTRIE2_LSCP_INDEX_2_LENGTH=1024>>UTRIE2_SHIFT_2,UTRIE2_INDEX_2_BMP_LENGTH=UTRIE2_LSCP_INDEX_2_OFFSET+UTRIE2_LSCP_INDEX_2_LENGTH,UTRIE2_UTF8_2B_INDEX_2_OFFSET=UTRIE2_INDEX_2_BMP_LENGTH,UTRIE2_UTF8_2B_INDEX_2_LENGTH=32,UTRIE2_INDEX_1_OFFSET=UTRIE2_UTF8_2B_INDEX_2_OFFSET+UTRIE2_UTF8_2B_INDEX_2_LENGTH,UTRIE2_OMITTED_BMP_INDEX_1_LENGTH=65536>>UTRIE2_SHIFT_1,UTRIE2_INDEX_2_BLOCK_LENGTH=1<<UTRIE2_SHIFT_1_2,UTRIE2_INDEX_2_MASK=UTRIE2_INDEX_2_BLOCK_LENGTH-1,slice16=function(s,o,h){return s.slice?s.slice(o,h):new Uint16Array(Array.prototype.slice.call(s,o,h))},slice32=function(s,o,h){return s.slice?s.slice(o,h):new Uint32Array(Array.prototype.slice.call(s,o,h))},createTrieFromBase64=function(s,o){var h=decode(s),d=Array.isArray(h)?polyUint32Array(h):new Uint32Array(h),g=Array.isArray(h)?polyUint16Array(h):new Uint16Array(h),_=24,b=slice16(g,_/2,d[4]/2),$=d[5]===2?slice16(g,(_+d[4])/2):slice32(d,Math.ceil((_+d[4])/4));return new Trie(d[0],d[1],d[2],d[3],b,$)},Trie=function(){function s(o,h,d,g,_,b){this.initialValue=o,this.errorValue=h,this.highStart=d,this.highValueIndex=g,this.index=_,this.data=b}return s.prototype.get=function(o){var h;if(o>=0){if(o<55296||o>56319&&o<=65535)return h=this.index[o>>UTRIE2_SHIFT_2],h=(h<<UTRIE2_INDEX_SHIFT)+(o&UTRIE2_DATA_MASK),this.data[h];if(o<=65535)return h=this.index[UTRIE2_LSCP_INDEX_2_OFFSET+(o-55296>>UTRIE2_SHIFT_2)],h=(h<<UTRIE2_INDEX_SHIFT)+(o&UTRIE2_DATA_MASK),this.data[h];if(o<this.highStart)return h=UTRIE2_INDEX_1_OFFSET-UTRIE2_OMITTED_BMP_INDEX_1_LENGTH+(o>>UTRIE2_SHIFT_1),h=this.index[h],h+=o>>UTRIE2_SHIFT_2&UTRIE2_INDEX_2_MASK,h=this.index[h],h=(h<<UTRIE2_INDEX_SHIFT)+(o&UTRIE2_DATA_MASK),this.data[h];if(o<=1114111)return this.data[this.highValueIndex]}return this.errorValue},s}(),chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var i=0;i<chars.length;i++)lookup[chars.charCodeAt(i)]=i;var Prepend=1,CR=2,LF=3,Control=4,Extend=5,SpacingMark=7,L$1=8,V=9,T=10,LV=11,LVT=12,ZWJ=13,Extended_Pictographic=14,RI=15,toCodePoints=function(s){for(var o=[],h=0,d=s.length;h<d;){var g=s.charCodeAt(h++);if(g>=55296&&g<=56319&&h<d){var _=s.charCodeAt(h++);(_&64512)===56320?o.push(((g&1023)<<10)+(_&1023)+65536):(o.push(g),h--)}else o.push(g)}return o},fromCodePoint=function(){for(var s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];if(String.fromCodePoint)return String.fromCodePoint.apply(String,s);var h=s.length;if(!h)return"";for(var d=[],g=-1,_="";++g<h;){var b=s[g];b<=65535?d.push(b):(b-=65536,d.push((b>>10)+55296,b%1024+56320)),(g+1===h||d.length>16384)&&(_+=String.fromCharCode.apply(String,d),d.length=0)}return _},UnicodeTrie=createTrieFromBase64(base64),BREAK_NOT_ALLOWED="",BREAK_ALLOWED="",codePointToClass=function(s){return UnicodeTrie.get(s)},_graphemeBreakAtIndex=function(s,o,h){var d=h-2,g=o[d],_=o[h-1],b=o[h];if(_===CR&&b===LF)return BREAK_NOT_ALLOWED;if(_===CR||_===LF||_===Control||b===CR||b===LF||b===Control)return BREAK_ALLOWED;if(_===L$1&&[L$1,V,LV,LVT].indexOf(b)!==-1||(_===LV||_===V)&&(b===V||b===T)||(_===LVT||_===T)&&b===T||b===ZWJ||b===Extend||b===SpacingMark||_===Prepend)return BREAK_NOT_ALLOWED;if(_===ZWJ&&b===Extended_Pictographic){for(;g===Extend;)g=o[--d];if(g===Extended_Pictographic)return BREAK_NOT_ALLOWED}if(_===RI&&b===RI){for(var $=0;g===RI;)$++,g=o[--d];if($%2===0)return BREAK_NOT_ALLOWED}return BREAK_ALLOWED},GraphemeBreaker=function(s){var o=toCodePoints(s),h=o.length,d=0,g=0,_=o.map(codePointToClass);return{next:function(){if(d>=h)return{done:!0,value:null};for(var b=BREAK_NOT_ALLOWED;d<h&&(b=_graphemeBreakAtIndex(o,_,++d))===BREAK_NOT_ALLOWED;);if(b!==BREAK_NOT_ALLOWED||d===h){var $=fromCodePoint.apply(null,o.slice(g,d));return g=d,{value:$,done:!1}}return{done:!0,value:null}}}},splitGraphemes=function(s){for(var o=GraphemeBreaker(s),h=[],d;!(d=o.next()).done;)d.value&&h.push(d.value.slice());return h},testRangeBounds=function(s){var o=123;if(s.createRange){var h=s.createRange();if(h.getBoundingClientRect){var d=s.createElement("boundtest");d.style.height=o+"px",d.style.display="block",s.body.appendChild(d),h.selectNode(d);var g=h.getBoundingClientRect(),_=Math.round(g.height);if(s.body.removeChild(d),_===o)return!0}}return!1},testIOSLineBreak=function(s){var o=s.createElement("boundtest");o.style.width="50px",o.style.display="block",o.style.fontSize="12px",o.style.letterSpacing="0px",o.style.wordSpacing="0px",s.body.appendChild(o);var h=s.createRange();o.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var d=o.firstChild,g=toCodePoints$1(d.data).map(function(et){return fromCodePoint$1(et)}),_=0,b={},$=g.every(function(et,tt){h.setStart(d,_),h.setEnd(d,_+et.length);var rt=h.getBoundingClientRect();_+=et.length;var nt=rt.x>b.x||rt.y>b.y;return b=rt,tt===0?!0:nt});return s.body.removeChild(o),$},testCORS=function(){return typeof new Image().crossOrigin<"u"},testResponseType=function(){return typeof new XMLHttpRequest().responseType=="string"},testSVG=function(s){var o=new Image,h=s.createElement("canvas"),d=h.getContext("2d");if(!d)return!1;o.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{d.drawImage(o,0,0),h.toDataURL()}catch{return!1}return!0},isGreenPixel=function(s){return s[0]===0&&s[1]===255&&s[2]===0&&s[3]===255},testForeignObject=function(s){var o=s.createElement("canvas"),h=100;o.width=h,o.height=h;var d=o.getContext("2d");if(!d)return Promise.reject(!1);d.fillStyle="rgb(0, 255, 0)",d.fillRect(0,0,h,h);var g=new Image,_=o.toDataURL();g.src=_;var b=createForeignObjectSVG(h,h,0,0,g);return d.fillStyle="red",d.fillRect(0,0,h,h),loadSerializedSVG$1(b).then(function($){d.drawImage($,0,0);var et=d.getImageData(0,0,h,h).data;d.fillStyle="red",d.fillRect(0,0,h,h);var tt=s.createElement("div");return tt.style.backgroundImage="url("+_+")",tt.style.height=h+"px",isGreenPixel(et)?loadSerializedSVG$1(createForeignObjectSVG(h,h,0,0,tt)):Promise.reject(!1)}).then(function($){return d.drawImage($,0,0),isGreenPixel(d.getImageData(0,0,h,h).data)}).catch(function(){return!1})},createForeignObjectSVG=function(s,o,h,d,g){var _="http://www.w3.org/2000/svg",b=document.createElementNS(_,"svg"),$=document.createElementNS(_,"foreignObject");return b.setAttributeNS(null,"width",s.toString()),b.setAttributeNS(null,"height",o.toString()),$.setAttributeNS(null,"width","100%"),$.setAttributeNS(null,"height","100%"),$.setAttributeNS(null,"x",h.toString()),$.setAttributeNS(null,"y",d.toString()),$.setAttributeNS(null,"externalResourcesRequired","true"),b.appendChild($),$.appendChild(g),b},loadSerializedSVG$1=function(s){return new Promise(function(o,h){var d=new Image;d.onload=function(){return o(d)},d.onerror=h,d.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(s))})},FEATURES={get SUPPORT_RANGE_BOUNDS(){var s=testRangeBounds(document);return Object.defineProperty(FEATURES,"SUPPORT_RANGE_BOUNDS",{value:s}),s},get SUPPORT_WORD_BREAKING(){var s=FEATURES.SUPPORT_RANGE_BOUNDS&&testIOSLineBreak(document);return Object.defineProperty(FEATURES,"SUPPORT_WORD_BREAKING",{value:s}),s},get SUPPORT_SVG_DRAWING(){var s=testSVG(document);return Object.defineProperty(FEATURES,"SUPPORT_SVG_DRAWING",{value:s}),s},get SUPPORT_FOREIGNOBJECT_DRAWING(){var s=typeof Array.from=="function"&&typeof window.fetch=="function"?testForeignObject(document):Promise.resolve(!1);return Object.defineProperty(FEATURES,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:s}),s},get SUPPORT_CORS_IMAGES(){var s=testCORS();return Object.defineProperty(FEATURES,"SUPPORT_CORS_IMAGES",{value:s}),s},get SUPPORT_RESPONSE_TYPE(){var s=testResponseType();return Object.defineProperty(FEATURES,"SUPPORT_RESPONSE_TYPE",{value:s}),s},get SUPPORT_CORS_XHR(){var s="withCredentials"in new XMLHttpRequest;return Object.defineProperty(FEATURES,"SUPPORT_CORS_XHR",{value:s}),s},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var s=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(FEATURES,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:s}),s}},TextBounds=function(){function s(o,h){this.text=o,this.bounds=h}return s}(),parseTextBounds=function(s,o,h,d){var g=breakText(o,h),_=[],b=0;return g.forEach(function($){if(h.textDecorationLine.length||$.trim().length>0)if(FEATURES.SUPPORT_RANGE_BOUNDS){var et=createRange(d,b,$.length).getClientRects();if(et.length>1){var tt=segmentGraphemes($),rt=0;tt.forEach(function(At){_.push(new TextBounds(At,Bounds.fromDOMRectList(s,createRange(d,rt+b,At.length).getClientRects()))),rt+=At.length})}else _.push(new TextBounds($,Bounds.fromDOMRectList(s,et)))}else{var nt=d.splitText($.length);_.push(new TextBounds($,getWrapperBounds(s,d))),d=nt}else FEATURES.SUPPORT_RANGE_BOUNDS||(d=d.splitText($.length));b+=$.length}),_},getWrapperBounds=function(s,o){var h=o.ownerDocument;if(h){var d=h.createElement("html2canvaswrapper");d.appendChild(o.cloneNode(!0));var g=o.parentNode;if(g){g.replaceChild(d,o);var _=parseBounds(s,d);return d.firstChild&&g.replaceChild(d.firstChild,d),_}}return Bounds.EMPTY},createRange=function(s,o,h){var d=s.ownerDocument;if(!d)throw new Error("Node has no owner document");var g=d.createRange();return g.setStart(s,o),g.setEnd(s,o+h),g},segmentGraphemes=function(s){if(FEATURES.SUPPORT_NATIVE_TEXT_SEGMENTATION){var o=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(o.segment(s)).map(function(h){return h.segment})}return splitGraphemes(s)},segmentWords=function(s,o){if(FEATURES.SUPPORT_NATIVE_TEXT_SEGMENTATION){var h=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(h.segment(s)).map(function(d){return d.segment})}return breakWords(s,o)},breakText=function(s,o){return o.letterSpacing!==0?segmentGraphemes(s):segmentWords(s,o)},wordSeparators=[32,160,4961,65792,65793,4153,4241],breakWords=function(s,o){for(var h=LineBreaker(s,{lineBreak:o.lineBreak,wordBreak:o.overflowWrap==="break-word"?"break-word":o.wordBreak}),d=[],g,_=function(){if(g.value){var b=g.value.slice(),$=toCodePoints$1(b),et="";$.forEach(function(tt){wordSeparators.indexOf(tt)===-1?et+=fromCodePoint$1(tt):(et.length&&d.push(et),d.push(fromCodePoint$1(tt)),et="")}),et.length&&d.push(et)}};!(g=h.next()).done;)_();return d},TextContainer=function(){function s(o,h,d){this.text=transform(h.data,d.textTransform),this.textBounds=parseTextBounds(o,this.text,d,h)}return s}(),transform=function(s,o){switch(o){case 1:return s.toLowerCase();case 3:return s.replace(CAPITALIZE,capitalize);case 2:return s.toUpperCase();default:return s}},CAPITALIZE=/(^|\s|:|-|\(|\))([a-z])/g,capitalize=function(s,o,h){return s.length>0?o+h.toUpperCase():s},ImageElementContainer=function(s){__extends(o,s);function o(h,d){var g=s.call(this,h,d)||this;return g.src=d.currentSrc||d.src,g.intrinsicWidth=d.naturalWidth,g.intrinsicHeight=d.naturalHeight,g.context.cache.addImage(g.src),g}return o}(ElementContainer),CanvasElementContainer=function(s){__extends(o,s);function o(h,d){var g=s.call(this,h,d)||this;return g.canvas=d,g.intrinsicWidth=d.width,g.intrinsicHeight=d.height,g}return o}(ElementContainer),SVGElementContainer=function(s){__extends(o,s);function o(h,d){var g=s.call(this,h,d)||this,_=new XMLSerializer,b=parseBounds(h,d);return d.setAttribute("width",b.width+"px"),d.setAttribute("height",b.height+"px"),g.svg="data:image/svg+xml,"+encodeURIComponent(_.serializeToString(d)),g.intrinsicWidth=d.width.baseVal.value,g.intrinsicHeight=d.height.baseVal.value,g.context.cache.addImage(g.svg),g}return o}(ElementContainer),LIElementContainer=function(s){__extends(o,s);function o(h,d){var g=s.call(this,h,d)||this;return g.value=d.value,g}return o}(ElementContainer),OLElementContainer=function(s){__extends(o,s);function o(h,d){var g=s.call(this,h,d)||this;return g.start=d.start,g.reversed=typeof d.reversed=="boolean"&&d.reversed===!0,g}return o}(ElementContainer),CHECKBOX_BORDER_RADIUS=[{type:15,flags:0,unit:"px",number:3}],RADIO_BORDER_RADIUS=[{type:16,flags:0,number:50}],reformatInputBounds=function(s){return s.width>s.height?new Bounds(s.left+(s.width-s.height)/2,s.top,s.height,s.height):s.width<s.height?new Bounds(s.left,s.top+(s.height-s.width)/2,s.width,s.width):s},getInputValue=function(s){var o=s.type===PASSWORD?new Array(s.value.length+1).join(""):s.value;return o.length===0?s.placeholder||"":o},CHECKBOX="checkbox",RADIO="radio",PASSWORD="password",INPUT_COLOR=707406591,InputElementContainer=function(s){__extends(o,s);function o(h,d){var g=s.call(this,h,d)||this;switch(g.type=d.type.toLowerCase(),g.checked=d.checked,g.value=getInputValue(d),(g.type===CHECKBOX||g.type===RADIO)&&(g.styles.backgroundColor=3739148031,g.styles.borderTopColor=g.styles.borderRightColor=g.styles.borderBottomColor=g.styles.borderLeftColor=2779096575,g.styles.borderTopWidth=g.styles.borderRightWidth=g.styles.borderBottomWidth=g.styles.borderLeftWidth=1,g.styles.borderTopStyle=g.styles.borderRightStyle=g.styles.borderBottomStyle=g.styles.borderLeftStyle=1,g.styles.backgroundClip=[0],g.styles.backgroundOrigin=[0],g.bounds=reformatInputBounds(g.bounds)),g.type){case CHECKBOX:g.styles.borderTopRightRadius=g.styles.borderTopLeftRadius=g.styles.borderBottomRightRadius=g.styles.borderBottomLeftRadius=CHECKBOX_BORDER_RADIUS;break;case RADIO:g.styles.borderTopRightRadius=g.styles.borderTopLeftRadius=g.styles.borderBottomRightRadius=g.styles.borderBottomLeftRadius=RADIO_BORDER_RADIUS;break}return g}return o}(ElementContainer),SelectElementContainer=function(s){__extends(o,s);function o(h,d){var g=s.call(this,h,d)||this,_=d.options[d.selectedIndex||0];return g.value=_&&_.text||"",g}return o}(ElementContainer),TextareaElementContainer=function(s){__extends(o,s);function o(h,d){var g=s.call(this,h,d)||this;return g.value=d.value,g}return o}(ElementContainer),IFrameElementContainer=function(s){__extends(o,s);function o(h,d){var g=s.call(this,h,d)||this;g.src=d.src,g.width=parseInt(d.width,10)||0,g.height=parseInt(d.height,10)||0,g.backgroundColor=g.styles.backgroundColor;try{if(d.contentWindow&&d.contentWindow.document&&d.contentWindow.document.documentElement){g.tree=parseTree(h,d.contentWindow.document.documentElement);var _=d.contentWindow.document.documentElement?parseColor(h,getComputedStyle(d.contentWindow.document.documentElement).backgroundColor):COLORS.TRANSPARENT,b=d.contentWindow.document.body?parseColor(h,getComputedStyle(d.contentWindow.document.body).backgroundColor):COLORS.TRANSPARENT;g.backgroundColor=isTransparent(_)?isTransparent(b)?g.styles.backgroundColor:b:_}}catch{}return g}return o}(ElementContainer),LIST_OWNERS=["OL","UL","MENU"],parseNodeTree=function(s,o,h,d){for(var g=o.firstChild,_=void 0;g;g=_)if(_=g.nextSibling,isTextNode(g)&&g.data.trim().length>0)h.textNodes.push(new TextContainer(s,g,h.styles));else if(isElementNode(g))if(isSlotElement(g)&&g.assignedNodes)g.assignedNodes().forEach(function($){return parseNodeTree(s,$,h,d)});else{var b=createContainer(s,g);b.styles.isVisible()&&(createsRealStackingContext(g,b,d)?b.flags|=4:createsStackingContext(b.styles)&&(b.flags|=2),LIST_OWNERS.indexOf(g.tagName)!==-1&&(b.flags|=8),h.elements.push(b),g.slot,g.shadowRoot?parseNodeTree(s,g.shadowRoot,b,d):!isTextareaElement(g)&&!isSVGElement(g)&&!isSelectElement(g)&&parseNodeTree(s,g,b,d))}},createContainer=function(s,o){return isImageElement(o)?new ImageElementContainer(s,o):isCanvasElement(o)?new CanvasElementContainer(s,o):isSVGElement(o)?new SVGElementContainer(s,o):isLIElement(o)?new LIElementContainer(s,o):isOLElement(o)?new OLElementContainer(s,o):isInputElement(o)?new InputElementContainer(s,o):isSelectElement(o)?new SelectElementContainer(s,o):isTextareaElement(o)?new TextareaElementContainer(s,o):isIFrameElement(o)?new IFrameElementContainer(s,o):new ElementContainer(s,o)},parseTree=function(s,o){var h=createContainer(s,o);return h.flags|=4,parseNodeTree(s,o,h,h),h},createsRealStackingContext=function(s,o,h){return o.styles.isPositionedWithZIndex()||o.styles.opacity<1||o.styles.isTransformed()||isBodyElement(s)&&h.styles.isTransparent()},createsStackingContext=function(s){return s.isPositioned()||s.isFloating()},isTextNode=function(s){return s.nodeType===Node.TEXT_NODE},isElementNode=function(s){return s.nodeType===Node.ELEMENT_NODE},isHTMLElementNode=function(s){return isElementNode(s)&&typeof s.style<"u"&&!isSVGElementNode(s)},isSVGElementNode=function(s){return typeof s.className=="object"},isLIElement=function(s){return s.tagName==="LI"},isOLElement=function(s){return s.tagName==="OL"},isInputElement=function(s){return s.tagName==="INPUT"},isHTMLElement=function(s){return s.tagName==="HTML"},isSVGElement=function(s){return s.tagName==="svg"},isBodyElement=function(s){return s.tagName==="BODY"},isCanvasElement=function(s){return s.tagName==="CANVAS"},isVideoElement=function(s){return s.tagName==="VIDEO"},isImageElement=function(s){return s.tagName==="IMG"},isIFrameElement=function(s){return s.tagName==="IFRAME"},isStyleElement=function(s){return s.tagName==="STYLE"},isScriptElement=function(s){return s.tagName==="SCRIPT"},isTextareaElement=function(s){return s.tagName==="TEXTAREA"},isSelectElement=function(s){return s.tagName==="SELECT"},isSlotElement=function(s){return s.tagName==="SLOT"},isCustomElement=function(s){return s.tagName.indexOf("-")>0},CounterState=function(){function s(){this.counters={}}return s.prototype.getCounterValue=function(o){var h=this.counters[o];return h&&h.length?h[h.length-1]:1},s.prototype.getCounterValues=function(o){var h=this.counters[o];return h||[]},s.prototype.pop=function(o){var h=this;o.forEach(function(d){return h.counters[d].pop()})},s.prototype.parse=function(o){var h=this,d=o.counterIncrement,g=o.counterReset,_=!0;d!==null&&d.forEach(function($){var et=h.counters[$.counter];et&&$.increment!==0&&(_=!1,et.length||et.push(1),et[Math.max(0,et.length-1)]+=$.increment)});var b=[];return _&&g.forEach(function($){var et=h.counters[$.counter];b.push($.counter),et||(et=h.counters[$.counter]=[]),et.push($.reset)}),b},s}(),ROMAN_UPPER={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},ARMENIAN={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},HEBREW={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},GEORGIAN={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},createAdditiveCounter=function(s,o,h,d,g,_){return s<o||s>h?createCounterText(s,g,_.length>0):d.integers.reduce(function(b,$,et){for(;s>=$;)s-=$,b+=d.values[et];return b},"")+_},createCounterStyleWithSymbolResolver=function(s,o,h,d){var g="";do h||s--,g=d(s)+g,s/=o;while(s*o>=o);return g},createCounterStyleFromRange=function(s,o,h,d,g){var _=h-o+1;return(s<0?"-":"")+(createCounterStyleWithSymbolResolver(Math.abs(s),_,d,function(b){return fromCodePoint$1(Math.floor(b%_)+o)})+g)},createCounterStyleFromSymbols=function(s,o,h){h===void 0&&(h=". ");var d=o.length;return createCounterStyleWithSymbolResolver(Math.abs(s),d,!1,function(g){return o[Math.floor(g%d)]})+h},CJK_ZEROS=1,CJK_TEN_COEFFICIENTS=2,CJK_TEN_HIGH_COEFFICIENTS=4,CJK_HUNDRED_COEFFICIENTS=8,createCJKCounter=function(s,o,h,d,g,_){if(s<-9999||s>9999)return createCounterText(s,4,g.length>0);var b=Math.abs(s),$=g;if(b===0)return o[0]+$;for(var et=0;b>0&&et<=4;et++){var tt=b%10;tt===0&&contains(_,CJK_ZEROS)&&$!==""?$=o[tt]+$:tt>1||tt===1&&et===0||tt===1&&et===1&&contains(_,CJK_TEN_COEFFICIENTS)||tt===1&&et===1&&contains(_,CJK_TEN_HIGH_COEFFICIENTS)&&s>100||tt===1&&et>1&&contains(_,CJK_HUNDRED_COEFFICIENTS)?$=o[tt]+(et>0?h[et-1]:"")+$:tt===1&&et>0&&($=h[et-1]+$),b=Math.floor(b/10)}return(s<0?d:"")+$},CHINESE_INFORMAL_MULTIPLIERS="",CHINESE_FORMAL_MULTIPLIERS="",JAPANESE_NEGATIVE="",KOREAN_NEGATIVE="",createCounterText=function(s,o,h){var d=h?". ":"",g=h?"":"",_=h?", ":"",b=h?" ":"";switch(o){case 0:return""+b;case 1:return""+b;case 2:return""+b;case 5:var $=createCounterStyleFromRange(s,48,57,!0,d);return $.length<4?"0"+$:$;case 4:return createCounterStyleFromSymbols(s,"",g);case 6:return createAdditiveCounter(s,1,3999,ROMAN_UPPER,3,d).toLowerCase();case 7:return createAdditiveCounter(s,1,3999,ROMAN_UPPER,3,d);case 8:return createCounterStyleFromRange(s,945,969,!1,d);case 9:return createCounterStyleFromRange(s,97,122,!1,d);case 10:return createCounterStyleFromRange(s,65,90,!1,d);case 11:return createCounterStyleFromRange(s,1632,1641,!0,d);case 12:case 49:return createAdditiveCounter(s,1,9999,ARMENIAN,3,d);case 35:return createAdditiveCounter(s,1,9999,ARMENIAN,3,d).toLowerCase();case 13:return createCounterStyleFromRange(s,2534,2543,!0,d);case 14:case 30:return createCounterStyleFromRange(s,6112,6121,!0,d);case 15:return createCounterStyleFromSymbols(s,"",g);case 16:return createCounterStyleFromSymbols(s,"",g);case 17:case 48:return createCJKCounter(s,"",CHINESE_INFORMAL_MULTIPLIERS,"",g,CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS|CJK_HUNDRED_COEFFICIENTS);case 47:return createCJKCounter(s,"",CHINESE_FORMAL_MULTIPLIERS,"",g,CJK_ZEROS|CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS|CJK_HUNDRED_COEFFICIENTS);case 42:return createCJKCounter(s,"",CHINESE_INFORMAL_MULTIPLIERS,"",g,CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS|CJK_HUNDRED_COEFFICIENTS);case 41:return createCJKCounter(s,"",CHINESE_FORMAL_MULTIPLIERS,"",g,CJK_ZEROS|CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS|CJK_HUNDRED_COEFFICIENTS);case 26:return createCJKCounter(s,"","",JAPANESE_NEGATIVE,g,0);case 25:return createCJKCounter(s,"","",JAPANESE_NEGATIVE,g,CJK_ZEROS|CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS);case 31:return createCJKCounter(s,"","",KOREAN_NEGATIVE,_,CJK_ZEROS|CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS);case 33:return createCJKCounter(s,"","",KOREAN_NEGATIVE,_,0);case 32:return createCJKCounter(s,"","",KOREAN_NEGATIVE,_,CJK_ZEROS|CJK_TEN_COEFFICIENTS|CJK_TEN_HIGH_COEFFICIENTS);case 18:return createCounterStyleFromRange(s,2406,2415,!0,d);case 20:return createAdditiveCounter(s,1,19999,GEORGIAN,3,d);case 21:return createCounterStyleFromRange(s,2790,2799,!0,d);case 22:return createCounterStyleFromRange(s,2662,2671,!0,d);case 22:return createAdditiveCounter(s,1,10999,HEBREW,3,d);case 23:return createCounterStyleFromSymbols(s,"");case 24:return createCounterStyleFromSymbols(s,"");case 27:return createCounterStyleFromRange(s,3302,3311,!0,d);case 28:return createCounterStyleFromSymbols(s,"",g);case 29:return createCounterStyleFromSymbols(s,"",g);case 34:return createCounterStyleFromRange(s,3792,3801,!0,d);case 37:return createCounterStyleFromRange(s,6160,6169,!0,d);case 38:return createCounterStyleFromRange(s,4160,4169,!0,d);case 39:return createCounterStyleFromRange(s,2918,2927,!0,d);case 40:return createCounterStyleFromRange(s,1776,1785,!0,d);case 43:return createCounterStyleFromRange(s,3046,3055,!0,d);case 44:return createCounterStyleFromRange(s,3174,3183,!0,d);case 45:return createCounterStyleFromRange(s,3664,3673,!0,d);case 46:return createCounterStyleFromRange(s,3872,3881,!0,d);case 3:default:return createCounterStyleFromRange(s,48,57,!0,d)}},IGNORE_ATTRIBUTE="data-html2canvas-ignore",DocumentCloner=function(){function s(o,h,d){if(this.context=o,this.options=d,this.scrolledElements=[],this.referenceElement=h,this.counters=new CounterState,this.quoteDepth=0,!h.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(h.ownerDocument.documentElement,!1)}return s.prototype.toIFrame=function(o,h){var d=this,g=createIFrameContainer(o,h);if(!g.contentWindow)return Promise.reject("Unable to find iframe window");var _=o.defaultView.pageXOffset,b=o.defaultView.pageYOffset,$=g.contentWindow,et=$.document,tt=iframeLoader(g).then(function(){return __awaiter(d,void 0,void 0,function(){var rt,nt;return __generator(this,function(At){switch(At.label){case 0:return this.scrolledElements.forEach(restoreNodeScroll),$&&($.scrollTo(h.left,h.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&($.scrollY!==h.top||$.scrollX!==h.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add($.scrollX-h.left,$.scrollY-h.top,0,0))),rt=this.options.onclone,nt=this.clonedReferenceElement,typeof nt>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:et.fonts&&et.fonts.ready?[4,et.fonts.ready]:[3,2];case 1:At.sent(),At.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,imagesReady(et)]:[3,4];case 3:At.sent(),At.label=4;case 4:return typeof rt=="function"?[2,Promise.resolve().then(function(){return rt(et,nt)}).then(function(){return g})]:[2,g]}})})});return et.open(),et.write(serializeDoctype(document.doctype)+"<html></html>"),restoreOwnerScroll(this.referenceElement.ownerDocument,_,b),et.replaceChild(et.adoptNode(this.documentElement),et.documentElement),et.close(),tt},s.prototype.createElementClone=function(o){if(isDebugging(o,2))debugger;if(isCanvasElement(o))return this.createCanvasClone(o);if(isVideoElement(o))return this.createVideoClone(o);if(isStyleElement(o))return this.createStyleClone(o);var h=o.cloneNode(!1);return isImageElement(h)&&(isImageElement(o)&&o.currentSrc&&o.currentSrc!==o.src&&(h.src=o.currentSrc,h.srcset=""),h.loading==="lazy"&&(h.loading="eager")),isCustomElement(h)?this.createCustomElementClone(h):h},s.prototype.createCustomElementClone=function(o){var h=document.createElement("html2canvascustomelement");return copyCSSStyles(o.style,h),h},s.prototype.createStyleClone=function(o){try{var h=o.sheet;if(h&&h.cssRules){var d=[].slice.call(h.cssRules,0).reduce(function(_,b){return b&&typeof b.cssText=="string"?_+b.cssText:_},""),g=o.cloneNode(!1);return g.textContent=d,g}}catch(_){if(this.context.logger.error("Unable to access cssRules property",_),_.name!=="SecurityError")throw _}return o.cloneNode(!1)},s.prototype.createCanvasClone=function(o){var h;if(this.options.inlineImages&&o.ownerDocument){var d=o.ownerDocument.createElement("img");try{return d.src=o.toDataURL(),d}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",o)}}var g=o.cloneNode(!1);try{g.width=o.width,g.height=o.height;var _=o.getContext("2d"),b=g.getContext("2d");if(b)if(!this.options.allowTaint&&_)b.putImageData(_.getImageData(0,0,o.width,o.height),0,0);else{var $=(h=o.getContext("webgl2"))!==null&&h!==void 0?h:o.getContext("webgl");if($){var et=$.getContextAttributes();(et==null?void 0:et.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",o)}b.drawImage(o,0,0)}return g}catch{this.context.logger.info("Unable to clone canvas as it is tainted",o)}return g},s.prototype.createVideoClone=function(o){var h=o.ownerDocument.createElement("canvas");h.width=o.offsetWidth,h.height=o.offsetHeight;var d=h.getContext("2d");try{return d&&(d.drawImage(o,0,0,h.width,h.height),this.options.allowTaint||d.getImageData(0,0,h.width,h.height)),h}catch{this.context.logger.info("Unable to clone video as it is tainted",o)}var g=o.ownerDocument.createElement("canvas");return g.width=o.offsetWidth,g.height=o.offsetHeight,g},s.prototype.appendChildNode=function(o,h,d){(!isElementNode(h)||!isScriptElement(h)&&!h.hasAttribute(IGNORE_ATTRIBUTE)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(h)))&&(!this.options.copyStyles||!isElementNode(h)||!isStyleElement(h))&&o.appendChild(this.cloneNode(h,d))},s.prototype.cloneChildNodes=function(o,h,d){for(var g=this,_=o.shadowRoot?o.shadowRoot.firstChild:o.firstChild;_;_=_.nextSibling)if(isElementNode(_)&&isSlotElement(_)&&typeof _.assignedNodes=="function"){var b=_.assignedNodes();b.length&&b.forEach(function($){return g.appendChildNode(h,$,d)})}else this.appendChildNode(h,_,d)},s.prototype.cloneNode=function(o,h){if(isTextNode(o))return document.createTextNode(o.data);if(!o.ownerDocument)return o.cloneNode(!1);var d=o.ownerDocument.defaultView;if(d&&isElementNode(o)&&(isHTMLElementNode(o)||isSVGElementNode(o))){var g=this.createElementClone(o);g.style.transitionProperty="none";var _=d.getComputedStyle(o),b=d.getComputedStyle(o,":before"),$=d.getComputedStyle(o,":after");this.referenceElement===o&&isHTMLElementNode(g)&&(this.clonedReferenceElement=g),isBodyElement(g)&&createPseudoHideStyles(g);var et=this.counters.parse(new CSSParsedCounterDeclaration(this.context,_)),tt=this.resolvePseudoContent(o,g,b,PseudoElementType.BEFORE);isCustomElement(o)&&(h=!0),isVideoElement(o)||this.cloneChildNodes(o,g,h),tt&&g.insertBefore(tt,g.firstChild);var rt=this.resolvePseudoContent(o,g,$,PseudoElementType.AFTER);return rt&&g.appendChild(rt),this.counters.pop(et),(_&&(this.options.copyStyles||isSVGElementNode(o))&&!isIFrameElement(o)||h)&&copyCSSStyles(_,g),(o.scrollTop!==0||o.scrollLeft!==0)&&this.scrolledElements.push([g,o.scrollLeft,o.scrollTop]),(isTextareaElement(o)||isSelectElement(o))&&(isTextareaElement(g)||isSelectElement(g))&&(g.value=o.value),g}return o.cloneNode(!1)},s.prototype.resolvePseudoContent=function(o,h,d,g){var _=this;if(d){var b=d.content,$=h.ownerDocument;if(!(!$||!b||b==="none"||b==="-moz-alt-content"||d.display==="none")){this.counters.parse(new CSSParsedCounterDeclaration(this.context,d));var et=new CSSParsedPseudoDeclaration(this.context,d),tt=$.createElement("html2canvaspseudoelement");copyCSSStyles(d,tt),et.content.forEach(function(nt){if(nt.type===0)tt.appendChild($.createTextNode(nt.value));else if(nt.type===22){var At=$.createElement("img");At.src=nt.value,At.style.opacity="1",tt.appendChild(At)}else if(nt.type===18){if(nt.name==="attr"){var at=nt.values.filter(isIdentToken);at.length&&tt.appendChild($.createTextNode(o.getAttribute(at[0].value)||""))}else if(nt.name==="counter"){var lt=nt.values.filter(nonFunctionArgSeparator),gt=lt[0],_t=lt[1];if(gt&&isIdentToken(gt)){var ct=_.counters.getCounterValue(gt.value),pt=_t&&isIdentToken(_t)?listStyleType.parse(_.context,_t.value):3;tt.appendChild($.createTextNode(createCounterText(ct,pt,!1)))}}else if(nt.name==="counters"){var dt=nt.values.filter(nonFunctionArgSeparator),gt=dt[0],mt=dt[1],_t=dt[2];if(gt&&isIdentToken(gt)){var Qt=_.counters.getCounterValues(gt.value),xt=_t&&isIdentToken(_t)?listStyleType.parse(_.context,_t.value):3,bt=mt&&mt.type===0?mt.value:"",kt=Qt.map(function(Pt){return createCounterText(Pt,xt,!1)}).join(bt);tt.appendChild($.createTextNode(kt))}}}else if(nt.type===20)switch(nt.value){case"open-quote":tt.appendChild($.createTextNode(getQuote(et.quotes,_.quoteDepth++,!0)));break;case"close-quote":tt.appendChild($.createTextNode(getQuote(et.quotes,--_.quoteDepth,!1)));break;default:tt.appendChild($.createTextNode(nt.value))}}),tt.className=PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+" "+PSEUDO_HIDE_ELEMENT_CLASS_AFTER;var rt=g===PseudoElementType.BEFORE?" "+PSEUDO_HIDE_ELEMENT_CLASS_BEFORE:" "+PSEUDO_HIDE_ELEMENT_CLASS_AFTER;return isSVGElementNode(h)?h.className.baseValue+=rt:h.className+=rt,tt}}},s.destroy=function(o){return o.parentNode?(o.parentNode.removeChild(o),!0):!1},s}(),PseudoElementType;(function(s){s[s.BEFORE=0]="BEFORE",s[s.AFTER=1]="AFTER"})(PseudoElementType||(PseudoElementType={}));var createIFrameContainer=function(s,o){var h=s.createElement("iframe");return h.className="html2canvas-container",h.style.visibility="hidden",h.style.position="fixed",h.style.left="-10000px",h.style.top="0px",h.style.border="0",h.width=o.width.toString(),h.height=o.height.toString(),h.scrolling="no",h.setAttribute(IGNORE_ATTRIBUTE,"true"),s.body.appendChild(h),h},imageReady=function(s){return new Promise(function(o){if(s.complete){o();return}if(!s.src){o();return}s.onload=o,s.onerror=o})},imagesReady=function(s){return Promise.all([].slice.call(s.images,0).map(imageReady))},iframeLoader=function(s){return new Promise(function(o,h){var d=s.contentWindow;if(!d)return h("No window assigned for iframe");var g=d.document;d.onload=s.onload=function(){d.onload=s.onload=null;var _=setInterval(function(){g.body.childNodes.length>0&&g.readyState==="complete"&&(clearInterval(_),o(s))},50)}})},ignoredStyleProperties=["all","d","content"],copyCSSStyles=function(s,o){for(var h=s.length-1;h>=0;h--){var d=s.item(h);ignoredStyleProperties.indexOf(d)===-1&&o.style.setProperty(d,s.getPropertyValue(d))}return o},serializeDoctype=function(s){var o="";return s&&(o+="<!DOCTYPE ",s.name&&(o+=s.name),s.internalSubset&&(o+=s.internalSubset),s.publicId&&(o+='"'+s.publicId+'"'),s.systemId&&(o+='"'+s.systemId+'"'),o+=">"),o},restoreOwnerScroll=function(s,o,h){s&&s.defaultView&&(o!==s.defaultView.pageXOffset||h!==s.defaultView.pageYOffset)&&s.defaultView.scrollTo(o,h)},restoreNodeScroll=function(s){var o=s[0],h=s[1],d=s[2];o.scrollLeft=h,o.scrollTop=d},PSEUDO_BEFORE=":before",PSEUDO_AFTER=":after",PSEUDO_HIDE_ELEMENT_CLASS_BEFORE="___html2canvas___pseudoelement_before",PSEUDO_HIDE_ELEMENT_CLASS_AFTER="___html2canvas___pseudoelement_after",PSEUDO_HIDE_ELEMENT_STYLE=`{
    content: "" !important;
    display: none !important;
}`,createPseudoHideStyles=function(s){createStyles(s,"."+PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+PSEUDO_BEFORE+PSEUDO_HIDE_ELEMENT_STYLE+`
         .`+PSEUDO_HIDE_ELEMENT_CLASS_AFTER+PSEUDO_AFTER+PSEUDO_HIDE_ELEMENT_STYLE)},createStyles=function(s,o){var h=s.ownerDocument;if(h){var d=h.createElement("style");d.textContent=o,s.appendChild(d)}},CacheStorage=function(){function s(){}return s.getOrigin=function(o){var h=s._link;return h?(h.href=o,h.href=h.href,h.protocol+h.hostname+h.port):"about:blank"},s.isSameOrigin=function(o){return s.getOrigin(o)===s._origin},s.setContext=function(o){s._link=o.document.createElement("a"),s._origin=s.getOrigin(o.location.href)},s._origin="about:blank",s}(),Cache=function(){function s(o,h){this.context=o,this._options=h,this._cache={}}return s.prototype.addImage=function(o){var h=Promise.resolve();return this.has(o)||(isBlobImage(o)||isRenderable(o))&&(this._cache[o]=this.loadImage(o)).catch(function(){}),h},s.prototype.match=function(o){return this._cache[o]},s.prototype.loadImage=function(o){return __awaiter(this,void 0,void 0,function(){var h,d,g,_,b=this;return __generator(this,function($){switch($.label){case 0:return h=CacheStorage.isSameOrigin(o),d=!isInlineImage(o)&&this._options.useCORS===!0&&FEATURES.SUPPORT_CORS_IMAGES&&!h,g=!isInlineImage(o)&&!h&&!isBlobImage(o)&&typeof this._options.proxy=="string"&&FEATURES.SUPPORT_CORS_XHR&&!d,!h&&this._options.allowTaint===!1&&!isInlineImage(o)&&!isBlobImage(o)&&!g&&!d?[2]:(_=o,g?[4,this.proxy(_)]:[3,2]);case 1:_=$.sent(),$.label=2;case 2:return this.context.logger.debug("Added image "+o.substring(0,256)),[4,new Promise(function(et,tt){var rt=new Image;rt.onload=function(){return et(rt)},rt.onerror=tt,(isInlineBase64Image(_)||d)&&(rt.crossOrigin="anonymous"),rt.src=_,rt.complete===!0&&setTimeout(function(){return et(rt)},500),b._options.imageTimeout>0&&setTimeout(function(){return tt("Timed out ("+b._options.imageTimeout+"ms) loading image")},b._options.imageTimeout)})];case 3:return[2,$.sent()]}})})},s.prototype.has=function(o){return typeof this._cache[o]<"u"},s.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},s.prototype.proxy=function(o){var h=this,d=this._options.proxy;if(!d)throw new Error("No proxy defined");var g=o.substring(0,256);return new Promise(function(_,b){var $=FEATURES.SUPPORT_RESPONSE_TYPE?"blob":"text",et=new XMLHttpRequest;et.onload=function(){if(et.status===200)if($==="text")_(et.response);else{var nt=new FileReader;nt.addEventListener("load",function(){return _(nt.result)},!1),nt.addEventListener("error",function(At){return b(At)},!1),nt.readAsDataURL(et.response)}else b("Failed to proxy resource "+g+" with status code "+et.status)},et.onerror=b;var tt=d.indexOf("?")>-1?"&":"?";if(et.open("GET",""+d+tt+"url="+encodeURIComponent(o)+"&responseType="+$),$!=="text"&&et instanceof XMLHttpRequest&&(et.responseType=$),h._options.imageTimeout){var rt=h._options.imageTimeout;et.timeout=rt,et.ontimeout=function(){return b("Timed out ("+rt+"ms) proxying "+g)}}et.send()})},s}(),INLINE_SVG=/^data:image\/svg\+xml/i,INLINE_BASE64=/^data:image\/.*;base64,/i,INLINE_IMG=/^data:image\/.*/i,isRenderable=function(s){return FEATURES.SUPPORT_SVG_DRAWING||!isSVG(s)},isInlineImage=function(s){return INLINE_IMG.test(s)},isInlineBase64Image=function(s){return INLINE_BASE64.test(s)},isBlobImage=function(s){return s.substr(0,4)==="blob"},isSVG=function(s){return s.substr(-3).toLowerCase()==="svg"||INLINE_SVG.test(s)},Vector=function(){function s(o,h){this.type=0,this.x=o,this.y=h}return s.prototype.add=function(o,h){return new s(this.x+o,this.y+h)},s}(),lerp=function(s,o,h){return new Vector(s.x+(o.x-s.x)*h,s.y+(o.y-s.y)*h)},BezierCurve=function(){function s(o,h,d,g){this.type=1,this.start=o,this.startControl=h,this.endControl=d,this.end=g}return s.prototype.subdivide=function(o,h){var d=lerp(this.start,this.startControl,o),g=lerp(this.startControl,this.endControl,o),_=lerp(this.endControl,this.end,o),b=lerp(d,g,o),$=lerp(g,_,o),et=lerp(b,$,o);return h?new s(this.start,d,b,et):new s(et,$,_,this.end)},s.prototype.add=function(o,h){return new s(this.start.add(o,h),this.startControl.add(o,h),this.endControl.add(o,h),this.end.add(o,h))},s.prototype.reverse=function(){return new s(this.end,this.endControl,this.startControl,this.start)},s}(),isBezierCurve=function(s){return s.type===1},BoundCurves=function(){function s(o){var h=o.styles,d=o.bounds,g=getAbsoluteValueForTuple(h.borderTopLeftRadius,d.width,d.height),_=g[0],b=g[1],$=getAbsoluteValueForTuple(h.borderTopRightRadius,d.width,d.height),et=$[0],tt=$[1],rt=getAbsoluteValueForTuple(h.borderBottomRightRadius,d.width,d.height),nt=rt[0],At=rt[1],at=getAbsoluteValueForTuple(h.borderBottomLeftRadius,d.width,d.height),lt=at[0],gt=at[1],_t=[];_t.push((_+et)/d.width),_t.push((lt+nt)/d.width),_t.push((b+gt)/d.height),_t.push((tt+At)/d.height);var ct=Math.max.apply(Math,_t);ct>1&&(_/=ct,b/=ct,et/=ct,tt/=ct,nt/=ct,At/=ct,lt/=ct,gt/=ct);var pt=d.width-et,dt=d.height-At,mt=d.width-nt,Qt=d.height-gt,xt=h.borderTopWidth,bt=h.borderRightWidth,kt=h.borderBottomWidth,Lt=h.borderLeftWidth,Ht=getAbsoluteValue(h.paddingTop,o.bounds.width),Pt=getAbsoluteValue(h.paddingRight,o.bounds.width),jt=getAbsoluteValue(h.paddingBottom,o.bounds.width),Vt=getAbsoluteValue(h.paddingLeft,o.bounds.width);this.topLeftBorderDoubleOuterBox=_>0||b>0?getCurvePoints(d.left+Lt/3,d.top+xt/3,_-Lt/3,b-xt/3,CORNER.TOP_LEFT):new Vector(d.left+Lt/3,d.top+xt/3),this.topRightBorderDoubleOuterBox=_>0||b>0?getCurvePoints(d.left+pt,d.top+xt/3,et-bt/3,tt-xt/3,CORNER.TOP_RIGHT):new Vector(d.left+d.width-bt/3,d.top+xt/3),this.bottomRightBorderDoubleOuterBox=nt>0||At>0?getCurvePoints(d.left+mt,d.top+dt,nt-bt/3,At-kt/3,CORNER.BOTTOM_RIGHT):new Vector(d.left+d.width-bt/3,d.top+d.height-kt/3),this.bottomLeftBorderDoubleOuterBox=lt>0||gt>0?getCurvePoints(d.left+Lt/3,d.top+Qt,lt-Lt/3,gt-kt/3,CORNER.BOTTOM_LEFT):new Vector(d.left+Lt/3,d.top+d.height-kt/3),this.topLeftBorderDoubleInnerBox=_>0||b>0?getCurvePoints(d.left+Lt*2/3,d.top+xt*2/3,_-Lt*2/3,b-xt*2/3,CORNER.TOP_LEFT):new Vector(d.left+Lt*2/3,d.top+xt*2/3),this.topRightBorderDoubleInnerBox=_>0||b>0?getCurvePoints(d.left+pt,d.top+xt*2/3,et-bt*2/3,tt-xt*2/3,CORNER.TOP_RIGHT):new Vector(d.left+d.width-bt*2/3,d.top+xt*2/3),this.bottomRightBorderDoubleInnerBox=nt>0||At>0?getCurvePoints(d.left+mt,d.top+dt,nt-bt*2/3,At-kt*2/3,CORNER.BOTTOM_RIGHT):new Vector(d.left+d.width-bt*2/3,d.top+d.height-kt*2/3),this.bottomLeftBorderDoubleInnerBox=lt>0||gt>0?getCurvePoints(d.left+Lt*2/3,d.top+Qt,lt-Lt*2/3,gt-kt*2/3,CORNER.BOTTOM_LEFT):new Vector(d.left+Lt*2/3,d.top+d.height-kt*2/3),this.topLeftBorderStroke=_>0||b>0?getCurvePoints(d.left+Lt/2,d.top+xt/2,_-Lt/2,b-xt/2,CORNER.TOP_LEFT):new Vector(d.left+Lt/2,d.top+xt/2),this.topRightBorderStroke=_>0||b>0?getCurvePoints(d.left+pt,d.top+xt/2,et-bt/2,tt-xt/2,CORNER.TOP_RIGHT):new Vector(d.left+d.width-bt/2,d.top+xt/2),this.bottomRightBorderStroke=nt>0||At>0?getCurvePoints(d.left+mt,d.top+dt,nt-bt/2,At-kt/2,CORNER.BOTTOM_RIGHT):new Vector(d.left+d.width-bt/2,d.top+d.height-kt/2),this.bottomLeftBorderStroke=lt>0||gt>0?getCurvePoints(d.left+Lt/2,d.top+Qt,lt-Lt/2,gt-kt/2,CORNER.BOTTOM_LEFT):new Vector(d.left+Lt/2,d.top+d.height-kt/2),this.topLeftBorderBox=_>0||b>0?getCurvePoints(d.left,d.top,_,b,CORNER.TOP_LEFT):new Vector(d.left,d.top),this.topRightBorderBox=et>0||tt>0?getCurvePoints(d.left+pt,d.top,et,tt,CORNER.TOP_RIGHT):new Vector(d.left+d.width,d.top),this.bottomRightBorderBox=nt>0||At>0?getCurvePoints(d.left+mt,d.top+dt,nt,At,CORNER.BOTTOM_RIGHT):new Vector(d.left+d.width,d.top+d.height),this.bottomLeftBorderBox=lt>0||gt>0?getCurvePoints(d.left,d.top+Qt,lt,gt,CORNER.BOTTOM_LEFT):new Vector(d.left,d.top+d.height),this.topLeftPaddingBox=_>0||b>0?getCurvePoints(d.left+Lt,d.top+xt,Math.max(0,_-Lt),Math.max(0,b-xt),CORNER.TOP_LEFT):new Vector(d.left+Lt,d.top+xt),this.topRightPaddingBox=et>0||tt>0?getCurvePoints(d.left+Math.min(pt,d.width-bt),d.top+xt,pt>d.width+bt?0:Math.max(0,et-bt),Math.max(0,tt-xt),CORNER.TOP_RIGHT):new Vector(d.left+d.width-bt,d.top+xt),this.bottomRightPaddingBox=nt>0||At>0?getCurvePoints(d.left+Math.min(mt,d.width-Lt),d.top+Math.min(dt,d.height-kt),Math.max(0,nt-bt),Math.max(0,At-kt),CORNER.BOTTOM_RIGHT):new Vector(d.left+d.width-bt,d.top+d.height-kt),this.bottomLeftPaddingBox=lt>0||gt>0?getCurvePoints(d.left+Lt,d.top+Math.min(Qt,d.height-kt),Math.max(0,lt-Lt),Math.max(0,gt-kt),CORNER.BOTTOM_LEFT):new Vector(d.left+Lt,d.top+d.height-kt),this.topLeftContentBox=_>0||b>0?getCurvePoints(d.left+Lt+Vt,d.top+xt+Ht,Math.max(0,_-(Lt+Vt)),Math.max(0,b-(xt+Ht)),CORNER.TOP_LEFT):new Vector(d.left+Lt+Vt,d.top+xt+Ht),this.topRightContentBox=et>0||tt>0?getCurvePoints(d.left+Math.min(pt,d.width+Lt+Vt),d.top+xt+Ht,pt>d.width+Lt+Vt?0:et-Lt+Vt,tt-(xt+Ht),CORNER.TOP_RIGHT):new Vector(d.left+d.width-(bt+Pt),d.top+xt+Ht),this.bottomRightContentBox=nt>0||At>0?getCurvePoints(d.left+Math.min(mt,d.width-(Lt+Vt)),d.top+Math.min(dt,d.height+xt+Ht),Math.max(0,nt-(bt+Pt)),At-(kt+jt),CORNER.BOTTOM_RIGHT):new Vector(d.left+d.width-(bt+Pt),d.top+d.height-(kt+jt)),this.bottomLeftContentBox=lt>0||gt>0?getCurvePoints(d.left+Lt+Vt,d.top+Qt,Math.max(0,lt-(Lt+Vt)),gt-(kt+jt),CORNER.BOTTOM_LEFT):new Vector(d.left+Lt+Vt,d.top+d.height-(kt+jt))}return s}(),CORNER;(function(s){s[s.TOP_LEFT=0]="TOP_LEFT",s[s.TOP_RIGHT=1]="TOP_RIGHT",s[s.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",s[s.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(CORNER||(CORNER={}));var getCurvePoints=function(s,o,h,d,g){var _=4*((Math.sqrt(2)-1)/3),b=h*_,$=d*_,et=s+h,tt=o+d;switch(g){case CORNER.TOP_LEFT:return new BezierCurve(new Vector(s,tt),new Vector(s,tt-$),new Vector(et-b,o),new Vector(et,o));case CORNER.TOP_RIGHT:return new BezierCurve(new Vector(s,o),new Vector(s+b,o),new Vector(et,tt-$),new Vector(et,tt));case CORNER.BOTTOM_RIGHT:return new BezierCurve(new Vector(et,o),new Vector(et,o+$),new Vector(s+b,tt),new Vector(s,tt));case CORNER.BOTTOM_LEFT:default:return new BezierCurve(new Vector(et,tt),new Vector(et-b,tt),new Vector(s,o+$),new Vector(s,o))}},calculateBorderBoxPath=function(s){return[s.topLeftBorderBox,s.topRightBorderBox,s.bottomRightBorderBox,s.bottomLeftBorderBox]},calculateContentBoxPath=function(s){return[s.topLeftContentBox,s.topRightContentBox,s.bottomRightContentBox,s.bottomLeftContentBox]},calculatePaddingBoxPath=function(s){return[s.topLeftPaddingBox,s.topRightPaddingBox,s.bottomRightPaddingBox,s.bottomLeftPaddingBox]},TransformEffect=function(){function s(o,h,d){this.offsetX=o,this.offsetY=h,this.matrix=d,this.type=0,this.target=6}return s}(),ClipEffect=function(){function s(o,h){this.path=o,this.target=h,this.type=1}return s}(),OpacityEffect=function(){function s(o){this.opacity=o,this.type=2,this.target=6}return s}(),isTransformEffect=function(s){return s.type===0},isClipEffect=function(s){return s.type===1},isOpacityEffect=function(s){return s.type===2},equalPath=function(s,o){return s.length===o.length?s.some(function(h,d){return h===o[d]}):!1},transformPath=function(s,o,h,d,g){return s.map(function(_,b){switch(b){case 0:return _.add(o,h);case 1:return _.add(o+d,h);case 2:return _.add(o+d,h+g);case 3:return _.add(o,h+g)}return _})},StackingContext=function(){function s(o){this.element=o,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return s}(),ElementPaint=function(){function s(o,h){if(this.container=o,this.parent=h,this.effects=[],this.curves=new BoundCurves(this.container),this.container.styles.opacity<1&&this.effects.push(new OpacityEffect(this.container.styles.opacity)),this.container.styles.transform!==null){var d=this.container.bounds.left+this.container.styles.transformOrigin[0].number,g=this.container.bounds.top+this.container.styles.transformOrigin[1].number,_=this.container.styles.transform;this.effects.push(new TransformEffect(d,g,_))}if(this.container.styles.overflowX!==0){var b=calculateBorderBoxPath(this.curves),$=calculatePaddingBoxPath(this.curves);equalPath(b,$)?this.effects.push(new ClipEffect(b,6)):(this.effects.push(new ClipEffect(b,2)),this.effects.push(new ClipEffect($,4)))}}return s.prototype.getEffects=function(o){for(var h=[2,3].indexOf(this.container.styles.position)===-1,d=this.parent,g=this.effects.slice(0);d;){var _=d.effects.filter(function(et){return!isClipEffect(et)});if(h||d.container.styles.position!==0||!d.parent){if(g.unshift.apply(g,_),h=[2,3].indexOf(d.container.styles.position)===-1,d.container.styles.overflowX!==0){var b=calculateBorderBoxPath(d.curves),$=calculatePaddingBoxPath(d.curves);equalPath(b,$)||g.unshift(new ClipEffect($,6))}}else g.unshift.apply(g,_);d=d.parent}return g.filter(function(et){return contains(et.target,o)})},s}(),parseStackTree=function(s,o,h,d){s.container.elements.forEach(function(g){var _=contains(g.flags,4),b=contains(g.flags,2),$=new ElementPaint(g,s);contains(g.styles.display,2048)&&d.push($);var et=contains(g.flags,8)?[]:d;if(_||b){var tt=_||g.styles.isPositioned()?h:o,rt=new StackingContext($);if(g.styles.isPositioned()||g.styles.opacity<1||g.styles.isTransformed()){var nt=g.styles.zIndex.order;if(nt<0){var At=0;tt.negativeZIndex.some(function(lt,gt){return nt>lt.element.container.styles.zIndex.order?(At=gt,!1):At>0}),tt.negativeZIndex.splice(At,0,rt)}else if(nt>0){var at=0;tt.positiveZIndex.some(function(lt,gt){return nt>=lt.element.container.styles.zIndex.order?(at=gt+1,!1):at>0}),tt.positiveZIndex.splice(at,0,rt)}else tt.zeroOrAutoZIndexOrTransformedOrOpacity.push(rt)}else g.styles.isFloating()?tt.nonPositionedFloats.push(rt):tt.nonPositionedInlineLevel.push(rt);parseStackTree($,rt,_?rt:h,et)}else g.styles.isInlineLevel()?o.inlineLevel.push($):o.nonInlineLevel.push($),parseStackTree($,o,h,et);contains(g.flags,8)&&processListItems(g,et)})},processListItems=function(s,o){for(var h=s instanceof OLElementContainer?s.start:1,d=s instanceof OLElementContainer?s.reversed:!1,g=0;g<o.length;g++){var _=o[g];_.container instanceof LIElementContainer&&typeof _.container.value=="number"&&_.container.value!==0&&(h=_.container.value),_.listValue=createCounterText(h,_.container.styles.listStyleType,!0),h+=d?-1:1}},parseStackingContexts=function(s){var o=new ElementPaint(s,null),h=new StackingContext(o),d=[];return parseStackTree(o,h,h,d),processListItems(o.container,d),h},parsePathForBorder=function(s,o){switch(o){case 0:return createPathFromCurves(s.topLeftBorderBox,s.topLeftPaddingBox,s.topRightBorderBox,s.topRightPaddingBox);case 1:return createPathFromCurves(s.topRightBorderBox,s.topRightPaddingBox,s.bottomRightBorderBox,s.bottomRightPaddingBox);case 2:return createPathFromCurves(s.bottomRightBorderBox,s.bottomRightPaddingBox,s.bottomLeftBorderBox,s.bottomLeftPaddingBox);case 3:default:return createPathFromCurves(s.bottomLeftBorderBox,s.bottomLeftPaddingBox,s.topLeftBorderBox,s.topLeftPaddingBox)}},parsePathForBorderDoubleOuter=function(s,o){switch(o){case 0:return createPathFromCurves(s.topLeftBorderBox,s.topLeftBorderDoubleOuterBox,s.topRightBorderBox,s.topRightBorderDoubleOuterBox);case 1:return createPathFromCurves(s.topRightBorderBox,s.topRightBorderDoubleOuterBox,s.bottomRightBorderBox,s.bottomRightBorderDoubleOuterBox);case 2:return createPathFromCurves(s.bottomRightBorderBox,s.bottomRightBorderDoubleOuterBox,s.bottomLeftBorderBox,s.bottomLeftBorderDoubleOuterBox);case 3:default:return createPathFromCurves(s.bottomLeftBorderBox,s.bottomLeftBorderDoubleOuterBox,s.topLeftBorderBox,s.topLeftBorderDoubleOuterBox)}},parsePathForBorderDoubleInner=function(s,o){switch(o){case 0:return createPathFromCurves(s.topLeftBorderDoubleInnerBox,s.topLeftPaddingBox,s.topRightBorderDoubleInnerBox,s.topRightPaddingBox);case 1:return createPathFromCurves(s.topRightBorderDoubleInnerBox,s.topRightPaddingBox,s.bottomRightBorderDoubleInnerBox,s.bottomRightPaddingBox);case 2:return createPathFromCurves(s.bottomRightBorderDoubleInnerBox,s.bottomRightPaddingBox,s.bottomLeftBorderDoubleInnerBox,s.bottomLeftPaddingBox);case 3:default:return createPathFromCurves(s.bottomLeftBorderDoubleInnerBox,s.bottomLeftPaddingBox,s.topLeftBorderDoubleInnerBox,s.topLeftPaddingBox)}},parsePathForBorderStroke=function(s,o){switch(o){case 0:return createStrokePathFromCurves(s.topLeftBorderStroke,s.topRightBorderStroke);case 1:return createStrokePathFromCurves(s.topRightBorderStroke,s.bottomRightBorderStroke);case 2:return createStrokePathFromCurves(s.bottomRightBorderStroke,s.bottomLeftBorderStroke);case 3:default:return createStrokePathFromCurves(s.bottomLeftBorderStroke,s.topLeftBorderStroke)}},createStrokePathFromCurves=function(s,o){var h=[];return isBezierCurve(s)?h.push(s.subdivide(.5,!1)):h.push(s),isBezierCurve(o)?h.push(o.subdivide(.5,!0)):h.push(o),h},createPathFromCurves=function(s,o,h,d){var g=[];return isBezierCurve(s)?g.push(s.subdivide(.5,!1)):g.push(s),isBezierCurve(h)?g.push(h.subdivide(.5,!0)):g.push(h),isBezierCurve(d)?g.push(d.subdivide(.5,!0).reverse()):g.push(d),isBezierCurve(o)?g.push(o.subdivide(.5,!1).reverse()):g.push(o),g},paddingBox=function(s){var o=s.bounds,h=s.styles;return o.add(h.borderLeftWidth,h.borderTopWidth,-(h.borderRightWidth+h.borderLeftWidth),-(h.borderTopWidth+h.borderBottomWidth))},contentBox=function(s){var o=s.styles,h=s.bounds,d=getAbsoluteValue(o.paddingLeft,h.width),g=getAbsoluteValue(o.paddingRight,h.width),_=getAbsoluteValue(o.paddingTop,h.width),b=getAbsoluteValue(o.paddingBottom,h.width);return h.add(d+o.borderLeftWidth,_+o.borderTopWidth,-(o.borderRightWidth+o.borderLeftWidth+d+g),-(o.borderTopWidth+o.borderBottomWidth+_+b))},calculateBackgroundPositioningArea=function(s,o){return s===0?o.bounds:s===2?contentBox(o):paddingBox(o)},calculateBackgroundPaintingArea=function(s,o){return s===0?o.bounds:s===2?contentBox(o):paddingBox(o)},calculateBackgroundRendering=function(s,o,h){var d=calculateBackgroundPositioningArea(getBackgroundValueForIndex(s.styles.backgroundOrigin,o),s),g=calculateBackgroundPaintingArea(getBackgroundValueForIndex(s.styles.backgroundClip,o),s),_=calculateBackgroundSize(getBackgroundValueForIndex(s.styles.backgroundSize,o),h,d),b=_[0],$=_[1],et=getAbsoluteValueForTuple(getBackgroundValueForIndex(s.styles.backgroundPosition,o),d.width-b,d.height-$),tt=calculateBackgroundRepeatPath(getBackgroundValueForIndex(s.styles.backgroundRepeat,o),et,_,d,g),rt=Math.round(d.left+et[0]),nt=Math.round(d.top+et[1]);return[tt,rt,nt,b,$]},isAuto=function(s){return isIdentToken(s)&&s.value===BACKGROUND_SIZE.AUTO},hasIntrinsicValue=function(s){return typeof s=="number"},calculateBackgroundSize=function(s,o,h){var d=o[0],g=o[1],_=o[2],b=s[0],$=s[1];if(!b)return[0,0];if(isLengthPercentage(b)&&$&&isLengthPercentage($))return[getAbsoluteValue(b,h.width),getAbsoluteValue($,h.height)];var et=hasIntrinsicValue(_);if(isIdentToken(b)&&(b.value===BACKGROUND_SIZE.CONTAIN||b.value===BACKGROUND_SIZE.COVER)){if(hasIntrinsicValue(_)){var tt=h.width/h.height;return tt<_!=(b.value===BACKGROUND_SIZE.COVER)?[h.width,h.width/_]:[h.height*_,h.height]}return[h.width,h.height]}var rt=hasIntrinsicValue(d),nt=hasIntrinsicValue(g),At=rt||nt;if(isAuto(b)&&(!$||isAuto($))){if(rt&&nt)return[d,g];if(!et&&!At)return[h.width,h.height];if(At&&et){var at=rt?d:g*_,lt=nt?g:d/_;return[at,lt]}var gt=rt?d:h.width,_t=nt?g:h.height;return[gt,_t]}if(et){var ct=0,pt=0;return isLengthPercentage(b)?ct=getAbsoluteValue(b,h.width):isLengthPercentage($)&&(pt=getAbsoluteValue($,h.height)),isAuto(b)?ct=pt*_:(!$||isAuto($))&&(pt=ct/_),[ct,pt]}var dt=null,mt=null;if(isLengthPercentage(b)?dt=getAbsoluteValue(b,h.width):$&&isLengthPercentage($)&&(mt=getAbsoluteValue($,h.height)),dt!==null&&(!$||isAuto($))&&(mt=rt&&nt?dt/d*g:h.height),mt!==null&&isAuto(b)&&(dt=rt&&nt?mt/g*d:h.width),dt!==null&&mt!==null)return[dt,mt];throw new Error("Unable to calculate background-size for element")},getBackgroundValueForIndex=function(s,o){var h=s[o];return typeof h>"u"?s[0]:h},calculateBackgroundRepeatPath=function(s,o,h,d,g){var _=o[0],b=o[1],$=h[0],et=h[1];switch(s){case 2:return[new Vector(Math.round(d.left),Math.round(d.top+b)),new Vector(Math.round(d.left+d.width),Math.round(d.top+b)),new Vector(Math.round(d.left+d.width),Math.round(et+d.top+b)),new Vector(Math.round(d.left),Math.round(et+d.top+b))];case 3:return[new Vector(Math.round(d.left+_),Math.round(d.top)),new Vector(Math.round(d.left+_+$),Math.round(d.top)),new Vector(Math.round(d.left+_+$),Math.round(d.height+d.top)),new Vector(Math.round(d.left+_),Math.round(d.height+d.top))];case 1:return[new Vector(Math.round(d.left+_),Math.round(d.top+b)),new Vector(Math.round(d.left+_+$),Math.round(d.top+b)),new Vector(Math.round(d.left+_+$),Math.round(d.top+b+et)),new Vector(Math.round(d.left+_),Math.round(d.top+b+et))];default:return[new Vector(Math.round(g.left),Math.round(g.top)),new Vector(Math.round(g.left+g.width),Math.round(g.top)),new Vector(Math.round(g.left+g.width),Math.round(g.height+g.top)),new Vector(Math.round(g.left),Math.round(g.height+g.top))]}},SMALL_IMAGE="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",SAMPLE_TEXT="Hidden Text",FontMetrics=function(){function s(o){this._data={},this._document=o}return s.prototype.parseMetrics=function(o,h){var d=this._document.createElement("div"),g=this._document.createElement("img"),_=this._document.createElement("span"),b=this._document.body;d.style.visibility="hidden",d.style.fontFamily=o,d.style.fontSize=h,d.style.margin="0",d.style.padding="0",d.style.whiteSpace="nowrap",b.appendChild(d),g.src=SMALL_IMAGE,g.width=1,g.height=1,g.style.margin="0",g.style.padding="0",g.style.verticalAlign="baseline",_.style.fontFamily=o,_.style.fontSize=h,_.style.margin="0",_.style.padding="0",_.appendChild(this._document.createTextNode(SAMPLE_TEXT)),d.appendChild(_),d.appendChild(g);var $=g.offsetTop-_.offsetTop+2;d.removeChild(_),d.appendChild(this._document.createTextNode(SAMPLE_TEXT)),d.style.lineHeight="normal",g.style.verticalAlign="super";var et=g.offsetTop-d.offsetTop+2;return b.removeChild(d),{baseline:$,middle:et}},s.prototype.getMetrics=function(o,h){var d=o+" "+h;return typeof this._data[d]>"u"&&(this._data[d]=this.parseMetrics(o,h)),this._data[d]},s}(),Renderer=function(){function s(o,h){this.context=o,this.options=h}return s}(),MASK_OFFSET=1e4,CanvasRenderer=function(s){__extends(o,s);function o(h,d){var g=s.call(this,h,d)||this;return g._activeEffects=[],g.canvas=d.canvas?d.canvas:document.createElement("canvas"),g.ctx=g.canvas.getContext("2d"),d.canvas||(g.canvas.width=Math.floor(d.width*d.scale),g.canvas.height=Math.floor(d.height*d.scale),g.canvas.style.width=d.width+"px",g.canvas.style.height=d.height+"px"),g.fontMetrics=new FontMetrics(document),g.ctx.scale(g.options.scale,g.options.scale),g.ctx.translate(-d.x,-d.y),g.ctx.textBaseline="bottom",g._activeEffects=[],g.context.logger.debug("Canvas renderer initialized ("+d.width+"x"+d.height+") with scale "+d.scale),g}return o.prototype.applyEffects=function(h){for(var d=this;this._activeEffects.length;)this.popEffect();h.forEach(function(g){return d.applyEffect(g)})},o.prototype.applyEffect=function(h){this.ctx.save(),isOpacityEffect(h)&&(this.ctx.globalAlpha=h.opacity),isTransformEffect(h)&&(this.ctx.translate(h.offsetX,h.offsetY),this.ctx.transform(h.matrix[0],h.matrix[1],h.matrix[2],h.matrix[3],h.matrix[4],h.matrix[5]),this.ctx.translate(-h.offsetX,-h.offsetY)),isClipEffect(h)&&(this.path(h.path),this.ctx.clip()),this._activeEffects.push(h)},o.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},o.prototype.renderStack=function(h){return __awaiter(this,void 0,void 0,function(){var d;return __generator(this,function(g){switch(g.label){case 0:return d=h.element.container.styles,d.isVisible()?[4,this.renderStackContent(h)]:[3,2];case 1:g.sent(),g.label=2;case 2:return[2]}})})},o.prototype.renderNode=function(h){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(d){switch(d.label){case 0:if(contains(h.container.flags,16))debugger;return h.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(h)]:[3,3];case 1:return d.sent(),[4,this.renderNodeContent(h)];case 2:d.sent(),d.label=3;case 3:return[2]}})})},o.prototype.renderTextWithLetterSpacing=function(h,d,g){var _=this;if(d===0)this.ctx.fillText(h.text,h.bounds.left,h.bounds.top+g);else{var b=segmentGraphemes(h.text);b.reduce(function($,et){return _.ctx.fillText(et,$,h.bounds.top+g),$+_.ctx.measureText(et).width},h.bounds.left)}},o.prototype.createFontStyle=function(h){var d=h.fontVariant.filter(function(b){return b==="normal"||b==="small-caps"}).join(""),g=fixIOSSystemFonts(h.fontFamily).join(", "),_=isDimensionToken(h.fontSize)?""+h.fontSize.number+h.fontSize.unit:h.fontSize.number+"px";return[[h.fontStyle,d,h.fontWeight,_,g].join(" "),g,_]},o.prototype.renderTextNode=function(h,d){return __awaiter(this,void 0,void 0,function(){var g,_,b,$,et,tt,rt,nt,At=this;return __generator(this,function(at){return g=this.createFontStyle(d),_=g[0],b=g[1],$=g[2],this.ctx.font=_,this.ctx.direction=d.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",et=this.fontMetrics.getMetrics(b,$),tt=et.baseline,rt=et.middle,nt=d.paintOrder,h.textBounds.forEach(function(lt){nt.forEach(function(gt){switch(gt){case 0:At.ctx.fillStyle=asString(d.color),At.renderTextWithLetterSpacing(lt,d.letterSpacing,tt);var _t=d.textShadow;_t.length&&lt.text.trim().length&&(_t.slice(0).reverse().forEach(function(ct){At.ctx.shadowColor=asString(ct.color),At.ctx.shadowOffsetX=ct.offsetX.number*At.options.scale,At.ctx.shadowOffsetY=ct.offsetY.number*At.options.scale,At.ctx.shadowBlur=ct.blur.number,At.renderTextWithLetterSpacing(lt,d.letterSpacing,tt)}),At.ctx.shadowColor="",At.ctx.shadowOffsetX=0,At.ctx.shadowOffsetY=0,At.ctx.shadowBlur=0),d.textDecorationLine.length&&(At.ctx.fillStyle=asString(d.textDecorationColor||d.color),d.textDecorationLine.forEach(function(ct){switch(ct){case 1:At.ctx.fillRect(lt.bounds.left,Math.round(lt.bounds.top+tt),lt.bounds.width,1);break;case 2:At.ctx.fillRect(lt.bounds.left,Math.round(lt.bounds.top),lt.bounds.width,1);break;case 3:At.ctx.fillRect(lt.bounds.left,Math.ceil(lt.bounds.top+rt),lt.bounds.width,1);break}}));break;case 1:d.webkitTextStrokeWidth&&lt.text.trim().length&&(At.ctx.strokeStyle=asString(d.webkitTextStrokeColor),At.ctx.lineWidth=d.webkitTextStrokeWidth,At.ctx.lineJoin=window.chrome?"miter":"round",At.ctx.strokeText(lt.text,lt.bounds.left,lt.bounds.top+tt)),At.ctx.strokeStyle="",At.ctx.lineWidth=0,At.ctx.lineJoin="miter";break}})}),[2]})})},o.prototype.renderReplacedElement=function(h,d,g){if(g&&h.intrinsicWidth>0&&h.intrinsicHeight>0){var _=contentBox(h),b=calculatePaddingBoxPath(d);this.path(b),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(g,0,0,h.intrinsicWidth,h.intrinsicHeight,_.left,_.top,_.width,_.height),this.ctx.restore()}},o.prototype.renderNodeContent=function(h){return __awaiter(this,void 0,void 0,function(){var d,g,_,b,$,et,pt,pt,tt,rt,nt,At,mt,at,lt,Qt,gt,_t,ct,pt,dt,mt,Qt;return __generator(this,function(xt){switch(xt.label){case 0:this.applyEffects(h.getEffects(4)),d=h.container,g=h.curves,_=d.styles,b=0,$=d.textNodes,xt.label=1;case 1:return b<$.length?(et=$[b],[4,this.renderTextNode(et,_)]):[3,4];case 2:xt.sent(),xt.label=3;case 3:return b++,[3,1];case 4:if(!(d instanceof ImageElementContainer))return[3,8];xt.label=5;case 5:return xt.trys.push([5,7,,8]),[4,this.context.cache.match(d.src)];case 6:return pt=xt.sent(),this.renderReplacedElement(d,g,pt),[3,8];case 7:return xt.sent(),this.context.logger.error("Error loading image "+d.src),[3,8];case 8:if(d instanceof CanvasElementContainer&&this.renderReplacedElement(d,g,d.canvas),!(d instanceof SVGElementContainer))return[3,12];xt.label=9;case 9:return xt.trys.push([9,11,,12]),[4,this.context.cache.match(d.svg)];case 10:return pt=xt.sent(),this.renderReplacedElement(d,g,pt),[3,12];case 11:return xt.sent(),this.context.logger.error("Error loading svg "+d.svg.substring(0,255)),[3,12];case 12:return d instanceof IFrameElementContainer&&d.tree?(tt=new o(this.context,{scale:this.options.scale,backgroundColor:d.backgroundColor,x:0,y:0,width:d.width,height:d.height}),[4,tt.render(d.tree)]):[3,14];case 13:rt=xt.sent(),d.width&&d.height&&this.ctx.drawImage(rt,0,0,d.width,d.height,d.bounds.left,d.bounds.top,d.bounds.width,d.bounds.height),xt.label=14;case 14:if(d instanceof InputElementContainer&&(nt=Math.min(d.bounds.width,d.bounds.height),d.type===CHECKBOX?d.checked&&(this.ctx.save(),this.path([new Vector(d.bounds.left+nt*.39363,d.bounds.top+nt*.79),new Vector(d.bounds.left+nt*.16,d.bounds.top+nt*.5549),new Vector(d.bounds.left+nt*.27347,d.bounds.top+nt*.44071),new Vector(d.bounds.left+nt*.39694,d.bounds.top+nt*.5649),new Vector(d.bounds.left+nt*.72983,d.bounds.top+nt*.23),new Vector(d.bounds.left+nt*.84,d.bounds.top+nt*.34085),new Vector(d.bounds.left+nt*.39363,d.bounds.top+nt*.79)]),this.ctx.fillStyle=asString(INPUT_COLOR),this.ctx.fill(),this.ctx.restore()):d.type===RADIO&&d.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(d.bounds.left+nt/2,d.bounds.top+nt/2,nt/4,0,Math.PI*2,!0),this.ctx.fillStyle=asString(INPUT_COLOR),this.ctx.fill(),this.ctx.restore())),isTextInputElement(d)&&d.value.length){switch(At=this.createFontStyle(_),mt=At[0],at=At[1],lt=this.fontMetrics.getMetrics(mt,at).baseline,this.ctx.font=mt,this.ctx.fillStyle=asString(_.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=canvasTextAlign(d.styles.textAlign),Qt=contentBox(d),gt=0,d.styles.textAlign){case 1:gt+=Qt.width/2;break;case 2:gt+=Qt.width;break}_t=Qt.add(gt,0,0,-Qt.height/2+1),this.ctx.save(),this.path([new Vector(Qt.left,Qt.top),new Vector(Qt.left+Qt.width,Qt.top),new Vector(Qt.left+Qt.width,Qt.top+Qt.height),new Vector(Qt.left,Qt.top+Qt.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new TextBounds(d.value,_t),_.letterSpacing,lt),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!contains(d.styles.display,2048))return[3,20];if(d.styles.listStyleImage===null)return[3,19];if(ct=d.styles.listStyleImage,ct.type!==0)return[3,18];pt=void 0,dt=ct.url,xt.label=15;case 15:return xt.trys.push([15,17,,18]),[4,this.context.cache.match(dt)];case 16:return pt=xt.sent(),this.ctx.drawImage(pt,d.bounds.left-(pt.width+10),d.bounds.top),[3,18];case 17:return xt.sent(),this.context.logger.error("Error loading list-style-image "+dt),[3,18];case 18:return[3,20];case 19:h.listValue&&d.styles.listStyleType!==-1&&(mt=this.createFontStyle(_)[0],this.ctx.font=mt,this.ctx.fillStyle=asString(_.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",Qt=new Bounds(d.bounds.left,d.bounds.top+getAbsoluteValue(d.styles.paddingTop,d.bounds.width),d.bounds.width,computeLineHeight(_.lineHeight,_.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new TextBounds(h.listValue,Qt),_.letterSpacing,computeLineHeight(_.lineHeight,_.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),xt.label=20;case 20:return[2]}})})},o.prototype.renderStackContent=function(h){return __awaiter(this,void 0,void 0,function(){var d,g,ct,_,b,ct,$,et,ct,tt,rt,ct,nt,At,ct,at,lt,ct,gt,_t,ct;return __generator(this,function(pt){switch(pt.label){case 0:if(contains(h.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(h.element)];case 1:pt.sent(),d=0,g=h.negativeZIndex,pt.label=2;case 2:return d<g.length?(ct=g[d],[4,this.renderStack(ct)]):[3,5];case 3:pt.sent(),pt.label=4;case 4:return d++,[3,2];case 5:return[4,this.renderNodeContent(h.element)];case 6:pt.sent(),_=0,b=h.nonInlineLevel,pt.label=7;case 7:return _<b.length?(ct=b[_],[4,this.renderNode(ct)]):[3,10];case 8:pt.sent(),pt.label=9;case 9:return _++,[3,7];case 10:$=0,et=h.nonPositionedFloats,pt.label=11;case 11:return $<et.length?(ct=et[$],[4,this.renderStack(ct)]):[3,14];case 12:pt.sent(),pt.label=13;case 13:return $++,[3,11];case 14:tt=0,rt=h.nonPositionedInlineLevel,pt.label=15;case 15:return tt<rt.length?(ct=rt[tt],[4,this.renderStack(ct)]):[3,18];case 16:pt.sent(),pt.label=17;case 17:return tt++,[3,15];case 18:nt=0,At=h.inlineLevel,pt.label=19;case 19:return nt<At.length?(ct=At[nt],[4,this.renderNode(ct)]):[3,22];case 20:pt.sent(),pt.label=21;case 21:return nt++,[3,19];case 22:at=0,lt=h.zeroOrAutoZIndexOrTransformedOrOpacity,pt.label=23;case 23:return at<lt.length?(ct=lt[at],[4,this.renderStack(ct)]):[3,26];case 24:pt.sent(),pt.label=25;case 25:return at++,[3,23];case 26:gt=0,_t=h.positiveZIndex,pt.label=27;case 27:return gt<_t.length?(ct=_t[gt],[4,this.renderStack(ct)]):[3,30];case 28:pt.sent(),pt.label=29;case 29:return gt++,[3,27];case 30:return[2]}})})},o.prototype.mask=function(h){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(h.slice(0).reverse()),this.ctx.closePath()},o.prototype.path=function(h){this.ctx.beginPath(),this.formatPath(h),this.ctx.closePath()},o.prototype.formatPath=function(h){var d=this;h.forEach(function(g,_){var b=isBezierCurve(g)?g.start:g;_===0?d.ctx.moveTo(b.x,b.y):d.ctx.lineTo(b.x,b.y),isBezierCurve(g)&&d.ctx.bezierCurveTo(g.startControl.x,g.startControl.y,g.endControl.x,g.endControl.y,g.end.x,g.end.y)})},o.prototype.renderRepeat=function(h,d,g,_){this.path(h),this.ctx.fillStyle=d,this.ctx.translate(g,_),this.ctx.fill(),this.ctx.translate(-g,-_)},o.prototype.resizeImage=function(h,d,g){var _;if(h.width===d&&h.height===g)return h;var b=(_=this.canvas.ownerDocument)!==null&&_!==void 0?_:document,$=b.createElement("canvas");$.width=Math.max(1,d),$.height=Math.max(1,g);var et=$.getContext("2d");return et.drawImage(h,0,0,h.width,h.height,0,0,d,g),$},o.prototype.renderBackgroundImage=function(h){return __awaiter(this,void 0,void 0,function(){var d,g,_,b,$,et;return __generator(this,function(tt){switch(tt.label){case 0:d=h.styles.backgroundImage.length-1,g=function(rt){var nt,At,at,Ht,Ar,ar,Vt,Xt,kt,lt,Ht,Ar,ar,Vt,Xt,gt,_t,ct,pt,dt,mt,Qt,xt,bt,kt,Lt,Ht,Pt,jt,Vt,Xt,nr,Ar,ar,Wt,pr,dr,yr,Br,Lr,Ur,or;return __generator(this,function(mr){switch(mr.label){case 0:if(rt.type!==0)return[3,5];nt=void 0,At=rt.url,mr.label=1;case 1:return mr.trys.push([1,3,,4]),[4,_.context.cache.match(At)];case 2:return nt=mr.sent(),[3,4];case 3:return mr.sent(),_.context.logger.error("Error loading background-image "+At),[3,4];case 4:return nt&&(at=calculateBackgroundRendering(h,d,[nt.width,nt.height,nt.width/nt.height]),Ht=at[0],Ar=at[1],ar=at[2],Vt=at[3],Xt=at[4],kt=_.ctx.createPattern(_.resizeImage(nt,Vt,Xt),"repeat"),_.renderRepeat(Ht,kt,Ar,ar)),[3,6];case 5:isLinearGradient(rt)?(lt=calculateBackgroundRendering(h,d,[null,null,null]),Ht=lt[0],Ar=lt[1],ar=lt[2],Vt=lt[3],Xt=lt[4],gt=calculateGradientDirection(rt.angle,Vt,Xt),_t=gt[0],ct=gt[1],pt=gt[2],dt=gt[3],mt=gt[4],Qt=document.createElement("canvas"),Qt.width=Vt,Qt.height=Xt,xt=Qt.getContext("2d"),bt=xt.createLinearGradient(ct,dt,pt,mt),processColorStops(rt.stops,_t).forEach(function(Ir){return bt.addColorStop(Ir.stop,asString(Ir.color))}),xt.fillStyle=bt,xt.fillRect(0,0,Vt,Xt),Vt>0&&Xt>0&&(kt=_.ctx.createPattern(Qt,"repeat"),_.renderRepeat(Ht,kt,Ar,ar))):isRadialGradient(rt)&&(Lt=calculateBackgroundRendering(h,d,[null,null,null]),Ht=Lt[0],Pt=Lt[1],jt=Lt[2],Vt=Lt[3],Xt=Lt[4],nr=rt.position.length===0?[FIFTY_PERCENT]:rt.position,Ar=getAbsoluteValue(nr[0],Vt),ar=getAbsoluteValue(nr[nr.length-1],Xt),Wt=calculateRadius(rt,Ar,ar,Vt,Xt),pr=Wt[0],dr=Wt[1],pr>0&&dr>0&&(yr=_.ctx.createRadialGradient(Pt+Ar,jt+ar,0,Pt+Ar,jt+ar,pr),processColorStops(rt.stops,pr*2).forEach(function(Ir){return yr.addColorStop(Ir.stop,asString(Ir.color))}),_.path(Ht),_.ctx.fillStyle=yr,pr!==dr?(Br=h.bounds.left+.5*h.bounds.width,Lr=h.bounds.top+.5*h.bounds.height,Ur=dr/pr,or=1/Ur,_.ctx.save(),_.ctx.translate(Br,Lr),_.ctx.transform(1,0,0,Ur,0,0),_.ctx.translate(-Br,-Lr),_.ctx.fillRect(Pt,or*(jt-Lr)+Lr,Vt,Xt*or),_.ctx.restore()):_.ctx.fill())),mr.label=6;case 6:return d--,[2]}})},_=this,b=0,$=h.styles.backgroundImage.slice(0).reverse(),tt.label=1;case 1:return b<$.length?(et=$[b],[5,g(et)]):[3,4];case 2:tt.sent(),tt.label=3;case 3:return b++,[3,1];case 4:return[2]}})})},o.prototype.renderSolidBorder=function(h,d,g){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(_){return this.path(parsePathForBorder(g,d)),this.ctx.fillStyle=asString(h),this.ctx.fill(),[2]})})},o.prototype.renderDoubleBorder=function(h,d,g,_){return __awaiter(this,void 0,void 0,function(){var b,$;return __generator(this,function(et){switch(et.label){case 0:return d<3?[4,this.renderSolidBorder(h,g,_)]:[3,2];case 1:return et.sent(),[2];case 2:return b=parsePathForBorderDoubleOuter(_,g),this.path(b),this.ctx.fillStyle=asString(h),this.ctx.fill(),$=parsePathForBorderDoubleInner(_,g),this.path($),this.ctx.fill(),[2]}})})},o.prototype.renderNodeBackgroundAndBorders=function(h){return __awaiter(this,void 0,void 0,function(){var d,g,_,b,$,et,tt,rt,nt=this;return __generator(this,function(At){switch(At.label){case 0:return this.applyEffects(h.getEffects(2)),d=h.container.styles,g=!isTransparent(d.backgroundColor)||d.backgroundImage.length,_=[{style:d.borderTopStyle,color:d.borderTopColor,width:d.borderTopWidth},{style:d.borderRightStyle,color:d.borderRightColor,width:d.borderRightWidth},{style:d.borderBottomStyle,color:d.borderBottomColor,width:d.borderBottomWidth},{style:d.borderLeftStyle,color:d.borderLeftColor,width:d.borderLeftWidth}],b=calculateBackgroundCurvedPaintingArea(getBackgroundValueForIndex(d.backgroundClip,0),h.curves),g||d.boxShadow.length?(this.ctx.save(),this.path(b),this.ctx.clip(),isTransparent(d.backgroundColor)||(this.ctx.fillStyle=asString(d.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(h.container)]):[3,2];case 1:At.sent(),this.ctx.restore(),d.boxShadow.slice(0).reverse().forEach(function(at){nt.ctx.save();var lt=calculateBorderBoxPath(h.curves),gt=at.inset?0:MASK_OFFSET,_t=transformPath(lt,-gt+(at.inset?1:-1)*at.spread.number,(at.inset?1:-1)*at.spread.number,at.spread.number*(at.inset?-2:2),at.spread.number*(at.inset?-2:2));at.inset?(nt.path(lt),nt.ctx.clip(),nt.mask(_t)):(nt.mask(lt),nt.ctx.clip(),nt.path(_t)),nt.ctx.shadowOffsetX=at.offsetX.number+gt,nt.ctx.shadowOffsetY=at.offsetY.number,nt.ctx.shadowColor=asString(at.color),nt.ctx.shadowBlur=at.blur.number,nt.ctx.fillStyle=at.inset?asString(at.color):"rgba(0,0,0,1)",nt.ctx.fill(),nt.ctx.restore()}),At.label=2;case 2:$=0,et=0,tt=_,At.label=3;case 3:return et<tt.length?(rt=tt[et],rt.style!==0&&!isTransparent(rt.color)&&rt.width>0?rt.style!==2?[3,5]:[4,this.renderDashedDottedBorder(rt.color,rt.width,$,h.curves,2)]:[3,11]):[3,13];case 4:return At.sent(),[3,11];case 5:return rt.style!==3?[3,7]:[4,this.renderDashedDottedBorder(rt.color,rt.width,$,h.curves,3)];case 6:return At.sent(),[3,11];case 7:return rt.style!==4?[3,9]:[4,this.renderDoubleBorder(rt.color,rt.width,$,h.curves)];case 8:return At.sent(),[3,11];case 9:return[4,this.renderSolidBorder(rt.color,$,h.curves)];case 10:At.sent(),At.label=11;case 11:$++,At.label=12;case 12:return et++,[3,3];case 13:return[2]}})})},o.prototype.renderDashedDottedBorder=function(h,d,g,_,b){return __awaiter(this,void 0,void 0,function(){var $,et,tt,rt,nt,At,at,lt,gt,_t,ct,pt,dt,mt,Qt,xt,Qt,xt;return __generator(this,function(bt){return this.ctx.save(),$=parsePathForBorderStroke(_,g),et=parsePathForBorder(_,g),b===2&&(this.path(et),this.ctx.clip()),isBezierCurve(et[0])?(tt=et[0].start.x,rt=et[0].start.y):(tt=et[0].x,rt=et[0].y),isBezierCurve(et[1])?(nt=et[1].end.x,At=et[1].end.y):(nt=et[1].x,At=et[1].y),g===0||g===2?at=Math.abs(tt-nt):at=Math.abs(rt-At),this.ctx.beginPath(),b===3?this.formatPath($):this.formatPath(et.slice(0,2)),lt=d<3?d*3:d*2,gt=d<3?d*2:d,b===3&&(lt=d,gt=d),_t=!0,at<=lt*2?_t=!1:at<=lt*2+gt?(ct=at/(2*lt+gt),lt*=ct,gt*=ct):(pt=Math.floor((at+gt)/(lt+gt)),dt=(at-pt*lt)/(pt-1),mt=(at-(pt+1)*lt)/pt,gt=mt<=0||Math.abs(gt-dt)<Math.abs(gt-mt)?dt:mt),_t&&(b===3?this.ctx.setLineDash([0,lt+gt]):this.ctx.setLineDash([lt,gt])),b===3?(this.ctx.lineCap="round",this.ctx.lineWidth=d):this.ctx.lineWidth=d*2+1.1,this.ctx.strokeStyle=asString(h),this.ctx.stroke(),this.ctx.setLineDash([]),b===2&&(isBezierCurve(et[0])&&(Qt=et[3],xt=et[0],this.ctx.beginPath(),this.formatPath([new Vector(Qt.end.x,Qt.end.y),new Vector(xt.start.x,xt.start.y)]),this.ctx.stroke()),isBezierCurve(et[1])&&(Qt=et[1],xt=et[2],this.ctx.beginPath(),this.formatPath([new Vector(Qt.end.x,Qt.end.y),new Vector(xt.start.x,xt.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},o.prototype.render=function(h){return __awaiter(this,void 0,void 0,function(){var d;return __generator(this,function(g){switch(g.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=asString(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),d=parseStackingContexts(h),[4,this.renderStack(d)];case 1:return g.sent(),this.applyEffects([]),[2,this.canvas]}})})},o}(Renderer),isTextInputElement=function(s){return s instanceof TextareaElementContainer||s instanceof SelectElementContainer?!0:s instanceof InputElementContainer&&s.type!==RADIO&&s.type!==CHECKBOX},calculateBackgroundCurvedPaintingArea=function(s,o){switch(s){case 0:return calculateBorderBoxPath(o);case 2:return calculateContentBoxPath(o);case 1:default:return calculatePaddingBoxPath(o)}},canvasTextAlign=function(s){switch(s){case 1:return"center";case 2:return"right";case 0:default:return"left"}},iOSBrokenFonts=["-apple-system","system-ui"],fixIOSSystemFonts=function(s){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?s.filter(function(o){return iOSBrokenFonts.indexOf(o)===-1}):s},ForeignObjectRenderer=function(s){__extends(o,s);function o(h,d){var g=s.call(this,h,d)||this;return g.canvas=d.canvas?d.canvas:document.createElement("canvas"),g.ctx=g.canvas.getContext("2d"),g.options=d,g.canvas.width=Math.floor(d.width*d.scale),g.canvas.height=Math.floor(d.height*d.scale),g.canvas.style.width=d.width+"px",g.canvas.style.height=d.height+"px",g.ctx.scale(g.options.scale,g.options.scale),g.ctx.translate(-d.x,-d.y),g.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+d.width+"x"+d.height+" at "+d.x+","+d.y+") with scale "+d.scale),g}return o.prototype.render=function(h){return __awaiter(this,void 0,void 0,function(){var d,g;return __generator(this,function(_){switch(_.label){case 0:return d=createForeignObjectSVG(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,h),[4,loadSerializedSVG(d)];case 1:return g=_.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=asString(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(g,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},o}(Renderer),loadSerializedSVG=function(s){return new Promise(function(o,h){var d=new Image;d.onload=function(){o(d)},d.onerror=h,d.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(s))})},Logger=function(){function s(o){var h=o.id,d=o.enabled;this.id=h,this.enabled=d,this.start=Date.now()}return s.prototype.debug=function(){for(var o=[],h=0;h<arguments.length;h++)o[h]=arguments[h];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,__spreadArray([this.id,this.getTime()+"ms"],o)):this.info.apply(this,o))},s.prototype.getTime=function(){return Date.now()-this.start},s.prototype.info=function(){for(var o=[],h=0;h<arguments.length;h++)o[h]=arguments[h];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,__spreadArray([this.id,this.getTime()+"ms"],o))},s.prototype.warn=function(){for(var o=[],h=0;h<arguments.length;h++)o[h]=arguments[h];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,__spreadArray([this.id,this.getTime()+"ms"],o)):this.info.apply(this,o))},s.prototype.error=function(){for(var o=[],h=0;h<arguments.length;h++)o[h]=arguments[h];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,__spreadArray([this.id,this.getTime()+"ms"],o)):this.info.apply(this,o))},s.instances={},s}(),Context=function(){function s(o,h){var d;this.windowBounds=h,this.instanceName="#"+s.instanceCount++,this.logger=new Logger({id:this.instanceName,enabled:o.logging}),this.cache=(d=o.cache)!==null&&d!==void 0?d:new Cache(this,o)}return s.instanceCount=1,s}(),html2canvas=function(s,o){return o===void 0&&(o={}),renderElement(s,o)};typeof window<"u"&&CacheStorage.setContext(window);var renderElement=function(s,o){return __awaiter(void 0,void 0,void 0,function(){var h,d,g,_,b,$,et,tt,rt,nt,At,at,lt,gt,_t,ct,pt,dt,mt,Qt,bt,xt,bt,kt,Lt,Ht,Pt,jt,Vt,Xt,nr,Ar,ar,Wt,pr,dr,yr,Br,Lr,Ur;return __generator(this,function(or){switch(or.label){case 0:if(!s||typeof s!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(h=s.ownerDocument,!h)throw new Error("Element is not attached to a Document");if(d=h.defaultView,!d)throw new Error("Document is not attached to a Window");return g={allowTaint:(kt=o.allowTaint)!==null&&kt!==void 0?kt:!1,imageTimeout:(Lt=o.imageTimeout)!==null&&Lt!==void 0?Lt:15e3,proxy:o.proxy,useCORS:(Ht=o.useCORS)!==null&&Ht!==void 0?Ht:!1},_=__assign({logging:(Pt=o.logging)!==null&&Pt!==void 0?Pt:!0,cache:o.cache},g),b={windowWidth:(jt=o.windowWidth)!==null&&jt!==void 0?jt:d.innerWidth,windowHeight:(Vt=o.windowHeight)!==null&&Vt!==void 0?Vt:d.innerHeight,scrollX:(Xt=o.scrollX)!==null&&Xt!==void 0?Xt:d.pageXOffset,scrollY:(nr=o.scrollY)!==null&&nr!==void 0?nr:d.pageYOffset},$=new Bounds(b.scrollX,b.scrollY,b.windowWidth,b.windowHeight),et=new Context(_,$),tt=(Ar=o.foreignObjectRendering)!==null&&Ar!==void 0?Ar:!1,rt={allowTaint:(ar=o.allowTaint)!==null&&ar!==void 0?ar:!1,onclone:o.onclone,ignoreElements:o.ignoreElements,inlineImages:tt,copyStyles:tt},et.logger.debug("Starting document clone with size "+$.width+"x"+$.height+" scrolled to "+-$.left+","+-$.top),nt=new DocumentCloner(et,s,rt),At=nt.clonedReferenceElement,At?[4,nt.toIFrame(h,$)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return at=or.sent(),lt=isBodyElement(At)||isHTMLElement(At)?parseDocumentSize(At.ownerDocument):parseBounds(et,At),gt=lt.width,_t=lt.height,ct=lt.left,pt=lt.top,dt=parseBackgroundColor(et,At,o.backgroundColor),mt={canvas:o.canvas,backgroundColor:dt,scale:(pr=(Wt=o.scale)!==null&&Wt!==void 0?Wt:d.devicePixelRatio)!==null&&pr!==void 0?pr:1,x:((dr=o.x)!==null&&dr!==void 0?dr:0)+ct,y:((yr=o.y)!==null&&yr!==void 0?yr:0)+pt,width:(Br=o.width)!==null&&Br!==void 0?Br:Math.ceil(gt),height:(Lr=o.height)!==null&&Lr!==void 0?Lr:Math.ceil(_t)},tt?(et.logger.debug("Document cloned, using foreign object rendering"),bt=new ForeignObjectRenderer(et,mt),[4,bt.render(At)]):[3,3];case 2:return Qt=or.sent(),[3,5];case 3:return et.logger.debug("Document cloned, element located at "+ct+","+pt+" with size "+gt+"x"+_t+" using computed rendering"),et.logger.debug("Starting DOM parsing"),xt=parseTree(et,At),dt===xt.styles.backgroundColor&&(xt.styles.backgroundColor=COLORS.TRANSPARENT),et.logger.debug("Starting renderer for element at "+mt.x+","+mt.y+" with size "+mt.width+"x"+mt.height),bt=new CanvasRenderer(et,mt),[4,bt.render(xt)];case 4:Qt=or.sent(),or.label=5;case 5:return(!((Ur=o.removeContainer)!==null&&Ur!==void 0)||Ur)&&(DocumentCloner.destroy(at)||et.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),et.logger.debug("Finished rendering"),[2,Qt]}})})},parseBackgroundColor=function(s,o,h){var d=o.ownerDocument,g=d.documentElement?parseColor(s,getComputedStyle(d.documentElement).backgroundColor):COLORS.TRANSPARENT,_=d.body?parseColor(s,getComputedStyle(d.body).backgroundColor):COLORS.TRANSPARENT,b=typeof h=="string"?parseColor(s,h):h===null?COLORS.TRANSPARENT:4294967295;return o===d.documentElement?isTransparent(g)?isTransparent(_)?b:_:g:b};const GEMINI_API_KEY="AIzaSyCUspjopyRDqf8iR-ftL7UsPyaYfAt1p_M",OSRM_URL="https://router.project-osrm.org",blobUrl=(s,o="image/jpeg")=>URL.createObjectURL(new Blob([s],{type:o}));async function fetchGemini(s,o){const h="https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent?key="+GEMINI_API_KEY,d=[];if(o){const b=o.replace(/^data:image\/\w+;base64,/,"");d.push({inline_data:{mime_type:"image/jpeg",data:b}})}d.push({text:s});const g=await fetch(h,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:d}]})});if(!g.ok)throw new Error(`Gemini error ${g.status}: ${await g.text()}`);return(await g.json()).candidates[0].content.parts[0].text}function App(){const[s,o]=reactExports.useState(null),[h,d]=reactExports.useState(""),[g,_]=reactExports.useState(""),[b,$]=reactExports.useState(null),[et,tt]=reactExports.useState(null),[rt,nt]=reactExports.useState(!1),[At,at]=reactExports.useState("Pronto!"),[lt,gt]=reactExports.useState([]),[_t,ct]=reactExports.useState(0),[pt,dt]=reactExports.useState(null),[mt,Qt]=reactExports.useState({lat:"",lng:""}),[xt,bt]=reactExports.useState(null),kt=reactExports.useRef(null),Lt=reactExports.useRef(null),Ht=reactExports.useRef(null),Pt=reactExports.useRef(null),jt=reactExports.useRef(null),Vt=[{name:"Bar",lat:40.8367,lng:16.5931},{name:"Casa",lat:40.8362,lng:16.5925}],Xt=ur=>gt(lr=>[...lr.slice(-19),`${new Date().toLocaleTimeString()}: ${ur}`]);reactExports.useEffect(()=>{const ur=lr=>{lr.absolute&&lr.alpha!=null&&ct(lr.alpha)};return window.addEventListener("deviceorientation",ur),()=>window.removeEventListener("deviceorientation",ur)},[]),reactExports.useEffect(()=>{const ur=navigator.geolocation.watchPosition(lr=>dt({lat:lr.coords.latitude,lng:lr.coords.longitude}),()=>{},{enableHighAccuracy:!0});return()=>navigator.geolocation.clearWatch(ur)},[]),reactExports.useEffect(()=>{!Ht.current||Pt.current||(Pt.current=L$2.map(Ht.current,{center:[40.8362,16.5936],zoom:15,zoomControl:!1,attributionControl:!1,preferCanvas:!0}),L$2.tileLayer("https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",{subdomains:"abcd",crossOrigin:!0,attribution:""}).addTo(Pt.current),Lt.current=L$2.layerGroup().addTo(Pt.current),Vt.forEach(({lat:ur,lng:lr,name:Xr})=>{L$2.marker([ur,lr]).bindPopup(Xr).addTo(Lt.current)}))},[]),reactExports.useEffect(()=>{!Pt.current||!pt||(Pt.current.eachLayer(ur=>{ur instanceof L$2.CircleMarker&&Pt.current.removeLayer(ur)}),kt.current&&(Pt.current.removeLayer(kt.current),kt.current=null),L$2.circleMarker([pt.lat,pt.lng],{radius:6,color:"#00ffff",fillColor:"#00ffff",fillOpacity:.8}).addTo(Pt.current),xt&&fetch(`${OSRM_URL}/route/v1/driving/${pt.lng},${pt.lat};${xt.lng},${xt.lat}?overview=full&geometries=geojson`).then(ur=>ur.json()).then(ur=>{const lr=ur.routes[0].geometry.coordinates.map(([Xr,zr])=>[zr,Xr]);kt.current=L$2.polyline(lr,{color:"red",weight:4}).addTo(Pt.current)}).catch(ur=>console.warn("OSRM error",ur)))},[pt,xt]);const nr=async()=>{at("Connessione in corso"),Xt(" handleConnect");try{const ur=new FrameMsg;await ur.connect(),Xt(" connected"),ur.attachPrintResponseHandler(lr=>Xt("[Frame] "+lr)),await ur.uploadStdLuaLibs([StdLua.DataMin,StdLua.PlainTextMin,StdLua.CameraMin,StdLua.SpriteMin]),Xt(" libs loaded"),await ur.uploadFrameApp(markinoFrameApp),Xt(" Lua script uploaded"),await ur.startFrameApp(),o(ur),at("Occhiali pronti!")}catch(ur){Xt(" connect: "+ur.message),at("Errore connect: "+ur.message)}},Ar=async()=>{if(!s||!Ht.current){at("Errore: init mappa o frame");return}at(" Snap mappa"),Xt(" sendMapToFrame");try{const ur=await html2canvas(Ht.current,{useCORS:!0,allowTaint:!1,backgroundColor:"#111827",scale:2}),Xr=await(await new Promise((kr,Tr)=>ur.toBlob(Mr=>Mr?kr(Mr):Tr("toBlob fallito"),"image/jpeg",.9))).arrayBuffer(),zr=await TxSprite.fromImageBytes(Xr,36e3);await s.sendMessage(32,zr.pack()),Xt(" mappa inviata"),at("Mappa mostrata!")}catch(ur){Xt(" map error: "+ur),at("Errore mappa")}};async function ar(){if(!s||!Ht.current){at("Init mappa o frame");return}at(" Snap Indexed-PNG"),Xt(" sendMapIndexed");try{const ur=await html2canvas(Ht.current,{useCORS:!0,backgroundColor:"#111827",scale:1}),lr=ur.width,Xr=ur.height,kr=ur.getContext("2d").getImageData(0,0,lr,Xr),Tr=[0,0,0,255,0,128,0,255,128,0,0,255,0,200,255,255],Mr=UPNGExports.encode([kr.data.buffer],lr,Xr,2,Tr),nn=new Uint8Array(Mr),jr=await TxSprite.fromIndexedPngBytes(nn.buffer,!0);await s.sendMessage(32,jr.pack()),Xt(" Indexed-PNG inviata"),at("Mappa Indexed-PNG mostrata!")}catch(ur){console.error(ur),Xt(" sendMapIndexed error: "+ur.message),at("Errore Indexed-PNG")}}const Wt=()=>{jt.current||(jt.current=setInterval(Ar,5e3),Xt(" Autoupdate ON"))},pr=()=>{jt.current&&(clearInterval(jt.current),jt.current=null,Xt(" Autoupdate OFF"))},dr=()=>{const ur=parseFloat(mt.lat),lr=parseFloat(mt.lng);!isNaN(ur)&&!isNaN(lr)&&(bt({lat:ur,lng:lr}),Xt(` destinazione settata: ${ur.toFixed(5)},${lr.toFixed(5)}`)),Qt({lat:"",lng:""})},yr=async()=>{if(!s)return at("Connetti prima gli occhiali!");at("Cattura foto"),Xt(" handleCapture");try{const ur=new RxPhoto({}),lr=await ur.attach(s);await s.sendMessage(13,new TxCaptureSettings(720).pack());const Xr=await lr.get();ur.detach(s);const zr=blobUrl(Xr);$(zr),tt(null),nt(!1),at("Foto catturata (nascosta)")}catch(ur){Xt(" capture: "+ur.message),at("Errore capture: "+ur.message)}},Br=async()=>{var ur;if(!s)return at("Connetti prima gli occhiali!");at("Generazione immagine"),Xt(" handleGenerateImage");try{const lr=`https://image.pollinations.ai/prompt/${encodeURIComponent(h||"abstract art")}`,zr=await(await fetch(lr)).arrayBuffer(),kr=blobUrl(zr);$(kr),nt(!0);const Tr=await TxSprite.fromImageBytes(zr,36e3),Mr=(ur=Tr.toPngBytes)==null?void 0:ur.call(Tr);Mr&&tt(blobUrl(Mr,"image/png")),await s.sendMessage(32,Tr.pack()),Xt(" sprite inviato agli occhiali"),at("Immagine Pollinations mostrata!")}catch(lr){Xt(" generateImage: "+lr.message),at("Errore generazione immagine: "+lr.message)}},Lr=async()=>{at("Preparazione richiesta a Gemini"),Xt(" handleSend");try{let ur;if(b){const zr=await(await fetch(b)).blob();ur=await new Promise(kr=>{const Tr=new FileReader;Tr.onloadend=()=>kr(Tr.result),Tr.readAsDataURL(zr)})}const lr=await fetchGemini(h,ur);_(lr),Xt(" Gemini reply"),s&&(await s.sendMessage(10,new TxPlainText(lr).pack()),at("Risposta mostrata sugli occhiali!"))}catch(ur){Xt(" handleSend: "+ur.message),at("Errore Gemini: "+ur.message)}},Ur=async()=>{s&&(await s.sendMessage(10,new TxPlainText("").pack()),at("Schermo pulito"))},or=async()=>{if(s)try{await s.stopFrameApp(),await s.disconnect(),o(null),at("Disconnesso")}catch(ur){at("Errore disconnect: "+ur.message)}},mr=async()=>{if(!s)return at("Connetti prima");Xt(" showDashboard"),await s.sendMessage(10,new TxPlainText("").pack());const lr=new Date().toLocaleTimeString(),Xr=await s.sendLua('print(frame.battery_level() .. " / " .. collectgarbage("count"))',{awaitPrint:!0});let zr="meteo sconosciuto";if(pt)try{const nn=(await(await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${pt.lat}&longitude=${pt.lng}&current_weather=true`)).json()).current_weather;zr=`${nn.temperature}C, vento ${nn.windspeed} km/h`}catch{}const kr=`Ora: ${lr}
 Batt/Mem: ${Xr}
 Meteo: ${zr}`;await s.sendMessage(10,new TxPlainText(kr).pack()),at("Dashboard inviata")},Ir=(ur,lr=!1)=>({...ur,...lr?styles.btnDisabled:{}});return jsxRuntimeExports.jsxs("div",{style:styles.container,children:[jsxRuntimeExports.jsx("h1",{style:styles.header,children:"Markino Solutions  Frame"}),jsxRuntimeExports.jsxs("div",{style:styles.controls,children:[jsxRuntimeExports.jsx("button",{onClick:nr,style:Ir(styles.btnSecondary,!!s),children:"Connetti & Carica"}),jsxRuntimeExports.jsx("button",{onClick:mr,disabled:!s,style:Ir(styles.btnSecondary,!s),children:" Dashboard"}),jsxRuntimeExports.jsx("button",{onClick:yr,disabled:!s,style:Ir(styles.btnPrimary,!s),children:" Cattura Foto"}),jsxRuntimeExports.jsx("button",{onClick:()=>nt(ur=>!ur),disabled:!b,style:Ir(styles.btnSecondary,!b),children:rt?"Nascondi Media":"Mostra Media"}),jsxRuntimeExports.jsx("button",{onClick:Ur,disabled:!s,style:Ir(styles.btnSecondary,!s),children:" Pulisci Schermo"}),jsxRuntimeExports.jsxs("div",{style:{marginBottom:8},children:[jsxRuntimeExports.jsx("button",{onClick:ar,disabled:!s,children:" Mostra Mappa"}),jsxRuntimeExports.jsx("button",{onClick:Wt,children:" Auto"}),jsxRuntimeExports.jsx("button",{onClick:pr,children:" Stop"})]}),jsxRuntimeExports.jsxs("div",{style:{marginBottom:16,textAlign:"center"},children:[jsxRuntimeExports.jsx("input",{style:styles.input,type:"text",placeholder:"lat",value:mt.lat,onChange:ur=>Qt({...mt,lat:ur.target.value})}),jsxRuntimeExports.jsx("input",{style:styles.input,type:"text",placeholder:"lng",value:mt.lng,onChange:ur=>Qt({...mt,lng:ur.target.value})}),jsxRuntimeExports.jsx("button",{onClick:dr,style:Ir(styles.btnPrimary,!s),disabled:!s,children:" Avvia Navigazione"})]}),jsxRuntimeExports.jsx("button",{onClick:or,disabled:!s,style:Ir(styles.btnSecondary,!s),children:"Disconnetti"}),jsxRuntimeExports.jsx("button",{onClick:Br,disabled:!s||!h,style:Ir(styles.btnPrimary,!s||!h),children:" Genera Immagine"})]}),rt&&b&&jsxRuntimeExports.jsxs("div",{style:styles.imageWrapper,children:[jsxRuntimeExports.jsx("h4",{children:"Originale Pollinations"}),jsxRuntimeExports.jsx("img",{src:b,alt:"original",style:styles.image})]}),rt&&et&&jsxRuntimeExports.jsxs("div",{style:styles.imageWrapper,children:[jsxRuntimeExports.jsx("h4",{children:"Sprite Quantizzato"}),jsxRuntimeExports.jsx("img",{src:et,alt:"sprite",style:styles.image})]}),jsxRuntimeExports.jsx("textarea",{rows:3,value:h,onChange:ur=>d(ur.target.value),placeholder:"Prompt",style:styles.textarea}),jsxRuntimeExports.jsx("button",{onClick:Lr,disabled:!s&&!h,style:Ir(styles.sendButton,!s&&!h),children:"Invia a Gemini & Frame"}),jsxRuntimeExports.jsxs("div",{style:styles.status,children:[jsxRuntimeExports.jsx("b",{children:"Stato:"})," ",At]}),jsxRuntimeExports.jsx("pre",{style:styles.logs,children:lt.join(`
`)}),jsxRuntimeExports.jsxs("div",{style:styles.response,children:[jsxRuntimeExports.jsx("b",{children:"Risposta Gemini:"}),jsxRuntimeExports.jsx("pre",{style:styles.responsePre,children:g})]}),jsxRuntimeExports.jsx("div",{ref:Ht,style:{width:"100%",height:300,borderRadius:8,overflow:"hidden",marginBottom:16,boxShadow:"0 2px 6px rgba(0,0,0,.5)"}})]})}const styles={container:{maxWidth:650,margin:"0 auto",padding:16,backgroundColor:"#111827",color:"#f3f4f6",fontFamily:"'Helvetica Neue', Arial, sans-serif"},imageWrapper:{marginTop:12,textAlign:"center",width:"100%",maxWidth:300,maxHeight:300,overflow:"hidden"},image:{width:"100%",height:"auto",maxHeight:"100%",objectFit:"contain"},header:{textAlign:"center",fontSize:24,marginBottom:16,color:"#60a5fa"},controls:{display:"flex",flexWrap:"wrap",gap:8,justifyContent:"center",marginBottom:16},btnPrimary:{padding:"10px 14px",backgroundColor:"#2563eb",color:"#fff",border:"none",borderRadius:6,cursor:"pointer",flex:1,minWidth:120},btnSecondary:{padding:"10px 14px",backgroundColor:"#059669",color:"#fff",border:"none",borderRadius:6,cursor:"pointer",flex:1,minWidth:120},btnDisabled:{opacity:.5,cursor:"not-allowed"},status:{textAlign:"center",marginBottom:8,color:"#9ca3af"},logs:{backgroundColor:"#1f2937",padding:12,borderRadius:6,fontSize:14,color:"#d1d5db",maxHeight:120,overflowY:"auto",marginBottom:16},input:{width:100,marginRight:8,padding:6,borderRadius:4,border:"1px solid #374151",backgroundColor:"#1f2937",color:"#f3f4f6"}};client.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(React.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));
